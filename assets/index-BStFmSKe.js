(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function jv(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var fm={exports:{}},Ko={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iy;function z2(){if(Iy)return Ko;Iy=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:a,type:r,key:h,ref:o!==void 0?o:null,props:u}}return Ko.Fragment=e,Ko.jsx=n,Ko.jsxs=n,Ko}var ky;function B2(){return ky||(ky=1,fm.exports=z2()),fm.exports}var i=B2(),mm={exports:{}},Be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy;function F2(){if(Dy)return Be;Dy=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),A=Symbol.iterator;function D(L){return L===null||typeof L!="object"?null:(L=A&&L[A]||L["@@iterator"],typeof L=="function"?L:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,P={};function ee(L,Y,he){this.props=L,this.context=Y,this.refs=P,this.updater=he||V}ee.prototype.isReactComponent={},ee.prototype.setState=function(L,Y){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Y,"setState")},ee.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function ue(){}ue.prototype=ee.prototype;function te(L,Y,he){this.props=L,this.context=Y,this.refs=P,this.updater=he||V}var ne=te.prototype=new ue;ne.constructor=te,M(ne,ee.prototype),ne.isPureReactComponent=!0;var F=Array.isArray;function W(){}var C={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function S(L,Y,he){var ge=he.ref;return{$$typeof:a,type:L,key:Y,ref:ge!==void 0?ge:null,props:he}}function E(L,Y){return S(L.type,Y,L.props)}function j(L){return typeof L=="object"&&L!==null&&L.$$typeof===a}function k(L){var Y={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(he){return Y[he]})}var I=/\/+/g;function me(L,Y){return typeof L=="object"&&L!==null&&L.key!=null?k(""+L.key):Y.toString(36)}function ke(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(W,W):(L.status="pending",L.then(function(Y){L.status==="pending"&&(L.status="fulfilled",L.value=Y)},function(Y){L.status==="pending"&&(L.status="rejected",L.reason=Y)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function G(L,Y,he,ge,be){var U=typeof L;(U==="undefined"||U==="boolean")&&(L=null);var de=!1;if(L===null)de=!0;else switch(U){case"bigint":case"string":case"number":de=!0;break;case"object":switch(L.$$typeof){case a:case e:de=!0;break;case _:return de=L._init,G(de(L._payload),Y,he,ge,be)}}if(de)return be=be(L),de=ge===""?"."+me(L,0):ge,F(be)?(he="",de!=null&&(he=de.replace(I,"$&/")+"/"),G(be,Y,he,"",function(Qe){return Qe})):be!=null&&(j(be)&&(be=E(be,he+(be.key==null||L&&L.key===be.key?"":(""+be.key).replace(I,"$&/")+"/")+de)),Y.push(be)),1;de=0;var xe=ge===""?".":ge+":";if(F(L))for(var Te=0;Te<L.length;Te++)ge=L[Te],U=xe+me(ge,Te),de+=G(ge,Y,he,U,be);else if(Te=D(L),typeof Te=="function")for(L=Te.call(L),Te=0;!(ge=L.next()).done;)ge=ge.value,U=xe+me(ge,Te++),de+=G(ge,Y,he,U,be);else if(U==="object"){if(typeof L.then=="function")return G(ke(L),Y,he,ge,be);throw Y=String(L),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return de}function oe(L,Y,he){if(L==null)return L;var ge=[],be=0;return G(L,ge,"","",function(U){return Y.call(he,U,be++)}),ge}function ye(L){if(L._status===-1){var Y=L._result;Y=Y(),Y.then(function(he){(L._status===0||L._status===-1)&&(L._status=1,L._result=he)},function(he){(L._status===0||L._status===-1)&&(L._status=2,L._result=he)}),L._status===-1&&(L._status=0,L._result=Y)}if(L._status===1)return L._result.default;throw L._result}var je=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},Ue={map:oe,forEach:function(L,Y,he){oe(L,function(){Y.apply(this,arguments)},he)},count:function(L){var Y=0;return oe(L,function(){Y++}),Y},toArray:function(L){return oe(L,function(Y){return Y})||[]},only:function(L){if(!j(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Be.Activity=w,Be.Children=Ue,Be.Component=ee,Be.Fragment=n,Be.Profiler=o,Be.PureComponent=te,Be.StrictMode=r,Be.Suspense=g,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Be.__COMPILER_RUNTIME={__proto__:null,c:function(L){return C.H.useMemoCache(L)}},Be.cache=function(L){return function(){return L.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(L,Y,he){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ge=M({},L.props),be=L.key;if(Y!=null)for(U in Y.key!==void 0&&(be=""+Y.key),Y)!N.call(Y,U)||U==="key"||U==="__self"||U==="__source"||U==="ref"&&Y.ref===void 0||(ge[U]=Y[U]);var U=arguments.length-2;if(U===1)ge.children=he;else if(1<U){for(var de=Array(U),xe=0;xe<U;xe++)de[xe]=arguments[xe+2];ge.children=de}return S(L.type,be,ge)},Be.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:u,_context:L},L},Be.createElement=function(L,Y,he){var ge,be={},U=null;if(Y!=null)for(ge in Y.key!==void 0&&(U=""+Y.key),Y)N.call(Y,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(be[ge]=Y[ge]);var de=arguments.length-2;if(de===1)be.children=he;else if(1<de){for(var xe=Array(de),Te=0;Te<de;Te++)xe[Te]=arguments[Te+2];be.children=xe}if(L&&L.defaultProps)for(ge in de=L.defaultProps,de)be[ge]===void 0&&(be[ge]=de[ge]);return S(L,U,be)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(L){return{$$typeof:p,render:L}},Be.isValidElement=j,Be.lazy=function(L){return{$$typeof:_,_payload:{_status:-1,_result:L},_init:ye}},Be.memo=function(L,Y){return{$$typeof:x,type:L,compare:Y===void 0?null:Y}},Be.startTransition=function(L){var Y=C.T,he={};C.T=he;try{var ge=L(),be=C.S;be!==null&&be(he,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(W,je)}catch(U){je(U)}finally{Y!==null&&he.types!==null&&(Y.types=he.types),C.T=Y}},Be.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Be.use=function(L){return C.H.use(L)},Be.useActionState=function(L,Y,he){return C.H.useActionState(L,Y,he)},Be.useCallback=function(L,Y){return C.H.useCallback(L,Y)},Be.useContext=function(L){return C.H.useContext(L)},Be.useDebugValue=function(){},Be.useDeferredValue=function(L,Y){return C.H.useDeferredValue(L,Y)},Be.useEffect=function(L,Y){return C.H.useEffect(L,Y)},Be.useEffectEvent=function(L){return C.H.useEffectEvent(L)},Be.useId=function(){return C.H.useId()},Be.useImperativeHandle=function(L,Y,he){return C.H.useImperativeHandle(L,Y,he)},Be.useInsertionEffect=function(L,Y){return C.H.useInsertionEffect(L,Y)},Be.useLayoutEffect=function(L,Y){return C.H.useLayoutEffect(L,Y)},Be.useMemo=function(L,Y){return C.H.useMemo(L,Y)},Be.useOptimistic=function(L,Y){return C.H.useOptimistic(L,Y)},Be.useReducer=function(L,Y,he){return C.H.useReducer(L,Y,he)},Be.useRef=function(L){return C.H.useRef(L)},Be.useState=function(L){return C.H.useState(L)},Be.useSyncExternalStore=function(L,Y,he){return C.H.useSyncExternalStore(L,Y,he)},Be.useTransition=function(){return C.H.useTransition()},Be.version="19.2.1",Be}var My;function up(){return My||(My=1,mm.exports=F2()),mm.exports}var z=up();const Nc=jv(z);var pm={exports:{}},Qo={},gm={exports:{}},xm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy;function H2(){return Oy||(Oy=1,(function(a){function e(G,oe){var ye=G.length;G.push(oe);e:for(;0<ye;){var je=ye-1>>>1,Ue=G[je];if(0<o(Ue,oe))G[je]=oe,G[ye]=Ue,ye=je;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var oe=G[0],ye=G.pop();if(ye!==oe){G[0]=ye;e:for(var je=0,Ue=G.length,L=Ue>>>1;je<L;){var Y=2*(je+1)-1,he=G[Y],ge=Y+1,be=G[ge];if(0>o(he,ye))ge<Ue&&0>o(be,he)?(G[je]=be,G[ge]=ye,je=ge):(G[je]=he,G[Y]=ye,je=Y);else if(ge<Ue&&0>o(be,ye))G[je]=be,G[ge]=ye,je=ge;else break e}}return oe}function o(G,oe){var ye=G.sortIndex-oe.sortIndex;return ye!==0?ye:G.id-oe.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();a.unstable_now=function(){return h.now()-p}}var g=[],x=[],_=1,w=null,A=3,D=!1,V=!1,M=!1,P=!1,ee=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function ne(G){for(var oe=n(x);oe!==null;){if(oe.callback===null)r(x);else if(oe.startTime<=G)r(x),oe.sortIndex=oe.expirationTime,e(g,oe);else break;oe=n(x)}}function F(G){if(M=!1,ne(G),!V)if(n(g)!==null)V=!0,W||(W=!0,k());else{var oe=n(x);oe!==null&&ke(F,oe.startTime-G)}}var W=!1,C=-1,N=5,S=-1;function E(){return P?!0:!(a.unstable_now()-S<N)}function j(){if(P=!1,W){var G=a.unstable_now();S=G;var oe=!0;try{e:{V=!1,M&&(M=!1,ue(C),C=-1),D=!0;var ye=A;try{t:{for(ne(G),w=n(g);w!==null&&!(w.expirationTime>G&&E());){var je=w.callback;if(typeof je=="function"){w.callback=null,A=w.priorityLevel;var Ue=je(w.expirationTime<=G);if(G=a.unstable_now(),typeof Ue=="function"){w.callback=Ue,ne(G),oe=!0;break t}w===n(g)&&r(g),ne(G)}else r(g);w=n(g)}if(w!==null)oe=!0;else{var L=n(x);L!==null&&ke(F,L.startTime-G),oe=!1}}break e}finally{w=null,A=ye,D=!1}oe=void 0}}finally{oe?k():W=!1}}}var k;if(typeof te=="function")k=function(){te(j)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,me=I.port2;I.port1.onmessage=j,k=function(){me.postMessage(null)}}else k=function(){ee(j,0)};function ke(G,oe){C=ee(function(){G(a.unstable_now())},oe)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(G){G.callback=null},a.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<G?Math.floor(1e3/G):5},a.unstable_getCurrentPriorityLevel=function(){return A},a.unstable_next=function(G){switch(A){case 1:case 2:case 3:var oe=3;break;default:oe=A}var ye=A;A=oe;try{return G()}finally{A=ye}},a.unstable_requestPaint=function(){P=!0},a.unstable_runWithPriority=function(G,oe){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ye=A;A=G;try{return oe()}finally{A=ye}},a.unstable_scheduleCallback=function(G,oe,ye){var je=a.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?je+ye:je):ye=je,G){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=ye+Ue,G={id:_++,callback:oe,priorityLevel:G,startTime:ye,expirationTime:Ue,sortIndex:-1},ye>je?(G.sortIndex=ye,e(x,G),n(g)===null&&G===n(x)&&(M?(ue(C),C=-1):M=!0,ke(F,ye-je))):(G.sortIndex=Ue,e(g,G),V||D||(V=!0,W||(W=!0,k()))),G},a.unstable_shouldYield=E,a.unstable_wrapCallback=function(G){var oe=A;return function(){var ye=A;A=oe;try{return G.apply(this,arguments)}finally{A=ye}}}})(xm)),xm}var Py;function G2(){return Py||(Py=1,gm.exports=H2()),gm.exports}var ym={exports:{}},Nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ly;function K2(){if(Ly)return Nn;Ly=1;var a=up();function e(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)x+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,x,_){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:g,containerInfo:x,implementation:_}}var h=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Nn.createPortal=function(g,x){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return u(g,x,null,_)},Nn.flushSync=function(g){var x=h.T,_=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=x,r.p=_,r.d.f()}},Nn.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,r.d.C(g,x))},Nn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Nn.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var _=x.as,w=p(_,x.crossOrigin),A=typeof x.integrity=="string"?x.integrity:void 0,D=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;_==="style"?r.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:w,integrity:A,fetchPriority:D}):_==="script"&&r.d.X(g,{crossOrigin:w,integrity:A,fetchPriority:D,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Nn.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var _=p(x.as,x.crossOrigin);r.d.M(g,{crossOrigin:_,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&r.d.M(g)},Nn.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var _=x.as,w=p(_,x.crossOrigin);r.d.L(g,_,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Nn.preloadModule=function(g,x){if(typeof g=="string")if(x){var _=p(x.as,x.crossOrigin);r.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:_,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else r.d.m(g)},Nn.requestFormReset=function(g){r.d.r(g)},Nn.unstable_batchedUpdates=function(g,x){return g(x)},Nn.useFormState=function(g,x,_){return h.H.useFormState(g,x,_)},Nn.useFormStatus=function(){return h.H.useHostTransitionStatus()},Nn.version="19.2.1",Nn}var Vy;function Q2(){if(Vy)return ym.exports;Vy=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),ym.exports=K2(),ym.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uy;function $2(){if(Uy)return Qo;Uy=1;var a=G2(),e=up(),n=Q2();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,l=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(l=s.return),t=s.return;while(t)}return s.tag===3?l:null}function h(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(r(188))}function x(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(r(188));return s!==t?null:t}for(var l=t,c=s;;){var f=l.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){l=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===l)return g(f),t;if(m===c)return g(f),s;m=m.sibling}throw Error(r(188))}if(l.return!==c.return)l=f,c=m;else{for(var b=!1,T=f.child;T;){if(T===l){b=!0,l=f,c=m;break}if(T===c){b=!0,c=f,l=m;break}T=T.sibling}if(!b){for(T=m.child;T;){if(T===l){b=!0,l=m,c=f;break}if(T===c){b=!0,c=m,l=f;break}T=T.sibling}if(!b)throw Error(r(189))}}if(l.alternate!==c)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?t:s}function _(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=_(t),s!==null)return s;t=t.sibling}return null}var w=Object.assign,A=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),ue=Symbol.for("react.consumer"),te=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),E=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=j&&t[j]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function me(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case ee:return"Profiler";case P:return"StrictMode";case F:return"Suspense";case W:return"SuspenseList";case S:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case V:return"Portal";case te:return t.displayName||"Context";case ue:return(t._context.displayName||"Context")+".Consumer";case ne:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return s=t.displayName||null,s!==null?s:me(t.type)||"Memo";case N:s=t._payload,t=t._init;try{return me(t(s))}catch{}}return null}var ke=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},je=[],Ue=-1;function L(t){return{current:t}}function Y(t){0>Ue||(t.current=je[Ue],je[Ue]=null,Ue--)}function he(t,s){Ue++,je[Ue]=t.current,t.current=s}var ge=L(null),be=L(null),U=L(null),de=L(null);function xe(t,s){switch(he(U,s),he(be,t),he(ge,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?ey(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=ey(s),t=ty(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Y(ge),he(ge,t)}function Te(){Y(ge),Y(be),Y(U)}function Qe(t){t.memoizedState!==null&&he(de,t);var s=ge.current,l=ty(s,t.type);s!==l&&(he(be,t),he(ge,l))}function sn(t){be.current===t&&(Y(ge),Y(be)),de.current===t&&(Y(de),Bo._currentValue=ye)}var an,vn;function Xt(t){if(an===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);an=s&&s[1]||"",vn=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+an+t+vn}var Vs=!1;function rs(t,s){if(!t||Vs)return"";Vs=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Z){var $=Z}Reflect.construct(t,[],ie)}else{try{ie.call()}catch(Z){$=Z}t.call(ie.prototype)}}else{try{throw Error()}catch(Z){$=Z}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Z){if(Z&&$&&typeof Z.stack=="string")return[Z.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),b=m[0],T=m[1];if(b&&T){var O=b.split(`
`),Q=T.split(`
`);for(f=c=0;c<O.length&&!O[c].includes("DetermineComponentFrameRoot");)c++;for(;f<Q.length&&!Q[f].includes("DetermineComponentFrameRoot");)f++;if(c===O.length||f===Q.length)for(c=O.length-1,f=Q.length-1;1<=c&&0<=f&&O[c]!==Q[f];)f--;for(;1<=c&&0<=f;c--,f--)if(O[c]!==Q[f]){if(c!==1||f!==1)do if(c--,f--,0>f||O[c]!==Q[f]){var ae=`
`+O[c].replace(" at new "," at ");return t.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",t.displayName)),ae}while(1<=c&&0<=f);break}}}finally{Vs=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?Xt(l):""}function Us(t,s){switch(t.tag){case 26:case 27:case 5:return Xt(t.type);case 16:return Xt("Lazy");case 13:return t.child!==s&&s!==null?Xt("Suspense Fallback"):Xt("Suspense");case 19:return Xt("SuspenseList");case 0:case 15:return rs(t.type,!1);case 11:return rs(t.type.render,!1);case 1:return rs(t.type,!0);case 31:return Xt("Activity");default:return""}}function da(t){try{var s="",l=null;do s+=Us(t,l),l=t,t=t.return;while(t);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Et=Object.prototype.hasOwnProperty,jt=a.unstable_scheduleCallback,is=a.unstable_cancelCallback,qr=a.unstable_shouldYield,qs=a.unstable_requestPaint,X=a.unstable_now,Le=a.unstable_getCurrentPriorityLevel,yt=a.unstable_ImmediatePriority,vt=a.unstable_UserBlockingPriority,At=a.unstable_NormalPriority,Ns=a.unstable_LowPriority,Dn=a.unstable_IdlePriority,Ai=a.log,Ci=a.unstable_setDisableYieldValue,Gn=null,Wt=null;function Mn(t){if(typeof Ai=="function"&&Ci(t),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(Gn,t)}catch{}}var Ct=Math.clz32?Math.clz32:Ii,Ri=Math.log,Ua=Math.LN2;function Ii(t){return t>>>=0,t===0?32:31-(Ri(t)/Ua|0)|0}var Kn=256,Es=262144,Mt=4194304;function Qn(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function se(t,s,l){var c=t.pendingLanes;if(c===0)return 0;var f=0,m=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var T=c&134217727;return T!==0?(c=T&~m,c!==0?f=Qn(c):(b&=T,b!==0?f=Qn(b):l||(l=T&~t,l!==0&&(f=Qn(l))))):(T=c&~m,T!==0?f=Qn(T):b!==0?f=Qn(b):l||(l=c&~t,l!==0&&(f=Qn(l)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,l=s&-s,m>=l||m===32&&(l&4194048)!==0)?s:f}function fe(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function ve(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Se(){var t=Mt;return Mt<<=1,(Mt&62914560)===0&&(Mt=4194304),t}function Ve(t){for(var s=[],l=0;31>l;l++)s.push(t);return s}function ze(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function _n(t,s,l,c,f,m){var b=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var T=t.entanglements,O=t.expirationTimes,Q=t.hiddenUpdates;for(l=b&~l;0<l;){var ae=31-Ct(l),ie=1<<ae;T[ae]=0,O[ae]=-1;var $=Q[ae];if($!==null)for(Q[ae]=null,ae=0;ae<$.length;ae++){var Z=$[ae];Z!==null&&(Z.lane&=-536870913)}l&=~ie}c!==0&&wn(t,c,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(b&~s))}function wn(t,s,l){t.pendingLanes|=s,t.suspendedLanes&=~s;var c=31-Ct(s);t.entangledLanes|=s,t.entanglements[c]=t.entanglements[c]|1073741824|l&261930}function Jt(t,s){var l=t.entangledLanes|=s;for(t=t.entanglements;l;){var c=31-Ct(l),f=1<<c;f&s|t[c]&s&&(t[c]|=s),l&=~f}}function un(t,s){var l=s&-s;return l=(l&42)!==0?1:ls(l),(l&(t.suspendedLanes|s))!==0?0:l}function ls(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ss(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ql(){var t=oe.p;return t!==0?t:(t=window.event,t===void 0?32:Ey(t.type))}function On(t,s){var l=oe.p;try{return oe.p=t,s()}finally{oe.p=l}}var os=Math.random().toString(36).slice(2),Rt="__reactFiber$"+os,Zt="__reactProps$"+os,De="__reactContainer$"+os,Pe="__reactEvents$"+os,qa="__reactListeners$"+os,ki="__reactHandles$"+os,zc="__reactResources$"+os,zs="__reactMarker$"+os;function Di(t){delete t[Rt],delete t[Zt],delete t[Pe],delete t[qa],delete t[ki]}function Bs(t){var s=t[Rt];if(s)return s;for(var l=t.parentNode;l;){if(s=l[De]||l[Rt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(t=oy(t);t!==null;){if(l=t[Rt])return l;t=oy(t)}return s}t=l,l=t.parentNode}return null}function cs(t){if(t=t[Rt]||t[De]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function $n(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function Fs(t){var s=t[zc];return s||(s=t[zc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function zt(t){t[zs]=!0}var $l=new Set,Yl={};function Hs(t,s){Gs(t,s),Gs(t+"Capture",s)}function Gs(t,s){for(Yl[t]=s,t=0;t<s.length;t++)$l.add(s[t])}var Xl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wl={},Jl={};function Bc(t){return Et.call(Jl,t)?!0:Et.call(Wl,t)?!1:Xl.test(t)?Jl[t]=!0:(Wl[t]=!0,!1)}function Mi(t,s,l){if(Bc(s))if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+l)}}function Yn(t,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+l)}}function Bt(t,s,l,c){if(c===null)t.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(s,l,""+c)}}function rn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function za(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Zl(t,s,l){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return f.call(this)},set:function(b){l=""+b,m.call(this,b)}}),Object.defineProperty(t,s,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function ut(t){if(!t._valueTracker){var s=za(t)?"checked":"value";t._valueTracker=Zl(t,s,""+t[s])}}function zr(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var l=s.getValue(),c="";return t&&(c=za(t)?t.checked?"true":"false":t.value),t=c,t!==l?(s.setValue(t),!0):!1}function Ks(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Br=/[\n"\\]/g;function Pn(t){return t.replace(Br,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Oi(t,s,l,c,f,m,b,T){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),s!=null?b==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+rn(s)):t.value!==""+rn(s)&&(t.value=""+rn(s)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),s!=null?eo(t,b,rn(s)):l!=null?eo(t,b,rn(l)):c!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+rn(T):t.removeAttribute("name")}function Fc(t,s,l,c,f,m,b,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){ut(t);return}l=l!=null?""+rn(l):"",s=s!=null?""+rn(s):l,T||s===t.value||(t.value=s),t.defaultValue=s}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=T?t.checked:!!c,t.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),ut(t)}function eo(t,s,l){s==="number"&&Ks(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function Ba(t,s,l,c){if(t=t.options,s){s={};for(var f=0;f<l.length;f++)s["$"+l[f]]=!0;for(l=0;l<t.length;l++)f=s.hasOwnProperty("$"+t[l].value),t[l].selected!==f&&(t[l].selected=f),f&&c&&(t[l].defaultSelected=!0)}else{for(l=""+rn(l),s=null,f=0;f<t.length;f++){if(t[f].value===l){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}s!==null||t[f].disabled||(s=t[f])}s!==null&&(s.selected=!0)}}function Hc(t,s,l){if(s!=null&&(s=""+rn(s),s!==t.value&&(t.value=s),l==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=l!=null?""+rn(l):""}function Fa(t,s,l,c){if(s==null){if(c!=null){if(l!=null)throw Error(r(92));if(ke(c)){if(1<c.length)throw Error(r(93));c=c[0]}l=c}l==null&&(l=""),s=l}l=rn(s),t.defaultValue=l,c=t.textContent,c===l&&c!==""&&c!==null&&(t.value=c),ut(t)}function Ln(t,s){if(s){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=s;return}}t.textContent=s}var Gc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function to(t,s,l){var c=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":c?t.setProperty(s,l):typeof l!="number"||l===0||Gc.has(s)?s==="float"?t.cssFloat=l:t[s]=(""+l).trim():t[s]=l+"px"}function no(t,s,l){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in s)c=s[f],s.hasOwnProperty(f)&&l[f]!==c&&to(t,f,c)}else for(var m in s)s.hasOwnProperty(m)&&to(t,m,s[m])}function Pi(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ha=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Li(t){return Ha.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ts(){}var so=null;function us(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ga=null,Qs=null;function Fr(t){var s=cs(t);if(s&&(t=s.stateNode)){var l=t[Zt]||null;e:switch(t=s.stateNode,s.type){case"input":if(Oi(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Pn(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var c=l[s];if(c!==t&&c.form===t.form){var f=c[Zt]||null;if(!f)throw Error(r(90));Oi(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<l.length;s++)c=l[s],c.form===t.form&&zr(c)}break e;case"textarea":Hc(t,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&Ba(t,!!l.multiple,s,!1)}}}var Vi=!1;function Ka(t,s,l){if(Vi)return t(s,l);Vi=!0;try{var c=t(s);return c}finally{if(Vi=!1,(Ga!==null||Qs!==null)&&(Uu(),Ga&&(s=Ga,t=Qs,Qs=Ga=null,Fr(s),t)))for(s=0;s<t.length;s++)Fr(t[s])}}function js(t,s){var l=t.stateNode;if(l===null)return null;var c=l[Zt]||null;if(c===null)return null;l=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(r(231,s,typeof l));return l}var ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hr=!1;if(ds)try{var ft={};Object.defineProperty(ft,"passive",{get:function(){Hr=!0}}),window.addEventListener("test",ft,ft),window.removeEventListener("test",ft,ft)}catch{Hr=!1}var $s=null,ao=null,Gr=null;function ro(){if(Gr)return Gr;var t,s=ao,l=s.length,c,f="value"in $s?$s.value:$s.textContent,m=f.length;for(t=0;t<l&&s[t]===f[t];t++);var b=l-t;for(c=1;c<=b&&s[l-c]===f[m-c];c++);return Gr=f.slice(t,1<c?1-c:void 0)}function Kr(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ha(){return!0}function As(){return!1}function dn(t){function s(l,c,f,m,b){this._reactName=l,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(l=t[T],this[T]=l?l(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ha:As,this.isPropagationStopped=As,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ha)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ha)},persist:function(){},isPersistent:ha}),s}var fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ys=dn(fa),Qa=w({},fa,{view:0,detail:0}),io=dn(Qa),$a,Ui,Xs,qi=w({},Qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ya,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xs&&(Xs&&t.type==="mousemove"?($a=t.screenX-Xs.screenX,Ui=t.screenY-Xs.screenY):Ui=$a=0,Xs=t),$a)},movementY:function(t){return"movementY"in t?t.movementY:Ui}}),lo=dn(qi),Qr=w({},qi,{dataTransfer:0}),Qc=dn(Qr),$c=w({},Qa,{relatedTarget:0}),$r=dn($c),oo=w({},fa,{animationName:0,elapsedTime:0,pseudoElement:0}),Yc=dn(oo),zi=w({},fa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Xc=dn(zi),Wc=w({},fa,{data:0}),Ws=dn(Wc),Jc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tu(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=eu[t])?!!s[t]:!1}function Ya(){return tu}var An=w({},Qa,{key:function(t){if(t.key){var s=Jc[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Kr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Zc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ya,charCode:function(t){return t.type==="keypress"?Kr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Kr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nu=dn(An),su=w({},qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ma=dn(su),d=w({},Qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ya}),y=dn(d),v=w({},fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=dn(v),H=w({},qi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),J=dn(H),pe=w({},fa,{newState:0,oldState:0}),He=dn(pe),Ot=[9,13,27,32],it=ds&&"CompositionEvent"in window,St=null;ds&&"documentMode"in document&&(St=document.documentMode);var hs=ds&&"TextEvent"in window&&!St,Js=ds&&(!it||St&&8<St&&11>=St),Cs=" ",Rs=!1;function Yr(t,s){switch(t){case"keyup":return Ot.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bi(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fi=!1;function dw(t,s){switch(t){case"compositionend":return Bi(s);case"keypress":return s.which!==32?null:(Rs=!0,Cs);case"textInput":return t=s.data,t===Cs&&Rs?null:t;default:return null}}function hw(t,s){if(Fi)return t==="compositionend"||!it&&Yr(t,s)?(t=ro(),Gr=ao=$s=null,Fi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Js&&s.locale!=="ko"?null:s.data;default:return null}}var fw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d0(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!fw[t.type]:s==="textarea"}function h0(t,s,l,c){Ga?Qs?Qs.push(c):Qs=[c]:Ga=c,s=Ku(s,"onChange"),0<s.length&&(l=new Ys("onChange","change",null,l,c),t.push({event:l,listeners:s}))}var co=null,uo=null;function mw(t){$x(t,0)}function au(t){var s=$n(t);if(zr(s))return t}function f0(t,s){if(t==="change")return s}var m0=!1;if(ds){var bh;if(ds){var vh="oninput"in document;if(!vh){var p0=document.createElement("div");p0.setAttribute("oninput","return;"),vh=typeof p0.oninput=="function"}bh=vh}else bh=!1;m0=bh&&(!document.documentMode||9<document.documentMode)}function g0(){co&&(co.detachEvent("onpropertychange",x0),uo=co=null)}function x0(t){if(t.propertyName==="value"&&au(uo)){var s=[];h0(s,uo,t,us(t)),Ka(mw,s)}}function pw(t,s,l){t==="focusin"?(g0(),co=s,uo=l,co.attachEvent("onpropertychange",x0)):t==="focusout"&&g0()}function gw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return au(uo)}function xw(t,s){if(t==="click")return au(s)}function yw(t,s){if(t==="input"||t==="change")return au(s)}function bw(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Xn=typeof Object.is=="function"?Object.is:bw;function ho(t,s){if(Xn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var l=Object.keys(t),c=Object.keys(s);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var f=l[c];if(!Et.call(s,f)||!Xn(t[f],s[f]))return!1}return!0}function y0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function b0(t,s){var l=y0(t);t=0;for(var c;l;){if(l.nodeType===3){if(c=t+l.textContent.length,t<=s&&c>=s)return{node:l,offset:s-t};t=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=y0(l)}}function v0(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?v0(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function _0(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Ks(t.document);s instanceof t.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)t=s.contentWindow;else break;s=Ks(t.document)}return s}function _h(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var vw=ds&&"documentMode"in document&&11>=document.documentMode,Hi=null,wh=null,fo=null,Nh=!1;function w0(t,s,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Nh||Hi==null||Hi!==Ks(c)||(c=Hi,"selectionStart"in c&&_h(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),fo&&ho(fo,c)||(fo=c,c=Ku(wh,"onSelect"),0<c.length&&(s=new Ys("onSelect","select",null,s,l),t.push({event:s,listeners:c}),s.target=Hi)))}function Xr(t,s){var l={};return l[t.toLowerCase()]=s.toLowerCase(),l["Webkit"+t]="webkit"+s,l["Moz"+t]="moz"+s,l}var Gi={animationend:Xr("Animation","AnimationEnd"),animationiteration:Xr("Animation","AnimationIteration"),animationstart:Xr("Animation","AnimationStart"),transitionrun:Xr("Transition","TransitionRun"),transitionstart:Xr("Transition","TransitionStart"),transitioncancel:Xr("Transition","TransitionCancel"),transitionend:Xr("Transition","TransitionEnd")},Eh={},N0={};ds&&(N0=document.createElement("div").style,"AnimationEvent"in window||(delete Gi.animationend.animation,delete Gi.animationiteration.animation,delete Gi.animationstart.animation),"TransitionEvent"in window||delete Gi.transitionend.transition);function Wr(t){if(Eh[t])return Eh[t];if(!Gi[t])return t;var s=Gi[t],l;for(l in s)if(s.hasOwnProperty(l)&&l in N0)return Eh[t]=s[l];return t}var E0=Wr("animationend"),S0=Wr("animationiteration"),T0=Wr("animationstart"),_w=Wr("transitionrun"),ww=Wr("transitionstart"),Nw=Wr("transitioncancel"),j0=Wr("transitionend"),A0=new Map,Sh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sh.push("scrollEnd");function Is(t,s){A0.set(t,s),Hs(s,[t])}var ru=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},fs=[],Ki=0,Th=0;function iu(){for(var t=Ki,s=Th=Ki=0;s<t;){var l=fs[s];fs[s++]=null;var c=fs[s];fs[s++]=null;var f=fs[s];fs[s++]=null;var m=fs[s];if(fs[s++]=null,c!==null&&f!==null){var b=c.pending;b===null?f.next=f:(f.next=b.next,b.next=f),c.pending=f}m!==0&&C0(l,f,m)}}function lu(t,s,l,c){fs[Ki++]=t,fs[Ki++]=s,fs[Ki++]=l,fs[Ki++]=c,Th|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function jh(t,s,l,c){return lu(t,s,l,c),ou(t)}function Jr(t,s){return lu(t,null,null,s),ou(t)}function C0(t,s,l){t.lanes|=l;var c=t.alternate;c!==null&&(c.lanes|=l);for(var f=!1,m=t.return;m!==null;)m.childLanes|=l,c=m.alternate,c!==null&&(c.childLanes|=l),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&s!==null&&(f=31-Ct(l),t=m.hiddenUpdates,c=t[f],c===null?t[f]=[s]:c.push(s),s.lane=l|536870912),m):null}function ou(t){if(50<Oo)throw Oo=0,Lf=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Qi={};function Ew(t,s,l,c){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(t,s,l,c){return new Ew(t,s,l,c)}function Ah(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pa(t,s){var l=t.alternate;return l===null?(l=Wn(t.tag,s,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=s,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,s=t.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function R0(t,s){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,s=l.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function cu(t,s,l,c,f,m){var b=0;if(c=t,typeof t=="function")Ah(t)&&(b=1);else if(typeof t=="string")b=C2(t,l,ge.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case S:return t=Wn(31,l,s,f),t.elementType=S,t.lanes=m,t;case M:return Zr(l.children,f,m,s);case P:b=8,f|=24;break;case ee:return t=Wn(12,l,s,f|2),t.elementType=ee,t.lanes=m,t;case F:return t=Wn(13,l,s,f),t.elementType=F,t.lanes=m,t;case W:return t=Wn(19,l,s,f),t.elementType=W,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case te:b=10;break e;case ue:b=9;break e;case ne:b=11;break e;case C:b=14;break e;case N:b=16,c=null;break e}b=29,l=Error(r(130,t===null?"null":typeof t,"")),c=null}return s=Wn(b,l,s,f),s.elementType=t,s.type=c,s.lanes=m,s}function Zr(t,s,l,c){return t=Wn(7,t,c,s),t.lanes=l,t}function Ch(t,s,l){return t=Wn(6,t,null,s),t.lanes=l,t}function I0(t){var s=Wn(18,null,null,0);return s.stateNode=t,s}function Rh(t,s,l){return s=Wn(4,t.children!==null?t.children:[],t.key,s),s.lanes=l,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var k0=new WeakMap;function ms(t,s){if(typeof t=="object"&&t!==null){var l=k0.get(t);return l!==void 0?l:(s={value:t,source:s,stack:da(s)},k0.set(t,s),s)}return{value:t,source:s,stack:da(s)}}var $i=[],Yi=0,uu=null,mo=0,ps=[],gs=0,Xa=null,Zs=1,ea="";function ga(t,s){$i[Yi++]=mo,$i[Yi++]=uu,uu=t,mo=s}function D0(t,s,l){ps[gs++]=Zs,ps[gs++]=ea,ps[gs++]=Xa,Xa=t;var c=Zs;t=ea;var f=32-Ct(c)-1;c&=~(1<<f),l+=1;var m=32-Ct(s)+f;if(30<m){var b=f-f%5;m=(c&(1<<b)-1).toString(32),c>>=b,f-=b,Zs=1<<32-Ct(s)+f|l<<f|c,ea=m+t}else Zs=1<<m|l<<f|c,ea=t}function Ih(t){t.return!==null&&(ga(t,1),D0(t,1,0))}function kh(t){for(;t===uu;)uu=$i[--Yi],$i[Yi]=null,mo=$i[--Yi],$i[Yi]=null;for(;t===Xa;)Xa=ps[--gs],ps[gs]=null,ea=ps[--gs],ps[gs]=null,Zs=ps[--gs],ps[gs]=null}function M0(t,s){ps[gs++]=Zs,ps[gs++]=ea,ps[gs++]=Xa,Zs=s.id,ea=s.overflow,Xa=t}var hn=null,_t=null,tt=!1,Wa=null,xs=!1,Dh=Error(r(519));function Ja(t){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw po(ms(s,t)),Dh}function O0(t){var s=t.stateNode,l=t.type,c=t.memoizedProps;switch(s[Rt]=t,s[Zt]=c,l){case"dialog":Ye("cancel",s),Ye("close",s);break;case"iframe":case"object":case"embed":Ye("load",s);break;case"video":case"audio":for(l=0;l<Lo.length;l++)Ye(Lo[l],s);break;case"source":Ye("error",s);break;case"img":case"image":case"link":Ye("error",s),Ye("load",s);break;case"details":Ye("toggle",s);break;case"input":Ye("invalid",s),Fc(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ye("invalid",s);break;case"textarea":Ye("invalid",s),Fa(s,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||c.suppressHydrationWarning===!0||Jx(s.textContent,l)?(c.popover!=null&&(Ye("beforetoggle",s),Ye("toggle",s)),c.onScroll!=null&&Ye("scroll",s),c.onScrollEnd!=null&&Ye("scrollend",s),c.onClick!=null&&(s.onclick=Ts),s=!0):s=!1,s||Ja(t,!0)}function P0(t){for(hn=t.return;hn;)switch(hn.tag){case 5:case 31:case 13:xs=!1;return;case 27:case 3:xs=!0;return;default:hn=hn.return}}function Xi(t){if(t!==hn)return!1;if(!tt)return P0(t),tt=!0,!1;var s=t.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||Jf(t.type,t.memoizedProps)),l=!l),l&&_t&&Ja(t),P0(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));_t=ly(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));_t=ly(t)}else s===27?(s=_t,hr(t.type)?(t=sm,sm=null,_t=t):_t=s):_t=hn?bs(t.stateNode.nextSibling):null;return!0}function ei(){_t=hn=null,tt=!1}function Mh(){var t=Wa;return t!==null&&(zn===null?zn=t:zn.push.apply(zn,t),Wa=null),t}function po(t){Wa===null?Wa=[t]:Wa.push(t)}var Oh=L(null),ti=null,xa=null;function Za(t,s,l){he(Oh,s._currentValue),s._currentValue=l}function ya(t){t._currentValue=Oh.current,Y(Oh)}function Ph(t,s,l){for(;t!==null;){var c=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),t===l)break;t=t.return}}function Lh(t,s,l,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=f;for(var O=0;O<s.length;O++)if(T.context===s[O]){m.lanes|=l,T=m.alternate,T!==null&&(T.lanes|=l),Ph(m.return,l,t),c||(b=null);break e}m=T.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(r(341));b.lanes|=l,m=b.alternate,m!==null&&(m.lanes|=l),Ph(b,l,t),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===t){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function Wi(t,s,l,c){t=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var T=f.type;Xn(f.pendingProps.value,b.value)||(t!==null?t.push(T):t=[T])}}else if(f===de.current){if(b=f.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Bo):t=[Bo])}f=f.return}t!==null&&Lh(s,t,l,c),s.flags|=262144}function du(t){for(t=t.firstContext;t!==null;){if(!Xn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ni(t){ti=t,xa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function fn(t){return L0(ti,t)}function hu(t,s){return ti===null&&ni(t),L0(t,s)}function L0(t,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},xa===null){if(t===null)throw Error(r(308));xa=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else xa=xa.next=s;return l}var Sw=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(l,c){t.push(c)}};this.abort=function(){s.aborted=!0,t.forEach(function(l){return l()})}},Tw=a.unstable_scheduleCallback,jw=a.unstable_NormalPriority,Ft={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vh(){return{controller:new Sw,data:new Map,refCount:0}}function go(t){t.refCount--,t.refCount===0&&Tw(jw,function(){t.controller.abort()})}var xo=null,Uh=0,Ji=0,Zi=null;function Aw(t,s){if(xo===null){var l=xo=[];Uh=0,Ji=Ff(),Zi={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Uh++,s.then(V0,V0),s}function V0(){if(--Uh===0&&xo!==null){Zi!==null&&(Zi.status="fulfilled");var t=xo;xo=null,Ji=0,Zi=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function Cw(t,s){var l=[],c={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return t.then(function(){c.status="fulfilled",c.value=s;for(var f=0;f<l.length;f++)(0,l[f])(s)},function(f){for(c.status="rejected",c.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),c}var U0=G.S;G.S=function(t,s){wx=X(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Aw(t,s),U0!==null&&U0(t,s)};var si=L(null);function qh(){var t=si.current;return t!==null?t:xt.pooledCache}function fu(t,s){s===null?he(si,si.current):he(si,s.pool)}function q0(){var t=qh();return t===null?null:{parent:Ft._currentValue,pool:t}}var el=Error(r(460)),zh=Error(r(474)),mu=Error(r(542)),pu={then:function(){}};function z0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function B0(t,s,l){switch(l=t[l],l===void 0?t.push(s):l!==s&&(s.then(Ts,Ts),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,H0(t),t;default:if(typeof s.status=="string")s.then(Ts,Ts);else{if(t=xt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(c){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=c}},function(c){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,H0(t),t}throw ri=s,el}}function ai(t){try{var s=t._init;return s(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ri=l,el):l}}var ri=null;function F0(){if(ri===null)throw Error(r(459));var t=ri;return ri=null,t}function H0(t){if(t===el||t===mu)throw Error(r(483))}var tl=null,yo=0;function gu(t){var s=yo;return yo+=1,tl===null&&(tl=[]),B0(tl,t,s)}function bo(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function xu(t,s){throw s.$$typeof===A?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function G0(t){function s(B,q){if(t){var K=B.deletions;K===null?(B.deletions=[q],B.flags|=16):K.push(q)}}function l(B,q){if(!t)return null;for(;q!==null;)s(B,q),q=q.sibling;return null}function c(B){for(var q=new Map;B!==null;)B.key!==null?q.set(B.key,B):q.set(B.index,B),B=B.sibling;return q}function f(B,q){return B=pa(B,q),B.index=0,B.sibling=null,B}function m(B,q,K){return B.index=K,t?(K=B.alternate,K!==null?(K=K.index,K<q?(B.flags|=67108866,q):K):(B.flags|=67108866,q)):(B.flags|=1048576,q)}function b(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function T(B,q,K,re){return q===null||q.tag!==6?(q=Ch(K,B.mode,re),q.return=B,q):(q=f(q,K),q.return=B,q)}function O(B,q,K,re){var Ce=K.type;return Ce===M?ae(B,q,K.props.children,re,K.key):q!==null&&(q.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===N&&ai(Ce)===q.type)?(q=f(q,K.props),bo(q,K),q.return=B,q):(q=cu(K.type,K.key,K.props,null,B.mode,re),bo(q,K),q.return=B,q)}function Q(B,q,K,re){return q===null||q.tag!==4||q.stateNode.containerInfo!==K.containerInfo||q.stateNode.implementation!==K.implementation?(q=Rh(K,B.mode,re),q.return=B,q):(q=f(q,K.children||[]),q.return=B,q)}function ae(B,q,K,re,Ce){return q===null||q.tag!==7?(q=Zr(K,B.mode,re,Ce),q.return=B,q):(q=f(q,K),q.return=B,q)}function ie(B,q,K){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Ch(""+q,B.mode,K),q.return=B,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case D:return K=cu(q.type,q.key,q.props,null,B.mode,K),bo(K,q),K.return=B,K;case V:return q=Rh(q,B.mode,K),q.return=B,q;case N:return q=ai(q),ie(B,q,K)}if(ke(q)||k(q))return q=Zr(q,B.mode,K,null),q.return=B,q;if(typeof q.then=="function")return ie(B,gu(q),K);if(q.$$typeof===te)return ie(B,hu(B,q),K);xu(B,q)}return null}function $(B,q,K,re){var Ce=q!==null?q.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Ce!==null?null:T(B,q,""+K,re);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case D:return K.key===Ce?O(B,q,K,re):null;case V:return K.key===Ce?Q(B,q,K,re):null;case N:return K=ai(K),$(B,q,K,re)}if(ke(K)||k(K))return Ce!==null?null:ae(B,q,K,re,null);if(typeof K.then=="function")return $(B,q,gu(K),re);if(K.$$typeof===te)return $(B,q,hu(B,K),re);xu(B,K)}return null}function Z(B,q,K,re,Ce){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return B=B.get(K)||null,T(q,B,""+re,Ce);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case D:return B=B.get(re.key===null?K:re.key)||null,O(q,B,re,Ce);case V:return B=B.get(re.key===null?K:re.key)||null,Q(q,B,re,Ce);case N:return re=ai(re),Z(B,q,K,re,Ce)}if(ke(re)||k(re))return B=B.get(K)||null,ae(q,B,re,Ce,null);if(typeof re.then=="function")return Z(B,q,K,gu(re),Ce);if(re.$$typeof===te)return Z(B,q,K,hu(q,re),Ce);xu(q,re)}return null}function Ee(B,q,K,re){for(var Ce=null,at=null,Ae=q,Ke=q=0,We=null;Ae!==null&&Ke<K.length;Ke++){Ae.index>Ke?(We=Ae,Ae=null):We=Ae.sibling;var rt=$(B,Ae,K[Ke],re);if(rt===null){Ae===null&&(Ae=We);break}t&&Ae&&rt.alternate===null&&s(B,Ae),q=m(rt,q,Ke),at===null?Ce=rt:at.sibling=rt,at=rt,Ae=We}if(Ke===K.length)return l(B,Ae),tt&&ga(B,Ke),Ce;if(Ae===null){for(;Ke<K.length;Ke++)Ae=ie(B,K[Ke],re),Ae!==null&&(q=m(Ae,q,Ke),at===null?Ce=Ae:at.sibling=Ae,at=Ae);return tt&&ga(B,Ke),Ce}for(Ae=c(Ae);Ke<K.length;Ke++)We=Z(Ae,B,Ke,K[Ke],re),We!==null&&(t&&We.alternate!==null&&Ae.delete(We.key===null?Ke:We.key),q=m(We,q,Ke),at===null?Ce=We:at.sibling=We,at=We);return t&&Ae.forEach(function(xr){return s(B,xr)}),tt&&ga(B,Ke),Ce}function Ie(B,q,K,re){if(K==null)throw Error(r(151));for(var Ce=null,at=null,Ae=q,Ke=q=0,We=null,rt=K.next();Ae!==null&&!rt.done;Ke++,rt=K.next()){Ae.index>Ke?(We=Ae,Ae=null):We=Ae.sibling;var xr=$(B,Ae,rt.value,re);if(xr===null){Ae===null&&(Ae=We);break}t&&Ae&&xr.alternate===null&&s(B,Ae),q=m(xr,q,Ke),at===null?Ce=xr:at.sibling=xr,at=xr,Ae=We}if(rt.done)return l(B,Ae),tt&&ga(B,Ke),Ce;if(Ae===null){for(;!rt.done;Ke++,rt=K.next())rt=ie(B,rt.value,re),rt!==null&&(q=m(rt,q,Ke),at===null?Ce=rt:at.sibling=rt,at=rt);return tt&&ga(B,Ke),Ce}for(Ae=c(Ae);!rt.done;Ke++,rt=K.next())rt=Z(Ae,B,Ke,rt.value,re),rt!==null&&(t&&rt.alternate!==null&&Ae.delete(rt.key===null?Ke:rt.key),q=m(rt,q,Ke),at===null?Ce=rt:at.sibling=rt,at=rt);return t&&Ae.forEach(function(q2){return s(B,q2)}),tt&&ga(B,Ke),Ce}function gt(B,q,K,re){if(typeof K=="object"&&K!==null&&K.type===M&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case D:e:{for(var Ce=K.key;q!==null;){if(q.key===Ce){if(Ce=K.type,Ce===M){if(q.tag===7){l(B,q.sibling),re=f(q,K.props.children),re.return=B,B=re;break e}}else if(q.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===N&&ai(Ce)===q.type){l(B,q.sibling),re=f(q,K.props),bo(re,K),re.return=B,B=re;break e}l(B,q);break}else s(B,q);q=q.sibling}K.type===M?(re=Zr(K.props.children,B.mode,re,K.key),re.return=B,B=re):(re=cu(K.type,K.key,K.props,null,B.mode,re),bo(re,K),re.return=B,B=re)}return b(B);case V:e:{for(Ce=K.key;q!==null;){if(q.key===Ce)if(q.tag===4&&q.stateNode.containerInfo===K.containerInfo&&q.stateNode.implementation===K.implementation){l(B,q.sibling),re=f(q,K.children||[]),re.return=B,B=re;break e}else{l(B,q);break}else s(B,q);q=q.sibling}re=Rh(K,B.mode,re),re.return=B,B=re}return b(B);case N:return K=ai(K),gt(B,q,K,re)}if(ke(K))return Ee(B,q,K,re);if(k(K)){if(Ce=k(K),typeof Ce!="function")throw Error(r(150));return K=Ce.call(K),Ie(B,q,K,re)}if(typeof K.then=="function")return gt(B,q,gu(K),re);if(K.$$typeof===te)return gt(B,q,hu(B,K),re);xu(B,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,q!==null&&q.tag===6?(l(B,q.sibling),re=f(q,K),re.return=B,B=re):(l(B,q),re=Ch(K,B.mode,re),re.return=B,B=re),b(B)):l(B,q)}return function(B,q,K,re){try{yo=0;var Ce=gt(B,q,K,re);return tl=null,Ce}catch(Ae){if(Ae===el||Ae===mu)throw Ae;var at=Wn(29,Ae,null,B.mode);return at.lanes=re,at.return=B,at}finally{}}}var ii=G0(!0),K0=G0(!1),er=!1;function Bh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function tr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function nr(t,s,l){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(lt&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,s=ou(t),C0(t,null,l),s}return lu(t,c,s,l),ou(t)}function vo(t,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var c=s.lanes;c&=t.pendingLanes,l|=c,s.lanes=l,Jt(t,l)}}function Hh(t,s){var l=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var f=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var b={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,l=l.next}while(l!==null);m===null?f=m=s:m=m.next=s}else f=m=s;l={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=s:t.next=s,l.lastBaseUpdate=s}var Gh=!1;function _o(){if(Gh){var t=Zi;if(t!==null)throw t}}function wo(t,s,l,c){Gh=!1;var f=t.updateQueue;er=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var O=T,Q=O.next;O.next=null,b===null?m=Q:b.next=Q,b=O;var ae=t.alternate;ae!==null&&(ae=ae.updateQueue,T=ae.lastBaseUpdate,T!==b&&(T===null?ae.firstBaseUpdate=Q:T.next=Q,ae.lastBaseUpdate=O))}if(m!==null){var ie=f.baseState;b=0,ae=Q=O=null,T=m;do{var $=T.lane&-536870913,Z=$!==T.lane;if(Z?(Xe&$)===$:(c&$)===$){$!==0&&$===Ji&&(Gh=!0),ae!==null&&(ae=ae.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ee=t,Ie=T;$=s;var gt=l;switch(Ie.tag){case 1:if(Ee=Ie.payload,typeof Ee=="function"){ie=Ee.call(gt,ie,$);break e}ie=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Ie.payload,$=typeof Ee=="function"?Ee.call(gt,ie,$):Ee,$==null)break e;ie=w({},ie,$);break e;case 2:er=!0}}$=T.callback,$!==null&&(t.flags|=64,Z&&(t.flags|=8192),Z=f.callbacks,Z===null?f.callbacks=[$]:Z.push($))}else Z={lane:$,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ae===null?(Q=ae=Z,O=ie):ae=ae.next=Z,b|=$;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;Z=T,T=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);ae===null&&(O=ie),f.baseState=O,f.firstBaseUpdate=Q,f.lastBaseUpdate=ae,m===null&&(f.shared.lanes=0),lr|=b,t.lanes=b,t.memoizedState=ie}}function Q0(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function $0(t,s){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)Q0(l[t],s)}var nl=L(null),yu=L(0);function Y0(t,s){t=ja,he(yu,t),he(nl,s),ja=t|s.baseLanes}function Kh(){he(yu,ja),he(nl,nl.current)}function Qh(){ja=yu.current,Y(nl),Y(yu)}var Jn=L(null),ys=null;function sr(t){var s=t.alternate;he(Pt,Pt.current&1),he(Jn,t),ys===null&&(s===null||nl.current!==null||s.memoizedState!==null)&&(ys=t)}function $h(t){he(Pt,Pt.current),he(Jn,t),ys===null&&(ys=t)}function X0(t){t.tag===22?(he(Pt,Pt.current),he(Jn,t),ys===null&&(ys=t)):ar()}function ar(){he(Pt,Pt.current),he(Jn,Jn.current)}function Zn(t){Y(Jn),ys===t&&(ys=null),Y(Pt)}var Pt=L(0);function bu(t){for(var s=t;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||tm(l)||nm(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ba=0,Ge=null,mt=null,Ht=null,vu=!1,sl=!1,li=!1,_u=0,No=0,al=null,Rw=0;function kt(){throw Error(r(321))}function Yh(t,s){if(s===null)return!1;for(var l=0;l<s.length&&l<t.length;l++)if(!Xn(t[l],s[l]))return!1;return!0}function Xh(t,s,l,c,f,m){return ba=m,Ge=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,G.H=t===null||t.memoizedState===null?Dg:hf,li=!1,m=l(c,f),li=!1,sl&&(m=J0(s,l,c,f)),W0(t),m}function W0(t){G.H=To;var s=mt!==null&&mt.next!==null;if(ba=0,Ht=mt=Ge=null,vu=!1,No=0,al=null,s)throw Error(r(300));t===null||Gt||(t=t.dependencies,t!==null&&du(t)&&(Gt=!0))}function J0(t,s,l,c){Ge=t;var f=0;do{if(sl&&(al=null),No=0,sl=!1,25<=f)throw Error(r(301));if(f+=1,Ht=mt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}G.H=Mg,m=s(l,c)}while(sl);return m}function Iw(){var t=G.H,s=t.useState()[0];return s=typeof s.then=="function"?Eo(s):s,t=t.useState()[0],(mt!==null?mt.memoizedState:null)!==t&&(Ge.flags|=1024),s}function Wh(){var t=_u!==0;return _u=0,t}function Jh(t,s,l){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~l}function Zh(t){if(vu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}vu=!1}ba=0,Ht=mt=Ge=null,sl=!1,No=_u=0,al=null}function Cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?Ge.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function Lt(){if(mt===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var s=Ht===null?Ge.memoizedState:Ht.next;if(s!==null)Ht=s,mt=t;else{if(t===null)throw Ge.alternate===null?Error(r(467)):Error(r(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},Ht===null?Ge.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function wu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Eo(t){var s=No;return No+=1,al===null&&(al=[]),t=B0(al,t,s),s=Ge,(Ht===null?s.memoizedState:Ht.next)===null&&(s=s.alternate,G.H=s===null||s.memoizedState===null?Dg:hf),t}function Nu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Eo(t);if(t.$$typeof===te)return fn(t)}throw Error(r(438,String(t)))}function ef(t){var s=null,l=Ge.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var c=Ge.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=wu(),Ge.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(t),c=0;c<t;c++)l[c]=E;return s.index++,l}function va(t,s){return typeof s=="function"?s(t):s}function Eu(t){var s=Lt();return tf(s,mt,t)}function tf(t,s,l){var c=t.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=l;var f=t.baseQueue,m=c.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}s.baseQueue=f=m,c.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{s=f.next;var T=b=null,O=null,Q=s,ae=!1;do{var ie=Q.lane&-536870913;if(ie!==Q.lane?(Xe&ie)===ie:(ba&ie)===ie){var $=Q.revertLane;if($===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ie===Ji&&(ae=!0);else if((ba&$)===$){Q=Q.next,$===Ji&&(ae=!0);continue}else ie={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(T=O=ie,b=m):O=O.next=ie,Ge.lanes|=$,lr|=$;ie=Q.action,li&&l(m,ie),m=Q.hasEagerState?Q.eagerState:l(m,ie)}else $={lane:ie,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(T=O=$,b=m):O=O.next=$,Ge.lanes|=ie,lr|=ie;Q=Q.next}while(Q!==null&&Q!==s);if(O===null?b=m:O.next=T,!Xn(m,t.memoizedState)&&(Gt=!0,ae&&(l=Zi,l!==null)))throw l;t.memoizedState=m,t.baseState=b,t.baseQueue=O,c.lastRenderedState=m}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function nf(t){var s=Lt(),l=s.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=t;var c=l.dispatch,f=l.pending,m=s.memoizedState;if(f!==null){l.pending=null;var b=f=f.next;do m=t(m,b.action),b=b.next;while(b!==f);Xn(m,s.memoizedState)||(Gt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),l.lastRenderedState=m}return[m,c]}function Z0(t,s,l){var c=Ge,f=Lt(),m=tt;if(m){if(l===void 0)throw Error(r(407));l=l()}else l=s();var b=!Xn((mt||f).memoizedState,l);if(b&&(f.memoizedState=l,Gt=!0),f=f.queue,rf(ng.bind(null,c,f,t),[t]),f.getSnapshot!==s||b||Ht!==null&&Ht.memoizedState.tag&1){if(c.flags|=2048,rl(9,{destroy:void 0},tg.bind(null,c,f,l,s),null),xt===null)throw Error(r(349));m||(ba&127)!==0||eg(c,s,l)}return l}function eg(t,s,l){t.flags|=16384,t={getSnapshot:s,value:l},s=Ge.updateQueue,s===null?(s=wu(),Ge.updateQueue=s,s.stores=[t]):(l=s.stores,l===null?s.stores=[t]:l.push(t))}function tg(t,s,l,c){s.value=l,s.getSnapshot=c,sg(s)&&ag(t)}function ng(t,s,l){return l(function(){sg(s)&&ag(t)})}function sg(t){var s=t.getSnapshot;t=t.value;try{var l=s();return!Xn(t,l)}catch{return!0}}function ag(t){var s=Jr(t,2);s!==null&&Bn(s,t,2)}function sf(t){var s=Cn();if(typeof t=="function"){var l=t;if(t=l(),li){Mn(!0);try{l()}finally{Mn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:t},s}function rg(t,s,l,c){return t.baseState=l,tf(t,mt,typeof c=="function"?c:va)}function kw(t,s,l,c,f){if(ju(t))throw Error(r(485));if(t=s.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};G.T!==null?l(!0):m.isTransition=!1,c(m),l=s.pending,l===null?(m.next=s.pending=m,ig(s,m)):(m.next=l.next,s.pending=l.next=m)}}function ig(t,s){var l=s.action,c=s.payload,f=t.state;if(s.isTransition){var m=G.T,b={};G.T=b;try{var T=l(f,c),O=G.S;O!==null&&O(b,T),lg(t,s,T)}catch(Q){af(t,s,Q)}finally{m!==null&&b.types!==null&&(m.types=b.types),G.T=m}}else try{m=l(f,c),lg(t,s,m)}catch(Q){af(t,s,Q)}}function lg(t,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){og(t,s,c)},function(c){return af(t,s,c)}):og(t,s,l)}function og(t,s,l){s.status="fulfilled",s.value=l,cg(s),t.state=l,s=t.pending,s!==null&&(l=s.next,l===s?t.pending=null:(l=l.next,s.next=l,ig(t,l)))}function af(t,s,l){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=l,cg(s),s=s.next;while(s!==c)}t.action=null}function cg(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function ug(t,s){return s}function dg(t,s){if(tt){var l=xt.formState;if(l!==null){e:{var c=Ge;if(tt){if(_t){t:{for(var f=_t,m=xs;f.nodeType!==8;){if(!m){f=null;break t}if(f=bs(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){_t=bs(f.nextSibling),c=f.data==="F!";break e}}Ja(c)}c=!1}c&&(s=l[0])}}return l=Cn(),l.memoizedState=l.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ug,lastRenderedState:s},l.queue=c,l=Rg.bind(null,Ge,c),c.dispatch=l,c=sf(!1),m=df.bind(null,Ge,!1,c.queue),c=Cn(),f={state:s,dispatch:null,action:t,pending:null},c.queue=f,l=kw.bind(null,Ge,f,m,l),f.dispatch=l,c.memoizedState=t,[s,l,!1]}function hg(t){var s=Lt();return fg(s,mt,t)}function fg(t,s,l){if(s=tf(t,s,ug)[0],t=Eu(va)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Eo(s)}catch(b){throw b===el?mu:b}else c=s;s=Lt();var f=s.queue,m=f.dispatch;return l!==s.memoizedState&&(Ge.flags|=2048,rl(9,{destroy:void 0},Dw.bind(null,f,l),null)),[c,m,t]}function Dw(t,s){t.action=s}function mg(t){var s=Lt(),l=mt;if(l!==null)return fg(s,l,t);Lt(),s=s.memoizedState,l=Lt();var c=l.queue.dispatch;return l.memoizedState=t,[s,c,!1]}function rl(t,s,l,c){return t={tag:t,create:l,deps:c,inst:s,next:null},s=Ge.updateQueue,s===null&&(s=wu(),Ge.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=t.next=t:(c=l.next,l.next=t,t.next=c,s.lastEffect=t),t}function pg(){return Lt().memoizedState}function Su(t,s,l,c){var f=Cn();Ge.flags|=t,f.memoizedState=rl(1|s,{destroy:void 0},l,c===void 0?null:c)}function Tu(t,s,l,c){var f=Lt();c=c===void 0?null:c;var m=f.memoizedState.inst;mt!==null&&c!==null&&Yh(c,mt.memoizedState.deps)?f.memoizedState=rl(s,m,l,c):(Ge.flags|=t,f.memoizedState=rl(1|s,m,l,c))}function gg(t,s){Su(8390656,8,t,s)}function rf(t,s){Tu(2048,8,t,s)}function Mw(t){Ge.flags|=4;var s=Ge.updateQueue;if(s===null)s=wu(),Ge.updateQueue=s,s.events=[t];else{var l=s.events;l===null?s.events=[t]:l.push(t)}}function xg(t){var s=Lt().memoizedState;return Mw({ref:s,nextImpl:t}),function(){if((lt&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function yg(t,s){return Tu(4,2,t,s)}function bg(t,s){return Tu(4,4,t,s)}function vg(t,s){if(typeof s=="function"){t=t();var l=s(t);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function _g(t,s,l){l=l!=null?l.concat([t]):null,Tu(4,4,vg.bind(null,s,t),l)}function lf(){}function wg(t,s){var l=Lt();s=s===void 0?null:s;var c=l.memoizedState;return s!==null&&Yh(s,c[1])?c[0]:(l.memoizedState=[t,s],t)}function Ng(t,s){var l=Lt();s=s===void 0?null:s;var c=l.memoizedState;if(s!==null&&Yh(s,c[1]))return c[0];if(c=t(),li){Mn(!0);try{t()}finally{Mn(!1)}}return l.memoizedState=[c,s],c}function of(t,s,l){return l===void 0||(ba&1073741824)!==0&&(Xe&261930)===0?t.memoizedState=s:(t.memoizedState=l,t=Ex(),Ge.lanes|=t,lr|=t,l)}function Eg(t,s,l,c){return Xn(l,s)?l:nl.current!==null?(t=of(t,l,c),Xn(t,s)||(Gt=!0),t):(ba&42)===0||(ba&1073741824)!==0&&(Xe&261930)===0?(Gt=!0,t.memoizedState=l):(t=Ex(),Ge.lanes|=t,lr|=t,s)}function Sg(t,s,l,c,f){var m=oe.p;oe.p=m!==0&&8>m?m:8;var b=G.T,T={};G.T=T,df(t,!1,s,l);try{var O=f(),Q=G.S;if(Q!==null&&Q(T,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ae=Cw(O,c);So(t,s,ae,ns(t))}else So(t,s,c,ns(t))}catch(ie){So(t,s,{then:function(){},status:"rejected",reason:ie},ns())}finally{oe.p=m,b!==null&&T.types!==null&&(b.types=T.types),G.T=b}}function Ow(){}function cf(t,s,l,c){if(t.tag!==5)throw Error(r(476));var f=Tg(t).queue;Sg(t,f,s,ye,l===null?Ow:function(){return jg(t),l(c)})}function Tg(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:ye},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:l},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function jg(t){var s=Tg(t);s.next===null&&(s=t.alternate.memoizedState),So(t,s.next.queue,{},ns())}function uf(){return fn(Bo)}function Ag(){return Lt().memoizedState}function Cg(){return Lt().memoizedState}function Pw(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var l=ns();t=tr(l);var c=nr(s,t,l);c!==null&&(Bn(c,s,l),vo(c,s,l)),s={cache:Vh()},t.payload=s;return}s=s.return}}function Lw(t,s,l){var c=ns();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ju(t)?Ig(s,l):(l=jh(t,s,l,c),l!==null&&(Bn(l,t,c),kg(l,s,c)))}function Rg(t,s,l){var c=ns();So(t,s,l,c)}function So(t,s,l,c){var f={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(ju(t))Ig(s,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var b=s.lastRenderedState,T=m(b,l);if(f.hasEagerState=!0,f.eagerState=T,Xn(T,b))return lu(t,s,f,0),xt===null&&iu(),!1}catch{}finally{}if(l=jh(t,s,f,c),l!==null)return Bn(l,t,c),kg(l,s,c),!0}return!1}function df(t,s,l,c){if(c={lane:2,revertLane:Ff(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},ju(t)){if(s)throw Error(r(479))}else s=jh(t,l,c,2),s!==null&&Bn(s,t,2)}function ju(t){var s=t.alternate;return t===Ge||s!==null&&s===Ge}function Ig(t,s){sl=vu=!0;var l=t.pending;l===null?s.next=s:(s.next=l.next,l.next=s),t.pending=s}function kg(t,s,l){if((l&4194048)!==0){var c=s.lanes;c&=t.pendingLanes,l|=c,s.lanes=l,Jt(t,l)}}var To={readContext:fn,use:Nu,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt};To.useEffectEvent=kt;var Dg={readContext:fn,use:Nu,useCallback:function(t,s){return Cn().memoizedState=[t,s===void 0?null:s],t},useContext:fn,useEffect:gg,useImperativeHandle:function(t,s,l){l=l!=null?l.concat([t]):null,Su(4194308,4,vg.bind(null,s,t),l)},useLayoutEffect:function(t,s){return Su(4194308,4,t,s)},useInsertionEffect:function(t,s){Su(4,2,t,s)},useMemo:function(t,s){var l=Cn();s=s===void 0?null:s;var c=t();if(li){Mn(!0);try{t()}finally{Mn(!1)}}return l.memoizedState=[c,s],c},useReducer:function(t,s,l){var c=Cn();if(l!==void 0){var f=l(s);if(li){Mn(!0);try{l(s)}finally{Mn(!1)}}}else f=s;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=Lw.bind(null,Ge,t),[c.memoizedState,t]},useRef:function(t){var s=Cn();return t={current:t},s.memoizedState=t},useState:function(t){t=sf(t);var s=t.queue,l=Rg.bind(null,Ge,s);return s.dispatch=l,[t.memoizedState,l]},useDebugValue:lf,useDeferredValue:function(t,s){var l=Cn();return of(l,t,s)},useTransition:function(){var t=sf(!1);return t=Sg.bind(null,Ge,t.queue,!0,!1),Cn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,l){var c=Ge,f=Cn();if(tt){if(l===void 0)throw Error(r(407));l=l()}else{if(l=s(),xt===null)throw Error(r(349));(Xe&127)!==0||eg(c,s,l)}f.memoizedState=l;var m={value:l,getSnapshot:s};return f.queue=m,gg(ng.bind(null,c,m,t),[t]),c.flags|=2048,rl(9,{destroy:void 0},tg.bind(null,c,m,l,s),null),l},useId:function(){var t=Cn(),s=xt.identifierPrefix;if(tt){var l=ea,c=Zs;l=(c&~(1<<32-Ct(c)-1)).toString(32)+l,s="_"+s+"R_"+l,l=_u++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=Rw++,s="_"+s+"r_"+l.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:uf,useFormState:dg,useActionState:dg,useOptimistic:function(t){var s=Cn();s.memoizedState=s.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=df.bind(null,Ge,!0,l),l.dispatch=s,[t,s]},useMemoCache:ef,useCacheRefresh:function(){return Cn().memoizedState=Pw.bind(null,Ge)},useEffectEvent:function(t){var s=Cn(),l={impl:t};return s.memoizedState=l,function(){if((lt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},hf={readContext:fn,use:Nu,useCallback:wg,useContext:fn,useEffect:rf,useImperativeHandle:_g,useInsertionEffect:yg,useLayoutEffect:bg,useMemo:Ng,useReducer:Eu,useRef:pg,useState:function(){return Eu(va)},useDebugValue:lf,useDeferredValue:function(t,s){var l=Lt();return Eg(l,mt.memoizedState,t,s)},useTransition:function(){var t=Eu(va)[0],s=Lt().memoizedState;return[typeof t=="boolean"?t:Eo(t),s]},useSyncExternalStore:Z0,useId:Ag,useHostTransitionStatus:uf,useFormState:hg,useActionState:hg,useOptimistic:function(t,s){var l=Lt();return rg(l,mt,t,s)},useMemoCache:ef,useCacheRefresh:Cg};hf.useEffectEvent=xg;var Mg={readContext:fn,use:Nu,useCallback:wg,useContext:fn,useEffect:rf,useImperativeHandle:_g,useInsertionEffect:yg,useLayoutEffect:bg,useMemo:Ng,useReducer:nf,useRef:pg,useState:function(){return nf(va)},useDebugValue:lf,useDeferredValue:function(t,s){var l=Lt();return mt===null?of(l,t,s):Eg(l,mt.memoizedState,t,s)},useTransition:function(){var t=nf(va)[0],s=Lt().memoizedState;return[typeof t=="boolean"?t:Eo(t),s]},useSyncExternalStore:Z0,useId:Ag,useHostTransitionStatus:uf,useFormState:mg,useActionState:mg,useOptimistic:function(t,s){var l=Lt();return mt!==null?rg(l,mt,t,s):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:ef,useCacheRefresh:Cg};Mg.useEffectEvent=xg;function ff(t,s,l,c){s=t.memoizedState,l=l(c,s),l=l==null?s:w({},s,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var mf={enqueueSetState:function(t,s,l){t=t._reactInternals;var c=ns(),f=tr(c);f.payload=s,l!=null&&(f.callback=l),s=nr(t,f,c),s!==null&&(Bn(s,t,c),vo(s,t,c))},enqueueReplaceState:function(t,s,l){t=t._reactInternals;var c=ns(),f=tr(c);f.tag=1,f.payload=s,l!=null&&(f.callback=l),s=nr(t,f,c),s!==null&&(Bn(s,t,c),vo(s,t,c))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var l=ns(),c=tr(l);c.tag=2,s!=null&&(c.callback=s),s=nr(t,c,l),s!==null&&(Bn(s,t,l),vo(s,t,l))}};function Og(t,s,l,c,f,m,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,b):s.prototype&&s.prototype.isPureReactComponent?!ho(l,c)||!ho(f,m):!0}function Pg(t,s,l,c){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,c),s.state!==t&&mf.enqueueReplaceState(s,s.state,null)}function oi(t,s){var l=s;if("ref"in s){l={};for(var c in s)c!=="ref"&&(l[c]=s[c])}if(t=t.defaultProps){l===s&&(l=w({},l));for(var f in t)l[f]===void 0&&(l[f]=t[f])}return l}function Lg(t){ru(t)}function Vg(t){console.error(t)}function Ug(t){ru(t)}function Au(t,s){try{var l=t.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function qg(t,s,l){try{var c=t.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function pf(t,s,l){return l=tr(l),l.tag=3,l.payload={element:null},l.callback=function(){Au(t,s)},l}function zg(t){return t=tr(t),t.tag=3,t}function Bg(t,s,l,c){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;t.payload=function(){return f(m)},t.callback=function(){qg(s,l,c)}}var b=l.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){qg(s,l,c),typeof f!="function"&&(or===null?or=new Set([this]):or.add(this));var T=c.stack;this.componentDidCatch(c.value,{componentStack:T!==null?T:""})})}function Vw(t,s,l,c,f){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=l.alternate,s!==null&&Wi(s,l,f,!0),l=Jn.current,l!==null){switch(l.tag){case 31:case 13:return ys===null?qu():l.alternate===null&&Dt===0&&(Dt=3),l.flags&=-257,l.flags|=65536,l.lanes=f,c===pu?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([c]):s.add(c),qf(t,c,f)),!1;case 22:return l.flags|=65536,c===pu?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([c]):l.add(c)),qf(t,c,f)),!1}throw Error(r(435,l.tag))}return qf(t,c,f),qu(),!1}if(tt)return s=Jn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,c!==Dh&&(t=Error(r(422),{cause:c}),po(ms(t,l)))):(c!==Dh&&(s=Error(r(423),{cause:c}),po(ms(s,l))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=ms(c,l),f=pf(t.stateNode,c,f),Hh(t,f),Dt!==4&&(Dt=2)),!1;var m=Error(r(520),{cause:c});if(m=ms(m,l),Mo===null?Mo=[m]:Mo.push(m),Dt!==4&&(Dt=2),s===null)return!0;c=ms(c,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,t=f&-f,l.lanes|=t,t=pf(l.stateNode,c,t),Hh(l,t),!1;case 1:if(s=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(or===null||!or.has(m))))return l.flags|=65536,f&=-f,l.lanes|=f,f=zg(f),Bg(f,t,l,c),Hh(l,f),!1}l=l.return}while(l!==null);return!1}var gf=Error(r(461)),Gt=!1;function mn(t,s,l,c){s.child=t===null?K0(s,null,l,c):ii(s,t.child,l,c)}function Fg(t,s,l,c,f){l=l.render;var m=s.ref;if("ref"in c){var b={};for(var T in c)T!=="ref"&&(b[T]=c[T])}else b=c;return ni(s),c=Xh(t,s,l,b,m,f),T=Wh(),t!==null&&!Gt?(Jh(t,s,f),_a(t,s,f)):(tt&&T&&Ih(s),s.flags|=1,mn(t,s,c,f),s.child)}function Hg(t,s,l,c,f){if(t===null){var m=l.type;return typeof m=="function"&&!Ah(m)&&m.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=m,Gg(t,s,m,c,f)):(t=cu(l.type,null,c,s,s.mode,f),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!Ef(t,f)){var b=m.memoizedProps;if(l=l.compare,l=l!==null?l:ho,l(b,c)&&t.ref===s.ref)return _a(t,s,f)}return s.flags|=1,t=pa(m,c),t.ref=s.ref,t.return=s,s.child=t}function Gg(t,s,l,c,f){if(t!==null){var m=t.memoizedProps;if(ho(m,c)&&t.ref===s.ref)if(Gt=!1,s.pendingProps=c=m,Ef(t,f))(t.flags&131072)!==0&&(Gt=!0);else return s.lanes=t.lanes,_a(t,s,f)}return xf(t,s,l,c,f)}function Kg(t,s,l,c){var f=c.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|l:l,t!==null){for(c=s.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,s.child=null;return Qg(t,s,m,l,c)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&fu(s,m!==null?m.cachePool:null),m!==null?Y0(s,m):Kh(),X0(s);else return c=s.lanes=536870912,Qg(t,s,m!==null?m.baseLanes|l:l,l,c)}else m!==null?(fu(s,m.cachePool),Y0(s,m),ar(),s.memoizedState=null):(t!==null&&fu(s,null),Kh(),ar());return mn(t,s,f,l),s.child}function jo(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Qg(t,s,l,c,f){var m=qh();return m=m===null?null:{parent:Ft._currentValue,pool:m},s.memoizedState={baseLanes:l,cachePool:m},t!==null&&fu(s,null),Kh(),X0(s),t!==null&&Wi(t,s,c,!0),s.childLanes=f,null}function Cu(t,s){return s=Iu({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function $g(t,s,l){return ii(s,t.child,null,l),t=Cu(s,s.pendingProps),t.flags|=2,Zn(s),s.memoizedState=null,t}function Uw(t,s,l){var c=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(tt){if(c.mode==="hidden")return t=Cu(s,c),s.lanes=536870912,jo(null,t);if($h(s),(t=_t)?(t=iy(t,xs),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Xa!==null?{id:Zs,overflow:ea}:null,retryLane:536870912,hydrationErrors:null},l=I0(t),l.return=s,s.child=l,hn=s,_t=null)):t=null,t===null)throw Ja(s);return s.lanes=536870912,null}return Cu(s,c)}var m=t.memoizedState;if(m!==null){var b=m.dehydrated;if($h(s),f)if(s.flags&256)s.flags&=-257,s=$g(t,s,l);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(r(558));else if(Gt||Wi(t,s,l,!1),f=(l&t.childLanes)!==0,Gt||f){if(c=xt,c!==null&&(b=un(c,l),b!==0&&b!==m.retryLane))throw m.retryLane=b,Jr(t,b),Bn(c,t,b),gf;qu(),s=$g(t,s,l)}else t=m.treeContext,_t=bs(b.nextSibling),hn=s,tt=!0,Wa=null,xs=!1,t!==null&&M0(s,t),s=Cu(s,c),s.flags|=4096;return s}return t=pa(t.child,{mode:c.mode,children:c.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Ru(t,s){var l=s.ref;if(l===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(t===null||t.ref!==l)&&(s.flags|=4194816)}}function xf(t,s,l,c,f){return ni(s),l=Xh(t,s,l,c,void 0,f),c=Wh(),t!==null&&!Gt?(Jh(t,s,f),_a(t,s,f)):(tt&&c&&Ih(s),s.flags|=1,mn(t,s,l,f),s.child)}function Yg(t,s,l,c,f,m){return ni(s),s.updateQueue=null,l=J0(s,c,l,f),W0(t),c=Wh(),t!==null&&!Gt?(Jh(t,s,m),_a(t,s,m)):(tt&&c&&Ih(s),s.flags|=1,mn(t,s,l,m),s.child)}function Xg(t,s,l,c,f){if(ni(s),s.stateNode===null){var m=Qi,b=l.contextType;typeof b=="object"&&b!==null&&(m=fn(b)),m=new l(c,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=mf,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=c,m.state=s.memoizedState,m.refs={},Bh(s),b=l.contextType,m.context=typeof b=="object"&&b!==null?fn(b):Qi,m.state=s.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(ff(s,l,b,c),m.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&mf.enqueueReplaceState(m,m.state,null),wo(s,c,m,f),_o(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(t===null){m=s.stateNode;var T=s.memoizedProps,O=oi(l,T);m.props=O;var Q=m.context,ae=l.contextType;b=Qi,typeof ae=="object"&&ae!==null&&(b=fn(ae));var ie=l.getDerivedStateFromProps;ae=typeof ie=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,ae||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||Q!==b)&&Pg(s,m,c,b),er=!1;var $=s.memoizedState;m.state=$,wo(s,c,m,f),_o(),Q=s.memoizedState,T||$!==Q||er?(typeof ie=="function"&&(ff(s,l,ie,c),Q=s.memoizedState),(O=er||Og(s,l,O,c,$,Q,b))?(ae||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=Q),m.props=c,m.state=Q,m.context=b,c=O):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{m=s.stateNode,Fh(t,s),b=s.memoizedProps,ae=oi(l,b),m.props=ae,ie=s.pendingProps,$=m.context,Q=l.contextType,O=Qi,typeof Q=="object"&&Q!==null&&(O=fn(Q)),T=l.getDerivedStateFromProps,(Q=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==ie||$!==O)&&Pg(s,m,c,O),er=!1,$=s.memoizedState,m.state=$,wo(s,c,m,f),_o();var Z=s.memoizedState;b!==ie||$!==Z||er||t!==null&&t.dependencies!==null&&du(t.dependencies)?(typeof T=="function"&&(ff(s,l,T,c),Z=s.memoizedState),(ae=er||Og(s,l,ae,c,$,Z,O)||t!==null&&t.dependencies!==null&&du(t.dependencies))?(Q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,Z,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,Z,O)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&$===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&$===t.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=Z),m.props=c,m.state=Z,m.context=O,c=ae):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&$===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&$===t.memoizedState||(s.flags|=1024),c=!1)}return m=c,Ru(t,s),c=(s.flags&128)!==0,m||c?(m=s.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&c?(s.child=ii(s,t.child,null,f),s.child=ii(s,null,l,f)):mn(t,s,l,f),s.memoizedState=m.state,t=s.child):t=_a(t,s,f),t}function Wg(t,s,l,c){return ei(),s.flags|=256,mn(t,s,l,c),s.child}var yf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bf(t){return{baseLanes:t,cachePool:q0()}}function vf(t,s,l){return t=t!==null?t.childLanes&~l:0,s&&(t|=ts),t}function Jg(t,s,l){var c=s.pendingProps,f=!1,m=(s.flags&128)!==0,b;if((b=m)||(b=t!==null&&t.memoizedState===null?!1:(Pt.current&2)!==0),b&&(f=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,t===null){if(tt){if(f?sr(s):ar(),(t=_t)?(t=iy(t,xs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Xa!==null?{id:Zs,overflow:ea}:null,retryLane:536870912,hydrationErrors:null},l=I0(t),l.return=s,s.child=l,hn=s,_t=null)):t=null,t===null)throw Ja(s);return nm(t)?s.lanes=32:s.lanes=536870912,null}var T=c.children;return c=c.fallback,f?(ar(),f=s.mode,T=Iu({mode:"hidden",children:T},f),c=Zr(c,f,l,null),T.return=s,c.return=s,T.sibling=c,s.child=T,c=s.child,c.memoizedState=bf(l),c.childLanes=vf(t,b,l),s.memoizedState=yf,jo(null,c)):(sr(s),_f(s,T))}var O=t.memoizedState;if(O!==null&&(T=O.dehydrated,T!==null)){if(m)s.flags&256?(sr(s),s.flags&=-257,s=wf(t,s,l)):s.memoizedState!==null?(ar(),s.child=t.child,s.flags|=128,s=null):(ar(),T=c.fallback,f=s.mode,c=Iu({mode:"visible",children:c.children},f),T=Zr(T,f,l,null),T.flags|=2,c.return=s,T.return=s,c.sibling=T,s.child=c,ii(s,t.child,null,l),c=s.child,c.memoizedState=bf(l),c.childLanes=vf(t,b,l),s.memoizedState=yf,s=jo(null,c));else if(sr(s),nm(T)){if(b=T.nextSibling&&T.nextSibling.dataset,b)var Q=b.dgst;b=Q,c=Error(r(419)),c.stack="",c.digest=b,po({value:c,source:null,stack:null}),s=wf(t,s,l)}else if(Gt||Wi(t,s,l,!1),b=(l&t.childLanes)!==0,Gt||b){if(b=xt,b!==null&&(c=un(b,l),c!==0&&c!==O.retryLane))throw O.retryLane=c,Jr(t,c),Bn(b,t,c),gf;tm(T)||qu(),s=wf(t,s,l)}else tm(T)?(s.flags|=192,s.child=t.child,s=null):(t=O.treeContext,_t=bs(T.nextSibling),hn=s,tt=!0,Wa=null,xs=!1,t!==null&&M0(s,t),s=_f(s,c.children),s.flags|=4096);return s}return f?(ar(),T=c.fallback,f=s.mode,O=t.child,Q=O.sibling,c=pa(O,{mode:"hidden",children:c.children}),c.subtreeFlags=O.subtreeFlags&65011712,Q!==null?T=pa(Q,T):(T=Zr(T,f,l,null),T.flags|=2),T.return=s,c.return=s,c.sibling=T,s.child=c,jo(null,c),c=s.child,T=t.child.memoizedState,T===null?T=bf(l):(f=T.cachePool,f!==null?(O=Ft._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=q0(),T={baseLanes:T.baseLanes|l,cachePool:f}),c.memoizedState=T,c.childLanes=vf(t,b,l),s.memoizedState=yf,jo(t.child,c)):(sr(s),l=t.child,t=l.sibling,l=pa(l,{mode:"visible",children:c.children}),l.return=s,l.sibling=null,t!==null&&(b=s.deletions,b===null?(s.deletions=[t],s.flags|=16):b.push(t)),s.child=l,s.memoizedState=null,l)}function _f(t,s){return s=Iu({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Iu(t,s){return t=Wn(22,t,null,s),t.lanes=0,t}function wf(t,s,l){return ii(s,t.child,null,l),t=_f(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Zg(t,s,l){t.lanes|=s;var c=t.alternate;c!==null&&(c.lanes|=s),Ph(t.return,s,l)}function Nf(t,s,l,c,f,m){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:f,treeForkCount:m}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=c,b.tail=l,b.tailMode=f,b.treeForkCount=m)}function ex(t,s,l){var c=s.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var b=Pt.current,T=(b&2)!==0;if(T?(b=b&1|2,s.flags|=128):b&=1,he(Pt,b),mn(t,s,c,l),c=tt?mo:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zg(t,l,s);else if(t.tag===19)Zg(t,l,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(l=s.child,f=null;l!==null;)t=l.alternate,t!==null&&bu(t)===null&&(f=l),l=l.sibling;l=f,l===null?(f=s.child,s.child=null):(f=l.sibling,l.sibling=null),Nf(s,!1,f,l,m,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,f=s.child,s.child=null;f!==null;){if(t=f.alternate,t!==null&&bu(t)===null){s.child=f;break}t=f.sibling,f.sibling=l,l=f,f=t}Nf(s,!0,l,null,m,c);break;case"together":Nf(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function _a(t,s,l){if(t!==null&&(s.dependencies=t.dependencies),lr|=s.lanes,(l&s.childLanes)===0)if(t!==null){if(Wi(t,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,l=pa(t,t.pendingProps),s.child=l,l.return=s;t.sibling!==null;)t=t.sibling,l=l.sibling=pa(t,t.pendingProps),l.return=s;l.sibling=null}return s.child}function Ef(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&du(t)))}function qw(t,s,l){switch(s.tag){case 3:xe(s,s.stateNode.containerInfo),Za(s,Ft,t.memoizedState.cache),ei();break;case 27:case 5:Qe(s);break;case 4:xe(s,s.stateNode.containerInfo);break;case 10:Za(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,$h(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(sr(s),s.flags|=128,null):(l&s.child.childLanes)!==0?Jg(t,s,l):(sr(s),t=_a(t,s,l),t!==null?t.sibling:null);sr(s);break;case 19:var f=(t.flags&128)!==0;if(c=(l&s.childLanes)!==0,c||(Wi(t,s,l,!1),c=(l&s.childLanes)!==0),f){if(c)return ex(t,s,l);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),he(Pt,Pt.current),c)break;return null;case 22:return s.lanes=0,Kg(t,s,l,s.pendingProps);case 24:Za(s,Ft,t.memoizedState.cache)}return _a(t,s,l)}function tx(t,s,l){if(t!==null)if(t.memoizedProps!==s.pendingProps)Gt=!0;else{if(!Ef(t,l)&&(s.flags&128)===0)return Gt=!1,qw(t,s,l);Gt=(t.flags&131072)!==0}else Gt=!1,tt&&(s.flags&1048576)!==0&&D0(s,mo,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(t=ai(s.elementType),s.type=t,typeof t=="function")Ah(t)?(c=oi(t,c),s.tag=1,s=Xg(null,s,t,c,l)):(s.tag=0,s=xf(null,s,t,c,l));else{if(t!=null){var f=t.$$typeof;if(f===ne){s.tag=11,s=Fg(null,s,t,c,l);break e}else if(f===C){s.tag=14,s=Hg(null,s,t,c,l);break e}}throw s=me(t)||t,Error(r(306,s,""))}}return s;case 0:return xf(t,s,s.type,s.pendingProps,l);case 1:return c=s.type,f=oi(c,s.pendingProps),Xg(t,s,c,f,l);case 3:e:{if(xe(s,s.stateNode.containerInfo),t===null)throw Error(r(387));c=s.pendingProps;var m=s.memoizedState;f=m.element,Fh(t,s),wo(s,c,null,l);var b=s.memoizedState;if(c=b.cache,Za(s,Ft,c),c!==m.cache&&Lh(s,[Ft],l,!0),_o(),c=b.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Wg(t,s,c,l);break e}else if(c!==f){f=ms(Error(r(424)),s),po(f),s=Wg(t,s,c,l);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(_t=bs(t.firstChild),hn=s,tt=!0,Wa=null,xs=!0,l=K0(s,null,c,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ei(),c===f){s=_a(t,s,l);break e}mn(t,s,c,l)}s=s.child}return s;case 26:return Ru(t,s),t===null?(l=hy(s.type,null,s.pendingProps,null))?s.memoizedState=l:tt||(l=s.type,t=s.pendingProps,c=Qu(U.current).createElement(l),c[Rt]=s,c[Zt]=t,pn(c,l,t),zt(c),s.stateNode=c):s.memoizedState=hy(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Qe(s),t===null&&tt&&(c=s.stateNode=cy(s.type,s.pendingProps,U.current),hn=s,xs=!0,f=_t,hr(s.type)?(sm=f,_t=bs(c.firstChild)):_t=f),mn(t,s,s.pendingProps.children,l),Ru(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&tt&&((f=c=_t)&&(c=g2(c,s.type,s.pendingProps,xs),c!==null?(s.stateNode=c,hn=s,_t=bs(c.firstChild),xs=!1,f=!0):f=!1),f||Ja(s)),Qe(s),f=s.type,m=s.pendingProps,b=t!==null?t.memoizedProps:null,c=m.children,Jf(f,m)?c=null:b!==null&&Jf(f,b)&&(s.flags|=32),s.memoizedState!==null&&(f=Xh(t,s,Iw,null,null,l),Bo._currentValue=f),Ru(t,s),mn(t,s,c,l),s.child;case 6:return t===null&&tt&&((t=l=_t)&&(l=x2(l,s.pendingProps,xs),l!==null?(s.stateNode=l,hn=s,_t=null,t=!0):t=!1),t||Ja(s)),null;case 13:return Jg(t,s,l);case 4:return xe(s,s.stateNode.containerInfo),c=s.pendingProps,t===null?s.child=ii(s,null,c,l):mn(t,s,c,l),s.child;case 11:return Fg(t,s,s.type,s.pendingProps,l);case 7:return mn(t,s,s.pendingProps,l),s.child;case 8:return mn(t,s,s.pendingProps.children,l),s.child;case 12:return mn(t,s,s.pendingProps.children,l),s.child;case 10:return c=s.pendingProps,Za(s,s.type,c.value),mn(t,s,c.children,l),s.child;case 9:return f=s.type._context,c=s.pendingProps.children,ni(s),f=fn(f),c=c(f),s.flags|=1,mn(t,s,c,l),s.child;case 14:return Hg(t,s,s.type,s.pendingProps,l);case 15:return Gg(t,s,s.type,s.pendingProps,l);case 19:return ex(t,s,l);case 31:return Uw(t,s,l);case 22:return Kg(t,s,l,s.pendingProps);case 24:return ni(s),c=fn(Ft),t===null?(f=qh(),f===null&&(f=xt,m=Vh(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=l),f=m),s.memoizedState={parent:c,cache:f},Bh(s),Za(s,Ft,f)):((t.lanes&l)!==0&&(Fh(t,s),wo(s,null,null,l),_o()),f=t.memoizedState,m=s.memoizedState,f.parent!==c?(f={parent:c,cache:c},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Za(s,Ft,c)):(c=m.cache,Za(s,Ft,c),c!==f.cache&&Lh(s,[Ft],l,!0))),mn(t,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function wa(t){t.flags|=4}function Sf(t,s,l,c,f){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Ax())t.flags|=8192;else throw ri=pu,zh}else t.flags&=-16777217}function nx(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!xy(s))if(Ax())t.flags|=8192;else throw ri=pu,zh}function ku(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Se():536870912,t.lanes|=s,cl|=s)}function Ao(t,s){if(!tt)switch(t.tailMode){case"hidden":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function wt(t){var s=t.alternate!==null&&t.alternate.child===t.child,l=0,c=0;if(s)for(var f=t.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=l,s}function zw(t,s,l){var c=s.pendingProps;switch(kh(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(s),null;case 1:return wt(s),null;case 3:return l=s.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ya(Ft),Te(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(Xi(s)?wa(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Mh())),wt(s),null;case 26:var f=s.type,m=s.memoizedState;return t===null?(wa(s),m!==null?(wt(s),nx(s,m)):(wt(s),Sf(s,f,null,c,l))):m?m!==t.memoizedState?(wa(s),wt(s),nx(s,m)):(wt(s),s.flags&=-16777217):(t=t.memoizedProps,t!==c&&wa(s),wt(s),Sf(s,f,t,c,l)),null;case 27:if(sn(s),l=U.current,f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==c&&wa(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return wt(s),null}t=ge.current,Xi(s)?O0(s):(t=cy(f,c,l),s.stateNode=t,wa(s))}return wt(s),null;case 5:if(sn(s),f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==c&&wa(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return wt(s),null}if(m=ge.current,Xi(s))O0(s);else{var b=Qu(U.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?b.createElement("select",{is:c.is}):b.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?b.createElement(f,{is:c.is}):b.createElement(f)}}m[Rt]=s,m[Zt]=c;e:for(b=s.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===s)break e;for(;b.sibling===null;){if(b.return===null||b.return===s)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}s.stateNode=m;e:switch(pn(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&wa(s)}}return wt(s),Sf(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,l),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==c&&wa(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(r(166));if(t=U.current,Xi(s)){if(t=s.stateNode,l=s.memoizedProps,c=null,f=hn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[Rt]=s,t=!!(t.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Jx(t.nodeValue,l)),t||Ja(s,!0)}else t=Qu(t).createTextNode(c),t[Rt]=s,s.stateNode=t}return wt(s),null;case 31:if(l=s.memoizedState,t===null||t.memoizedState!==null){if(c=Xi(s),l!==null){if(t===null){if(!c)throw Error(r(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Rt]=s}else ei(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;wt(s),t=!1}else l=Mh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return s.flags&256?(Zn(s),s):(Zn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return wt(s),null;case 13:if(c=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Xi(s),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Rt]=s}else ei(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;wt(s),f=!1}else f=Mh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Zn(s),s):(Zn(s),null)}return Zn(s),(s.flags&128)!==0?(s.lanes=l,s):(l=c!==null,t=t!==null&&t.memoizedState!==null,l&&(c=s.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),l!==t&&l&&(s.child.flags|=8192),ku(s,s.updateQueue),wt(s),null);case 4:return Te(),t===null&&Qf(s.stateNode.containerInfo),wt(s),null;case 10:return ya(s.type),wt(s),null;case 19:if(Y(Pt),c=s.memoizedState,c===null)return wt(s),null;if(f=(s.flags&128)!==0,m=c.rendering,m===null)if(f)Ao(c,!1);else{if(Dt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=bu(t),m!==null){for(s.flags|=128,Ao(c,!1),t=m.updateQueue,s.updateQueue=t,ku(s,t),s.subtreeFlags=0,t=l,l=s.child;l!==null;)R0(l,t),l=l.sibling;return he(Pt,Pt.current&1|2),tt&&ga(s,c.treeForkCount),s.child}t=t.sibling}c.tail!==null&&X()>Lu&&(s.flags|=128,f=!0,Ao(c,!1),s.lanes=4194304)}else{if(!f)if(t=bu(m),t!==null){if(s.flags|=128,f=!0,t=t.updateQueue,s.updateQueue=t,ku(s,t),Ao(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!tt)return wt(s),null}else 2*X()-c.renderingStartTime>Lu&&l!==536870912&&(s.flags|=128,f=!0,Ao(c,!1),s.lanes=4194304);c.isBackwards?(m.sibling=s.child,s.child=m):(t=c.last,t!==null?t.sibling=m:s.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=X(),t.sibling=null,l=Pt.current,he(Pt,f?l&1|2:l&1),tt&&ga(s,c.treeForkCount),t):(wt(s),null);case 22:case 23:return Zn(s),Qh(),c=s.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(l&536870912)!==0&&(s.flags&128)===0&&(wt(s),s.subtreeFlags&6&&(s.flags|=8192)):wt(s),l=s.updateQueue,l!==null&&ku(s,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==l&&(s.flags|=2048),t!==null&&Y(si),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),ya(Ft),wt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Bw(t,s){switch(kh(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return ya(Ft),Te(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return sn(s),null;case 31:if(s.memoizedState!==null){if(Zn(s),s.alternate===null)throw Error(r(340));ei()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Zn(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));ei()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Y(Pt),null;case 4:return Te(),null;case 10:return ya(s.type),null;case 22:case 23:return Zn(s),Qh(),t!==null&&Y(si),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return ya(Ft),null;case 25:return null;default:return null}}function sx(t,s){switch(kh(s),s.tag){case 3:ya(Ft),Te();break;case 26:case 27:case 5:sn(s);break;case 4:Te();break;case 31:s.memoizedState!==null&&Zn(s);break;case 13:Zn(s);break;case 19:Y(Pt);break;case 10:ya(s.type);break;case 22:case 23:Zn(s),Qh(),t!==null&&Y(si);break;case 24:ya(Ft)}}function Co(t,s){try{var l=s.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var f=c.next;l=f;do{if((l.tag&t)===t){c=void 0;var m=l.create,b=l.inst;c=m(),b.destroy=c}l=l.next}while(l!==f)}}catch(T){ht(s,s.return,T)}}function rr(t,s,l){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&t)===t){var b=c.inst,T=b.destroy;if(T!==void 0){b.destroy=void 0,f=s;var O=l,Q=T;try{Q()}catch(ae){ht(f,O,ae)}}}c=c.next}while(c!==m)}}catch(ae){ht(s,s.return,ae)}}function ax(t){var s=t.updateQueue;if(s!==null){var l=t.stateNode;try{$0(s,l)}catch(c){ht(t,t.return,c)}}}function rx(t,s,l){l.props=oi(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(c){ht(t,s,c)}}function Ro(t,s){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof l=="function"?t.refCleanup=l(c):l.current=c}}catch(f){ht(t,s,f)}}function ta(t,s){var l=t.ref,c=t.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(f){ht(t,s,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){ht(t,s,f)}else l.current=null}function ix(t){var s=t.type,l=t.memoizedProps,c=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(f){ht(t,t.return,f)}}function Tf(t,s,l){try{var c=t.stateNode;u2(c,t.type,l,s),c[Zt]=s}catch(f){ht(t,t.return,f)}}function lx(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&hr(t.type)||t.tag===4}function jf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&hr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Af(t,s,l){var c=t.tag;if(c===5||c===6)t=t.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(t),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Ts));else if(c!==4&&(c===27&&hr(t.type)&&(l=t.stateNode,s=null),t=t.child,t!==null))for(Af(t,s,l),t=t.sibling;t!==null;)Af(t,s,l),t=t.sibling}function Du(t,s,l){var c=t.tag;if(c===5||c===6)t=t.stateNode,s?l.insertBefore(t,s):l.appendChild(t);else if(c!==4&&(c===27&&hr(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(Du(t,s,l),t=t.sibling;t!==null;)Du(t,s,l),t=t.sibling}function ox(t){var s=t.stateNode,l=t.memoizedProps;try{for(var c=t.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);pn(s,c,l),s[Rt]=t,s[Zt]=l}catch(m){ht(t,t.return,m)}}var Na=!1,Kt=!1,Cf=!1,cx=typeof WeakSet=="function"?WeakSet:Set,ln=null;function Fw(t,s){if(t=t.containerInfo,Xf=ed,t=_0(t),_h(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var b=0,T=-1,O=-1,Q=0,ae=0,ie=t,$=null;t:for(;;){for(var Z;ie!==l||f!==0&&ie.nodeType!==3||(T=b+f),ie!==m||c!==0&&ie.nodeType!==3||(O=b+c),ie.nodeType===3&&(b+=ie.nodeValue.length),(Z=ie.firstChild)!==null;)$=ie,ie=Z;for(;;){if(ie===t)break t;if($===l&&++Q===f&&(T=b),$===m&&++ae===c&&(O=b),(Z=ie.nextSibling)!==null)break;ie=$,$=ie.parentNode}ie=Z}l=T===-1||O===-1?null:{start:T,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(Wf={focusedElem:t,selectionRange:l},ed=!1,ln=s;ln!==null;)if(s=ln,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,ln=t;else for(;ln!==null;){switch(s=ln,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)f=t[l],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,l=s,f=m.memoizedProps,m=m.memoizedState,c=l.stateNode;try{var Ee=oi(l.type,f);t=c.getSnapshotBeforeUpdate(Ee,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(Ie){ht(l,l.return,Ie)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,l=t.nodeType,l===9)em(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":em(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,ln=t;break}ln=s.return}}function ux(t,s,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Sa(t,l),c&4&&Co(5,l);break;case 1:if(Sa(t,l),c&4)if(t=l.stateNode,s===null)try{t.componentDidMount()}catch(b){ht(l,l.return,b)}else{var f=oi(l.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(f,s,t.__reactInternalSnapshotBeforeUpdate)}catch(b){ht(l,l.return,b)}}c&64&&ax(l),c&512&&Ro(l,l.return);break;case 3:if(Sa(t,l),c&64&&(t=l.updateQueue,t!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{$0(t,s)}catch(b){ht(l,l.return,b)}}break;case 27:s===null&&c&4&&ox(l);case 26:case 5:Sa(t,l),s===null&&c&4&&ix(l),c&512&&Ro(l,l.return);break;case 12:Sa(t,l);break;case 31:Sa(t,l),c&4&&fx(t,l);break;case 13:Sa(t,l),c&4&&mx(t,l),c&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=Jw.bind(null,l),y2(t,l))));break;case 22:if(c=l.memoizedState!==null||Na,!c){s=s!==null&&s.memoizedState!==null||Kt,f=Na;var m=Kt;Na=c,(Kt=s)&&!m?Ta(t,l,(l.subtreeFlags&8772)!==0):Sa(t,l),Na=f,Kt=m}break;case 30:break;default:Sa(t,l)}}function dx(t){var s=t.alternate;s!==null&&(t.alternate=null,dx(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Di(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Tt=null,Vn=!1;function Ea(t,s,l){for(l=l.child;l!==null;)hx(t,s,l),l=l.sibling}function hx(t,s,l){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(Gn,l)}catch{}switch(l.tag){case 26:Kt||ta(l,s),Ea(t,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Kt||ta(l,s);var c=Tt,f=Vn;hr(l.type)&&(Tt=l.stateNode,Vn=!1),Ea(t,s,l),Uo(l.stateNode),Tt=c,Vn=f;break;case 5:Kt||ta(l,s);case 6:if(c=Tt,f=Vn,Tt=null,Ea(t,s,l),Tt=c,Vn=f,Tt!==null)if(Vn)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(l.stateNode)}catch(m){ht(l,s,m)}else try{Tt.removeChild(l.stateNode)}catch(m){ht(l,s,m)}break;case 18:Tt!==null&&(Vn?(t=Tt,ay(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),xl(t)):ay(Tt,l.stateNode));break;case 4:c=Tt,f=Vn,Tt=l.stateNode.containerInfo,Vn=!0,Ea(t,s,l),Tt=c,Vn=f;break;case 0:case 11:case 14:case 15:rr(2,l,s),Kt||rr(4,l,s),Ea(t,s,l);break;case 1:Kt||(ta(l,s),c=l.stateNode,typeof c.componentWillUnmount=="function"&&rx(l,s,c)),Ea(t,s,l);break;case 21:Ea(t,s,l);break;case 22:Kt=(c=Kt)||l.memoizedState!==null,Ea(t,s,l),Kt=c;break;default:Ea(t,s,l)}}function fx(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{xl(t)}catch(l){ht(s,s.return,l)}}}function mx(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{xl(t)}catch(l){ht(s,s.return,l)}}function Hw(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new cx),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new cx),s;default:throw Error(r(435,t.tag))}}function Mu(t,s){var l=Hw(t);s.forEach(function(c){if(!l.has(c)){l.add(c);var f=Zw.bind(null,t,c);c.then(f,f)}})}function Un(t,s){var l=s.deletions;if(l!==null)for(var c=0;c<l.length;c++){var f=l[c],m=t,b=s,T=b;e:for(;T!==null;){switch(T.tag){case 27:if(hr(T.type)){Tt=T.stateNode,Vn=!1;break e}break;case 5:Tt=T.stateNode,Vn=!1;break e;case 3:case 4:Tt=T.stateNode.containerInfo,Vn=!0;break e}T=T.return}if(Tt===null)throw Error(r(160));hx(m,b,f),Tt=null,Vn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)px(s,t),s=s.sibling}var ks=null;function px(t,s){var l=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Un(s,t),qn(t),c&4&&(rr(3,t,t.return),Co(3,t),rr(5,t,t.return));break;case 1:Un(s,t),qn(t),c&512&&(Kt||l===null||ta(l,l.return)),c&64&&Na&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var f=ks;if(Un(s,t),qn(t),c&512&&(Kt||l===null||ta(l,l.return)),c&4){var m=l!==null?l.memoizedState:null;if(c=t.memoizedState,l===null)if(c===null)if(t.stateNode===null){e:{c=t.type,l=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[zs]||m[Rt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),pn(m,c,l),m[Rt]=t,zt(m),c=m;break e;case"link":var b=py("link","href",f).get(c+(l.href||""));if(b){for(var T=0;T<b.length;T++)if(m=b[T],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){b.splice(T,1);break t}}m=f.createElement(c),pn(m,c,l),f.head.appendChild(m);break;case"meta":if(b=py("meta","content",f).get(c+(l.content||""))){for(T=0;T<b.length;T++)if(m=b[T],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){b.splice(T,1);break t}}m=f.createElement(c),pn(m,c,l),f.head.appendChild(m);break;default:throw Error(r(468,c))}m[Rt]=t,zt(m),c=m}t.stateNode=c}else gy(f,t.type,t.stateNode);else t.stateNode=my(f,c,t.memoizedProps);else m!==c?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,c===null?gy(f,t.type,t.stateNode):my(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&Tf(t,t.memoizedProps,l.memoizedProps)}break;case 27:Un(s,t),qn(t),c&512&&(Kt||l===null||ta(l,l.return)),l!==null&&c&4&&Tf(t,t.memoizedProps,l.memoizedProps);break;case 5:if(Un(s,t),qn(t),c&512&&(Kt||l===null||ta(l,l.return)),t.flags&32){f=t.stateNode;try{Ln(f,"")}catch(Ee){ht(t,t.return,Ee)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,Tf(t,f,l!==null?l.memoizedProps:f)),c&1024&&(Cf=!0);break;case 6:if(Un(s,t),qn(t),c&4){if(t.stateNode===null)throw Error(r(162));c=t.memoizedProps,l=t.stateNode;try{l.nodeValue=c}catch(Ee){ht(t,t.return,Ee)}}break;case 3:if(Xu=null,f=ks,ks=$u(s.containerInfo),Un(s,t),ks=f,qn(t),c&4&&l!==null&&l.memoizedState.isDehydrated)try{xl(s.containerInfo)}catch(Ee){ht(t,t.return,Ee)}Cf&&(Cf=!1,gx(t));break;case 4:c=ks,ks=$u(t.stateNode.containerInfo),Un(s,t),qn(t),ks=c;break;case 12:Un(s,t),qn(t);break;case 31:Un(s,t),qn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Mu(t,c)));break;case 13:Un(s,t),qn(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Pu=X()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Mu(t,c)));break;case 22:f=t.memoizedState!==null;var O=l!==null&&l.memoizedState!==null,Q=Na,ae=Kt;if(Na=Q||f,Kt=ae||O,Un(s,t),Kt=ae,Na=Q,qn(t),c&8192)e:for(s=t.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(l===null||O||Na||Kt||ci(t)),l=null,s=t;;){if(s.tag===5||s.tag===26){if(l===null){O=l=s;try{if(m=O.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{T=O.stateNode;var ie=O.memoizedProps.style,$=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;T.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(Ee){ht(O,O.return,Ee)}}}else if(s.tag===6){if(l===null){O=s;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(Ee){ht(O,O.return,Ee)}}}else if(s.tag===18){if(l===null){O=s;try{var Z=O.stateNode;f?ry(Z,!0):ry(O.stateNode,!1)}catch(Ee){ht(O,O.return,Ee)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=t.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Mu(t,l))));break;case 19:Un(s,t),qn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Mu(t,c)));break;case 30:break;case 21:break;default:Un(s,t),qn(t)}}function qn(t){var s=t.flags;if(s&2){try{for(var l,c=t.return;c!==null;){if(lx(c)){l=c;break}c=c.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var f=l.stateNode,m=jf(t);Du(t,m,f);break;case 5:var b=l.stateNode;l.flags&32&&(Ln(b,""),l.flags&=-33);var T=jf(t);Du(t,T,b);break;case 3:case 4:var O=l.stateNode.containerInfo,Q=jf(t);Af(t,Q,O);break;default:throw Error(r(161))}}catch(ae){ht(t,t.return,ae)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function gx(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;gx(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Sa(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)ux(t,s.alternate,s),s=s.sibling}function ci(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:rr(4,s,s.return),ci(s);break;case 1:ta(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&rx(s,s.return,l),ci(s);break;case 27:Uo(s.stateNode);case 26:case 5:ta(s,s.return),ci(s);break;case 22:s.memoizedState===null&&ci(s);break;case 30:ci(s);break;default:ci(s)}t=t.sibling}}function Ta(t,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,f=t,m=s,b=m.flags;switch(m.tag){case 0:case 11:case 15:Ta(f,m,l),Co(4,m);break;case 1:if(Ta(f,m,l),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Q){ht(c,c.return,Q)}if(c=m,f=c.updateQueue,f!==null){var T=c.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)Q0(O[f],T)}catch(Q){ht(c,c.return,Q)}}l&&b&64&&ax(m),Ro(m,m.return);break;case 27:ox(m);case 26:case 5:Ta(f,m,l),l&&c===null&&b&4&&ix(m),Ro(m,m.return);break;case 12:Ta(f,m,l);break;case 31:Ta(f,m,l),l&&b&4&&fx(f,m);break;case 13:Ta(f,m,l),l&&b&4&&mx(f,m);break;case 22:m.memoizedState===null&&Ta(f,m,l),Ro(m,m.return);break;case 30:break;default:Ta(f,m,l)}s=s.sibling}}function Rf(t,s){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&go(l))}function If(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&go(t))}function Ds(t,s,l,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)xx(t,s,l,c),s=s.sibling}function xx(t,s,l,c){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Ds(t,s,l,c),f&2048&&Co(9,s);break;case 1:Ds(t,s,l,c);break;case 3:Ds(t,s,l,c),f&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&go(t)));break;case 12:if(f&2048){Ds(t,s,l,c),t=s.stateNode;try{var m=s.memoizedProps,b=m.id,T=m.onPostCommit;typeof T=="function"&&T(b,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){ht(s,s.return,O)}}else Ds(t,s,l,c);break;case 31:Ds(t,s,l,c);break;case 13:Ds(t,s,l,c);break;case 23:break;case 22:m=s.stateNode,b=s.alternate,s.memoizedState!==null?m._visibility&2?Ds(t,s,l,c):Io(t,s):m._visibility&2?Ds(t,s,l,c):(m._visibility|=2,il(t,s,l,c,(s.subtreeFlags&10256)!==0||!1)),f&2048&&Rf(b,s);break;case 24:Ds(t,s,l,c),f&2048&&If(s.alternate,s);break;default:Ds(t,s,l,c)}}function il(t,s,l,c,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,b=s,T=l,O=c,Q=b.flags;switch(b.tag){case 0:case 11:case 15:il(m,b,T,O,f),Co(8,b);break;case 23:break;case 22:var ae=b.stateNode;b.memoizedState!==null?ae._visibility&2?il(m,b,T,O,f):Io(m,b):(ae._visibility|=2,il(m,b,T,O,f)),f&&Q&2048&&Rf(b.alternate,b);break;case 24:il(m,b,T,O,f),f&&Q&2048&&If(b.alternate,b);break;default:il(m,b,T,O,f)}s=s.sibling}}function Io(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=t,c=s,f=c.flags;switch(c.tag){case 22:Io(l,c),f&2048&&Rf(c.alternate,c);break;case 24:Io(l,c),f&2048&&If(c.alternate,c);break;default:Io(l,c)}s=s.sibling}}var ko=8192;function ll(t,s,l){if(t.subtreeFlags&ko)for(t=t.child;t!==null;)yx(t,s,l),t=t.sibling}function yx(t,s,l){switch(t.tag){case 26:ll(t,s,l),t.flags&ko&&t.memoizedState!==null&&R2(l,ks,t.memoizedState,t.memoizedProps);break;case 5:ll(t,s,l);break;case 3:case 4:var c=ks;ks=$u(t.stateNode.containerInfo),ll(t,s,l),ks=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=ko,ko=16777216,ll(t,s,l),ko=c):ll(t,s,l));break;default:ll(t,s,l)}}function bx(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Do(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];ln=c,_x(c,t)}bx(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)vx(t),t=t.sibling}function vx(t){switch(t.tag){case 0:case 11:case 15:Do(t),t.flags&2048&&rr(9,t,t.return);break;case 3:Do(t);break;case 12:Do(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Ou(t)):Do(t);break;default:Do(t)}}function Ou(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];ln=c,_x(c,t)}bx(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:rr(8,s,s.return),Ou(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,Ou(s));break;default:Ou(s)}t=t.sibling}}function _x(t,s){for(;ln!==null;){var l=ln;switch(l.tag){case 0:case 11:case 15:rr(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:go(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,ln=c;else e:for(l=t;ln!==null;){c=ln;var f=c.sibling,m=c.return;if(dx(c),c===l){ln=null;break e}if(f!==null){f.return=m,ln=f;break e}ln=m}}}var Gw={getCacheForType:function(t){var s=fn(Ft),l=s.data.get(t);return l===void 0&&(l=t(),s.data.set(t,l)),l},cacheSignal:function(){return fn(Ft).controller.signal}},Kw=typeof WeakMap=="function"?WeakMap:Map,lt=0,xt=null,$e=null,Xe=0,dt=0,es=null,ir=!1,ol=!1,kf=!1,ja=0,Dt=0,lr=0,ui=0,Df=0,ts=0,cl=0,Mo=null,zn=null,Mf=!1,Pu=0,wx=0,Lu=1/0,Vu=null,or=null,en=0,cr=null,ul=null,Aa=0,Of=0,Pf=null,Nx=null,Oo=0,Lf=null;function ns(){return(lt&2)!==0&&Xe!==0?Xe&-Xe:G.T!==null?Ff():Ql()}function Ex(){if(ts===0)if((Xe&536870912)===0||tt){var t=Es;Es<<=1,(Es&3932160)===0&&(Es=262144),ts=t}else ts=536870912;return t=Jn.current,t!==null&&(t.flags|=32),ts}function Bn(t,s,l){(t===xt&&(dt===2||dt===9)||t.cancelPendingCommit!==null)&&(dl(t,0),ur(t,Xe,ts,!1)),ze(t,l),((lt&2)===0||t!==xt)&&(t===xt&&((lt&2)===0&&(ui|=l),Dt===4&&ur(t,Xe,ts,!1)),na(t))}function Sx(t,s,l){if((lt&6)!==0)throw Error(r(327));var c=!l&&(s&127)===0&&(s&t.expiredLanes)===0||fe(t,s),f=c?Yw(t,s):Uf(t,s,!0),m=c;do{if(f===0){ol&&!c&&ur(t,s,0,!1);break}else{if(l=t.current.alternate,m&&!Qw(l)){f=Uf(t,s,!1),m=!1;continue}if(f===2){if(m=s,t.errorRecoveryDisabledLanes&m)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var T=t;f=Mo;var O=T.current.memoizedState.isDehydrated;if(O&&(dl(T,b).flags|=256),b=Uf(T,b,!1),b!==2){if(kf&&!O){T.errorRecoveryDisabledLanes|=m,ui|=m,f=4;break e}m=zn,zn=f,m!==null&&(zn===null?zn=m:zn.push.apply(zn,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){dl(t,0),ur(t,s,0,!0);break}e:{switch(c=t,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:ur(c,s,ts,!ir);break e;case 2:zn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Pu+300-X(),10<f)){if(ur(c,s,ts,!ir),se(c,0,!0)!==0)break e;Aa=s,c.timeoutHandle=ny(Tx.bind(null,c,l,zn,Vu,Mf,s,ts,ui,cl,ir,m,"Throttled",-0,0),f);break e}Tx(c,l,zn,Vu,Mf,s,ts,ui,cl,ir,m,null,-0,0)}}break}while(!0);na(t)}function Tx(t,s,l,c,f,m,b,T,O,Q,ae,ie,$,Z){if(t.timeoutHandle=-1,ie=s.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ts},yx(s,m,ie);var Ee=(m&62914560)===m?Pu-X():(m&4194048)===m?wx-X():0;if(Ee=I2(ie,Ee),Ee!==null){Aa=m,t.cancelPendingCommit=Ee(Mx.bind(null,t,s,m,l,c,f,b,T,O,ae,ie,null,$,Z)),ur(t,m,b,!Q);return}}Mx(t,s,m,l,c,f,b,T,O)}function Qw(t){for(var s=t;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var f=l[c],m=f.getSnapshot;f=f.value;try{if(!Xn(m(),f))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ur(t,s,l,c){s&=~Df,s&=~ui,t.suspendedLanes|=s,t.pingedLanes&=~s,c&&(t.warmLanes|=s),c=t.expirationTimes;for(var f=s;0<f;){var m=31-Ct(f),b=1<<m;c[m]=-1,f&=~b}l!==0&&wn(t,l,s)}function Uu(){return(lt&6)===0?(Po(0),!1):!0}function Vf(){if($e!==null){if(dt===0)var t=$e.return;else t=$e,xa=ti=null,Zh(t),tl=null,yo=0,t=$e;for(;t!==null;)sx(t.alternate,t),t=t.return;$e=null}}function dl(t,s){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,f2(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),Aa=0,Vf(),xt=t,$e=l=pa(t.current,null),Xe=s,dt=0,es=null,ir=!1,ol=fe(t,s),kf=!1,cl=ts=Df=ui=lr=Dt=0,zn=Mo=null,Mf=!1,(s&8)!==0&&(s|=s&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=s;0<c;){var f=31-Ct(c),m=1<<f;s|=t[f],c&=~m}return ja=s,iu(),l}function jx(t,s){Ge=null,G.H=To,s===el||s===mu?(s=F0(),dt=3):s===zh?(s=F0(),dt=4):dt=s===gf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,es=s,$e===null&&(Dt=1,Au(t,ms(s,t.current)))}function Ax(){var t=Jn.current;return t===null?!0:(Xe&4194048)===Xe?ys===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?t===ys:!1}function Cx(){var t=G.H;return G.H=To,t===null?To:t}function Rx(){var t=G.A;return G.A=Gw,t}function qu(){Dt=4,ir||(Xe&4194048)!==Xe&&Jn.current!==null||(ol=!0),(lr&134217727)===0&&(ui&134217727)===0||xt===null||ur(xt,Xe,ts,!1)}function Uf(t,s,l){var c=lt;lt|=2;var f=Cx(),m=Rx();(xt!==t||Xe!==s)&&(Vu=null,dl(t,s)),s=!1;var b=Dt;e:do try{if(dt!==0&&$e!==null){var T=$e,O=es;switch(dt){case 8:Vf(),b=6;break e;case 3:case 2:case 9:case 6:Jn.current===null&&(s=!0);var Q=dt;if(dt=0,es=null,hl(t,T,O,Q),l&&ol){b=0;break e}break;default:Q=dt,dt=0,es=null,hl(t,T,O,Q)}}$w(),b=Dt;break}catch(ae){jx(t,ae)}while(!0);return s&&t.shellSuspendCounter++,xa=ti=null,lt=c,G.H=f,G.A=m,$e===null&&(xt=null,Xe=0,iu()),b}function $w(){for(;$e!==null;)Ix($e)}function Yw(t,s){var l=lt;lt|=2;var c=Cx(),f=Rx();xt!==t||Xe!==s?(Vu=null,Lu=X()+500,dl(t,s)):ol=fe(t,s);e:do try{if(dt!==0&&$e!==null){s=$e;var m=es;t:switch(dt){case 1:dt=0,es=null,hl(t,s,m,1);break;case 2:case 9:if(z0(m)){dt=0,es=null,kx(s);break}s=function(){dt!==2&&dt!==9||xt!==t||(dt=7),na(t)},m.then(s,s);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:z0(m)?(dt=0,es=null,kx(s)):(dt=0,es=null,hl(t,s,m,7));break;case 5:var b=null;switch($e.tag){case 26:b=$e.memoizedState;case 5:case 27:var T=$e;if(b?xy(b):T.stateNode.complete){dt=0,es=null;var O=T.sibling;if(O!==null)$e=O;else{var Q=T.return;Q!==null?($e=Q,zu(Q)):$e=null}break t}}dt=0,es=null,hl(t,s,m,5);break;case 6:dt=0,es=null,hl(t,s,m,6);break;case 8:Vf(),Dt=6;break e;default:throw Error(r(462))}}Xw();break}catch(ae){jx(t,ae)}while(!0);return xa=ti=null,G.H=c,G.A=f,lt=l,$e!==null?0:(xt=null,Xe=0,iu(),Dt)}function Xw(){for(;$e!==null&&!qr();)Ix($e)}function Ix(t){var s=tx(t.alternate,t,ja);t.memoizedProps=t.pendingProps,s===null?zu(t):$e=s}function kx(t){var s=t,l=s.alternate;switch(s.tag){case 15:case 0:s=Yg(l,s,s.pendingProps,s.type,void 0,Xe);break;case 11:s=Yg(l,s,s.pendingProps,s.type.render,s.ref,Xe);break;case 5:Zh(s);default:sx(l,s),s=$e=R0(s,ja),s=tx(l,s,ja)}t.memoizedProps=t.pendingProps,s===null?zu(t):$e=s}function hl(t,s,l,c){xa=ti=null,Zh(s),tl=null,yo=0;var f=s.return;try{if(Vw(t,f,s,l,Xe)){Dt=1,Au(t,ms(l,t.current)),$e=null;return}}catch(m){if(f!==null)throw $e=f,m;Dt=1,Au(t,ms(l,t.current)),$e=null;return}s.flags&32768?(tt||c===1?t=!0:ol||(Xe&536870912)!==0?t=!1:(ir=t=!0,(c===2||c===9||c===3||c===6)&&(c=Jn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Dx(s,t)):zu(s)}function zu(t){var s=t;do{if((s.flags&32768)!==0){Dx(s,ir);return}t=s.return;var l=zw(s.alternate,s,ja);if(l!==null){$e=l;return}if(s=s.sibling,s!==null){$e=s;return}$e=s=t}while(s!==null);Dt===0&&(Dt=5)}function Dx(t,s){do{var l=Bw(t.alternate,t);if(l!==null){l.flags&=32767,$e=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(t=t.sibling,t!==null)){$e=t;return}$e=t=l}while(t!==null);Dt=6,$e=null}function Mx(t,s,l,c,f,m,b,T,O){t.cancelPendingCommit=null;do Bu();while(en!==0);if((lt&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=Th,_n(t,l,m,b,T,O),t===xt&&($e=xt=null,Xe=0),ul=s,cr=t,Aa=l,Of=m,Pf=f,Nx=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,e2(At,function(){return Ux(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=G.T,G.T=null,f=oe.p,oe.p=2,b=lt,lt|=4;try{Fw(t,s,l)}finally{lt=b,oe.p=f,G.T=c}}en=1,Ox(),Px(),Lx()}}function Ox(){if(en===1){en=0;var t=cr,s=ul,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=G.T,G.T=null;var c=oe.p;oe.p=2;var f=lt;lt|=4;try{px(s,t);var m=Wf,b=_0(t.containerInfo),T=m.focusedElem,O=m.selectionRange;if(b!==T&&T&&T.ownerDocument&&v0(T.ownerDocument.documentElement,T)){if(O!==null&&_h(T)){var Q=O.start,ae=O.end;if(ae===void 0&&(ae=Q),"selectionStart"in T)T.selectionStart=Q,T.selectionEnd=Math.min(ae,T.value.length);else{var ie=T.ownerDocument||document,$=ie&&ie.defaultView||window;if($.getSelection){var Z=$.getSelection(),Ee=T.textContent.length,Ie=Math.min(O.start,Ee),gt=O.end===void 0?Ie:Math.min(O.end,Ee);!Z.extend&&Ie>gt&&(b=gt,gt=Ie,Ie=b);var B=b0(T,Ie),q=b0(T,gt);if(B&&q&&(Z.rangeCount!==1||Z.anchorNode!==B.node||Z.anchorOffset!==B.offset||Z.focusNode!==q.node||Z.focusOffset!==q.offset)){var K=ie.createRange();K.setStart(B.node,B.offset),Z.removeAllRanges(),Ie>gt?(Z.addRange(K),Z.extend(q.node,q.offset)):(K.setEnd(q.node,q.offset),Z.addRange(K))}}}}for(ie=[],Z=T;Z=Z.parentNode;)Z.nodeType===1&&ie.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ie.length;T++){var re=ie[T];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}ed=!!Xf,Wf=Xf=null}finally{lt=f,oe.p=c,G.T=l}}t.current=s,en=2}}function Px(){if(en===2){en=0;var t=cr,s=ul,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=G.T,G.T=null;var c=oe.p;oe.p=2;var f=lt;lt|=4;try{ux(t,s.alternate,s)}finally{lt=f,oe.p=c,G.T=l}}en=3}}function Lx(){if(en===4||en===3){en=0,qs();var t=cr,s=ul,l=Aa,c=Nx;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?en=5:(en=0,ul=cr=null,Vx(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(or=null),Ss(l),s=s.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(Gn,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=G.T,f=oe.p,oe.p=2,G.T=null;try{for(var m=t.onRecoverableError,b=0;b<c.length;b++){var T=c[b];m(T.value,{componentStack:T.stack})}}finally{G.T=s,oe.p=f}}(Aa&3)!==0&&Bu(),na(t),f=t.pendingLanes,(l&261930)!==0&&(f&42)!==0?t===Lf?Oo++:(Oo=0,Lf=t):Oo=0,Po(0)}}function Vx(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,go(s)))}function Bu(){return Ox(),Px(),Lx(),Ux()}function Ux(){if(en!==5)return!1;var t=cr,s=Of;Of=0;var l=Ss(Aa),c=G.T,f=oe.p;try{oe.p=32>l?32:l,G.T=null,l=Pf,Pf=null;var m=cr,b=Aa;if(en=0,ul=cr=null,Aa=0,(lt&6)!==0)throw Error(r(331));var T=lt;if(lt|=4,vx(m.current),xx(m,m.current,b,l),lt=T,Po(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(Gn,m)}catch{}return!0}finally{oe.p=f,G.T=c,Vx(t,s)}}function qx(t,s,l){s=ms(l,s),s=pf(t.stateNode,s,2),t=nr(t,s,2),t!==null&&(ze(t,2),na(t))}function ht(t,s,l){if(t.tag===3)qx(t,t,l);else for(;s!==null;){if(s.tag===3){qx(s,t,l);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(or===null||!or.has(c))){t=ms(l,t),l=zg(2),c=nr(s,l,2),c!==null&&(Bg(l,c,s,t),ze(c,2),na(c));break}}s=s.return}}function qf(t,s,l){var c=t.pingCache;if(c===null){c=t.pingCache=new Kw;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(l)||(kf=!0,f.add(l),t=Ww.bind(null,t,s,l),s.then(t,t))}function Ww(t,s,l){var c=t.pingCache;c!==null&&c.delete(s),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,xt===t&&(Xe&l)===l&&(Dt===4||Dt===3&&(Xe&62914560)===Xe&&300>X()-Pu?(lt&2)===0&&dl(t,0):Df|=l,cl===Xe&&(cl=0)),na(t)}function zx(t,s){s===0&&(s=Se()),t=Jr(t,s),t!==null&&(ze(t,s),na(t))}function Jw(t){var s=t.memoizedState,l=0;s!==null&&(l=s.retryLane),zx(t,l)}function Zw(t,s){var l=0;switch(t.tag){case 31:case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(l=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(s),zx(t,l)}function e2(t,s){return jt(t,s)}var Fu=null,fl=null,zf=!1,Hu=!1,Bf=!1,dr=0;function na(t){t!==fl&&t.next===null&&(fl===null?Fu=fl=t:fl=fl.next=t),Hu=!0,zf||(zf=!0,n2())}function Po(t,s){if(!Bf&&Hu){Bf=!0;do for(var l=!1,c=Fu;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var b=c.suspendedLanes,T=c.pingedLanes;m=(1<<31-Ct(42|t)+1)-1,m&=f&~(b&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,Gx(c,m))}else m=Xe,m=se(c,c===xt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||fe(c,m)||(l=!0,Gx(c,m));c=c.next}while(l);Bf=!1}}function t2(){Bx()}function Bx(){Hu=zf=!1;var t=0;dr!==0&&h2()&&(t=dr);for(var s=X(),l=null,c=Fu;c!==null;){var f=c.next,m=Fx(c,s);m===0?(c.next=null,l===null?Fu=f:l.next=f,f===null&&(fl=l)):(l=c,(t!==0||(m&3)!==0)&&(Hu=!0)),c=f}en!==0&&en!==5||Po(t),dr!==0&&(dr=0)}function Fx(t,s){for(var l=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var b=31-Ct(m),T=1<<b,O=f[b];O===-1?((T&l)===0||(T&c)!==0)&&(f[b]=ve(T,s)):O<=s&&(t.expiredLanes|=T),m&=~T}if(s=xt,l=Xe,l=se(t,t===s?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,l===0||t===s&&(dt===2||dt===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&is(c),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||fe(t,l)){if(s=l&-l,s===t.callbackPriority)return s;switch(c!==null&&is(c),Ss(l)){case 2:case 8:l=vt;break;case 32:l=At;break;case 268435456:l=Dn;break;default:l=At}return c=Hx.bind(null,t),l=jt(l,c),t.callbackPriority=s,t.callbackNode=l,s}return c!==null&&c!==null&&is(c),t.callbackPriority=2,t.callbackNode=null,2}function Hx(t,s){if(en!==0&&en!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(Bu()&&t.callbackNode!==l)return null;var c=Xe;return c=se(t,t===xt?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(Sx(t,c,s),Fx(t,X()),t.callbackNode!=null&&t.callbackNode===l?Hx.bind(null,t):null)}function Gx(t,s){if(Bu())return null;Sx(t,s,!0)}function n2(){m2(function(){(lt&6)!==0?jt(yt,t2):Bx()})}function Ff(){if(dr===0){var t=Ji;t===0&&(t=Kn,Kn<<=1,(Kn&261888)===0&&(Kn=256)),dr=t}return dr}function Kx(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Li(""+t)}function Qx(t,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,t.id&&l.setAttribute("form",t.id),s.parentNode.insertBefore(l,s),t=new FormData(t),l.parentNode.removeChild(l),t}function s2(t,s,l,c,f){if(s==="submit"&&l&&l.stateNode===f){var m=Kx((f[Zt]||null).action),b=c.submitter;b&&(s=(s=b[Zt]||null)?Kx(s.formAction):b.getAttribute("formAction"),s!==null&&(m=s,b=null));var T=new Ys("action","action",null,c,f);t.push({event:T,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(dr!==0){var O=b?Qx(f,b):new FormData(f);cf(l,{pending:!0,data:O,method:f.method,action:m},null,O)}}else typeof m=="function"&&(T.preventDefault(),O=b?Qx(f,b):new FormData(f),cf(l,{pending:!0,data:O,method:f.method,action:m},m,O))},currentTarget:f}]})}}for(var Hf=0;Hf<Sh.length;Hf++){var Gf=Sh[Hf],a2=Gf.toLowerCase(),r2=Gf[0].toUpperCase()+Gf.slice(1);Is(a2,"on"+r2)}Is(E0,"onAnimationEnd"),Is(S0,"onAnimationIteration"),Is(T0,"onAnimationStart"),Is("dblclick","onDoubleClick"),Is("focusin","onFocus"),Is("focusout","onBlur"),Is(_w,"onTransitionRun"),Is(ww,"onTransitionStart"),Is(Nw,"onTransitionCancel"),Is(j0,"onTransitionEnd"),Gs("onMouseEnter",["mouseout","mouseover"]),Gs("onMouseLeave",["mouseout","mouseover"]),Gs("onPointerEnter",["pointerout","pointerover"]),Gs("onPointerLeave",["pointerout","pointerover"]),Hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lo));function $x(t,s){s=(s&4)!==0;for(var l=0;l<t.length;l++){var c=t[l],f=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var b=c.length-1;0<=b;b--){var T=c[b],O=T.instance,Q=T.currentTarget;if(T=T.listener,O!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=Q;try{m(f)}catch(ae){ru(ae)}f.currentTarget=null,m=O}else for(b=0;b<c.length;b++){if(T=c[b],O=T.instance,Q=T.currentTarget,T=T.listener,O!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=Q;try{m(f)}catch(ae){ru(ae)}f.currentTarget=null,m=O}}}}function Ye(t,s){var l=s[Pe];l===void 0&&(l=s[Pe]=new Set);var c=t+"__bubble";l.has(c)||(Yx(s,t,2,!1),l.add(c))}function Kf(t,s,l){var c=0;s&&(c|=4),Yx(l,t,c,s)}var Gu="_reactListening"+Math.random().toString(36).slice(2);function Qf(t){if(!t[Gu]){t[Gu]=!0,$l.forEach(function(l){l!=="selectionchange"&&(i2.has(l)||Kf(l,!1,t),Kf(l,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Gu]||(s[Gu]=!0,Kf("selectionchange",!1,s))}}function Yx(t,s,l,c){switch(Ey(s)){case 2:var f=M2;break;case 8:f=O2;break;default:f=om}l=f.bind(null,s,l,t),f=void 0,!Hr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(s,l,{capture:!0,passive:f}):t.addEventListener(s,l,!0):f!==void 0?t.addEventListener(s,l,{passive:f}):t.addEventListener(s,l,!1)}function $f(t,s,l,c,f){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var T=c.stateNode.containerInfo;if(T===f)break;if(b===4)for(b=c.return;b!==null;){var O=b.tag;if((O===3||O===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;T!==null;){if(b=Bs(T),b===null)return;if(O=b.tag,O===5||O===6||O===26||O===27){c=m=b;continue e}T=T.parentNode}}c=c.return}Ka(function(){var Q=m,ae=us(l),ie=[];e:{var $=A0.get(t);if($!==void 0){var Z=Ys,Ee=t;switch(t){case"keypress":if(Kr(l)===0)break e;case"keydown":case"keyup":Z=nu;break;case"focusin":Ee="focus",Z=$r;break;case"focusout":Ee="blur",Z=$r;break;case"beforeblur":case"afterblur":Z=$r;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=lo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Qc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=y;break;case E0:case S0:case T0:Z=Yc;break;case j0:Z=R;break;case"scroll":case"scrollend":Z=io;break;case"wheel":Z=J;break;case"copy":case"cut":case"paste":Z=Xc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=ma;break;case"toggle":case"beforetoggle":Z=He}var Ie=(s&4)!==0,gt=!Ie&&(t==="scroll"||t==="scrollend"),B=Ie?$!==null?$+"Capture":null:$;Ie=[];for(var q=Q,K;q!==null;){var re=q;if(K=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||K===null||B===null||(re=js(q,B),re!=null&&Ie.push(Vo(q,re,K))),gt)break;q=q.return}0<Ie.length&&($=new Z($,Ee,null,l,ae),ie.push({event:$,listeners:Ie}))}}if((s&7)===0){e:{if($=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",$&&l!==so&&(Ee=l.relatedTarget||l.fromElement)&&(Bs(Ee)||Ee[De]))break e;if((Z||$)&&($=ae.window===ae?ae:($=ae.ownerDocument)?$.defaultView||$.parentWindow:window,Z?(Ee=l.relatedTarget||l.toElement,Z=Q,Ee=Ee?Bs(Ee):null,Ee!==null&&(gt=u(Ee),Ie=Ee.tag,Ee!==gt||Ie!==5&&Ie!==27&&Ie!==6)&&(Ee=null)):(Z=null,Ee=Q),Z!==Ee)){if(Ie=lo,re="onMouseLeave",B="onMouseEnter",q="mouse",(t==="pointerout"||t==="pointerover")&&(Ie=ma,re="onPointerLeave",B="onPointerEnter",q="pointer"),gt=Z==null?$:$n(Z),K=Ee==null?$:$n(Ee),$=new Ie(re,q+"leave",Z,l,ae),$.target=gt,$.relatedTarget=K,re=null,Bs(ae)===Q&&(Ie=new Ie(B,q+"enter",Ee,l,ae),Ie.target=K,Ie.relatedTarget=gt,re=Ie),gt=re,Z&&Ee)t:{for(Ie=l2,B=Z,q=Ee,K=0,re=B;re;re=Ie(re))K++;re=0;for(var Ce=q;Ce;Ce=Ie(Ce))re++;for(;0<K-re;)B=Ie(B),K--;for(;0<re-K;)q=Ie(q),re--;for(;K--;){if(B===q||q!==null&&B===q.alternate){Ie=B;break t}B=Ie(B),q=Ie(q)}Ie=null}else Ie=null;Z!==null&&Xx(ie,$,Z,Ie,!1),Ee!==null&&gt!==null&&Xx(ie,gt,Ee,Ie,!0)}}e:{if($=Q?$n(Q):window,Z=$.nodeName&&$.nodeName.toLowerCase(),Z==="select"||Z==="input"&&$.type==="file")var at=f0;else if(d0($))if(m0)at=yw;else{at=gw;var Ae=pw}else Z=$.nodeName,!Z||Z.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?Q&&Pi(Q.elementType)&&(at=f0):at=xw;if(at&&(at=at(t,Q))){h0(ie,at,l,ae);break e}Ae&&Ae(t,$,Q),t==="focusout"&&Q&&$.type==="number"&&Q.memoizedProps.value!=null&&eo($,"number",$.value)}switch(Ae=Q?$n(Q):window,t){case"focusin":(d0(Ae)||Ae.contentEditable==="true")&&(Hi=Ae,wh=Q,fo=null);break;case"focusout":fo=wh=Hi=null;break;case"mousedown":Nh=!0;break;case"contextmenu":case"mouseup":case"dragend":Nh=!1,w0(ie,l,ae);break;case"selectionchange":if(vw)break;case"keydown":case"keyup":w0(ie,l,ae)}var Ke;if(it)e:{switch(t){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else Fi?Yr(t,l)&&(We="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(We="onCompositionStart");We&&(Js&&l.locale!=="ko"&&(Fi||We!=="onCompositionStart"?We==="onCompositionEnd"&&Fi&&(Ke=ro()):($s=ae,ao="value"in $s?$s.value:$s.textContent,Fi=!0)),Ae=Ku(Q,We),0<Ae.length&&(We=new Ws(We,t,null,l,ae),ie.push({event:We,listeners:Ae}),Ke?We.data=Ke:(Ke=Bi(l),Ke!==null&&(We.data=Ke)))),(Ke=hs?dw(t,l):hw(t,l))&&(We=Ku(Q,"onBeforeInput"),0<We.length&&(Ae=new Ws("onBeforeInput","beforeinput",null,l,ae),ie.push({event:Ae,listeners:We}),Ae.data=Ke)),s2(ie,t,Q,l,ae)}$x(ie,s)})}function Vo(t,s,l){return{instance:t,listener:s,currentTarget:l}}function Ku(t,s){for(var l=s+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=js(t,l),f!=null&&c.unshift(Vo(t,f,m)),f=js(t,s),f!=null&&c.push(Vo(t,f,m))),t.tag===3)return c;t=t.return}return[]}function l2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Xx(t,s,l,c,f){for(var m=s._reactName,b=[];l!==null&&l!==c;){var T=l,O=T.alternate,Q=T.stateNode;if(T=T.tag,O!==null&&O===c)break;T!==5&&T!==26&&T!==27||Q===null||(O=Q,f?(Q=js(l,m),Q!=null&&b.unshift(Vo(l,Q,O))):f||(Q=js(l,m),Q!=null&&b.push(Vo(l,Q,O)))),l=l.return}b.length!==0&&t.push({event:s,listeners:b})}var o2=/\r\n?/g,c2=/\u0000|\uFFFD/g;function Wx(t){return(typeof t=="string"?t:""+t).replace(o2,`
`).replace(c2,"")}function Jx(t,s){return s=Wx(s),Wx(t)===s}function pt(t,s,l,c,f,m){switch(l){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Ln(t,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Ln(t,""+c);break;case"className":Yn(t,"class",c);break;case"tabIndex":Yn(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Yn(t,l,c);break;case"style":no(t,c,m);break;case"data":if(s!=="object"){Yn(t,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||l!=="href")){t.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(l);break}c=Li(""+c),t.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(s!=="input"&&pt(t,s,"name",f.name,f,null),pt(t,s,"formEncType",f.formEncType,f,null),pt(t,s,"formMethod",f.formMethod,f,null),pt(t,s,"formTarget",f.formTarget,f,null)):(pt(t,s,"encType",f.encType,f,null),pt(t,s,"method",f.method,f,null),pt(t,s,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(l);break}c=Li(""+c),t.setAttribute(l,c);break;case"onClick":c!=null&&(t.onclick=Ts);break;case"onScroll":c!=null&&Ye("scroll",t);break;case"onScrollEnd":c!=null&&Ye("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=l}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}l=Li(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(l,""+c):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":c===!0?t.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(l,c):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(l,c):t.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(l):t.setAttribute(l,c);break;case"popover":Ye("beforetoggle",t),Ye("toggle",t),Mi(t,"popover",c);break;case"xlinkActuate":Bt(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Bt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Bt(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Bt(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Bt(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Bt(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Bt(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Bt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Bt(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Mi(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Kc.get(l)||l,Mi(t,l,c))}}function Yf(t,s,l,c,f,m){switch(l){case"style":no(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=l}}break;case"children":typeof c=="string"?Ln(t,c):(typeof c=="number"||typeof c=="bigint")&&Ln(t,""+c);break;case"onScroll":c!=null&&Ye("scroll",t);break;case"onScrollEnd":c!=null&&Ye("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Ts);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yl.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),s=l.slice(2,f?l.length-7:void 0),m=t[Zt]||null,m=m!=null?m[l]:null,typeof m=="function"&&t.removeEventListener(s,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(s,c,f);break e}l in t?t[l]=c:c===!0?t.setAttribute(l,""):Mi(t,l,c)}}}function pn(t,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",t),Ye("load",t);var c=!1,f=!1,m;for(m in l)if(l.hasOwnProperty(m)){var b=l[m];if(b!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:pt(t,s,m,b,l,null)}}f&&pt(t,s,"srcSet",l.srcSet,l,null),c&&pt(t,s,"src",l.src,l,null);return;case"input":Ye("invalid",t);var T=m=b=f=null,O=null,Q=null;for(c in l)if(l.hasOwnProperty(c)){var ae=l[c];if(ae!=null)switch(c){case"name":f=ae;break;case"type":b=ae;break;case"checked":O=ae;break;case"defaultChecked":Q=ae;break;case"value":m=ae;break;case"defaultValue":T=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,s));break;default:pt(t,s,c,ae,l,null)}}Fc(t,m,T,O,Q,b,f,!1);return;case"select":Ye("invalid",t),c=b=m=null;for(f in l)if(l.hasOwnProperty(f)&&(T=l[f],T!=null))switch(f){case"value":m=T;break;case"defaultValue":b=T;break;case"multiple":c=T;default:pt(t,s,f,T,l,null)}s=m,l=b,t.multiple=!!c,s!=null?Ba(t,!!c,s,!1):l!=null&&Ba(t,!!c,l,!0);return;case"textarea":Ye("invalid",t),m=f=c=null;for(b in l)if(l.hasOwnProperty(b)&&(T=l[b],T!=null))switch(b){case"value":c=T;break;case"defaultValue":f=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:pt(t,s,b,T,l,null)}Fa(t,c,f,m);return;case"option":for(O in l)if(l.hasOwnProperty(O)&&(c=l[O],c!=null))switch(O){case"selected":t.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:pt(t,s,O,c,l,null)}return;case"dialog":Ye("beforetoggle",t),Ye("toggle",t),Ye("cancel",t),Ye("close",t);break;case"iframe":case"object":Ye("load",t);break;case"video":case"audio":for(c=0;c<Lo.length;c++)Ye(Lo[c],t);break;case"image":Ye("error",t),Ye("load",t);break;case"details":Ye("toggle",t);break;case"embed":case"source":case"link":Ye("error",t),Ye("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in l)if(l.hasOwnProperty(Q)&&(c=l[Q],c!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:pt(t,s,Q,c,l,null)}return;default:if(Pi(s)){for(ae in l)l.hasOwnProperty(ae)&&(c=l[ae],c!==void 0&&Yf(t,s,ae,c,l,void 0));return}}for(T in l)l.hasOwnProperty(T)&&(c=l[T],c!=null&&pt(t,s,T,c,l,null))}function u2(t,s,l,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,T=null,O=null,Q=null,ae=null;for(Z in l){var ie=l[Z];if(l.hasOwnProperty(Z)&&ie!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":O=ie;default:c.hasOwnProperty(Z)||pt(t,s,Z,null,c,ie)}}for(var $ in c){var Z=c[$];if(ie=l[$],c.hasOwnProperty($)&&(Z!=null||ie!=null))switch($){case"type":m=Z;break;case"name":f=Z;break;case"checked":Q=Z;break;case"defaultChecked":ae=Z;break;case"value":b=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:Z!==ie&&pt(t,s,$,Z,c,ie)}}Oi(t,b,T,O,Q,ae,m,f);return;case"select":Z=b=T=$=null;for(m in l)if(O=l[m],l.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":Z=O;default:c.hasOwnProperty(m)||pt(t,s,m,null,c,O)}for(f in c)if(m=c[f],O=l[f],c.hasOwnProperty(f)&&(m!=null||O!=null))switch(f){case"value":$=m;break;case"defaultValue":T=m;break;case"multiple":b=m;default:m!==O&&pt(t,s,f,m,c,O)}s=T,l=b,c=Z,$!=null?Ba(t,!!l,$,!1):!!c!=!!l&&(s!=null?Ba(t,!!l,s,!0):Ba(t,!!l,l?[]:"",!1));return;case"textarea":Z=$=null;for(T in l)if(f=l[T],l.hasOwnProperty(T)&&f!=null&&!c.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:pt(t,s,T,null,c,f)}for(b in c)if(f=c[b],m=l[b],c.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":$=f;break;case"defaultValue":Z=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&pt(t,s,b,f,c,m)}Hc(t,$,Z);return;case"option":for(var Ee in l)if($=l[Ee],l.hasOwnProperty(Ee)&&$!=null&&!c.hasOwnProperty(Ee))switch(Ee){case"selected":t.selected=!1;break;default:pt(t,s,Ee,null,c,$)}for(O in c)if($=c[O],Z=l[O],c.hasOwnProperty(O)&&$!==Z&&($!=null||Z!=null))switch(O){case"selected":t.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:pt(t,s,O,$,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in l)$=l[Ie],l.hasOwnProperty(Ie)&&$!=null&&!c.hasOwnProperty(Ie)&&pt(t,s,Ie,null,c,$);for(Q in c)if($=c[Q],Z=l[Q],c.hasOwnProperty(Q)&&$!==Z&&($!=null||Z!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,s));break;default:pt(t,s,Q,$,c,Z)}return;default:if(Pi(s)){for(var gt in l)$=l[gt],l.hasOwnProperty(gt)&&$!==void 0&&!c.hasOwnProperty(gt)&&Yf(t,s,gt,void 0,c,$);for(ae in c)$=c[ae],Z=l[ae],!c.hasOwnProperty(ae)||$===Z||$===void 0&&Z===void 0||Yf(t,s,ae,$,c,Z);return}}for(var B in l)$=l[B],l.hasOwnProperty(B)&&$!=null&&!c.hasOwnProperty(B)&&pt(t,s,B,null,c,$);for(ie in c)$=c[ie],Z=l[ie],!c.hasOwnProperty(ie)||$===Z||$==null&&Z==null||pt(t,s,ie,$,c,Z)}function Zx(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function d2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var f=l[c],m=f.transferSize,b=f.initiatorType,T=f.duration;if(m&&T&&Zx(b)){for(b=0,T=f.responseEnd,c+=1;c<l.length;c++){var O=l[c],Q=O.startTime;if(Q>T)break;var ae=O.transferSize,ie=O.initiatorType;ae&&Zx(ie)&&(O=O.responseEnd,b+=ae*(O<T?1:(T-Q)/(O-Q)))}if(--c,s+=8*(m+b)/(f.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Xf=null,Wf=null;function Qu(t){return t.nodeType===9?t:t.ownerDocument}function ey(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ty(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Jf(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Zf=null;function h2(){var t=window.event;return t&&t.type==="popstate"?t===Zf?!1:(Zf=t,!0):(Zf=null,!1)}var ny=typeof setTimeout=="function"?setTimeout:void 0,f2=typeof clearTimeout=="function"?clearTimeout:void 0,sy=typeof Promise=="function"?Promise:void 0,m2=typeof queueMicrotask=="function"?queueMicrotask:typeof sy<"u"?function(t){return sy.resolve(null).then(t).catch(p2)}:ny;function p2(t){setTimeout(function(){throw t})}function hr(t){return t==="head"}function ay(t,s){var l=s,c=0;do{var f=l.nextSibling;if(t.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"||l==="/&"){if(c===0){t.removeChild(f),xl(s);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Uo(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,Uo(l);for(var m=l.firstChild;m;){var b=m.nextSibling,T=m.nodeName;m[zs]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||l.removeChild(m),m=b}}else l==="body"&&Uo(t.ownerDocument.body);l=f}while(l);xl(s)}function ry(t,s){var l=t;t=0;do{var c=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=c}while(l)}function em(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":em(l),Di(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function g2(t,s,l,c){for(;t.nodeType===1;){var f=l;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[zs])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=bs(t.nextSibling),t===null)break}return null}function x2(t,s,l){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=bs(t.nextSibling),t===null))return null;return t}function iy(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=bs(t.nextSibling),t===null))return null;return t}function tm(t){return t.data==="$?"||t.data==="$~"}function nm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function y2(t,s){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||l.readyState!=="loading")s();else{var c=function(){s(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function bs(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var sm=null;function ly(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(s===0)return bs(t.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}t=t.nextSibling}return null}function oy(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return t;s--}else l!=="/$"&&l!=="/&"||s++}t=t.previousSibling}return null}function cy(t,s,l){switch(s=Qu(l),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Uo(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Di(t)}var vs=new Map,uy=new Set;function $u(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ca=oe.d;oe.d={f:b2,r:v2,D:_2,C:w2,L:N2,m:E2,X:T2,S:S2,M:j2};function b2(){var t=Ca.f(),s=Uu();return t||s}function v2(t){var s=cs(t);s!==null&&s.tag===5&&s.type==="form"?jg(s):Ca.r(t)}var ml=typeof document>"u"?null:document;function dy(t,s,l){var c=ml;if(c&&typeof s=="string"&&s){var f=Pn(s);f='link[rel="'+t+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),uy.has(f)||(uy.add(f),t={rel:t,crossOrigin:l,href:s},c.querySelector(f)===null&&(s=c.createElement("link"),pn(s,"link",t),zt(s),c.head.appendChild(s)))}}function _2(t){Ca.D(t),dy("dns-prefetch",t,null)}function w2(t,s){Ca.C(t,s),dy("preconnect",t,s)}function N2(t,s,l){Ca.L(t,s,l);var c=ml;if(c&&t&&s){var f='link[rel="preload"][as="'+Pn(s)+'"]';s==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+Pn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+Pn(l.imageSizes)+'"]')):f+='[href="'+Pn(t)+'"]';var m=f;switch(s){case"style":m=pl(t);break;case"script":m=gl(t)}vs.has(m)||(t=w({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:t,as:s},l),vs.set(m,t),c.querySelector(f)!==null||s==="style"&&c.querySelector(qo(m))||s==="script"&&c.querySelector(zo(m))||(s=c.createElement("link"),pn(s,"link",t),zt(s),c.head.appendChild(s)))}}function E2(t,s){Ca.m(t,s);var l=ml;if(l&&t){var c=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Pn(c)+'"][href="'+Pn(t)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=gl(t)}if(!vs.has(m)&&(t=w({rel:"modulepreload",href:t},s),vs.set(m,t),l.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(zo(m)))return}c=l.createElement("link"),pn(c,"link",t),zt(c),l.head.appendChild(c)}}}function S2(t,s,l){Ca.S(t,s,l);var c=ml;if(c&&t){var f=Fs(c).hoistableStyles,m=pl(t);s=s||"default";var b=f.get(m);if(!b){var T={loading:0,preload:null};if(b=c.querySelector(qo(m)))T.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":s},l),(l=vs.get(m))&&am(t,l);var O=b=c.createElement("link");zt(O),pn(O,"link",t),O._p=new Promise(function(Q,ae){O.onload=Q,O.onerror=ae}),O.addEventListener("load",function(){T.loading|=1}),O.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Yu(b,s,c)}b={type:"stylesheet",instance:b,count:1,state:T},f.set(m,b)}}}function T2(t,s){Ca.X(t,s);var l=ml;if(l&&t){var c=Fs(l).hoistableScripts,f=gl(t),m=c.get(f);m||(m=l.querySelector(zo(f)),m||(t=w({src:t,async:!0},s),(s=vs.get(f))&&rm(t,s),m=l.createElement("script"),zt(m),pn(m,"link",t),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function j2(t,s){Ca.M(t,s);var l=ml;if(l&&t){var c=Fs(l).hoistableScripts,f=gl(t),m=c.get(f);m||(m=l.querySelector(zo(f)),m||(t=w({src:t,async:!0,type:"module"},s),(s=vs.get(f))&&rm(t,s),m=l.createElement("script"),zt(m),pn(m,"link",t),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function hy(t,s,l,c){var f=(f=U.current)?$u(f):null;if(!f)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=pl(l.href),l=Fs(f).hoistableStyles,c=l.get(s),c||(c={type:"style",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=pl(l.href);var m=Fs(f).hoistableStyles,b=m.get(t);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,b),(m=f.querySelector(qo(t)))&&!m._p&&(b.instance=m,b.state.loading=5),vs.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},vs.set(t,l),m||A2(f,t,l,b.state))),s&&c===null)throw Error(r(528,""));return b}if(s&&c!==null)throw Error(r(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=gl(l),l=Fs(f).hoistableScripts,c=l.get(s),c||(c={type:"script",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function pl(t){return'href="'+Pn(t)+'"'}function qo(t){return'link[rel="stylesheet"]['+t+"]"}function fy(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function A2(t,s,l,c){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=t.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),pn(s,"link",l),zt(s),t.head.appendChild(s))}function gl(t){return'[src="'+Pn(t)+'"]'}function zo(t){return"script[async]"+t}function my(t,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var c=t.querySelector('style[data-href~="'+Pn(l.href)+'"]');if(c)return s.instance=c,zt(c),c;var f=w({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),zt(c),pn(c,"style",f),Yu(c,l.precedence,t),s.instance=c;case"stylesheet":f=pl(l.href);var m=t.querySelector(qo(f));if(m)return s.state.loading|=4,s.instance=m,zt(m),m;c=fy(l),(f=vs.get(f))&&am(c,f),m=(t.ownerDocument||t).createElement("link"),zt(m);var b=m;return b._p=new Promise(function(T,O){b.onload=T,b.onerror=O}),pn(m,"link",c),s.state.loading|=4,Yu(m,l.precedence,t),s.instance=m;case"script":return m=gl(l.src),(f=t.querySelector(zo(m)))?(s.instance=f,zt(f),f):(c=l,(f=vs.get(m))&&(c=w({},l),rm(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),zt(f),pn(f,"link",c),t.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Yu(c,l.precedence,t));return s.instance}function Yu(t,s,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,b=0;b<c.length;b++){var T=c[b];if(T.dataset.precedence===s)m=T;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(t,s.firstChild))}function am(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function rm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Xu=null;function py(t,s,l){if(Xu===null){var c=new Map,f=Xu=new Map;f.set(l,c)}else f=Xu,c=f.get(l),c||(c=new Map,f.set(l,c));if(c.has(t))return c;for(c.set(t,null),l=l.getElementsByTagName(t),f=0;f<l.length;f++){var m=l[f];if(!(m[zs]||m[Rt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(s)||"";b=t+b;var T=c.get(b);T?T.push(m):c.set(b,[m])}}return c}function gy(t,s,l){t=t.ownerDocument||t,t.head.insertBefore(l,s==="title"?t.querySelector("head > title"):null)}function C2(t,s,l){if(l===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function xy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function R2(t,s,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var f=pl(c.href),m=s.querySelector(qo(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Wu.bind(t),s.then(t,t)),l.state.loading|=4,l.instance=m,zt(m);return}m=s.ownerDocument||s,c=fy(c),(f=vs.get(f))&&am(c,f),m=m.createElement("link"),zt(m);var b=m;b._p=new Promise(function(T,O){b.onload=T,b.onerror=O}),pn(m,"link",c),l.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=Wu.bind(t),s.addEventListener("load",l),s.addEventListener("error",l))}}var im=0;function I2(t,s){return t.stylesheets&&t.count===0&&Zu(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var c=setTimeout(function(){if(t.stylesheets&&Zu(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&im===0&&(im=62500*d2());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Zu(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>im?50:800)+s);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Wu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ju=null;function Zu(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ju=new Map,s.forEach(k2,t),Ju=null,Wu.call(t))}function k2(t,s){if(!(s.state.loading&4)){var l=Ju.get(t);if(l)var c=l.get(null);else{l=new Map,Ju.set(t,l);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(l.set(b.dataset.precedence,b),c=b)}c&&l.set(null,c)}f=s.instance,b=f.getAttribute("data-precedence"),m=l.get(b)||c,m===c&&l.set(null,f),l.set(b,f),this.count++,c=Wu.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),s.state.loading|=4}}var Bo={$$typeof:te,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function D2(t,s,l,c,f,m,b,T,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ve(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ve(0),this.hiddenUpdates=Ve(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function yy(t,s,l,c,f,m,b,T,O,Q,ae,ie){return t=new D2(t,s,l,b,O,Q,ae,ie,T),s=1,m===!0&&(s|=24),m=Wn(3,null,null,s),t.current=m,m.stateNode=t,s=Vh(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:c,isDehydrated:l,cache:s},Bh(m),t}function by(t){return t?(t=Qi,t):Qi}function vy(t,s,l,c,f,m){f=by(f),c.context===null?c.context=f:c.pendingContext=f,c=tr(s),c.payload={element:l},m=m===void 0?null:m,m!==null&&(c.callback=m),l=nr(t,c,s),l!==null&&(Bn(l,t,s),vo(l,t,s))}function _y(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<s?l:s}}function lm(t,s){_y(t,s),(t=t.alternate)&&_y(t,s)}function wy(t){if(t.tag===13||t.tag===31){var s=Jr(t,67108864);s!==null&&Bn(s,t,67108864),lm(t,67108864)}}function Ny(t){if(t.tag===13||t.tag===31){var s=ns();s=ls(s);var l=Jr(t,s);l!==null&&Bn(l,t,s),lm(t,s)}}var ed=!0;function M2(t,s,l,c){var f=G.T;G.T=null;var m=oe.p;try{oe.p=2,om(t,s,l,c)}finally{oe.p=m,G.T=f}}function O2(t,s,l,c){var f=G.T;G.T=null;var m=oe.p;try{oe.p=8,om(t,s,l,c)}finally{oe.p=m,G.T=f}}function om(t,s,l,c){if(ed){var f=cm(c);if(f===null)$f(t,s,c,td,l),Sy(t,c);else if(L2(f,t,s,l,c))c.stopPropagation();else if(Sy(t,c),s&4&&-1<P2.indexOf(t)){for(;f!==null;){var m=cs(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=Qn(m.pendingLanes);if(b!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;b;){var O=1<<31-Ct(b);T.entanglements[1]|=O,b&=~O}na(m),(lt&6)===0&&(Lu=X()+500,Po(0))}}break;case 31:case 13:T=Jr(m,2),T!==null&&Bn(T,m,2),Uu(),lm(m,2)}if(m=cm(c),m===null&&$f(t,s,c,td,l),m===f)break;f=m}f!==null&&c.stopPropagation()}else $f(t,s,c,null,l)}}function cm(t){return t=us(t),um(t)}var td=null;function um(t){if(td=null,t=Bs(t),t!==null){var s=u(t);if(s===null)t=null;else{var l=s.tag;if(l===13){if(t=h(s),t!==null)return t;t=null}else if(l===31){if(t=p(s),t!==null)return t;t=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return td=t,null}function Ey(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Le()){case yt:return 2;case vt:return 8;case At:case Ns:return 32;case Dn:return 268435456;default:return 32}default:return 32}}var dm=!1,fr=null,mr=null,pr=null,Fo=new Map,Ho=new Map,gr=[],P2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sy(t,s){switch(t){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":Fo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ho.delete(s.pointerId)}}function Go(t,s,l,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:l,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},s!==null&&(s=cs(s),s!==null&&wy(s)),t):(t.eventSystemFlags|=c,s=t.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),t)}function L2(t,s,l,c,f){switch(s){case"focusin":return fr=Go(fr,t,s,l,c,f),!0;case"dragenter":return mr=Go(mr,t,s,l,c,f),!0;case"mouseover":return pr=Go(pr,t,s,l,c,f),!0;case"pointerover":var m=f.pointerId;return Fo.set(m,Go(Fo.get(m)||null,t,s,l,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Ho.set(m,Go(Ho.get(m)||null,t,s,l,c,f)),!0}return!1}function Ty(t){var s=Bs(t.target);if(s!==null){var l=u(s);if(l!==null){if(s=l.tag,s===13){if(s=h(l),s!==null){t.blockedOn=s,On(t.priority,function(){Ny(l)});return}}else if(s===31){if(s=p(l),s!==null){t.blockedOn=s,On(t.priority,function(){Ny(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nd(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var l=cm(t.nativeEvent);if(l===null){l=t.nativeEvent;var c=new l.constructor(l.type,l);so=c,l.target.dispatchEvent(c),so=null}else return s=cs(l),s!==null&&wy(s),t.blockedOn=l,!1;s.shift()}return!0}function jy(t,s,l){nd(t)&&l.delete(s)}function V2(){dm=!1,fr!==null&&nd(fr)&&(fr=null),mr!==null&&nd(mr)&&(mr=null),pr!==null&&nd(pr)&&(pr=null),Fo.forEach(jy),Ho.forEach(jy)}function sd(t,s){t.blockedOn===s&&(t.blockedOn=null,dm||(dm=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,V2)))}var ad=null;function Ay(t){ad!==t&&(ad=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){ad===t&&(ad=null);for(var s=0;s<t.length;s+=3){var l=t[s],c=t[s+1],f=t[s+2];if(typeof c!="function"){if(um(c||l)===null)continue;break}var m=cs(l);m!==null&&(t.splice(s,3),s-=3,cf(m,{pending:!0,data:f,method:l.method,action:c},c,f))}}))}function xl(t){function s(O){return sd(O,t)}fr!==null&&sd(fr,t),mr!==null&&sd(mr,t),pr!==null&&sd(pr,t),Fo.forEach(s),Ho.forEach(s);for(var l=0;l<gr.length;l++){var c=gr[l];c.blockedOn===t&&(c.blockedOn=null)}for(;0<gr.length&&(l=gr[0],l.blockedOn===null);)Ty(l),l.blockedOn===null&&gr.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var f=l[c],m=l[c+1],b=f[Zt]||null;if(typeof m=="function")b||Ay(l);else if(b){var T=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[Zt]||null)T=b.formAction;else if(um(f)!==null)continue}else T=b.action;typeof T=="function"?l[c+1]=T:(l.splice(c,3),c-=3),Ay(l)}}}function Cy(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function hm(t){this._internalRoot=t}rd.prototype.render=hm.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var l=s.current,c=ns();vy(l,c,t,s,null,null)},rd.prototype.unmount=hm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;vy(t.current,2,null,t,null,null),Uu(),s[De]=null}};function rd(t){this._internalRoot=t}rd.prototype.unstable_scheduleHydration=function(t){if(t){var s=Ql();t={blockedOn:null,target:t,priority:s};for(var l=0;l<gr.length&&s!==0&&s<gr[l].priority;l++);gr.splice(l,0,t),l===0&&Ty(t)}};var Ry=e.version;if(Ry!=="19.2.1")throw Error(r(527,Ry,"19.2.1"));oe.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=x(s),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var U2={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!id.isDisabled&&id.supportsFiber)try{Gn=id.inject(U2),Wt=id}catch{}}return Qo.createRoot=function(t,s){if(!o(t))throw Error(r(299));var l=!1,c="",f=Lg,m=Vg,b=Ug;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError)),s=yy(t,1,!1,null,null,l,c,null,f,m,b,Cy),t[De]=s.current,Qf(t),new hm(s)},Qo.hydrateRoot=function(t,s,l){if(!o(t))throw Error(r(299));var c=!1,f="",m=Lg,b=Vg,T=Ug,O=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError),l.formState!==void 0&&(O=l.formState)),s=yy(t,1,!0,s,l??null,c,f,O,m,b,T,Cy),s.context=by(null),l=s.current,c=ns(),c=ls(c),f=tr(c),f.callback=null,nr(l,f,c),l=c,s.current.lanes=l,ze(s,l),na(s),t[De]=s.current,Qf(t),new rd(s)},Qo.version="19.2.1",Qo}var qy;function Y2(){if(qy)return pm.exports;qy=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),pm.exports=$2(),pm.exports}var X2=Y2();const W2=jv(X2),Vl=({className:a,onClick:e,style:n,title:r})=>{const[o,u]=z.useState(!1);return o?i.jsxs("svg",{viewBox:"0 0 300 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:a,"aria-label":"MASERP",onClick:e,style:n,role:"img",children:[r&&i.jsx("title",{children:r}),i.jsxs("g",{children:[i.jsx("path",{d:"M42 12L70 28V60L42 76L14 60V28L42 12Z",fill:"#1E3A8A"}),i.jsx("path",{d:"M42 30L54 38V50L42 58L30 50V38L42 30Z",fill:"#FFFFFF"})]}),i.jsx("text",{x:"90",y:"55",fill:"#1E3A8A",fontFamily:"sans-serif",fontWeight:"bold",fontSize:"42",children:"MASERP"})]}):i.jsx("img",{src:"/logo.png",alt:"MASERP",className:`object-contain ${a||""}`,onError:()=>u(!0),onClick:e,style:n,title:r})},J2=({onLogin:a})=>{const[e,n]=z.useState(""),[r,o]=z.useState(""),[u,h]=z.useState(""),[p,g]=z.useState(!1),x=async _=>{if(_.preventDefault(),e&&r){g(!0),h("");try{await a(e,r)||h("Invalid email or password.")}catch(w){console.error("Login error",w),h(w.message||"Login failed")}finally{g(!1)}}else h("Please enter both email and password.")};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 p-4",children:i.jsxs("div",{className:"bg-white p-8 md:p-12 rounded-2xl shadow-lg w-full max-w-md transform transition-all duration-300 border-t-4 border-purple-900",children:[i.jsxs("div",{className:"flex flex-col items-center mb-8",children:[i.jsx(Vl,{className:"h-20 w-auto mb-4"}),i.jsx("p",{className:"text-blue-900 font-medium",children:"Admin Login"})]}),i.jsxs("form",{onSubmit:x,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-blue-900",children:"Email"}),i.jsx("input",{id:"email",type:"text",value:e,onChange:_=>n(_.target.value),className:"mt-1 block w-full px-4 py-3 bg-slate-50 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-purple-900 focus:border-purple-900 sm:text-sm text-blue-900",placeholder:"admin or user@example.com"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-blue-900",children:"Password"}),i.jsx("input",{id:"password",type:"password",value:r,onChange:_=>o(_.target.value),className:"mt-1 block w-full px-4 py-3 bg-slate-50 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-purple-900 focus:border-purple-900 sm:text-sm text-blue-900",placeholder:""})]}),u&&i.jsx("p",{className:"text-sm text-red-600",children:u}),i.jsx("button",{type:"submit",disabled:p,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-900 hover:bg-purple-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-900 transition-colors duration-200 disabled:bg-purple-400",children:p?"Logging in...":"Login"})]})]})})},Z2=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.68c.11-.32.223-.65.334-.982l.012-.035a6.375 6.375 0 01-2.924-4.982 6.375 6.375 0 0111.085-3.834c.11.32.223.65.334.982l.012-.035a6.375 6.375 0 01-2.924 4.982 6.375 6.375 0 01-11.085 3.834 6.375 6.375 0 012.924 4.982z"})}),cc=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h6M9 11.25h6m-6 4.5h6M21 21V3M3 21V3"})}),dp=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"})}),hp=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:[i.jsx("path",{d:"M12 14.25c-3.75 0-7.5-1.34-7.5-3v-4.5c0-1.66 3.35-3 7.5-3s7.5 1.34 7.5 3v4.5c0 1.65-3.75 3-7.5 3z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5v6.75c0 1.65 3.75 3 7.5 3s7.5-1.35 7.5-3V10.5M4.5 10.5L12 15l7.5-4.5"})]}),Av=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 100-18 9 9 0 000 18z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 9h16.5M3.75 15h16.5M12 3v18"})]}),Cv=({module:a,onSelect:e})=>i.jsxs("div",{onClick:e,className:"bg-white p-8 rounded-2xl shadow-md hover:shadow-xl hover:-translate-y-2 transition-all duration-300 cursor-pointer text-center flex flex-col items-center h-full border-t-4 border-transparent hover:border-purple-600",role:"button",tabIndex:0,onKeyDown:n=>n.key==="Enter"&&e(),children:[i.jsx("div",{className:"text-purple-800 mb-5",children:a.icon}),i.jsx("h2",{className:"font-bold text-xl text-blue-900 mb-2",children:a.title}),i.jsx("p",{className:"text-sm text-blue-900 flex-grow",children:a.description})]}),Ul=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})}),Om=[{id:"hr",icon:i.jsx(Z2,{className:"w-12 h-12"}),title:"HR Module",description:"Attendance, Shifts, CCTV snapshots, Employee management"},{id:"inventory_management",icon:i.jsx(cc,{className:"w-12 h-12"}),title:"Inventory Management",description:"Manage assets, labs, printers, and consumables."},{id:"supply_chain",icon:i.jsx(cc,{className:"w-12 h-12"}),title:"Supply Chain Module",description:"Manage procurement, logistics, and supplier relations."},{id:"finance",icon:i.jsx(dp,{className:"w-12 h-12"}),title:"Finance Module",description:"Budgeting, Payments, Receipts, WhatsApp receipts"},{id:"student",icon:i.jsx(hp,{className:"w-12 h-12"}),title:"Student Module",description:"Applicants, Student Portal, Attendance, Course delivery"},{id:"website",icon:i.jsx(Av,{className:"w-12 h-12"}),title:"Website & Portals",description:"Applicant Portal, Student Portal, Teacher/Admin Dashboards"}],eN=({onModuleSelect:a,onLogout:e,accessibleModules:n})=>{const r=n?Om.filter(o=>n.includes(o.id)):Om;return i.jsxs("div",{className:"relative w-full max-w-6xl mx-auto p-4 sm:p-8",children:[i.jsxs("header",{className:"text-center mb-10 flex flex-col items-center",children:[i.jsx(Vl,{className:"h-20 w-auto mb-6"}),i.jsx("p",{className:"text-blue-900 text-lg",children:"Select a module to continue"})]}),i.jsx("main",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.length>0?r.map(o=>i.jsx(Cv,{module:o,onSelect:()=>a(o.id)},o.id)):i.jsxs("div",{className:"md:col-span-2 lg:col-span-3 text-center p-8 bg-white rounded-lg shadow-md",children:[i.jsx("h2",{className:"text-xl font-semibold text-blue-900",children:"No Modules Assigned"}),i.jsx("p",{className:"text-blue-900 mt-2",children:"You have not been assigned any modules. Please contact an administrator."})]})}),i.jsx("div",{className:"absolute top-4 right-4 sm:top-8 sm:right-8",children:i.jsxs("button",{onClick:e,className:"flex items-center gap-2 bg-white text-purple-900 px-4 py-2 rounded-lg shadow-md hover:bg-purple-50 transition-colors border border-purple-200","aria-label":"Logout",children:[i.jsx(Ul,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:"Logout"})]})})]})},tN=({employee:a,onModuleSelect:e,onLogout:n,accessibleModules:r})=>{var x;const o=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),u=Om.filter(_=>r.includes(_.id)),p=a.employmentType==="Probation"?{total:0,used:0}:((x=a.leaveBalance)==null?void 0:x.annual)||{total:14,used:0},g=Math.max(0,p.total-p.used);return i.jsxs("div",{className:"min-h-screen bg-slate-50",children:[i.jsxs("header",{className:"bg-purple-900 shadow-sm border-b border-purple-800 px-6 py-4 flex justify-between items-center",children:[i.jsx(Vl,{className:"h-8 w-auto brightness-0 invert"}),i.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-purple-100 hover:text-white transition-colors text-sm font-medium",children:[i.jsx(Ul,{className:"w-5 h-5"}),"Logout"]})]}),i.jsxs("main",{className:"max-w-7xl mx-auto p-6 sm:p-8 space-y-8",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-blue-900",children:["Welcome back, ",a.firstName]}),i.jsx("p",{className:"text-blue-900 mt-1",children:o})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100 flex items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-purple-100 flex items-center justify-center text-purple-900 font-bold text-2xl",children:a.firstName.charAt(0)}),i.jsxs("div",{children:[i.jsxs("h2",{className:"font-bold text-blue-900",children:[a.firstName," ",a.lastName]}),i.jsx("p",{className:"text-sm text-blue-900",children:a.designation}),i.jsx("p",{className:"text-xs text-blue-800",children:a.department})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[i.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-1",children:"My Shift"}),i.jsx("p",{className:"text-lg font-semibold text-blue-900",children:a.shift||"Standard (9-6)"}),i.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-green-500"}),i.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Active"})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[i.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-1",children:"Annual Leave Balance"}),i.jsxs("div",{className:"flex items-baseline gap-1",children:[i.jsx("span",{className:"text-3xl font-bold text-blue-900",children:g}),i.jsxs("span",{className:"text-sm text-blue-800",children:["/ ",p.total," days"]})]}),i.jsx("div",{className:"w-full bg-slate-100 rounded-full h-1.5 mt-3",children:i.jsx("div",{className:"bg-purple-900 h-1.5 rounded-full",style:{width:p.total>0?`${g/p.total*100}%`:"0%"}})})]})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-6",children:"My Applications"}),u.length>0?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(_=>i.jsx(Cv,{module:_,onSelect:()=>e(_.id)},_.id))}):i.jsxs("div",{className:"bg-white rounded-xl p-8 text-center border border-dashed border-slate-300",children:[i.jsx("p",{className:"text-blue-900",children:"You do not have access to any modules yet."}),i.jsx("p",{className:"text-sm text-blue-800 mt-1",children:"Contact HR or IT administrator for access."})]})]})]})]})},$d=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"})}),nN=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.68c.11-.32.223-.65.334-.982l.012-.035a6.375 6.375 0 01-2.924-4.982 6.375 6.375 0 0111.085-3.834c.11.32.223-.65.334.982l.012-.035a6.375 6.375 0 01-2.924 4.982 6.375 6.375 0 01-11.085 3.834 6.375 6.375 0 012.924 4.982z"})}),fp=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0h18M12 12.75h.008v.008H12v-.008z"})}),Rl=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 14.25v2.25m3-4.5v4.5m3-6.75v6.75m3-9v9M6 20.25h12A2.25 2.25 0 0020.25 18V6A2.25 2.25 0 0018 3.75H6A2.25 2.25 0 003.75 6v12A2.25 2.25 0 006 20.25z"})}),Td=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m-7.5-2.962a3.75 3.75 0 015.25 0m-5.25 0a3.75 3.75 0 00-5.25 0M3 13.001v-5.25a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.75v5.25c0 .621-.504 1.125-1.125 1.125H4.125A1.125 1.125 0 013 13.001z"})}),sN=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286zm0 13.036h.008v.008h-.008v-.008z"})}),aN=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),rN=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),Rv=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),Iv=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"})}),kv=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),Yd=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zM12 2.25V4.5m5.834.166l-1.591 1.591M20.25 10.5H18M5.834 7.75l-1.591-1.591M4.5 10.5H2.25m11.106 4.75L9.13 18.218m-2.923-8.814l.159.098m3.523-2.226L9.13 5.782"})}),mp=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-1.008 1.11-1.226l.45-1.691a1.125 1.125 0 012.15 0l.45 1.691c.55.218 1.02.684 1.11 1.226l1.691.45a1.125 1.125 0 010 2.15l-1.691.45c-.09.542-.56 1.008-1.11 1.226l-.45 1.691a1.125 1.125 0 01-2.15 0l-.45-1.691a1.722 1.722 0 01-1.11-1.226l-1.691-.45a1.125 1.125 0 010-2.15l1.691-.45zM12 12.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5zM3.94 14.406c-.542-.09-1.008-.56-1.226-1.11l-1.691-.45a1.125 1.125 0 010-2.15l1.691-.45c.218-.55.684-1.02 1.226-1.11l.45-1.691a1.125 1.125 0 012.15 0l.45 1.691c.55.218 1.02.684 1.11 1.226l1.691.45a1.125 1.125 0 010 2.15l-1.691.45c-.218.55-.684 1.02-1.226 1.11l-.45 1.691a1.125 1.125 0 01-2.15 0l-.45-1.691a1.722 1.722 0 01-1.11-1.226l-1.691-.45a1.125 1.125 0 010-2.15l1.691-.45c.09.542.56 1.008 1.11 1.226l.45 1.691a1.125 1.125 0 01-2.15 0l-.45-1.691a1.722 1.722 0 01-1.11-1.226zM14.406 20.06c-.09.542-.56 1.008-1.11 1.226l-.45 1.691a1.125 1.125 0 01-2.15 0l-.45-1.691c-.55-.218-1.02-.684-1.11-1.226l-1.691-.45a1.125 1.125 0 010-2.15l1.691-.45c.09-.542.56-1.008 1.11-1.226l.45-1.691a1.125 1.125 0 012.15 0l.45 1.691c.55.218 1.02.684 1.11 1.226l1.691.45a1.125 1.125 0 010 2.15l-1.691.45z"})}),uc=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-1.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25A2.25 2.25 0 015.25 3h9.75a2.25 2.25 0 012.25 2.25z"})}),Dv=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 3.75H6A2.25 2.25 0 003.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0120.25 6v1.5m0 9V18A2.25 2.25 0 0118 20.25h-1.5m-9 0H6A2.25 2.25 0 013.75 18v-1.5M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v3m0 9v3m-4.5-4.5h-3m9 0h-3m-9-4.5h3m9 0h3"})]}),Mv=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0110.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0l.229 2.523a1.125 1.125 0 01-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.061A2.25 2.25 0 0021 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 00-1.913-.247M6.34 18H5.279A2.25 2.25 0 013 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 011.913-.247m10.5 0a48.536 48.536 0 00-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5zm-3 0h.008v.008H15V10.5z"})}),iN=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),pp=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.75 3.03v.568c0 .334.148.65.405.864l1.068.89c.442.369.535 1.01.216 1.49l-.51.766a2.25 2.25 0 01-1.161.886l-.143.048a1.107 1.107 0 00-.57 1.664l.143.258a1.107 1.107 0 001.664.57l.143-.048a2.25 2.25 0 011.161.886l.51.766c.319.48.126 1.121-.216 1.49l-1.068.89a1.125 1.125 0 00-.405.864v.568m-6 0v-.568c0-.334-.148-.65-.405-.864l-1.068-.89a1.125 1.125 0 01-.216-1.49l.51-.766a2.25 2.25 0 001.161-.886l.143-.048a1.107 1.107 0 01.57-1.664l-.143-.258a1.107 1.107 0 01-1.664-.57l-.143.048a2.25 2.25 0 00-1.161-.886l-.51-.766a1.125 1.125 0 01.216-1.49l1.068-.89a1.125 1.125 0 00.405-.864v-.568a3 3 0 013-3h3.5a3 3 0 013 3v1.173c0 .521-.175 1.02-.49 1.432l-1.148 1.53c-.314.413-.77.68-1.256.75l-4.11.587c-.504.072-.994.27-1.432.559l-1.148.765a3 3 0 00-1.432 2.559V18a3 3 0 003 3h3.5a3 3 0 003-3v-1.173c0-.521.175-1.02.49-1.432l1.148-1.53c.314-.413.77-.68 1.256-.75l4.11-.587c.504-.072.994-.27 1.432-.559l1.148-.765a3 3 0 001.432-2.559V6a3 3 0 00-3-3h-3.5a3 3 0 00-3 3z"})}),dc=[{id:"dashboard",label:"Dashboard",icon:$d},{id:"employees",label:"Employees",icon:nN},{id:"attendance",label:"Attendance",icon:fp},{id:"reports",label:"Reports",icon:Rl},{id:"users",label:"Users",icon:Td},{id:"user-access",label:"User Access Management",icon:sN}],hc=[{id:"departments",label:"Departments",icon:aN},{id:"leaves",label:"Leaves",icon:rN},{id:"payroll",label:"Payroll",icon:Rv},{id:"performance",label:"Performance",icon:Iv},{id:"training",label:"Training",icon:kv},{id:"recruitment",label:"Recruitment",icon:Yd}],lN=[...dc,...hc],gp=[{id:"master",label:"Master Inventory",icon:cc},{id:"laptops",label:"Laptops",icon:uc},{id:"desktops",label:"Desktops",icon:uc},{id:"printers",label:"Printers & Toners",icon:Mv},{id:"labs",label:"Computer Labs",icon:Dv},{id:"kitchen",label:"The Chef's Academy",icon:pp}],jd=[{id:"assets",label:"Inventory",icon:uc},{id:"users",label:"Users",icon:Td},{id:"mrf",label:"MRF",icon:iN},{id:"reports",label:"Reports",icon:Rl},{id:"settings",label:"Settings",icon:mp}],oN=[...gp,...jd.filter(a=>["users","mrf","reports","settings"].includes(a.id))],Ov=[{id:"sc_requests",label:"New Request",icon:cc},{id:"sc_my_requests",label:"My Requests",icon:Rl},{id:"sc_approvals",label:"Account Manager",icon:Yd},{id:"sc_store",label:"Store Fulfillment",icon:pp},{id:"sc_purchase",label:"Purchase Department",icon:dp}],cN=[{id:"fin_dashboard",label:"Dashboard",icon:$d},{id:"budgeting",label:"Budgeting",icon:dp},{id:"payments",label:"Payments",icon:Rv},{id:"receipts",label:"Receipts",icon:Iv},{id:"fin_reports",label:"Reports",icon:Rl}],uN=[{id:"std_dashboard",label:"Dashboard",icon:$d},{id:"applicants",label:"Applicants",icon:Yd},{id:"student_portal",label:"Student Portal",icon:hp},{id:"std_attendance",label:"Attendance",icon:fp},{id:"course_delivery",label:"Course Delivery",icon:kv}],dN=[{id:"web_dashboard",label:"Dashboard",icon:$d},{id:"applicant_portal",label:"Applicant Portal",icon:Yd},{id:"student_portal_mgmt",label:"Student Portal",icon:hp},{id:"teacher_dash",label:"Teacher Dashboard",icon:Av},{id:"admin_dash",label:"Admin Dashboard",icon:mp}],zy={hr:lN,inventory_management:oN,supply_chain:Ov,finance:cN,student:uN,website:dN},By=({link:a,activePage:e,setActivePage:n,isCollapsed:r})=>{const o=e===a.id;return i.jsxs("a",{href:"#",onClick:u=>{u.preventDefault(),n(a.id)},className:`flex items-center py-2.5 px-4 rounded-md transition-colors duration-200 ${o?"bg-purple-50 text-purple-900 font-bold border-r-4 border-purple-900":"text-blue-900 hover:bg-purple-50 hover:text-purple-900"} ${r?"justify-center":""}`,children:[i.jsx(a.icon,{className:`h-5 w-5 ${o?"text-purple-900":"text-purple-400"}`}),!r&&i.jsx("span",{className:"ml-3 text-sm",children:a.label})]})},hN=({activePage:a,setActivePage:e,isCollapsed:n,onLogout:r,permissions:o,currentUserEmail:u,employees:h})=>{const p=u==="admin",g=h.find(A=>A.email===u),x=p?"Administrator":g?`${g.firstName} ${g.lastName}`:u,_=(p?dc:dc.filter(A=>{var D;return(D=o[A.id])==null?void 0:D.view})).filter(A=>!((g==null?void 0:g.role)==="Employee"&&A.id==="dashboard")),w=p?hc:hc.filter(A=>{var D;return(D=o[A.id])==null?void 0:D.view});return i.jsxs("aside",{className:`bg-white flex flex-col transition-all duration-300 ease-in-out border-r border-slate-200 ${n?"w-20":"w-64"}`,children:[i.jsx("div",{className:`flex items-center border-b h-16 px-4 ${n?"justify-center":"justify-start"}`,children:n?i.jsx("div",{className:"bg-purple-900 text-white font-bold text-lg rounded-md p-2 w-9 h-9 flex items-center justify-center",children:"M"}):i.jsx(Vl,{className:"h-8 w-auto"})}),i.jsxs("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:[_.map(A=>i.jsx(By,{link:A,activePage:a,setActivePage:e,isCollapsed:n},A.id)),w.length>0&&i.jsxs("div",{className:"pt-4",children:[!n&&i.jsx("h3",{className:"px-4 text-xs font-semibold text-blue-900 uppercase tracking-wider mb-2",children:"HR Module"}),i.jsx("div",{className:"space-y-2",children:w.map(A=>i.jsx(By,{link:A,activePage:a,setActivePage:e,isCollapsed:n},A.id))})]})]}),i.jsxs("div",{className:"mt-auto border-t border-slate-200",children:[i.jsx("div",{className:"p-4",children:i.jsxs("div",{className:`flex items-center ${n?"justify-center":""}`,children:[i.jsx("div",{className:"h-9 w-9 rounded-full bg-purple-100 flex-shrink-0 flex items-center justify-center text-purple-900 font-bold","aria-label":"User avatar placeholder",children:x.charAt(0)}),!n&&i.jsxs("div",{className:"ml-3 overflow-hidden",children:[i.jsx("p",{className:"text-sm font-semibold text-blue-900 truncate",title:x,children:x}),i.jsx("p",{className:"text-xs text-blue-800 truncate",title:u,children:u})]})]})}),i.jsx("div",{className:"p-4 border-t border-slate-200",children:i.jsxs("button",{onClick:r,className:`flex items-center w-full py-2.5 px-4 rounded-md transition-colors duration-200 text-blue-900 hover:bg-red-50 hover:text-red-600 ${n?"justify-center":""}`,children:[i.jsx(Ul,{className:"h-5 w-5"}),!n&&i.jsx("span",{className:"ml-3 text-sm font-medium",children:"Logout"})]})})]})]})},Ad=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),fN=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})}),mN=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),xp=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5"})}),pN=({toggleSidebar:a,isSidebarCollapsed:e,onLogout:n,searchQuery:r,onSearchChange:o,onBack:u})=>i.jsxs("header",{className:"bg-purple-900 border-b border-purple-800 h-16 flex items-center justify-between px-6 flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("button",{onClick:a,className:"text-purple-200 hover:text-white mr-4",children:e?i.jsx(fN,{className:"w-5 h-5"}):i.jsx(Ad,{className:"w-5 h-5"})}),i.jsxs("button",{onClick:u,className:"flex items-center gap-2 text-sm font-medium text-purple-100 hover:text-white mr-4",children:[i.jsx(xp,{className:"w-5 h-5"}),i.jsx("span",{children:"Home"})]}),i.jsx("div",{className:"flex items-center text-sm",children:i.jsx("span",{className:"font-semibold text-white text-lg tracking-wide",children:"MASERP"})})]}),i.jsx("div",{className:"flex-1 max-w-md mx-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(mN,{className:"h-5 w-5 text-purple-300"})}),i.jsx("input",{type:"text",placeholder:"Search employees, users...",value:r,onChange:h=>o(h.target.value),className:"block w-full bg-purple-800 border border-transparent rounded-md py-2 pl-10 pr-3 text-sm text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent focus:bg-purple-700"})]})}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{className:"text-sm font-medium text-purple-200 hover:text-white",children:"Invite"}),i.jsx("button",{className:"text-purple-200 hover:text-white","aria-label":"Settings",children:i.jsx(mp,{className:"w-5 h-5"})}),i.jsx("button",{onClick:n,className:"text-purple-200 hover:text-red-300","aria-label":"Logout",children:i.jsx(Ul,{className:"w-5 h-5"})}),i.jsx("div",{className:"h-8 w-8 rounded-full bg-purple-700 text-purple-200 flex items-center justify-center text-xs font-bold border border-purple-600","aria-label":"User avatar placeholder",children:"U"})]})]}),gN=({percentage:a,color:e,displayText:n})=>{const o=2*Math.PI*30,u=o-a/100*o;return i.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",children:[i.jsx("circle",{className:"text-blue-200",strokeWidth:"8",stroke:"currentColor",fill:"transparent",r:30,cx:"40",cy:"40"}),i.jsx("circle",{className:e,strokeWidth:"8",strokeDasharray:o,strokeDashoffset:u,strokeLinecap:"round",stroke:"currentColor",fill:"transparent",r:30,cx:"40",cy:"40"}),i.jsx("text",{x:"50%",y:"50%",textAnchor:"middle",dy:".3em",className:"text-lg font-bold text-blue-900 transform rotate-90 origin-center",children:n})]})},xN=({title:a,value:e,percentage:n,color:r})=>i.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(gN,{percentage:n,color:r,displayText:e})}),i.jsx("div",{className:"ml-4 text-left",children:i.jsx("p",{className:"text-sm text-blue-900",children:a})})]}),yN=({employees:a,leaveRequests:e,onLeaveRequestAction:n,onNavigate:r})=>{const[o,u]=z.useState([]),[h,p]=z.useState(!1);z.useEffect(()=>{const M=localStorage.getItem("hrQuickAccess");u(M?JSON.parse(M):["employees","attendance","leaves","payroll"])},[]);const g=a.length,x=g>0?Math.floor(g*(.85+Math.random()*.1)):0,_=[{title:"Present Employees",value:x.toString(),percentage:g>0?Math.round(x/g*100):0,color:"text-green-500"},{title:"Total Employees",value:g.toString(),percentage:100,color:"text-blue-900"}],w=z.useMemo(()=>e.filter(M=>M.status==="Pending HR"),[e]),A=M=>{const P=a.find(ee=>ee.id===M);return P?`${P.firstName} ${P.lastName}`:"Unknown Employee"},D=[...dc,...hc].filter(M=>M.id!=="dashboard"),V=M=>{u(P=>{let ee;return P.includes(M)?ee=P.filter(ue=>ue!==M):ee=[...P,M],localStorage.setItem("hrQuickAccess",JSON.stringify(ee)),ee})};return i.jsxs("div",{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"HR Dashboard"}),i.jsx("p",{className:"text-blue-900 mt-1",children:"Overview of personnel, attendance, and pending actions."})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:_.map(M=>i.jsx(xN,{...M},M.title))}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6",children:[i.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-lg shadow-sm border border-blue-100",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"font-bold text-blue-900 text-lg",children:"Pending Approvals"}),i.jsxs("span",{className:"text-xs font-medium bg-orange-100 text-orange-800 px-2 py-1 rounded-full",children:[w.length," Pending"]})]}),w.length>0?i.jsxs("div",{className:"space-y-4",children:[w.slice(0,5).map(M=>i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[i.jsxs("div",{className:"mb-3 sm:mb-0",children:[i.jsx("p",{className:"font-semibold text-blue-900",children:A(M.employeeId)}),i.jsxs("p",{className:"text-sm text-blue-900",children:[i.jsx("span",{className:"font-medium text-blue-900",children:M.leaveType}),"  ",M.fromDate," to ",M.toDate]}),i.jsxs("p",{className:"text-xs text-blue-900 mt-1 italic",children:['"',M.reason,'"']})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>n(M.id,"Approve"),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded hover:bg-green-700 transition-colors",children:"Approve"}),i.jsx("button",{onClick:()=>n(M.id,"Reject"),className:"px-3 py-1.5 bg-red-100 text-red-700 text-xs font-medium rounded hover:bg-red-200 transition-colors border border-red-200",children:"Reject"})]})]},M.id)),w.length>5&&i.jsxs("button",{onClick:()=>r("leaves"),className:"w-full text-center text-sm text-blue-900 hover:underline py-2",children:["View all ",w.length," requests"]})]}):i.jsxs("div",{className:"text-center py-10",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-green-100 text-green-600 mb-3",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),i.jsx("p",{className:"text-blue-900 font-medium",children:"All caught up!"}),i.jsx("p",{className:"text-blue-900 text-sm",children:"No pending leave requests."})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-blue-100 flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"font-bold text-blue-900 text-lg",children:"Create Shortcuts"}),i.jsx("button",{onClick:()=>p(!0),className:"text-blue-900 hover:text-blue-800 text-xs font-medium hover:underline",children:"Customize"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.map(M=>{const P=D.find(ue=>ue.id===M);if(!P)return null;const ee=P.icon;return i.jsxs("button",{onClick:()=>r(M),className:"flex flex-col items-center justify-center p-4 bg-blue-50 hover:bg-blue-100 border border-blue-200 hover:border-blue-300 rounded-lg transition-all duration-200 group",children:[i.jsx(ee,{className:"w-6 h-6 text-blue-900 group-hover:text-blue-900 mb-2"}),i.jsx("span",{className:"text-xs font-medium text-blue-900 group-hover:text-blue-900 text-center line-clamp-1",children:P.label})]},M)}),i.jsxs("button",{onClick:()=>p(!0),className:"flex flex-col items-center justify-center p-4 border-2 border-dashed border-blue-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-all text-blue-900 hover:text-blue-900",children:[i.jsx("span",{className:"text-2xl leading-none mb-1",children:"+"}),i.jsx("span",{className:"text-xs font-medium",children:"Add"})]})]})]})]}),h&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:()=>p(!1),children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",onClick:M=>M.stopPropagation(),children:[i.jsxs("div",{className:"p-5 border-b border-blue-100",children:[i.jsx("h3",{className:"font-bold text-lg text-blue-900",children:"Create Shortcuts"}),i.jsx("p",{className:"text-sm text-blue-900",children:"Select shortcuts to pin to your dashboard."})]}),i.jsx("div",{className:"p-5 max-h-[60vh] overflow-y-auto grid grid-cols-1 gap-2",children:D.map(M=>{const P=o.includes(M.id),ee=M.icon;return i.jsxs("label",{className:`flex items-center p-3 rounded-lg border cursor-pointer transition-colors ${P?"bg-blue-50 border-blue-200":"bg-white border-blue-200 hover:bg-blue-50"}`,children:[i.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-blue-900 rounded focus:ring-blue-900 border-blue-300",checked:P,onChange:()=>V(M.id)}),i.jsxs("div",{className:"ml-3 flex items-center",children:[i.jsx(ee,{className:"w-5 h-5 text-blue-900"}),i.jsx("span",{className:"ml-3 text-sm font-medium text-blue-900",children:M.label})]})]},M.id)})}),i.jsx("div",{className:"p-5 border-t border-blue-100 flex justify-end",children:i.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-blue-900 text-white rounded-md text-sm font-medium hover:bg-blue-800",children:"Done"})})]})})]})},gn=({id:a,label:e,type:n="text",value:r,onChange:o,required:u=!1,placeholder:h,disabled:p=!1})=>i.jsxs("div",{children:[i.jsx("label",{htmlFor:a,className:"block text-sm font-medium text-blue-900",children:e}),i.jsx("input",{type:n,id:a,name:a,value:r||"",onChange:o,required:u,placeholder:h,disabled:p,className:"mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm disabled:bg-slate-100 disabled:text-blue-900"})]}),di=({id:a,label:e,value:n,onChange:r,children:o,required:u=!1})=>i.jsxs("div",{children:[i.jsx("label",{htmlFor:a,className:"block text-sm font-medium text-blue-900",children:e}),i.jsx("select",{id:a,name:a,value:n||"",onChange:r,required:u,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md",children:o})]}),ld=({title:a,children:e})=>i.jsxs("div",{className:"pt-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-4 border-b pb-2",children:a}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e})]}),bN=({isOpen:a,onClose:e,employee:n,onSave:r})=>{const[o,u]=z.useState({});if(z.useEffect(()=>{n&&u(n)},[n]),!a)return null;const h=g=>{const{id:x,value:_}=g.target;u(w=>({...w,[x]:_}))},p=g=>{g.preventDefault();const{id:x,..._}=o;n.id&&r(n.id,_)};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",onClick:e,children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] flex flex-col",onClick:g=>g.stopPropagation(),children:[i.jsx("div",{className:"sticky top-0 bg-white p-6 border-b z-10",children:i.jsxs("h2",{className:"text-xl font-bold text-blue-900",children:["Edit Employee: ",n.firstName," ",n.lastName]})}),i.jsxs("form",{onSubmit:p,className:"flex-1 overflow-y-auto",children:[i.jsx("div",{className:"p-8",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ld,{title:"Personal Details",children:[i.jsx(gn,{id:"employeeId",label:"Employee ID",value:o.employeeId,onChange:h,placeholder:"e.g., EMP-001"}),i.jsx(gn,{id:"firstName",label:"First Name",value:o.firstName,onChange:h,required:!0}),i.jsx(gn,{id:"lastName",label:"Last Name",value:o.lastName,onChange:h,required:!0}),i.jsx(gn,{id:"fatherName",label:"Father's Name",value:o.fatherName,onChange:h,required:!0}),i.jsx(gn,{id:"cnic",label:"CNIC",value:o.cnic,onChange:h,placeholder:"e.g., 35202-1234567-1"}),i.jsx(gn,{id:"dob",label:"Date of Birth",type:"date",value:o.dob,onChange:h}),i.jsxs(di,{id:"gender",label:"Gender",value:o.gender,onChange:h,children:[i.jsx("option",{children:"Male"}),i.jsx("option",{children:"Female"}),i.jsx("option",{children:"Other"})]}),i.jsxs(di,{id:"maritalStatus",label:"Marital Status",value:o.maritalStatus,onChange:h,children:[i.jsx("option",{children:"Single"}),i.jsx("option",{children:"Married"})]})]}),i.jsxs(ld,{title:"Contact & Address",children:[i.jsx(gn,{id:"phone",label:"Phone Number",value:o.phone,onChange:h,placeholder:"e.g., 0300-1234567"}),i.jsx(gn,{id:"email",label:"Official Email (Username)",type:"email",value:o.email,onChange:()=>{},required:!0,disabled:!0}),i.jsx(gn,{id:"personalEmail",label:"Personal Email",type:"email",value:o.personalEmail,onChange:h}),i.jsx(gn,{id:"currentAddress",label:"Current Address",value:o.currentAddress,onChange:h}),i.jsx(gn,{id:"permanentAddress",label:"Permanent Address",value:o.permanentAddress,onChange:h})]}),i.jsxs(ld,{title:"Employment Details",children:[i.jsxs(di,{id:"department",label:"Department",value:o.department,onChange:h,required:!0,children:[i.jsx("option",{children:"Human Resources"}),i.jsx("option",{children:"IT"}),i.jsx("option",{children:"Finance"}),i.jsx("option",{children:"Engineering"}),i.jsx("option",{children:"Marketing"}),i.jsx("option",{children:"Sales"})]}),i.jsx(gn,{id:"designation",label:"Designation",value:o.designation,onChange:h,required:!0}),i.jsx(gn,{id:"joiningDate",label:"Joining Date",type:"date",value:o.joiningDate,onChange:h,required:!0}),i.jsxs(di,{id:"shift",label:"Shift Timing",value:o.shift,onChange:h,required:!0,children:[i.jsx("option",{children:"Morning (09:00 AM - 06:00 PM)"}),i.jsx("option",{children:"Evening (02:00 PM - 11:00 PM)"}),i.jsx("option",{children:"Night (10:00 PM - 07:00 AM)"})]}),i.jsxs(di,{id:"employmentType",label:"Employment Type",value:o.employmentType,onChange:h,children:[i.jsx("option",{children:"Permanent"}),i.jsx("option",{children:"Probation"}),i.jsx("option",{children:"Intern"})]}),i.jsxs(di,{id:"status",label:"Status",value:o.status,onChange:h,children:[i.jsx("option",{children:"Active"}),i.jsx("option",{children:"Resigned"}),i.jsx("option",{children:"Terminated"})]})]}),i.jsxs(ld,{title:"Financial & System Access",children:[i.jsx(gn,{id:"salary",label:"Salary (PKR)",type:"number",value:o.salary,onChange:h,required:!0}),i.jsx(gn,{id:"bankName",label:"Bank Name",value:o.bankName,onChange:h}),i.jsx(gn,{id:"accountTitle",label:"Account Title",value:o.accountTitle,onChange:h}),i.jsx(gn,{id:"accountNumber",label:"Account Number",value:o.accountNumber,onChange:h}),i.jsxs(di,{id:"role",label:"System Role",value:o.role,onChange:h,required:!0,children:[i.jsx("option",{value:"Employee",children:"Employee"}),i.jsx("option",{value:"HOD",children:"HOD"}),i.jsx("option",{value:"HR",children:"HR"})]})]})]})}),i.jsxs("div",{className:"sticky bottom-0 bg-slate-50 p-4 flex justify-end gap-4 border-t",children:[i.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 border border-slate-300 rounded-md shadow-sm text-sm font-medium text-blue-900 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",children:"Cancel"}),i.jsx("button",{type:"submit",className:"py-2 px-6 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500",children:"Save Changes"})]})]})]})})},Fy={employeeId:"",firstName:"",lastName:"",fatherName:"",cnic:"",dob:"",gender:"Male",maritalStatus:"Single",currentAddress:"",permanentAddress:"",email:"",personalEmail:"",phone:"",emergencyContactName:"",emergencyContactPhone:"",department:"Human Resources",designation:"",joiningDate:"",employmentType:"Probation",status:"Active",salary:"",shift:"Morning (09:00 AM - 06:00 PM)",bankName:"",accountTitle:"",accountNumber:"",role:"Employee",password:"",confirmPassword:""},tn=({id:a,label:e,type:n="text",value:r,onChange:o,required:u=!1,placeholder:h})=>i.jsxs("div",{children:[i.jsx("label",{htmlFor:a,className:"block text-sm font-medium text-blue-900",children:e}),i.jsx("input",{type:n,id:a,name:a,value:r||"",onChange:o,required:u,placeholder:h,className:"mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 text-blue-900 focus:outline-none focus:ring-blue-900 focus:border-blue-900 sm:text-sm"})]}),yl=({id:a,label:e,value:n,onChange:r,children:o,required:u=!1})=>i.jsxs("div",{children:[i.jsx("label",{htmlFor:a,className:"block text-sm font-medium text-blue-900",children:e}),i.jsx("select",{id:a,name:a,value:n||"",onChange:r,required:u,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 text-blue-900 focus:outline-none focus:ring-blue-900 focus:border-blue-900 sm:text-sm rounded-md",children:o})]}),$o=({title:a,children:e})=>i.jsxs("div",{className:"pt-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-4 border-b pb-2",children:a}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e})]}),vN=({onAddEmployee:a,employees:e,onResignEmployee:n,onUpdateEmployee:r})=>{const[o,u]=z.useState(Fy),[h,p]=z.useState(null),[g,x]=z.useState(null),[_,w]=z.useState(!1),[A,D]=z.useState(null),[V,M]=z.useState(!1);z.useEffect(()=>{if(h){const N=setTimeout(()=>p(null),5e3);return()=>clearTimeout(N)}},[h]),z.useEffect(()=>{if(g){const N=setTimeout(()=>x(null),5e3);return()=>clearTimeout(N)}},[g]);const P=N=>{const{id:S,value:E}=N.target;u(j=>({...j,[S]:E}))},ee=N=>{u(S=>({...S,employmentType:N}))},ue=N=>{if(N.preventDefault(),o.password!==o.confirmPassword){p({type:"error",text:"Passwords do not match."});return}if(o.password.length<6){p({type:"error",text:"Password must be at least 6 characters long."});return}const{password:S,confirmPassword:E,...j}=o;a(j,S),x({type:"success",text:`Employee ${o.firstName} ${o.lastName} added successfully.`}),u(Fy),M(!1)},te=N=>{D(N),w(!0)},ne=()=>{D(null),w(!1)},F=async(N,S)=>{const E=await r(N,S);x({type:E.success?"success":"error",text:E.message}),E.success&&ne()},W=async N=>{if(window.confirm(`Are you sure you want to mark ${N.firstName} ${N.lastName} as resigned?`)){const S=await n(N.id);x({type:S.success?"success":"error",text:S.message})}},C=z.useMemo(()=>[...e].sort((N,S)=>N.status==="Resigned"&&S.status!=="Resigned"?1:N.status!=="Resigned"&&S.status==="Resigned"?-1:0),[e]);return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Employee Management"}),i.jsx("button",{onClick:()=>M(!V),className:`py-2 px-4 rounded-md shadow-sm text-sm font-medium text-white transition-colors ${V?"bg-red-500 hover:bg-red-600":"bg-blue-900 hover:bg-blue-800"}`,children:V?"Cancel Adding":"Add New Employee"})]}),V&&i.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm max-w-6xl mx-auto border border-blue-100",children:[i.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-6",children:"Add New Employee"}),i.jsxs("form",{onSubmit:ue,className:"space-y-6",children:[i.jsxs($o,{title:"Personal Details",children:[i.jsx(tn,{id:"employeeId",label:"Employee ID",value:o.employeeId,onChange:P,placeholder:"e.g., EMP-001"}),i.jsx(tn,{id:"firstName",label:"First Name",value:o.firstName,onChange:P,required:!0}),i.jsx(tn,{id:"lastName",label:"Last Name",value:o.lastName,onChange:P,required:!0}),i.jsx(tn,{id:"fatherName",label:"Father's Name",value:o.fatherName,onChange:P,required:!0}),i.jsx(tn,{id:"cnic",label:"CNIC",value:o.cnic,onChange:P,placeholder:"e.g., 35202-1234567-1"}),i.jsx(tn,{id:"dob",label:"Date of Birth",type:"date",value:o.dob,onChange:P}),i.jsxs(yl,{id:"gender",label:"Gender",value:o.gender,onChange:P,children:[i.jsx("option",{children:"Male"}),i.jsx("option",{children:"Female"}),i.jsx("option",{children:"Other"})]}),i.jsxs(yl,{id:"maritalStatus",label:"Marital Status",value:o.maritalStatus,onChange:P,children:[i.jsx("option",{children:"Single"}),i.jsx("option",{children:"Married"})]})]}),i.jsxs($o,{title:"Contact & Address",children:[i.jsx(tn,{id:"phone",label:"Phone Number",value:o.phone,onChange:P,placeholder:"e.g., 0300-1234567"}),i.jsx(tn,{id:"email",label:"Official Email",type:"email",value:o.email,onChange:P,required:!0}),i.jsx(tn,{id:"personalEmail",label:"Personal Email",type:"email",value:o.personalEmail,onChange:P}),i.jsx(tn,{id:"currentAddress",label:"Current Address",value:o.currentAddress,onChange:P}),i.jsx(tn,{id:"permanentAddress",label:"Permanent Address",value:o.permanentAddress,onChange:P})]}),i.jsxs($o,{title:"Employment Details",children:[i.jsxs(yl,{id:"department",label:"Department",value:o.department,onChange:P,required:!0,children:[i.jsx("option",{children:"Human Resources"}),i.jsx("option",{children:"IT"}),i.jsx("option",{children:"Finance"}),i.jsx("option",{children:"Engineering"}),i.jsx("option",{children:"Marketing"}),i.jsx("option",{children:"Sales"})]}),i.jsx(tn,{id:"designation",label:"Designation",value:o.designation,onChange:P,required:!0}),i.jsx(tn,{id:"joiningDate",label:"Joining Date",type:"date",value:o.joiningDate,onChange:P,required:!0}),i.jsxs(yl,{id:"shift",label:"Shift Timing",value:o.shift,onChange:P,required:!0,children:[i.jsx("option",{children:"Morning (09:00 AM - 06:00 PM)"}),i.jsx("option",{children:"Evening (02:00 PM - 11:00 PM)"}),i.jsx("option",{children:"Night (10:00 PM - 07:00 AM)"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-2",children:"Employment Status"}),i.jsxs("div",{className:"flex space-x-6 mt-2",children:[i.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-blue-900 rounded focus:ring-blue-900 border-slate-300",checked:o.employmentType==="Probation",onChange:()=>ee("Probation")}),i.jsx("span",{className:"ml-2 text-blue-900",children:"Probation"})]}),i.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-blue-900 rounded focus:ring-blue-900 border-slate-300",checked:o.employmentType==="Permanent",onChange:()=>ee("Permanent")}),i.jsx("span",{className:"ml-2 text-blue-900",children:"Permanent"})]})]}),i.jsx("p",{className:"text-xs text-blue-900 mt-1",children:o.employmentType==="Probation"?"Leaves are not allocated during probation.":"Leaves will be allocated pro-rata based on joining date."})]}),i.jsxs(yl,{id:"status",label:"Status",value:o.status,onChange:P,children:[i.jsx("option",{children:"Active"}),i.jsx("option",{children:"Resigned"}),i.jsx("option",{children:"Terminated"})]})]}),i.jsxs($o,{title:"Financial & System Access",children:[i.jsx(tn,{id:"salary",label:"Salary (PKR)",type:"number",value:o.salary,onChange:P,required:!0}),i.jsx(tn,{id:"bankName",label:"Bank Name",value:o.bankName,onChange:P}),i.jsx(tn,{id:"accountTitle",label:"Account Title",value:o.accountTitle,onChange:P}),i.jsx(tn,{id:"accountNumber",label:"Account Number",value:o.accountNumber,onChange:P}),i.jsxs(yl,{id:"role",label:"System Role",value:o.role,onChange:P,required:!0,children:[i.jsx("option",{value:"Employee",children:"Employee"}),i.jsx("option",{value:"HOD",children:"HOD"}),i.jsx("option",{value:"HR",children:"HR"})]})]}),i.jsxs($o,{title:"Create User Account",children:[i.jsx(tn,{id:"password",label:"Password for User Account",type:"password",value:o.password,onChange:P,required:!0,placeholder:"Min. 6 characters"}),i.jsx(tn,{id:"confirmPassword",label:"Confirm Password",type:"password",value:o.confirmPassword,onChange:P,required:!0})]}),h&&i.jsx("div",{className:`mt-4 p-3 rounded-md text-sm ${h.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:h.text}),i.jsxs("div",{className:"flex justify-end pt-4 gap-4",children:[i.jsx("button",{type:"button",onClick:()=>M(!1),className:"py-2 px-6 border border-slate-300 rounded-md shadow-sm text-sm font-medium text-blue-900 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",children:"Cancel"}),i.jsx("button",{type:"submit",className:"py-2 px-6 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-900 hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900",children:"Add Employee"})]})]})]}),i.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm max-w-7xl mx-auto",children:[i.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-4",children:"Employee List"}),g&&i.jsx("div",{className:`mb-4 p-3 rounded-md text-sm ${g.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g.text}),i.jsx("div",{className:"overflow-x-auto",children:e.length>0?i.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Emp. ID"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Name"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Designation"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Department"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Shift"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Status"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Salary (PKR)"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:C.map(N=>i.jsxs("tr",{className:`${N.status==="Resigned"?"bg-slate-50 opacity-60":""} hover:bg-purple-50 transition-colors`,children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-blue-900",children:N.employeeId||"N/A"}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:[N.firstName," ",N.lastName,i.jsx("div",{className:"text-xs text-blue-900 font-normal",children:N.email})]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:N.designation}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:N.department}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:N.shift||"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:i.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${N.status==="Active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:N.status})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:N.salary}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-4",children:[i.jsx("button",{onClick:()=>te(N),className:"text-blue-900 hover:text-blue-950",children:"Edit"}),i.jsx("button",{onClick:()=>W(N),disabled:N.status==="Resigned",className:"text-orange-600 hover:text-orange-900 disabled:text-blue-900 disabled:cursor-not-allowed disabled:no-underline",children:"Resign"})]})]},N.id))})]}):i.jsx("p",{className:"text-center text-blue-900 py-10",children:'There are no employees to display. Click "Add New Employee" to get started.'})})]}),_&&A&&i.jsx(bN,{isOpen:_,onClose:ne,employee:A,onSave:F})]})},_N=({users:a,employees:e})=>i.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm",children:[i.jsx("div",{className:"flex justify-between items-center mb-6",children:i.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Users Management"})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Name"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Email / Username"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Password"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:a.length>0?a.map((n,r)=>{const o=e.find(h=>h.email===n.email),u=n.email==="admin"?"Administrator":o?`${o.firstName} ${o.lastName}`:"N/A";return i.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:u}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:n.email}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900 font-mono",children:n.password})]},r)}):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-blue-900",children:"No users found matching your search."})})})]})})]}),Xd=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),wN=({options:a,value:e,onChange:n,placeholder:r})=>{const[o,u]=z.useState(!1),h=z.useRef(null),p=a.find(x=>x.value===e);z.useEffect(()=>{const x=_=>{h.current&&!h.current.contains(_.target)&&u(!1)};return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[]);const g=x=>{n(x.value),u(!1)};return i.jsxs("div",{className:"relative mt-1",ref:h,children:[i.jsxs("button",{type:"button",className:"relative w-full cursor-default rounded-md border border-slate-300 bg-white py-2 pl-3 pr-10 text-left shadow-sm focus:border-teal-500 focus:outline-none focus:ring-1 focus:ring-teal-500 sm:text-sm",onClick:()=>u(!o),"aria-haspopup":"listbox","aria-expanded":o,children:[p?i.jsxs("div",{children:[i.jsx("span",{className:"block truncate font-medium text-slate-800",children:p.primaryText}),i.jsx("span",{className:"block truncate text-xs text-slate-500",children:p.secondaryText})]}):i.jsx("span",{className:"text-slate-500",children:r}),i.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:i.jsx(Xd,{className:`h-5 w-5 text-slate-400 transition-transform ${o?"rotate-180":""}`,"aria-hidden":"true"})})]}),o&&i.jsx("ul",{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",role:"listbox",children:a.map(x=>i.jsx("li",{className:"relative cursor-default select-none py-2 pl-3 pr-9 text-slate-900 hover:bg-teal-50",onClick:()=>g(x),role:"option","aria-selected":e===x.value,children:i.jsxs("div",{children:[i.jsx("span",{className:`block truncate ${e===x.value?"font-semibold":"font-normal"}`,children:x.primaryText}),i.jsx("span",{className:"block truncate text-xs text-slate-500",children:x.secondaryText})]})},x.value))})]})},NN=[{id:"hr",name:"HR Module"},{id:"inventory_management",name:"Inventory Management"},{id:"supply_chain",name:"Supply Chain Module"},{id:"finance",name:"Finance Module"},{id:"student",name:"Student Module"},{id:"website",name:"Website & Portals"}],Hy=["view","edit","delete","update"],EN=({users:a,employees:e,allPermissions:n,onUserPermissionsChange:r})=>{const[o,u]=z.useState(null),[h,p]=z.useState(null),[g,x]=z.useState(new Set),[_,w]=z.useState(null),D=a.filter(te=>te.email!=="admin").map(te=>{const ne=e.find(C=>C.email===te.email),F=ne?`${ne.firstName} ${ne.lastName}`:te.email,W=ne?te.email:"No employee record";return{value:te.email,primaryText:F,secondaryText:W}});z.useEffect(()=>{o?(p(n[o]||{}),x(new Set)):p(null)},[o,n]),z.useEffect(()=>{if(_){const te=setTimeout(()=>w(null),5e3);return()=>clearTimeout(te)}},[_]);const V=(te,ne)=>{p(F=>{if(!F)return null;const W={...F};if(ne){const C=zy[te]||[],N={};C.forEach(S=>{N[S.id]={view:!1,edit:!1,delete:!1,update:!1}}),W[te]=N}else delete W[te],x(C=>{const N=new Set(C);return N.delete(te),N});return W})},M=te=>{x(ne=>{const F=new Set(ne);return F.has(te)?F.delete(te):F.add(te),F})},P=(te,ne,F,W)=>{p(C=>{if(!C)return null;const N=C[te]||{},S=N[ne]||{view:!1,edit:!1,delete:!1,update:!1};return{...C,[te]:{...N,[ne]:{...S,[F]:W}}}})},ee=()=>{!o||h===null||(r(o,h),w({type:"success",text:`Permissions for ${o} have been updated.`}),u(null))},ue=()=>{u(null),p(null)};return i.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm max-w-5xl mx-auto",children:[i.jsx("h1",{className:"text-2xl font-bold text-blue-900 mb-6",children:"User Access Management"}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{htmlFor:"select-user",className:"block text-sm font-medium text-blue-900",children:"Select a user to manage their module access"}),i.jsx(wN,{options:D,value:o,onChange:u,placeholder:"-- Select a user --"})]}),_&&i.jsx("div",{className:`my-4 p-3 rounded-md text-sm ${_.type==="error"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:_.text}),o&&h!==null&&i.jsxs("div",{children:[i.jsx("div",{className:"space-y-4",children:NN.map(te=>{const ne=!!h[te.id],F=g.has(te.id),W=zy[te.id]||[];return i.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden transition-all duration-300",children:[i.jsxs("div",{className:"flex items-center p-4 bg-slate-50",children:[i.jsx("input",{type:"checkbox",id:`module-access-${te.id}`,className:"h-5 w-5 text-teal-600 border-slate-300 rounded focus:ring-teal-500",checked:ne,onChange:C=>V(te.id,C.target.checked)}),i.jsx("label",{htmlFor:`module-access-${te.id}`,className:"ml-3 flex-1 text-lg font-semibold text-blue-900 cursor-pointer",children:te.name}),i.jsx("button",{onClick:()=>M(te.id),disabled:!ne,className:"p-1 text-blue-900 rounded-full hover:bg-slate-200 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-transparent","aria-expanded":F,children:i.jsx(Xd,{className:`w-5 h-5 transition-transform duration-300 ${F?"rotate-180":""}`})})]}),ne&&F&&i.jsxs("div",{className:"bg-white p-4 border-t border-slate-200",children:[i.jsx("h3",{className:"text-md font-semibold text-blue-900 mb-3",children:"Page Permissions"}),W.length>0?i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 border",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Feature"}),Hy.map(C=>i.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-blue-900 uppercase tracking-wider",children:C},C))]})}),i.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:W.map(C=>i.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:C.label}),Hy.map(N=>{var S,E;return i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900 text-center",children:i.jsx("input",{type:"checkbox",className:"h-4 w-4 text-teal-600 border-slate-300 rounded focus:ring-teal-500",checked:((E=(S=h[te.id])==null?void 0:S[C.id])==null?void 0:E[N])||!1,onChange:j=>P(te.id,C.id,N,j.target.checked)})},N)})]},C.id))})]}):i.jsx("p",{className:"text-sm text-blue-900",children:"No configurable pages for this module."})]})]},te.id)})}),i.jsxs("div",{className:"flex justify-end pt-6 gap-3",children:[i.jsx("button",{onClick:ue,className:"py-2 px-4 border border-slate-300 rounded-md shadow-sm text-sm font-medium text-blue-900 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",children:"Cancel"}),i.jsx("button",{onClick:ee,className:"py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500",children:"Save Permissions"})]})]})]})},SN=({employee:a,onApply:e,onCancel:n})=>{const[r,o]=z.useState({fromDate:"",toDate:"",leaveType:"Casual Leave",reason:""}),[u,h]=z.useState("");z.useEffect(()=>{if(u){const w=setTimeout(()=>h(""),5e3);return()=>clearTimeout(w)}},[u]);const p=z.useMemo(()=>{if(r.fromDate&&r.toDate){const w=new Date(r.fromDate),A=new Date(r.toDate);if(A<w)return 0;const D=Math.abs(A.getTime()-w.getTime());return Math.ceil(D/(1e3*60*60*24))+1}return 0},[r.fromDate,r.toDate]),g=z.useMemo(()=>{var V;const A={"Casual Leave":"casual","Sick Leave":"sick","Annual Leave":"annual","Maternity Leave":"maternity","Paternity Leave":"paternity","Alternate Day Off":"alternateDayOff",Others:"others"}[r.leaveType],D=((V=a.leaveBalance)==null?void 0:V[A])||{total:0,used:0};return{total:D.total,used:D.used,remaining:Math.max(0,D.total-D.used)}},[r.leaveType,a.leaveBalance]),x=w=>{const{id:A,value:D}=w.target;o(V=>({...V,[A]:D}))},_=w=>{if(w.preventDefault(),!r.fromDate||!r.toDate||!r.reason){h("Please fill in all required fields.");return}if(new Date(r.toDate)<new Date(r.fromDate)){h('"To Date" cannot be earlier than "From Date".');return}if(r.leaveType!=="Others"){if(g.remaining<=0){h(`Your ${r.leaveType} quota is exhausted. Please select a different leave type.`);return}if(p>g.remaining){h(`Insufficient balance for ${r.leaveType}. You have ${g.remaining} days remaining, but requested ${p}.`);return}}h("");const A={employeeId:a.id,...r,status:"Pending HOD"};e(A),n()};return i.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm max-w-4xl mx-auto",children:[i.jsx("h1",{className:"text-2xl font-bold text-blue-900 mb-6",children:"Apply for Leave"}),i.jsxs("form",{onSubmit:_,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 p-4 border rounded-md bg-slate-50",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Name:"})," ",i.jsxs("span",{className:"text-sm text-blue-900",children:[a.firstName," ",a.lastName]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Department:"})," ",i.jsx("span",{className:"text-sm text-blue-900",children:a.department})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fromDate",className:"block text-sm font-medium text-blue-900",children:"From Date"}),i.jsx("input",{type:"date",id:"fromDate",value:r.fromDate,onChange:x,required:!0,className:"mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"toDate",className:"block text-sm font-medium text-blue-900",children:"To Date"}),i.jsx("input",{type:"date",id:"toDate",value:r.toDate,onChange:x,required:!0,className:"mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]})]}),i.jsxs("div",{className:"p-3 text-center bg-teal-50 border border-teal-200 rounded-md",children:[i.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Leave Days Requested:"}),i.jsx("span",{className:"ml-2 text-md font-bold text-teal-600",children:p>0?p:"--"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"leaveType",className:"block text-sm font-medium text-blue-900",children:"Leave Type"}),i.jsxs("select",{id:"leaveType",value:r.leaveType,onChange:x,required:!0,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md",children:[i.jsx("option",{children:"Casual Leave"}),i.jsx("option",{children:"Sick Leave"}),i.jsx("option",{children:"Annual Leave"}),i.jsx("option",{children:"Maternity Leave"}),i.jsx("option",{children:"Paternity Leave"}),i.jsx("option",{children:"Alternate Day Off"}),i.jsx("option",{children:"Others"})]}),r.leaveType!=="Others"&&i.jsxs("p",{className:`mt-1 text-xs ${g.remaining===0?"text-red-600 font-bold":"text-blue-900"}`,children:["Remaining Balance: ",g.remaining," days (Used: ",g.used,"/",g.total,")"]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"reason",className:"block text-sm font-medium text-blue-900",children:"Reason for Leave"}),i.jsx("textarea",{id:"reason",value:r.reason,onChange:x,rows:4,required:!0,className:"mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]}),u&&i.jsx("div",{className:"p-3 rounded-md text-sm bg-red-100 text-red-800 border border-red-200",children:u}),i.jsxs("div",{className:"flex justify-end pt-4 gap-3",children:[i.jsx("button",{type:"button",onClick:n,className:"py-2 px-4 border border-slate-300 rounded-md shadow-sm text-sm font-medium text-blue-900 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:r.leaveType!=="Others"&&g.remaining<=0,className:"py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 disabled:bg-slate-400 disabled:cursor-not-allowed",children:"Apply for Leave"})]})]})]})},TN=({employee:a})=>{var p,g,x,_,w,A,D;const[e,n]=z.useState(!1),r=a.employmentType==="Probation",o=r?{annual:{total:0,used:0},sick:{total:0,used:0},casual:{total:0,used:0},maternity:{total:0,used:0},paternity:{total:0,used:0},alternateDayOff:{total:0,used:0}}:{annual:((p=a.leaveBalance)==null?void 0:p.annual)||{total:14,used:0},sick:((g=a.leaveBalance)==null?void 0:g.sick)||{total:7,used:0},casual:((x=a.leaveBalance)==null?void 0:x.casual)||{total:6,used:0},maternity:((_=a.leaveBalance)==null?void 0:_.maternity)||{total:90,used:0},paternity:((w=a.leaveBalance)==null?void 0:w.paternity)||{total:7,used:0},alternateDayOff:((A=a.leaveBalance)==null?void 0:A.alternateDayOff)||{total:50,used:0},others:((D=a.leaveBalance)==null?void 0:D.others)||{}},u=(V,M)=>!M||M===0?0:Math.min(100,V/M*100),h=({label:V,data:M,colorClass:P})=>{const ee=M||{total:0,used:0},ue=ee.used||0,te=ee.total||0;return i.jsxs("div",{className:"mb-4 last:mb-0",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1 font-medium text-blue-900",children:[i.jsx("span",{children:V}),i.jsxs("span",{children:[ue," / ",te," Days Used"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:i.jsx("div",{className:`h-2.5 rounded-full ${P}`,style:{width:`${u(ue,te)}%`}})}),i.jsxs("div",{className:"text-xs text-right text-blue-900 mt-1",children:[Math.max(0,te-ue)," Remaining"]})]})};return i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 mb-6 overflow-hidden",children:[i.jsxs("button",{onClick:()=>n(!e),className:"w-full flex justify-between items-center p-4 bg-slate-50 hover:bg-slate-100 transition-colors",children:[i.jsxs("span",{className:"font-bold text-blue-900",children:["My Leave Balance ",r&&"(Probation - No Leaves Allocated)"]}),i.jsxs("div",{className:"flex items-center text-sm text-blue-900 font-medium",children:[e?"Hide Details":"Show Details",i.jsx(Xd,{className:`ml-2 w-4 h-4 transition-transform ${e?"rotate-180":""}`})]})]}),e&&i.jsx("div",{className:"p-6 border-t border-slate-200",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100",children:i.jsx(h,{label:"Annual Leave",data:o.annual,colorClass:"bg-blue-900"})}),i.jsx("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-100",children:i.jsx(h,{label:"Sick Leave",data:o.sick,colorClass:"bg-purple-600"})}),i.jsx("div",{className:"p-4 bg-indigo-50 rounded-lg border border-indigo-100",children:i.jsx(h,{label:"Casual Leave",data:o.casual,colorClass:"bg-indigo-600"})}),i.jsx("div",{className:"p-4 bg-pink-50 rounded-lg border border-pink-100",children:i.jsx(h,{label:"Maternity Leave",data:o.maternity,colorClass:"bg-pink-500"})}),i.jsx("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:i.jsx(h,{label:"Paternity Leave",data:o.paternity,colorClass:"bg-slate-600"})}),i.jsx("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-100",children:i.jsx(h,{label:"Alternate Day Off",data:o.alternateDayOff,colorClass:"bg-purple-800"})})]})})]})},jN=({currentUserEmail:a,employees:e,leaveRequests:n,onAddLeaveRequest:r,onLeaveRequestAction:o})=>{const[u,h]=z.useState(!1),p=a==="admin",g=e.find(V=>V.email===a),x=z.useMemo(()=>{if(!g&&!p)return[];const V=p?"admin":g==null?void 0:g.role,M=g==null?void 0:g.department;return n.filter(P=>{const ee=e.find(ue=>ue.id===P.employeeId);return ee?P.status==="Pending HOD"&&(V==="admin"||V==="HOD"&&ee.department===M)||P.status==="Pending HR"&&(V==="admin"||V==="HR"):!1})},[n,a,e,p,g]),_=g?n.filter(V=>V.employeeId===g.id).sort((V,M)=>new Date(M.fromDate).getTime()-new Date(V.fromDate).getTime()):[],w=V=>{const M=e.find(P=>P.id===V);return M?`${M.firstName} ${M.lastName}`:"Unknown Employee"},A=({status:V})=>{const M="px-2.5 py-0.5 text-xs font-medium rounded-full",P={"Pending HOD":"bg-yellow-100 text-yellow-800","Pending HR":"bg-orange-100 text-orange-800",Approved:"bg-green-100 text-green-800",Rejected:"bg-red-100 text-red-800"};return i.jsx("span",{className:`${M} ${P[V]}`,children:V})};if(u&&g)return i.jsx(SN,{employee:g,onApply:r,onCancel:()=>h(!1)});const D=(g==null?void 0:g.role)==="Employee"&&(g==null?void 0:g.employmentType)!=="Probation";return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Leave Management"}),D&&i.jsx("button",{onClick:()=>h(!0),className:"py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-700 hover:bg-purple-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",children:"Apply for Leave"})]}),g&&i.jsx(TN,{employee:g}),x.length>0&&i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[i.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-4",children:"Awaiting Your Approval"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Employee"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Dates"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Type"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Reason"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:x.map(V=>i.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 text-sm font-medium text-blue-900",children:w(V.employeeId)}),i.jsxs("td",{className:"px-6 py-4 text-sm text-blue-900",children:[V.fromDate," to ",V.toDate]}),i.jsx("td",{className:"px-6 py-4 text-sm text-blue-900",children:V.leaveType}),i.jsx("td",{className:"px-6 py-4 text-sm text-blue-900 max-w-xs truncate",title:V.reason,children:V.reason}),i.jsx("td",{className:"px-6 py-4 text-sm",children:i.jsx(A,{status:V.status})}),i.jsxs("td",{className:"px-6 py-4 text-sm space-x-2",children:[i.jsx("button",{onClick:()=>o(V.id,"Approve"),className:"text-green-600 hover:text-green-900 font-medium",children:"Approve"}),i.jsx("button",{onClick:()=>o(V.id,"Reject"),className:"text-red-600 hover:text-red-900 font-medium",children:"Reject"})]})]},V.id))})]})})]}),_.length>0&&i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[i.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-4",children:"My Leave History"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"From"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"To"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Type"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Reason"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Status"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:_.map(V=>i.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 text-sm text-blue-900",children:V.fromDate}),i.jsx("td",{className:"px-6 py-4 text-sm text-blue-900",children:V.toDate}),i.jsx("td",{className:"px-6 py-4 text-sm text-blue-900",children:V.leaveType}),i.jsx("td",{className:"px-6 py-4 text-sm text-blue-900 max-w-xs truncate",title:V.reason,children:V.reason}),i.jsx("td",{className:"px-6 py-4 text-sm",children:i.jsx(A,{status:V.status})})]},V.id))})]})})]})]})},AN=[{name:"School of Arts",departments:["Department of Fine Arts","Department of Music","Department of Performing Arts","Department of Visual Arts"]},{name:"School of SIR",departments:["Department of Information Technology","Department of Robotics","Department of Software Engineering","Department of Data Science"]},{name:"School of SADU",departments:["Department of Architecture & Design","Department of Urban & Regional Planning","Department of Interior Design"]},{name:"School of SDCA",departments:["Department of Digital Communication","Department of Animation & VFX","Department of Media & Cultural Studies","Department of Game Design"]}],CN=()=>{const[a,e]=z.useState(null),n=r=>{e(a===r?null:r)};return i.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm max-w-4xl mx-auto",children:[i.jsx("h1",{className:"text-2xl font-bold text-blue-900 mb-6",children:"Departments by School"}),i.jsx("div",{className:"space-y-4",children:AN.map(r=>{const o=a===r.name;return i.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden transition-all duration-300",children:[i.jsxs("button",{onClick:()=>n(r.name),className:"w-full flex justify-between items-center p-4 bg-slate-50 hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-inset","aria-expanded":o,"aria-controls":`departments-${r.name}`,children:[i.jsx("h2",{className:"text-lg font-semibold text-blue-900",children:r.name}),i.jsx(Xd,{className:`w-5 h-5 text-blue-900 transition-transform duration-300 ${o?"rotate-180":""}`})]}),o&&i.jsx("div",{id:`departments-${r.name}`,className:"bg-white p-4 border-t border-slate-200",children:i.jsx("ul",{className:"space-y-2 pl-4 list-disc list-inside",children:r.departments.map(u=>i.jsx("li",{className:"text-blue-900 text-sm",children:u},u))})})]},r.name)})})]})},Gy=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 11.21 12.75 11 12 11c-.75 0-1.536.21-2.121.659-1.172.879-1.172 2.303 0 3.182zM12 21a9 9 0 110-18 9 9 0 010 18z"})}),hi=({icon:a,title:e,value:n,bgColor:r})=>i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm flex items-center space-x-4",children:[i.jsx("div",{className:`p-3 rounded-full ${r}`,children:i.jsx(a,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-blue-900",children:e}),i.jsx("p",{className:"text-xl font-bold text-blue-900",children:n})]})]}),Ms=a=>new Intl.NumberFormat("en-PK",{style:"currency",currency:"PKR",minimumFractionDigits:0,maximumFractionDigits:0}).format(a).replace("PKR","PKR "),RN=({employees:a,payrollHistory:e,attendanceRecords:n=[],leaveRequests:r=[],onRunPayroll:o})=>{const[u,h]=z.useState(!1),[p,g]=z.useState(null),[x,_]=z.useState(null),[w,A]=z.useState(()=>new Date().toISOString().slice(0,7));z.useEffect(()=>{if(x){const ne=setTimeout(()=>_(null),5e3);return()=>clearTimeout(ne)}},[x]);const D=a.reduce((ne,F)=>ne+parseFloat(F.salary||"0"),0),V=a.length>0?D/a.length:0,M=new Date;M.setMonth(M.getMonth()+1,0);const P=async()=>{if(window.confirm(`Are you sure you want to run payroll for ${w}? This calculates deductions based on attendance.`)){const ne=await o();_({type:ne.success?"success":"error",text:ne.message})}},ee=(ne,F,W,C)=>{const N=n.filter(j=>{const k=new Date(j.date);return(j.employeeId===F||j.employeeId===ne)&&k.getMonth()===C&&k.getFullYear()===W}).length;let S=0;return r.filter(j=>j.employeeId===ne&&j.status==="Approved").forEach(j=>{const k=new Date(j.fromDate),I=new Date(j.toDate);for(let me=new Date(k);me<=I;me.setDate(me.getDate()+1))if(me.getMonth()===C&&me.getFullYear()===W){const ke=me.toISOString().split("T")[0];n.some(oe=>(oe.employeeId===F||oe.employeeId===ne)&&oe.date===ke)||S++}}),{daysPresent:N,approvedLeaveDays:S,totalPaidDays:N+S}},ue=ne=>{const[F,W]=w.split("-").map(Number),C=W-1,{daysPresent:N,approvedLeaveDays:S,totalPaidDays:E}=ee(ne.id,ne.employeeId,F,C),j=parseFloat(ne.salary||"0");let k=j,I=0;if(n.some(Ue=>{const L=new Date(Ue.date);return L.getMonth()===C&&L.getFullYear()===F})){const Ue=Math.min(30,E);k=j/30*Ue,I=j-k,I<0&&(I=0)}else I=0;const ke=k,G=new Date(F,C).toLocaleString("default",{month:"long",year:"numeric"}),oe=[["MASBOT ERP Payslip"],[`Report for: ${G}`],[],["Employee Details"],["Employee ID",ne.employeeId||ne.id],["Name",`${ne.firstName} ${ne.lastName}`],["Department",ne.department],["Designation",ne.designation],[],["Attendance Summary"],["Days Present",N],["Approved Leave Days",S],["Total Paid Days",E],[],["Earnings","Amount (PKR)"],["Base Salary",j],[],["Deductions","Amount (PKR)"],["Absenteeism / Unpaid",I],[],["",""],["Net Salary",ke]],ye=XLSX.utils.aoa_to_sheet(oe);ye["!cols"]=[{wch:25},{wch:20}];const je=XLSX.utils.book_new();XLSX.utils.book_append_sheet(je,ye,"Payslip"),XLSX.writeFile(je,`Payslip-${ne.firstName}_${ne.lastName}-${w}.xlsx`)},te=()=>{const[ne,F]=w.split("-").map(Number),W=F-1;return i.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Employee"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Days Present"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Paid Leave"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Total Days"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Base Salary"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Deductions"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Net Pay"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:a.map(C=>{const N=parseFloat(C.salary||"0"),{daysPresent:S,approvedLeaveDays:E,totalPaidDays:j}=ee(C.id,C.employeeId,ne,W);let k=N,I=0;const me=n.some(ke=>{const G=new Date(ke.date);return G.getMonth()===W&&G.getFullYear()===ne});if(me){const ke=Math.min(30,j);k=N/30*ke,I=N-k,I<0&&(I=0)}return i.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[i.jsxs("div",{className:"text-sm font-medium text-blue-900",children:[C.firstName," ",C.lastName]}),i.jsx("div",{className:"text-xs text-blue-900",children:C.employeeId})]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900 font-bold",children:me?S:"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-bold",children:me?E:"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:me?j:"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:Ms(N)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-500",children:I>0?`-${Ms(I)}`:"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-green-600",children:Ms(k)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:i.jsx("button",{onClick:()=>ue(C),className:"text-teal-600 hover:text-teal-900",children:"Payslip"})})]},C.id)})})]})};return u?p?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("button",{onClick:()=>g(null),className:"flex items-center gap-2 text-sm font-medium text-blue-900 hover:text-teal-600",children:[i.jsx(Ad,{className:"w-5 h-5"}),i.jsx("span",{children:"Back to History"})]})}),i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-blue-900",children:["Payroll Details: ",p.monthYear]}),i.jsxs("p",{className:"text-blue-900 mt-1",children:["Processed on ",new Date(p.date).toLocaleDateString()]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(hi,{icon:Gy,title:"Total Payout",value:Ms(p.totalNetPay),bgColor:"bg-green-500"}),i.jsx(hi,{icon:Td,title:"Employees Paid",value:p.employeeRecords.length.toString(),bgColor:"bg-blue-500"}),i.jsx(hi,{icon:Rl,title:"Total Deductions",value:Ms(p.totalDeductions),bgColor:"bg-red-500"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[i.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-4",children:"Breakdown"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Employee"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Department"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Base Salary"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Deductions"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Net Pay"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:p.employeeRecords.map(ne=>i.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:ne.employeeName}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:ne.department}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:Ms(ne.baseSalary)}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-500",children:["-",Ms(ne.deductions)]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-green-600",children:Ms(ne.netPay)})]},ne.employeeId))})]})})]})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("button",{onClick:()=>h(!1),className:"flex items-center gap-2 text-sm font-medium text-blue-900 hover:text-teal-600",children:[i.jsx(Ad,{className:"w-5 h-5"}),i.jsx("span",{children:"Back to Payroll"})]})}),i.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Payroll History"}),e.length>0?i.jsx("div",{className:"space-y-4",children:e.map(ne=>i.jsxs("div",{onClick:()=>g(ne),className:"bg-white p-4 rounded-lg shadow-sm border border-transparent hover:border-teal-500 cursor-pointer transition-all flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-blue-900 text-lg",children:ne.monthYear}),i.jsxs("p",{className:"text-xs text-blue-900",children:["Processed: ",new Date(ne.date).toLocaleDateString()]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-blue-900",children:"Paid Out"}),i.jsx("p",{className:"font-bold text-green-600",children:Ms(ne.totalNetPay)})]})]},ne.id))}):i.jsx("div",{className:"text-center py-10 bg-white rounded-lg",children:i.jsx("p",{className:"text-blue-900",children:"No payroll history found."})})]}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Payroll Management"}),i.jsx("p",{className:"text-blue-900 mt-1",children:"Salaries are automatically calculated based on attendance records and approved leaves."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(hi,{icon:Gy,title:"Est. Monthly Payroll",value:Ms(D),bgColor:"bg-teal-500"}),i.jsx(hi,{icon:Td,title:"Total Employees",value:a.length.toString(),bgColor:"bg-blue-500"}),i.jsx(hi,{icon:Rl,title:"Avg. Salary",value:Ms(V),bgColor:"bg-orange-500"}),i.jsx(hi,{icon:fp,title:"Next Payroll",value:M.toLocaleDateString(),bgColor:"bg-indigo-500"})]}),i.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center mb-6 gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("h2",{className:"text-xl font-bold text-blue-900",children:"Salaries"}),i.jsx("input",{type:"month",value:w,onChange:ne=>A(ne.target.value),className:"border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm text-blue-900"})]}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("button",{onClick:()=>h(!0),className:"btn-secondary py-2 px-4 border rounded-md text-sm font-medium hover:bg-gray-50 text-blue-900",children:"View History"}),i.jsx("button",{onClick:P,className:"bg-teal-600 text-white py-2 px-4 rounded-md text-sm font-medium hover:bg-teal-700 shadow-sm",children:"Finalize & Run Payroll"})]})]}),x&&i.jsx("div",{className:`mb-4 p-3 rounded-md text-sm ${x.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.text}),i.jsx("div",{className:"overflow-x-auto",children:a.length>0?te():i.jsx("p",{className:"text-center text-blue-900 py-4",children:"No employees found."})})]})]})},IN=({employees:a,attendanceRecords:e=[],leaveRequests:n=[]})=>{const[r,o]=z.useState("monthly"),[u,h]=z.useState("All"),[p,g]=z.useState(""),[x,_]=z.useState(()=>new Date().toISOString().slice(0,7)),[w,A]=z.useState(()=>new Date().toISOString().split("T")[0]),[D,V]=z.useState(()=>new Date().toISOString().split("T")[0]),M=z.useMemo(()=>{const F=a.map(W=>W.department);return["All",...Array.from(new Set(F))]},[a]),P=z.useMemo(()=>a.filter(F=>{const W=u==="All"||F.department===u,N=`${F.firstName} ${F.lastName}`.toLowerCase().includes(p.toLowerCase());return W&&N}),[a,u,p]),ee=F=>{const[W,C]=x.split("-").map(Number),N=C-1,S=e.filter(k=>{const I=new Date(k.date);return(k.employeeId&&String(k.employeeId).trim()===String(F.employeeId||F.id).trim()||k.employeeId===F.id)&&I.getMonth()===N&&I.getFullYear()===W});let E=0;S.length>0&&(E=Math.round(S.length/30*100),E>100&&(E=100));const j=n.filter(k=>{const I=k.employeeId===F.id,me=new Date(k.fromDate),ke=me.getMonth()===N&&me.getFullYear()===W;return I&&k.status==="Approved"&&ke}).length;return{attendancePct:E,approvedLeaves:j,daysPresent:S.length}},ue=z.useMemo(()=>e.filter(F=>{if(F.date<w||F.date>D)return!1;const W=a.find(N=>String(N.employeeId).trim()===String(F.employeeId).trim()||N.id===F.employeeId);if(!W||u!=="All"&&W.department!==u)return!1;const C=`${W.firstName} ${W.lastName}`.toLowerCase();return!(p&&!C.includes(p.toLowerCase()))}).map(F=>{const W=a.find(C=>String(C.employeeId).trim()===String(F.employeeId).trim()||C.id===F.employeeId);return{...F,empName:W?`${W.firstName} ${W.lastName}`:"Unknown",department:(W==null?void 0:W.department)||"-",designation:(W==null?void 0:W.designation)||"-"}}).sort((F,W)=>F.date.localeCompare(W.date)||F.empName.localeCompare(W.empName)),[e,w,D,u,a,p]),te=z.useMemo(()=>{const F=[],W=new Date(w),C=new Date(D),N=a.filter(E=>{const j=u==="All"||E.department===u,I=`${E.firstName} ${E.lastName}`.toLowerCase().includes(p.toLowerCase());return j&&I}),S=new Set;e.forEach(E=>{E.date>=w&&E.date<=D&&S.add(`${String(E.employeeId).trim()}_${E.date}`)});for(let E=new Date(W);E<=C;E.setDate(E.getDate()+1)){const j=E.toISOString().split("T")[0];N.forEach(k=>{const I=String(k.employeeId||"").trim(),me=k.id;if(!(S.has(`${I}_${j}`)||S.has(`${me}_${j}`))){const G=n.find(oe=>oe.employeeId===k.id&&oe.status==="Approved"&&j>=oe.fromDate&&j<=oe.toDate);F.push({date:j,empId:k.employeeId||k.id,name:`${k.firstName} ${k.lastName}`,department:k.department,designation:k.designation,status:G?"On Leave":"Absent",remarks:G?G.leaveType:"-"})}})}return F.sort((E,j)=>E.date.localeCompare(j.date)||E.name.localeCompare(j.name))},[w,D,u,a,e,n,p]),ne=()=>{if(r==="monthly"){const F=P.map((N,S)=>{const{attendancePct:E,approvedLeaves:j,daysPresent:k}=ee(N);return new Intl.NumberFormat("en-PK",{style:"currency",currency:"PKR",minimumFractionDigits:0}).format(parseFloat(N.salary||"0")),{"#":S+1,Name:`${N.firstName} ${N.lastName}`,Department:N.department,Designation:N.designation,Month:x,"Days Present":k,"Attendance (%)":`${E}%`,"Leaves Taken":j}}),W=XLSX.utils.json_to_sheet(F),C=XLSX.utils.book_new();XLSX.utils.book_append_sheet(C,W,"Monthly Report"),XLSX.writeFile(C,`HR_Monthly_Report_${x}.xlsx`)}else if(r==="attendance"){const F=ue.map(N=>({Date:N.date,"Employee ID":N.employeeId,Name:N.empName,Department:N.department,"Time In":N.timeIn,"Time Out":N.timeOut||"-",Status:N.status})),W=XLSX.utils.json_to_sheet(F),C=XLSX.utils.book_new();XLSX.utils.book_append_sheet(C,W,"Attendance"),XLSX.writeFile(C,`Attendance_Report_${w}_to_${D}.xlsx`)}else if(r==="absent"){const F=te.map(N=>({Date:N.date,"Employee ID":N.empId,Name:N.name,Department:N.department,Status:N.status,Remarks:N.remarks})),W=XLSX.utils.json_to_sheet(F),C=XLSX.utils.book_new();XLSX.utils.book_append_sheet(C,W,"Absent"),XLSX.writeFile(C,`Absent_Report_${w}_to_${D}.xlsx`)}};return i.jsxs("div",{className:"bg-white p-6 sm:p-8 rounded-lg shadow-sm min-h-screen",children:[i.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8 gap-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"HR Reports"}),i.jsx("p",{className:"text-sm text-blue-900",children:"Generate comprehensive reports for attendance and performance."})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 bg-slate-100 p-1 rounded-lg",children:[i.jsx("button",{onClick:()=>o("monthly"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${r==="monthly"?"bg-white text-teal-700 shadow-sm":"text-blue-900 hover:text-blue-950"}`,children:"Monthly Performance"}),i.jsx("button",{onClick:()=>o("attendance"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${r==="attendance"?"bg-white text-teal-700 shadow-sm":"text-blue-900 hover:text-blue-950"}`,children:"Attendance Report"}),i.jsx("button",{onClick:()=>o("absent"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${r==="absent"?"bg-white text-teal-700 shadow-sm":"text-blue-900 hover:text-blue-950"}`,children:"Absent Report"})]}),i.jsxs("button",{onClick:ne,className:"bg-green-600 hover:bg-green-700 text-white text-sm font-medium py-2 px-4 rounded-md transition-colors shadow-sm flex items-center gap-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Excel"]})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6 bg-slate-50 p-4 rounded-lg border border-slate-200 items-end",children:[i.jsxs("div",{className:"w-full md:w-auto",children:[i.jsx("label",{htmlFor:"department-filter",className:"block text-xs font-medium text-blue-900 mb-1",children:"Department"}),i.jsx("select",{id:"department-filter",value:u,onChange:F=>h(F.target.value),className:"block w-full md:w-48 pl-3 pr-10 py-2 text-base border-slate-300 bg-white text-blue-900 focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md border",children:M.map(F=>i.jsx("option",{value:F,children:F},F))})]}),i.jsxs("div",{className:"w-full md:w-auto",children:[i.jsx("label",{htmlFor:"name-search",className:"block text-xs font-medium text-blue-900 mb-1",children:"Employee Name"}),i.jsx("input",{type:"text",id:"name-search",placeholder:"Search by name...",value:p,onChange:F=>g(F.target.value),className:"block w-full md:w-48 px-3 py-2 text-base border-slate-300 bg-white text-blue-900 focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md border"})]}),r==="monthly"?i.jsxs("div",{className:"w-full md:w-auto",children:[i.jsx("label",{htmlFor:"month-filter",className:"block text-xs font-medium text-blue-900 mb-1",children:"Select Month"}),i.jsx("input",{type:"month",id:"month-filter",value:x,onChange:F=>_(F.target.value),className:"block w-full md:w-48 px-3 py-2 text-base border-slate-300 bg-white text-blue-900 focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md border"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"w-full md:w-auto",children:[i.jsx("label",{htmlFor:"from-date",className:"block text-xs font-medium text-blue-900 mb-1",children:"From Date"}),i.jsx("input",{type:"date",id:"from-date",value:w,onChange:F=>A(F.target.value),className:"block w-full md:w-40 px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]}),i.jsxs("div",{className:"w-full md:w-auto",children:[i.jsx("label",{htmlFor:"to-date",className:"block text-xs font-medium text-blue-900 mb-1",children:"To Date"}),i.jsx("input",{type:"date",id:"to-date",value:D,onChange:F=>V(F.target.value),className:"block w-full md:w-40 px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]})]})]}),r==="monthly"&&i.jsxs("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:[i.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"#"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Department"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Designation"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Attendance"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Leaves"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Salary"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:P.map((F,W)=>{const{attendancePct:C,approvedLeaves:N}=ee(F),S=new Intl.NumberFormat("en-PK",{style:"currency",currency:"PKR",minimumFractionDigits:0}).format(parseFloat(F.salary||"0"));return i.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:W+1}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900 font-medium",children:[F.firstName," ",F.lastName]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:F.department}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:F.designation}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:i.jsxs("span",{className:`text-xs font-semibold inline-block py-1 px-2 rounded-full ${C>=90?"text-green-600 bg-green-100":C>=75?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100"}`,children:[C,"%"]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:N}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:S.replace("PKR","PKR ")})]},F.id)})})]}),P.length===0&&i.jsx("p",{className:"text-center py-8 text-blue-900",children:"No data found matching criteria."})]}),r==="attendance"&&i.jsxs("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:[i.jsxs("div",{className:"p-3 bg-green-50 border-b border-green-100 text-sm text-green-800 font-medium",children:["Showing ",ue.length," records from ",w," to ",D]}),i.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Date"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Department"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Time In"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Time Out"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Status"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:ue.map((F,W)=>i.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:F.date}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:F.empName}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:F.department}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-blue-900",children:F.timeIn}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-blue-900",children:F.timeOut||"--"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:i.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${F.status==="Late"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:F.status})})]},W))})]}),ue.length===0&&i.jsx("p",{className:"text-center py-8 text-blue-900",children:"No attendance records found for this period."})]}),r==="absent"&&i.jsxs("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:[i.jsxs("div",{className:"p-3 bg-red-50 border-b border-red-100 text-sm text-red-800 font-medium",children:["Showing ",te.length," absentee records from ",w," to ",D]}),i.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Date"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Department"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Remarks"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:te.map((F,W)=>i.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:F.date}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:F.name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:F.department}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:i.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${F.status==="On Leave"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:F.status})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:F.remarks})]},W))})]}),te.length===0&&i.jsx("p",{className:"text-center py-8 text-blue-900",children:"No absences found! Everyone was present."})]})]})},kN=({employees:a,attendanceRecords:e,onUploadAttendance:n,currentUserEmail:r})=>{const[o,u]=z.useState(null),[h,p]=z.useState(!1),g=new Date().toISOString().split("T")[0],[x,_]=z.useState(g),[w,A]=z.useState(g),[D,V]=z.useState("All"),M=z.useRef(null),P=a.find(E=>E.email===r),ee=r==="admin",ue=(P==null?void 0:P.role)==="HR",te=ee||ue;z.useEffect(()=>{if(o){const E=setTimeout(()=>u(null),5e3);return()=>clearTimeout(E)}},[o]);const ne=z.useMemo(()=>{const E=a.map(j=>j.department).filter(Boolean);return["All",...Array.from(new Set(E))]},[a]),F=E=>{if(typeof E=="number"){const j=Math.round(E*86400),k=Math.floor(j/3600),I=Math.floor(j%3600/60);return`${String(k).padStart(2,"0")}:${String(I).padStart(2,"0")}`}if(typeof E=="string"){const j=E.split(":");if(j.length>=2){let k=parseInt(j[0]);const I=j[1];return E.toLowerCase().includes("pm")&&k<12&&(k+=12),E.toLowerCase().includes("am")&&k===12&&(k=0),`${String(k).padStart(2,"0")}:${I.substring(0,2)}`}}return String(E||"")},W=E=>{if(typeof E=="number"){const k=Math.floor(E-25569)*86400;return new Date(k*1e3).toISOString().split("T")[0]}try{const j=new Date(E);return isNaN(j.getTime())?String(E):j.toISOString().split("T")[0]}catch{return String(E)}},C=async E=>{var k;const j=(k=E.target.files)==null?void 0:k[0];if(j){p(!0),u(null);try{const I=await j.arrayBuffer(),me=XLSX.read(I,{type:"array"}),ke=me.SheetNames[0],G=me.Sheets[ke],oe=XLSX.utils.sheet_to_json(G),ye=new Map;oe.forEach(L=>{const Y={};Object.keys(L).forEach(xe=>{const Te=xe.replace(/[^a-zA-Z0-9]/g,"").toLowerCase();Y[Te]=L[xe]});const he=Y.employeeid||Y.empid||Y.id||Y.userid||Y.acno,ge=Y.name||Y.employeename||Y.empname||Y.employee,be=Y.date||Y.attendancedate||Y.time,U=Y.time||Y.timein||Y.checkin||Y.datetime;if(!be)return;let de;if(he){const xe=String(he).trim();de=a.find(Te=>Te.employeeId&&String(Te.employeeId).trim()===xe||Te.id&&String(Te.id).trim()===xe)}if(!de&&ge){const xe=String(ge).trim().toLowerCase();de=a.find(Te=>`${Te.firstName} ${Te.lastName}`.toLowerCase()===xe)}if(de){let xe=W(be),Te=F(U);if(be.toString().includes("T")||typeof be=="string"&&be.length>15){const Qe=new Date(be);if(!isNaN(Qe.getTime())){xe=Qe.toISOString().split("T")[0];const sn=String(Qe.getHours()).padStart(2,"0"),an=String(Qe.getMinutes()).padStart(2,"0");Te=`${sn}:${an}`}}if(xe&&Te&&Te.includes(":")){const Qe=`${de.id}_${xe}`,[sn,an]=Te.split(":").map(Number),vn=sn*60+an;ye.has(Qe)||ye.set(Qe,{employeeId:de.id,date:xe,times:[],status:"Present"});const Xt=ye.get(Qe);Xt.times.includes(vn)||Xt.times.push(vn)}}});const je=[];let Ue=0;if(ye.forEach(L=>{if(L.times.sort((Y,he)=>Y-he),L.times.length>0){const Y=L.times[0],he=L.times[L.times.length-1],ge=`${String(Math.floor(Y/60)).padStart(2,"0")}:${String(Y%60).padStart(2,"0")}`;let be="";L.times.length>1&&(be=`${String(Math.floor(he/60)).padStart(2,"0")}:${String(he%60).padStart(2,"0")}`);let U="Present";const[de,xe]=ge.split(":").map(Number);(de>9||de===9&&xe>15)&&(U="Late"),je.push({employeeId:L.employeeId,date:L.date,timeIn:ge,timeOut:be,status:U}),Ue++}}),je.length>0){const L=await n(je);u({type:L.success?"success":"error",text:`${L.message} (${Ue} daily records processed)`})}else u({type:"error",text:"No valid records matched. Ensure ID or Name columns match your employee data."})}catch(I){console.error("Error processing file:",I),u({type:"error",text:"Failed to process the uploaded file. Please ensure it is a valid Excel/CSV file."})}finally{p(!1),M.current&&(M.current.value="")}}},N=E=>{const j=a.find(k=>k.employeeId===E||k.id===E);return j?`${j.firstName} ${j.lastName}`:"Unknown"},S=z.useMemo(()=>e.filter(E=>{if(!te&&P&&!(E.employeeId===P.id||E.employeeId===P.employeeId)||!(E.date>=x&&E.date<=w))return!1;if(te&&D!=="All"){const k=a.find(I=>I.employeeId===E.employeeId||I.id===E.employeeId);if((k==null?void 0:k.department)!==D)return!1}return!0}).sort((E,j)=>{if(E.date!==j.date)return j.date.localeCompare(E.date);const k=N(E.employeeId),I=N(j.employeeId);return k.localeCompare(I)}),[e,x,w,D,a,te,P]);return i.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Attendance Management"}),i.jsx("p",{className:"text-blue-900 mt-1",children:te?"Upload biometric logs or view daily records.":"View your attendance history."})]}),te&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"file",ref:M,onChange:C,accept:".xlsx, .xls, .csv",className:"hidden"}),i.jsxs("button",{onClick:()=>{var E;return(E=M.current)==null?void 0:E.click()},disabled:h,className:"flex items-center justify-center gap-2 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 disabled:bg-teal-400 disabled:cursor-not-allowed",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),h?"Processing...":"Upload Machine Data"]})]})]}),o&&i.jsx("div",{className:`p-3 rounded-md text-sm ${o.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.text}),i.jsxs("div",{className:"bg-slate-50 p-4 rounded-md border border-slate-200",children:[i.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-3",children:"Filters"}),i.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"from-date",className:"block text-xs font-medium text-blue-900 mb-1",children:"From Date"}),i.jsx("input",{type:"date",id:"from-date",value:x,onChange:E=>_(E.target.value),className:"block w-full sm:w-40 px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"to-date",className:"block text-xs font-medium text-blue-900 mb-1",children:"To Date"}),i.jsx("input",{type:"date",id:"to-date",value:w,onChange:E=>A(E.target.value),className:"block w-full sm:w-40 px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]}),te&&i.jsxs("div",{children:[i.jsx("label",{htmlFor:"dept-select",className:"block text-xs font-medium text-blue-900 mb-1",children:"Department"}),i.jsx("select",{id:"dept-select",value:D,onChange:E=>V(E.target.value),className:"block w-full sm:w-48 px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",children:ne.map(E=>i.jsx("option",{value:E,children:E},E))})]})]})]}),i.jsx("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Date"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Employee ID"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Employee Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Time In"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Time Out"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Status"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:S.length>0?S.map(E=>{const j=E.status==="Late"?"bg-yellow-100 text-yellow-800":E.status==="Absent"?"bg-red-100 text-red-800":"bg-green-100 text-green-800";return i.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:E.date}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:E.employeeId}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:N(E.employeeId)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:E.timeIn}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:E.timeOut||"--"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:i.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${j}`,children:E.status})})]},E.id)}):i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"text-center py-10",children:i.jsx("p",{className:"text-blue-900",children:"No attendance records found for the selected criteria."})})})})]})})]})},DN=({onBack:a,employees:e,users:n,onAddEmployee:r,onLogout:o,allPermissions:u,onUserPermissionsChange:h,currentUserEmail:p,leaveRequests:g,onAddLeaveRequest:x,onLeaveRequestAction:_,onResignEmployee:w,payrollHistory:A,onRunPayroll:D,onUpdateEmployee:V,attendanceRecords:M,onUploadAttendance:P})=>{var ke;const[ee,ue]=z.useState(!1),te=p==="admin",ne=((ke=u[p])==null?void 0:ke.hr)||{},F=e.find(G=>G.email===p),W=z.useMemo(()=>{if(te)return"dashboard";const oe=[...dc,...hc].filter(ye=>{var je;return(F==null?void 0:F.role)==="Employee"&&ye.id==="dashboard"?!1:(je=ne[ye.id])==null?void 0:je.view});return oe.length>0?oe[0].id:null},[te,ne,F]),[C,N]=z.useState(W),[S,E]=z.useState("");z.useEffect(()=>{!C&&W&&N(W)},[W,C]);const j=()=>{ue(!ee)},k=z.useMemo(()=>{if(!S)return e;const G=S.toLowerCase();return e.filter(oe=>`${oe.firstName} ${oe.lastName}`.toLowerCase().includes(G)||oe.email.toLowerCase().includes(G)||oe.department.toLowerCase().includes(G)||oe.designation.toLowerCase().includes(G)||(oe.employeeId||"").toLowerCase().includes(G))},[e,S]),I=z.useMemo(()=>{if(!S)return n;const G=S.toLowerCase();return n.filter(oe=>{if(oe.email.toLowerCase().includes(G))return!0;const ye=e.find(je=>je.email===oe.email);return!!(ye&&`${ye.firstName} ${ye.lastName}`.toLowerCase().includes(G))})},[n,e,S]),me=()=>{if(!C)return i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Access Denied"}),i.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"You do not have permission to view any pages in this module. Please contact an administrator."}),i.jsx("button",{onClick:a,className:"mt-4 text-teal-600 hover:underline",children:"Go Back"})]});switch(C){case"dashboard":return i.jsx(yN,{employees:e,leaveRequests:g,onLeaveRequestAction:_,onNavigate:N});case"employees":return i.jsx(vN,{onAddEmployee:r,employees:k,onResignEmployee:w,onUpdateEmployee:V});case"attendance":return i.jsx(kN,{employees:e,attendanceRecords:M,onUploadAttendance:P,currentUserEmail:p});case"reports":return i.jsx(IN,{employees:e,attendanceRecords:M,leaveRequests:g});case"users":return i.jsx(_N,{users:I,employees:e});case"user-access":return i.jsx(EN,{users:n,employees:e,allPermissions:u,onUserPermissionsChange:h});case"leaves":return i.jsx(jN,{currentUserEmail:p,employees:e,leaveRequests:g,onAddLeaveRequest:x,onLeaveRequestAction:_});case"departments":return i.jsx(CN,{});case"payroll":return i.jsx(RN,{employees:e,payrollHistory:A,attendanceRecords:M,leaveRequests:g,onRunPayroll:D});default:return i.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm",children:["Content for ",C]})}};return i.jsxs("div",{className:"flex h-screen bg-slate-100",children:[i.jsx(hN,{activePage:C||"",setActivePage:N,isCollapsed:ee,onLogout:o,permissions:ne,currentUserEmail:p,employees:e}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(pN,{toggleSidebar:j,isSidebarCollapsed:ee,onLogout:o,searchQuery:S,onSearchChange:E,onBack:a}),i.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-slate-100",children:i.jsx("div",{className:"p-6",children:me()})})]})]})},MN=({currentPage:a,onNavigate:e,permissions:n,currentUserEmail:r,employees:o})=>{const u=r==="admin",h=gp.map(w=>w.id),p=u?jd:jd.filter(w=>{var A;return w.id==="assets"?h.some(D=>{var V;return(V=n==null?void 0:n[D])==null?void 0:V.view}):(A=n==null?void 0:n[w.id])==null?void 0:A.view}),g=o.find(w=>w.email===r),x=u?"Administrator":g?`${g.firstName} ${g.lastName}`:r,_=x.charAt(0).toUpperCase();return i.jsxs("aside",{className:"w-64 flex-shrink-0 flex flex-col bg-white dark:bg-gray-800 border-r border-slate-200 dark:border-gray-700",children:[i.jsx("div",{className:"flex items-center justify-center h-20 border-b border-slate-200 dark:border-gray-700 flex-shrink-0 px-4",children:i.jsx(Vl,{className:"w-full h-10"})}),i.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:p.map(w=>{const A=w.icon;return i.jsxs("button",{onClick:()=>e(w.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors text-left ${a===w.id?"bg-purple-50 text-purple-900 font-bold border-r-4 border-purple-900":"text-blue-900 dark:text-blue-300 hover:bg-purple-50 hover:text-purple-900 dark:hover:bg-gray-700"}`,children:[i.jsx(A,{className:`w-6 h-6 ${a===w.id?"text-purple-900":"text-purple-800"}`}),i.jsx("span",{className:"font-medium",children:w.label})]},w.id)})}),i.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900 flex items-center justify-center font-bold text-purple-900 dark:text-purple-300",children:_}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-sm text-blue-900 dark:text-white",title:x,children:x}),i.jsx("p",{className:"text-xs text-blue-800 dark:text-gray-400",title:r,children:r})]})]})})]})},ON=a=>{if(!a.specs)return"-";const{cpu:e,ram:n,storage:r,gpu:o,lcd:u}=a.specs;if(a.type==="Monitor"&&u)return u;const h=[e,n,r,o].filter(Boolean);return h.length===0?"-":h.join(" / ")},yp=({inventory:a,onEdit:e,onResign:n,onDelete:r,view:o})=>{const u=p=>{switch(p){case"In Use":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"In Stock":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Maintenance":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},h=o==="All"||o==="In Use";return i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm text-left text-blue-600 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-blue-900 uppercase bg-blue-50 dark:bg-gray-700 dark:text-gray-400",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Type"}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Brand"}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Model"}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Specifications"}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Serial No."}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Assigned To"}),h&&i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Department"}),h&&i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Issue Date"}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Others"}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:i.jsx("span",{className:"sr-only",children:"Actions"})})]})}),i.jsx("tbody",{children:a.map(p=>i.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700 hover:bg-blue-50 dark:hover:bg-gray-600",children:[i.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-blue-900 dark:text-white whitespace-nowrap",children:p.type}),i.jsx("td",{className:"px-6 py-4 font-semibold text-blue-800",children:p.brand||"-"}),i.jsx("td",{className:"px-6 py-4 text-blue-800",children:p.model}),i.jsx("td",{className:"px-6 py-4 text-xs text-blue-600",children:ON(p)}),i.jsx("td",{className:"px-6 py-4 font-mono text-xs text-blue-600",children:p.serialNumber||"-"}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${u(p.status)}`,children:p.status})}),i.jsx("td",{className:"px-6 py-4 text-blue-800",children:p.assignedTo||"-"}),h&&i.jsx("td",{className:"px-6 py-4 text-blue-800",children:p.department||"-"}),h&&i.jsx("td",{className:"px-6 py-4 text-blue-800",children:p.issueDate||"-"}),i.jsx("td",{className:"px-6 py-4 text-blue-600",children:p.others||"-"}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsxs("div",{className:"flex items-center justify-end space-x-4",children:[i.jsx("button",{onClick:()=>e(p),className:"font-medium text-blue-600 dark:text-blue-500 hover:underline",children:"Edit"}),p.status==="In Use"&&p.assignedTo&&i.jsx("button",{onClick:()=>n(p.assignedTo),className:"font-medium text-yellow-600 dark:text-yellow-500 hover:underline",children:"Resign"}),r&&i.jsx("button",{onClick:()=>r(p.id),className:"font-medium text-red-600 dark:text-red-500 hover:underline",children:"Delete"})]})})]},p.id))})]})})},od={type:"Kitchen",model:"",brand:"",status:"In Stock",assignedTo:"",serialNumber:"",department:"",designation:"",issueDate:"",vendor:"",maintenanceDate:"",others:"",specs:{cpu:"",ram:"",storage:"",gpu:"",lcd:""},telephoneExt:"",quantity:1,unit:"",itemCode:"",itemName:"",subCategory:"",purchaseDate:"",cost:"",assetLife:"",location:"",condition:"",remarks:""},Ky=({type:a,specs:e,brand:n,onChange:r})=>a!=="Laptop"&&a!=="Desktop"&&a!=="Monitor"&&a!=="Electronics"?null:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-3 pt-3 border-t border-blue-200 dark:border-gray-600",children:[i.jsx("input",{type:"text",name:"brand",value:n||"",onChange:r,placeholder:"Brand (e.g., Dell, HP)",className:"input-style mb-3"}),(a==="Laptop"||a==="Desktop")&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"text",name:"cpu",value:(e==null?void 0:e.cpu)||"",onChange:r,placeholder:"CPU (e.g., Core i7)",className:"input-style mb-3"}),i.jsx("input",{type:"text",name:"ram",value:(e==null?void 0:e.ram)||"",onChange:r,placeholder:"RAM (e.g., 16GB DDR4)",className:"input-style mb-3"}),i.jsx("input",{type:"text",name:"storage",value:(e==null?void 0:e.storage)||"",onChange:r,placeholder:"Storage (e.g., 512GB SSD)",className:"input-style mb-3"})]}),a==="Desktop"&&i.jsx("input",{type:"text",name:"gpu",value:(e==null?void 0:e.gpu)||"",onChange:r,placeholder:"GPU (e.g., NVIDIA RTX 3060)",className:"input-style mb-3"}),(a==="Laptop"||a==="Desktop"||a==="Monitor")&&i.jsx("input",{type:"text",name:"lcd",value:(e==null?void 0:e.lcd)||"",onChange:r,placeholder:"LCD / Display",className:"input-style mb-3"})]}),Ec=a=>{const{isOpen:e,onClose:n,onSave:r,editingAsset:o,initialStatus:u,initialType:h,isMultiAddMode:p,employees:g}=a,x=(N="In Stock")=>({...od,specs:{...od.specs},status:N}),[_,w]=z.useState(x()),[A,D]=z.useState({assignedTo:"",department:"",designation:"",issueDate:""}),[V,M]=z.useState([x("In Use")]),P=z.useCallback(()=>{w(x()),D({assignedTo:"",department:"",designation:"",issueDate:""}),M([x("In Use")])},[]);z.useEffect(()=>{if(e)if(o)w({...od,...o,specs:{...od.specs,...o.specs||{}}});else if(p)M([x("In Use")]),D({assignedTo:"",department:"",designation:"",issueDate:""});else{const N=x(u);h&&(N.type=h),w(N)}else setTimeout(P,300)},[e,o,p,u,h,P]);const ee=N=>{const{name:S,value:E}=N.target;if(["cpu","ram","storage","gpu","lcd"].includes(S))w(j=>({...j,specs:{...j.specs||{},[S]:E}}));else if(S==="assignedTo"){const j=g.find(k=>`${k.firstName} ${k.lastName}`===E);w(j?k=>({...k,assignedTo:E,department:j.department,designation:j.designation}):k=>({...k,assignedTo:E}))}else w(j=>({...j,[S]:E}))},ue=N=>{const{name:S,value:E}=N.target;if(S==="assignedTo"){const j=g.find(k=>`${k.firstName} ${k.lastName}`===E);D(j?k=>({...k,assignedTo:E,department:j.department,designation:j.designation}):k=>({...k,[S]:E,department:"",designation:""}))}else D(j=>({...j,[S]:E}))},te=(N,S)=>{const{name:E,value:j}=S.target;M(k=>{const I=[...k],me={...I[N]};return me.specs&&(me.specs={...me.specs}),["cpu","ram","storage","gpu","lcd"].includes(E)?me.specs={...me.specs||{},[E]:j}:E==="brand"?me.brand=j:me[E]=j,I[N]=me,I})},ne=()=>{M(N=>[...N,x("In Use")])},F=N=>{M(S=>S.filter((E,j)=>j!==N))},W=N=>{if(N.preventDefault(),p&&!o){const S=V.map(E=>({...E,...A,status:"In Use"}));r(S)}else r([_],o==null?void 0:o.id)};if(!e)return null;const C=i.jsx("datalist",{id:"employee-list",children:g.map(N=>i.jsx("option",{value:`${N.firstName} ${N.lastName}`},N.id))});return p&&!o?i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 p-4 overflow-y-auto flex justify-center items-start",onClick:n,children:[C,i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl",onClick:N=>N.stopPropagation(),children:[i.jsxs("form",{onSubmit:W,children:[i.jsxs("div",{className:"p-6 border-b border-blue-200 dark:border-gray-700",children:[i.jsx("h2",{className:"text-xl font-bold text-blue-900 dark:text-white",children:"Assign New Assets"}),i.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:"Bulk assign assets to an employee."})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-gray-700 p-4 rounded-lg",children:[i.jsx("h3",{className:"font-medium text-blue-900 dark:text-white mb-3",children:"Employee Details"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx("input",{list:"employee-list",name:"assignedTo",value:A.assignedTo,onChange:ue,placeholder:"Search Employee",className:"input-style",required:!0}),i.jsx("input",{type:"text",name:"department",value:A.department,onChange:N=>{},placeholder:"Department",className:"input-style bg-gray-100",readOnly:!0}),i.jsx("input",{type:"text",name:"designation",value:A.designation,onChange:N=>{},placeholder:"Designation",className:"input-style bg-gray-100",readOnly:!0}),i.jsx("input",{type:"date",name:"issueDate",value:A.issueDate,onChange:ue,className:"input-style",required:!0})]})]}),i.jsxs("div",{className:"space-y-4",children:[V.map((N,S)=>i.jsxs("div",{className:"border border-blue-200 dark:border-gray-600 p-4 rounded-lg relative",children:[i.jsx("button",{type:"button",onClick:()=>F(S),className:"absolute top-2 right-2 text-red-500 hover:text-red-700",title:"Remove Asset",children:""}),i.jsxs("h4",{className:"text-sm font-medium text-blue-800 dark:text-gray-300 mb-2",children:["Asset #",S+1]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("select",{name:"type",value:N.type,onChange:E=>te(S,E),className:"input-style",children:[i.jsx("option",{value:"Laptop",children:"Laptop"}),i.jsx("option",{value:"Desktop",children:"Desktop"}),i.jsx("option",{value:"Monitor",children:"Monitor"}),i.jsx("option",{value:"Electronics",children:"Electronics"}),i.jsx("option",{value:"Furniture",children:"Furniture"}),i.jsx("option",{value:"Accessory",children:"Accessory"})]}),i.jsx("input",{type:"text",name:"model",value:N.model,onChange:E=>te(S,E),placeholder:"Model",className:"input-style",required:!0}),i.jsx("input",{type:"text",name:"serialNumber",value:N.serialNumber,onChange:E=>te(S,E),placeholder:"Serial Number",className:"input-style"})]}),i.jsx(Ky,{type:N.type,specs:N.specs,brand:N.brand,onChange:E=>te(S,E)})]},S)),i.jsx("button",{type:"button",onClick:ne,className:"w-full py-2 border-2 border-dashed border-blue-300 dark:border-gray-600 rounded-lg text-blue-600 dark:text-gray-400 hover:bg-blue-50 dark:hover:bg-gray-700",children:"+ Add Another Asset"})]})]}),i.jsxs("div",{className:"p-6 border-t border-blue-200 dark:border-gray-700 flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-blue-800 bg-white border border-blue-300 rounded-lg hover:bg-blue-50",children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-900 rounded-lg hover:bg-blue-800",children:"Assign Assets"})]})]}),i.jsx("style",{children:`
                        .input-style { background-color: #F9FAFB; border: 1px solid #BFDBFE; border-radius: 0.375rem; padding: 0.5rem 0.75rem; width: 100%; color: #1e3a8a; }
                        .input-style::placeholder { color: #93C5FD; }
                        .dark .input-style { background-color: #374151; border-color: #4B5563; color: white; }
                     `})]})]}):i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 p-4 overflow-y-auto flex justify-center items-start",onClick:n,children:[C,i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl",onClick:N=>N.stopPropagation(),children:[i.jsxs("form",{onSubmit:W,children:[i.jsxs("div",{className:"p-6 border-b border-blue-200 dark:border-gray-700",children:[i.jsx("h2",{className:"text-xl font-bold text-blue-900 dark:text-white",children:o?"Edit Asset":"Add New Asset"}),i.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:"Enter details for the item."})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"label-style",children:"Category"}),i.jsxs("select",{name:"type",value:_.type,onChange:ee,className:"input-style",children:[i.jsx("option",{value:"Kitchen",children:"Kitchen"}),i.jsx("option",{value:"Laptop",children:"Laptop"}),i.jsx("option",{value:"Desktop",children:"Desktop"}),i.jsx("option",{value:"Printer",children:"Printer"}),i.jsx("option",{value:"Monitor",children:"Monitor"}),i.jsx("option",{value:"Electronics",children:"Electronics"}),i.jsx("option",{value:"Furniture",children:"Furniture"}),i.jsx("option",{value:"Accessory",children:"Accessory"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"label-style",children:"Model / Name"}),i.jsx("input",{type:"text",name:"model",value:_.model,onChange:ee,className:"input-style",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"label-style",children:"Status"}),i.jsxs("select",{name:"status",value:_.status,onChange:ee,className:"input-style",children:[i.jsx("option",{value:"In Stock",children:"In Stock"}),i.jsx("option",{value:"In Use",children:"In Use"}),i.jsx("option",{value:"Maintenance",children:"Maintenance"})]})]}),_.type==="Kitchen"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"label-style",children:"Quantity"}),i.jsx("input",{type:"number",name:"quantity",value:_.quantity,onChange:ee,className:"input-style",required:!0,min:"0",step:"any"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"label-style",children:"Unit (e.g. kg, liters)"}),i.jsx("input",{type:"text",name:"unit",value:_.unit,onChange:ee,className:"input-style"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"label-style",children:"Item Code"}),i.jsx("input",{type:"text",name:"itemCode",value:_.itemCode,onChange:ee,className:"input-style"})]})]}):i.jsxs("div",{children:[i.jsx("label",{className:"label-style",children:"Serial Number"}),i.jsx("input",{type:"text",name:"serialNumber",value:_.serialNumber,onChange:ee,className:"input-style"})]})]}),_.status==="In Use"&&i.jsxs("div",{className:"bg-blue-50 dark:bg-gray-700 p-4 rounded-lg space-y-3",children:[i.jsx("h4",{className:"text-sm font-medium text-blue-900 dark:text-white",children:"Assignment Details"}),i.jsx("input",{list:"employee-list",name:"assignedTo",value:_.assignedTo,onChange:ee,placeholder:"Assigned To (Employee)",className:"input-style"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("input",{type:"text",name:"department",value:_.department,onChange:ee,placeholder:"Department",className:"input-style"}),i.jsx("input",{type:"text",name:"location",value:_.location,onChange:ee,placeholder:"Location",className:"input-style"})]}),i.jsx("input",{type:"date",name:"issueDate",value:_.issueDate,onChange:ee,className:"input-style"})]}),i.jsx(Ky,{type:_.type,specs:_.specs,brand:_.brand,onChange:ee}),i.jsx("textarea",{name:"others",value:_.others,onChange:ee,placeholder:"Other Details / Remarks",className:"input-style",rows:2})]}),i.jsxs("div",{className:"p-6 border-t border-blue-200 dark:border-gray-700 flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-blue-800 bg-white border border-blue-300 rounded-lg hover:bg-blue-50",children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-900 rounded-lg hover:bg-blue-800",children:"Save Asset"})]})]}),i.jsx("style",{children:`
                    .input-style { background-color: #F9FAFB; border: 1px solid #BFDBFE; border-radius: 0.375rem; padding: 0.5rem 0.75rem; width: 100%; color: #1e3a8a; }
                    .input-style::placeholder { color: #93C5FD; }
                    .dark .input-style { background-color: #374151; border-color: #4B5563; color: white; }
                    .label-style { display: block; font-size: 0.875rem; font-weight: 500; color: #1e3a8a; margin-bottom: 0.25rem; }
                    .dark .label-style { color: #D1D5DB; }
                `})]})]})},PN=({title:a,count:e,icon:n,onClick:r,color:o})=>i.jsxs("div",{onClick:r,className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform duration-200 flex flex-col items-start",children:[i.jsx("div",{className:`rounded-lg p-3 mb-4 ${o}`,children:Nc.cloneElement(n,{className:"h-8 w-8 text-white"})}),i.jsx("h3",{className:"font-bold text-lg text-blue-900 dark:text-white",children:a}),i.jsxs("p",{className:"text-blue-900 dark:text-gray-400 mt-1 text-sm",children:[e," items"]})]}),LN=({isOpen:a,onClose:e,onSave:n,editingGroupedToner:r})=>{const[o,u]=z.useState(""),[h,p]=z.useState(""),[g,x]=z.useState(0),[_,w]=z.useState(0);z.useEffect(()=>{a&&(r?(u(r.model),p(r.compatiblePrinters.join(", ")),x(r.filled.quantity),w(r.empty.quantity)):(u(""),p(""),x(1),w(0)))},[a,r]);const A=M=>{M.preventDefault();const P=h.split(",").map(ee=>ee.trim()).filter(Boolean);n({model:o,compatiblePrinters:P,filledQuantity:Number(g)||0,emptyQuantity:Number(_)||0,originalModelName:r==null?void 0:r.model})};if(!a)return null;const D=r?"Edit Toner Model":"Add New Toner Model",V=r?"Update the details for this toner model.":"Enter the details for the new toner model.";return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 p-4 overflow-y-auto flex justify-center items-start","aria-modal":"true",role:"dialog",onClick:e,children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg",onClick:M=>M.stopPropagation(),children:[i.jsxs("form",{onSubmit:A,children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:D}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:V})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"model",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Toner Model"}),i.jsx("input",{type:"text",id:"model",name:"model",value:o,onChange:M=>u(M.target.value),required:!0,className:"mt-1 block w-full input-style",placeholder:"e.g., HP 58A"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"compatiblePrinters",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Compatible Printer Models"}),i.jsx("input",{type:"text",id:"compatiblePrinters",name:"compatiblePrinters",value:h,onChange:M=>p(M.target.value),className:"mt-1 block w-full input-style",placeholder:"e.g., HP LaserJet Pro M404dn, Other Model"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Separate multiple models with a comma."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"filledQuantity",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filled Quantity"}),i.jsx("input",{type:"number",id:"filledQuantity",name:"filledQuantity",value:g,onChange:M=>x(parseInt(M.target.value,10)),min:"0",required:!0,className:"mt-1 block w-full input-style"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"emptyQuantity",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Empty Quantity"}),i.jsx("input",{type:"number",id:"emptyQuantity",name:"emptyQuantity",value:_,onChange:M=>w(parseInt(M.target.value,10)),min:"0",required:!0,className:"mt-1 block w-full input-style"})]})]})]}),i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600 flex justify-end space-x-3",children:[i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-500 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600",children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700",children:"Save Toner Model"})]})]}),i.jsx("style",{children:".input-style { background-color: #F9FAFB; border: 1px solid #D1D5DB; border-radius: 0.5rem; padding: 0.75rem 1rem; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); transition: all 0.2s ease-in-out; } .dark .input-style { background-color: #374151; border-color: #4B5563; color: #F9FAFB; } .input-style:focus { outline: none; --tw-ring-color: #3B82F6; box-shadow: 0 0 0 2px var(--tw-ring-color); }"})]})})},bm=({title:a,count:e,icon:n,colorClasses:r})=>i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 flex items-center space-x-4",children:[i.jsx("div",{className:`rounded-full p-3 ${r.bg}`,children:Nc.cloneElement(n,{className:`h-6 w-6 ${r.text}`})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-gray-400",children:a}),i.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:e})]})]}),VN=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...a,children:i.jsx("path",{fillRule:"evenodd",d:"M3 3.5A1.5 1.5 0 014.5 2h5.25a1.5 1.5 0 011.06.44l3.5 3.5a1.5 1.5 0 01.44 1.06V16.5A1.5 1.5 0 0113.5 18H4.5A1.5 1.5 0 013 16.5v-13zM9 12.25a.75.75 0 00-1.5 0v.5a.75.75 0 001.5 0v-.5z",clipRule:"evenodd"})}),UN=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...a,children:[i.jsx("path",{d:"M5.5 2A2.5 2.5 0 003 4.5v11A2.5 2.5 0 005.5 18h9a2.5 2.5 0 002.5-2.5V8.31l-5.5-5.5H5.5zM9 4.75a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 019 4.75z"}),i.jsx("path",{d:"M10.121 2.227a.75.75 0 00-1.06 0l-5.5 5.5A.75.75 0 004 8.25v7.25a.75.75 0 00.75.75h8.5a.75.75 0 00.75-.75V8.25a.75.75 0 00-.22-.53l-5.5-5.5zM10 8a1 1 0 11-2 0 1 1 0 012 0z"})]}),qN=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...a,children:[i.jsx("path",{d:"M2 3.5A1.5 1.5 0 013.5 2h13A1.5 1.5 0 0118 3.5v13a1.5 1.5 0 01-1.5 1.5h-13A1.5 1.5 0 012 16.5v-13z"}),i.jsx("path",{d:"M5 6a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H6z"})]}),zN=a=>{const{printers:e,toners:n,onAddNewAsset:r,onUpdateAsset:o,onDeleteAsset:u,onResignEmployee:h,onSaveTonerModel:p,onDeleteTonerModel:g,onMarkTonerEmpty:x,onMarkTonerFilled:_,employees:w}=a,[A,D]=z.useState("printers"),[V,M]=z.useState(""),[P,ee]=z.useState(!1),[ue,te]=z.useState(null),[ne,F]=z.useState(),[W,C]=z.useState(!1),[N,S]=z.useState(null),[E,j]=z.useState("All"),k=z.useMemo(()=>{const U=V.trim().toLowerCase();return U?e.filter(de=>Object.values(de).some(xe=>String(xe).toLowerCase().includes(U))||Object.values(de.specs||{}).some(xe=>String(xe).toLowerCase().includes(U))):e},[e,V]),I=z.useMemo(()=>["All",...Array.from(new Set(n.map(U=>U.model)))],[n]),me=z.useMemo(()=>{const U=new Map;return n.forEach(de=>{U.has(de.model)||U.set(de.model,{model:de.model,compatiblePrinters:de.compatiblePrinters,filled:{id:null,quantity:0},empty:{id:null,quantity:0}});const xe=U.get(de.model);de.status==="Filled"?(xe.filled.id=de.id,xe.filled.quantity=de.quantity,xe.compatiblePrinters=[...new Set([...xe.compatiblePrinters,...de.compatiblePrinters])]):de.status==="Empty"&&(xe.empty.id=de.id,xe.empty.quantity=de.quantity,xe.compatiblePrinters=[...new Set([...xe.compatiblePrinters,...de.compatiblePrinters])])}),Array.from(U.values()).sort((de,xe)=>de.model.localeCompare(xe.model))},[n]),ke=z.useMemo(()=>E==="All"?me:me.filter(U=>U.model===E),[me,E]),G=z.useMemo(()=>({total:n.reduce((U,de)=>U+de.quantity,0),filled:n.filter(U=>U.status==="Filled").reduce((U,de)=>U+de.quantity,0),empty:n.filter(U=>U.status==="Empty").reduce((U,de)=>U+de.quantity,0)}),[n]),oe=()=>{te(null),F("Printer"),ee(!0)},ye=U=>{te(U),F(void 0),ee(!0)},je=()=>{ee(!1),te(null),F(void 0)},Ue=()=>{S(null),C(!0)},L=U=>{S(U),C(!0)},Y=()=>{C(!1)},he=(U,de)=>{const xe={...U[0],type:"Printer"};de?o({...xe,id:de}):r([xe]),je()},ge=U=>{p(U),Y()},be=U=>{window.confirm(`Are you sure you want to delete all toner records for model "${U}"? This will remove both filled and empty stock. This action cannot be undone.`)&&g(U)};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"flex justify-between items-center mb-6",children:i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:"Printers & Toners"}),i.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:"Manage all printing devices and their consumables."})]})}),i.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[i.jsxs("button",{onClick:()=>D("printers"),className:`${A==="printers"?"border-purple-900 text-purple-900 dark:text-blue-400":"border-transparent text-blue-600 dark:text-gray-400 hover:text-blue-900 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:["Printers (",e.length,")"]}),i.jsxs("button",{onClick:()=>D("toners"),className:`${A==="toners"?"border-purple-900 text-purple-900 dark:text-blue-400":"border-transparent text-blue-600 dark:text-gray-400 hover:text-blue-900 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:["Toners (",I.length-1," Models)"]})]})}),A==="printers"&&i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 gap-4",children:[i.jsxs("div",{className:"relative w-full sm:w-auto flex-grow",children:[i.jsx("input",{type:"text",placeholder:"Search printers... (e.g., model, serial, user)",value:V,onChange:U=>M(U.target.value),className:"w-full sm:w-96 pl-10 pr-4 py-2 border border-slate-200 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-900 text-blue-900 placeholder-slate-400"}),i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx("svg",{className:"h-5 w-5 text-purple-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),i.jsxs("button",{onClick:oe,className:"px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors shadow-md text-sm font-medium flex items-center space-x-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),i.jsx("span",{children:"Add New Printer"})]})]}),i.jsx(yp,{inventory:k,onEdit:ye,onResign:h,view:"All",onDelete:u})]}),A==="toners"&&i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[i.jsx(bm,{title:"Total Toner Stock",count:G.total,icon:i.jsx(qN,{}),colorClasses:{bg:"bg-purple-100 dark:bg-gray-700",text:"text-purple-900 dark:text-gray-300"}}),i.jsx(bm,{title:"Total Filled Toners",count:G.filled,icon:i.jsx(VN,{}),colorClasses:{bg:"bg-green-100 dark:bg-green-900",text:"text-green-600 dark:text-green-300"}}),i.jsx(bm,{title:"Total Empty Toners",count:G.empty,icon:i.jsx(UN,{}),colorClasses:{bg:"bg-yellow-100 dark:bg-yellow-900",text:"text-yellow-600 dark:text-yellow-300"}})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("label",{htmlFor:"tonerModelFilter",className:"text-sm font-medium text-blue-900 dark:text-gray-300",children:"Filter by Model:"}),i.jsx("select",{id:"tonerModelFilter",value:E,onChange:U=>j(U.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 text-blue-900",children:I.map(U=>i.jsx("option",{value:U,children:U},U))})]}),i.jsxs("button",{onClick:Ue,className:"px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors shadow-md text-sm font-medium flex items-center space-x-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),i.jsx("span",{children:"Add New Toner Model"})]})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm text-left text-blue-600 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-blue-900 uppercase bg-purple-50 dark:bg-gray-700 dark:text-gray-400",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Toner Model"}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Compatible Printers"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Filled Qty"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Empty Qty"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Total Qty"}),i.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Actions"})]})}),i.jsx("tbody",{children:ke.map(U=>i.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700 hover:bg-purple-50 dark:hover:bg-gray-600",children:[i.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-blue-900 dark:text-white whitespace-nowrap",children:U.model}),i.jsx("td",{className:"px-6 py-4 text-xs text-blue-800",children:U.compatiblePrinters.join(", ")}),i.jsx("td",{className:"px-6 py-4 text-center",children:i.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",children:U.filled.quantity})}),i.jsx("td",{className:"px-6 py-4 text-center",children:i.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",children:U.empty.quantity})}),i.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 dark:text-gray-300",children:U.filled.quantity+U.empty.quantity}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[i.jsx("button",{onClick:()=>x(U.filled.id),disabled:!U.filled.id||U.filled.quantity===0,className:"font-medium text-yellow-600 dark:text-yellow-500 hover:underline disabled:text-gray-400 dark:disabled:text-gray-500 disabled:cursor-not-allowed disabled:no-underline","aria-label":`Mark one ${U.model} toner as empty`,title:"Mark 1 Empty",children:"Mark Empty"}),i.jsx("button",{onClick:()=>_(U.empty.id),disabled:!U.empty.id||U.empty.quantity===0,className:"font-medium text-green-600 dark:text-green-500 hover:underline disabled:text-gray-400 dark:disabled:text-gray-500 disabled:cursor-not-allowed disabled:no-underline","aria-label":`Mark one ${U.model} toner as filled`,title:"Mark 1 Filled",children:"Mark Filled"}),i.jsx("button",{onClick:()=>L(U),className:"font-medium text-blue-600 dark:text-blue-500 hover:underline","aria-label":`Edit ${U.model} toner model`,title:"Edit Model",children:"Edit"}),i.jsx("button",{onClick:()=>be(U.model),className:"font-medium text-red-600 dark:text-red-500 hover:underline","aria-label":`Delete all ${U.model} toner records`,title:"Delete Model",children:"Delete"})]})})]},U.model))})]})})]})]}),i.jsx(Ec,{isOpen:P,onClose:je,onSave:he,editingAsset:ue,initialType:ne,employees:w}),i.jsx(LN,{isOpen:W,onClose:Y,onSave:ge,editingGroupedToner:N})]})},Qy={serialNumber:"",systemModel:"",lcdModel:"",lcdInches:"",cpu:"",ram:"",storage:"",gpu:"",keyboard:"",mouse:"",networkDevice:"Ethernet"},BN=({isOpen:a,onClose:e,onSave:n,editingSystem:r})=>{const[o,u]=z.useState(Qy);z.useEffect(()=>{a&&u(r||Qy)},[a,r]);const h=g=>{const{name:x,value:_}=g.target;u(w=>({...w,[x]:_}))},p=g=>{g.preventDefault(),n(o,r==null?void 0:r.id)};return a?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 p-4 overflow-y-auto flex justify-center items-start",onClick:e,"aria-modal":"true",role:"dialog",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl",onClick:g=>g.stopPropagation(),children:[i.jsxs("form",{onSubmit:p,children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r?"Edit System":"Add New System"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enter the details of the computer system."})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"System & Display"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"systemModel",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"System Model"}),i.jsx("input",{type:"text",id:"systemModel",name:"systemModel",value:o.systemModel,onChange:h,required:!0,className:"mt-1 block w-full input-style"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"serialNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Serial Number"}),i.jsx("input",{type:"text",id:"serialNumber",name:"serialNumber",value:o.serialNumber,onChange:h,required:!0,className:"mt-1 block w-full input-style"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"lcdModel",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"LCD Model"}),i.jsx("input",{type:"text",id:"lcdModel",name:"lcdModel",value:o.lcdModel,onChange:h,required:!0,className:"mt-1 block w-full input-style"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"lcdInches",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"LCD Size (Inches)"}),i.jsx("input",{type:"text",id:"lcdInches",name:"lcdInches",value:o.lcdInches,onChange:h,required:!0,className:"mt-1 block w-full input-style"})]})]})]}),i.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Core Components"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"cpu",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"CPU"}),i.jsx("input",{type:"text",id:"cpu",name:"cpu",value:o.cpu,onChange:h,required:!0,className:"mt-1 block w-full input-style"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ram",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"RAM"}),i.jsx("input",{type:"text",id:"ram",name:"ram",value:o.ram,onChange:h,required:!0,className:"mt-1 block w-full input-style"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"storage",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Storage"}),i.jsx("input",{type:"text",id:"storage",name:"storage",value:o.storage,onChange:h,required:!0,className:"mt-1 block w-full input-style"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"gpu",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Graphics Card (GPU)"}),i.jsx("input",{type:"text",id:"gpu",name:"gpu",value:o.gpu,onChange:h,required:!0,className:"mt-1 block w-full input-style"})]})]})]}),i.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Peripherals & Network"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"keyboard",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Keyboard"}),i.jsx("input",{type:"text",id:"keyboard",name:"keyboard",value:o.keyboard,onChange:h,required:!0,className:"mt-1 block w-full input-style"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"mouse",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mouse"}),i.jsx("input",{type:"text",id:"mouse",name:"mouse",value:o.mouse,onChange:h,required:!0,className:"mt-1 block w-full input-style"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"networkDevice",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Network Device"}),i.jsx("input",{type:"text",id:"networkDevice",name:"networkDevice",value:o.networkDevice,onChange:h,required:!0,className:"mt-1 block w-full input-style",placeholder:"e.g., Ethernet or WiFi Tenda"})]})]})]})]}),i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600 flex justify-end space-x-3",children:[i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-500 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600",children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700",children:"Save System"})]})]}),i.jsx("style",{children:`
                    .input-style {
                        background-color: #F9FAFB; /* bg-gray-50 */
                        border: 1px solid #D1D5DB; /* border-gray-300 */
                        border-radius: 0.375rem; /* rounded-md */
                        padding: 0.5rem 0.75rem; /* px-3 py-2 */
                        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
                        transition: all 0.2s ease-in-out;
                    }
                    .dark .input-style {
                        background-color: #374151; /* dark:bg-gray-700 */
                        border-color: #4B5563; /* dark:border-gray-600 */
                        color: #F9FAFB; /* dark:text-white */
                    }
                    .input-style:focus {
                        outline: none;
                        --tw-ring-color: #3B82F6; /* focus:ring-blue-500 */
                        box-shadow: 0 0 0 2px var(--tw-ring-color);
                    }
                `})]})}):null},FN=({labs:a,onAddSystem:e,onUpdateSystem:n,onDeleteSystem:r})=>{const[o,u]=z.useState(null),[h,p]=z.useState(!1),[g,x]=z.useState(null),_=()=>{x(null),p(!0)},w=P=>{x(P),p(!0)},A=()=>{p(!1),x(null)},D=(P,ee)=>{o&&(ee?n(o.id,{...P,id:ee}):e(o.id,P),A())},V=P=>{o&&window.confirm(`Are you sure you want to delete system ${P}?`)&&r(o.id,P)},M=()=>{if(!o)return;const P=["ID","Serial Number","System Model","LCD Model","LCD Inches","CPU","RAM","Storage","GPU","Keyboard","Mouse","Network Device"],ee=o.systems.map(F=>[`"${F.id}"`,`"${F.serialNumber}"`,`"${F.systemModel}"`,`"${F.lcdModel}"`,`"${F.lcdInches}"`,`"${F.cpu}"`,`"${F.ram}"`,`"${F.storage}"`,`"${F.gpu}"`,`"${F.keyboard}"`,`"${F.mouse}"`,`"${F.networkDevice}"`].join(",")),ue="data:text/csv;charset=utf-8,"+[P.join(","),...ee].join(`
`),te=encodeURI(ue),ne=document.createElement("a");ne.setAttribute("href",te),ne.setAttribute("download",`${o.name.replace(/\s+/g,"_")}_Inventory.csv`),document.body.appendChild(ne),ne.click(),document.body.removeChild(ne)};return o?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"p-6",children:[i.jsxs("button",{onClick:()=>u(null),className:"mb-6 flex items-center text-sm font-medium text-blue-900 dark:text-blue-400 hover:underline",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to All Labs"]}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:[o.name," - Systems Inventory"]}),i.jsxs("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:["Total Systems: ",o.systems.length]})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("button",{onClick:M,disabled:o.systems.length===0,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors shadow-md text-sm font-medium flex items-center space-x-2 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),i.jsx("span",{children:"Download Inventory"})]}),i.jsxs("button",{onClick:_,className:"px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors shadow-md text-sm font-medium flex items-center space-x-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),i.jsx("span",{children:"Add New System"})]})]})]}),o.systems.length>0?i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm text-left text-blue-600 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-blue-900 uppercase bg-purple-50 dark:bg-gray-700 dark:text-gray-400",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-3",children:"ID"}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Serial No."}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"System Model"}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"CPU"}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"RAM"}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Storage"}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"GPU"}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Keyboard"}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Mouse"}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:i.jsx("span",{className:"sr-only",children:"Actions"})})]})}),i.jsx("tbody",{children:o.systems.map(P=>i.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700 hover:bg-purple-50 dark:hover:bg-gray-600",children:[i.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-blue-900 dark:text-white whitespace-nowrap",children:P.id}),i.jsx("td",{className:"px-6 py-4",children:P.serialNumber}),i.jsx("td",{className:"px-6 py-4",children:P.systemModel}),i.jsx("td",{className:"px-6 py-4",children:P.cpu}),i.jsx("td",{className:"px-6 py-4",children:P.ram}),i.jsx("td",{className:"px-6 py-4",children:P.storage}),i.jsx("td",{className:"px-6 py-4",children:P.gpu}),i.jsx("td",{className:"px-6 py-4",children:P.keyboard}),i.jsx("td",{className:"px-6 py-4",children:P.mouse}),i.jsxs("td",{className:"px-6 py-4 text-right flex items-center space-x-3",children:[i.jsx("button",{onClick:()=>w(P),className:"font-medium text-blue-600 dark:text-blue-500 hover:underline",children:"Edit"}),i.jsx("button",{onClick:()=>V(P.id),className:"font-medium text-red-600 dark:text-red-500 hover:underline",children:"Delete"})]})]},P.id))})]})}):i.jsxs("div",{className:"text-center py-10 px-6 bg-white dark:bg-gray-800 rounded-lg shadow",children:[i.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-white",children:"No Systems Found"}),i.jsxs("p",{className:"mt-1 text-sm text-blue-600 dark:text-gray-400",children:["There are no systems currently registered in ",o.name,"."]}),i.jsx("button",{onClick:_,className:"mt-4 px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors shadow-md text-sm font-medium",children:"Add the First System"})]})]}),i.jsx(BN,{isOpen:h,onClose:A,onSave:D,editingSystem:g})]}):i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white mb-6",children:"Computer Labs"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(P=>i.jsxs("div",{onClick:()=>u(P),className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 cursor-pointer hover:shadow-lg hover:scale-105 transition-transform duration-200",children:[i.jsx("h3",{className:"font-bold text-lg text-blue-900 dark:text-white",children:P.name}),i.jsxs("p",{className:"text-blue-600 dark:text-gray-400 mt-2",children:[P.systems.length," Systems"]})]},P.id))})]})},bl={Barista:[{name:"Espresso Shot",ingredients:[{name:"Coffee Beans",quantity:.018,unit:"kg"}]},{name:"Cappuccino",ingredients:[{name:"Coffee Beans",quantity:.018,unit:"kg"},{name:"Milk",quantity:.15,unit:"liters"}]}],Cooking:[{name:"Basic Omelette",ingredients:[{name:"Eggs",quantity:2,unit:"pieces"},{name:"Butter",quantity:.01,unit:"kg"},{name:"Salt",quantity:.001,unit:"kg"}]},{name:"Mirepoix Prep",ingredients:[{name:"Onion",quantity:2,unit:"pieces"},{name:"Carrot",quantity:1,unit:"pieces"},{name:"Celery",quantity:1,unit:"pieces"}]}],"Culinary Chef":[{name:"Vinaigrette",ingredients:[{name:"Olive Oil",quantity:.06,unit:"liters"},{name:"Vinegar",quantity:.02,unit:"liters"},{name:"Salt",quantity:.001,unit:"kg"}]}],Bakery:[{name:"Simple Bread Dough",ingredients:[{name:"Flour",quantity:.5,unit:"kg"},{name:"Water",quantity:.3,unit:"liters"},{name:"Yeast",quantity:.007,unit:"kg"},{name:"Salt",quantity:.01,unit:"kg"}]},{name:"Basic Cookie Dough",ingredients:[{name:"Flour",quantity:.25,unit:"kg"},{name:"Butter",quantity:.15,unit:"kg"},{name:"Sugar",quantity:.2,unit:"kg"},{name:"Eggs",quantity:1,unit:"pieces"}]}]},HN=a=>{var be;const[e,n]=z.useState(!1),[r,o]=z.useState(null),[u,h]=z.useState(null),[p,g]=z.useState(Object.keys(bl)[0]),[x,_]=z.useState(bl[p][0].name),[w,A]=z.useState(1),[D,V]=z.useState(!1),[M,P]=z.useState("item"),[ee,ue]=z.useState([]),[te,ne]=z.useState(""),[F,W]=z.useState(""),[C,N]=z.useState(1),[S,E]=z.useState("");z.useEffect(()=>{_(bl[p][0].name)},[p]),z.useEffect(()=>{if(u){const U=setTimeout(()=>h(null),5e3);return()=>clearTimeout(U)}},[u]);const j=z.useMemo(()=>a.inventory.filter(U=>U.type==="Kitchen"),[a.inventory]),k=z.useMemo(()=>bl[p].find(U=>U.name===x),[p,x]),I=z.useMemo(()=>{if(!k)return{canMake:!1,needed:[]};let U=!0;const de=k.ingredients.map(xe=>{const Te=j.find(vn=>vn.model.toLowerCase()===xe.name.toLowerCase()),Qe=xe.quantity*w,sn=(Te==null?void 0:Te.quantity)||0,an=sn>=Qe;return an||(U=!1),{name:xe.name,required:Qe.toFixed(3),available:sn,sufficient:an,unit:xe.unit}});return{canMake:U,needed:de}},[k,j,w]),me=()=>{o(null),n(!0)},ke=U=>{o(U),n(!0)},G=(U,de)=>{const xe=U.map(Te=>({...Te,type:"Kitchen",status:"In Stock",assignedTo:""}));de&&xe.length===1?a.onUpdateAsset({...xe[0],id:de}):a.onAddNewAsset(xe),n(!1),h({type:"success",text:`Material ${de?"updated":"added"} successfully.`})},oe=async()=>{if(!k||!I.canMake)return;const U=k.ingredients.map(de=>{const xe=j.find(Qe=>Qe.model.toLowerCase()===de.name.toLowerCase()),Te=xe.quantity-de.quantity*w;return{id:xe.id,newQuantity:Te}});await a.onUpdateKitchenStock(U),h({type:"success",text:`${w} student(s) worth of materials for ${x} used. Stock updated.`})},ye=U=>{ue([]),ne(""),W(""),N(1),E(""),U&&(P("item"),je(U,1)),V(!0)},je=(U,de)=>{ue(xe=>xe.find(Qe=>Qe.item.id===U.id)?xe.map(Qe=>Qe.item.id===U.id?{...Qe,qty:Qe.qty+de}:Qe):[...xe,{item:U,qty:de}])},Ue=(U,de)=>{ue(ee.map(xe=>xe.item.id===U?{...xe,qty:Math.max(.001,de)}:xe))},L=U=>{ue(ee.filter(de=>de.item.id!==U))},Y=()=>{if(!a.recipes||!F)return;const U=a.recipes.find(de=>de.id===F);U&&U.ingredients.forEach(de=>{const xe=de.name.toLowerCase().trim(),Te=j.find(Qe=>Qe.model.toLowerCase().trim()===xe);Te&&je(Te,de.quantity*C)})},he=async()=>{if(!a.onCreateSCRequest)return;if(ee.length===0){alert("Cart is empty");return}const U=a.employees.find(Te=>Te.email===a.currentUserEmail),xe={requesterName:U?`${U.firstName} ${U.lastName}`:a.currentUserEmail||"Chef",requesterEmail:a.currentUserEmail||"",department:"Kitchen",date:new Date().toISOString(),purpose:te||"Kitchen Restock",status:"Pending Account Manager",items:ee.map(Te=>({inventoryId:Te.item.id,name:Te.item.model,quantityRequested:Te.qty,unit:Te.item.unit||"units"}))};await a.onCreateSCRequest(xe),V(!1),h({type:"success",text:"Requisition submitted to Store Manager."})},ge=z.useMemo(()=>{if(!S)return j;const U=S.toLowerCase();return j.filter(de=>de.model.toLowerCase().includes(U))},[j,S]);return i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"The Chef's Academy"}),i.jsx("div",{className:"flex gap-2",children:a.onCreateSCRequest&&i.jsxs("button",{onClick:()=>ye(),className:"px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 font-medium flex items-center gap-2 shadow-sm",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})}),"New Store Requisition"]})})]}),u&&i.jsx("div",{className:`p-4 rounded-md text-sm ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Class Recipe Execution"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Course"}),i.jsx("select",{value:p,onChange:U=>g(U.target.value),className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5",children:Object.keys(bl).map(U=>i.jsx("option",{value:U,children:U},U))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Recipe"}),i.jsx("select",{value:x,onChange:U=>_(U.target.value),className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5",children:bl[p].map(U=>i.jsx("option",{value:U.name,children:U.name},U.name))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Students / Servings"}),i.jsx("input",{type:"number",min:"1",value:w,onChange:U=>A(Math.max(1,parseInt(U.target.value)||1)),className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5"})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Materials Required:"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:I.needed.map((U,de)=>i.jsxs("div",{className:`p-3 rounded border flex justify-between items-center ${U.sufficient?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:U.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:["Need: ",U.required," ",U.unit]})]}),i.jsxs("div",{className:`text-xs font-bold ${U.sufficient?"text-green-700":"text-red-700"}`,children:[U.sufficient?"Available":"Low Stock",i.jsx("br",{}),i.jsxs("span",{className:"font-normal text-gray-500",children:["Stock: ",U.available]})]})]},de))})]}),i.jsx("div",{className:"mt-6 flex justify-end",children:i.jsx("button",{onClick:oe,disabled:!I.canMake,className:"px-6 py-2.5 bg-blue-900 text-white rounded-lg hover:bg-blue-800 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium shadow-sm transition-colors",children:"Use Materials for Class"})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Kitchen Inventory"}),i.jsx("button",{onClick:me,className:"text-sm text-blue-900 hover:underline font-medium",children:"+ Add New Ingredient"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3",children:"Ingredient Name"}),i.jsx("th",{className:"px-6 py-3 text-center",children:"Current Stock"}),i.jsx("th",{className:"px-6 py-3 text-center",children:"Unit"}),i.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),i.jsx("tbody",{children:j.map(U=>i.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-purple-50 dark:hover:bg-gray-600 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white",children:U.model}),i.jsx("td",{className:"px-6 py-4 text-center font-semibold",children:U.quantity}),i.jsx("td",{className:"px-6 py-4 text-center",children:U.unit}),i.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[i.jsx("button",{onClick:()=>ye(U),className:"font-medium text-blue-900 hover:underline",children:"Request"}),i.jsx("button",{onClick:()=>ke(U),className:"font-medium text-teal-600 hover:underline",children:"Edit"}),i.jsx("button",{onClick:()=>a.onDeleteAsset(U.id),className:"font-medium text-red-600 hover:underline",children:"Delete"})]})]},U.id))})]})})]}),i.jsx(Ec,{isOpen:e,onClose:()=>n(!1),onSave:G,editingAsset:r,employees:a.employees,initialType:"Kitchen"}),D&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 p-4 overflow-y-auto flex justify-center items-start",onClick:()=>V(!1),children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl",onClick:U=>U.stopPropagation(),children:[i.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"New Store Requisition"}),i.jsx("button",{onClick:()=>V(!1),className:"text-slate-400 hover:text-slate-600",children:""})]}),i.jsxs("div",{className:"p-6 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex space-x-4 mb-4 border-b",children:[i.jsx("button",{onClick:()=>P("item"),className:`pb-2 text-sm font-medium ${M==="item"?"border-b-2 border-blue-900 text-blue-900":"text-slate-500"}`,children:"Select Items"}),i.jsx("button",{onClick:()=>P("dish"),className:`pb-2 text-sm font-medium ${M==="dish"?"border-b-2 border-blue-900 text-blue-900":"text-slate-500"}`,children:"Select by Dish"})]}),M==="item"?i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"text",placeholder:"Search ingredients...",className:"w-full border rounded px-3 py-2 text-sm mb-2",value:S,onChange:U=>E(U.target.value)}),i.jsx("div",{className:"h-64 overflow-y-auto border rounded",children:i.jsxs("table",{className:"w-full text-sm text-left",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-2",children:"Item"}),i.jsx("th",{className:"px-3 py-2",children:"Stock"}),i.jsx("th",{className:"px-3 py-2"})]})}),i.jsx("tbody",{children:ge.map(U=>i.jsxs("tr",{className:"hover:bg-purple-50 border-b transition-colors",children:[i.jsx("td",{className:"px-3 py-2",children:U.model}),i.jsxs("td",{className:"px-3 py-2",children:[U.quantity," ",U.unit]}),i.jsxs("td",{className:"px-3 py-2 text-right",children:[i.jsx("button",{onClick:()=>je(U,1),className:"text-xs bg-blue-50 text-blue-900 px-2 py-1 rounded hover:bg-blue-100",children:"Add"}),(U.quantity||0)===0&&i.jsx("span",{className:"block text-[10px] text-red-500",children:"Out of Stock"})]})]},U.id))})]})})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Select Dish"}),i.jsxs("select",{className:"w-full border rounded px-3 py-2 text-sm",value:F,onChange:U=>W(U.target.value),children:[i.jsx("option",{value:"",children:"-- Choose --"}),(be=a.recipes)==null?void 0:be.map(U=>i.jsx("option",{value:U.id,children:U.name},U.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Portions"}),i.jsx("input",{type:"number",min:"1",value:C,onChange:U=>N(parseInt(U.target.value)),className:"w-full border rounded px-3 py-2 text-sm"})]}),i.jsx("button",{onClick:Y,className:"w-full bg-blue-900 text-white py-2 rounded text-sm hover:bg-blue-800",children:"Add Ingredients to Cart"})]})]}),i.jsxs("div",{className:"flex flex-col h-full bg-slate-50 rounded border p-4",children:[i.jsx("h3",{className:"font-bold text-slate-800 mb-2",children:"Request Cart"}),i.jsx("div",{className:"flex-1 overflow-y-auto mb-4 bg-white rounded border p-2",children:ee.length===0?i.jsx("p",{className:"text-slate-400 text-center text-sm py-4",children:"Empty"}):i.jsx("ul",{className:"space-y-2",children:ee.map((U,de)=>i.jsxs("li",{className:"flex justify-between items-center text-sm border-b pb-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:U.item.model}),i.jsxs("span",{className:"text-xs text-slate-500 ml-1",children:["(",U.item.unit,")"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("input",{type:"number",min:"0.1",step:"0.1",value:U.qty,onChange:xe=>Ue(U.item.id,parseFloat(xe.target.value)),className:"w-16 border rounded px-1 py-0.5 text-center"}),i.jsx("button",{onClick:()=>L(U.item.id),className:"text-red-500 hover:text-red-700",children:""})]})]},de))})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Purpose / Note"}),i.jsx("textarea",{className:"w-full border rounded px-3 py-2 text-sm",rows:2,placeholder:"e.g. Class preparation",value:te,onChange:U=>ne(U.target.value)}),i.jsx("button",{onClick:he,className:"w-full mt-3 bg-green-600 text-white py-2 rounded font-medium hover:bg-green-700",children:"Submit Request"})]})]})]})]})})]})},GN=({inventory:a,employees:e,onAddNewAsset:n,onUpdateAsset:r,onDeleteAsset:o,onResignEmployee:u})=>{const[h,p]=z.useState(!1),[g,x]=z.useState(null),[_,w]=z.useState("All"),[A,D]=z.useState(""),[V,M]=z.useState(),P=z.useMemo(()=>a.filter(W=>W.type!=="Kitchen"),[a]),ee=z.useMemo(()=>{const W=_==="All"?P:P.filter(N=>N.status===_),C=A.trim().toLowerCase();return C?W.filter(N=>Object.values(N).some(S=>String(S).toLowerCase().includes(C))||Object.values(N.specs||{}).some(S=>String(S).toLowerCase().includes(C))):W},[_,P,A]),ue=["All","In Use","In Stock","Maintenance"],te=()=>{x(null),M(_==="All"?"In Use":_),p(!0)},ne=W=>{x(W),p(!0)},F=(W,C)=>{C&&W.length===1?r({...W[0],id:C}):n(W),p(!1),x(null)};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:"Master Inventory"}),i.jsx("p",{className:"text-sm text-blue-900 dark:text-gray-400",children:"A complete list of all company hardware (IT & General)."})]}),i.jsxs("button",{onClick:te,className:"px-4 py-2 bg-purple-900 text-white rounded-lg hover:bg-purple-800 transition-colors shadow-md text-sm font-medium flex items-center space-x-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),i.jsx("span",{children:"Assign New Asset"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-4",children:[i.jsx("div",{className:"flex bg-purple-50 dark:bg-gray-700 rounded-lg",children:ue.map(W=>i.jsxs("button",{onClick:()=>w(W),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${_===W?"bg-purple-900 text-white shadow":"text-blue-900 dark:text-gray-300 hover:bg-purple-200 dark:hover:bg-gray-600"}`,children:[W," (",W==="All"?P.length:P.filter(C=>C.status===W).length,")"]},W))}),i.jsxs("div",{className:"relative w-full md:w-auto",children:[i.jsx("input",{type:"text",placeholder:"Search anything...",value:A,onChange:W=>D(W.target.value),className:"w-full md:w-80 pl-10 pr-4 py-2 border border-slate-200 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-900 placeholder-slate-400 text-blue-900"}),i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx("svg",{className:"h-5 w-5 text-purple-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]}),i.jsx(yp,{inventory:ee,onEdit:ne,onResign:u,onDelete:o,view:_})]}),i.jsx(Ec,{isOpen:h,onClose:()=>p(!1),onSave:F,editingAsset:g,initialStatus:V,employees:e,isMultiAddMode:!g&&_!=="In Stock"&&_!=="Maintenance"})]})},$y=({assetType:a,inventory:e,employees:n,onAddNewAsset:r,onUpdateAsset:o,onDeleteAsset:u,onResignEmployee:h})=>{const[p,g]=z.useState(!1),[x,_]=z.useState(null),[w,A]=z.useState(""),D=z.useMemo(()=>e.filter(N=>N.type===a),[e,a]),V=z.useMemo(()=>{const N=w.trim().toLowerCase();return N?D.filter(S=>Object.values(S).some(E=>String(E).toLowerCase().includes(N))||Object.values(S.specs||{}).some(E=>String(E).toLowerCase().includes(N))):D},[D,w]),M=z.useMemo(()=>({total:D.length,inUse:D.filter(N=>N.status==="In Use").length,inStock:D.filter(N=>N.status==="In Stock").length,maintenance:D.filter(N=>N.status==="Maintenance").length}),[D]),P=()=>{_(null),g(!0)},ee=N=>{_(N),g(!0)},ue=(N,S)=>{const E=N.map(j=>({...j,type:a}));S&&E.length===1?o({...E[0],id:S}):r(E),g(!1),_(null)},te=({title:N,count:S,icon:E,colorClasses:j})=>i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 flex items-center space-x-4",children:[i.jsx("div",{className:`rounded-full p-3 ${j.bg}`,children:Nc.cloneElement(E,{className:`h-6 w-6 ${j.text}`})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-gray-400",children:N}),i.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:S})]})]}),ne=N=>i.jsx("svg",{...N,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),F=N=>i.jsx("svg",{...N,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),W=N=>i.jsx("svg",{...N,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),C=N=>i.jsxs("svg",{...N,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066 2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]});return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:[a," Inventory"]}),i.jsx("button",{onClick:P,className:"px-4 py-2 bg-purple-900 text-white rounded-lg hover:bg-purple-800 text-sm font-medium flex items-center space-x-2",children:i.jsxs("span",{children:["Add New ",a]})})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[i.jsx(te,{title:`Total ${a}s`,count:M.total,icon:i.jsx(ne,{}),colorClasses:{bg:"bg-purple-50 dark:bg-gray-700",text:"text-purple-800 dark:text-gray-300"}}),i.jsx(te,{title:"In Use",count:M.inUse,icon:i.jsx(F,{}),colorClasses:{bg:"bg-green-100 dark:bg-green-900",text:"text-green-600 dark:text-green-300"}}),i.jsx(te,{title:"In Stock",count:M.inStock,icon:i.jsx(W,{}),colorClasses:{bg:"bg-purple-100 dark:bg-purple-900",text:"text-purple-900 dark:text-blue-300"}}),i.jsx(te,{title:"Maintenance",count:M.maintenance,icon:i.jsx(C,{}),colorClasses:{bg:"bg-yellow-100 dark:bg-yellow-900",text:"text-yellow-600 dark:text-yellow-300"}})]}),i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"relative w-full md:w-auto",children:[i.jsx("input",{type:"text",placeholder:`Search ${a}s... (e.g., model, serial, user)`,value:w,onChange:N=>A(N.target.value),className:"w-full md:w-96 pl-10 pr-4 py-2 border border-slate-200 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-900 placeholder-slate-400 text-blue-900"}),i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx("svg",{className:"h-5 w-5 text-purple-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),i.jsx(yp,{inventory:V,onEdit:ee,onResign:h,onDelete:u,view:"All"}),i.jsx(Ec,{isOpen:p,onClose:()=>g(!1),onSave:ue,editingAsset:x,employees:n,initialType:a})]})},KN=a=>{const[e,n]=z.useState("overview"),r=a.currentUserEmail==="admin",o=z.useMemo(()=>({master:a.inventory.filter(h=>h.type!=="Kitchen").length,laptops:a.inventory.filter(h=>h.type==="Laptop").length,desktops:a.inventory.filter(h=>h.type==="Desktop").length,printers:a.inventory.filter(h=>h.type==="Printer").length,labs:a.labs.length,kitchen:a.inventory.filter(h=>h.type==="Kitchen").length}),[a.inventory,a.labs]),u=()=>{switch(e){case"master":return i.jsx(GN,{inventory:a.inventory,employees:a.employees,onAddNewAsset:a.onAddNewAsset,onUpdateAsset:a.onUpdateAsset,onDeleteAsset:a.onDeleteAsset,onResignEmployee:a.onResignEmployee});case"laptops":return i.jsx($y,{assetType:"Laptop",inventory:a.inventory,employees:a.employees,onAddNewAsset:a.onAddNewAsset,onUpdateAsset:a.onUpdateAsset,onDeleteAsset:a.onDeleteAsset,onResignEmployee:a.onResignEmployee});case"desktops":return i.jsx($y,{assetType:"Desktop",inventory:a.inventory,employees:a.employees,onAddNewAsset:a.onAddNewAsset,onUpdateAsset:a.onUpdateAsset,onDeleteAsset:a.onDeleteAsset,onResignEmployee:a.onResignEmployee});case"printers":return i.jsx(zN,{printers:a.inventory.filter(g=>g.type==="Printer"),toners:a.toners,employees:a.employees,onAddNewAsset:a.onAddNewAsset,onUpdateAsset:a.onUpdateAsset,onDeleteAsset:a.onDeleteAsset,onResignEmployee:a.onResignEmployee,onSaveTonerModel:a.onSaveTonerModel,onDeleteTonerModel:a.onDeleteTonerModel,onMarkTonerEmpty:a.onMarkTonerEmpty,onMarkTonerFilled:a.onMarkTonerFilled});case"labs":return i.jsx(FN,{labs:a.labs,onAddSystem:a.onAddSystem,onUpdateSystem:a.onUpdateSystem,onDeleteSystem:a.onDeleteSystem});case"kitchen":return i.jsx(HN,{inventory:a.inventory,employees:a.employees,onAddNewAsset:a.onAddNewAsset,onUpdateAsset:a.onUpdateAsset,onDeleteAsset:a.onDeleteAsset,onUpdateKitchenStock:a.onUpdateKitchenStock,recipes:a.recipes,onCreateSCRequest:a.onCreateSCRequest,currentUserEmail:a.currentUserEmail});case"overview":default:const h=[{id:"master",title:"Master Inventory",count:o.master,icon:i.jsx(cc,{}),onClick:()=>n("master"),color:"bg-purple-900"},{id:"laptops",title:"Laptops",count:o.laptops,icon:i.jsx(uc,{}),onClick:()=>n("laptops"),color:"bg-purple-800"},{id:"desktops",title:"Desktops",count:o.desktops,icon:i.jsx(uc,{}),onClick:()=>n("desktops"),color:"bg-purple-700"},{id:"printers",title:"Printers & Toners",count:o.printers,icon:i.jsx(Mv,{}),onClick:()=>n("printers"),color:"bg-purple-900"},{id:"labs",title:"Computer Labs",count:o.labs,icon:i.jsx(Dv,{}),onClick:()=>n("labs"),color:"bg-purple-800"},{id:"kitchen",title:"The Chef's Academy",count:o.kitchen,icon:i.jsx(pp,{}),onClick:()=>n("kitchen"),color:"bg-purple-900"}],p=r?h:h.filter(g=>{var x,_;return(_=(x=a.permissions)==null?void 0:x[g.id])==null?void 0:_.view});return i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white mb-6",children:"Inventory Overview"}),p.length>0?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(g=>i.jsx(PN,{...g},g.id))}):i.jsxs("div",{className:"text-center py-10 px-6 bg-white dark:bg-gray-800 rounded-lg shadow",children:[i.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-white",children:"No Inventory Access"}),i.jsx("p",{className:"mt-1 text-sm text-blue-900 dark:text-gray-400",children:"You do not have permission to view any inventory categories."})]})]})}};return i.jsxs("div",{className:"p-6",children:[e!=="overview"&&i.jsxs("button",{onClick:()=>n("overview"),className:"mb-6 flex items-center text-sm font-medium text-purple-800 dark:text-blue-400 hover:underline",children:[i.jsx(Ad,{className:"h-4 w-4 mr-1"}),"Back to Inventory Overview"]}),u()]})},QN=({users:a,onResignEmployee:e})=>{const[n,r]=z.useState(null),o=u=>{r(n===u?null:u)};return i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white mb-6",children:"Employees & Assigned Assets"}),i.jsx("div",{className:"space-y-4",children:a.map(u=>i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow transition-shadow duration-200",children:[i.jsxs("div",{className:"w-full flex justify-between items-center p-4 text-left",children:[i.jsxs("div",{onClick:()=>o(u.id),className:"cursor-pointer flex-grow",children:[i.jsx("p",{className:"font-semibold text-blue-900 dark:text-white",children:u.name}),i.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:u.email})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("span",{className:"text-sm px-2 py-1 bg-purple-100 text-purple-900 dark:bg-gray-700 rounded-full",children:[u.assets.length," Assets"]}),u.assets.length>0&&i.jsx("button",{onClick:()=>e(u.name),className:"font-medium text-yellow-600 dark:text-yellow-500 hover:underline text-sm px-2 py-1 rounded-md hover:bg-yellow-100 dark:hover:bg-gray-700","aria-label":`Resign all assets from ${u.name}`,children:"Resign"}),i.jsx("button",{onClick:()=>o(u.id),"aria-label":"Toggle asset details",className:"p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 text-blue-600 dark:text-gray-400 transition-transform ${n===u.id?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),n===u.id&&i.jsx("div",{className:"border-t border-slate-200 dark:border-gray-700 p-4",children:u.assets.length>0?i.jsx("ul",{className:"space-y-2",children:u.assets.map(h=>i.jsxs("li",{className:"flex justify-between items-center text-sm",children:[i.jsxs("div",{children:[i.jsxs("span",{className:"font-medium text-blue-900 dark:text-gray-200",children:[h.type,":"]}),i.jsx("span",{className:"text-blue-600 dark:text-gray-400 ml-2",children:h.model})]}),i.jsx("span",{className:"text-xs font-mono bg-purple-50 text-purple-900 dark:bg-gray-700 px-2 py-1 rounded",children:h.id})]},h.id))}):i.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400 text-center",children:"No assets assigned to this user."})})]},u.id))})]})},Yy={mrfNumber:"",demandNumber:"",description:""},$N=({isOpen:a,onClose:e,onSave:n,editingMRF:r})=>{const[o,u]=z.useState(Yy);z.useEffect(()=>{a&&u(r?{mrfNumber:r.mrfNumber,demandNumber:r.demandNumber,description:r.description}:Yy)},[r,a]);const h=_=>{const{name:w,value:A}=_.target;u(D=>({...D,[w]:A}))},p=_=>{_.preventDefault(),n(o,r==null?void 0:r.id)};if(!a)return null;const g=r?"Edit MRF":"Generate New MRF",x=r?"Update the details for this MRF.":"Enter the details for the new Material Requisition Form.";return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 p-4 overflow-y-auto flex justify-center items-start","aria-modal":"true",role:"dialog",onClick:e,children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg",onClick:_=>_.stopPropagation(),children:[i.jsxs("form",{onSubmit:p,children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:g}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:x})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"mrfNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"MRF Number"}),i.jsx("input",{type:"text",id:"mrfNumber",name:"mrfNumber",value:o.mrfNumber,onChange:h,required:!0,className:"mt-1 block w-full input-style"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"demandNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Demand Number"}),i.jsx("input",{type:"text",id:"demandNumber",name:"demandNumber",value:o.demandNumber,onChange:h,required:!0,className:"mt-1 block w-full input-style"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),i.jsx("textarea",{id:"description",name:"description",value:o.description,onChange:h,required:!0,rows:4,className:"mt-1 block w-full input-style"})]})]}),i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600 flex justify-end space-x-3 flex-shrink-0",children:[i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 btn-secondary",children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 btn-primary",children:"Save MRF"})]})]}),i.jsx("style",{children:`
                    .input-style { background-color: #F9FAFB; border: 1px solid #D1D5DB; border-radius: 0.5rem; padding: 0.75rem 1rem; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); transition: all 0.2s ease-in-out; width: 100%; }
                    .dark .input-style { background-color: #374151; border-color: #4B5563; color: #F9FAFB; }
                    .input-style:focus { outline: none; --tw-ring-color: #3B82F6; box-shadow: 0 0 0 2px var(--tw-ring-color); }
                    .btn-primary { padding: 0.5rem 1rem; font-size: 0.875rem; font-weight: 500; color: white; background-color: #2563EB; border: 1px solid transparent; border-radius: 0.5rem; }
                    .btn-primary:hover { background-color: #1D4ED8; }
                    .btn-secondary { padding: 0.5rem 1rem; font-size: 0.875rem; font-weight: 500; color: #374151; background-color: white; border: 1px solid #D1D5DB; border-radius: 0.5rem; }
                    .dark .btn-secondary { color: #D1D5DB; background-color: #374151; border-color: #4B5563; }
                    .btn-secondary:hover { background-color: #F9FAFB; }
                    .dark .btn-secondary:hover { background-color: #4B5563; }
                `})]})})},YN=({mrfs:a,onAddNewMRF:e,onUpdateMRF:n,onDeleteMRF:r})=>{const[o,u]=z.useState(!1),[h,p]=z.useState(null),g=()=>{p(null),u(!0)},x=M=>{p(M),u(!0)},_=()=>{u(!1),p(null)},w=(M,P)=>{if(P){const ee=a.find(te=>te.id===P);if(!ee)return;const ue={...ee,...M};n(ue)}else{const ee={mrfNumber:M.mrfNumber,demandNumber:M.demandNumber,description:M.description,date:new Date().toISOString(),status:"Pending"};e(ee)}_()},A=(M,P)=>{n({...M,status:P})},D=M=>{window.confirm("Are you sure you want to delete this MRF? This action cannot be undone.")&&r(M)},V=M=>{switch(M){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"Proceed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:"MRF Management"}),i.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:"Track and manage all Material Requisition Forms."})]}),i.jsxs("button",{onClick:g,className:"px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors shadow-md text-sm font-medium flex items-center space-x-2","aria-label":"Generate New MRF",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),i.jsx("span",{children:"Generate MRF"})]})]}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm text-left text-blue-600 dark:text-gray-400",children:[i.jsx("thead",{className:"text-xs text-blue-900 uppercase bg-purple-50 dark:bg-gray-700 dark:text-gray-400",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"px-6 py-3",children:"MRF No."}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Demand No."}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Date"}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Description"}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),i.jsx("th",{scope:"col",className:"px-6 py-3",children:i.jsx("span",{className:"sr-only",children:"Actions"})})]})}),i.jsx("tbody",{children:a.length>0?a.map(M=>i.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700 hover:bg-purple-50 dark:hover:bg-gray-600",children:[i.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-blue-900 dark:text-white whitespace-nowrap",children:M.mrfNumber}),i.jsx("td",{className:"px-6 py-4 text-blue-800",children:M.demandNumber}),i.jsx("td",{className:"px-6 py-4 text-blue-800",children:new Date(M.date).toLocaleDateString()}),i.jsx("td",{className:"px-6 py-4 text-blue-800",children:i.jsx("div",{className:"max-w-xs overflow-hidden whitespace-nowrap text-ellipsis",title:M.description,children:M.description||"-"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("select",{value:M.status,onChange:P=>A(M,P.target.value),className:`border-none rounded-md text-xs font-semibold p-1 ${V(M.status)} focus:ring-2 focus:ring-blue-900`,"aria-label":`Status for MRF ${M.mrfNumber}`,children:[i.jsx("option",{value:"Pending",children:"Pending"}),i.jsx("option",{value:"Proceed",children:"Proceed"})]})}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsxs("div",{className:"flex items-center justify-end space-x-4",children:[i.jsx("button",{onClick:()=>x(M),className:"font-medium text-blue-600 dark:text-blue-500 hover:underline",children:"Edit"}),i.jsx("button",{onClick:()=>D(M.id),className:"font-medium text-red-600 dark:text-red-500 hover:underline",children:"Delete"})]})})]},M.id)):i.jsx("tr",{children:i.jsxs("td",{colSpan:6,className:"text-center py-10 px-6",children:[i.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-white",children:"No MRFs Found"}),i.jsx("p",{className:"mt-1 text-sm text-blue-600 dark:text-gray-400",children:"There are no Material Requisition Forms yet."}),i.jsx("button",{onClick:g,className:"mt-4 px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors shadow-md text-sm font-medium",children:"Generate the First MRF"})]})})})]})})]}),i.jsx($N,{isOpen:o,onClose:_,onSave:w,editingMRF:h})]})},XN=({inventory:a,employees:e})=>{const[n,r]=z.useState("user"),o=()=>{let x=[];const _=new Date().toISOString().slice(0,10);n==="user"?x=a.filter(D=>D.assignedTo).map(D=>{const V=e.find(M=>`${M.firstName} ${M.lastName}`===D.assignedTo);return{"Employee Name":D.assignedTo,Department:(V==null?void 0:V.department)||D.department||"-",Designation:(V==null?void 0:V.designation)||D.designation||"-","Asset Type":D.type,Brand:D.brand||"-",Model:D.model,"Serial Number":D.serialNumber||"-","Issue Date":D.issueDate||"-",Status:D.status}}).sort((D,V)=>D["Employee Name"].localeCompare(V["Employee Name"])):n==="equipment"?x=a.map(D=>({Type:D.type,Brand:D.brand||"-",Model:D.model,"Serial Number":D.serialNumber||"-",Status:D.status,"Assigned To":D.assignedTo||"Unassigned",Department:D.department||"-"})).sort((D,V)=>D.Type.localeCompare(V.Type)):n==="department"&&(x=a.filter(D=>D.department).map(D=>({Department:D.department,"Assigned Employee":D.assignedTo||"Unassigned","Asset Type":D.type,Model:D.model,"Serial Number":D.serialNumber||"-",Status:D.status})).sort((D,V)=>(D.Department||"").localeCompare(V.Department||"")));const w=XLSX.utils.json_to_sheet(x),A=XLSX.utils.book_new();XLSX.utils.book_append_sheet(A,w,"Report"),XLSX.writeFile(A,`Inventory_${n}_report_${_}.xlsx`)},u=()=>{window.print()},h=()=>{const x=new Map;a.filter(w=>w.assignedTo).forEach(w=>{if(!x.has(w.assignedTo)){const A=e.find(D=>`${D.firstName} ${D.lastName}`===w.assignedTo);x.set(w.assignedTo,{emp:A,assets:[]})}x.get(w.assignedTo).assets.push(w)});const _=Array.from(x.entries()).sort((w,A)=>w[0].localeCompare(A[0]));return i.jsxs("div",{className:"space-y-8",children:[_.map(([w,{emp:A,assets:D}])=>i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-slate-200 dark:border-gray-700 overflow-hidden break-inside-avoid",children:[i.jsxs("div",{className:"bg-slate-50 dark:bg-gray-700 px-6 py-4 border-b border-slate-200 dark:border-gray-600 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-blue-900 dark:text-white",children:w}),i.jsxs("p",{className:"text-sm text-blue-600 dark:text-gray-300",children:[(A==null?void 0:A.designation)||D[0].designation||"N/A"," - ",i.jsx("span",{className:"font-medium text-teal-600 dark:text-teal-400",children:(A==null?void 0:A.department)||D[0].department||"N/A"})]})]}),i.jsxs("div",{className:"text-sm font-medium bg-purple-100 text-purple-900 px-3 py-1 rounded-full",children:[D.length," Assets"]})]}),i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-gray-700",children:[i.jsx("thead",{className:"bg-white dark:bg-gray-800",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Type"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Model"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Serial"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Issue Date"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-gray-700",children:D.map(V=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-3 text-sm text-blue-900 dark:text-white font-medium",children:V.type}),i.jsxs("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300",children:[V.brand," ",V.model]}),i.jsx("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300 font-mono",children:V.serialNumber||"-"}),i.jsx("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300",children:V.issueDate||"-"})]},V.id))})]})]},w)),_.length===0&&i.jsx("p",{className:"text-center text-blue-600",children:"No assigned assets found."})]})},p=()=>{const x=new Map;a.forEach(w=>{x.has(w.type)||x.set(w.type,[]),x.get(w.type).push(w)});const _=Array.from(x.entries()).sort((w,A)=>w[0].localeCompare(A[0]));return i.jsx("div",{className:"space-y-8",children:_.map(([w,A])=>i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-slate-200 dark:border-gray-700 overflow-hidden break-inside-avoid",children:[i.jsxs("div",{className:"bg-slate-50 dark:bg-gray-700 px-6 py-4 border-b border-slate-200 dark:border-gray-600 flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-bold text-blue-900 dark:text-white",children:w}),i.jsxs("div",{className:"text-sm font-medium bg-purple-100 text-purple-900 px-3 py-1 rounded-full",children:[A.length," Total"]})]}),i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-gray-700",children:[i.jsx("thead",{className:"bg-white dark:bg-gray-800",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Model"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Serial"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Assigned To"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-gray-700",children:A.map(D=>i.jsxs("tr",{children:[i.jsxs("td",{className:"px-6 py-3 text-sm text-blue-900 dark:text-white",children:[D.brand," ",D.model]}),i.jsx("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300 font-mono",children:D.serialNumber||"-"}),i.jsx("td",{className:"px-6 py-3 text-sm",children:i.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${D.status==="In Use"?"bg-green-100 text-green-800":D.status==="In Stock"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:D.status})}),i.jsx("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300",children:D.assignedTo||"-"})]},D.id))})]})]},w))})},g=()=>{const x=new Map;a.forEach(w=>{const A=w.department||"Unassigned";x.has(A)||x.set(A,[]),x.get(A).push(w)});const _=Array.from(x.entries()).sort((w,A)=>w[0]==="Unassigned"?1:A[0]==="Unassigned"?-1:w[0].localeCompare(A[0]));return i.jsx("div",{className:"space-y-8",children:_.map(([w,A])=>i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-slate-200 dark:border-gray-700 overflow-hidden break-inside-avoid",children:[i.jsxs("div",{className:"bg-slate-50 dark:bg-gray-700 px-6 py-4 border-b border-slate-200 dark:border-gray-600 flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-bold text-blue-900 dark:text-white",children:w}),i.jsxs("div",{className:"text-sm font-medium bg-orange-100 text-orange-800 px-3 py-1 rounded-full",children:[A.length," Assets"]})]}),i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-gray-700",children:[i.jsx("thead",{className:"bg-white dark:bg-gray-800",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Assigned To"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Type"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Model"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Serial"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-gray-700",children:A.map(D=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-3 text-sm text-blue-900 dark:text-white font-medium",children:D.assignedTo||"-"}),i.jsx("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300",children:D.type}),i.jsxs("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300",children:[D.brand," ",D.model]}),i.jsx("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300 font-mono",children:D.serialNumber||"-"})]},D.id))})]})]},w))})};return i.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4 no-print",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:"Inventory Reports"}),i.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:"Generate and export detailed inventory reports."})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsx("div",{className:"relative",children:i.jsxs("select",{value:n,onChange:x=>r(x.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-slate-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md shadow-sm bg-white dark:bg-gray-700 dark:border-gray-600 text-blue-900 dark:text-white",children:[i.jsx("option",{value:"user",children:"User-wise Report"}),i.jsx("option",{value:"equipment",children:"Equipment-wise Report"}),i.jsx("option",{value:"department",children:"Department-wise Report"})]})}),i.jsx("button",{onClick:u,className:"px-4 py-2 bg-white dark:bg-gray-700 border border-slate-300 dark:border-gray-600 rounded-lg text-blue-900 dark:text-gray-200 hover:bg-slate-50 dark:hover:bg-gray-600 text-sm font-medium transition-colors shadow-sm",children:"Print"}),i.jsxs("button",{onClick:o,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium transition-colors shadow-md flex items-center gap-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Excel"]})]})]}),i.jsxs("div",{className:"report-content",children:[i.jsxs("div",{className:"hidden print-block mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-center text-blue-900",children:"MASBOT ERP Inventory Report"}),i.jsxs("p",{className:"text-center text-lg mt-2 capitalize text-blue-800",children:[n,"-wise Breakdown"]}),i.jsx("p",{className:"text-center text-sm text-blue-600",children:new Date().toLocaleDateString()})]}),n==="user"&&h(),n==="equipment"&&p(),n==="department"&&g()]}),i.jsx("style",{children:`
                @media print {
                    .no-print { display: none !important; }
                    .print-block { display: block !important; }
                    body { background-color: white; }
                    .report-content { width: 100%; }
                    /* Ensure colors print */
                    * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
                }
                .print-block { display: none; }
            `})]})},WN=a=>{const e=a.currentUserEmail==="admin",n=z.useMemo(()=>{if(e)return"assets";if(!a.permissions)return null;if(gp.some(_=>{var w,A;return(A=(w=a.permissions)==null?void 0:w[_.id])==null?void 0:A.view}))return"assets";const x=jd.find(_=>{var w,A;return _.id!=="assets"&&((A=(w=a.permissions)==null?void 0:w[_.id])==null?void 0:A.view)});return(x==null?void 0:x.id)||null},[e,a.permissions]),[r,o]=z.useState(n);z.useEffect(()=>{!r&&n&&o(n)},[n,r]);const u=z.useMemo(()=>{const g=new Map;return a.employees.forEach(x=>{g.set(x.email,{id:x.id,name:`${x.firstName} ${x.lastName}`,email:x.email,assets:[]})}),a.inventory.forEach(x=>{if(x.assignedTo){const _=Array.from(g.values()).find(w=>w.name===x.assignedTo);_&&_.assets.push({id:x.id,type:x.type,model:x.model})}}),Array.from(g.values())},[a.employees,a.inventory]);z.useMemo(()=>a.inventory.filter(g=>g.type==="Printer"),[a.inventory]);const h=()=>{if(!r)return i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Access Denied"}),i.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"You do not have permission to view any pages in this module. Please contact an administrator."})]});switch(r){case"assets":return i.jsx(KN,{inventory:a.inventory,onAddNewAsset:a.onAddNewAsset,onUpdateAsset:a.onUpdateAsset,onDeleteAsset:a.onDeleteAsset,onResignEmployee:a.onResignEmployee,employees:a.employees,labs:a.labs,toners:a.toners,onAddSystem:a.onAddSystem,onUpdateSystem:a.onUpdateSystem,onDeleteSystem:a.onDeleteSystem,onSaveTonerModel:a.onSaveTonerModel,onDeleteTonerModel:a.onDeleteTonerModel,onMarkTonerEmpty:a.onMarkTonerEmpty,onMarkTonerFilled:a.onMarkTonerFilled,onUpdateKitchenStock:a.onUpdateKitchenStock,currentUserEmail:a.currentUserEmail,permissions:a.permissions,recipes:a.recipes,onCreateSCRequest:a.onCreateSCRequest});case"users":return i.jsx(QN,{users:u,onResignEmployee:a.onResignEmployee});case"mrf":return i.jsx(YN,{mrfs:a.mrfs,onAddNewMRF:a.onAddNewMRF,onUpdateMRF:a.onUpdateMRF,onDeleteMRF:a.onDeleteMRF});case"reports":return i.jsx(XN,{inventory:a.inventory,employees:a.employees});case"settings":return i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Settings"}),i.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Settings page is under construction."})]});default:return null}},p={assets:"Inventory",users:"Employees & Assigned Assets",labs:"Computer Labs",printers:"Printers & Toners",mrf:"MRF Management",reports:"Inventory Reports",settings:"Settings"};return i.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[i.jsx(MN,{currentPage:r,onNavigate:o,permissions:a.permissions,currentUserEmail:a.currentUserEmail,employees:a.employees}),i.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsxs("header",{className:"bg-purple-900 dark:bg-purple-950 border-b border-purple-800 dark:border-purple-900 h-16 flex-shrink-0 flex items-center justify-between px-6",children:[i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("button",{onClick:a.onBack,className:"flex items-center gap-2 text-sm font-medium text-purple-200 hover:text-white",children:[i.jsx(xp,{className:"w-5 h-5"}),i.jsx("span",{children:"Home"})]})}),i.jsx("h1",{className:"text-lg font-bold text-white",children:r?p[r]:"Inventory Management"}),i.jsxs("button",{onClick:a.onLogout,className:"flex items-center gap-2 bg-purple-800 text-white px-4 py-2 rounded-lg shadow-sm hover:bg-purple-700 transition-colors","aria-label":"Logout",children:[i.jsx(Ul,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})]}),i.jsx("div",{className:"flex-1 overflow-x-hidden overflow-y-auto",children:h()})]})]})},JN=({activePage:a,setActivePage:e,currentUserEmail:n})=>{const r=n==="admin";return i.jsxs("aside",{className:"w-64 bg-white border-r border-slate-200 flex flex-col flex-shrink-0",children:[i.jsx("div",{className:"h-16 flex items-center justify-center border-b border-slate-200 px-4",children:i.jsx(Vl,{className:"h-8 w-auto"})}),i.jsxs("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:[i.jsx("div",{className:"text-xs font-semibold text-blue-900 uppercase tracking-wider mb-4 px-2",children:"Supply Chain"}),Ov.map(o=>{if(o.id==="sc_approvals"&&!r)return null;const u=o.icon,h=a===o.id;return i.jsxs("button",{onClick:()=>e(o.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors text-sm font-medium ${h?"bg-purple-50 text-purple-900":"text-blue-900 hover:bg-purple-50"}`,children:[i.jsx(u,{className:`w-5 h-5 ${h?"text-purple-900":"text-purple-400"}`}),i.jsx("span",{children:o.label})]},o.id)})]}),i.jsx("div",{className:"p-4 border-t border-slate-200",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-purple-100 flex items-center justify-center text-purple-900 font-bold text-xs",children:n.charAt(0).toUpperCase()}),i.jsxs("div",{className:"overflow-hidden",children:[i.jsx("p",{className:"text-sm font-medium text-blue-900 truncate",children:n}),i.jsx("p",{className:"text-xs text-blue-800 truncate",children:r?"CEO / Admin":"User"})]})]})})]})},ZN=({inventory:a,currentUserEmail:e,employees:n,onCreateRequest:r,recipes:o=[]})=>{var S;const[u,h]=z.useState("item"),[p,g]=z.useState([]),[x,_]=z.useState(""),[w,A]=z.useState(""),[D,V]=z.useState(null),[M,P]=z.useState(""),[ee,ue]=z.useState(1),te=z.useMemo(()=>a.filter(E=>E.type==="Kitchen"&&E.model.toLowerCase().includes(w.toLowerCase())),[a,w]),ne=(E,j=1)=>{g(k=>k.find(me=>me.item.id===E.id)?k.map(me=>me.item.id===E.id?{...me,qty:me.qty+j}:me):[...k,{item:E,qty:j}])},F=(E,j)=>{g(p.map(k=>k.item.id===E?{...k,qty:Math.max(.001,j)}:k))},W=E=>{g(p.filter(j=>j.item.id!==E))},C=()=>{if(!M)return;const E=o.find(I=>I.id===M);if(!E)return;let j=0,k=[];E.ingredients.forEach(I=>{const me=a.find(ke=>ke.model.toLowerCase()===I.name.toLowerCase()&&ke.type==="Kitchen");if(me){const ke=I.quantity*ee;ne(me,ke),j++}else k.push(I.name)}),k.length>0?V({type:"error",text:`Added available ingredients, but could not find: ${k.join(", ")}`}):j>0&&V({type:"success",text:`Ingredients for ${ee} portions of ${E.name} added to cart.`})},N=async()=>{if(p.length===0){V({type:"error",text:"Please add items to your request."});return}if(!x.trim()){V({type:"error",text:"Please specify a purpose or recipe for this request."});return}const E=n.find(k=>k.email===e),j={requesterName:E?`${E.firstName} ${E.lastName}`:e,requesterEmail:e,department:(E==null?void 0:E.department)||"Kitchen",date:new Date().toISOString(),purpose:x,status:"Pending Account Manager",items:p.map(k=>({inventoryId:k.item.id,name:k.item.model,quantityRequested:k.qty,unit:k.item.unit||"units"}))};await r(j),V({type:"success",text:"Request submitted successfully to Account Manager for approval."}),g([]),_("")};return i.jsx("div",{className:"max-w-6xl mx-auto space-y-6",children:i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[i.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-4",children:"New Stock Requisition"}),i.jsxs("div",{className:"flex space-x-4 mb-6 border-b border-slate-200",children:[i.jsx("button",{onClick:()=>h("item"),className:`pb-2 px-4 text-sm font-medium border-b-2 transition-colors ${u==="item"?"border-blue-900 text-blue-900":"border-transparent text-blue-800 hover:text-blue-900"}`,children:"Item Selection"}),i.jsx("button",{onClick:()=>h("dish"),className:`pb-2 px-4 text-sm font-medium border-b-2 transition-colors ${u==="dish"?"border-blue-900 text-blue-900":"border-transparent text-blue-800 hover:text-blue-900"}`,children:"Dish Selection"})]}),D&&i.jsx("div",{className:`p-4 mb-4 rounded-md text-sm ${D.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:D.text}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx("div",{children:u==="item"?i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"text",placeholder:"Search ingredients...",className:"w-full px-4 py-2 border rounded-lg mb-4 focus:ring-2 focus:ring-blue-900 focus:outline-none placeholder-blue-300 text-blue-900",value:w,onChange:E=>A(E.target.value)}),i.jsx("div",{className:"h-96 overflow-y-auto border rounded-lg",children:i.jsxs("table",{className:"w-full text-sm text-left",children:[i.jsx("thead",{className:"bg-purple-50 text-blue-900 font-medium sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2",children:"Item"}),i.jsx("th",{className:"px-4 py-2",children:"Available"}),i.jsx("th",{className:"px-4 py-2",children:"Action"})]})}),i.jsx("tbody",{className:"divide-y",children:te.map(E=>(p.some(j=>j.item.id===E.id),i.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[i.jsx("td",{className:"px-4 py-2 font-medium text-blue-900",children:E.model}),i.jsxs("td",{className:"px-4 py-2 text-blue-900",children:[E.quantity," ",E.unit]}),i.jsx("td",{className:"px-4 py-2",children:i.jsx("button",{onClick:()=>ne(E),disabled:E.quantity===0,className:"text-xs bg-purple-900 text-white px-2 py-1 rounded hover:bg-purple-800 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"})})]},E.id)))})]})})]}):i.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-100 h-full",children:[i.jsx("h3",{className:"font-bold text-blue-900 mb-4",children:"Select a Dish"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Recipe / Dish"}),i.jsxs("select",{value:M,onChange:E=>P(E.target.value),className:"w-full border-blue-200 rounded-md focus:ring-blue-900 text-blue-900",children:[i.jsx("option",{value:"",children:"-- Select Dish --"}),o.map(E=>i.jsx("option",{value:E.id,children:E.name},E.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Number of Portions"}),i.jsx("input",{type:"number",min:"1",value:ee,onChange:E=>ue(Math.max(1,parseInt(E.target.value)||1)),className:"w-full border-blue-200 rounded-md focus:ring-blue-900 text-blue-900"})]}),i.jsx("button",{onClick:C,disabled:!M,className:"w-full bg-blue-900 text-white py-2 rounded-md hover:bg-blue-800 disabled:bg-blue-300 transition-colors",children:"Add Ingredients to Cart"}),M&&i.jsxs("div",{className:"mt-4 p-4 bg-white rounded border border-blue-100",children:[i.jsx("h4",{className:"text-xs font-bold text-blue-900 uppercase mb-2",children:"Ingredients per portion:"}),i.jsx("ul",{className:"text-xs text-blue-900 space-y-1",children:(S=o.find(E=>E.id===M))==null?void 0:S.ingredients.map((E,j)=>i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:E.name}),i.jsxs("span",{children:[E.quantity," ",E.unit]})]},j))})]})]})]})}),i.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200 flex flex-col",children:[i.jsx("h3",{className:"font-bold text-blue-900 mb-4",children:"Request Cart"}),i.jsx("div",{className:"flex-1 overflow-y-auto mb-4",children:p.length===0?i.jsx("p",{className:"text-blue-900 text-center py-10 italic",children:"No items selected."}):i.jsx("ul",{className:"space-y-2",children:p.map((E,j)=>i.jsxs("li",{className:"bg-white p-3 rounded shadow-sm flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-blue-900",children:E.item.model}),i.jsxs("p",{className:"text-xs text-blue-900",children:["Unit: ",E.item.unit]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",min:"0.001",step:"0.001",value:E.qty,onChange:k=>F(E.item.id,parseFloat(k.target.value)),className:"w-20 px-2 py-1 border rounded text-sm text-center text-blue-900"}),i.jsx("button",{onClick:()=>W(E.item.id),className:"text-red-500 hover:text-red-700",children:""})]})]},j))})}),i.jsxs("div",{className:"mt-auto",children:[i.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Purpose / Note"}),i.jsx("textarea",{value:x,onChange:E=>_(E.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-900 focus:outline-none mb-4 text-blue-900 placeholder-blue-300",rows:2,placeholder:"e.g. For Advanced Baking Class - Croissants"}),i.jsx("button",{onClick:N,className:"w-full bg-blue-900 text-white py-2 rounded-lg font-medium hover:bg-blue-800 transition-colors shadow-sm",children:"Submit Request"})]})]})]})]})})},eE=({requests:a,purchaseOrders:e,onAction:n,onPOAction:r})=>{const[o,u]=z.useState("requisitions"),h=a.filter(g=>g.status==="Pending Account Manager"),p=e.filter(g=>g.status==="Pending Account Manager");return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("div",{className:"flex justify-between items-center mb-6",children:i.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Account Manager Approvals"})}),i.jsx("div",{className:"border-b border-slate-200 mb-6",children:i.jsxs("nav",{className:"-mb-px flex space-x-8",children:[i.jsxs("button",{onClick:()=>u("requisitions"),className:`whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm ${o==="requisitions"?"border-purple-900 text-purple-900":"border-transparent text-blue-900 hover:text-blue-800 hover:border-slate-300"}`,children:["Requisitions (",h.length,")"]}),i.jsxs("button",{onClick:()=>u("pos"),className:`whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm ${o==="pos"?"border-purple-900 text-purple-900":"border-transparent text-blue-900 hover:text-blue-800 hover:border-slate-300"}`,children:["Purchase Orders (",p.length,")"]})]})}),o==="requisitions"&&i.jsx(i.Fragment,{children:h.length===0?i.jsx("div",{className:"bg-white p-12 rounded-lg shadow-sm text-center",children:i.jsx("p",{className:"text-blue-900 text-lg",children:"No pending requisitions awaiting approval."})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map(g=>i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-l-4 border-l-orange-400",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg text-blue-900",children:g.requesterName}),i.jsxs("p",{className:"text-sm text-blue-900",children:[g.department,"  ",new Date(g.date).toLocaleDateString()]})]}),i.jsx("span",{className:"bg-orange-100 text-orange-800 text-xs font-bold px-2 py-1 rounded uppercase tracking-wide",children:g.status})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Purpose:"}),i.jsxs("p",{className:"text-sm text-blue-900 bg-purple-50 p-2 rounded italic",children:['"',g.purpose,'"']})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Items Requested:"}),i.jsx("ul",{className:"text-sm space-y-1",children:g.items.map((x,_)=>i.jsxs("li",{className:"flex justify-between border-b border-slate-100 pb-1 last:border-0 hover:bg-purple-50 transition-colors text-blue-900",children:[i.jsx("span",{children:x.name}),i.jsxs("span",{className:"font-mono text-blue-900",children:[x.quantityRequested," ",x.unit]})]},_))})]}),i.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100",children:[i.jsx("button",{onClick:()=>n(g.id,"Approve"),className:"flex-1 bg-green-600 text-white py-2 rounded font-medium hover:bg-green-700 transition-colors",children:"Approve"}),i.jsx("button",{onClick:()=>{const x=prompt("Enter rejection reason:");x&&n(g.id,"Reject",x)},className:"flex-1 bg-red-50 text-red-600 border border-red-200 py-2 rounded font-medium hover:bg-red-100 transition-colors",children:"Reject"})]})]},g.id))})}),o==="pos"&&i.jsx(i.Fragment,{children:p.length===0?i.jsx("div",{className:"bg-white p-12 rounded-lg shadow-sm text-center",children:i.jsx("p",{className:"text-blue-900 text-lg",children:"No pending Purchase Orders awaiting approval."})}):i.jsx("div",{className:"grid grid-cols-1 gap-6",children:p.map(g=>i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-l-4 border-l-purple-500",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"font-bold text-lg text-blue-900",children:["PO #",g.poNumber]}),i.jsxs("p",{className:"text-sm text-blue-900",children:["Vendor: ",g.vendorName,"  ",new Date(g.date).toLocaleDateString()]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:["PKR ",g.totalAmount.toLocaleString()]}),i.jsx("span",{className:"bg-purple-100 text-purple-800 text-xs font-bold px-2 py-1 rounded uppercase tracking-wide",children:g.status})]})]}),i.jsx("div",{className:"mb-6",children:i.jsxs("table",{className:"w-full text-sm text-left",children:[i.jsx("thead",{className:"bg-purple-50 text-blue-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2",children:"Item"}),i.jsx("th",{className:"px-4 py-2 text-center",children:"Qty"}),i.jsx("th",{className:"px-4 py-2 text-right",children:"Unit Price"}),i.jsx("th",{className:"px-4 py-2 text-right",children:"Total"})]})}),i.jsx("tbody",{className:"divide-y border-t border-b",children:g.items.map((x,_)=>i.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[i.jsx("td",{className:"px-4 py-2 text-blue-900",children:x.itemName}),i.jsxs("td",{className:"px-4 py-2 text-center text-blue-900",children:[x.quantity," ",x.unit]}),i.jsx("td",{className:"px-4 py-2 text-right text-blue-900",children:x.unitPrice}),i.jsx("td",{className:"px-4 py-2 text-right text-blue-900",children:x.totalPrice})]},_))})]})}),i.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100 justify-end",children:[i.jsx("button",{onClick:()=>r(g.id,"Reject"),className:"px-6 py-2 bg-red-50 text-red-600 border border-red-200 rounded font-medium hover:bg-red-100 transition-colors",children:"Reject PO"}),i.jsx("button",{onClick:()=>r(g.id,"Approve"),className:"px-6 py-2 bg-green-600 text-white rounded font-medium hover:bg-green-700 transition-colors",children:"Approve PO"})]})]},g.id))})})]})},tE=({requests:a,purchaseRequests:e,purchaseOrders:n,inventory:r,employees:o,onIssue:u,onForwardToPurchase:h,onCreatePurchaseRequest:p,onCreateSCRequest:g,onGRN:x,currentUserEmail:_,onAddNewAsset:w,onUpdateAsset:A,onDeleteAsset:D,recipes:V=[]})=>{const[M,P]=z.useState("inventory"),[ee,ue]=z.useState(""),[te,ne]=z.useState(!1),[F,W]=z.useState([]),[C,N]=z.useState(""),[S,E]=z.useState(""),[j,k]=z.useState(!1),[I,me]=z.useState({name:"",brand:"",quantity:1,unit:"units",description:""}),[ke,G]=z.useState(!1),[oe,ye]=z.useState(null),[je,Ue]=z.useState({grnNumber:"",remarks:""}),[L,Y]=z.useState(!1),[he,ge]=z.useState(null),be=z.useMemo(()=>r.filter(X=>X.type==="Kitchen"),[r]),U=5,de=z.useMemo(()=>{const X=ee.toLowerCase();return be.filter(Le=>Le.model.toLowerCase().includes(X)||Le.itemName&&Le.itemName.toLowerCase().includes(X)||Le.itemCode&&Le.itemCode.toLowerCase().includes(X)||Le.type.toLowerCase().includes(X))},[be,ee]),xe=z.useMemo(()=>{if(!S)return be;const X=S.toLowerCase();return be.filter(Le=>Le.model.toLowerCase().includes(X))},[be,S]),Te=be.filter(X=>(X.quantity||0)<=U),Qe=a.filter(X=>X.status==="Pending Store"),sn=n.filter(X=>X.status==="Approved"),an=z.useMemo(()=>V.map(X=>{let Le=1/0,yt="None";return X.ingredients.forEach(vt=>{const At=r.find(Dn=>Dn.model.toLowerCase()===vt.name.toLowerCase()&&Dn.type==="Kitchen"),Ns=(At==null?void 0:At.quantity)||0;if(vt.quantity>0){const Dn=Math.floor(Ns/vt.quantity);Dn<Le&&(Le=Dn,yt=vt.name)}}),{...X,maxPortions:Le===1/0?0:Le,limitingIngredient:yt}}),[V,r]),vn=X=>{W([]),N(""),E(""),k(!1),me({name:"",brand:"",quantity:1,unit:"units",description:""}),X&&Xt(X,10),ne(!0)},Xt=(X,Le)=>{W(yt=>yt.find(At=>At.item.id===X.id)?yt.map(At=>At.item.id===X.id?{...At,qty:At.qty+Le}:At):[...yt,{item:X,qty:Le}])},Vs=()=>{if(!I.name){alert("Item Name is required");return}const X=`NEW-${Date.now()}`,Le=I.brand?`${I.name} (${I.brand})`:I.name,yt={id:X,model:Le,type:"Kitchen",status:"In Stock",assignedTo:"",quantity:0,unit:I.unit,others:I.description};Xt(yt,I.quantity),me({name:"",brand:"",quantity:1,unit:"units",description:""}),alert("Custom item added to cart.")},rs=X=>{W(F.filter(Le=>Le.item.id!==X))},Us=async()=>{if(!g)return;if(F.length===0){alert("Cart is empty");return}const X=o.find(vt=>vt.email===_),yt={requesterName:X?`${X.firstName} ${X.lastName}`:_||"Store Manager",requesterEmail:_||"",department:"Store",date:new Date().toISOString(),purpose:C||"Store Stock Replenishment",status:"Pending Account Manager",items:F.map(vt=>({inventoryId:vt.item.id.startsWith("NEW-")?"":vt.item.id,name:vt.item.model,quantityRequested:vt.qty,unit:vt.item.unit||"units"}))};await g(yt),ne(!1),alert("Store Requisition (MRF) submitted to Account Manager.")},da=X=>{ye(X),Ue({grnNumber:`GRN-${Date.now()}`,remarks:"All items received in good condition."}),G(!0)},Et=async()=>{oe&&(await x(oe.id,je),G(!1),ye(null))},jt=()=>{ge(null),Y(!0)},is=X=>{ge(X),Y(!0)},qr=(X,Le)=>{Le?A({...X[0],id:Le}):w(X),Y(!1)},qs=({title:X,count:Le,colorClass:yt,icon:vt})=>i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm flex items-center border border-slate-200",children:[i.jsx("div",{className:`p-3 rounded-full ${yt} mr-4`,children:vt}),i.jsxs("div",{children:[i.jsx("p",{className:"text-blue-900 text-sm font-medium",children:X}),i.jsx("p",{className:"text-2xl font-bold text-blue-900",children:Le})]})]});return i.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Store Manager Dashboard"}),i.jsx("div",{className:"flex gap-2",children:i.jsxs("button",{onClick:()=>vn(),className:"px-4 py-2 bg-purple-900 text-white rounded-lg hover:bg-purple-800 font-medium flex items-center gap-2 shadow-sm",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})}),"New Store Requisition (MRF)"]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(qs,{title:"Total Inventory Items",count:be.length,colorClass:"bg-purple-100 text-purple-900",icon:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),i.jsx(qs,{title:"Low Stock Alerts",count:Te.length,colorClass:"bg-red-100 text-red-600",icon:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),i.jsx(qs,{title:"Pending Requisitions",count:Qe.length,colorClass:"bg-yellow-100 text-yellow-600",icon:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden min-h-[500px]",children:[i.jsxs("div",{className:"border-b border-slate-200 flex flex-wrap",children:[i.jsx("button",{onClick:()=>P("inventory"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${M==="inventory"?"border-purple-900 text-purple-900 bg-purple-50":"border-transparent text-blue-900 hover:text-blue-800"}`,children:"Inventory & Stock"}),i.jsx("button",{onClick:()=>P("dishAvailability"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${M==="dishAvailability"?"border-purple-900 text-purple-900 bg-purple-50":"border-transparent text-blue-900 hover:text-blue-800"}`,children:"Dish Availability"}),i.jsx("button",{onClick:()=>P("fulfillment"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${M==="fulfillment"?"border-purple-900 text-purple-900 bg-purple-50":"border-transparent text-blue-900 hover:text-blue-800"}`,children:"Fulfillment (Chef Requests)"}),i.jsx("button",{onClick:()=>P("receiving"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${M==="receiving"?"border-purple-900 text-purple-900 bg-purple-50":"border-transparent text-blue-900 hover:text-blue-800"}`,children:"Receiving (GRN)"}),i.jsx("button",{onClick:()=>P("purchaseHistory"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${M==="purchaseHistory"?"border-purple-900 text-purple-900 bg-purple-50":"border-transparent text-blue-900 hover:text-blue-800"}`,children:"Purchase History"})]}),i.jsxs("div",{className:"p-6",children:[M==="inventory"&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("input",{type:"text",placeholder:"Search inventory (Code, Name, Category)...",className:"w-full md:w-96 px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-900 focus:outline-none placeholder-slate-400 text-blue-900",value:ee,onChange:X=>ue(X.target.value)}),i.jsx("button",{onClick:jt,className:"px-4 py-2 bg-purple-900 text-white rounded-lg hover:bg-purple-800 text-sm font-medium flex items-center gap-2",children:i.jsx("span",{children:"+ Add Item"})})]}),i.jsx("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:i.jsxs("table",{className:"min-w-full text-xs text-left divide-y divide-slate-200",children:[i.jsx("thead",{className:"bg-purple-50 text-blue-900 font-semibold whitespace-nowrap",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Item Code"}),i.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Item Name"}),i.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Category"}),i.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Sub-Category"}),i.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Brand"}),i.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Model"}),i.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Serial Number"}),i.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Quantity"}),i.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"UOM"}),i.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Purchase Date"}),i.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Cost"}),i.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Asset Life"}),i.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Location"}),i.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Condition"}),i.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Remarks"}),i.jsx("th",{className:"px-4 py-3 text-center sticky right-0 bg-purple-50 shadow-sm",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100 whitespace-nowrap",children:de.map(X=>i.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[i.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:X.itemCode||"-"}),i.jsx("td",{className:"px-4 py-2 border-r border-slate-100 font-medium text-blue-900",children:X.itemName||X.model}),i.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:X.type}),i.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:X.subCategory||"-"}),i.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:X.brand||"-"}),i.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:X.model}),i.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:X.serialNumber||"-"}),i.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-center font-bold text-blue-900",children:X.quantity||0}),i.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:X.unit||"-"}),i.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:X.purchaseDate||"-"}),i.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:X.cost||"-"}),i.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:X.assetLife||"-"}),i.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:X.location||"-"}),i.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:X.condition||"-"}),i.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900 italic truncate max-w-xs",children:X.remarks||X.others||"-"}),i.jsxs("td",{className:"px-4 py-2 text-center sticky right-0 bg-white shadow-sm flex gap-2 justify-center",children:[i.jsx("button",{onClick:()=>is(X),className:"text-purple-900 hover:text-purple-950 font-medium",children:"Edit"}),i.jsx("button",{onClick:()=>D(X.id),className:"text-red-600 hover:text-red-800 font-medium",children:"Del"}),i.jsx("button",{onClick:()=>vn(X),className:"text-purple-900 hover:text-purple-950 font-medium",title:"Request Stock (MRF)",children:"+Stock"})]})]},X.id))})]})})]}),M==="dishAvailability"&&i.jsx("div",{children:i.jsx("div",{className:"bg-white border border-slate-200 rounded-lg overflow-hidden",children:i.jsxs("table",{className:"w-full text-sm text-left divide-y divide-slate-200",children:[i.jsx("thead",{className:"bg-purple-50 text-blue-900 font-semibold uppercase",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-4",children:"Dish Name"}),i.jsx("th",{className:"px-6 py-4 text-center",children:"Max Portions Available"}),i.jsx("th",{className:"px-6 py-4",children:"Limiting Ingredient (Bottleneck)"})]})}),i.jsxs("tbody",{className:"divide-y divide-slate-100",children:[an.map(X=>i.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 font-medium text-blue-900",children:X.name}),i.jsx("td",{className:"px-6 py-4 text-center",children:i.jsx("span",{className:`px-3 py-1 rounded-full font-bold ${X.maxPortions>10?"bg-green-100 text-green-800":X.maxPortions>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:X.maxPortions})}),i.jsx("td",{className:"px-6 py-4 text-red-600 font-medium",children:X.limitingIngredient})]},X.id)),an.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"text-center py-8 text-blue-900",children:"No recipes defined."})})]})]})})}),M==="fulfillment"&&i.jsx("div",{children:Qe.length===0?i.jsx("p",{className:"text-center text-blue-900 py-10",children:"No pending requests from chefs."}):i.jsx("div",{className:"space-y-6",children:Qe.map(X=>i.jsxs("div",{className:"bg-purple-50 p-6 rounded-lg border border-l-4 border-l-purple-900 flex flex-col md:flex-row gap-6",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h3",{className:"font-bold text-lg text-blue-900",children:X.requesterName}),i.jsx("span",{className:"text-xs bg-purple-100 text-purple-900 px-2 py-0.5 rounded font-bold uppercase",children:"Ready to Issue"})]}),i.jsxs("p",{className:"text-sm text-blue-900 mb-4",children:[X.department,"  Requested: ",new Date(X.date).toLocaleString()]}),i.jsx("div",{className:"bg-white p-4 rounded-lg border border-slate-200 mb-4",children:i.jsxs("p",{className:"text-sm text-blue-900",children:[i.jsx("span",{className:"font-bold text-blue-900 block mb-1",children:"Purpose / Reason:"}),X.purpose]})}),i.jsx("div",{className:"bg-white p-4 rounded-lg border border-slate-200",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-left text-blue-900",children:[i.jsx("th",{className:"pb-2",children:"Item"}),i.jsx("th",{className:"pb-2 text-right",children:"Qty to Issue"})]})}),i.jsx("tbody",{className:"divide-y border-t border-slate-100",children:X.items.map((Le,yt)=>i.jsxs("tr",{children:[i.jsx("td",{className:"py-2 font-medium text-blue-900",children:Le.name}),i.jsxs("td",{className:"py-2 text-right font-mono text-blue-900",children:[Le.quantityRequested," ",Le.unit]})]},yt))})]})})]}),i.jsxs("div",{className:"md:w-48 flex flex-col justify-center gap-3",children:[i.jsx("button",{onClick:()=>{window.confirm("Confirm issue? This will deduct items from the main inventory.")&&u(X.id)},className:"w-full bg-purple-900 text-white py-2 rounded-lg font-bold hover:bg-purple-800 transition-colors shadow-sm text-sm",children:"Issue Items"}),i.jsx("button",{onClick:()=>h(X.id),className:"w-full bg-orange-100 text-orange-700 border border-orange-200 py-2 rounded-lg font-bold hover:bg-orange-200 transition-colors shadow-sm text-sm",children:"Forward to Purchase"})]})]},X.id))})}),M==="receiving"&&i.jsx("div",{children:sn.length===0?i.jsx("p",{className:"text-center text-blue-900 py-10",children:"No pending purchase orders to receive."}):i.jsx("div",{className:"space-y-6",children:sn.map(X=>i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-l-4 border-l-green-500",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"font-bold text-lg text-blue-900",children:["PO #",X.poNumber]}),i.jsxs("p",{className:"text-sm text-blue-900",children:["Vendor: ",X.vendorName]})]}),i.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-bold px-2 py-1 rounded uppercase",children:"Approved - Awaiting Delivery"})]}),i.jsx("div",{className:"mb-4",children:i.jsxs("table",{className:"w-full text-sm text-left",children:[i.jsx("thead",{className:"bg-purple-50 text-blue-900",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2",children:"Item"}),i.jsx("th",{className:"px-4 py-2 text-center",children:"Qty to Receive"})]})}),i.jsx("tbody",{className:"divide-y border-t border-b border-slate-100",children:X.items.map((Le,yt)=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-2 text-blue-900",children:Le.itemName}),i.jsxs("td",{className:"px-4 py-2 text-center font-bold text-blue-900",children:[Le.quantity," ",Le.unit]})]},yt))})]})}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:()=>da(X),className:"bg-green-600 text-white px-6 py-2 rounded font-medium hover:bg-green-700 transition-colors",children:"Generate GRN & Add Stock"})})]},X.id))})}),M==="purchaseHistory"&&i.jsx("div",{children:i.jsxs("table",{className:"w-full text-sm text-left",children:[i.jsx("thead",{className:"bg-purple-50 text-blue-900 font-medium",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3",children:"Date"}),i.jsx("th",{className:"px-4 py-3",children:"Item"}),i.jsx("th",{className:"px-4 py-3",children:"Qty Requested"}),i.jsx("th",{className:"px-4 py-3",children:"Priority"}),i.jsx("th",{className:"px-4 py-3",children:"Status"}),i.jsx("th",{className:"px-4 py-3",children:"Notes"})]})}),i.jsxs("tbody",{className:"divide-y divide-slate-100",children:[e.map(X=>i.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[i.jsx("td",{className:"px-4 py-3 text-blue-900",children:new Date(X.date).toLocaleDateString()}),i.jsx("td",{className:"px-4 py-3 font-medium text-blue-900",children:X.itemName}),i.jsxs("td",{className:"px-4 py-3 text-blue-900",children:[X.quantityRequested," ",X.unit]}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${X.priority==="High"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:X.priority})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded text-xs font-bold uppercase",children:X.status})}),i.jsx("td",{className:"px-4 py-3 text-blue-900 italic max-w-xs truncate",children:X.notes||"-"})]},X.id)),e.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"text-center py-8 text-blue-900",children:"No purchase requests yet."})})]})]})})]})]}),te&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:()=>ne(!1),children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",onClick:X=>X.stopPropagation(),children:[i.jsxs("div",{className:"p-6 border-b flex justify-between items-center border-slate-200",children:[i.jsx("h2",{className:"text-xl font-bold text-blue-900",children:"Create Store Requisition (MRF)"}),i.jsx("button",{onClick:()=>ne(!1),className:"text-slate-400 hover:text-slate-600 text-2xl",children:""})]}),i.jsxs("div",{className:"p-6 grid grid-cols-1 lg:grid-cols-2 gap-6 flex-1 overflow-hidden",children:[i.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[i.jsxs("div",{className:"flex mb-4 border-b border-slate-200",children:[i.jsx("button",{className:`flex-1 pb-2 text-sm font-medium ${j?"text-blue-900 hover:text-purple-800":"border-b-2 border-purple-900 text-purple-900"}`,onClick:()=>k(!1),children:"Select from Inventory"}),i.jsx("button",{className:`flex-1 pb-2 text-sm font-medium ${j?"border-b-2 border-purple-900 text-purple-900":"text-blue-900 hover:text-purple-800"}`,onClick:()=>k(!0),children:"Add Custom Item"})]}),j?i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsx("h3",{className:"font-bold text-blue-900 mb-4",children:"New / Custom Item Details"}),i.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto pr-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Item Name"}),i.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-900 focus:outline-none placeholder-slate-400 text-blue-900",placeholder:"e.g. Special Coffee Beans",value:I.name,onChange:X=>me({...I,name:X.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Brand (Optional)"}),i.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-900 focus:outline-none placeholder-slate-400 text-blue-900",placeholder:"e.g. Nestl",value:I.brand,onChange:X=>me({...I,brand:X.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Quantity"}),i.jsx("input",{type:"number",min:"1",className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-900 focus:outline-none placeholder-slate-400 text-blue-900",value:I.quantity,onChange:X=>me({...I,quantity:parseFloat(X.target.value)||0})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Unit"}),i.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-900 focus:outline-none placeholder-slate-400 text-blue-900",placeholder:"kg, pcs, boxes",value:I.unit,onChange:X=>me({...I,unit:X.target.value})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Description / Notes"}),i.jsx("textarea",{className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-900 focus:outline-none placeholder-slate-400 text-blue-900",rows:3,placeholder:"Specific details about the item...",value:I.description,onChange:X=>me({...I,description:X.target.value})})]}),i.jsx("button",{onClick:Vs,className:"w-full bg-purple-900 text-white py-2 rounded-lg font-medium hover:bg-purple-800 transition-colors",children:"Add to Cart"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-bold text-blue-900 mb-2",children:"Inventory Items"}),i.jsx("input",{type:"text",placeholder:"Search items...",className:"w-full px-3 py-2 border border-slate-200 rounded-lg mb-3 text-sm focus:ring-2 focus:ring-purple-900 focus:outline-none placeholder-slate-400 text-blue-900",value:S,onChange:X=>E(X.target.value)}),i.jsx("div",{className:"flex-1 overflow-y-auto border border-slate-200 rounded-lg",children:i.jsxs("table",{className:"w-full text-sm text-left",children:[i.jsx("thead",{className:"bg-purple-50 text-blue-900 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-2",children:"Item"}),i.jsx("th",{className:"px-3 py-2",children:"Current Stock"}),i.jsx("th",{className:"px-3 py-2"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100",children:xe.map(X=>i.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[i.jsx("td",{className:"px-3 py-2 font-medium text-blue-900",children:X.model}),i.jsxs("td",{className:`px-3 py-2 ${X.quantity<=U?"text-red-600 font-bold":"text-blue-900"}`,children:[X.quantity," ",X.unit]}),i.jsx("td",{className:"px-3 py-2 text-right",children:i.jsx("button",{onClick:()=>Xt(X,10),className:"text-xs bg-purple-900 text-white px-2 py-1 rounded hover:bg-purple-800",children:"Add"})})]},X.id))})]})})]})]}),i.jsxs("div",{className:"flex flex-col h-full bg-purple-50 rounded border border-purple-200 p-4 overflow-hidden",children:[i.jsx("h3",{className:"font-bold text-blue-900 mb-2",children:"Requisition Cart"}),i.jsx("div",{className:"flex-1 overflow-y-auto mb-4 bg-white rounded border border-slate-200 p-2",children:F.length===0?i.jsx("p",{className:"text-slate-400 text-center text-sm py-10",children:"Cart is empty"}):i.jsx("ul",{className:"space-y-2",children:F.map((X,Le)=>i.jsxs("li",{className:"bg-white p-2 rounded border border-slate-100 shadow-sm flex justify-between items-center text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-blue-900",children:X.item.model}),i.jsxs("p",{className:"text-xs text-blue-900",children:["Unit: ",X.item.unit]}),X.item.id.startsWith("NEW-")&&i.jsx("span",{className:"text-[10px] bg-purple-100 text-purple-800 px-1 rounded",children:"New Item"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",min:"1",value:X.qty,onChange:yt=>{const vt=parseInt(yt.target.value)||0;W(At=>At.map((Ns,Dn)=>Dn===Le?{...Ns,qty:vt}:Ns))},className:"w-16 px-1 py-1 border border-slate-200 rounded text-center text-blue-900"}),i.jsx("button",{onClick:()=>rs(X.item.id),className:"text-red-500 hover:text-red-700",children:""})]})]},Le))})}),i.jsxs("div",{className:"mt-auto",children:[i.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Purpose / Note"}),i.jsx("textarea",{value:C,onChange:X=>N(X.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-purple-900 focus:outline-none mb-4 placeholder-slate-400 text-blue-900",rows:2,placeholder:"e.g. Monthly Restock, Low Inventory..."}),i.jsx("button",{onClick:Us,className:"w-full bg-green-600 text-white py-2 rounded-lg font-medium hover:bg-green-700 transition-colors shadow-sm",children:"Submit Requisition"})]})]})]})]})}),ke&&oe&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:()=>G(!1),children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg p-6",onClick:X=>X.stopPropagation(),children:[i.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-2",children:"Generate Goods Received Note (GRN)"}),i.jsxs("p",{className:"text-blue-900 text-sm mb-4",children:["Receive items for PO #",oe.poNumber]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"GRN Number"}),i.jsx("input",{type:"text",value:je.grnNumber,onChange:X=>Ue({...je,grnNumber:X.target.value}),className:"w-full border rounded p-2 input-style",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Receipt Remarks / Quality Check"}),i.jsx("textarea",{value:je.remarks,onChange:X=>Ue({...je,remarks:X.target.value}),className:"w-full border rounded p-2 input-style",rows:3,required:!0})]}),i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 p-3 rounded text-sm text-yellow-800",children:[i.jsx("strong",{children:"Warning:"}),' Clicking "Confirm Receipt" will automatically add the PO quantities to your inventory stock levels.']}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[i.jsx("button",{type:"button",onClick:()=>G(!1),className:"px-4 py-2 border rounded text-blue-900 hover:bg-slate-50 border-slate-300",children:"Cancel"}),i.jsx("button",{onClick:Et,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Confirm Receipt & Add Stock"})]})]})]})}),i.jsx(Ec,{isOpen:L,onClose:()=>Y(!1),onSave:qr,editingAsset:he,employees:o,initialType:"Kitchen"})]})},nE=({requests:a,currentUserEmail:e})=>{const n=a.filter(o=>o.requesterEmail===e||e==="admin"),r=o=>{switch(o){case"Pending Account Manager":return"bg-yellow-100 text-yellow-800";case"Pending Store":return"bg-blue-100 text-blue-800";case"Issued":return"bg-green-100 text-green-800";case"Rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-6",children:"My Requests"}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:i.jsxs("table",{className:"w-full text-sm text-left",children:[i.jsx("thead",{className:"bg-purple-50 text-blue-900 font-bold uppercase",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-4",children:"Date"}),i.jsx("th",{className:"px-6 py-4",children:"Purpose"}),i.jsx("th",{className:"px-6 py-4",children:"Items Count"}),i.jsx("th",{className:"px-6 py-4",children:"Status"}),i.jsx("th",{className:"px-6 py-4",children:"Remarks"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200",children:n.length>0?n.map(o=>i.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 text-blue-900",children:new Date(o.date).toLocaleDateString()}),i.jsx("td",{className:"px-6 py-4 font-medium text-blue-900",children:o.purpose}),i.jsx("td",{className:"px-6 py-4 text-blue-900",children:o.items.length}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${r(o.status)}`,children:o.status})}),i.jsx("td",{className:"px-6 py-4 text-blue-900 italic",children:o.status==="Rejected"?o.rejectionReason:o.status==="Issued"?`Issued on ${new Date(o.issuedDate).toLocaleDateString()}`:"-"})]},o.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-blue-900",children:"No requests found."})})})]})})]})},sE=({requests:a,purchaseRequests:e,vendors:n,purchaseOrders:r,onCreatePO:o,onUpdatePO:u,onDeletePO:h,currentUserEmail:p})=>{const[g,x]=z.useState("pending"),[_,w]=z.useState(null),[A,D]=z.useState({vendorId:"",price:0}),[V,M]=z.useState(!1),[P,ee]=z.useState(null),[ue,te]=z.useState({vendorId:"",totalAmount:0,status:"Pending Account Manager"}),ne=a.filter(S=>S.status==="Forwarded to Purchase"),F=async()=>{if(!_||!A.vendorId)return;const S=n.find(k=>k.id===A.vendorId);if(!S)return;const E=A.price,j={poNumber:`PO-${Date.now().toString().slice(-6)}`,originalRequestId:_.id,vendorId:S.id,vendorName:S.name,date:new Date().toISOString(),status:"Pending Account Manager",generatedBy:p,totalAmount:E,items:_.items.map(k=>({itemName:k.name,quantity:k.quantityRequested,unit:k.unit,unitPrice:E/_.items.length,totalPrice:E/_.items.length,inventoryId:k.inventoryId}))};await o(j),w(null),D({vendorId:"",price:0}),alert("Purchase Order created and sent to Account Manager for approval.")},W=S=>{ee(S),te({vendorId:S.vendorId,totalAmount:S.totalAmount,status:S.status}),M(!0)},C=async S=>{if(S.preventDefault(),!P||!u)return;const E=n.find(j=>j.id===ue.vendorId);await u(P.id,{vendorId:ue.vendorId,vendorName:(E==null?void 0:E.name)||P.vendorName,totalAmount:ue.totalAmount,status:ue.status}),M(!1),ee(null)},N=S=>{switch(S){case"Pending Account Manager":return"bg-yellow-100 text-yellow-800";case"Approved":return"bg-blue-100 text-blue-800";case"Received":return"bg-green-100 text-green-800";case"Rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return i.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Purchase Department"})}),i.jsx("div",{className:"border-b border-slate-200",children:i.jsxs("nav",{className:"-mb-px flex space-x-8",children:[i.jsxs("button",{onClick:()=>x("pending"),className:`whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm ${g==="pending"?"border-blue-900 text-blue-900":"border-transparent text-blue-900 hover:text-blue-800 hover:border-slate-300"}`,children:["Process Requests (",ne.length,")"]}),i.jsx("button",{onClick:()=>x("history"),className:`whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm ${g==="history"?"border-blue-900 text-blue-900":"border-transparent text-blue-900 hover:text-blue-800 hover:border-slate-300"}`,children:"Purchase History"})]})}),g==="pending"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Requests to Process"}),ne.length===0?i.jsx("div",{className:"bg-white p-8 rounded-lg shadow-sm text-center text-blue-900",children:"No requests forwarded from Store."}):i.jsx("div",{className:"space-y-4",children:ne.map(S=>i.jsxs("div",{className:`bg-white p-4 rounded-lg shadow-sm border-2 cursor-pointer transition-all ${(_==null?void 0:_.id)===S.id?"border-blue-900 ring-2 ring-blue-100":"border-transparent hover:border-slate-300"}`,onClick:()=>w(S),children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h4",{className:"font-bold text-blue-900",children:S.purpose}),i.jsx("span",{className:"text-xs font-mono text-blue-900",children:new Date(S.date).toLocaleDateString()})]}),i.jsxs("p",{className:"text-sm text-blue-900 mb-2",children:["From: ",S.requesterName," (",S.department,")"]}),i.jsxs("div",{className:"bg-purple-50 p-2 rounded text-xs text-blue-900",children:[i.jsx("strong",{children:"Items:"})," ",S.items.map(E=>`${E.name} (${E.quantityRequested} ${E.unit})`).join(", ")]})]},S.id))})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm h-fit sticky top-6",children:[i.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-4 border-b pb-2",children:"Create Purchase Order"}),_?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Selected Request"}),i.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-100 rounded text-sm text-blue-900",children:[_.purpose," (",_.items.length," items)"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Date"}),i.jsx("input",{type:"text",value:new Date().toLocaleDateString(),disabled:!0,className:"w-full bg-slate-100 border rounded p-2 text-blue-900 cursor-not-allowed"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Select Vendor"}),i.jsxs("select",{value:A.vendorId,onChange:S=>D({...A,vendorId:S.target.value}),className:"w-full border rounded p-2 focus:ring-blue-900 text-blue-900",children:[i.jsx("option",{value:"",children:"-- Choose Vendor --"}),n.map(S=>i.jsx("option",{value:S.id,children:S.name},S.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Total Estimated Cost (PKR)"}),i.jsx("input",{type:"number",min:"0",value:A.price,onChange:S=>D({...A,price:parseFloat(S.target.value)}),className:"w-full border rounded p-2 focus:ring-blue-900 text-blue-900"})]}),i.jsx("button",{onClick:F,disabled:!A.vendorId||A.price<=0,className:"w-full bg-blue-900 text-white py-2 rounded font-medium hover:bg-blue-800 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors",children:"Generate PO for Approval"})]}):i.jsx("p",{className:"text-blue-900 text-sm text-center py-10",children:"Select a request from the list to generate a Purchase Order."})]})]}),g==="history"&&i.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:i.jsxs("table",{className:"w-full text-sm text-left",children:[i.jsx("thead",{className:"bg-purple-50 text-blue-900 uppercase font-bold",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-4",children:"Date"}),i.jsx("th",{className:"px-6 py-4",children:"PO Number"}),i.jsx("th",{className:"px-6 py-4",children:"Vendor"}),i.jsx("th",{className:"px-6 py-4",children:"Items"}),i.jsx("th",{className:"px-6 py-4 text-right",children:"Total Amount"}),i.jsx("th",{className:"px-6 py-4",children:"Status"}),i.jsx("th",{className:"px-6 py-4",children:"GRN Info"}),i.jsx("th",{className:"px-6 py-4 text-center",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200",children:r.length>0?r.map(S=>{var E;return i.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 text-blue-900",children:new Date(S.date).toLocaleDateString()}),i.jsx("td",{className:"px-6 py-4 font-mono font-medium text-blue-900",children:S.poNumber}),i.jsx("td",{className:"px-6 py-4 text-blue-900",children:S.vendorName}),i.jsx("td",{className:"px-6 py-4 text-blue-900",children:i.jsxs("div",{className:"max-w-xs truncate",title:S.items.map(j=>j.itemName).join(", "),children:[S.items.length," items (",(E=S.items[0])==null?void 0:E.itemName,"...)"]})}),i.jsxs("td",{className:"px-6 py-4 text-right font-bold text-blue-900",children:["PKR ",S.totalAmount.toLocaleString()]}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${N(S.status)}`,children:S.status})}),i.jsx("td",{className:"px-6 py-4 text-xs text-blue-900",children:S.grnNumber?i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-green-700",children:S.grnNumber}),i.jsx("p",{children:new Date(S.grnDate).toLocaleDateString()})]}):"-"}),i.jsx("td",{className:"px-6 py-4 text-center",children:i.jsxs("div",{className:"flex justify-center gap-2",children:[i.jsx("button",{onClick:()=>W(S),className:"text-blue-900 hover:text-blue-950 text-xs font-medium",title:"Edit PO",disabled:S.status==="Received",children:"Edit"}),i.jsx("span",{className:"text-blue-300",children:"|"}),i.jsx("button",{onClick:()=>h&&h(S.id),className:"text-red-600 hover:text-red-800 text-xs font-medium",title:"Delete PO",children:"Delete"})]})})]},S.id)}):i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"text-center py-10 text-blue-900",children:"No purchase history available."})})})]})}),V&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:()=>M(!1),children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",onClick:S=>S.stopPropagation(),children:[i.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-4 border-b pb-2",children:"Edit Purchase Order"}),i.jsxs("form",{onSubmit:C,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Vendor"}),i.jsx("select",{value:ue.vendorId,onChange:S=>te({...ue,vendorId:S.target.value}),className:"w-full border rounded p-2 focus:ring-blue-900 text-blue-900",children:n.map(S=>i.jsx("option",{value:S.id,children:S.name},S.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Total Amount (PKR)"}),i.jsx("input",{type:"number",min:"0",value:ue.totalAmount,onChange:S=>te({...ue,totalAmount:parseFloat(S.target.value)}),className:"w-full border rounded p-2 focus:ring-blue-900 text-blue-900"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Status"}),i.jsxs("select",{value:ue.status,onChange:S=>te({...ue,status:S.target.value}),className:"w-full border rounded p-2 focus:ring-blue-900 text-blue-900",children:[i.jsx("option",{value:"Pending Account Manager",children:"Pending Account Manager"}),i.jsx("option",{value:"Approved",children:"Approved"}),i.jsx("option",{value:"Rejected",children:"Rejected"}),i.jsx("option",{value:"Received",children:"Received"})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>M(!1),className:"px-4 py-2 border rounded text-blue-900 hover:bg-slate-50",children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-900 text-white rounded hover:bg-blue-800",children:"Save Changes"})]})]})]})})]})},aE=a=>{const[e,n]=z.useState("sc_my_requests"),r=a.employees.find(x=>x.email===a.currentUserEmail),o=a.currentUserEmail==="admin",u=o||(r==null?void 0:r.role)==="HOD"&&(r==null?void 0:r.department)==="Finance"||(r==null?void 0:r.designation)==="Account Manager",h=o||(r==null?void 0:r.role)==="HOD"||(r==null?void 0:r.department)==="Store",p=o||(r==null?void 0:r.department)==="Finance"||(r==null?void 0:r.department)==="Purchase",g=()=>{switch(e){case"sc_requests":return i.jsx(ZN,{inventory:a.inventory,currentUserEmail:a.currentUserEmail,employees:a.employees,onCreateRequest:a.onCreateRequest,recipes:a.recipes});case"sc_approvals":return u?i.jsx(eE,{requests:a.requests,purchaseOrders:a.purchaseOrders,onAction:a.onActionRequest,onPOAction:a.onPOAction}):i.jsx("div",{className:"p-6 text-center text-blue-900",children:"Access Denied. Account Managers Only."});case"sc_store":return h?i.jsx(tE,{requests:a.requests,purchaseRequests:a.purchaseRequests,purchaseOrders:a.purchaseOrders,inventory:a.inventory,employees:a.employees,recipes:a.recipes,onIssue:a.onIssueRequest,onForwardToPurchase:a.onForwardToPurchase,onCreatePurchaseRequest:a.onCreatePurchaseRequest,onCreateSCRequest:a.onCreateRequest,onGRN:a.onGRN,currentUserEmail:a.currentUserEmail,onAddNewAsset:a.onAddNewAsset,onUpdateAsset:a.onUpdateAsset,onDeleteAsset:a.onDeleteAsset}):i.jsx("div",{className:"p-6 text-center text-blue-900",children:"Access Denied. Store Managers Only."});case"sc_purchase":return p?i.jsx(sE,{requests:a.requests,purchaseRequests:a.purchaseRequests,vendors:a.vendors,purchaseOrders:a.purchaseOrders,onCreatePO:a.onCreatePO,onUpdatePO:a.onUpdatePO,onDeletePO:a.onDeletePO,currentUserEmail:a.currentUserEmail}):i.jsx("div",{className:"p-6 text-center text-blue-900",children:"Access Denied. Purchase Department Only."});case"sc_my_requests":default:return i.jsx(nE,{requests:a.requests,currentUserEmail:a.currentUserEmail})}};return i.jsxs("div",{className:"flex h-screen bg-slate-100",children:[i.jsx(JN,{activePage:e,setActivePage:n,currentUserEmail:a.currentUserEmail}),i.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsxs("header",{className:"bg-purple-900 border-b border-purple-800 h-16 flex-shrink-0 flex items-center justify-between px-6 shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("button",{onClick:a.onBack,className:"flex items-center gap-2 text-sm font-medium text-purple-200 hover:text-white",children:[i.jsx(xp,{className:"w-5 h-5"}),i.jsx("span",{children:"Home"})]}),i.jsx("div",{className:"h-6 w-px bg-purple-700 mx-2"}),i.jsx("h1",{className:"text-lg font-bold text-white",children:"The Chef's Academy Supply Chain"})]}),i.jsxs("button",{onClick:a.onLogout,className:"flex items-center gap-2 bg-purple-800 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:[i.jsx(Ul,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})]}),i.jsx("div",{className:"flex-1 overflow-x-hidden overflow-y-auto p-6",children:g()})]})]})},rE=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...a,children:[i.jsx("path",{d:"M12 1.5l2.12 6.4H21l-5.37 3.94 2.12 6.4-5.75-4.22-5.75 4.22 2.12-6.4L3 7.9h6.88L12 1.5zm0 3.82l-1.41 4.28H6.3l3.63 2.65-1.42 4.28L12 13.9l3.49 2.63-1.42-4.28L17.7 9.6h-4.29L12 5.32z"}),i.jsx("path",{d:"M12 1.5l-2.12 6.4H3l5.37 3.94-2.12 6.4 5.75-4.22 5.75 4.22-2.12-6.4L21 7.9h-6.88L12 1.5zm0 3.82L13.41 9.6h4.29l-3.63 2.65 1.42 4.28L12 13.9 8.51 16.53l1.42-4.28L6.3 9.6h4.29L12 5.32z",transform:"rotate(60 12 12)"})]}),iE=({onUpdatePassword:a,onSkip:e})=>{const[n,r]=z.useState(""),[o,u]=z.useState(""),[h,p]=z.useState(null),[g,x]=z.useState(!1),_=async w=>{if(w.preventDefault(),p(null),!n||!o){p({type:"error",text:"Please fill in both fields."});return}if(n!==o){p({type:"error",text:"Passwords do not match."});return}if(n.length<6){p({type:"error",text:"Password must be at least 6 characters long."});return}x(!0);const A=await a(n);x(!1),A.success||p({type:"error",text:A.message})};return i.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white p-8 md:p-12 rounded-2xl shadow-lg w-full max-w-md transform transition-all duration-300",children:[i.jsxs("div",{className:"flex flex-col items-center mb-8",children:[i.jsx(rE,{className:"w-20 h-20 text-orange-500 mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Change Your Password"}),i.jsx("p",{className:"text-slate-500 text-center mt-2",children:"For enhanced security, you can update your password now or skip for later."})]}),i.jsxs("form",{onSubmit:_,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-600",children:"New Password"}),i.jsx("input",{id:"newPassword",type:"password",value:n,onChange:w=>r(w.target.value),className:"mt-1 block w-full px-4 py-3 bg-slate-50 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",placeholder:""})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-600",children:"Confirm New Password"}),i.jsx("input",{id:"confirmPassword",type:"password",value:o,onChange:w=>u(w.target.value),className:"mt-1 block w-full px-4 py-3 bg-slate-50 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",placeholder:""})]}),h&&i.jsx("p",{className:`text-sm ${h.type==="error"?"text-red-500":"text-green-600"}`,children:h.text}),i.jsxs("div",{className:"space-y-4 pt-2",children:[i.jsx("button",{type:"submit",disabled:g,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-colors duration-200 disabled:bg-teal-400",children:g?"Saving...":"Save and Continue"}),i.jsx("button",{type:"button",onClick:e,className:"w-full flex justify-center py-3 px-4 border border-slate-300 rounded-md shadow-sm text-sm font-medium text-slate-700 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400 transition-colors duration-200",children:"Skip for now"})]})]})]})})},lE=()=>{};var Xy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=function(a){const e=[];let n=0;for(let r=0;r<a.length;r++){let o=a.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<a.length&&(a.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(a.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},oE=function(a){const e=[];let n=0,r=0;for(;n<a.length;){const o=a[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=a[n++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=a[n++],h=a[n++],p=a[n++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const u=a[n++],h=a[n++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},Lv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<a.length;o+=3){const u=a[o],h=o+1<a.length,p=h?a[o+1]:0,g=o+2<a.length,x=g?a[o+2]:0,_=u>>2,w=(u&3)<<4|p>>4;let A=(p&15)<<2|x>>6,D=x&63;g||(D=64,h||(A=64)),r.push(n[_],n[w],n[A],n[D])}return r.join("")},encodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(a):this.encodeByteArray(Pv(a),e)},decodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(a):oE(this.decodeStringToByteArray(a,e))},decodeStringToByteArray(a,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<a.length;){const u=n[a.charAt(o++)],p=o<a.length?n[a.charAt(o)]:0;++o;const x=o<a.length?n[a.charAt(o)]:64;++o;const w=o<a.length?n[a.charAt(o)]:64;if(++o,u==null||p==null||x==null||w==null)throw new cE;const A=u<<2|p>>4;if(r.push(A),x!==64){const D=p<<4&240|x>>2;if(r.push(D),w!==64){const V=x<<6&192|w;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class cE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uE=function(a){const e=Pv(a);return Lv.encodeByteArray(e,!0)},Cd=function(a){return uE(a).replace(/\./g,"")},Vv=function(a){try{return Lv.decodeString(a,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=()=>dE().__FIREBASE_DEFAULTS__,fE=()=>{if(typeof process>"u"||typeof Xy>"u")return;const a=Xy.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},mE=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=a&&Vv(a[1]);return e&&JSON.parse(e)},Wd=()=>{try{return lE()||hE()||fE()||mE()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},Uv=a=>{var e,n;return(n=(e=Wd())==null?void 0:e.emulatorHosts)==null?void 0:n[a]},pE=a=>{const e=Uv(a);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qv=()=>{var a;return(a=Wd())==null?void 0:a.config},zv=a=>{var e;return(e=Wd())==null?void 0:e[`_${a}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bv(a){return(await fetch(a,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(a,e){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=a.iat||0,u=a.sub||a.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...a};return[Cd(JSON.stringify(n)),Cd(JSON.stringify(h)),""].join(".")}const sc={};function yE(){const a={prod:[],emulator:[]};for(const e of Object.keys(sc))sc[e]?a.emulator.push(e):a.prod.push(e);return a}function bE(a){let e=document.getElementById(a),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",a),n=!0),{created:n,element:e}}let Wy=!1;function Fv(a,e){if(typeof window>"u"||typeof document>"u"||!ql(window.location.host)||sc[a]===e||sc[a]||Wy)return;sc[a]=e;function n(A){return`__firebase__banner__${A}`}const r="__firebase__banner",u=yE().prod.length>0;function h(){const A=document.getElementById(r);A&&A.remove()}function p(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,D){A.setAttribute("width","24"),A.setAttribute("id",D),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function x(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Wy=!0,h()},A}function _(A,D){A.setAttribute("id",D),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function w(){const A=bE(r),D=n("text"),V=document.getElementById(D)||document.createElement("span"),M=n("learnmore"),P=document.getElementById(M)||document.createElement("a"),ee=n("preprendIcon"),ue=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const te=A.element;p(te),_(P,M);const ne=x();g(ue,ee),te.append(ue,V,P,ne),document.body.appendChild(te)}u?(V.innerText="Preview backend disconnected.",ue.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ue.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jn())}function _E(){var e;const a=(e=Wd())==null?void 0:e.forceEnvironment;if(a==="node")return!0;if(a==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NE(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function EE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SE(){const a=jn();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function TE(){return!_E()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jE(){try{return typeof indexedDB=="object"}catch{return!1}}function AE(){return new Promise((a,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),a(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="FirebaseError";class Va extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=CE,Object.setPrototypeOf(this,Va.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sc.prototype.create)}}class Sc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?RE(u,r):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new Va(o,p,r)}}function RE(a,e){return a.replace(IE,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const IE=/\{\$([^}]+)}/g;function kE(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function yi(a,e){if(a===e)return!0;const n=Object.keys(a),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const u=a[o],h=e[o];if(Jy(u)&&Jy(h)){if(!yi(u,h))return!1}else if(u!==h)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Jy(a){return a!==null&&typeof a=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(a){const e=[];for(const[n,r]of Object.entries(a))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wo(a){const e={};return a.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Jo(a){const e=a.indexOf("?");if(!e)return"";const n=a.indexOf("#",e);return a.substring(e,n>0?n:void 0)}function DE(a,e){const n=new ME(a,e);return n.subscribe.bind(n)}class ME{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");OE(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=vm),o.error===void 0&&(o.error=vm),o.complete===void 0&&(o.complete=vm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OE(a,e){if(typeof a!="object"||a===null)return!1;for(const n of e)if(n in a&&typeof a[n]=="function")return!0;return!1}function vm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(a){return a&&a._delegate?a._delegate:a}class bi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new gE;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VE(e))try{this.getOrInitializeService({instanceIdentifier:mi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mi){return this.instances.has(e)}getOptions(e=mi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);r===p&&h.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mi){return this.component?this.component.multipleInstances?e:mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LE(a){return a===mi?void 0:a}function VE(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new PE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(Je||(Je={}));const qE={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},zE=Je.INFO,BE={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},FE=(a,e,...n)=>{if(e<a.logLevel)return;const r=new Date().toISOString(),o=BE[e];if(o)console[o](`[${r}]  ${a.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bp{constructor(e){this.name=e,this._logLevel=zE,this._logHandler=FE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const HE=(a,e)=>e.some(n=>a instanceof n);let Zy,eb;function GE(){return Zy||(Zy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KE(){return eb||(eb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hv=new WeakMap,Pm=new WeakMap,Gv=new WeakMap,_m=new WeakMap,vp=new WeakMap;function QE(a){const e=new Promise((n,r)=>{const o=()=>{a.removeEventListener("success",u),a.removeEventListener("error",h)},u=()=>{n(Er(a.result)),o()},h=()=>{r(a.error),o()};a.addEventListener("success",u),a.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Hv.set(n,a)}).catch(()=>{}),vp.set(e,a),e}function $E(a){if(Pm.has(a))return;const e=new Promise((n,r)=>{const o=()=>{a.removeEventListener("complete",u),a.removeEventListener("error",h),a.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{r(a.error||new DOMException("AbortError","AbortError")),o()};a.addEventListener("complete",u),a.addEventListener("error",h),a.addEventListener("abort",h)});Pm.set(a,e)}let Lm={get(a,e,n){if(a instanceof IDBTransaction){if(e==="done")return Pm.get(a);if(e==="objectStoreNames")return a.objectStoreNames||Gv.get(a);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Er(a[e])},set(a,e,n){return a[e]=n,!0},has(a,e){return a instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in a}};function YE(a){Lm=a(Lm)}function XE(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=a.call(wm(this),e,...n);return Gv.set(r,e.sort?e.sort():[e]),Er(r)}:KE().includes(a)?function(...e){return a.apply(wm(this),e),Er(Hv.get(this))}:function(...e){return Er(a.apply(wm(this),e))}}function WE(a){return typeof a=="function"?XE(a):(a instanceof IDBTransaction&&$E(a),HE(a,GE())?new Proxy(a,Lm):a)}function Er(a){if(a instanceof IDBRequest)return QE(a);if(_m.has(a))return _m.get(a);const e=WE(a);return e!==a&&(_m.set(a,e),vp.set(e,a)),e}const wm=a=>vp.get(a);function JE(a,e,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const h=indexedDB.open(a,e),p=Er(h);return r&&h.addEventListener("upgradeneeded",g=>{r(Er(h.result),g.oldVersion,g.newVersion,Er(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",x=>o(x.oldVersion,x.newVersion,x))}).catch(()=>{}),p}const ZE=["get","getKey","getAll","getAllKeys","count"],eS=["put","add","delete","clear"],Nm=new Map;function tb(a,e){if(!(a instanceof IDBDatabase&&!(e in a)&&typeof e=="string"))return;if(Nm.get(e))return Nm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=eS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||ZE.includes(n)))return;const u=async function(h,...p){const g=this.transaction(h,o?"readwrite":"readonly");let x=g.store;return r&&(x=x.index(p.shift())),(await Promise.all([x[n](...p),o&&g.done]))[0]};return Nm.set(e,u),u}YE(a=>({...a,get:(e,n,r)=>tb(e,n)||a.get(e,n,r),has:(e,n)=>!!tb(e,n)||a.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function nS(a){const e=a.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vm="@firebase/app",nb="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=new bp("@firebase/app"),sS="@firebase/app-compat",aS="@firebase/analytics-compat",rS="@firebase/analytics",iS="@firebase/app-check-compat",lS="@firebase/app-check",oS="@firebase/auth",cS="@firebase/auth-compat",uS="@firebase/database",dS="@firebase/data-connect",hS="@firebase/database-compat",fS="@firebase/functions",mS="@firebase/functions-compat",pS="@firebase/installations",gS="@firebase/installations-compat",xS="@firebase/messaging",yS="@firebase/messaging-compat",bS="@firebase/performance",vS="@firebase/performance-compat",_S="@firebase/remote-config",wS="@firebase/remote-config-compat",NS="@firebase/storage",ES="@firebase/storage-compat",SS="@firebase/firestore",TS="@firebase/ai",jS="@firebase/firestore-compat",AS="firebase",CS="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="[DEFAULT]",RS={[Vm]:"fire-core",[sS]:"fire-core-compat",[rS]:"fire-analytics",[aS]:"fire-analytics-compat",[lS]:"fire-app-check",[iS]:"fire-app-check-compat",[oS]:"fire-auth",[cS]:"fire-auth-compat",[uS]:"fire-rtdb",[dS]:"fire-data-connect",[hS]:"fire-rtdb-compat",[fS]:"fire-fn",[mS]:"fire-fn-compat",[pS]:"fire-iid",[gS]:"fire-iid-compat",[xS]:"fire-fcm",[yS]:"fire-fcm-compat",[bS]:"fire-perf",[vS]:"fire-perf-compat",[_S]:"fire-rc",[wS]:"fire-rc-compat",[NS]:"fire-gcs",[ES]:"fire-gcs-compat",[SS]:"fire-fst",[jS]:"fire-fst-compat",[TS]:"fire-vertex","fire-js":"fire-js",[AS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=new Map,IS=new Map,qm=new Map;function sb(a,e){try{a.container.addComponent(e)}catch(n){Da.debug(`Component ${e.name} failed to register with FirebaseApp ${a.name}`,n)}}function Il(a){const e=a.name;if(qm.has(e))return Da.debug(`There were multiple attempts to register component ${e}.`),!1;qm.set(e,a);for(const n of Rd.values())sb(n,a);for(const n of IS.values())sb(n,a);return!0}function _p(a,e){const n=a.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),a.container.getProvider(e)}function _s(a){return a==null?!1:a.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sr=new Sc("app","Firebase",kS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=CS;function Kv(a,e={}){let n=a;typeof e!="object"&&(e={name:e});const r={name:Um,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Sr.create("bad-app-name",{appName:String(o)});if(n||(n=qv()),!n)throw Sr.create("no-options");const u=Rd.get(o);if(u){if(yi(n,u.options)&&yi(r,u.config))return u;throw Sr.create("duplicate-app",{appName:o})}const h=new UE(o);for(const g of qm.values())h.addComponent(g);const p=new DS(n,r,h);return Rd.set(o,p),p}function Qv(a=Um){const e=Rd.get(a);if(!e&&a===Um&&qv())return Kv();if(!e)throw Sr.create("no-app",{appName:a});return e}function Tr(a,e,n){let r=RS[a]??a;n&&(r+=`-${n}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${r}" with version "${e}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Da.warn(h.join(" "));return}Il(new bi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="firebase-heartbeat-database",OS=1,fc="firebase-heartbeat-store";let Em=null;function $v(){return Em||(Em=JE(MS,OS,{upgrade:(a,e)=>{switch(e){case 0:try{a.createObjectStore(fc)}catch(n){console.warn(n)}}}}).catch(a=>{throw Sr.create("idb-open",{originalErrorMessage:a.message})})),Em}async function PS(a){try{const n=(await $v()).transaction(fc),r=await n.objectStore(fc).get(Yv(a));return await n.done,r}catch(e){if(e instanceof Va)Da.warn(e.message);else{const n=Sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Da.warn(n.message)}}}async function ab(a,e){try{const r=(await $v()).transaction(fc,"readwrite");await r.objectStore(fc).put(e,Yv(a)),await r.done}catch(n){if(n instanceof Va)Da.warn(n.message);else{const r=Sr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Da.warn(r.message)}}}function Yv(a){return`${a.name}!${a.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=1024,VS=30;class US{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=rb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>VS){const h=BS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Da.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rb(),{heartbeatsToSend:r,unsentEntries:o}=qS(this._heartbeatsCache.heartbeats),u=Cd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Da.warn(n),""}}}function rb(){return new Date().toISOString().substring(0,10)}function qS(a,e=LS){const n=[];let r=a.slice();for(const o of a){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),ib(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),ib(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class zS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jE()?AE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await PS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ab(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ab(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ib(a){return Cd(JSON.stringify({version:2,heartbeats:a})).length}function BS(a){if(a.length===0)return-1;let e=0,n=a[0].date;for(let r=1;r<a.length;r++)a[r].date<n&&(n=a[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(a){Il(new bi("platform-logger",e=>new tS(e),"PRIVATE")),Il(new bi("heartbeat",e=>new US(e),"PRIVATE")),Tr(Vm,nb,a),Tr(Vm,nb,"esm2020"),Tr("fire-js","")}FS("");var HS="firebase",GS="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tr(HS,GS,"app");var lb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jr,Xv;(function(){var a;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,N){function S(){}S.prototype=N.prototype,C.F=N.prototype,C.prototype=new S,C.prototype.constructor=C,C.D=function(E,j,k){for(var I=Array(arguments.length-2),me=2;me<arguments.length;me++)I[me-2]=arguments[me];return N.prototype[j].apply(E,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,N,S){S||(S=0);const E=Array(16);if(typeof N=="string")for(var j=0;j<16;++j)E[j]=N.charCodeAt(S++)|N.charCodeAt(S++)<<8|N.charCodeAt(S++)<<16|N.charCodeAt(S++)<<24;else for(j=0;j<16;++j)E[j]=N[S++]|N[S++]<<8|N[S++]<<16|N[S++]<<24;N=C.g[0],S=C.g[1],j=C.g[2];let k=C.g[3],I;I=N+(k^S&(j^k))+E[0]+3614090360&4294967295,N=S+(I<<7&4294967295|I>>>25),I=k+(j^N&(S^j))+E[1]+3905402710&4294967295,k=N+(I<<12&4294967295|I>>>20),I=j+(S^k&(N^S))+E[2]+606105819&4294967295,j=k+(I<<17&4294967295|I>>>15),I=S+(N^j&(k^N))+E[3]+3250441966&4294967295,S=j+(I<<22&4294967295|I>>>10),I=N+(k^S&(j^k))+E[4]+4118548399&4294967295,N=S+(I<<7&4294967295|I>>>25),I=k+(j^N&(S^j))+E[5]+1200080426&4294967295,k=N+(I<<12&4294967295|I>>>20),I=j+(S^k&(N^S))+E[6]+2821735955&4294967295,j=k+(I<<17&4294967295|I>>>15),I=S+(N^j&(k^N))+E[7]+4249261313&4294967295,S=j+(I<<22&4294967295|I>>>10),I=N+(k^S&(j^k))+E[8]+1770035416&4294967295,N=S+(I<<7&4294967295|I>>>25),I=k+(j^N&(S^j))+E[9]+2336552879&4294967295,k=N+(I<<12&4294967295|I>>>20),I=j+(S^k&(N^S))+E[10]+4294925233&4294967295,j=k+(I<<17&4294967295|I>>>15),I=S+(N^j&(k^N))+E[11]+2304563134&4294967295,S=j+(I<<22&4294967295|I>>>10),I=N+(k^S&(j^k))+E[12]+1804603682&4294967295,N=S+(I<<7&4294967295|I>>>25),I=k+(j^N&(S^j))+E[13]+4254626195&4294967295,k=N+(I<<12&4294967295|I>>>20),I=j+(S^k&(N^S))+E[14]+2792965006&4294967295,j=k+(I<<17&4294967295|I>>>15),I=S+(N^j&(k^N))+E[15]+1236535329&4294967295,S=j+(I<<22&4294967295|I>>>10),I=N+(j^k&(S^j))+E[1]+4129170786&4294967295,N=S+(I<<5&4294967295|I>>>27),I=k+(S^j&(N^S))+E[6]+3225465664&4294967295,k=N+(I<<9&4294967295|I>>>23),I=j+(N^S&(k^N))+E[11]+643717713&4294967295,j=k+(I<<14&4294967295|I>>>18),I=S+(k^N&(j^k))+E[0]+3921069994&4294967295,S=j+(I<<20&4294967295|I>>>12),I=N+(j^k&(S^j))+E[5]+3593408605&4294967295,N=S+(I<<5&4294967295|I>>>27),I=k+(S^j&(N^S))+E[10]+38016083&4294967295,k=N+(I<<9&4294967295|I>>>23),I=j+(N^S&(k^N))+E[15]+3634488961&4294967295,j=k+(I<<14&4294967295|I>>>18),I=S+(k^N&(j^k))+E[4]+3889429448&4294967295,S=j+(I<<20&4294967295|I>>>12),I=N+(j^k&(S^j))+E[9]+568446438&4294967295,N=S+(I<<5&4294967295|I>>>27),I=k+(S^j&(N^S))+E[14]+3275163606&4294967295,k=N+(I<<9&4294967295|I>>>23),I=j+(N^S&(k^N))+E[3]+4107603335&4294967295,j=k+(I<<14&4294967295|I>>>18),I=S+(k^N&(j^k))+E[8]+1163531501&4294967295,S=j+(I<<20&4294967295|I>>>12),I=N+(j^k&(S^j))+E[13]+2850285829&4294967295,N=S+(I<<5&4294967295|I>>>27),I=k+(S^j&(N^S))+E[2]+4243563512&4294967295,k=N+(I<<9&4294967295|I>>>23),I=j+(N^S&(k^N))+E[7]+1735328473&4294967295,j=k+(I<<14&4294967295|I>>>18),I=S+(k^N&(j^k))+E[12]+2368359562&4294967295,S=j+(I<<20&4294967295|I>>>12),I=N+(S^j^k)+E[5]+4294588738&4294967295,N=S+(I<<4&4294967295|I>>>28),I=k+(N^S^j)+E[8]+2272392833&4294967295,k=N+(I<<11&4294967295|I>>>21),I=j+(k^N^S)+E[11]+1839030562&4294967295,j=k+(I<<16&4294967295|I>>>16),I=S+(j^k^N)+E[14]+4259657740&4294967295,S=j+(I<<23&4294967295|I>>>9),I=N+(S^j^k)+E[1]+2763975236&4294967295,N=S+(I<<4&4294967295|I>>>28),I=k+(N^S^j)+E[4]+1272893353&4294967295,k=N+(I<<11&4294967295|I>>>21),I=j+(k^N^S)+E[7]+4139469664&4294967295,j=k+(I<<16&4294967295|I>>>16),I=S+(j^k^N)+E[10]+3200236656&4294967295,S=j+(I<<23&4294967295|I>>>9),I=N+(S^j^k)+E[13]+681279174&4294967295,N=S+(I<<4&4294967295|I>>>28),I=k+(N^S^j)+E[0]+3936430074&4294967295,k=N+(I<<11&4294967295|I>>>21),I=j+(k^N^S)+E[3]+3572445317&4294967295,j=k+(I<<16&4294967295|I>>>16),I=S+(j^k^N)+E[6]+76029189&4294967295,S=j+(I<<23&4294967295|I>>>9),I=N+(S^j^k)+E[9]+3654602809&4294967295,N=S+(I<<4&4294967295|I>>>28),I=k+(N^S^j)+E[12]+3873151461&4294967295,k=N+(I<<11&4294967295|I>>>21),I=j+(k^N^S)+E[15]+530742520&4294967295,j=k+(I<<16&4294967295|I>>>16),I=S+(j^k^N)+E[2]+3299628645&4294967295,S=j+(I<<23&4294967295|I>>>9),I=N+(j^(S|~k))+E[0]+4096336452&4294967295,N=S+(I<<6&4294967295|I>>>26),I=k+(S^(N|~j))+E[7]+1126891415&4294967295,k=N+(I<<10&4294967295|I>>>22),I=j+(N^(k|~S))+E[14]+2878612391&4294967295,j=k+(I<<15&4294967295|I>>>17),I=S+(k^(j|~N))+E[5]+4237533241&4294967295,S=j+(I<<21&4294967295|I>>>11),I=N+(j^(S|~k))+E[12]+1700485571&4294967295,N=S+(I<<6&4294967295|I>>>26),I=k+(S^(N|~j))+E[3]+2399980690&4294967295,k=N+(I<<10&4294967295|I>>>22),I=j+(N^(k|~S))+E[10]+4293915773&4294967295,j=k+(I<<15&4294967295|I>>>17),I=S+(k^(j|~N))+E[1]+2240044497&4294967295,S=j+(I<<21&4294967295|I>>>11),I=N+(j^(S|~k))+E[8]+1873313359&4294967295,N=S+(I<<6&4294967295|I>>>26),I=k+(S^(N|~j))+E[15]+4264355552&4294967295,k=N+(I<<10&4294967295|I>>>22),I=j+(N^(k|~S))+E[6]+2734768916&4294967295,j=k+(I<<15&4294967295|I>>>17),I=S+(k^(j|~N))+E[13]+1309151649&4294967295,S=j+(I<<21&4294967295|I>>>11),I=N+(j^(S|~k))+E[4]+4149444226&4294967295,N=S+(I<<6&4294967295|I>>>26),I=k+(S^(N|~j))+E[11]+3174756917&4294967295,k=N+(I<<10&4294967295|I>>>22),I=j+(N^(k|~S))+E[2]+718787259&4294967295,j=k+(I<<15&4294967295|I>>>17),I=S+(k^(j|~N))+E[9]+3951481745&4294967295,C.g[0]=C.g[0]+N&4294967295,C.g[1]=C.g[1]+(j+(I<<21&4294967295|I>>>11))&4294967295,C.g[2]=C.g[2]+j&4294967295,C.g[3]=C.g[3]+k&4294967295}r.prototype.v=function(C,N){N===void 0&&(N=C.length);const S=N-this.blockSize,E=this.C;let j=this.h,k=0;for(;k<N;){if(j==0)for(;k<=S;)o(this,C,k),k+=this.blockSize;if(typeof C=="string"){for(;k<N;)if(E[j++]=C.charCodeAt(k++),j==this.blockSize){o(this,E),j=0;break}}else for(;k<N;)if(E[j++]=C[k++],j==this.blockSize){o(this,E),j=0;break}}this.h=j,this.o+=N},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var N=1;N<C.length-8;++N)C[N]=0;N=this.o*8;for(var S=C.length-8;S<C.length;++S)C[S]=N&255,N/=256;for(this.v(C),C=Array(16),N=0,S=0;S<4;++S)for(let E=0;E<32;E+=8)C[N++]=this.g[S]>>>E&255;return C};function u(C,N){var S=p;return Object.prototype.hasOwnProperty.call(S,C)?S[C]:S[C]=N(C)}function h(C,N){this.h=N;const S=[];let E=!0;for(let j=C.length-1;j>=0;j--){const k=C[j]|0;E&&k==N||(S[j]=k,E=!1)}this.g=S}var p={};function g(C){return-128<=C&&C<128?u(C,function(N){return new h([N|0],N<0?-1:0)}):new h([C|0],C<0?-1:0)}function x(C){if(isNaN(C)||!isFinite(C))return w;if(C<0)return P(x(-C));const N=[];let S=1;for(let E=0;C>=S;E++)N[E]=C/S|0,S*=4294967296;return new h(N,0)}function _(C,N){if(C.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(C.charAt(0)=="-")return P(_(C.substring(1),N));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=x(Math.pow(N,8));let E=w;for(let k=0;k<C.length;k+=8){var j=Math.min(8,C.length-k);const I=parseInt(C.substring(k,k+j),N);j<8?(j=x(Math.pow(N,j)),E=E.j(j).add(x(I))):(E=E.j(S),E=E.add(x(I)))}return E}var w=g(0),A=g(1),D=g(16777216);a=h.prototype,a.m=function(){if(M(this))return-P(this).m();let C=0,N=1;for(let S=0;S<this.g.length;S++){const E=this.i(S);C+=(E>=0?E:4294967296+E)*N,N*=4294967296}return C},a.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(V(this))return"0";if(M(this))return"-"+P(this).toString(C);const N=x(Math.pow(C,6));var S=this;let E="";for(;;){const j=ne(S,N).g;S=ee(S,j.j(N));let k=((S.g.length>0?S.g[0]:S.h)>>>0).toString(C);if(S=j,V(S))return k+E;for(;k.length<6;)k="0"+k;E=k+E}},a.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function V(C){if(C.h!=0)return!1;for(let N=0;N<C.g.length;N++)if(C.g[N]!=0)return!1;return!0}function M(C){return C.h==-1}a.l=function(C){return C=ee(this,C),M(C)?-1:V(C)?0:1};function P(C){const N=C.g.length,S=[];for(let E=0;E<N;E++)S[E]=~C.g[E];return new h(S,~C.h).add(A)}a.abs=function(){return M(this)?P(this):this},a.add=function(C){const N=Math.max(this.g.length,C.g.length),S=[];let E=0;for(let j=0;j<=N;j++){let k=E+(this.i(j)&65535)+(C.i(j)&65535),I=(k>>>16)+(this.i(j)>>>16)+(C.i(j)>>>16);E=I>>>16,k&=65535,I&=65535,S[j]=I<<16|k}return new h(S,S[S.length-1]&-2147483648?-1:0)};function ee(C,N){return C.add(P(N))}a.j=function(C){if(V(this)||V(C))return w;if(M(this))return M(C)?P(this).j(P(C)):P(P(this).j(C));if(M(C))return P(this.j(P(C)));if(this.l(D)<0&&C.l(D)<0)return x(this.m()*C.m());const N=this.g.length+C.g.length,S=[];for(var E=0;E<2*N;E++)S[E]=0;for(E=0;E<this.g.length;E++)for(let j=0;j<C.g.length;j++){const k=this.i(E)>>>16,I=this.i(E)&65535,me=C.i(j)>>>16,ke=C.i(j)&65535;S[2*E+2*j]+=I*ke,ue(S,2*E+2*j),S[2*E+2*j+1]+=k*ke,ue(S,2*E+2*j+1),S[2*E+2*j+1]+=I*me,ue(S,2*E+2*j+1),S[2*E+2*j+2]+=k*me,ue(S,2*E+2*j+2)}for(C=0;C<N;C++)S[C]=S[2*C+1]<<16|S[2*C];for(C=N;C<2*N;C++)S[C]=0;return new h(S,0)};function ue(C,N){for(;(C[N]&65535)!=C[N];)C[N+1]+=C[N]>>>16,C[N]&=65535,N++}function te(C,N){this.g=C,this.h=N}function ne(C,N){if(V(N))throw Error("division by zero");if(V(C))return new te(w,w);if(M(C))return N=ne(P(C),N),new te(P(N.g),P(N.h));if(M(N))return N=ne(C,P(N)),new te(P(N.g),N.h);if(C.g.length>30){if(M(C)||M(N))throw Error("slowDivide_ only works with positive integers.");for(var S=A,E=N;E.l(C)<=0;)S=F(S),E=F(E);var j=W(S,1),k=W(E,1);for(E=W(E,2),S=W(S,2);!V(E);){var I=k.add(E);I.l(C)<=0&&(j=j.add(S),k=I),E=W(E,1),S=W(S,1)}return N=ee(C,j.j(N)),new te(j,N)}for(j=w;C.l(N)>=0;){for(S=Math.max(1,Math.floor(C.m()/N.m())),E=Math.ceil(Math.log(S)/Math.LN2),E=E<=48?1:Math.pow(2,E-48),k=x(S),I=k.j(N);M(I)||I.l(C)>0;)S-=E,k=x(S),I=k.j(N);V(k)&&(k=A),j=j.add(k),C=ee(C,I)}return new te(j,C)}a.B=function(C){return ne(this,C).h},a.and=function(C){const N=Math.max(this.g.length,C.g.length),S=[];for(let E=0;E<N;E++)S[E]=this.i(E)&C.i(E);return new h(S,this.h&C.h)},a.or=function(C){const N=Math.max(this.g.length,C.g.length),S=[];for(let E=0;E<N;E++)S[E]=this.i(E)|C.i(E);return new h(S,this.h|C.h)},a.xor=function(C){const N=Math.max(this.g.length,C.g.length),S=[];for(let E=0;E<N;E++)S[E]=this.i(E)^C.i(E);return new h(S,this.h^C.h)};function F(C){const N=C.g.length+1,S=[];for(let E=0;E<N;E++)S[E]=C.i(E)<<1|C.i(E-1)>>>31;return new h(S,C.h)}function W(C,N){const S=N>>5;N%=32;const E=C.g.length-S,j=[];for(let k=0;k<E;k++)j[k]=N>0?C.i(k+S)>>>N|C.i(k+S+1)<<32-N:C.i(k+S);return new h(j,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Xv=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=x,h.fromString=_,jr=h}).apply(typeof lb<"u"?lb:typeof self<"u"?self:typeof window<"u"?window:{});var cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wv,Zo,Jv,gd,zm,Zv,e1,t1;(function(){var a,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof cd=="object"&&cd];for(var y=0;y<d.length;++y){var v=d[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function o(d,y){if(y)e:{var v=r;d=d.split(".");for(var R=0;R<d.length-1;R++){var H=d[R];if(!(H in v))break e;v=v[H]}d=d[d.length-1],R=v[d],y=y(R),y!=R&&y!=null&&e(v,d,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(y){var v=[],R;for(R in y)Object.prototype.hasOwnProperty.call(y,R)&&v.push([R,y[R]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function p(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function g(d,y,v){return d.call.apply(d.bind,arguments)}function x(d,y,v){return x=g,x.apply(null,arguments)}function _(d,y){var v=Array.prototype.slice.call(arguments,1);return function(){var R=v.slice();return R.push.apply(R,arguments),d.apply(this,R)}}function w(d,y){function v(){}v.prototype=y.prototype,d.Z=y.prototype,d.prototype=new v,d.prototype.constructor=d,d.Ob=function(R,H,J){for(var pe=Array(arguments.length-2),He=2;He<arguments.length;He++)pe[He-2]=arguments[He];return y.prototype[H].apply(R,pe)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function D(d){const y=d.length;if(y>0){const v=Array(y);for(let R=0;R<y;R++)v[R]=d[R];return v}return[]}function V(d,y){for(let R=1;R<arguments.length;R++){const H=arguments[R];var v=typeof H;if(v=v!="object"?v:H?Array.isArray(H)?"array":v:"null",v=="array"||v=="object"&&typeof H.length=="number"){v=d.length||0;const J=H.length||0;d.length=v+J;for(let pe=0;pe<J;pe++)d[v+pe]=H[pe]}else d.push(H)}}class M{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function P(d){h.setTimeout(()=>{throw d},0)}function ee(){var d=C;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class ue{constructor(){this.h=this.g=null}add(y,v){const R=te.get();R.set(y,v),this.h?this.h.next=R:this.g=R,this.h=R}}var te=new M(()=>new ne,d=>d.reset());class ne{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let F,W=!1,C=new ue,N=()=>{const d=Promise.resolve(void 0);F=()=>{d.then(S)}};function S(){for(var d;d=ee();){try{d.h.call(d.g)}catch(v){P(v)}var y=te;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}W=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const v=()=>{};h.addEventListener("test",v,y),h.removeEventListener("test",v,y)}catch{}return d})();function I(d){return/^[\s\xa0]*$/.test(d)}function me(d,y){j.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}w(me,j),me.prototype.init=function(d,y){const v=this.type=d.type,R=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(v=="mouseover"?y=d.fromElement:v=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&me.Z.h.call(this)},me.prototype.h=function(){me.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ke="closure_listenable_"+(Math.random()*1e6|0),G=0;function oe(d,y,v,R,H){this.listener=d,this.proxy=null,this.src=y,this.type=v,this.capture=!!R,this.ha=H,this.key=++G,this.da=this.fa=!1}function ye(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function je(d,y,v){for(const R in d)y.call(v,d[R],R,d)}function Ue(d,y){for(const v in d)y.call(void 0,d[v],v,d)}function L(d){const y={};for(const v in d)y[v]=d[v];return y}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(d,y){let v,R;for(let H=1;H<arguments.length;H++){R=arguments[H];for(v in R)d[v]=R[v];for(let J=0;J<Y.length;J++)v=Y[J],Object.prototype.hasOwnProperty.call(R,v)&&(d[v]=R[v])}}function ge(d){this.src=d,this.g={},this.h=0}ge.prototype.add=function(d,y,v,R,H){const J=d.toString();d=this.g[J],d||(d=this.g[J]=[],this.h++);const pe=U(d,y,R,H);return pe>-1?(y=d[pe],v||(y.fa=!1)):(y=new oe(y,this.src,J,!!R,H),y.fa=v,d.push(y)),y};function be(d,y){const v=y.type;if(v in d.g){var R=d.g[v],H=Array.prototype.indexOf.call(R,y,void 0),J;(J=H>=0)&&Array.prototype.splice.call(R,H,1),J&&(ye(y),d.g[v].length==0&&(delete d.g[v],d.h--))}}function U(d,y,v,R){for(let H=0;H<d.length;++H){const J=d[H];if(!J.da&&J.listener==y&&J.capture==!!v&&J.ha==R)return H}return-1}var de="closure_lm_"+(Math.random()*1e6|0),xe={};function Te(d,y,v,R,H){if(Array.isArray(y)){for(let J=0;J<y.length;J++)Te(d,y[J],v,R,H);return null}return v=da(v),d&&d[ke]?d.J(y,v,p(R)?!!R.capture:!1,H):Qe(d,y,v,!1,R,H)}function Qe(d,y,v,R,H,J){if(!y)throw Error("Invalid event type");const pe=p(H)?!!H.capture:!!H;let He=rs(d);if(He||(d[de]=He=new ge(d)),v=He.add(y,v,R,pe,J),v.proxy)return v;if(R=sn(),v.proxy=R,R.src=d,R.listener=v,d.addEventListener)k||(H=pe),H===void 0&&(H=!1),d.addEventListener(y.toString(),R,H);else if(d.attachEvent)d.attachEvent(Xt(y.toString()),R);else if(d.addListener&&d.removeListener)d.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return v}function sn(){function d(v){return y.call(d.src,d.listener,v)}const y=Vs;return d}function an(d,y,v,R,H){if(Array.isArray(y))for(var J=0;J<y.length;J++)an(d,y[J],v,R,H);else R=p(R)?!!R.capture:!!R,v=da(v),d&&d[ke]?(d=d.i,J=String(y).toString(),J in d.g&&(y=d.g[J],v=U(y,v,R,H),v>-1&&(ye(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete d.g[J],d.h--)))):d&&(d=rs(d))&&(y=d.g[y.toString()],d=-1,y&&(d=U(y,v,R,H)),(v=d>-1?y[d]:null)&&vn(v))}function vn(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[ke])be(y.i,d);else{var v=d.type,R=d.proxy;y.removeEventListener?y.removeEventListener(v,R,d.capture):y.detachEvent?y.detachEvent(Xt(v),R):y.addListener&&y.removeListener&&y.removeListener(R),(v=rs(y))?(be(v,d),v.h==0&&(v.src=null,y[de]=null)):ye(d)}}}function Xt(d){return d in xe?xe[d]:xe[d]="on"+d}function Vs(d,y){if(d.da)d=!0;else{y=new me(y,this);const v=d.listener,R=d.ha||d.src;d.fa&&vn(d),d=v.call(R,y)}return d}function rs(d){return d=d[de],d instanceof ge?d:null}var Us="__closure_events_fn_"+(Math.random()*1e9>>>0);function da(d){return typeof d=="function"?d:(d[Us]||(d[Us]=function(y){return d.handleEvent(y)}),d[Us])}function Et(){E.call(this),this.i=new ge(this),this.M=this,this.G=null}w(Et,E),Et.prototype[ke]=!0,Et.prototype.removeEventListener=function(d,y,v,R){an(this,d,y,v,R)};function jt(d,y){var v,R=d.G;if(R)for(v=[];R;R=R.G)v.push(R);if(d=d.M,R=y.type||y,typeof y=="string")y=new j(y,d);else if(y instanceof j)y.target=y.target||d;else{var H=y;y=new j(R,d),he(y,H)}H=!0;let J,pe;if(v)for(pe=v.length-1;pe>=0;pe--)J=y.g=v[pe],H=is(J,R,!0,y)&&H;if(J=y.g=d,H=is(J,R,!0,y)&&H,H=is(J,R,!1,y)&&H,v)for(pe=0;pe<v.length;pe++)J=y.g=v[pe],H=is(J,R,!1,y)&&H}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var d=this.i;for(const y in d.g){const v=d.g[y];for(let R=0;R<v.length;R++)ye(v[R]);delete d.g[y],d.h--}}this.G=null},Et.prototype.J=function(d,y,v,R){return this.i.add(String(d),y,!1,v,R)},Et.prototype.K=function(d,y,v,R){return this.i.add(String(d),y,!0,v,R)};function is(d,y,v,R){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let J=0;J<y.length;++J){const pe=y[J];if(pe&&!pe.da&&pe.capture==v){const He=pe.listener,Ot=pe.ha||pe.src;pe.fa&&be(d.i,pe),H=He.call(Ot,R)!==!1&&H}}return H&&!R.defaultPrevented}function qr(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=x(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(d,y||0)}function qs(d){d.g=qr(()=>{d.g=null,d.i&&(d.i=!1,qs(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class X extends E{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:qs(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Le(d){E.call(this),this.h=d,this.g={}}w(Le,E);var yt=[];function vt(d){je(d.g,function(y,v){this.g.hasOwnProperty(v)&&vn(y)},d),d.g={}}Le.prototype.N=function(){Le.Z.N.call(this),vt(this)},Le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var At=h.JSON.stringify,Ns=h.JSON.parse,Dn=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function Ai(){}function Ci(){}var Gn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wt(){j.call(this,"d")}w(Wt,j);function Mn(){j.call(this,"c")}w(Mn,j);var Ct={},Ri=null;function Ua(){return Ri=Ri||new Et}Ct.Ia="serverreachability";function Ii(d){j.call(this,Ct.Ia,d)}w(Ii,j);function Kn(d){const y=Ua();jt(y,new Ii(y))}Ct.STAT_EVENT="statevent";function Es(d,y){j.call(this,Ct.STAT_EVENT,d),this.stat=y}w(Es,j);function Mt(d){const y=Ua();jt(y,new Es(y,d))}Ct.Ja="timingevent";function Qn(d,y){j.call(this,Ct.Ja,d),this.size=y}w(Qn,j);function se(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},y)}function fe(){this.g=!0}fe.prototype.ua=function(){this.g=!1};function ve(d,y,v,R,H,J){d.info(function(){if(d.g)if(J){var pe="",He=J.split("&");for(let it=0;it<He.length;it++){var Ot=He[it].split("=");if(Ot.length>1){const St=Ot[0];Ot=Ot[1];const hs=St.split("_");pe=hs.length>=2&&hs[1]=="type"?pe+(St+"="+Ot+"&"):pe+(St+"=redacted&")}}}else pe=null;else pe=J;return"XMLHTTP REQ ("+R+") [attempt "+H+"]: "+y+`
`+v+`
`+pe})}function Se(d,y,v,R,H,J,pe){d.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+H+"]: "+y+`
`+v+`
`+J+" "+pe})}function Ve(d,y,v,R){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+_n(d,v)+(R?" "+R:"")})}function ze(d,y){d.info(function(){return"TIMEOUT: "+y})}fe.prototype.info=function(){};function _n(d,y){if(!d.g)return y;if(!y)return null;try{const J=JSON.parse(y);if(J){for(d=0;d<J.length;d++)if(Array.isArray(J[d])){var v=J[d];if(!(v.length<2)){var R=v[1];if(Array.isArray(R)&&!(R.length<1)){var H=R[0];if(H!="noop"&&H!="stop"&&H!="close")for(let pe=1;pe<R.length;pe++)R[pe]=""}}}}return At(J)}catch{return y}}var wn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Jt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},un;function ls(){}w(ls,Ai),ls.prototype.g=function(){return new XMLHttpRequest},un=new ls;function Ss(d){return encodeURIComponent(String(d))}function Ql(d){var y=1;d=d.split(":");const v=[];for(;y>0&&d.length;)v.push(d.shift()),y--;return d.length&&v.push(d.join(":")),v}function On(d,y,v,R){this.j=d,this.i=y,this.l=v,this.S=R||1,this.V=new Le(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new os}function os(){this.i=null,this.g="",this.h=!1}var Rt={},Zt={};function De(d,y,v){d.M=1,d.A=zr(Bt(y)),d.u=v,d.R=!0,Pe(d,null)}function Pe(d,y){d.F=Date.now(),zs(d),d.B=Bt(d.A);var v=d.B,R=d.S;Array.isArray(R)||(R=[String(R)]),Pi(v.i,"t",R),d.C=0,v=d.j.L,d.h=new os,d.g=eu(d.j,v?y:null,!d.u),d.P>0&&(d.O=new X(x(d.Y,d,d.g),d.P)),y=d.V,v=d.g,R=d.ba;var H="readystatechange";Array.isArray(H)||(H&&(yt[0]=H.toString()),H=yt);for(let J=0;J<H.length;J++){const pe=Te(v,H[J],R||y.handleEvent,!1,y.h||y);if(!pe)break;y.g[pe.key]=pe}y=d.J?L(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),Kn(),ve(d.i,d.v,d.B,d.l,d.S,d.u)}On.prototype.ba=function(d){d=d.target;const y=this.O;y&&As(d)==3?y.j():this.Y(d)},On.prototype.Y=function(d){try{if(d==this.g)e:{const He=As(this.g),Ot=this.g.ya(),it=this.g.ca();if(!(He<3)&&(He!=3||this.g&&(this.h.h||this.g.la()||dn(this.g)))){this.K||He!=4||Ot==7||(Ot==8||it<=0?Kn(3):Kn(2)),Bs(this);var y=this.g.ca();this.X=y;var v=qa(this);if(this.o=y==200,Se(this.i,this.v,this.B,this.l,this.S,He,y),this.o){if(this.U&&!this.L){t:{if(this.g){var R,H=this.g;if((R=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(R)){var J=R;break t}}J=null}if(d=J)Ve(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fs(this,d);else{this.o=!1,this.m=3,Mt(12),$n(this),cs(this);break e}}if(this.R){d=!0;let St;for(;!this.K&&this.C<v.length;)if(St=zc(this,v),St==Zt){He==4&&(this.m=4,Mt(14),d=!1),Ve(this.i,this.l,null,"[Incomplete Response]");break}else if(St==Rt){this.m=4,Mt(15),Ve(this.i,this.l,v,"[Invalid Chunk]"),d=!1;break}else Ve(this.i,this.l,St,null),Fs(this,St);if(ki(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||v.length!=0||this.h.h||(this.m=1,Mt(16),d=!1),this.o=this.o&&d,!d)Ve(this.i,this.l,v,"[Invalid Chunked Response]"),$n(this),cs(this);else if(v.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),oo(pe),pe.P=!0,Mt(11))}}else Ve(this.i,this.l,v,null),Fs(this,v);He==4&&$n(this),this.o&&!this.K&&(He==4?Xc(this.j,this):(this.o=!1,zs(this)))}else fa(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,Mt(12)):(this.m=0,Mt(13)),$n(this),cs(this)}}}catch{}finally{}};function qa(d){if(!ki(d))return d.g.la();const y=dn(d.g);if(y==="")return"";let v="";const R=y.length,H=As(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return $n(d),cs(d),"";d.h.i=new h.TextDecoder}for(let J=0;J<R;J++)d.h.h=!0,v+=d.h.i.decode(y[J],{stream:!(H&&J==R-1)});return y.length=0,d.h.g+=v,d.C=0,d.h.g}function ki(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function zc(d,y){var v=d.C,R=y.indexOf(`
`,v);return R==-1?Zt:(v=Number(y.substring(v,R)),isNaN(v)?Rt:(R+=1,R+v>y.length?Zt:(y=y.slice(R,R+v),d.C=R+v,y)))}On.prototype.cancel=function(){this.K=!0,$n(this)};function zs(d){d.T=Date.now()+d.H,Di(d,d.H)}function Di(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=se(x(d.aa,d),y)}function Bs(d){d.D&&(h.clearTimeout(d.D),d.D=null)}On.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(ze(this.i,this.B),this.M!=2&&(Kn(),Mt(17)),$n(this),this.m=2,cs(this)):Di(this,this.T-d)};function cs(d){d.j.I==0||d.K||Xc(d.j,d)}function $n(d){Bs(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,vt(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function Fs(d,y){try{var v=d.j;if(v.I!=0&&(v.g==d||Gs(v.h,d))){if(!d.L&&Gs(v.h,d)&&v.I==3){try{var R=v.Ba.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var H=R;if(H[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<d.F)zi(v),$a(v);else break e;$r(v),Mt(18)}}else v.xa=H[1],0<v.xa-v.K&&H[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=se(x(v.Va,v),6e3));Hs(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ws(v,11)}else if((d.L||v.g==d)&&zi(v),!I(y))for(H=v.Ba.g.parse(y),y=0;y<H.length;y++){let it=H[y];const St=it[0];if(!(St<=v.K))if(v.K=St,it=it[1],v.I==2)if(it[0]=="c"){v.M=it[1],v.ba=it[2];const hs=it[3];hs!=null&&(v.ka=hs,v.j.info("VER="+v.ka));const Js=it[4];Js!=null&&(v.za=Js,v.j.info("SVER="+v.za));const Cs=it[5];Cs!=null&&typeof Cs=="number"&&Cs>0&&(R=1.5*Cs,v.O=R,v.j.info("backChannelRequestTimeoutMs_="+R)),R=v;const Rs=d.g;if(Rs){const Yr=Rs.g?Rs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yr){var J=R.h;J.g||Yr.indexOf("spdy")==-1&&Yr.indexOf("quic")==-1&&Yr.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Xl(J,J.h),J.h=null))}if(R.G){const Bi=Rs.g?Rs.g.getResponseHeader("X-HTTP-Session-Id"):null;Bi&&(R.wa=Bi,ut(R.J,R.G,Bi))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-d.F,v.j.info("Handshake RTT: "+v.T+"ms")),R=v;var pe=d;if(R.na=Zc(R,R.L?R.ba:null,R.W),pe.L){Wl(R.h,pe);var He=pe,Ot=R.O;Ot&&(He.H=Ot),He.D&&(Bs(He),zs(He)),R.g=pe}else $c(R);v.i.length>0&&Xs(v)}else it[0]!="stop"&&it[0]!="close"||Ws(v,7);else v.I==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?Ws(v,7):io(v):it[0]!="noop"&&v.l&&v.l.qa(it),v.A=0)}}Kn(4)}catch{}}var zt=class{constructor(d,y){this.g=d,this.map=y}};function $l(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Yl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Hs(d){return d.h?1:d.g?d.g.size:0}function Gs(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function Xl(d,y){d.g?d.g.add(y):d.h=y}function Wl(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}$l.prototype.cancel=function(){if(this.i=Jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Jl(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const v of d.g.values())y=y.concat(v.G);return y}return D(d.i)}var Bc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mi(d,y){if(d){d=d.split("&");for(let v=0;v<d.length;v++){const R=d[v].indexOf("=");let H,J=null;R>=0?(H=d[v].substring(0,R),J=d[v].substring(R+1)):H=d[v],y(H,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Yn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof Yn?(this.l=d.l,rn(this,d.j),this.o=d.o,this.g=d.g,za(this,d.u),this.h=d.h,Zl(this,Kc(d.i)),this.m=d.m):d&&(y=String(d).match(Bc))?(this.l=!1,rn(this,y[1]||"",!0),this.o=Ks(y[2]||""),this.g=Ks(y[3]||"",!0),za(this,y[4]),this.h=Ks(y[5]||"",!0),Zl(this,y[6]||"",!0),this.m=Ks(y[7]||"")):(this.l=!1,this.i=new Fa(null,this.l))}Yn.prototype.toString=function(){const d=[];var y=this.j;y&&d.push(Br(y,Oi,!0),":");var v=this.g;return(v||y=="file")&&(d.push("//"),(y=this.o)&&d.push(Br(y,Oi,!0),"@"),d.push(Ss(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&d.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&d.push("/"),d.push(Br(v,v.charAt(0)=="/"?eo:Fc,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",Br(v,Hc)),d.join("")},Yn.prototype.resolve=function(d){const y=Bt(this);let v=!!d.j;v?rn(y,d.j):v=!!d.o,v?y.o=d.o:v=!!d.g,v?y.g=d.g:v=d.u!=null;var R=d.h;if(v)za(y,d.u);else if(v=!!d.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var H=y.h.lastIndexOf("/");H!=-1&&(R=y.h.slice(0,H+1)+R)}if(H=R,H==".."||H==".")R="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){R=H.lastIndexOf("/",0)==0,H=H.split("/");const J=[];for(let pe=0;pe<H.length;){const He=H[pe++];He=="."?R&&pe==H.length&&J.push(""):He==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),R&&pe==H.length&&J.push("")):(J.push(He),R=!0)}R=J.join("/")}else R=H}return v?y.h=R:v=d.i.toString()!=="",v?Zl(y,Kc(d.i)):v=!!d.m,v&&(y.m=d.m),y};function Bt(d){return new Yn(d)}function rn(d,y,v){d.j=v?Ks(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function za(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function Zl(d,y,v){y instanceof Fa?(d.i=y,Li(d.i,d.l)):(v||(y=Br(y,Ba)),d.i=new Fa(y,d.l))}function ut(d,y,v){d.i.set(y,v)}function zr(d){return ut(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Ks(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Br(d,y,v){return typeof d=="string"?(d=encodeURI(d).replace(y,Pn),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Pn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Oi=/[#\/\?@]/g,Fc=/[#\?:]/g,eo=/[#\?]/g,Ba=/[#\?@]/g,Hc=/#/g;function Fa(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Ln(d){d.g||(d.g=new Map,d.h=0,d.i&&Mi(d.i,function(y,v){d.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}a=Fa.prototype,a.add=function(d,y){Ln(this),this.i=null,d=Ha(this,d);let v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(y),this.h+=1,this};function Gc(d,y){Ln(d),y=Ha(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function to(d,y){return Ln(d),y=Ha(d,y),d.g.has(y)}a.forEach=function(d,y){Ln(this),this.g.forEach(function(v,R){v.forEach(function(H){d.call(y,H,R,this)},this)},this)};function no(d,y){Ln(d);let v=[];if(typeof y=="string")to(d,y)&&(v=v.concat(d.g.get(Ha(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)v=v.concat(d[y]);return v}a.set=function(d,y){return Ln(this),this.i=null,d=Ha(this,d),to(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},a.get=function(d,y){return d?(d=no(this,d),d.length>0?String(d[0]):y):y};function Pi(d,y,v){Gc(d,y),v.length>0&&(d.i=null,d.g.set(Ha(d,y),D(v)),d.h+=v.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(let R=0;R<y.length;R++){var v=y[R];const H=Ss(v);v=no(this,v);for(let J=0;J<v.length;J++){let pe=H;v[J]!==""&&(pe+="="+Ss(v[J])),d.push(pe)}}return this.i=d.join("&")};function Kc(d){const y=new Fa;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function Ha(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function Li(d,y){y&&!d.j&&(Ln(d),d.i=null,d.g.forEach(function(v,R){const H=R.toLowerCase();R!=H&&(Gc(this,R),Pi(this,H,v))},d)),d.j=y}function Ts(d,y){const v=new fe;if(h.Image){const R=new Image;R.onload=_(us,v,"TestLoadImage: loaded",!0,y,R),R.onerror=_(us,v,"TestLoadImage: error",!1,y,R),R.onabort=_(us,v,"TestLoadImage: abort",!1,y,R),R.ontimeout=_(us,v,"TestLoadImage: timeout",!1,y,R),h.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=d}else y(!1)}function so(d,y){const v=new fe,R=new AbortController,H=setTimeout(()=>{R.abort(),us(v,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:R.signal}).then(J=>{clearTimeout(H),J.ok?us(v,"TestPingServer: ok",!0,y):us(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),us(v,"TestPingServer: error",!1,y)})}function us(d,y,v,R,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),R(v)}catch{}}function Ga(){this.g=new Dn}function Qs(d){this.i=d.Sb||null,this.h=d.ab||!1}w(Qs,Ai),Qs.prototype.g=function(){return new Fr(this.i,this.h)};function Fr(d,y){Et.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Fr,Et),a=Fr.prototype,a.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,js(this)},a.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ka(this)),this.readyState=0},a.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,js(this)),this.g&&(this.readyState=3,js(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Vi(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Vi(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}a.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Ka(this):js(this),this.readyState==3&&Vi(this)}},a.Oa=function(d){this.g&&(this.response=this.responseText=d,Ka(this))},a.Na=function(d){this.g&&(this.response=d,Ka(this))},a.ga=function(){this.g&&Ka(this)};function Ka(d){d.readyState=4,d.l=null,d.j=null,d.B=null,js(d)}a.setRequestHeader=function(d,y){this.A.append(d,y)},a.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,d.push(v[0]+": "+v[1]),v=y.next();return d.join(`\r
`)};function js(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Fr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ds(d){let y="";return je(d,function(v,R){y+=R,y+=":",y+=v,y+=`\r
`}),y}function Hr(d,y,v){e:{for(R in v){var R=!1;break e}R=!0}R||(v=ds(v),typeof d=="string"?v!=null&&Ss(v):ut(d,y,v))}function ft(d){Et.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(ft,Et);var $s=/^https?$/i,ao=["POST","PUT"];a=ft.prototype,a.Fa=function(d){this.H=d},a.ea=function(d,y,v,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():un.g(),this.g.onreadystatechange=A(x(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(J){Gr(this,J);return}if(d=v||"",v=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var H in R)v.set(H,R[H]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const J of R.keys())v.set(J,R.get(J));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(v.keys()).find(J=>J.toLowerCase()=="content-type"),H=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(ao,y,void 0)>=0)||R||H||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,pe]of v)this.g.setRequestHeader(J,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(J){Gr(this,J)}};function Gr(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,ro(d),ha(d)}function ro(d){d.A||(d.A=!0,jt(d,"complete"),jt(d,"error"))}a.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,jt(this,"complete"),jt(this,"abort"),ha(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ha(this,!0)),ft.Z.N.call(this)},a.Ca=function(){this.u||(this.B||this.v||this.j?Kr(this):this.Xa())},a.Xa=function(){Kr(this)};function Kr(d){if(d.h&&typeof u<"u"){if(d.v&&As(d)==4)setTimeout(d.Ca.bind(d),0);else if(jt(d,"readystatechange"),As(d)==4){d.h=!1;try{const J=d.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var R;if(R=J===0){let pe=String(d.D).match(Bc)[1]||null;!pe&&h.self&&h.self.location&&(pe=h.self.location.protocol.slice(0,-1)),R=!$s.test(pe?pe.toLowerCase():"")}v=R}if(v)jt(d,"complete"),jt(d,"success");else{d.o=6;try{var H=As(d)>2?d.g.statusText:""}catch{H=""}d.l=H+" ["+d.ca()+"]",ro(d)}}finally{ha(d)}}}}function ha(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const v=d.g;d.g=null,y||jt(d,"ready");try{v.onreadystatechange=null}catch{}}}a.isActive=function(){return!!this.g};function As(d){return d.g?d.g.readyState:0}a.ca=function(){try{return As(this)>2?this.g.status:-1}catch{return-1}},a.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),Ns(y)}};function dn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function fa(d){const y={};d=(d.g&&As(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<d.length;R++){if(I(d[R]))continue;var v=Ql(d[R]);const H=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const J=y[H]||[];y[H]=J,J.push(v)}Ue(y,function(R){return R.join(", ")})}a.ya=function(){return this.o},a.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ys(d,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||y}function Qa(d){this.za=0,this.i=[],this.j=new fe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ys("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ys("baseRetryDelayMs",5e3,d),this.Za=Ys("retryDelaySeedMs",1e4,d),this.Ta=Ys("forwardChannelMaxRetries",2,d),this.va=Ys("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new $l(d&&d.concurrentRequestLimit),this.Ba=new Ga,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}a=Qa.prototype,a.ka=8,a.I=1,a.connect=function(d,y,v,R){Mt(0),this.W=d,this.H=y||{},v&&R!==void 0&&(this.H.OSID=v,this.H.OAID=R),this.F=this.X,this.J=Zc(this,null,this.W),Xs(this)};function io(d){if(Ui(d),d.I==3){var y=d.V++,v=Bt(d.J);if(ut(v,"SID",d.M),ut(v,"RID",y),ut(v,"TYPE","terminate"),Qr(d,v),y=new On(d,d.j,y),y.M=2,y.A=zr(Bt(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&h.Image&&(new Image().src=y.A,v=!0),v||(y.g=eu(y.j,null),y.g.ea(y.A)),y.F=Date.now(),zs(y)}Jc(d)}function $a(d){d.g&&(oo(d),d.g.cancel(),d.g=null)}function Ui(d){$a(d),d.v&&(h.clearTimeout(d.v),d.v=null),zi(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function Xs(d){if(!Yl(d.h)&&!d.m){d.m=!0;var y=d.Ea;F||N(),W||(F(),W=!0),C.add(y,d),d.D=0}}function qi(d,y){return Hs(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=se(x(d.Ea,d,y),Wc(d,d.D)),d.D++,!0)}a.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const H=new On(this,this.j,d);let J=this.o;if(this.U&&(J?(J=L(J),he(J,this.U)):J=this.U),this.u!==null||this.R||(H.J=J,J=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var R=this.i[v];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Qc(this,H,y),v=Bt(this.J),ut(v,"RID",d),ut(v,"CVER",22),this.G&&ut(v,"X-HTTP-Session-Id",this.G),Qr(this,v),J&&(this.R?y="headers="+Ss(ds(J))+"&"+y:this.u&&Hr(v,this.u,J)),Xl(this.h,H),this.Ra&&ut(v,"TYPE","init"),this.S?(ut(v,"$req",y),ut(v,"SID","null"),H.U=!0,De(H,v,null)):De(H,v,y),this.I=2}}else this.I==3&&(d?lo(this,d):this.i.length==0||Yl(this.h)||lo(this))};function lo(d,y){var v;y?v=y.l:v=d.V++;const R=Bt(d.J);ut(R,"SID",d.M),ut(R,"RID",v),ut(R,"AID",d.K),Qr(d,R),d.u&&d.o&&Hr(R,d.u,d.o),v=new On(d,d.j,v,d.D+1),d.u===null&&(v.J=d.o),y&&(d.i=y.G.concat(d.i)),y=Qc(d,v,1e3),v.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Xl(d.h,v),De(v,R,y)}function Qr(d,y){d.H&&je(d.H,function(v,R){ut(y,R,v)}),d.l&&je({},function(v,R){ut(y,R,v)})}function Qc(d,y,v){v=Math.min(d.i.length,v);const R=d.l?x(d.l.Ka,d.l,d):null;e:{var H=d.i;let He=-1;for(;;){const Ot=["count="+v];He==-1?v>0?(He=H[0].g,Ot.push("ofs="+He)):He=0:Ot.push("ofs="+He);let it=!0;for(let St=0;St<v;St++){var J=H[St].g;const hs=H[St].map;if(J-=He,J<0)He=Math.max(0,H[St].g-100),it=!1;else try{J="req"+J+"_"||"";try{var pe=hs instanceof Map?hs:Object.entries(hs);for(const[Js,Cs]of pe){let Rs=Cs;p(Cs)&&(Rs=At(Cs)),Ot.push(J+Js+"="+encodeURIComponent(Rs))}}catch(Js){throw Ot.push(J+"type="+encodeURIComponent("_badmap")),Js}}catch{R&&R(hs)}}if(it){pe=Ot.join("&");break e}}pe=void 0}return d=d.i.splice(0,v),y.G=d,pe}function $c(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;F||N(),W||(F(),W=!0),C.add(y,d),d.A=0}}function $r(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=se(x(d.Da,d),Wc(d,d.A)),d.A++,!0)}a.Da=function(){if(this.v=null,Yc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=se(x(this.Wa,this),d)}},a.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Mt(10),$a(this),Yc(this))};function oo(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function Yc(d){d.g=new On(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=Bt(d.na);ut(y,"RID","rpc"),ut(y,"SID",d.M),ut(y,"AID",d.K),ut(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&ut(y,"TO",d.ia),ut(y,"TYPE","xmlhttp"),Qr(d,y),d.u&&d.o&&Hr(y,d.u,d.o),d.O&&(d.g.H=d.O);var v=d.g;d=d.ba,v.M=1,v.A=zr(Bt(y)),v.u=null,v.R=!0,Pe(v,d)}a.Va=function(){this.C!=null&&(this.C=null,$a(this),$r(this),Mt(19))};function zi(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function Xc(d,y){var v=null;if(d.g==y){zi(d),oo(d),d.g=null;var R=2}else if(Gs(d.h,y))v=y.G,Wl(d.h,y),R=1;else return;if(d.I!=0){if(y.o)if(R==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var H=d.D;R=Ua(),jt(R,new Qn(R,v)),Xs(d)}else $c(d);else if(H=y.m,H==3||H==0&&y.X>0||!(R==1&&qi(d,y)||R==2&&$r(d)))switch(v&&v.length>0&&(y=d.h,y.i=y.i.concat(v)),H){case 1:Ws(d,5);break;case 4:Ws(d,10);break;case 3:Ws(d,6);break;default:Ws(d,2)}}}function Wc(d,y){let v=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(v*=2),v*y}function Ws(d,y){if(d.j.info("Error code "+y),y==2){var v=x(d.bb,d),R=d.Ua;const H=!R;R=new Yn(R||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||rn(R,"https"),zr(R),H?Ts(R.toString(),v):so(R.toString(),v)}else Mt(2);d.I=0,d.l&&d.l.pa(y),Jc(d),Ui(d)}a.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function Jc(d){if(d.I=0,d.ja=[],d.l){const y=Jl(d.h);(y.length!=0||d.i.length!=0)&&(V(d.ja,y),V(d.ja,d.i),d.h.i.length=0,D(d.i),d.i.length=0),d.l.oa()}}function Zc(d,y,v){var R=v instanceof Yn?Bt(v):new Yn(v);if(R.g!="")y&&(R.g=y+"."+R.g),za(R,R.u);else{var H=h.location;R=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const J=new Yn(null);R&&rn(J,R),y&&(J.g=y),H&&za(J,H),v&&(J.h=v),R=J}return v=d.G,y=d.wa,v&&y&&ut(R,v,y),ut(R,"VER",d.ka),Qr(d,R),R}function eu(d,y,v){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new ft(new Qs({ab:v})):new ft(d.ma),y.Fa(d.L),y}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function tu(){}a=tu.prototype,a.ra=function(){},a.qa=function(){},a.pa=function(){},a.oa=function(){},a.isActive=function(){return!0},a.Ka=function(){};function Ya(){}Ya.prototype.g=function(d,y){return new An(d,y)};function An(d,y){Et.call(this),this.g=new Qa(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!I(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new ma(this)}w(An,Et),An.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){io(this.g)},An.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var v={};v.__data__=d,d=v}else this.v&&(v={},v.__data__=At(d),d=v);y.i.push(new zt(y.Ya++,d)),y.I==3&&Xs(y)},An.prototype.N=function(){this.g.l=null,delete this.j,io(this.g),delete this.g,An.Z.N.call(this)};function nu(d){Wt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const v in y){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}w(nu,Wt);function su(){Mn.call(this),this.status=1}w(su,Mn);function ma(d){this.g=d}w(ma,tu),ma.prototype.ra=function(){jt(this.g,"a")},ma.prototype.qa=function(d){jt(this.g,new nu(d))},ma.prototype.pa=function(d){jt(this.g,new su)},ma.prototype.oa=function(){jt(this.g,"b")},Ya.prototype.createWebChannel=Ya.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,t1=function(){return new Ya},e1=function(){return Ua()},Zv=Ct,zm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wn.NO_ERROR=0,wn.TIMEOUT=8,wn.HTTP_ERROR=6,gd=wn,Jt.COMPLETE="complete",Jv=Jt,Ci.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",Et.prototype.listen=Et.prototype.J,Zo=Ci,ft.prototype.listenOnce=ft.prototype.K,ft.prototype.getLastError=ft.prototype.Ha,ft.prototype.getLastErrorCode=ft.prototype.ya,ft.prototype.getStatus=ft.prototype.ca,ft.prototype.getResponseJson=ft.prototype.La,ft.prototype.getResponseText=ft.prototype.la,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Fa,Wv=ft}).apply(typeof cd<"u"?cd:typeof self<"u"?self:typeof window<"u"?window:{});const ob="@firebase/firestore",cb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sn.UNAUTHENTICATED=new Sn(null),Sn.GOOGLE_CREDENTIALS=new Sn("google-credentials-uid"),Sn.FIRST_PARTY=new Sn("first-party-uid"),Sn.MOCK_USER=new Sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new bp("@firebase/firestore");function _l(){return vi.logLevel}function Ne(a,...e){if(vi.logLevel<=Je.DEBUG){const n=e.map(wp);vi.debug(`Firestore (${Bl}): ${a}`,...n)}}function Ma(a,...e){if(vi.logLevel<=Je.ERROR){const n=e.map(wp);vi.error(`Firestore (${Bl}): ${a}`,...n)}}function kl(a,...e){if(vi.logLevel<=Je.WARN){const n=e.map(wp);vi.warn(`Firestore (${Bl}): ${a}`,...n)}}function wp(a){if(typeof a=="string")return a;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(a)}catch{return a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(a,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,n1(a,r,n)}function n1(a,e,n){let r=`FIRESTORE (${Bl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${a.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ma(r),new Error(r)}function ct(a,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,a||n1(e,o,r)}function Fe(a,e){return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Va{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Sn.UNAUTHENTICATED)))}shutdown(){}}class QS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class $S{constructor(e){this.t=e,this.currentUser=Sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ct(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let u=new Ar;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ar,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ar)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string",31837,{l:r}),new s1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string",2055,{h:e}),new Sn(e)}}class YS{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XS{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new YS(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ub{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_s(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ct(this.o===void 0,3512);const r=u=>{u.error!=null&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,Ne("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ub(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ct(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ub(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(a);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<a;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=JS(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=e.charAt(o[u]%62))}return r}}function Ze(a,e){return a<e?-1:a>e?1:0}function Bm(a,e){const n=Math.min(a.length,e.length);for(let r=0;r<n;r++){const o=a.charAt(r),u=e.charAt(r);if(o!==u)return Sm(o)===Sm(u)?Ze(o,u):Sm(o)?1:-1}return Ze(a.length,e.length)}const ZS=55296,eT=57343;function Sm(a){const e=a.charCodeAt(0);return e>=ZS&&e<=eT}function Dl(a,e,n){return a.length===e.length&&a.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="__name__";class sa{constructor(e,n,r){n===void 0?n=0:n>e.length&&Oe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Oe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return sa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sa?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const u=sa.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Ze(e.length,n.length)}static compareSegments(e,n){const r=sa.isNumericId(e),o=sa.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?sa.extractNumericId(e).compare(sa.extractNumericId(n)):Bm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return jr.fromString(e.substring(4,e.length-2))}}class bt extends sa{construct(e,n,r){return new bt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new bt(n)}static emptyPath(){return new bt([])}}const tT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yn extends sa{construct(e,n,r){return new yn(e,n,r)}static isValidIdentifier(e){return tT.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===db}static keyField(){return new yn([db])}static fromServerFormat(e){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new _e(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new _e(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new _e(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(r+=p,o++):(u(),o++)}if(u(),h)throw new _e(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yn(n)}static emptyPath(){return new yn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(bt.fromString(e))}static fromName(e){return new Re(bt.fromString(e).popFirst(5))}static empty(){return new Re(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return bt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new bt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(a,e,n){if(!n)throw new _e(le.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function nT(a,e,n,r){if(e===!0&&r===!0)throw new _e(le.INVALID_ARGUMENT,`${a} and ${n} cannot be used together.`)}function hb(a){if(!Re.isDocumentKey(a))throw new _e(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function fb(a){if(Re.isDocumentKey(a))throw new _e(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function r1(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function Jd(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(a);return e?`a custom ${e} object`:"an object"}}return typeof a=="function"?"a function":Oe(12329,{type:typeof a})}function as(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new _e(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jd(a);throw new _e(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return a}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(a,e){const n={typeString:a};return e&&(n.value=e),n}function jc(a,e){if(!r1(a))throw new _e(le.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in a)){n=`JSON missing required field: '${r}'`;break}const h=a[r];if(o&&typeof h!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new _e(le.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=-62135596800,pb=1e6;class Nt{static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*pb);return new Nt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new _e(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _e(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<mb)throw new _e(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pb}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(jc(e,Nt._jsonSchema))return new Nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-mb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nt._jsonSchemaVersion="firestore/timestamp/1.0",Nt._jsonSchema={type:Yt("string",Nt._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{static fromTimestamp(e){return new qe(e)}static min(){return new qe(new Nt(0,0))}static max(){return new qe(new Nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=-1;function sT(a,e){const n=a.toTimestamp().seconds,r=a.toTimestamp().nanoseconds+1,o=qe.fromTimestamp(r===1e9?new Nt(n+1,0):new Nt(n,r));return new Rr(o,Re.empty(),e)}function aT(a){return new Rr(a.readTime,a.key,mc)}class Rr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Rr(qe.min(),Re.empty(),mc)}static max(){return new Rr(qe.max(),Re.empty(),mc)}}function rT(a,e){let n=a.readTime.compareTo(e.readTime);return n!==0?n:(n=Re.comparator(a.documentKey,e.documentKey),n!==0?n:Ze(a.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(a){if(a.code!==le.FAILED_PRECONDITION||a.message!==iT)throw a;Ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ce(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ce?n:ce.resolve(n)}catch(n){return ce.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ce.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ce.reject(n)}static resolve(e){return new ce(((n,r)=>{n(e)}))}static reject(e){return new ce(((n,r)=>{r(e)}))}static waitFor(e){return new ce(((n,r)=>{let o=0,u=0,h=!1;e.forEach((p=>{++o,p.next((()=>{++u,h&&u===o&&n()}),(g=>r(g)))})),h=!0,u===o&&n()}))}static or(e){let n=ce.resolve(!1);for(const r of e)n=n.next((o=>o?ce.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,u)=>{r.push(n.call(this,o,u))})),this.waitFor(r)}static mapArray(e,n){return new ce(((r,o)=>{const u=e.length,h=new Array(u);let p=0;for(let g=0;g<u;g++){const x=g;n(e[x]).next((_=>{h[x]=_,++p,p===u&&r(h)}),(_=>o(_)))}}))}static doWhile(e,n){return new ce(((r,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):r()};u()}))}}function oT(a){const e=a.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Hl(a){return a.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep=-1;function eh(a){return a==null}function Id(a){return a===0&&1/a==-1/0}function cT(a){return typeof a=="number"&&Number.isInteger(a)&&!Id(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="";function uT(a){let e="";for(let n=0;n<a.length;n++)e.length>0&&(e=gb(e)),e=dT(a.get(n),e);return gb(e)}function dT(a,e){let n=e;const r=a.length;for(let o=0;o<r;o++){const u=a.charAt(o);switch(u){case"\0":n+="";break;case i1:n+="";break;default:n+=u}}return n}function gb(a){return a+i1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(a){let e=0;for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e++;return e}function Pr(a,e){for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e(n,a[n])}function l1(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n){this.comparator=e,this.root=n||xn.EMPTY}insert(e,n){return new It(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xn.BLACK,null,null))}remove(e){return new It(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ud(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ud(this.root,e,this.comparator,!1)}getReverseIterator(){return new ud(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ud(this.root,e,this.comparator,!0)}}class ud{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xn{constructor(e,n,r,o,u){this.key=e,this.value=n,this.color=r??xn.RED,this.left=o??xn.EMPTY,this.right=u??xn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,u){return new xn(e??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return xn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return xn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}}xn.EMPTY=null,xn.RED=!0,xn.BLACK=!1;xn.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,n,r,o,u){return this}insert(e,n,r){return new xn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yb(this.data.getIterator())}getIteratorFrom(e){return new yb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof nn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new nn(this.comparator);return n.data=e,n}}class yb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.fields=e,e.sort(yn.comparator)}static empty(){return new ss([])}unionWith(e){let n=new nn(yn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ss(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Dl(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new o1("Invalid base64 string: "+u):u}})(e);return new bn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new bn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bn.EMPTY_BYTE_STRING=new bn("");const hT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ir(a){if(ct(!!a,39018),typeof a=="string"){let e=0;const n=hT.exec(a);if(ct(!!n,46558,{timestamp:a}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(a);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vt(a.seconds),nanos:Vt(a.nanos)}}function Vt(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function kr(a){return typeof a=="string"?bn.fromBase64String(a):bn.fromUint8Array(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="server_timestamp",u1="__type__",d1="__previous_value__",h1="__local_write_time__";function Sp(a){var n,r;return((r=(((n=a==null?void 0:a.mapValue)==null?void 0:n.fields)||{})[u1])==null?void 0:r.stringValue)===c1}function th(a){const e=a.mapValue.fields[d1];return Sp(e)?th(e):e}function pc(a){const e=Ir(a.mapValue.fields[h1].timestampValue);return new Nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n,r,o,u,h,p,g,x,_){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=x,this.isUsingEmulator=_}}const kd="(default)";class gc{constructor(e,n){this.projectId=e,this.database=n||kd}static empty(){return new gc("","")}get isDefaultDatabase(){return this.database===kd}isEqual(e){return e instanceof gc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="__type__",mT="__max__",dd={mapValue:{}},m1="__vector__",Dd="value";function Dr(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?Sp(a)?4:gT(a)?9007199254740991:pT(a)?10:11:Oe(28295,{value:a})}function ua(a,e){if(a===e)return!0;const n=Dr(a);if(n!==Dr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return pc(a).isEqual(pc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=Ir(o.timestampValue),p=Ir(u.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(a,e);case 5:return a.stringValue===e.stringValue;case 6:return(function(o,u){return kr(o.bytesValue).isEqual(kr(u.bytesValue))})(a,e);case 7:return a.referenceValue===e.referenceValue;case 8:return(function(o,u){return Vt(o.geoPointValue.latitude)===Vt(u.geoPointValue.latitude)&&Vt(o.geoPointValue.longitude)===Vt(u.geoPointValue.longitude)})(a,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Vt(o.integerValue)===Vt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=Vt(o.doubleValue),p=Vt(u.doubleValue);return h===p?Id(h)===Id(p):isNaN(h)&&isNaN(p)}return!1})(a,e);case 9:return Dl(a.arrayValue.values||[],e.arrayValue.values||[],ua);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},p=u.mapValue.fields||{};if(xb(h)!==xb(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!ua(h[g],p[g])))return!1;return!0})(a,e);default:return Oe(52216,{left:a})}}function xc(a,e){return(a.values||[]).find((n=>ua(n,e)))!==void 0}function Ml(a,e){if(a===e)return 0;const n=Dr(a),r=Dr(e);if(n!==r)return Ze(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ze(a.booleanValue,e.booleanValue);case 2:return(function(u,h){const p=Vt(u.integerValue||u.doubleValue),g=Vt(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(a,e);case 3:return bb(a.timestampValue,e.timestampValue);case 4:return bb(pc(a),pc(e));case 5:return Bm(a.stringValue,e.stringValue);case 6:return(function(u,h){const p=kr(u),g=kr(h);return p.compareTo(g)})(a.bytesValue,e.bytesValue);case 7:return(function(u,h){const p=u.split("/"),g=h.split("/");for(let x=0;x<p.length&&x<g.length;x++){const _=Ze(p[x],g[x]);if(_!==0)return _}return Ze(p.length,g.length)})(a.referenceValue,e.referenceValue);case 8:return(function(u,h){const p=Ze(Vt(u.latitude),Vt(h.latitude));return p!==0?p:Ze(Vt(u.longitude),Vt(h.longitude))})(a.geoPointValue,e.geoPointValue);case 9:return vb(a.arrayValue,e.arrayValue);case 10:return(function(u,h){var A,D,V,M;const p=u.fields||{},g=h.fields||{},x=(A=p[Dd])==null?void 0:A.arrayValue,_=(D=g[Dd])==null?void 0:D.arrayValue,w=Ze(((V=x==null?void 0:x.values)==null?void 0:V.length)||0,((M=_==null?void 0:_.values)==null?void 0:M.length)||0);return w!==0?w:vb(x,_)})(a.mapValue,e.mapValue);case 11:return(function(u,h){if(u===dd.mapValue&&h===dd.mapValue)return 0;if(u===dd.mapValue)return 1;if(h===dd.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),x=h.fields||{},_=Object.keys(x);g.sort(),_.sort();for(let w=0;w<g.length&&w<_.length;++w){const A=Bm(g[w],_[w]);if(A!==0)return A;const D=Ml(p[g[w]],x[_[w]]);if(D!==0)return D}return Ze(g.length,_.length)})(a.mapValue,e.mapValue);default:throw Oe(23264,{he:n})}}function bb(a,e){if(typeof a=="string"&&typeof e=="string"&&a.length===e.length)return Ze(a,e);const n=Ir(a),r=Ir(e),o=Ze(n.seconds,r.seconds);return o!==0?o:Ze(n.nanos,r.nanos)}function vb(a,e){const n=a.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=Ml(n[o],r[o]);if(u)return u}return Ze(n.length,r.length)}function Ol(a){return Fm(a)}function Fm(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(n){const r=Ir(n);return`time(${r.seconds},${r.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(n){return kr(n).toBase64()})(a.bytesValue):"referenceValue"in a?(function(n){return Re.fromName(n).toString()})(a.referenceValue):"geoPointValue"in a?(function(n){return`geo(${n.latitude},${n.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=Fm(u);return r+"]"})(a.arrayValue):"mapValue"in a?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of r)u?u=!1:o+=",",o+=`${h}:${Fm(n.fields[h])}`;return o+"}"})(a.mapValue):Oe(61005,{value:a})}function xd(a){switch(Dr(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=th(a);return e?16+xd(e):16;case 5:return 2*a.stringValue.length;case 6:return kr(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+xd(u)),0)})(a.arrayValue);case 10:case 11:return(function(r){let o=0;return Pr(r.fields,((u,h)=>{o+=u.length+xd(h)})),o})(a.mapValue);default:throw Oe(13486,{value:a})}}function _b(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function Hm(a){return!!a&&"integerValue"in a}function Tp(a){return!!a&&"arrayValue"in a}function wb(a){return!!a&&"nullValue"in a}function Nb(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function yd(a){return!!a&&"mapValue"in a}function pT(a){var n,r;return((r=(((n=a==null?void 0:a.mapValue)==null?void 0:n.fields)||{})[f1])==null?void 0:r.stringValue)===m1}function ac(a){if(a.geoPointValue)return{geoPointValue:{...a.geoPointValue}};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:{...a.timestampValue}};if(a.mapValue){const e={mapValue:{fields:{}}};return Pr(a.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ac(r))),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(a.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ac(a.arrayValue.values[n]);return e}return{...a}}function gT(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===mT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!yd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ac(n)}setAll(e){let n=yn.emptyPath(),r={},o=[];e.forEach(((h,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=p.popLast()}h?r[p.lastSegment()]=ac(h):o.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(e){const n=this.field(e.popLast());yd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ua(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];yd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){Pr(n,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new Hn(ac(this.value))}}function p1(a){const e=[];return Pr(a.fields,((n,r)=>{const o=new yn([n]);if(yd(r)){const u=p1(r.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new ss(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n,r,o,u,h,p){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Tn(e,0,qe.min(),qe.min(),qe.min(),Hn.empty(),0)}static newFoundDocument(e,n,r,o){return new Tn(e,1,n,qe.min(),r,o,0)}static newNoDocument(e,n){return new Tn(e,2,n,qe.min(),qe.min(),Hn.empty(),0)}static newUnknownDocument(e,n){return new Tn(e,3,n,qe.min(),qe.min(),Hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n){this.position=e,this.inclusive=n}}function Eb(a,e,n){let r=0;for(let o=0;o<a.position.length;o++){const u=e[o],h=a.position[o];if(u.field.isKeyField()?r=Re.comparator(Re.fromName(h.referenceValue),n.key):r=Ml(h,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Sb(a,e){if(a===null)return e===null;if(e===null||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let n=0;n<a.position.length;n++)if(!ua(a.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n="asc"){this.field=e,this.dir=n}}function xT(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{}class $t extends g1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new bT(e,n,r):n==="array-contains"?new wT(e,r):n==="in"?new NT(e,r):n==="not-in"?new ET(e,r):n==="array-contains-any"?new ST(e,r):new $t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new vT(e,r):new _T(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ml(n,this.value)):n!==null&&Dr(this.value)===Dr(n)&&this.matchesComparison(Ml(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ps extends g1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ps(e,n)}matches(e){return x1(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function x1(a){return a.op==="and"}function y1(a){return yT(a)&&x1(a)}function yT(a){for(const e of a.filters)if(e instanceof Ps)return!1;return!0}function Gm(a){if(a instanceof $t)return a.field.canonicalString()+a.op.toString()+Ol(a.value);if(y1(a))return a.filters.map((e=>Gm(e))).join(",");{const e=a.filters.map((n=>Gm(n))).join(",");return`${a.op}(${e})`}}function b1(a,e){return a instanceof $t?(function(r,o){return o instanceof $t&&r.op===o.op&&r.field.isEqual(o.field)&&ua(r.value,o.value)})(a,e):a instanceof Ps?(function(r,o){return o instanceof Ps&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,h,p)=>u&&b1(h,o.filters[p])),!0):!1})(a,e):void Oe(19439)}function v1(a){return a instanceof $t?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ol(n.value)}`})(a):a instanceof Ps?(function(n){return n.op.toString()+" {"+n.getFilters().map(v1).join(" ,")+"}"})(a):"Filter"}class bT extends $t{constructor(e,n,r){super(e,n,r),this.key=Re.fromName(r.referenceValue)}matches(e){const n=Re.comparator(e.key,this.key);return this.matchesComparison(n)}}class vT extends $t{constructor(e,n){super(e,"in",n),this.keys=_1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class _T extends $t{constructor(e,n){super(e,"not-in",n),this.keys=_1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function _1(a,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>Re.fromName(r.referenceValue)))}class wT extends $t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tp(n)&&xc(n.arrayValue,this.value)}}class NT extends $t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xc(this.value.arrayValue,n)}}class ET extends $t{constructor(e,n){super(e,"not-in",n)}matches(e){if(xc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!xc(this.value.arrayValue,n)}}class ST extends $t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>xc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n=null,r=[],o=[],u=null,h=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=p,this.Te=null}}function Tb(a,e=null,n=[],r=[],o=null,u=null,h=null){return new TT(a,e,n,r,o,u,h)}function jp(a){const e=Fe(a);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Gm(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),eh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Ol(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Ol(r))).join(",")),e.Te=n}return e.Te}function Ap(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<a.orderBy.length;n++)if(!xT(a.orderBy[n],e.orderBy[n]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let n=0;n<a.filters.length;n++)if(!b1(a.filters[n],e.filters[n]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!Sb(a.startAt,e.startAt)&&Sb(a.endAt,e.endAt)}function Km(a){return Re.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n=null,r=[],o=[],u=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function jT(a,e,n,r,o,u,h,p){return new Ac(a,e,n,r,o,u,h,p)}function Cp(a){return new Ac(a)}function jb(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function w1(a){return a.collectionGroup!==null}function rc(a){const e=Fe(a);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new nn(yn.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((x=>{x.isInequality()&&(p=p.add(x.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Od(u,r))})),n.has(yn.keyField().canonicalString())||e.Ie.push(new Od(yn.keyField(),r))}return e.Ie}function aa(a){const e=Fe(a);return e.Ee||(e.Ee=AT(e,rc(a))),e.Ee}function AT(a,e){if(a.limitType==="F")return Tb(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Od(o.field,u)}));const n=a.endAt?new Md(a.endAt.position,a.endAt.inclusive):null,r=a.startAt?new Md(a.startAt.position,a.startAt.inclusive):null;return Tb(a.path,a.collectionGroup,e,a.filters,a.limit,n,r)}}function Qm(a,e){const n=a.filters.concat([e]);return new Ac(a.path,a.collectionGroup,a.explicitOrderBy.slice(),n,a.limit,a.limitType,a.startAt,a.endAt)}function $m(a,e,n){return new Ac(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,n,a.startAt,a.endAt)}function nh(a,e){return Ap(aa(a),aa(e))&&a.limitType===e.limitType}function N1(a){return`${jp(aa(a))}|lt:${a.limitType}`}function wl(a){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>v1(o))).join(", ")}]`),eh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>Ol(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>Ol(o))).join(",")),`Target(${r})`})(aa(a))}; limitType=${a.limitType})`}function sh(a,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Re.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(a,e)&&(function(r,o){for(const u of rc(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(a,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(a,e)&&(function(r,o){return!(r.startAt&&!(function(h,p,g){const x=Eb(h,p,g);return h.inclusive?x<=0:x<0})(r.startAt,rc(r),o)||r.endAt&&!(function(h,p,g){const x=Eb(h,p,g);return h.inclusive?x>=0:x>0})(r.endAt,rc(r),o))})(a,e)}function CT(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function E1(a){return(e,n)=>{let r=!1;for(const o of rc(a)){const u=RT(o,e,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function RT(a,e,n){const r=a.field.isKeyField()?Re.comparator(e.key,n.key):(function(u,h,p){const g=h.data.field(u),x=p.data.field(u);return g!==null&&x!==null?Ml(g,x):Oe(42886)})(a.field,e,n);switch(a.dir){case"asc":return r;case"desc":return-1*r;default:return Oe(19790,{direction:a.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Pr(this.inner,((n,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return l1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=new It(Re.comparator);function Oa(){return IT}const S1=new It(Re.comparator);function ec(...a){let e=S1;for(const n of a)e=e.insert(n.key,n);return e}function T1(a){let e=S1;return a.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function pi(){return ic()}function j1(){return ic()}function ic(){return new Ei((a=>a.toString()),((a,e)=>a.isEqual(e)))}const kT=new It(Re.comparator),DT=new nn(Re.comparator);function et(...a){let e=DT;for(const n of a)e=e.add(n);return e}const MT=new nn(Ze);function OT(){return MT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Id(e)?"-0":e}}function A1(a){return{integerValue:""+a}}function C1(a,e){return cT(e)?A1(e):Rp(a,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(){this._=void 0}}function PT(a,e,n){return a instanceof Pd?(function(o,u){const h={fields:{[u1]:{stringValue:c1},[h1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Sp(u)&&(u=th(u)),u&&(h.fields[d1]=u),{mapValue:h}})(n,e):a instanceof yc?I1(a,e):a instanceof bc?k1(a,e):(function(o,u){const h=R1(o,u),p=Ab(h)+Ab(o.Ae);return Hm(h)&&Hm(o.Ae)?A1(p):Rp(o.serializer,p)})(a,e)}function LT(a,e,n){return a instanceof yc?I1(a,e):a instanceof bc?k1(a,e):n}function R1(a,e){return a instanceof vc?(function(r){return Hm(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class Pd extends ah{}class yc extends ah{constructor(e){super(),this.elements=e}}function I1(a,e){const n=D1(e);for(const r of a.elements)n.some((o=>ua(o,r)))||n.push(r);return{arrayValue:{values:n}}}class bc extends ah{constructor(e){super(),this.elements=e}}function k1(a,e){let n=D1(e);for(const r of a.elements)n=n.filter((o=>!ua(o,r)));return{arrayValue:{values:n}}}class vc extends ah{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ab(a){return Vt(a.integerValue||a.doubleValue)}function D1(a){return Tp(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,n){this.field=e,this.transform=n}}function UT(a,e){return a.field.isEqual(e.field)&&(function(r,o){return r instanceof yc&&o instanceof yc||r instanceof bc&&o instanceof bc?Dl(r.elements,o.elements,ua):r instanceof vc&&o instanceof vc?ua(r.Ae,o.Ae):r instanceof Pd&&o instanceof Pd})(a.transform,e.transform)}class qT{constructor(e,n){this.version=e,this.transformResults=n}}class kn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bd(a,e){return a.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(a.updateTime):a.exists===void 0||a.exists===e.isFoundDocument()}class rh{}function M1(a,e){if(!a.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return a.isNoDocument()?new ih(a.key,kn.none()):new Cc(a.key,a.data,kn.none());{const n=a.data,r=Hn.empty();let o=new nn(yn.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?r.delete(u):r.set(u,h),o=o.add(u)}return new Lr(a.key,r,new ss(o.toArray()),kn.none())}}function zT(a,e,n){a instanceof Cc?(function(o,u,h){const p=o.value.clone(),g=Rb(o.fieldTransforms,u,h.transformResults);p.setAll(g),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(a,e,n):a instanceof Lr?(function(o,u,h){if(!bd(o.precondition,u))return void u.convertToUnknownDocument(h.version);const p=Rb(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(O1(o)),g.setAll(p),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(a,e,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function lc(a,e,n,r){return a instanceof Cc?(function(u,h,p,g){if(!bd(u.precondition,h))return p;const x=u.value.clone(),_=Ib(u.fieldTransforms,g,h);return x.setAll(_),h.convertToFoundDocument(h.version,x).setHasLocalMutations(),null})(a,e,n,r):a instanceof Lr?(function(u,h,p,g){if(!bd(u.precondition,h))return p;const x=Ib(u.fieldTransforms,g,h),_=h.data;return _.setAll(O1(u)),_.setAll(x),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(a,e,n,r):(function(u,h,p){return bd(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(a,e,n)}function BT(a,e){let n=null;for(const r of a.fieldTransforms){const o=e.data.field(r.field),u=R1(r.transform,o||null);u!=null&&(n===null&&(n=Hn.empty()),n.set(r.field,u))}return n||null}function Cb(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Dl(r,o,((u,h)=>UT(u,h)))})(a.fieldTransforms,e.fieldTransforms)&&(a.type===0?a.value.isEqual(e.value):a.type!==1||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask))}class Cc extends rh{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Lr extends rh{constructor(e,n,r,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function O1(a){const e=new Map;return a.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=a.data.field(n);e.set(n,r)}})),e}function Rb(a,e,n){const r=new Map;ct(a.length===n.length,32656,{Re:n.length,Ve:a.length});for(let o=0;o<n.length;o++){const u=a[o],h=u.transform,p=e.data.field(u.field);r.set(u.field,LT(h,p,n[o]))}return r}function Ib(a,e,n){const r=new Map;for(const o of a){const u=o.transform,h=n.data.field(o.field);r.set(o.field,PT(u,h,e))}return r}class ih extends rh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FT extends rh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&zT(u,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=j1();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let p=this.applyToLocalView(h,u.mutatedFields);p=n.has(o.key)?null:p;const g=M1(h,p);g!==null&&r.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(qe.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),et())}isEqual(e){return this.batchId===e.batchId&&Dl(this.mutations,e.mutations,((n,r)=>Cb(n,r)))&&Dl(this.baseMutations,e.baseMutations,((n,r)=>Cb(n,r)))}}class Ip{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){ct(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return kT})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new Ip(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt,nt;function QT(a){switch(a){case le.OK:return Oe(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Oe(15467,{code:a})}}function P1(a){if(a===void 0)return Ma("GRPC error has no .code"),le.UNKNOWN;switch(a){case Qt.OK:return le.OK;case Qt.CANCELLED:return le.CANCELLED;case Qt.UNKNOWN:return le.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return le.INTERNAL;case Qt.UNAVAILABLE:return le.UNAVAILABLE;case Qt.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Qt.NOT_FOUND:return le.NOT_FOUND;case Qt.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Qt.ABORTED:return le.ABORTED;case Qt.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Qt.DATA_LOSS:return le.DATA_LOSS;default:return Oe(39323,{code:a})}}(nt=Qt||(Qt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=new jr([4294967295,4294967295],0);function kb(a){const e=$T().encode(a),n=new Xv;return n.update(e),new Uint8Array(n.digest())}function Db(a){const e=new DataView(a.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new jr([n,r],0),new jr([o,u],0)]}class kp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new tc(`Invalid padding: ${n}`);if(r<0)throw new tc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new tc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new tc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=jr.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(jr.fromNumber(r)));return o.compare(YT)===1&&(o=new jr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=kb(e),[r,o]=Db(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(r,o,u);if(!this.we(h))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new kp(u,o,n);return r.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const n=kb(e),[r,o]=Db(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(r,o,u);this.Se(h)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n,r,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,Rc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new lh(qe.min(),o,new It(Ze),Oa(),et())}}class Rc{constructor(e,n,r,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Rc(r,n,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n,r,o){this.be=e,this.removedTargetIds=n,this.key=r,this.De=o}}class L1{constructor(e,n){this.targetId=e,this.Ce=n}}class V1{constructor(e,n,r=bn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class Mb{constructor(){this.ve=0,this.Fe=Ob(),this.Me=bn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=et(),n=et(),r=et();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Oe(38017,{changeType:u})}})),new Rc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Ob()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ct(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class XT{constructor(e){this.Ge=e,this.ze=new Map,this.je=Oa(),this.Je=hd(),this.He=hd(),this.Ye=new It(Ze)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Oe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Km(u))if(r===0){const h=new Re(u.path);this.et(n,h,Tn.newNoDocument(h,qe.min()))}else ct(r===1,20013,{expectedCount:r});else{const h=this._t(n);if(h!==r){const p=this.ut(e),g=p?this.ct(p,e,h):1;if(g!==0){this.it(n);const x=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,x)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let h,p;try{h=kr(r).toUint8Array()}catch(g){if(g instanceof o1)return kl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new kp(h,o,u)}catch(g){return kl(g instanceof tc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((u=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const p=this.ot(h);if(p){if(u.current&&Km(p.target)){const g=new Re(p.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Tn.newNoDocument(g,e))}u.Be&&(n.set(h,u.ke()),u.qe())}}));let r=et();this.He.forEach(((u,h)=>{let p=!0;h.forEachWhile((g=>{const x=this.ot(g);return!x||x.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new lh(e,n,this.Ye,this.je,r);return this.je=Oa(),this.Je=hd(),this.He=hd(),this.Ye=new It(Ze),o}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Mb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new nn(Ze),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new nn(Ze),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ne("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Mb),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function hd(){return new It(Re.comparator)}function Ob(){return new It(Re.comparator)}const WT={asc:"ASCENDING",desc:"DESCENDING"},JT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZT={and:"AND",or:"OR"};class ej{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ym(a,e){return a.useProto3Json||eh(e)?e:{value:e}}function Ld(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function U1(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function tj(a,e){return Ld(a,e.toTimestamp())}function ra(a){return ct(!!a,49232),qe.fromTimestamp((function(n){const r=Ir(n);return new Nt(r.seconds,r.nanos)})(a))}function Dp(a,e){return Xm(a,e).canonicalString()}function Xm(a,e){const n=(function(o){return new bt(["projects",o.projectId,"databases",o.database])})(a).child("documents");return e===void 0?n:n.child(e)}function q1(a){const e=bt.fromString(a);return ct(G1(e),10190,{key:e.toString()}),e}function Wm(a,e){return Dp(a.databaseId,e.path)}function Tm(a,e){const n=q1(e);if(n.get(1)!==a.databaseId.projectId)throw new _e(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+a.databaseId.projectId);if(n.get(3)!==a.databaseId.database)throw new _e(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+a.databaseId.database);return new Re(B1(n))}function z1(a,e){return Dp(a.databaseId,e)}function nj(a){const e=q1(a);return e.length===4?bt.emptyPath():B1(e)}function Jm(a){return new bt(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function B1(a){return ct(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function Pb(a,e,n){return{name:Wm(a,e),fields:n.value.mapValue.fields}}function sj(a,e){let n;if("targetChange"in e){e.targetChange;const r=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:Oe(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(x,_){return x.useProto3Json?(ct(_===void 0||typeof _=="string",58123),bn.fromBase64String(_||"")):(ct(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),bn.fromUint8Array(_||new Uint8Array))})(a,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(x){const _=x.code===void 0?le.UNKNOWN:P1(x.code);return new _e(_,x.message||"")})(h);n=new V1(r,o,u,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Tm(a,r.document.name),u=ra(r.document.updateTime),h=r.document.createTime?ra(r.document.createTime):qe.min(),p=new Hn({mapValue:{fields:r.document.fields}}),g=Tn.newFoundDocument(o,u,h,p),x=r.targetIds||[],_=r.removedTargetIds||[];n=new vd(x,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Tm(a,r.document),u=r.readTime?ra(r.readTime):qe.min(),h=Tn.newNoDocument(o,u),p=r.removedTargetIds||[];n=new vd([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Tm(a,r.document),u=r.removedTargetIds||[];n=new vd([],u,o,null)}else{if(!("filter"in e))return Oe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,h=new KT(o,u),p=r.targetId;n=new L1(p,h)}}return n}function aj(a,e){let n;if(e instanceof Cc)n={update:Pb(a,e.key,e.value)};else if(e instanceof ih)n={delete:Wm(a,e.key)};else if(e instanceof Lr)n={update:Pb(a,e.key,e.data),updateMask:fj(e.fieldMask)};else{if(!(e instanceof FT))return Oe(16599,{Vt:e.type});n={verify:Wm(a,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(u,h){const p=h.transform;if(p instanceof Pd)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof yc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof bc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof vc)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw Oe(20930,{transform:h.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:tj(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Oe(27497)})(a,e.precondition)),n}function rj(a,e){return a&&a.length>0?(ct(e!==void 0,14353),a.map((n=>(function(o,u){let h=o.updateTime?ra(o.updateTime):ra(u);return h.isEqual(qe.min())&&(h=ra(u)),new qT(h,o.transformResults||[])})(n,e)))):[]}function ij(a,e){return{documents:[z1(a,e.path)]}}function lj(a,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=z1(a,o);const u=(function(x){if(x.length!==0)return H1(Ps.create(x,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(x){if(x.length!==0)return x.map((_=>(function(A){return{field:Nl(A.field),direction:uj(A.dir)}})(_)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const p=Ym(a,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:n,parent:o}}function oj(a){let e=nj(a.parent);const n=a.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){ct(r===1,65062);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=(function(w){const A=F1(w);return A instanceof Ps&&y1(A)?A.getFilters():[A]})(n.where));let h=[];n.orderBy&&(h=(function(w){return w.map((A=>(function(V){return new Od(El(V.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(A)))})(n.orderBy));let p=null;n.limit&&(p=(function(w){let A;return A=typeof w=="object"?w.value:w,eh(A)?null:A})(n.limit));let g=null;n.startAt&&(g=(function(w){const A=!!w.before,D=w.values||[];return new Md(D,A)})(n.startAt));let x=null;return n.endAt&&(x=(function(w){const A=!w.before,D=w.values||[];return new Md(D,A)})(n.endAt)),jT(e,o,h,u,p,"F",g,x)}function cj(a,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function F1(a){return a.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=El(n.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=El(n.unaryFilter.field);return $t.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=El(n.unaryFilter.field);return $t.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=El(n.unaryFilter.field);return $t.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}})(a):a.fieldFilter!==void 0?(function(n){return $t.create(El(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(n){return Ps.create(n.compositeFilter.filters.map((r=>F1(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}})(n.compositeFilter.op))})(a):Oe(30097,{filter:a})}function uj(a){return WT[a]}function dj(a){return JT[a]}function hj(a){return ZT[a]}function Nl(a){return{fieldPath:a.canonicalString()}}function El(a){return yn.fromServerFormat(a.fieldPath)}function H1(a){return a instanceof $t?(function(n){if(n.op==="=="){if(Nb(n.value))return{unaryFilter:{field:Nl(n.field),op:"IS_NAN"}};if(wb(n.value))return{unaryFilter:{field:Nl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Nb(n.value))return{unaryFilter:{field:Nl(n.field),op:"IS_NOT_NAN"}};if(wb(n.value))return{unaryFilter:{field:Nl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nl(n.field),op:dj(n.op),value:n.value}}})(a):a instanceof Ps?(function(n){const r=n.getFilters().map((o=>H1(o)));return r.length===1?r[0]:{compositeFilter:{op:hj(n.op),filters:r}}})(a):Oe(54877,{filter:a})}function fj(a){const e=[];return a.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function G1(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n,r,o,u=qe.min(),h=qe.min(),p=bn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.yt=e}}function pj(a){const e=oj({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?$m(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(){this.Cn=new xj}addToCollectionParentIndex(e,n){return this.Cn.add(n),ce.resolve()}getCollectionParents(e,n){return ce.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ce.resolve()}deleteFieldIndex(e,n){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,n){return ce.resolve()}getDocumentsMatchingTarget(e,n){return ce.resolve(null)}getIndexType(e,n){return ce.resolve(0)}getFieldIndexes(e,n){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,n){return ce.resolve(Rr.min())}getMinOffsetFromCollectionGroup(e,n){return ce.resolve(Rr.min())}updateCollectionGroup(e,n,r){return ce.resolve()}updateIndexEntries(e,n){return ce.resolve()}}class xj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new nn(bt.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new nn(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},K1=41943040;class Fn{static withCacheSize(e){return new Fn(e,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fn.DEFAULT_COLLECTION_PERCENTILE=10,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fn.DEFAULT=new Fn(K1,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fn.DISABLED=new Fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Pl(0)}static cr(){return new Pl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="LruGarbageCollector",yj=1048576;function Ub([a,e],[n,r]){const o=Ze(a,n);return o===0?Ze(e,r):o}class bj{constructor(e){this.Ir=e,this.buffer=new nn(Ub),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Ub(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ne(Vb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Hl(n)?Ne(Vb,"Ignoring IndexedDB error during garbage collection: ",n):await Fl(n)}await this.Vr(3e5)}))}}class _j{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return ce.resolve(Zd.ce);const r=new bj(n);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(Lb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lb):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,o,u,h,p,g,x;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,h=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(r=w,p=Date.now(),this.removeTargets(e,r,n)))).next((w=>(u=w,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(x=Date.now(),_l()<=Je.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-_}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${w} documents in `+(x-g)+`ms
Total Duration: ${x-_}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w}))))}}function wj(a,e){return new _j(a,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(){this.changes=new Ei((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ce.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&lc(r.mutation,o,ss.empty(),Nt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,et()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=et()){const o=pi();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((u=>{let h=ec();return u.forEach(((p,g)=>{h=h.insert(p,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const r=pi();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,et())))}populateOverlays(e,n,r){const o=[];return r.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,p)=>{n.set(h,p)}))}))}computeViews(e,n,r,o){let u=Oa();const h=ic(),p=(function(){return ic()})();return n.forEach(((g,x)=>{const _=r.get(x.key);o.has(x.key)&&(_===void 0||_.mutation instanceof Lr)?u=u.insert(x.key,x):_!==void 0?(h.set(x.key,_.mutation.getFieldMask()),lc(_.mutation,x,_.mutation.getFieldMask(),Nt.now())):h.set(x.key,ss.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((x,_)=>h.set(x,_))),n.forEach(((x,_)=>p.set(x,new Ej(_,h.get(x)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=ic();let o=new It(((h,p)=>h-p)),u=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const p of h)p.keys().forEach((g=>{const x=n.get(g);if(x===null)return;let _=r.get(g)||ss.empty();_=p.applyToLocalView(x,_),r.set(g,_);const w=(o.get(p.batchId)||et()).add(g);o=o.insert(p.batchId,w)}))})).next((()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),x=g.key,_=g.value,w=j1();_.forEach((A=>{if(!u.has(A)){const D=M1(n.get(A),r.get(A));D!==null&&w.set(A,D),u=u.add(A)}})),h.push(this.documentOverlayCache.saveOverlays(e,x,w))}return ce.waitFor(h)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return(function(h){return Re.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):w1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-u.size):ce.resolve(pi());let p=mc,g=u;return h.next((x=>ce.forEach(x,((_,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),u.get(_)?ce.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{g=g.insert(_,A)}))))).next((()=>this.populateOverlays(e,x,u))).next((()=>this.computeViews(e,g,x,et()))).next((_=>({batchId:p,changes:T1(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Re(n)).next((r=>{let o=ec();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const u=n.collectionGroup;let h=ec();return this.indexManager.getCollectionParents(e,u).next((p=>ce.forEach(p,(g=>{const x=(function(w,A){return new Ac(A,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,x,r,o).next((_=>{_.forEach(((w,A)=>{h=h.insert(w,A)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,o)))).next((h=>{u.forEach(((g,x)=>{const _=x.getKey();h.get(_)===null&&(h=h.insert(_,Tn.newInvalidDocument(_)))}));let p=ec();return h.forEach(((g,x)=>{const _=u.get(g);_!==void 0&&lc(_.mutation,x,ss.empty(),Nt.now()),sh(n,x)&&(p=p.insert(g,x))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ce.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:ra(o.createTime)}})(n)),ce.resolve()}getNamedQuery(e,n){return ce.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:pj(o.bundledQuery),readTime:ra(o.readTime)}})(n)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(){this.overlays=new It(Re.comparator),this.qr=new Map}getOverlay(e,n){return ce.resolve(this.overlays.get(n))}getOverlays(e,n){const r=pi();return ce.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,u)=>{this.St(e,n,u)})),ce.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),ce.resolve()}getOverlaysForCollection(e,n,r){const o=pi(),u=n.length+1,h=new Re(n.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,x=g.getKey();if(!n.isPrefixOf(x.path))break;x.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return ce.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let u=new It(((x,_)=>x-_));const h=this.overlays.getIterator();for(;h.hasNext();){const x=h.getNext().value;if(x.getKey().getCollectionGroup()===n&&x.largestBatchId>r){let _=u.get(x.largestBatchId);_===null&&(_=pi(),u=u.insert(x.largestBatchId,_)),_.set(x.getKey(),x)}}const p=pi(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((x,_)=>p.set(x,_))),!(p.size()>=o)););return ce.resolve(p)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new GT(n,r));let u=this.qr.get(n);u===void 0&&(u=et(),this.qr.set(n,u)),this.qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(){this.sessionToken=bn.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(){this.Qr=new nn(cn.$r),this.Ur=new nn(cn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new cn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new cn(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Re(new bt([])),r=new cn(n,e),o=new cn(n,e+1),u=[];return this.Ur.forEachInRange([r,o],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Re(new bt([])),r=new cn(n,e),o=new cn(n,e+1);let u=et();return this.Ur.forEachInRange([r,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new cn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class cn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Re.comparator(e.key,n.key)||Ze(e.Yr,n.Yr)}static Kr(e,n){return Ze(e.Yr,n.Yr)||Re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new nn(cn.$r)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new HT(u,n,r,o);this.mutationQueue.push(h);for(const p of o)this.Zr=this.Zr.add(new cn(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ce.resolve(h)}lookupMutationBatch(e,n){return ce.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ei(r),u=o<0?0:o;return ce.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?Ep:this.tr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new cn(n,0),o=new cn(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(h=>{const p=this.Xr(h.Yr);u.push(p)})),ce.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new nn(Ze);return n.forEach((o=>{const u=new cn(o,0),h=new cn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(p=>{r=r.add(p.Yr)}))})),ce.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let u=r;Re.isDocumentKey(u)||(u=u.child(""));const h=new cn(new Re(u),0);let p=new nn(Ze);return this.Zr.forEachWhile((g=>{const x=g.key.path;return!!r.isPrefixOf(x)&&(x.length===o&&(p=p.add(g.Yr)),!0)}),h),ce.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){ct(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ce.forEach(n.mutations,(o=>{const u=new cn(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new cn(n,0),o=this.Zr.firstAfterOrEqual(r);return ce.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e){this.ri=e,this.docs=(function(){return new It(Re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ce.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(n))}getEntries(e,n){let r=Oa();return n.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Tn.newInvalidDocument(o))})),ce.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let u=Oa();const h=n.path,p=new Re(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:x,value:{document:_}}=g.getNext();if(!h.isPrefixOf(x.path))break;x.path.length>h.length+1||rT(aT(_),r)<=0||(o.has(_.key)||sh(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return ce.resolve(u)}getAllFromCollectionGroup(e,n,r,o){Oe(9500)}ii(e,n){return ce.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new Ij(this)}getSize(e){return ce.resolve(this.size)}}class Ij extends Nj{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),ce.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e){this.persistence=e,this.si=new Ei((n=>jp(n)),Ap),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.oi=0,this._i=new Mp,this.targetCount=0,this.ai=Pl.ur()}forEachTarget(e,n){return this.si.forEach(((r,o)=>n(o))),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),ce.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Pl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ce.resolve()}updateTargetData(e,n){return this.Pr(n),ce.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,n,r){let o=0;const u=[];return this.si.forEach(((h,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ce.waitFor(u).next((()=>o))}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return ce.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),ce.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),ce.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ce.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return ce.resolve(r)}containsKey(e,n){return ce.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Zd(0),this.li=!1,this.li=!0,this.hi=new Aj,this.referenceDelegate=e(this),this.Pi=new kj(this),this.indexManager=new gj,this.remoteDocumentCache=(function(o){return new Rj(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new mj(n),this.Ii=new Tj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Cj(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Ne("MemoryPersistence","Starting transaction:",e);const o=new Dj(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return ce.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class Dj extends lT{constructor(e){super(),this.currentSequenceNumber=e}}class Op{constructor(e){this.persistence=e,this.Ri=new Mp,this.Vi=null}static mi(e){return new Op(e)}get fi(){if(this.Vi)return this.Vi;throw Oe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),ce.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ce.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.fi,(r=>{const o=Re.fromPath(r);return this.gi(e,o).next((u=>{u||n.removeEntry(o,qe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ce.or([()=>ce.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Vd{constructor(e,n){this.persistence=e,this.pi=new Ei((r=>uT(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=wj(this,n)}static mi(e,n){return new Vd(e,n)}Ei(){}di(e){return ce.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return ce.forEach(this.pi,((r,o)=>this.br(e,r,o).next((u=>u?ce.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,n).next((p=>{p||(r++,u.removeEntry(h,qe.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ce.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ce.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ce.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=xd(e.data.value)),n}br(e,n,r){return ce.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ce.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=o}static As(e,n){let r=et(),o=et();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Pp(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return TE()?8:oT(jn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const u={result:null};return this.ys(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(e,n,o,r).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new Mj;return this.Ss(e,n,h).next((p=>{if(u.result=p,this.Vs)return this.bs(e,n,h,p.size)}))})).next((()=>u.result))}bs(e,n,r,o){return r.documentReadCount<this.fs?(_l()<=Je.DEBUG&&Ne("QueryEngine","SDK will not create cache indexes for query:",wl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ce.resolve()):(_l()<=Je.DEBUG&&Ne("QueryEngine","Query:",wl(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(_l()<=Je.DEBUG&&Ne("QueryEngine","The SDK decides to create cache indexes for query:",wl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,aa(n))):ce.resolve())}ys(e,n){if(jb(n))return ce.resolve(null);let r=aa(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=$m(n,null,"F"),r=aa(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const h=et(...u);return this.ps.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,r).next((g=>{const x=this.Ds(n,p);return this.Cs(n,x,h,g.readTime)?this.ys(e,$m(n,null,"F")):this.vs(e,x,n,g)}))))})))))}ws(e,n,r,o){return jb(n)||o.isEqual(qe.min())?ce.resolve(null):this.ps.getDocuments(e,r).next((u=>{const h=this.Ds(n,u);return this.Cs(n,h,r,o)?ce.resolve(null):(_l()<=Je.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),wl(n)),this.vs(e,h,n,sT(o,mc)).next((p=>p)))}))}Ds(e,n){let r=new nn(E1(e));return n.forEach(((o,u)=>{sh(e,u)&&(r=r.add(u))})),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,r){return _l()<=Je.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",wl(n)),this.ps.getDocumentsMatchingQuery(e,n,Rr.min(),r)}vs(e,n,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp="LocalStore",Pj=3e8;class Lj{constructor(e,n,r,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new It(Ze),this.xs=new Ei((u=>jp(u)),Ap),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Vj(a,e,n,r){return new Lj(a,e,n,r)}async function $1(a,e){const n=Fe(a);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const h=[],p=[];let g=et();for(const x of o){h.push(x.batchId);for(const _ of x.mutations)g=g.add(_.key)}for(const x of u){p.push(x.batchId);for(const _ of x.mutations)g=g.add(_.key)}return n.localDocuments.getDocuments(r,g).next((x=>({Ls:x,removedBatchIds:h,addedBatchIds:p})))}))}))}function Uj(a,e){const n=Fe(a);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,x,_){const w=x.batch,A=w.keys();let D=ce.resolve();return A.forEach((V=>{D=D.next((()=>_.getEntry(g,V))).next((M=>{const P=x.docVersions.get(V);ct(P!==null,48541),M.version.compareTo(P)<0&&(w.applyToRemoteDocument(M,x),M.isValidDocument()&&(M.setReadTime(x.commitVersion),_.addEntry(M)))}))})),D.next((()=>p.mutationQueue.removeMutationBatch(g,w)))})(n,r,e,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let g=et();for(let x=0;x<p.mutationResults.length;++x)p.mutationResults[x].transformResults.length>0&&(g=g.add(p.batch.mutations[x].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function Y1(a){const e=Fe(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function qj(a,e){const n=Fe(a),r=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const p=[];e.targetChanges.forEach(((_,w)=>{const A=o.get(w);if(!A)return;p.push(n.Pi.removeMatchingKeys(u,_.removedDocuments,w).next((()=>n.Pi.addMatchingKeys(u,_.addedDocuments,w))));let D=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?D=D.withResumeToken(bn.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):_.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(_.resumeToken,r)),o=o.insert(w,D),(function(M,P,ee){return M.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=Pj?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(A,D,_)&&p.push(n.Pi.updateTargetData(u,D))}));let g=Oa(),x=et();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))})),p.push(zj(u,h,e.documentUpdates).next((_=>{g=_.ks,x=_.qs}))),!r.isEqual(qe.min())){const _=n.Pi.getLastRemoteSnapshotVersion(u).next((w=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));p.push(_)}return ce.waitFor(p).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,x))).next((()=>g))})).then((u=>(n.Ms=o,u)))}function zj(a,e,n){let r=et(),o=et();return n.forEach((u=>r=r.add(u))),e.getEntries(a,r).next((u=>{let h=Oa();return n.forEach(((p,g)=>{const x=u.get(p);g.isFoundDocument()!==x.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(qe.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!x.isValidDocument()||g.version.compareTo(x.version)>0||g.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):Ne(Lp,"Ignoring outdated watch update for ",p,". Current version:",x.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function Bj(a,e){const n=Fe(a);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ep),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Fj(a,e){const n=Fe(a);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.Pi.getTargetData(r,e).next((u=>u?(o=u,ce.resolve(o)):n.Pi.allocateTargetId(r).next((h=>(o=new Nr(e,h,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Zm(a,e,n){const r=Fe(a),o=r.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Hl(h))throw h;Ne(Lp,`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function qb(a,e,n){const r=Fe(a);let o=qe.min(),u=et();return r.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,x,_){const w=Fe(g),A=w.xs.get(_);return A!==void 0?ce.resolve(w.Ms.get(A)):w.Pi.getTargetData(x,_)})(r,h,aa(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(h,p.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(h,e,n?o:qe.min(),n?u:et()))).next((p=>(Hj(r,CT(e),p),{documents:p,Qs:u})))))}function Hj(a,e,n){let r=a.Os.get(e)||qe.min();n.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),a.Os.set(e,r)}class zb{constructor(){this.activeTargetIds=OT()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gj{constructor(){this.Mo=new zb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new zb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="ConnectivityMonitor";class Fb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ne(Bb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ne(Bb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fd=null;function ep(){return fd===null?fd=(function(){return 268435456+Math.round(2147483648*Math.random())})():fd++,"0x"+fd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="RestConnection",Qj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $j{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===kd?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,n,r,o,u){const h=ep(),p=this.zo(e,n.toUriEncodedString());Ne(jm,`Sending RPC '${e}' ${h}:`,p,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:x}=new URL(p),_=ql(x);return this.Jo(e,p,g,r,_).then((w=>(Ne(jm,`Received RPC '${e}' ${h}: `,w),w)),(w=>{throw kl(jm,`RPC '${e}' ${h} failed with error: `,w,"url: ",p,"request:",r),w}))}Ho(e,n,r,o,u,h){return this.Go(e,n,r,o,u)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const r=Qj[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class Xj extends $j{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,u){const h=ep();return new Promise(((p,g)=>{const x=new Wv;x.setWithCredentials(!0),x.listenOnce(Jv.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case gd.NO_ERROR:const w=x.getResponseJson();Ne(En,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(w)),p(w);break;case gd.TIMEOUT:Ne(En,`RPC '${e}' ${h} timed out`),g(new _e(le.DEADLINE_EXCEEDED,"Request time out"));break;case gd.HTTP_ERROR:const A=x.getStatus();if(Ne(En,`RPC '${e}' ${h} failed with status:`,A,"response text:",x.getResponseText()),A>0){let D=x.getResponseJson();Array.isArray(D)&&(D=D[0]);const V=D==null?void 0:D.error;if(V&&V.status&&V.message){const M=(function(ee){const ue=ee.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(ue)>=0?ue:le.UNKNOWN})(V.status);g(new _e(M,V.message))}else g(new _e(le.UNKNOWN,"Server responded with status "+x.getStatus()))}else g(new _e(le.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{l_:e,streamId:h,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{Ne(En,`RPC '${e}' ${h} completed.`)}}));const _=JSON.stringify(o);Ne(En,`RPC '${e}' ${h} sending request:`,o),x.send(n,"POST",_,r,15)}))}T_(e,n,r){const o=ep(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=t1(),p=e1(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(g.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const _=u.join("");Ne(En,`Creating RPC '${e}' stream ${o}: ${_}`,g);const w=h.createWebChannel(_,g);this.I_(w);let A=!1,D=!1;const V=new Yj({Yo:P=>{D?Ne(En,`Not sending because RPC '${e}' stream ${o} is closed:`,P):(A||(Ne(En,`Opening RPC '${e}' stream ${o} transport.`),w.open(),A=!0),Ne(En,`RPC '${e}' stream ${o} sending:`,P),w.send(P))},Zo:()=>w.close()}),M=(P,ee,ue)=>{P.listen(ee,(te=>{try{ue(te)}catch(ne){setTimeout((()=>{throw ne}),0)}}))};return M(w,Zo.EventType.OPEN,(()=>{D||(Ne(En,`RPC '${e}' stream ${o} transport opened.`),V.o_())})),M(w,Zo.EventType.CLOSE,(()=>{D||(D=!0,Ne(En,`RPC '${e}' stream ${o} transport closed`),V.a_(),this.E_(w))})),M(w,Zo.EventType.ERROR,(P=>{D||(D=!0,kl(En,`RPC '${e}' stream ${o} transport errored. Name:`,P.name,"Message:",P.message),V.a_(new _e(le.UNAVAILABLE,"The operation could not be completed")))})),M(w,Zo.EventType.MESSAGE,(P=>{var ee;if(!D){const ue=P.data[0];ct(!!ue,16349);const te=ue,ne=(te==null?void 0:te.error)||((ee=te[0])==null?void 0:ee.error);if(ne){Ne(En,`RPC '${e}' stream ${o} received error:`,ne);const F=ne.status;let W=(function(S){const E=Qt[S];if(E!==void 0)return P1(E)})(F),C=ne.message;W===void 0&&(W=le.INTERNAL,C="Unknown error status: "+F+" with message "+ne.message),D=!0,V.a_(new _e(W,C)),w.close()}else Ne(En,`RPC '${e}' stream ${o} received:`,ue),V.u_(ue)}})),M(p,Zv.STAT_EVENT,(P=>{P.stat===zm.PROXY?Ne(En,`RPC '${e}' stream ${o} detected buffering proxy`):P.stat===zm.NOPROXY&&Ne(En,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Am(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(a){return new ej(a,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n,r=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&Ne("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="PersistentStream";class W1{constructor(e,n,r,o,u,h,p,g){this.Mi=e,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new X1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(Ma(n.toString()),Ma("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new _e(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ne(Hb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ne(Hb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Wj extends W1{constructor(e,n,r,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=sj(this.serializer,e),r=(function(u){if(!("targetChange"in u))return qe.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?qe.min():h.readTime?ra(h.readTime):qe.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Jm(this.serializer),n.addTarget=(function(u,h){let p;const g=h.target;if(p=Km(g)?{documents:ij(u,g)}:{query:lj(u,g).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=U1(u,h.resumeToken);const x=Ym(u,h.expectedCount);x!==null&&(p.expectedCount=x)}else if(h.snapshotVersion.compareTo(qe.min())>0){p.readTime=Ld(u,h.snapshotVersion.toTimestamp());const x=Ym(u,h.expectedCount);x!==null&&(p.expectedCount=x)}return p})(this.serializer,e);const r=cj(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Jm(this.serializer),n.removeTarget=e,this.q_(n)}}class Jj extends W1{constructor(e,n,r,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=rj(e.writeResults,e.commitTime),r=ra(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Jm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>aj(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{}class eA extends Zj{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new _e(le.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(e,Xm(n,r),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new _e(le.UNKNOWN,u.toString())}))}Ho(e,n,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Ho(e,Xm(n,r),o,h,p,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new _e(le.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class tA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ma(n),this.aa=!1):Ne("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i="RemoteStore";class nA{constructor(e,n,r,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{r.enqueueAndForget((async()=>{Si(this)&&(Ne(_i,"Restarting streams for network reachability change."),await(async function(g){const x=Fe(g);x.Ea.add(4),await Ic(x),x.Ra.set("Unknown"),x.Ea.delete(4),await ch(x)})(this))}))})),this.Ra=new tA(r,o)}}async function ch(a){if(Si(a))for(const e of a.da)await e(!0)}async function Ic(a){for(const e of a.da)await e(!1)}function J1(a,e){const n=Fe(a);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),zp(n)?qp(n):Gl(n).O_()&&Up(n,e))}function Vp(a,e){const n=Fe(a),r=Gl(n);n.Ia.delete(e),r.O_()&&Z1(n,e),n.Ia.size===0&&(r.O_()?r.L_():Si(n)&&n.Ra.set("Unknown"))}function Up(a,e){if(a.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const n=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Gl(a).Y_(e)}function Z1(a,e){a.Va.Ue(e),Gl(a).Z_(e)}function qp(a){a.Va=new XT({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),At:e=>a.Ia.get(e)||null,ht:()=>a.datastore.serializer.databaseId}),Gl(a).start(),a.Ra.ua()}function zp(a){return Si(a)&&!Gl(a).x_()&&a.Ia.size>0}function Si(a){return Fe(a).Ea.size===0}function e_(a){a.Va=void 0}async function sA(a){a.Ra.set("Online")}async function aA(a){a.Ia.forEach(((e,n)=>{Up(a,e)}))}async function rA(a,e){e_(a),zp(a)?(a.Ra.ha(e),qp(a)):a.Ra.set("Unknown")}async function iA(a,e,n){if(a.Ra.set("Online"),e instanceof V1&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const p of u.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ia.delete(p),o.Va.removeTarget(p))})(a,e)}catch(r){Ne(_i,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ud(a,r)}else if(e instanceof vd?a.Va.Ze(e):e instanceof L1?a.Va.st(e):a.Va.tt(e),!n.isEqual(qe.min()))try{const r=await Y1(a.localStore);n.compareTo(r)>=0&&await(function(u,h){const p=u.Va.Tt(h);return p.targetChanges.forEach(((g,x)=>{if(g.resumeToken.approximateByteSize()>0){const _=u.Ia.get(x);_&&u.Ia.set(x,_.withResumeToken(g.resumeToken,h))}})),p.targetMismatches.forEach(((g,x)=>{const _=u.Ia.get(g);if(!_)return;u.Ia.set(g,_.withResumeToken(bn.EMPTY_BYTE_STRING,_.snapshotVersion)),Z1(u,g);const w=new Nr(_.target,g,x,_.sequenceNumber);Up(u,w)})),u.remoteSyncer.applyRemoteEvent(p)})(a,n)}catch(r){Ne(_i,"Failed to raise snapshot:",r),await Ud(a,r)}}async function Ud(a,e,n){if(!Hl(e))throw e;a.Ea.add(1),await Ic(a),a.Ra.set("Offline"),n||(n=()=>Y1(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{Ne(_i,"Retrying IndexedDB access"),await n(),a.Ea.delete(1),await ch(a)}))}function t_(a,e){return e().catch((n=>Ud(a,n,e)))}async function uh(a){const e=Fe(a),n=Mr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ep;for(;lA(e);)try{const o=await Bj(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,oA(e,o)}catch(o){await Ud(e,o)}n_(e)&&s_(e)}function lA(a){return Si(a)&&a.Ta.length<10}function oA(a,e){a.Ta.push(e);const n=Mr(a);n.O_()&&n.X_&&n.ea(e.mutations)}function n_(a){return Si(a)&&!Mr(a).x_()&&a.Ta.length>0}function s_(a){Mr(a).start()}async function cA(a){Mr(a).ra()}async function uA(a){const e=Mr(a);for(const n of a.Ta)e.ea(n.mutations)}async function dA(a,e,n){const r=a.Ta.shift(),o=Ip.from(r,e,n);await t_(a,(()=>a.remoteSyncer.applySuccessfulWrite(o))),await uh(a)}async function hA(a,e){e&&Mr(a).X_&&await(async function(r,o){if((function(h){return QT(h)&&h!==le.ABORTED})(o.code)){const u=r.Ta.shift();Mr(r).B_(),await t_(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await uh(r)}})(a,e),n_(a)&&s_(a)}async function Gb(a,e){const n=Fe(a);n.asyncQueue.verifyOperationInProgress(),Ne(_i,"RemoteStore received new credentials");const r=Si(n);n.Ea.add(3),await Ic(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ch(n)}async function fA(a,e){const n=Fe(a);e?(n.Ea.delete(2),await ch(n)):e||(n.Ea.add(2),await Ic(n),n.Ra.set("Unknown"))}function Gl(a){return a.ma||(a.ma=(function(n,r,o){const u=Fe(n);return u.sa(),new Wj(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(a.datastore,a.asyncQueue,{Xo:sA.bind(null,a),t_:aA.bind(null,a),r_:rA.bind(null,a),H_:iA.bind(null,a)}),a.da.push((async e=>{e?(a.ma.B_(),zp(a)?qp(a):a.Ra.set("Unknown")):(await a.ma.stop(),e_(a))}))),a.ma}function Mr(a){return a.fa||(a.fa=(function(n,r,o){const u=Fe(n);return u.sa(),new Jj(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(a.datastore,a.asyncQueue,{Xo:()=>Promise.resolve(),t_:cA.bind(null,a),r_:hA.bind(null,a),ta:uA.bind(null,a),na:dA.bind(null,a)}),a.da.push((async e=>{e?(a.fa.B_(),await uh(a)):(await a.fa.stop(),a.Ta.length>0&&(Ne(_i,`Stopping write stream with ${a.Ta.length} pending writes`),a.Ta=[]))}))),a.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n,r,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,u){const h=Date.now()+r,p=new Bp(e,n,h,o,u);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fp(a,e){if(Ma("AsyncQueue",`${e}: ${a}`),Hl(a))return new _e(le.UNAVAILABLE,`${e}: ${a}`);throw a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{static emptySet(e){return new Tl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Re.comparator(n.key,r.key):(n,r)=>Re.comparator(n.key,r.key),this.keyedMap=ec(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Tl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Tl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(){this.ga=new It(Re.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Oe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Ll{constructor(e,n,r,o,u,h,p,g,x){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=x}static fromInitialDocuments(e,n,r,o,u){const h=[];return n.forEach((p=>{h.push({type:0,doc:p})})),new Ll(e,n,Tl.emptySet(n),h,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class pA{constructor(){this.queries=Qb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Fe(n),u=o.queries;o.queries=Qb(),u.forEach(((h,p)=>{for(const g of p.Sa)g.onError(r)}))})(this,new _e(le.ABORTED,"Firestore shutting down"))}}function Qb(){return new Ei((a=>N1(a)),nh)}async function a_(a,e){const n=Fe(a);let r=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(r=2):(u=new mA,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const p=Fp(h,`Initialization of query '${wl(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Hp(n)}async function r_(a,e){const n=Fe(a),r=e.query;let o=3;const u=n.queries.get(r);if(u){const h=u.Sa.indexOf(e);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function gA(a,e){const n=Fe(a);let r=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const p of h.Sa)p.Fa(o)&&(r=!0);h.wa=o}}r&&Hp(n)}function xA(a,e,n){const r=Fe(a),o=r.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);r.queries.delete(e)}function Hp(a){a.Ca.forEach((e=>{e.next()}))}var tp,$b;($b=tp||(tp={})).Ma="default",$b.Cache="cache";class i_{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Ll(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==tp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e){this.key=e}}class o_{constructor(e){this.key=e}}class yA{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=et(),this.mutatedKeys=et(),this.eu=E1(e),this.tu=new Tl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Kb,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,x=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,w)=>{const A=o.get(_),D=sh(this.query,w)?w:null,V=!!A&&this.mutatedKeys.has(A.key),M=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let P=!1;A&&D?A.data.isEqual(D.data)?V!==M&&(r.track({type:3,doc:D}),P=!0):this.su(A,D)||(r.track({type:2,doc:D}),P=!0,(g&&this.eu(D,g)>0||x&&this.eu(D,x)<0)&&(p=!0)):!A&&D?(r.track({type:0,doc:D}),P=!0):A&&!D&&(r.track({type:1,doc:A}),P=!0,(g||x)&&(p=!0)),P&&(D?(h=h.add(D),u=M?u.add(_):u.delete(_)):(h=h.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),u=u.delete(_.key),r.track({type:1,doc:_})}return{tu:h,iu:r,Cs:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((_,w)=>(function(D,V){const M=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{Rt:P})}};return M(D)-M(V)})(_.type,w.type)||this.eu(_.doc,w.doc))),this.ou(r),o=o??!1;const p=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,x=g!==this.Za;return this.Za=g,h.length!==0||x?{snapshot:new Ll(this.query,e.tu,u,h,e.mutatedKeys,g===0,x,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Kb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=et(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new o_(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new l_(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=et();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ll.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Gp="SyncEngine";class bA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class vA{constructor(e){this.key=e,this.hu=!1}}class _A{constructor(e,n,r,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ei((p=>N1(p)),nh),this.Iu=new Map,this.Eu=new Set,this.du=new It(Re.comparator),this.Au=new Map,this.Ru=new Mp,this.Vu={},this.mu=new Map,this.fu=Pl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wA(a,e,n=!0){const r=m_(a);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await c_(r,e,n,!0),o}async function NA(a,e){const n=m_(a);await c_(n,e,!0,!1)}async function c_(a,e,n,r){const o=await Fj(a.localStore,aa(e)),u=o.targetId,h=a.sharedClientState.addLocalQueryTarget(u,n);let p;return r&&(p=await EA(a,e,u,h==="current",o.resumeToken)),a.isPrimaryClient&&n&&J1(a.remoteStore,o),p}async function EA(a,e,n,r,o){a.pu=(w,A,D)=>(async function(M,P,ee,ue){let te=P.view.ru(ee);te.Cs&&(te=await qb(M.localStore,P.query,!1).then((({documents:C})=>P.view.ru(C,te))));const ne=ue&&ue.targetChanges.get(P.targetId),F=ue&&ue.targetMismatches.get(P.targetId)!=null,W=P.view.applyChanges(te,M.isPrimaryClient,ne,F);return Xb(M,P.targetId,W.au),W.snapshot})(a,w,A,D);const u=await qb(a.localStore,e,!0),h=new yA(e,u.Qs),p=h.ru(u.documents),g=Rc.createSynthesizedTargetChangeForCurrentChange(n,r&&a.onlineState!=="Offline",o),x=h.applyChanges(p,a.isPrimaryClient,g);Xb(a,n,x.au);const _=new bA(e,n,h);return a.Tu.set(e,_),a.Iu.has(n)?a.Iu.get(n).push(e):a.Iu.set(n,[e]),x.snapshot}async function SA(a,e,n){const r=Fe(a),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((h=>!nh(h,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Zm(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Vp(r.remoteStore,o.targetId),np(r,o.targetId)})).catch(Fl)):(np(r,o.targetId),await Zm(r.localStore,o.targetId,!0))}async function TA(a,e){const n=Fe(a),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Vp(n.remoteStore,r.targetId))}async function jA(a,e,n){const r=MA(a);try{const o=await(function(h,p){const g=Fe(h),x=Nt.now(),_=p.reduce(((D,V)=>D.add(V.key)),et());let w,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(D=>{let V=Oa(),M=et();return g.Ns.getEntries(D,_).next((P=>{V=P,V.forEach(((ee,ue)=>{ue.isValidDocument()||(M=M.add(ee))}))})).next((()=>g.localDocuments.getOverlayedDocuments(D,V))).next((P=>{w=P;const ee=[];for(const ue of p){const te=BT(ue,w.get(ue.key).overlayedDocument);te!=null&&ee.push(new Lr(ue.key,te,p1(te.value.mapValue),kn.exists(!0)))}return g.mutationQueue.addMutationBatch(D,x,ee,p)})).next((P=>{A=P;const ee=P.applyToLocalDocumentSet(w,M);return g.documentOverlayCache.saveOverlays(D,P.batchId,ee)}))})).then((()=>({batchId:A.batchId,changes:T1(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(h,p,g){let x=h.Vu[h.currentUser.toKey()];x||(x=new It(Ze)),x=x.insert(p,g),h.Vu[h.currentUser.toKey()]=x})(r,o.batchId,n),await kc(r,o.changes),await uh(r.remoteStore)}catch(o){const u=Fp(o,"Failed to persist write");n.reject(u)}}async function u_(a,e){const n=Fe(a);try{const r=await qj(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=n.Au.get(u);h&&(ct(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?ct(h.hu,14607):o.removedDocuments.size>0&&(ct(h.hu,42227),h.hu=!1))})),await kc(n,r,e)}catch(r){await Fl(r)}}function Yb(a,e,n){const r=Fe(a);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((u,h)=>{const p=h.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(h,p){const g=Fe(h);g.onlineState=p;let x=!1;g.queries.forEach(((_,w)=>{for(const A of w.Sa)A.va(p)&&(x=!0)})),x&&Hp(g)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function AA(a,e,n){const r=Fe(a);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),u=o&&o.key;if(u){let h=new It(Re.comparator);h=h.insert(u,Tn.newNoDocument(u,qe.min()));const p=et().add(u),g=new lh(qe.min(),new Map,new It(Ze),h,p);await u_(r,g),r.du=r.du.remove(u),r.Au.delete(e),Kp(r)}else await Zm(r.localStore,e,!1).then((()=>np(r,e,n))).catch(Fl)}async function CA(a,e){const n=Fe(a),r=e.batch.batchId;try{const o=await Uj(n.localStore,e);h_(n,r,null),d_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await kc(n,o)}catch(o){await Fl(o)}}async function RA(a,e,n){const r=Fe(a);try{const o=await(function(h,p){const g=Fe(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let _;return g.mutationQueue.lookupMutationBatch(x,p).next((w=>(ct(w!==null,37113),_=w.keys(),g.mutationQueue.removeMutationBatch(x,w)))).next((()=>g.mutationQueue.performConsistencyCheck(x))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(x,_,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,_))).next((()=>g.localDocuments.getDocuments(x,_)))}))})(r.localStore,e);h_(r,e,n),d_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await kc(r,o)}catch(o){await Fl(o)}}function d_(a,e){(a.mu.get(e)||[]).forEach((n=>{n.resolve()})),a.mu.delete(e)}function h_(a,e,n){const r=Fe(a);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function np(a,e,n=null){a.sharedClientState.removeLocalQueryTarget(e);for(const r of a.Iu.get(e))a.Tu.delete(r),n&&a.Pu.yu(r,n);a.Iu.delete(e),a.isPrimaryClient&&a.Ru.jr(e).forEach((r=>{a.Ru.containsKey(r)||f_(a,r)}))}function f_(a,e){a.Eu.delete(e.path.canonicalString());const n=a.du.get(e);n!==null&&(Vp(a.remoteStore,n),a.du=a.du.remove(e),a.Au.delete(n),Kp(a))}function Xb(a,e,n){for(const r of n)r instanceof l_?(a.Ru.addReference(r.key,e),IA(a,r)):r instanceof o_?(Ne(Gp,"Document no longer in limbo: "+r.key),a.Ru.removeReference(r.key,e),a.Ru.containsKey(r.key)||f_(a,r.key)):Oe(19791,{wu:r})}function IA(a,e){const n=e.key,r=n.path.canonicalString();a.du.get(n)||a.Eu.has(r)||(Ne(Gp,"New document in limbo: "+n),a.Eu.add(r),Kp(a))}function Kp(a){for(;a.Eu.size>0&&a.du.size<a.maxConcurrentLimboResolutions;){const e=a.Eu.values().next().value;a.Eu.delete(e);const n=new Re(bt.fromString(e)),r=a.fu.next();a.Au.set(r,new vA(n)),a.du=a.du.insert(n,r),J1(a.remoteStore,new Nr(aa(Cp(n.path)),r,"TargetPurposeLimboResolution",Zd.ce))}}async function kc(a,e,n){const r=Fe(a),o=[],u=[],h=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,g)=>{h.push(r.pu(g,e,n).then((x=>{var _;if((x||n)&&r.isPrimaryClient){const w=x?!x.fromCache:(_=n==null?void 0:n.targetChanges.get(g.targetId))==null?void 0:_.current;r.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(x){o.push(x);const w=Pp.As(g.targetId,x);u.push(w)}})))})),await Promise.all(h),r.Pu.H_(o),await(async function(g,x){const _=Fe(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ce.forEach(x,(A=>ce.forEach(A.Es,(D=>_.persistence.referenceDelegate.addReference(w,A.targetId,D))).next((()=>ce.forEach(A.ds,(D=>_.persistence.referenceDelegate.removeReference(w,A.targetId,D)))))))))}catch(w){if(!Hl(w))throw w;Ne(Lp,"Failed to update sequence numbers: "+w)}for(const w of x){const A=w.targetId;if(!w.fromCache){const D=_.Ms.get(A),V=D.snapshotVersion,M=D.withLastLimboFreeSnapshotVersion(V);_.Ms=_.Ms.insert(A,M)}}})(r.localStore,u))}async function kA(a,e){const n=Fe(a);if(!n.currentUser.isEqual(e)){Ne(Gp,"User change. New user:",e.toKey());const r=await $1(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new _e(le.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await kc(n,r.Ls)}}function DA(a,e){const n=Fe(a),r=n.Au.get(e);if(r&&r.hu)return et().add(r.key);{let o=et();const u=n.Iu.get(e);if(!u)return o;for(const h of u){const p=n.Tu.get(h);o=o.unionWith(p.view.nu)}return o}}function m_(a){const e=Fe(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=u_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AA.bind(null,e),e.Pu.H_=gA.bind(null,e.eventManager),e.Pu.yu=xA.bind(null,e.eventManager),e}function MA(a){const e=Fe(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RA.bind(null,e),e}class qd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=oh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Vj(this.persistence,new Oj,e.initialUser,this.serializer)}Cu(e){return new Q1(Op.mi,this.serializer)}Du(e){return new Gj}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qd.provider={build:()=>new qd};class OA extends qd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ct(this.persistence.referenceDelegate instanceof Vd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new vj(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Fn.withCacheSize(this.cacheSizeBytes):Fn.DEFAULT;return new Q1((r=>Vd.mi(r,n)),this.serializer)}}class sp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Yb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kA.bind(null,this.syncEngine),await fA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new pA})()}createDatastore(e){const n=oh(e.databaseInfo.databaseId),r=(function(u){return new Xj(u)})(e.databaseInfo);return(function(u,h,p,g){return new eA(u,h,p,g)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,u,h,p){return new nA(r,o,u,h,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>Yb(this.syncEngine,n,0)),(function(){return Fb.v()?new Fb:new Kj})())}createSyncEngine(e,n){return(function(o,u,h,p,g,x,_){const w=new _A(o,u,h,p,g,x);return _&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=Fe(o);Ne(_i,"RemoteStore shutting down."),u.Ea.add(5),await Ic(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}sp.provider={build:()=>new sp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ma("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="FirestoreClient";class PA{constructor(e,n,r,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=Sn.UNAUTHENTICATED,this.clientId=Np.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async h=>{Ne(Or,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(r,(h=>(Ne(Or,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Fp(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Cm(a,e){a.asyncQueue.verifyOperationInProgress(),Ne(Or,"Initializing OfflineComponentProvider");const n=a.configuration;await e.initialize(n);let r=n.initialUser;a.setCredentialChangeListener((async o=>{r.isEqual(o)||(await $1(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=e}async function Wb(a,e){a.asyncQueue.verifyOperationInProgress();const n=await LA(a);Ne(Or,"Initializing OnlineComponentProvider"),await e.initialize(n,a.configuration),a.setCredentialChangeListener((r=>Gb(e.remoteStore,r))),a.setAppCheckTokenChangeListener(((r,o)=>Gb(e.remoteStore,o))),a._onlineComponents=e}async function LA(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){Ne(Or,"Using user provided OfflineComponentProvider");try{await Cm(a,a._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===le.FAILED_PRECONDITION||o.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;kl("Error using user provided cache. Falling back to memory cache: "+n),await Cm(a,new qd)}}else Ne(Or,"Using default OfflineComponentProvider"),await Cm(a,new OA(void 0));return a._offlineComponents}async function g_(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(Ne(Or,"Using user provided OnlineComponentProvider"),await Wb(a,a._uninitializedComponentsProvider._online)):(Ne(Or,"Using default OnlineComponentProvider"),await Wb(a,new sp))),a._onlineComponents}function VA(a){return g_(a).then((e=>e.syncEngine))}async function ap(a){const e=await g_(a),n=e.eventManager;return n.onListen=wA.bind(null,e.syncEngine),n.onUnlisten=SA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=TA.bind(null,e.syncEngine),n}function UA(a,e,n={}){const r=new Ar;return a.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,x){const _=new p_({next:A=>{_.Nu(),h.enqueueAndForget((()=>r_(u,w))),A.fromCache&&g.source==="server"?x.reject(new _e(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(A)},error:A=>x.reject(A)}),w=new i_(p,_,{includeMetadataChanges:!0,qa:!0});return a_(u,w)})(await ap(a),a.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(a){const e={};return a.timeoutSeconds!==void 0&&(e.timeoutSeconds=a.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="firestore.googleapis.com",Zb=!0;class ev{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=y_,this.ssl=Zb}else this.host=e.host,this.ssl=e.ssl??Zb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=K1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yj)throw new _e(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x_(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new _e(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new _e(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new _e(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dh{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ev({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ev(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new KS;switch(r.type){case"firstParty":return new XS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Jb.get(n);r&&(Ne("ComponentProvider","Removing Datastore"),Jb.delete(n),r.terminate())})(this),Promise.resolve()}}function qA(a,e,n,r={}){var x;a=as(a,dh);const o=ql(e),u=a._getSettings(),h={...u,emulatorOptions:a._getEmulatorOptions()},p=`${e}:${n}`;o&&(Bv(`https://${p}`),Fv("Firestore",!0)),u.host!==y_&&u.host!==p&&kl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:o,emulatorOptions:r};if(!yi(g,h)&&(a._setSettings(g),r.mockUserToken)){let _,w;if(typeof r.mockUserToken=="string")_=r.mockUserToken,w=Sn.MOCK_USER;else{_=xE(r.mockUserToken,(x=a._app)==null?void 0:x.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new _e(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Sn(A)}a._authCredentials=new QS(new s1(_,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ti(this.firestore,e,this._query)}}class Ut{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}toJSON(){return{type:Ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(jc(n,Ut._jsonSchema))return new Ut(e,r||null,new Re(bt.fromString(n.referencePath)))}}Ut._jsonSchemaVersion="firestore/documentReference/1.0",Ut._jsonSchema={type:Yt("string",Ut._jsonSchemaVersion),referencePath:Yt("string")};class Cr extends Ti{constructor(e,n,r){super(e,n,Cp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new Re(e))}withConverter(e){return new Cr(this.firestore,e,this._path)}}function st(a,e,...n){if(a=qt(a),a1("collection","path",e),a instanceof dh){const r=bt.fromString(e,...n);return fb(r),new Cr(a,null,r)}{if(!(a instanceof Ut||a instanceof Cr))throw new _e(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(bt.fromString(e,...n));return fb(r),new Cr(a.firestore,null,r)}}function ot(a,e,...n){if(a=qt(a),arguments.length===1&&(e=Np.newId()),a1("doc","path",e),a instanceof dh){const r=bt.fromString(e,...n);return hb(r),new Ut(a,null,new Re(r))}{if(!(a instanceof Ut||a instanceof Cr))throw new _e(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(bt.fromString(e,...n));return hb(r),new Ut(a.firestore,a instanceof Cr?a.converter:null,new Re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="AsyncQueue";class nv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new X1(this,"async_queue_retry"),this._c=()=>{const r=Am();r&&Ne(tv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Am();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Am();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ar;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Hl(e))throw e;Ne(tv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ma("INTERNAL UNHANDLED ERROR: ",sv(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Bp.createAndSchedule(this,e,n,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Oe(47125,{Pc:sv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function sv(a){let e=a.message||"";return a.stack&&(e=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(a){return(function(n,r){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(a,["next","error","complete"])}class Pa extends dh{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new nv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nv(e),this._firestoreClient=void 0,await e}}}function zA(a,e){const n=typeof a=="object"?a:Qv(),r=typeof a=="string"?a:kd,o=_p(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=pE("firestore");u&&qA(o,...u)}return o}function hh(a){if(a._terminated)throw new _e(le.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||BA(a),a._firestoreClient}function BA(a){var r,o,u;const e=a._freezeSettings(),n=(function(p,g,x,_){return new fT(p,g,x,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,x_(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(a._databaseId,((r=a._app)==null?void 0:r.options.appId)||"",a._persistenceKey,e);a._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(a._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),a._firestoreClient=new PA(a._authCredentials,a._appCheckCredentials,a._queue,n,a._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(a._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ws(bn.fromBase64String(e))}catch(n){throw new _e(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ws(bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ws._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(jc(e,ws._jsonSchema))return ws.fromBase64String(e.bytes)}}ws._jsonSchemaVersion="firestore/bytes/1.0",ws._jsonSchema={type:Yt("string",ws._jsonSchemaVersion),bytes:Yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new _e(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new _e(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new _e(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ia._jsonSchemaVersion}}static fromJSON(e){if(jc(e,ia._jsonSchema))return new ia(e.latitude,e.longitude)}}ia._jsonSchemaVersion="firestore/geoPoint/1.0",ia._jsonSchema={type:Yt("string",ia._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:la._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(jc(e,la._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new la(e.vectorValues);throw new _e(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}la._jsonSchemaVersion="firestore/vectorValue/1.0",la._jsonSchema={type:Yt("string",la._jsonSchemaVersion),vectorValues:Yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=/^__.*__$/;class HA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cc(e,this.data,n,this.fieldTransforms)}}class b_{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function v_(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{Ac:a})}}class Qp{constructor(e,n,r,o,u,h){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Qp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(v_(this.Ac)&&FA.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class GA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||oh(e)}Cc(e,n,r,o=!1){return new Qp({Ac:e,methodName:n,Dc:r,path:yn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mc(a){const e=a._freezeSettings(),n=oh(a._databaseId);return new GA(a._databaseId,!!e.ignoreUndefinedProperties,n)}function $p(a,e,n,r,o,u={}){const h=a.Cc(u.merge||u.mergeFields?2:0,e,n,o);Xp("Data must be an object, but it was:",h,r);const p=N_(r,h);let g,x;if(u.merge)g=new ss(h.fieldMask),x=h.fieldTransforms;else if(u.mergeFields){const _=[];for(const w of u.mergeFields){const A=rp(e,w,n);if(!h.contains(A))throw new _e(le.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);S_(_,A)||_.push(A)}g=new ss(_),x=h.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,x=h.fieldTransforms;return new HA(new Hn(p),g,x)}class mh extends fh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mh}}class Yp extends fh{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new vc(e.serializer,C1(e.serializer,this.Fc));return new VT(e.path,n)}isEqual(e){return e instanceof Yp&&this.Fc===e.Fc}}function __(a,e,n,r){const o=a.Cc(1,e,n);Xp("Data must be an object, but it was:",o,r);const u=[],h=Hn.empty();Pr(r,((g,x)=>{const _=Wp(e,g,n);x=qt(x);const w=o.yc(_);if(x instanceof mh)u.push(_);else{const A=Oc(x,w);A!=null&&(u.push(_),h.set(_,A))}}));const p=new ss(u);return new b_(h,p,o.fieldTransforms)}function w_(a,e,n,r,o,u){const h=a.Cc(1,e,n),p=[rp(e,r,n)],g=[o];if(u.length%2!=0)throw new _e(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)p.push(rp(e,u[A])),g.push(u[A+1]);const x=[],_=Hn.empty();for(let A=p.length-1;A>=0;--A)if(!S_(x,p[A])){const D=p[A];let V=g[A];V=qt(V);const M=h.yc(D);if(V instanceof mh)x.push(D);else{const P=Oc(V,M);P!=null&&(x.push(D),_.set(D,P))}}const w=new ss(x);return new b_(_,w,h.fieldTransforms)}function KA(a,e,n,r=!1){return Oc(n,a.Cc(r?4:3,e))}function Oc(a,e){if(E_(a=qt(a)))return Xp("Unsupported field value:",e,a),N_(a,e);if(a instanceof fh)return(function(r,o){if(!v_(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(a,e),null;if(a===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let h=0;for(const p of r){let g=Oc(p,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(a,e)}return(function(r,o){if((r=qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return C1(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Nt.fromDate(r);return{timestampValue:Ld(o.serializer,u)}}if(r instanceof Nt){const u=new Nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ld(o.serializer,u)}}if(r instanceof ia)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ws)return{bytesValue:U1(o.serializer,r._byteString)};if(r instanceof Ut){const u=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Dp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof la)return(function(h,p){return{mapValue:{fields:{[f1]:{stringValue:m1},[Dd]:{arrayValue:{values:h.toArray().map((x=>{if(typeof x!="number")throw p.Sc("VectorValues must only contain numeric values.");return Rp(p.serializer,x)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Jd(r)}`)})(a,e)}function N_(a,e){const n={};return l1(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pr(a,((r,o)=>{const u=Oc(o,e.mc(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function E_(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof Nt||a instanceof ia||a instanceof ws||a instanceof Ut||a instanceof fh||a instanceof la)}function Xp(a,e,n){if(!E_(n)||!r1(n)){const r=Jd(n);throw r==="an object"?e.Sc(a+" a custom object"):e.Sc(a+" "+r)}}function rp(a,e,n){if((e=qt(e))instanceof Dc)return e._internalPath;if(typeof e=="string")return Wp(a,e);throw zd("Field path arguments must be of type string or ",a,!1,void 0,n)}const QA=new RegExp("[~\\*/\\[\\]]");function Wp(a,e,n){if(e.search(QA)>=0)throw zd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,n);try{return new Dc(...e.split("."))._internalPath}catch{throw zd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,n)}}function zd(a,e,n,r,o){const u=r&&!r.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${r}`),h&&(g+=` in document ${o}`),g+=")"),new _e(le.INVALID_ARGUMENT,p+a+g)}function S_(a,e){return a.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,n,r,o,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $A(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $A extends T_{data(){return super.data()}}function Jp(a,e){return typeof e=="string"?Wp(a,e):e instanceof Dc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new _e(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zp{}class YA extends Zp{}function Yo(a,e,...n){let r=[];e instanceof Zp&&r.push(e),r=r.concat(n),(function(u){const h=u.filter((g=>g instanceof e0)).length,p=u.filter((g=>g instanceof ph)).length;if(h>1||h>0&&p>0)throw new _e(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)a=o._apply(a);return a}class ph extends YA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ph(e,n,r)}_apply(e){const n=this._parse(e);return A_(e._query,n),new Ti(e.firestore,e.converter,Qm(e._query,n))}_parse(e){const n=Mc(e.firestore);return(function(u,h,p,g,x,_,w){let A;if(x.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new _e(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){iv(w,_);const V=[];for(const M of w)V.push(rv(g,u,M));A={arrayValue:{values:V}}}else A=rv(g,u,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||iv(w,_),A=KA(p,h,w,_==="in"||_==="not-in");return $t.create(x,_,A)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Xo(a,e,n){const r=e,o=Jp("where",a);return ph._create(o,r,n)}class e0 extends Zp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new e0(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ps.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let h=o;const p=u.getFlattenedFilters();for(const g of p)A_(h,g),h=Qm(h,g)})(e._query,n),new Ti(e.firestore,e.converter,Qm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function rv(a,e,n){if(typeof(n=qt(n))=="string"){if(n==="")throw new _e(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!w1(e)&&n.indexOf("/")!==-1)throw new _e(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(bt.fromString(n));if(!Re.isDocumentKey(r))throw new _e(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _b(a,new Re(r))}if(n instanceof Ut)return _b(a,n._key);throw new _e(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jd(n)}.`)}function iv(a,e){if(!Array.isArray(a)||a.length===0)throw new _e(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function A_(a,e){const n=(function(o,u){for(const h of o)for(const p of h.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(a.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new _e(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class XA{convertValue(e,n="none"){switch(Dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Pr(e,((o,u)=>{r[o]=this.convertValue(u,n)})),r}convertVectorValue(e){var r,o,u;const n=(u=(o=(r=e.fields)==null?void 0:r[Dd].arrayValue)==null?void 0:o.values)==null?void 0:u.map((h=>Vt(h.doubleValue)));return new la(n)}convertGeoPoint(e){return new ia(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=th(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(pc(e));default:return null}}convertTimestamp(e){const n=Ir(e);return new Nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=bt.fromString(e);ct(G1(r),9688,{name:e});const o=new gc(r.get(1),r.get(3)),u=new Re(r.popFirst(5));return o.isEqual(n)||Ma(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(a,e,n){let r;return r=a?n&&(n.merge||n.mergeFields)?a.toFirestore(e,n):a.toFirestore(e):e,r}class nc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gi extends T_{constructor(e,n,r,o,u,h){super(e,n,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _d(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Jp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=gi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}gi._jsonSchemaVersion="firestore/documentSnapshot/1.0",gi._jsonSchema={type:Yt("string",gi._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class _d extends gi{data(e={}){return super.data(e)}}class xi{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new nc(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new _d(this._firestore,this._userDataWriter,r.key,r,new nc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _e(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((p=>{const g=new _d(o._firestore,o._userDataWriter,p.doc.key,p.doc,new nc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new _d(o._firestore,o._userDataWriter,p.doc.key,p.doc,new nc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let x=-1,_=-1;return p.type!==0&&(x=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),_=h.indexOf(p.doc.key)),{type:WA(p.type),doc:g,oldIndex:x,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Np.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function WA(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:a})}}xi._jsonSchemaVersion="firestore/querySnapshot/1.0",xi._jsonSchema={type:Yt("string",xi._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class n0 extends XA{constructor(e){super(),this.firestore=e}convertBytes(e){return new ws(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}}function fi(a){a=as(a,Ti);const e=as(a.firestore,Pa),n=hh(e),r=new n0(e);return j_(a._query),UA(n,a._query).then((o=>new xi(e,r,a,o)))}function lv(a,e,n){a=as(a,Ut);const r=as(a.firestore,Pa),o=t0(a.converter,e,n);return Pc(r,[$p(Mc(r),"setDoc",a._key,o,a.converter!==null,n).toMutation(a._key,kn.none())])}function on(a,e,n,...r){a=as(a,Ut);const o=as(a.firestore,Pa),u=Mc(o);let h;return h=typeof(e=qt(e))=="string"||e instanceof Dc?w_(u,"updateDoc",a._key,e,n,r):__(u,"updateDoc",a._key,e),Pc(o,[h.toMutation(a._key,kn.exists(!0))])}function Rm(a){return Pc(as(a.firestore,Pa),[new ih(a._key,kn.none())])}function Rn(a,e){const n=as(a.firestore,Pa),r=ot(a),o=t0(a.converter,e);return Pc(n,[$p(Mc(a.firestore),"addDoc",r._key,o,a.converter!==null,{}).toMutation(r._key,kn.exists(!1))]).then((()=>r))}function In(a,...e){var g,x,_;a=qt(a);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||av(e[r])||(n=e[r++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(av(e[r])){const w=e[r];e[r]=(g=w.next)==null?void 0:g.bind(w),e[r+1]=(x=w.error)==null?void 0:x.bind(w),e[r+2]=(_=w.complete)==null?void 0:_.bind(w)}let u,h,p;if(a instanceof Ut)h=as(a.firestore,Pa),p=Cp(a._key.path),u={next:w=>{e[r]&&e[r](JA(h,a,w))},error:e[r+1],complete:e[r+2]};else{const w=as(a,Ti);h=as(w.firestore,Pa),p=w._query;const A=new n0(h);u={next:D=>{e[r]&&e[r](new xi(h,A,w,D))},error:e[r+1],complete:e[r+2]},j_(a._query)}return(function(A,D,V,M){const P=new p_(M),ee=new i_(D,P,V);return A.asyncQueue.enqueueAndForget((async()=>a_(await ap(A),ee))),()=>{P.Nu(),A.asyncQueue.enqueueAndForget((async()=>r_(await ap(A),ee)))}})(hh(h),p,o,u)}function Pc(a,e){return(function(r,o){const u=new Ar;return r.asyncQueue.enqueueAndForget((async()=>jA(await VA(r),o,u))),u.promise})(hh(a),e)}function JA(a,e,n){const r=n.docs.get(e._key),o=new n0(a);return new gi(a,o,e._key,r,new nc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Mc(e)}set(e,n,r){this._verifyNotCommitted();const o=Im(e,this._firestore),u=t0(o.converter,n,r),h=$p(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,r);return this._mutations.push(h.toMutation(o._key,kn.none())),this}update(e,n,r,...o){this._verifyNotCommitted();const u=Im(e,this._firestore);let h;return h=typeof(n=qt(n))=="string"||n instanceof Dc?w_(this._dataReader,"WriteBatch.update",u._key,n,r,o):__(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(h.toMutation(u._key,kn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Im(e,this._firestore);return this._mutations=this._mutations.concat(new ih(n._key,kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _e(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Im(a,e){if((a=qt(a)).firestore!==e)throw new _e(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}function km(a){return new Yp("increment",a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(a){return hh(a=as(a,Pa)),new ZA(a,(e=>Pc(a,e)))}(function(e,n=!0){(function(o){Bl=o})(zl),Il(new bi("firestore",((r,{instanceIdentifier:o,options:u})=>{const h=r.getProvider("app").getImmediate(),p=new Pa(new $S(r.getProvider("auth-internal")),new WS(h,r.getProvider("app-check-internal")),(function(x,_){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new _e(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gc(x.options.projectId,_)})(h,o),h);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),Tr(ob,cb,e),Tr(ob,cb,"esm2020")})();function C_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const e5=C_,R_=new Sc("auth","Firebase",C_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd=new bp("@firebase/auth");function t5(a,...e){Bd.logLevel<=Je.WARN&&Bd.warn(`Auth (${zl}): ${a}`,...e)}function wd(a,...e){Bd.logLevel<=Je.ERROR&&Bd.error(`Auth (${zl}): ${a}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(a,...e){throw s0(a,...e)}function oa(a,...e){return s0(a,...e)}function I_(a,e,n){const r={...e5(),[e]:n};return new Sc("auth","Firebase",r).create(e,{appName:a.name})}function ka(a){return I_(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function s0(a,...e){if(typeof a!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=a.name),a._errorFactory.create(n,...r)}return R_.create(a,...e)}function Me(a,e,...n){if(!a)throw s0(e,...n)}function Ra(a){const e="INTERNAL ASSERTION FAILED: "+a;throw wd(e),new Error(e)}function La(a,e){a||Ra(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(){var a;return typeof self<"u"&&((a=self.location)==null?void 0:a.href)||""}function n5(){return ov()==="http:"||ov()==="https:"}function ov(){var a;return typeof self<"u"&&((a=self.location)==null?void 0:a.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(n5()||NE()||"connection"in navigator)?navigator.onLine:!0}function a5(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n){this.shortDelay=e,this.longDelay=n,La(n>e,"Short delay should be less than long delay!"),this.isMobile=vE()||EE()}get(){return s5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(a,e){La(a.emulator,"Emulator should always be set here");const{url:n}=a.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ra("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ra("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ra("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],l5=new Lc(3e4,6e4);function Vr(a,e){return a.tenantId&&!e.tenantId?{...e,tenantId:a.tenantId}:e}async function Ur(a,e,n,r,o={}){return D_(a,o,async()=>{let u={},h={};r&&(e==="GET"?h=r:u={body:JSON.stringify(r)});const p=Tc({key:a.config.apiKey,...h}).slice(1),g=await a._getAdditionalHeaders();g["Content-Type"]="application/json",a.languageCode&&(g["X-Firebase-Locale"]=a.languageCode);const x={method:e,headers:g,...u};return wE()||(x.referrerPolicy="no-referrer"),a.emulatorConfig&&ql(a.emulatorConfig.host)&&(x.credentials="include"),k_.fetch()(await M_(a,a.config.apiHost,n,p),x)})}async function D_(a,e,n){a._canInitEmulator=!1;const r={...r5,...e};try{const o=new c5(a),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw md(a,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const p=u.ok?h.errorMessage:h.error.message,[g,x]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw md(a,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw md(a,"email-already-in-use",h);if(g==="USER_DISABLED")throw md(a,"user-disabled",h);const _=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw I_(a,_,x);Ls(a,_)}}catch(o){if(o instanceof Va)throw o;Ls(a,"network-request-failed",{message:String(o)})}}async function Vc(a,e,n,r,o={}){const u=await Ur(a,e,n,r,o);return"mfaPendingCredential"in u&&Ls(a,"multi-factor-auth-required",{_serverResponse:u}),u}async function M_(a,e,n,r){const o=`${e}${n}?${r}`,u=a,h=u.config.emulator?a0(a.config,o):`${a.config.apiScheme}://${o}`;return i5.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function o5(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class c5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(oa(this.auth,"network-request-failed")),l5.get())})}}function md(a,e,n){const r={appName:a.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=oa(a,e,r);return o.customData._tokenResponse=n,o}function cv(a){return a!==void 0&&a.enterprise!==void 0}class u5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return o5(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function d5(a,e){return Ur(a,"GET","/v2/recaptchaConfig",Vr(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h5(a,e){return Ur(a,"POST","/v1/accounts:delete",e)}async function Fd(a,e){return Ur(a,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(a){if(a)try{const e=new Date(Number(a));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function f5(a,e=!1){const n=qt(a),r=await n.getIdToken(e),o=r0(r);Me(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:oc(Dm(o.auth_time)),issuedAtTime:oc(Dm(o.iat)),expirationTime:oc(Dm(o.exp)),signInProvider:h||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Dm(a){return Number(a)*1e3}function r0(a){const[e,n,r]=a.split(".");if(e===void 0||n===void 0||r===void 0)return wd("JWT malformed, contained fewer than 3 sections"),null;try{const o=Vv(n);return o?JSON.parse(o):(wd("Failed to decode base64 JWT payload"),null)}catch(o){return wd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function uv(a){const e=r0(a);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(a,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Va&&m5(r)&&a.auth.currentUser===a&&await a.auth.signOut(),r}}function m5({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=oc(this.lastLoginAt),this.creationTime=oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hd(a){var w;const e=a.auth,n=await a.getIdToken(),r=await _c(a,Fd(e,{idToken:n}));Me(r==null?void 0:r.users.length,e,"internal-error");const o=r.users[0];a._notifyReloadListener(o);const u=(w=o.providerUserInfo)!=null&&w.length?O_(o.providerUserInfo):[],h=x5(a.providerData,u),p=a.isAnonymous,g=!(a.email&&o.passwordHash)&&!(h!=null&&h.length),x=p?g:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new lp(o.createdAt,o.lastLoginAt),isAnonymous:x};Object.assign(a,_)}async function g5(a){const e=qt(a);await Hd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function x5(a,e){return[...a.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function O_(a){return a.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y5(a,e){const n=await D_(a,{},async()=>{const r=Tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=a.config,h=await M_(a,o,"/v1/token",`key=${u}`),p=await a._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:r};return a.emulatorConfig&&ql(a.emulatorConfig.host)&&(g.credentials="include"),k_.fetch()(h,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function b5(a,e){return Ur(a,"POST","/v2/accounts:revokeToken",Vr(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const n=uv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:u}=await y5(e,n);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:u}=n,h=new jl;return r&&(Me(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),o&&(Me(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(Me(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jl,this.toJSON())}_performRefresh(){return Ra("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(a,e){Me(typeof a=="string"||typeof a>"u","internal-error",{appName:e})}class Os{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new p5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new lp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await _c(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return f5(this,e)}reload(){return g5(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Os({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_s(this.auth.app))return Promise.reject(ka(this.auth));const e=await this.getIdToken();return await _c(this,h5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,x=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:w,emailVerified:A,isAnonymous:D,providerData:V,stsTokenManager:M}=n;Me(w&&M,e,"internal-error");const P=jl.fromJSON(this.name,M);Me(typeof w=="string",e,"internal-error"),yr(r,e.name),yr(o,e.name),Me(typeof A=="boolean",e,"internal-error"),Me(typeof D=="boolean",e,"internal-error"),yr(u,e.name),yr(h,e.name),yr(p,e.name),yr(g,e.name),yr(x,e.name),yr(_,e.name);const ee=new Os({uid:w,auth:e,email:o,emailVerified:A,displayName:r,isAnonymous:D,photoURL:h,phoneNumber:u,tenantId:p,stsTokenManager:P,createdAt:x,lastLoginAt:_});return V&&Array.isArray(V)&&(ee.providerData=V.map(ue=>({...ue}))),g&&(ee._redirectEventId=g),ee}static async _fromIdTokenResponse(e,n,r=!1){const o=new jl;o.updateFromServerResponse(n);const u=new Os({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Hd(u),u}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Me(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?O_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),p=new jl;p.updateFromIdToken(r);const g=new Os({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new lp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,x),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=new Map;function Ia(a){La(a instanceof Function,"Expected a class definition");let e=dv.get(a);return e?(La(e instanceof a,"Instance stored in cache mismatched with class"),e):(e=new a,dv.set(a,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}P_.type="NONE";const hv=P_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(a,e,n){return`firebase:${a}:${e}:${n}`}class Al{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Nd(this.userKey,o.apiKey,u),this.fullPersistenceKey=Nd("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Fd(this.auth,{idToken:e}).catch(()=>{});return n?Os._fromGetAccountInfoResponse(this.auth,n,e):null}return Os._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Al(Ia(hv),e,r);const o=(await Promise.all(n.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let u=o[0]||Ia(hv);const h=Nd(r,e.config.apiKey,e.name);let p=null;for(const x of n)try{const _=await x._get(h);if(_){let w;if(typeof _=="string"){const A=await Fd(e,{idToken:_}).catch(()=>{});if(!A)break;w=await Os._fromGetAccountInfoResponse(e,A,_)}else w=Os._fromJSON(e,_);x!==u&&(p=w),u=x;break}}catch{}const g=o.filter(x=>x._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Al(u,e,r):(u=g[0],p&&await u._set(h,p.toJSON()),await Promise.all(n.map(async x=>{if(x!==u)try{await x._remove(h)}catch{}})),new Al(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(a){const e=a.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(q_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(L_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(B_(e))return"Blackberry";if(F_(e))return"Webos";if(V_(e))return"Safari";if((e.includes("chrome/")||U_(e))&&!e.includes("edge/"))return"Chrome";if(z_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=a.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function L_(a=jn()){return/firefox\//i.test(a)}function V_(a=jn()){const e=a.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function U_(a=jn()){return/crios\//i.test(a)}function q_(a=jn()){return/iemobile/i.test(a)}function z_(a=jn()){return/android/i.test(a)}function B_(a=jn()){return/blackberry/i.test(a)}function F_(a=jn()){return/webos/i.test(a)}function i0(a=jn()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function v5(a=jn()){var e;return i0(a)&&!!((e=window.navigator)!=null&&e.standalone)}function _5(){return SE()&&document.documentMode===10}function H_(a=jn()){return i0(a)||z_(a)||F_(a)||B_(a)||/windows phone/i.test(a)||q_(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(a,e=[]){let n;switch(a){case"Browser":n=fv(jn());break;case"Worker":n=`${fv(jn())}-${a}`;break;default:n=a}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((h,p)=>{try{const g=e(u);h(g)}catch(g){p(g)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N5(a,e={}){return Ur(a,"GET","/v2/passwordPolicy",Vr(a,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5=6;class S5{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??E5,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mv(this),this.idTokenSubscription=new mv(this),this.beforeStateQueue=new w5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=R_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ia(n)),this._initializationPromise=this.queue(async()=>{var r,o,u;if(!this._deleted&&(this.persistenceManager=await Al.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Fd(this,{idToken:e}),r=await Os._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(_s(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(p,p))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(u=this.redirectUser)==null?void 0:u._redirectEventId,p=r==null?void 0:r._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===p)&&(g!=null&&g.user)&&(r=g.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(h){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=a5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_s(this.app))return Promise.reject(ka(this));const n=e?qt(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _s(this.app)?Promise.reject(ka(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _s(this.app)?Promise.reject(ka(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ia(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await N5(this),n=new S5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Sc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await b5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ia(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await Al.create(this,[Ia(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(p,this,"internal-error"),p.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,r,o);return()=>{h=!0,g()}}else{const g=e.addObserver(n);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=G_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(_s(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&t5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ji(a){return qt(a)}class mv{constructor(e){this.auth=e,this.observer=null,this.addObserver=DE(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function j5(a){gh=a}function K_(a){return gh.loadJS(a)}function A5(){return gh.recaptchaEnterpriseScript}function C5(){return gh.gapiScript}function R5(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class I5{constructor(){this.enterprise=new k5}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class k5{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const D5="recaptcha-enterprise",Q_="NO_RECAPTCHA";class M5{constructor(e){this.type=D5,this.auth=ji(e)}async verify(e="verify",n=!1){async function r(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,p)=>{d5(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const x=new u5(g);return u.tenantId==null?u._agentRecaptchaConfig=x:u._tenantRecaptchaConfigs[u.tenantId]=x,h(x.siteKey)}}).catch(g=>{p(g)})})}function o(u,h,p){const g=window.grecaptcha;cv(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(x=>{h(x)}).catch(()=>{h(Q_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new I5().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{r(this.auth).then(p=>{if(!n&&cv(window.grecaptcha))o(p,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=A5();g.length!==0&&(g+=p),K_(g).then(()=>{o(p,u,h)}).catch(x=>{h(x)})}}).catch(p=>{h(p)})})}}async function pv(a,e,n,r=!1,o=!1){const u=new M5(a);let h;if(o)h=Q_;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,x=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:x,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function op(a,e,n,r,o){var u;if((u=a._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await pv(a,e,n,n==="getOobCode");return r(a,h)}else return r(a,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await pv(a,e,n,n==="getOobCode");return r(a,p)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(a,e){const n=_p(a,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(yi(u,e??{}))return o;Ls(o,"already-initialized")}return n.initialize({options:e})}function P5(a,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ia);e!=null&&e.errorMap&&a._updateErrorMap(e.errorMap),a._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function L5(a,e,n){const r=ji(a);Me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=$_(e),{host:h,port:p}=V5(e),g=p===null?"":`:${p}`,x={url:`${u}//${h}${g}/`},_=Object.freeze({host:h,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Me(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Me(yi(x,r.config.emulator)&&yi(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=x,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,ql(h)?(Bv(`${u}//${h}${g}`),Fv("Auth",!0)):U5()}function $_(a){const e=a.indexOf(":");return e<0?"":a.substr(0,e+1)}function V5(a){const e=$_(a),n=/(\/\/)?([^?#/]+)/.exec(a.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:gv(r.substr(u.length+1))}}else{const[u,h]=r.split(":");return{host:u,port:gv(h)}}}function gv(a){if(!a)return null;const e=Number(a);return isNaN(e)?null:e}function U5(){function a(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ra("not implemented")}_getIdTokenResponse(e){return Ra("not implemented")}_linkToIdToken(e,n){return Ra("not implemented")}_getReauthenticationResolver(e){return Ra("not implemented")}}async function q5(a,e){return Ur(a,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z5(a,e){return Vc(a,"POST","/v1/accounts:signInWithPassword",Vr(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B5(a,e){return Vc(a,"POST","/v1/accounts:signInWithEmailLink",Vr(a,e))}async function F5(a,e){return Vc(a,"POST","/v1/accounts:signInWithEmailLink",Vr(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends l0{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new wc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new wc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return op(e,n,"signInWithPassword",z5);case"emailLink":return B5(e,{email:this._email,oobCode:this._password});default:Ls(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return op(e,r,"signUpPassword",q5);case"emailLink":return F5(e,{idToken:n,email:this._email,oobCode:this._password});default:Ls(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(a,e){return Vc(a,"POST","/v1/accounts:signInWithIdp",Vr(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5="http://localhost";class wi extends l0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new wi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ls("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=n;if(!r||!o)return null;const h=new wi(r,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return Cl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Cl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Cl(e,n)}buildRequest(){const e={requestUri:H5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Tc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G5(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function K5(a){const e=Wo(Jo(a)).link,n=e?Wo(Jo(e)).deep_link_id:null,r=Wo(Jo(a)).deep_link_id;return(r?Wo(Jo(r)).link:null)||r||n||e||a}class o0{constructor(e){const n=Wo(Jo(e)),r=n.apiKey??null,o=n.oobCode??null,u=G5(n.mode??null);Me(r&&o&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=K5(e);try{return new o0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(){this.providerId=Kl.PROVIDER_ID}static credential(e,n){return wc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=o0.parseLink(n);return Me(r,"argument-error"),wc._fromEmailAndCode(e,r.code,r.tenantId)}}Kl.PROVIDER_ID="password";Kl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Kl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc extends Y_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends Uc{constructor(){super("facebook.com")}static credential(e){return wi._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return br.credential(e.oauthAccessToken)}catch{return null}}}br.FACEBOOK_SIGN_IN_METHOD="facebook.com";br.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return wi._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return vr.credential(n,r)}catch{return null}}}vr.GOOGLE_SIGN_IN_METHOD="google.com";vr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Uc{constructor(){super("github.com")}static credential(e){return wi._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _r.credential(e.oauthAccessToken)}catch{return null}}}_r.GITHUB_SIGN_IN_METHOD="github.com";_r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Uc{constructor(){super("twitter.com")}static credential(e,n){return wi._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return wr.credential(n,r)}catch{return null}}}wr.TWITTER_SIGN_IN_METHOD="twitter.com";wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q5(a,e){return Vc(a,"POST","/v1/accounts:signUp",Vr(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const u=await Os._fromIdTokenResponse(e,r,o),h=xv(r);return new Ni({user:u,providerId:h,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=xv(r);return new Ni({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function xv(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd extends Va{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Gd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new Gd(e,n,r,o)}}function X_(a,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(a):n._getIdTokenResponse(a)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Gd._fromErrorAndOperation(a,u,e,r):u})}async function $5(a,e,n=!1){const r=await _c(a,e._linkToIdToken(a.auth,await a.getIdToken()),n);return Ni._forOperation(a,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y5(a,e,n=!1){const{auth:r}=a;if(_s(r.app))return Promise.reject(ka(r));const o="reauthenticate";try{const u=await _c(a,X_(r,o,e,a),n);Me(u.idToken,r,"internal-error");const h=r0(u.idToken);Me(h,r,"internal-error");const{sub:p}=h;return Me(a.uid===p,r,"user-mismatch"),Ni._forOperation(a,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Ls(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W_(a,e,n=!1){if(_s(a.app))return Promise.reject(ka(a));const r="signIn",o=await X_(a,r,e),u=await Ni._fromIdTokenResponse(a,r,o);return n||await a._updateCurrentUser(u.user),u}async function X5(a,e){return W_(ji(a),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J_(a){const e=ji(a);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function W5(a,e,n){if(_s(a.app))return Promise.reject(ka(a));const r=ji(a),h=await op(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Q5).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&J_(a),g}),p=await Ni._fromIdTokenResponse(r,"signIn",h);return await r._updateCurrentUser(p.user),p}function J5(a,e,n){return _s(a.app)?Promise.reject(ka(a)):X5(qt(a),Kl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&J_(a),r})}function Z5(a,e,n,r){return qt(a).onIdTokenChanged(e,n,r)}function eC(a,e,n){return qt(a).beforeAuthStateChanged(e,n)}function tC(a,e,n,r){return qt(a).onAuthStateChanged(e,n,r)}function nC(a){return qt(a).signOut()}const Kd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kd,"1"),this.storage.removeItem(Kd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=1e3,aC=10;class ew extends Z_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=H_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(r);!n&&this.localCache[r]===h||this.notifyListeners(r,h)},u=this.storage.getItem(r);_5()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,aC):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},sC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ew.type="LOCAL";const rC=ew;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw extends Z_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tw.type="SESSION";const nw=tw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(a){return Promise.all(a.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new xh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:u}=n.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(h).map(async x=>x(n.origin,u)),g=await iC(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(a="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return a+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((p,g)=>{const x=c0("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},r);h={messageChannel:o,onMessage(w){const A=w;if(A.data.eventId===x)switch(A.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(A.data.response);break;default:clearTimeout(_),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:x,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(){return window}function oC(a){ca().location.href=a}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(){return typeof ca().WorkerGlobalScope<"u"&&typeof ca().importScripts=="function"}async function cC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uC(){var a;return((a=navigator==null?void 0:navigator.serviceWorker)==null?void 0:a.controller)||null}function dC(){return sw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="firebaseLocalStorageDb",hC=1,Qd="firebaseLocalStorage",rw="fbase_key";class qc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yh(a,e){return a.transaction([Qd],e?"readwrite":"readonly").objectStore(Qd)}function fC(){const a=indexedDB.deleteDatabase(aw);return new qc(a).toPromise()}function cp(){const a=indexedDB.open(aw,hC);return new Promise((e,n)=>{a.addEventListener("error",()=>{n(a.error)}),a.addEventListener("upgradeneeded",()=>{const r=a.result;try{r.createObjectStore(Qd,{keyPath:rw})}catch(o){n(o)}}),a.addEventListener("success",async()=>{const r=a.result;r.objectStoreNames.contains(Qd)?e(r):(r.close(),await fC(),e(await cp()))})})}async function yv(a,e,n){const r=yh(a,!0).put({[rw]:e,value:n});return new qc(r).toPromise()}async function mC(a,e){const n=yh(a,!1).get(e),r=await new qc(n).toPromise();return r===void 0?null:r.value}function bv(a,e){const n=yh(a,!0).delete(e);return new qc(n).toPromise()}const pC=800,gC=3;class iw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>gC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xh._getInstance(dC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await cC(),!this.activeServiceWorker)return;this.sender=new lC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cp();return await yv(e,Kd,"1"),await bv(e,Kd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>yv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>mC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>bv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=yh(o,!1).getAll();return new qc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iw.type="LOCAL";const xC=iw;new Lc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(a,e){return e?Ia(e):(Me(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0 extends l0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Cl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Cl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function bC(a){return W_(a.auth,new u0(a),a.bypassAuthState)}function vC(a){const{auth:e,user:n}=a;return Me(n,e,"internal-error"),Y5(n,new u0(a),a.bypassAuthState)}async function _C(a){const{auth:e,user:n}=a;return Me(n,e,"internal-error"),$5(n,new u0(a),a.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:u,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bC;case"linkViaPopup":case"linkViaRedirect":return _C;case"reauthViaPopup":case"reauthViaRedirect":return vC;default:Ls(this.auth,"internal-error")}}resolve(e){La(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){La(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=new Lc(2e3,1e4);class Sl extends lw{constructor(e,n,r,o,u){super(e,n,o,u),this.provider=r,this.authWindow=null,this.pollId=null,Sl.currentPopupAction&&Sl.currentPopupAction.cancel(),Sl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){La(this.filter.length===1,"Popup operations only handle one event");const e=c0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(oa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(oa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wC.get())};e()}}Sl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="pendingRedirect",Ed=new Map;class EC extends lw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ed.get(this.auth._key());if(!e){try{const r=await SC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ed.set(this.auth._key(),e)}return this.bypassAuthState||Ed.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SC(a,e){const n=AC(e),r=jC(a);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function TC(a,e){Ed.set(a._key(),e)}function jC(a){return Ia(a._redirectPersistence)}function AC(a){return Nd(NC,a.config.apiKey,a.name)}async function CC(a,e,n=!1){if(_s(a.app))return Promise.reject(ka(a));const r=ji(a),o=yC(r,e),h=await new EC(r,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=600*1e3;class IC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ow(e)){const o=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(oa(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RC&&this.cachedEventUids.clear(),this.cachedEventUids.has(vv(e))}saveEventToCache(e){this.cachedEventUids.add(vv(e)),this.lastProcessedEventTime=Date.now()}}function vv(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(e=>e).join("-")}function ow({type:a,error:e}){return a==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kC(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ow(a);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DC(a,e={}){return Ur(a,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OC=/^https?/;async function PC(a){if(a.config.emulator)return;const{authorizedDomains:e}=await DC(a);for(const n of e)try{if(LC(n))return}catch{}Ls(a,"unauthorized-domain")}function LC(a){const e=ip(),{protocol:n,hostname:r}=new URL(e);if(a.startsWith("chrome-extension://")){const h=new URL(a);return h.hostname===""&&r===""?n==="chrome-extension:"&&a.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===r}if(!OC.test(n))return!1;if(MC.test(a))return r===a;const o=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=new Lc(3e4,6e4);function _v(){const a=ca().___jsl;if(a!=null&&a.H){for(const e of Object.keys(a.H))if(a.H[e].r=a.H[e].r||[],a.H[e].L=a.H[e].L||[],a.H[e].r=[...a.H[e].L],a.CP)for(let n=0;n<a.CP.length;n++)a.CP[n]=null}}function UC(a){return new Promise((e,n)=>{var o,u,h;function r(){_v(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_v(),n(oa(a,"network-request-failed"))},timeout:VC.get()})}if((u=(o=ca().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((h=ca().gapi)!=null&&h.load)r();else{const p=R5("iframefcb");return ca()[p]=()=>{gapi.load?r():n(oa(a,"network-request-failed"))},K_(`${C5()}?onload=${p}`).catch(g=>n(g))}}).catch(e=>{throw Sd=null,e})}let Sd=null;function qC(a){return Sd=Sd||UC(a),Sd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=new Lc(5e3,15e3),BC="__/auth/iframe",FC="emulator/auth/iframe",HC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KC(a){const e=a.config;Me(e.authDomain,a,"auth-domain-config-required");const n=e.emulator?a0(e,FC):`https://${a.config.authDomain}/${BC}`,r={apiKey:e.apiKey,appName:a.name,v:zl},o=GC.get(a.config.apiHost);o&&(r.eid=o);const u=a._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${Tc(r).slice(1)}`}async function QC(a){const e=await qC(a),n=ca().gapi;return Me(n,a,"internal-error"),e.open({where:document.body,url:KC(a),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HC,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const h=oa(a,"network-request-failed"),p=ca().setTimeout(()=>{u(h)},zC.get());function g(){ca().clearTimeout(p),o(r)}r.ping(g).then(g,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},YC=500,XC=600,WC="_blank",JC="http://localhost";class wv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZC(a,e,n,r=YC,o=XC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const g={...$C,width:r.toString(),height:o.toString(),top:u,left:h},x=jn().toLowerCase();n&&(p=U_(x)?WC:n),L_(x)&&(e=e||JC,g.scrollbars="yes");const _=Object.entries(g).reduce((A,[D,V])=>`${A}${D}=${V},`,"");if(v5(x)&&p!=="_self")return e4(e||"",p),new wv(null);const w=window.open(e||"",p,_);Me(w,a,"popup-blocked");try{w.focus()}catch{}return new wv(w)}function e4(a,e){const n=document.createElement("a");n.href=a,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4="__/auth/handler",n4="emulator/auth/handler",s4=encodeURIComponent("fac");async function Nv(a,e,n,r,o,u){Me(a.config.authDomain,a,"auth-domain-config-required"),Me(a.config.apiKey,a,"invalid-api-key");const h={apiKey:a.config.apiKey,appName:a.name,authType:n,redirectUrl:r,v:zl,eventId:o};if(e instanceof Y_){e.setDefaultLanguage(a.languageCode),h.providerId=e.providerId||"",kE(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))h[_]=w}if(e instanceof Uc){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(h.scopes=_.join(","))}a.tenantId&&(h.tid=a.tenantId);const p=h;for(const _ of Object.keys(p))p[_]===void 0&&delete p[_];const g=await a._getAppCheckToken(),x=g?`#${s4}=${encodeURIComponent(g)}`:"";return`${a4(a)}?${Tc(p).slice(1)}${x}`}function a4({config:a}){return a.emulator?a0(a,n4):`https://${a.authDomain}/${t4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="webStorageSupport";class r4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nw,this._completeRedirectFn=CC,this._overrideRedirectResult=TC}async _openPopup(e,n,r,o){var h;La((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const u=await Nv(e,n,r,ip(),o);return ZC(e,u,c0())}async _openRedirect(e,n,r,o){await this._originValidation(e);const u=await Nv(e,n,r,ip(),o);return oC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(La(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await QC(e),r=new IC(e);return n.register("authEvent",o=>(Me(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Mm,{type:Mm},o=>{var h;const u=(h=o==null?void 0:o[0])==null?void 0:h[Mm];u!==void 0&&n(!!u),Ls(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=PC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return H_()||V_()||i0()}}const i4=r4;var Ev="@firebase/auth",Sv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function c4(a){Il(new bi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=r.options;Me(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:h,authDomain:p,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:G_(a)},x=new T5(r,o,u,g);return P5(x,n),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Il(new bi("auth-internal",e=>{const n=ji(e.getProvider("auth").getImmediate());return(r=>new l4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tr(Ev,Sv,o4(a)),Tr(Ev,Sv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=300,d4=zv("authIdTokenMaxAge")||u4;let Tv=null;const h4=a=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>d4)return;const o=n==null?void 0:n.token;Tv!==o&&(Tv=o,await fetch(a,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function f4(a=Qv()){const e=_p(a,"auth");if(e.isInitialized())return e.getImmediate();const n=O5(a,{popupRedirectResolver:i4,persistence:[xC,rC,nw]}),r=zv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const h=h4(u.toString());eC(n,h,()=>h(n.currentUser)),Z5(n,p=>h(p))}}const o=Uv("auth");return o&&L5(n,`http://${o}`),n}function m4(){var a;return((a=document.getElementsByTagName("head"))==null?void 0:a[0])??document}j5({loadJS(a){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",a),r.onload=e,r.onerror=o=>{const u=oa("internal-error");u.customData=o,n(u)},r.type="text/javascript",r.charset="UTF-8",m4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});c4("Browser");const p4={apiKey:"AIzaSyDHQFIcPtd97RAPiT41EyQXaCflHga4jXI",authDomain:"masbotinventory.firebaseapp.com",projectId:"masbotinventory",storageBucket:"masbotinventory.firebasestorage.app",messagingSenderId:"1040093470535",appId:"1:1040093470535:web:dc9ec5b6da52e37aa83662",measurementId:"G-FV1T8VHT5Z"},cw=Kv(p4),we=zA(cw),pd=f4(cw),g4=()=>{var Qn;const[a,e]=z.useState(!1),[n,r]=z.useState(!1),[o,u]=z.useState(null),[h,p]=z.useState(null),[g,x]=z.useState(!0),[_,w]=z.useState([]),[A,D]=z.useState([]),[V,M]=z.useState({}),[P,ee]=z.useState([]),[ue,te]=z.useState([]),[ne,F]=z.useState([]),[W,C]=z.useState([]),[N,S]=z.useState([]),[E,j]=z.useState([]),[k,I]=z.useState([]),[me,ke]=z.useState([]),[G,oe]=z.useState([]),[ye,je]=z.useState([]),[Ue,L]=z.useState([]),[Y,he]=z.useState([]);z.useEffect(()=>tC(pd,fe=>{fe?(e(!0),fe.email==="admin@masbot.erp"?p("admin"):p(fe.email)):h||(e(!1),p(null),u(null)),x(!1)}),[]),z.useEffect(()=>{if(!h){w([]),D([]);return}let se=[],fe=!0;return(async()=>{const Se=[{employeeId:"EMP-001",firstName:"Ali",lastName:"Raza",fatherName:"Raza Khan",email:"ali.raza@example.com",phone:"0300-1234567",cnic:"35202-1234567-1",department:"IT",designation:"Developer",joiningDate:"2023-01-15",salary:"120000",role:"Employee",status:"Active",employmentType:"Permanent",leaveBalance:{annual:{total:14,used:0},sick:{total:7,used:0},casual:{total:6,used:0},maternity:{total:90,used:0},paternity:{total:7,used:0},alternateDayOff:{total:50,used:0},others:{total:0,used:0}}},{employeeId:"EMP-002",firstName:"Sara",lastName:"Khan",fatherName:"Ahmed Khan",email:"sara.khan@example.com",phone:"0301-7654321",cnic:"35202-2345678-2",department:"HR",designation:"HR Manager",joiningDate:"2022-05-20",salary:"150000",role:"HR",status:"Active",employmentType:"Permanent",leaveBalance:{annual:{total:14,used:0},sick:{total:7,used:0},casual:{total:6,used:0},maternity:{total:90,used:0},paternity:{total:7,used:0},alternateDayOff:{total:50,used:0},others:{total:0,used:0}}},{employeeId:"EMP-003",firstName:"Ahmed",lastName:"Ali",fatherName:"Bashir Ali",email:"ahmed.ali@example.com",phone:"0302-1122334",cnic:"35202-3456789-3",department:"Finance",designation:"Accountant",joiningDate:"2023-03-10",salary:"100000",role:"HOD",status:"Active",employmentType:"Permanent",leaveBalance:{annual:{total:14,used:0},sick:{total:7,used:0},casual:{total:6,used:0},maternity:{total:90,used:0},paternity:{total:7,used:0},alternateDayOff:{total:50,used:0},others:{total:0,used:0}}}],Ve=[{type:"Kitchen",model:"Flour",quantity:25,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-001"},{type:"Kitchen",model:"Sugar",quantity:25,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-002"},{type:"Kitchen",model:"Salt",quantity:10,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-003"},{type:"Kitchen",model:"Butter",quantity:10,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-004"},{type:"Kitchen",model:"Milk",quantity:20,unit:"liters",status:"In Stock",assignedTo:"",itemCode:"KIT-005"},{type:"Kitchen",model:"Eggs",quantity:100,unit:"pieces",status:"In Stock",assignedTo:"",itemCode:"KIT-006"},{type:"Kitchen",model:"Coffee Beans",quantity:5,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-007"},{type:"Kitchen",model:"Yeast",quantity:2,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-008"},{type:"Kitchen",model:"Olive Oil",quantity:5,unit:"liters",status:"In Stock",assignedTo:"",itemCode:"KIT-009"},{type:"Kitchen",model:"Vinegar",quantity:5,unit:"liters",status:"In Stock",assignedTo:"",itemCode:"KIT-010"},{type:"Kitchen",model:"Onion",quantity:50,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-011"},{type:"Kitchen",model:"Chicken (with bone)",quantity:20,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-020"},{type:"Kitchen",model:"Chicken (boneless)",quantity:20,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-021"},{type:"Kitchen",model:"Tomatoes",quantity:30,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-022"},{type:"Kitchen",model:"Garlic paste",quantity:5,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-023"},{type:"Kitchen",model:"Ginger paste",quantity:5,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-024"},{type:"Kitchen",model:"Green chilies",quantity:5,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-025"},{type:"Kitchen",model:"Yogurt",quantity:15,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-026"},{type:"Kitchen",model:"Cooking oil",quantity:50,unit:"liters",status:"In Stock",assignedTo:"",itemCode:"KIT-027"},{type:"Kitchen",model:"Red chili powder",quantity:5,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-028"},{type:"Kitchen",model:"Garam masala",quantity:5,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-029"}],ze=[{name:"Chicken Karahi",ingredients:[{name:"Chicken (with bone)",quantity:1,unit:"kg"},{name:"Tomatoes",quantity:.5,unit:"kg"},{name:"Onion",quantity:.2,unit:"kg"},{name:"Garlic paste",quantity:.02,unit:"kg"},{name:"Ginger paste",quantity:.015,unit:"kg"},{name:"Green chilies",quantity:.01,unit:"kg"},{name:"Yogurt",quantity:.1,unit:"kg"},{name:"Cooking oil",quantity:.05,unit:"liters"},{name:"Salt",quantity:.01,unit:"kg"},{name:"Red chili powder",quantity:.005,unit:"kg"},{name:"Garam masala",quantity:.003,unit:"kg"}]},{name:"Boneless Karahi",ingredients:[{name:"Chicken (boneless)",quantity:1,unit:"kg"},{name:"Tomatoes",quantity:.5,unit:"kg"},{name:"Onion",quantity:.2,unit:"kg"},{name:"Garlic paste",quantity:.02,unit:"kg"},{name:"Ginger paste",quantity:.015,unit:"kg"},{name:"Green chilies",quantity:.01,unit:"kg"},{name:"Yogurt",quantity:.1,unit:"kg"},{name:"Cooking oil",quantity:.05,unit:"liters"},{name:"Salt",quantity:.01,unit:"kg"},{name:"Red chili powder",quantity:.005,unit:"kg"},{name:"Garam masala",quantity:.003,unit:"kg"}]}],_n=[{name:"Metro Cash & Carry",contactPerson:"Asif Khan",phone:"042-111-222-333",address:"Thokar Niaz Baig, Lahore"},{name:"Al-Fatah Electronics",contactPerson:"Bilal Ahmed",phone:"042-35756666",address:"Gulberg III, Lahore"},{name:"Hafeez Center Suppliers",contactPerson:"Chaudhry Sabir",phone:"0300-9876543",address:"Gulberg, Lahore"},{name:"Grain Market Wholesalers",contactPerson:"Mian Tariq",phone:"0321-5554443",address:"Akbari Mandi, Lahore"}],wn=()=>{fe&&(console.warn("Using Offline Demo Data (Firebase Access Denied or Config Missing)"),w(Se.map((Jt,un)=>({...Jt,id:`local-emp-${un}`}))),F(Ve.map((Jt,un)=>({...Jt,id:`local-inv-${un}`}))),je(ze.map((Jt,un)=>({...Jt,id:`local-rec-${un}`}))),L(_n.map((Jt,un)=>({...Jt,id:`local-ven-${un}`}))),C([{id:"local-lab-1",name:"SIR Lab",systems:[]},{id:"local-lab-2",name:"SADU Lab",systems:[]}]),D([{id:"u1",email:"admin",password:"123",passwordChangeRequired:!0},{id:"u2",email:"ali.raza@example.com",password:"password",passwordChangeRequired:!0}]),ee([]),I([]),ke([]),oe([]),he([]),te([]),S([]),j([]))};try{const Jt=st(we,"employees"),un=await fi(Jt);if(!fe)return;if(un.empty)for(const De of Se)await Rn(Jt,De);const ls=st(we,"inventory"),Ss=Yo(ls,Xo("type","==","Kitchen"));if((await fi(Ss)).empty)for(const De of Ve)await Rn(ls,De);const On=st(we,"recipes");if((await fi(On)).empty)for(const De of ze)await Rn(On,De);const Rt=st(we,"vendors");if((await fi(Rt)).empty)for(const De of _n)await Rn(Rt,De);se.push(In(st(we,"employees"),De=>w(De.docs.map(Pe=>({...Pe.data(),id:Pe.id}))))),se.push(In(st(we,"users"),De=>D(De.docs.map(Pe=>({...Pe.data(),id:Pe.id}))))),se.push(In(ot(we,"app_data","permissions"),De=>{De.exists()?M(De.data()):lv(ot(we,"app_data","permissions"),{})})),se.push(In(st(we,"leaveRequests"),De=>ee(De.docs.map(Pe=>({...Pe.data(),id:Pe.id}))))),se.push(In(Yo(st(we,"payrollHistory"),Xo("date","!=",null)),De=>{const Pe=De.docs.map(qa=>({...qa.data(),id:qa.id}));Pe.sort((qa,ki)=>new Date(ki.date).getTime()-new Date(qa.date).getTime()),te(Pe)})),se.push(In(st(we,"inventory"),De=>F(De.docs.map(Pe=>({...Pe.data(),id:Pe.id}))))),se.push(In(st(we,"labs"),De=>C(De.docs.map(Pe=>({...Pe.data(),id:Pe.id}))))),se.push(In(st(we,"toners"),De=>S(De.docs.map(Pe=>({...Pe.data(),id:Pe.id}))))),se.push(In(st(we,"mrfs"),De=>j(De.docs.map(Pe=>({...Pe.data(),id:Pe.id}))))),se.push(In(st(we,"attendanceRecords"),De=>I(De.docs.map(Pe=>({...Pe.data(),id:Pe.id}))))),se.push(In(st(we,"supplyChainRequests"),De=>ke(De.docs.map(Pe=>({...Pe.data(),id:Pe.id}))))),se.push(In(st(we,"purchaseRequests"),De=>oe(De.docs.map(Pe=>({...Pe.data(),id:Pe.id}))))),se.push(In(st(we,"recipes"),De=>je(De.docs.map(Pe=>({...Pe.data(),id:Pe.id}))))),se.push(In(st(we,"vendors"),De=>L(De.docs.map(Pe=>({...Pe.data(),id:Pe.id}))))),se.push(In(st(we,"purchaseOrders"),De=>he(De.docs.map(Pe=>({...Pe.data(),id:Pe.id})))))}catch(Jt){console.warn("Firebase Connection Failed (Switching to Offline Mode):",Jt),wn()}})(),()=>{fe=!1,se.forEach(Se=>Se())}},[h]);const ge=async(se,fe)=>{if(!fe)return!1;if(se==="admin"&&fe==="123")return e(!0),p("admin"),!0;const ve=se==="admin"?"admin@masbot.erp":se,Se=se==="admin"&&fe.length<6?"123456":fe;try{await J5(pd,ve,Se);const Ve=Yo(st(we,"users"),Xo("email","==",se)),ze=await fi(Ve);if(!ze.empty){const _n=ze.docs[0].data();r(!!_n.passwordChangeRequired)}return!0}catch(Ve){if(Ve.code==="auth/user-not-found"&&se==="admin")try{await W5(pd,ve,Se);const ze=Yo(st(we,"users"),Xo("email","==",se));return(await fi(ze)).empty&&await Rn(st(we,"users"),{email:se,password:Se,passwordChangeRequired:!0}),!0}catch(ze){return console.error("Failed to auto-create admin:",ze),se==="admin"&&fe==="123"?(e(!0),p("admin"),!0):!1}throw console.error("Login error",Ve),Ve}},be=async()=>{await nC(pd),e(!1),p(null),u(null)},U=se=>{const fe=new Date(se),ve=new Date().getFullYear(),Se=fe.getFullYear(),Ve={annual:{total:14,used:0},sick:{total:7,used:0},casual:{total:6,used:0},maternity:{total:90,used:0},paternity:{total:7,used:0},alternateDayOff:{total:50,used:0},others:{total:0,used:0}};if(Se<ve)return Ve;const wn=(12-fe.getMonth())/12;return{annual:{total:Math.round(14*wn),used:0},sick:{total:Math.round(7*wn),used:0},casual:{total:Math.round(6*wn),used:0},maternity:{total:90,used:0},paternity:{total:7,used:0},alternateDayOff:{total:Math.round(50*wn),used:0},others:{total:0,used:0}}},de=async(se,fe)=>{let ve={annual:{total:0,used:0},sick:{total:0,used:0},casual:{total:0,used:0},maternity:{total:0,used:0},paternity:{total:0,used:0},alternateDayOff:{total:0,used:0},others:{total:0,used:0}};se.employmentType==="Permanent"&&(ve=U(se.joiningDate));const Se={...se,leaveBalance:ve};await Rn(st(we,"employees"),Se),await Rn(st(we,"users"),{email:se.email,password:fe,passwordChangeRequired:!0})},xe=async(se,fe)=>{const ve=ot(we,"employees",se);if(fe.employmentType==="Permanent"){const Se=new Date().toISOString().split("T")[0],Ve=U(Se);await on(ve,{...fe,leaveBalance:Ve})}else await on(ve,fe);return{success:!0,message:"Employee updated successfully"}},Te=async se=>(await on(ot(we,"employees",se),{status:"Resigned"}),{success:!0,message:"Employee marked as resigned."}),Qe=async(se,fe)=>{const ve={};Object.keys(fe).forEach(Ve=>{ve[Ve]={},Object.keys(fe[Ve]).forEach(ze=>{ve[Ve][ze]={...fe[Ve][ze]}})});const Se={...V,[se]:ve};await lv(ot(we,"app_data","permissions"),Se)},sn=async se=>{await Rn(st(we,"leaveRequests"),se)},an=async(se,fe)=>{const ve=ot(we,"leaveRequests",se),Se=P.find(Ve=>Ve.id===se);if(fe==="Approve"&&Se)if(Se.status==="Pending HOD")await on(ve,{status:"Pending HR"});else{await on(ve,{status:"Approved"});const Ve=new Date(Se.fromDate),ze=new Date(Se.toDate),_n=Math.abs(ze.getTime()-Ve.getTime()),wn=Math.ceil(_n/(1e3*60*60*24))+1,un={"Casual Leave":"casual","Sick Leave":"sick","Annual Leave":"annual","Maternity Leave":"maternity","Paternity Leave":"paternity","Alternate Day Off":"alternateDayOff",Others:"others"}[Se.leaveType],ls=ot(we,"employees",Se.employeeId);await on(ls,{[`leaveBalance.${un}.used`]:km(wn)})}else await on(ve,{status:"Rejected"})},vn=async()=>{const se=new Date().toLocaleString("default",{month:"long",year:"numeric"}),fe={id:"",date:new Date().toISOString(),monthYear:se,totalPayroll:0,totalDeductions:0,totalNetPay:0,employeeRecords:_.map(ve=>({employeeId:ve.id,employeeName:`${ve.firstName} ${ve.lastName}`,department:ve.department,baseSalary:parseFloat(ve.salary),deductions:0,netPay:parseFloat(ve.salary)}))};return fe.totalPayroll=fe.employeeRecords.reduce((ve,Se)=>ve+Se.baseSalary,0),fe.totalNetPay=fe.employeeRecords.reduce((ve,Se)=>ve+Se.netPay,0),await Rn(st(we,"payrollHistory"),fe),{success:!0,message:"Payroll run successfully."}},Xt=async se=>{const fe=vl(we);return se.forEach(ve=>{const Se=`${ve.employeeId}_${ve.date}`,Ve=ot(we,"attendanceRecords",Se);fe.set(Ve,ve)}),await fe.commit(),{success:!0,message:"Attendance records uploaded."}},Vs=async se=>{const fe=vl(we);se.forEach(ve=>{const Se=ot(st(we,"inventory"));fe.set(Se,ve)}),await fe.commit()},rs=async se=>{const{id:fe,...ve}=se;await on(ot(we,"inventory",fe),ve)},Us=async se=>{await Rm(ot(we,"inventory",se))},da=async(se,fe)=>{const ve=ot(we,"labs",se),Se=W.find(_n=>_n.id===se);if(!Se)return;const Ve={...fe,id:`SYS-${Date.now()}`},ze=[...Se.systems,Ve];await on(ve,{systems:ze})},Et=async(se,fe)=>{const ve=ot(we,"labs",se),Se=W.find(ze=>ze.id===se);if(!Se)return;const Ve=Se.systems.map(ze=>ze.id===fe.id?fe:ze);await on(ve,{systems:Ve})},jt=async(se,fe)=>{const ve=ot(we,"labs",se),Se=W.find(ze=>ze.id===se);if(!Se)return;const Ve=Se.systems.filter(ze=>ze.id!==fe);await on(ve,{systems:Ve})},is=async se=>{const fe=N.find(ve=>ve.model===se.model);fe?await on(ot(we,"toners",fe.id),{quantity:se.filledQuantity+se.emptyQuantity,compatiblePrinters:se.compatiblePrinters}):(se.filledQuantity>0&&await Rn(st(we,"toners"),{model:se.model,compatiblePrinters:se.compatiblePrinters,quantity:se.filledQuantity,status:"Filled"}),se.emptyQuantity>0&&await Rn(st(we,"toners"),{model:se.model,compatiblePrinters:se.compatiblePrinters,quantity:se.emptyQuantity,status:"Empty"}))},qr=async se=>{const fe=vl(we);N.filter(Se=>Se.model===se).forEach(Se=>fe.delete(ot(we,"toners",Se.id))),await fe.commit()},qs=async se=>{alert("Toner status update logic")},X=async se=>{alert("Toner status update logic")},Le=async se=>{await Rn(st(we,"mrfs"),se)},yt=async se=>{const{id:fe,...ve}=se;await on(ot(we,"mrfs",fe),ve)},vt=async se=>{await Rm(ot(we,"mrfs",se))},At=async se=>{const fe=vl(we);se.forEach(ve=>{const Se=ot(we,"inventory",ve.id);fe.update(Se,{quantity:ve.newQuantity})}),await fe.commit()},Ns=async se=>{const fe={...se,status:"Pending Account Manager"};await Rn(st(we,"supplyChainRequests"),fe)},Dn=async(se,fe,ve)=>{const Se={status:fe==="Approve"?"Pending Store":"Rejected",approvalDate:new Date().toISOString()};ve&&(Se.rejectionReason=ve),await on(ot(we,"supplyChainRequests",se),Se)},Ai=async se=>{const fe=me.find(Ve=>Ve.id===se);if(!fe)return;const ve=vl(we),Se=ot(we,"supplyChainRequests",se);ve.update(Se,{status:"Issued",issuedDate:new Date().toISOString()}),fe.items.forEach(Ve=>{const ze=ot(we,"inventory",Ve.inventoryId);ve.update(ze,{quantity:km(-Ve.quantityRequested)})}),await ve.commit()},Ci=async se=>{await on(ot(we,"supplyChainRequests",se),{status:"Forwarded to Purchase"})},Gn=async se=>{await Rn(st(we,"purchaseRequests"),se)},Wt=async se=>{const fe={...se,status:"Pending Account Manager"};await Rn(st(we,"purchaseOrders"),fe)},Mn=async(se,fe)=>{await on(ot(we,"purchaseOrders",se),fe)},Ct=async se=>{await Rm(ot(we,"purchaseOrders",se))},Ri=async(se,fe)=>{await on(ot(we,"purchaseOrders",se),{status:fe==="Approve"?"Approved":"Rejected"})},Ua=async(se,fe)=>{const ve=Y.find(ze=>ze.id===se);if(!ve)return;const Se=vl(we),Ve=ot(we,"purchaseOrders",se);if(Se.update(Ve,{status:"Received",grnNumber:fe.grnNumber,grnRemarks:fe.remarks,grnDate:new Date().toISOString()}),ve.items.forEach(ze=>{if(ze.inventoryId){const _n=ot(we,"inventory",ze.inventoryId);Se.update(_n,{quantity:km(ze.quantity)})}}),ve.originalRequestId){const ze=ot(we,"supplyChainRequests",ve.originalRequestId);Se.update(ze,{status:"Pending Store"})}await Se.commit()},Ii=async se=>{if(!h)return{success:!1,message:"No user"};const fe=Yo(st(we,"users"),Xo("email","==",h==="admin"?"admin":h)),ve=await fi(fe);if(!ve.empty){const Se=ve.docs[0];return await on(ot(we,"users",Se.id),{password:se,passwordChangeRequired:!1}),r(!1),{success:!0,message:"Password updated"}}return{success:!1,message:"User record not found"}},Kn=Nc.useMemo(()=>h==="admin"?["hr","inventory_management","supply_chain","finance","student","website"]:!h||!V[h]?[]:Object.keys(V[h]).filter(se=>{const fe=V[h][se];return Object.values(fe).some(ve=>ve.view)}),[h,V]);if(g)return i.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 text-slate-500",children:"Loading ERP System..."});if(!a)return i.jsx(J2,{onLogin:ge});if(n)return i.jsx(iE,{onUpdatePassword:Ii,onSkip:()=>r(!1)});if(o)switch(o){case"hr":return i.jsx(DN,{onBack:()=>u(null),employees:_,users:A,onAddEmployee:de,onLogout:be,allPermissions:V,onUserPermissionsChange:Qe,currentUserEmail:h||"",leaveRequests:P,onAddLeaveRequest:sn,onLeaveRequestAction:an,onResignEmployee:Te,payrollHistory:ue,onRunPayroll:vn,onUpdateEmployee:xe,attendanceRecords:k,onUploadAttendance:Xt});case"inventory_management":return i.jsx(WN,{onBack:()=>u(null),onLogout:be,currentUserEmail:h||"",permissions:(Qn=V[h||""])==null?void 0:Qn.inventory_management,inventory:ne,employees:_,labs:W,toners:N,mrfs:E,recipes:ye,onAddNewAsset:Vs,onUpdateAsset:rs,onDeleteAsset:Us,onResignEmployee:()=>{},onAddSystem:da,onUpdateSystem:Et,onDeleteSystem:jt,onSaveTonerModel:is,onDeleteTonerModel:qr,onMarkTonerEmpty:qs,onMarkTonerFilled:X,onAddNewMRF:Le,onUpdateMRF:yt,onDeleteMRF:vt,onUpdateKitchenStock:At,onCreateSCRequest:Ns});case"supply_chain":return i.jsx(aE,{onBack:()=>u(null),onLogout:be,currentUserEmail:h||"",inventory:ne,employees:_,requests:me,purchaseRequests:G,purchaseOrders:Y,recipes:ye,vendors:Ue,onCreateRequest:Ns,onActionRequest:Dn,onIssueRequest:Ai,onForwardToPurchase:Ci,onCreatePurchaseRequest:Gn,onCreatePO:Wt,onUpdatePO:Mn,onDeletePO:Ct,onPOAction:Ri,onGRN:Ua,onAddNewAsset:Vs,onUpdateAsset:rs,onDeleteAsset:Us});default:return i.jsxs("div",{className:"flex h-screen items-center justify-center flex-col gap-4",children:[i.jsx("p",{children:"Module under construction"}),i.jsx("button",{onClick:()=>u(null),className:"text-blue-500 underline",children:"Go Back"})]})}const Es=_.find(se=>se.email===h);return Es&&Es.role==="Employee"&&h!=="admin"?i.jsx(tN,{employee:Es,onModuleSelect:u,onLogout:be,accessibleModules:Kn}):i.jsx(eN,{onModuleSelect:u,onLogout:be,accessibleModules:h==="admin"?void 0:Kn})},uw=document.getElementById("root");if(!uw)throw new Error("Could not find root element to mount to");const x4=W2.createRoot(uw);x4.render(i.jsx(Nc.StrictMode,{children:i.jsx(g4,{})}));
