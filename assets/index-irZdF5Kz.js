(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=e(i);fetch(i.href,l)}})();function Ev(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ey={exports:{}},Bl={};/**
* @license React
* react-jsx-runtime.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var _y;function zN(){if(_y)return Bl;_y=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,l,c){var p=null;if(c!==void 0&&(p=""+c),l.key!==void 0&&(p=""+l.key),"key"in l){c={};for(var g in l)g!=="key"&&(c[g]=l[g])}else c=l;return l=c.ref,{$$typeof:s,type:i,key:p,ref:l!==void 0?l:null,props:c}}return Bl.Fragment=e,Bl.jsx=n,Bl.jsxs=n,Bl}var Ty;function qN(){return Ty||(Ty=1,Ey.exports=zN()),Ey.exports}var a=qN(),Iy={exports:{}},Ve={};/**
* @license React
* react.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Ay;function $N(){if(Ay)return Ve;Ay=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),D=Symbol.iterator;function P(L){return L===null||typeof L!="object"?null:(L=D&&L[D]||L["@@iterator"],typeof L=="function"?L:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,O={};function te(L,Q,he){this.props=L,this.context=Q,this.refs=O,this.updater=he||z}te.prototype.isReactComponent={},te.prototype.setState=function(L,Q){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Q,"setState")},te.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function ee(){}ee.prototype=te.prototype;function ue(L,Q,he){this.props=L,this.context=Q,this.refs=O,this.updater=he||z}var re=ue.prototype=new ee;re.constructor=ue,R(re,te.prototype),re.isPureReactComponent=!0;var $=Array.isArray;function X(){}var T={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function S(L,Q,he){var ge=he.ref;return{$$typeof:s,type:L,key:Q,ref:ge!==void 0?ge:null,props:he}}function j(L,Q){return S(L.type,Q,L.props)}function E(L){return typeof L=="object"&&L!==null&&L.$$typeof===s}function A(L){var Q={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(he){return Q[he]})}var _=/\/+/g;function be(L,Q){return typeof L=="object"&&L!==null&&L.key!=null?A(""+L.key):Q.toString(36)}function Ae(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(X,X):(L.status="pending",L.then(function(Q){L.status==="pending"&&(L.status="fulfilled",L.value=Q)},function(Q){L.status==="pending"&&(L.status="rejected",L.reason=Q)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function B(L,Q,he,ge,we){var F=typeof L;(F==="undefined"||F==="boolean")&&(L=null);var ce=!1;if(L===null)ce=!0;else switch(F){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(L.$$typeof){case s:case e:ce=!0;break;case N:return ce=L._init,B(ce(L._payload),Q,he,ge,we)}}if(ce)return we=we(L),ce=ge===""?"."+be(L,0):ge,$(we)?(he="",ce!=null&&(he=ce.replace(_,"$&/")+"/"),B(we,Q,he,"",function(ut){return ut})):we!=null&&(E(we)&&(we=j(we,he+(we.key==null||L&&L.key===we.key?"":(""+we.key).replace(_,"$&/")+"/")+ce)),Q.push(we)),1;ce=0;var me=ge===""?".":ge+":";if($(L))for(var Ce=0;Ce<L.length;Ce++)ge=L[Ce],F=me+be(ge,Ce),ce+=B(ge,Q,he,F,we);else if(Ce=P(L),typeof Ce=="function")for(L=Ce.call(L),Ce=0;!(ge=L.next()).done;)ge=ge.value,F=me+be(ge,Ce++),ce+=B(ge,Q,he,F,we);else if(F==="object"){if(typeof L.then=="function")return B(Ae(L),Q,he,ge,we);throw Q=String(L),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return ce}function de(L,Q,he){if(L==null)return L;var ge=[],we=0;return B(L,ge,"","",function(F){return Q.call(he,F,we++)}),ge}function ye(L){if(L._status===-1){var Q=L._result;Q=Q(),Q.then(function(he){(L._status===0||L._status===-1)&&(L._status=1,L._result=he)},function(he){(L._status===0||L._status===-1)&&(L._status=2,L._result=he)}),L._status===-1&&(L._status=0,L._result=Q)}if(L._status===1)return L._result.default;throw L._result}var Ee=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},Oe={map:de,forEach:function(L,Q,he){de(L,function(){Q.apply(this,arguments)},he)},count:function(L){var Q=0;return de(L,function(){Q++}),Q},toArray:function(L){return de(L,function(Q){return Q})||[]},only:function(L){if(!E(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Ve.Activity=w,Ve.Children=Oe,Ve.Component=te,Ve.Fragment=n,Ve.Profiler=l,Ve.PureComponent=ue,Ve.StrictMode=i,Ve.Suspense=f,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(L){return T.H.useMemoCache(L)}},Ve.cache=function(L){return function(){return L.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(L,Q,he){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ge=R({},L.props),we=L.key;if(Q!=null)for(F in Q.key!==void 0&&(we=""+Q.key),Q)!k.call(Q,F)||F==="key"||F==="__self"||F==="__source"||F==="ref"&&Q.ref===void 0||(ge[F]=Q[F]);var F=arguments.length-2;if(F===1)ge.children=he;else if(1<F){for(var ce=Array(F),me=0;me<F;me++)ce[me]=arguments[me+2];ge.children=ce}return S(L.type,we,ge)},Ve.createContext=function(L){return L={$$typeof:p,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:c,_context:L},L},Ve.createElement=function(L,Q,he){var ge,we={},F=null;if(Q!=null)for(ge in Q.key!==void 0&&(F=""+Q.key),Q)k.call(Q,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(we[ge]=Q[ge]);var ce=arguments.length-2;if(ce===1)we.children=he;else if(1<ce){for(var me=Array(ce),Ce=0;Ce<ce;Ce++)me[Ce]=arguments[Ce+2];we.children=me}if(L&&L.defaultProps)for(ge in ce=L.defaultProps,ce)we[ge]===void 0&&(we[ge]=ce[ge]);return S(L,F,we)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(L){return{$$typeof:g,render:L}},Ve.isValidElement=E,Ve.lazy=function(L){return{$$typeof:N,_payload:{_status:-1,_result:L},_init:ye}},Ve.memo=function(L,Q){return{$$typeof:x,type:L,compare:Q===void 0?null:Q}},Ve.startTransition=function(L){var Q=T.T,he={};T.T=he;try{var ge=L(),we=T.S;we!==null&&we(he,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(X,Ee)}catch(F){Ee(F)}finally{Q!==null&&he.types!==null&&(Q.types=he.types),T.T=Q}},Ve.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Ve.use=function(L){return T.H.use(L)},Ve.useActionState=function(L,Q,he){return T.H.useActionState(L,Q,he)},Ve.useCallback=function(L,Q){return T.H.useCallback(L,Q)},Ve.useContext=function(L){return T.H.useContext(L)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(L,Q){return T.H.useDeferredValue(L,Q)},Ve.useEffect=function(L,Q){return T.H.useEffect(L,Q)},Ve.useEffectEvent=function(L){return T.H.useEffectEvent(L)},Ve.useId=function(){return T.H.useId()},Ve.useImperativeHandle=function(L,Q,he){return T.H.useImperativeHandle(L,Q,he)},Ve.useInsertionEffect=function(L,Q){return T.H.useInsertionEffect(L,Q)},Ve.useLayoutEffect=function(L,Q){return T.H.useLayoutEffect(L,Q)},Ve.useMemo=function(L,Q){return T.H.useMemo(L,Q)},Ve.useOptimistic=function(L,Q){return T.H.useOptimistic(L,Q)},Ve.useReducer=function(L,Q,he){return T.H.useReducer(L,Q,he)},Ve.useRef=function(L){return T.H.useRef(L)},Ve.useState=function(L){return T.H.useState(L)},Ve.useSyncExternalStore=function(L,Q,he){return T.H.useSyncExternalStore(L,Q,he)},Ve.useTransition=function(){return T.H.useTransition()},Ve.version="19.2.1",Ve}var Dy;function af(){return Dy||(Dy=1,Iy.exports=$N()),Iy.exports}var V=af();const wu=Ev(V);var hm={exports:{}},Hl={},Py={exports:{}},Ry={};/**
* @license React
* scheduler.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var My;function BN(){return My||(My=1,(function(s){function e(B,de){var ye=B.length;B.push(de);e:for(;0<ye;){var Ee=ye-1>>>1,Oe=B[Ee];if(0<l(Oe,de))B[Ee]=de,B[ye]=Oe,ye=Ee;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var de=B[0],ye=B.pop();if(ye!==de){B[0]=ye;e:for(var Ee=0,Oe=B.length,L=Oe>>>1;Ee<L;){var Q=2*(Ee+1)-1,he=B[Q],ge=Q+1,we=B[ge];if(0>l(he,ye))ge<Oe&&0>l(we,he)?(B[Ee]=we,B[ge]=ye,Ee=ge):(B[Ee]=he,B[Q]=ye,Ee=Q);else if(ge<Oe&&0>l(we,ye))B[Ee]=we,B[ge]=ye,Ee=ge;else break e}}return de}function l(B,de){var ye=B.sortIndex-de.sortIndex;return ye!==0?ye:B.id-de.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var p=Date,g=p.now();s.unstable_now=function(){return p.now()-g}}var f=[],x=[],N=1,w=null,D=3,P=!1,z=!1,R=!1,O=!1,te=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;function re(B){for(var de=n(x);de!==null;){if(de.callback===null)i(x);else if(de.startTime<=B)i(x),de.sortIndex=de.expirationTime,e(f,de);else break;de=n(x)}}function $(B){if(R=!1,re(B),!z)if(n(f)!==null)z=!0,X||(X=!0,A());else{var de=n(x);de!==null&&Ae($,de.startTime-B)}}var X=!1,T=-1,k=5,S=-1;function j(){return O?!0:!(s.unstable_now()-S<k)}function E(){if(O=!1,X){var B=s.unstable_now();S=B;var de=!0;try{e:{z=!1,R&&(R=!1,ee(T),T=-1),P=!0;var ye=D;try{t:{for(re(B),w=n(f);w!==null&&!(w.expirationTime>B&&j());){var Ee=w.callback;if(typeof Ee=="function"){w.callback=null,D=w.priorityLevel;var Oe=Ee(w.expirationTime<=B);if(B=s.unstable_now(),typeof Oe=="function"){w.callback=Oe,re(B),de=!0;break t}w===n(f)&&i(f),re(B)}else i(f);w=n(f)}if(w!==null)de=!0;else{var L=n(x);L!==null&&Ae($,L.startTime-B),de=!1}}break e}finally{w=null,D=ye,P=!1}de=void 0}}finally{de?A():X=!1}}}var A;if(typeof ue=="function")A=function(){ue(E)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,be=_.port2;_.port1.onmessage=E,A=function(){be.postMessage(null)}}else A=function(){te(E,0)};function Ae(B,de){T=te(function(){B(s.unstable_now())},de)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(B){B.callback=null},s.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<B?Math.floor(1e3/B):5},s.unstable_getCurrentPriorityLevel=function(){return D},s.unstable_next=function(B){switch(D){case 1:case 2:case 3:var de=3;break;default:de=D}var ye=D;D=de;try{return B()}finally{D=ye}},s.unstable_requestPaint=function(){O=!0},s.unstable_runWithPriority=function(B,de){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ye=D;D=B;try{return de()}finally{D=ye}},s.unstable_scheduleCallback=function(B,de,ye){var Ee=s.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Ee+ye:Ee):ye=Ee,B){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=ye+Oe,B={id:N++,callback:de,priorityLevel:B,startTime:ye,expirationTime:Oe,sortIndex:-1},ye>Ee?(B.sortIndex=ye,e(x,B),n(f)===null&&B===n(x)&&(R?(ee(T),T=-1):R=!0,Ae($,ye-Ee))):(B.sortIndex=Oe,e(f,B),z||P||(z=!0,X||(X=!0,A()))),B},s.unstable_shouldYield=j,s.unstable_wrapCallback=function(B){var de=D;return function(){var ye=D;D=de;try{return B.apply(this,arguments)}finally{D=ye}}}})(Ry)),Ry}var Ly;function HN(){return Ly||(Ly=1,Py.exports=BN()),Py.exports}var pm={exports:{}},Nn={};/**
* @license React
* react-dom.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Oy;function WN(){if(Oy)return Nn;Oy=1;var s=af();function e(f){var x="https://react.dev/errors/"+f;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var N=2;N<arguments.length;N++)x+="&args[]="+encodeURIComponent(arguments[N])}return"Minified React error #"+f+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(f,x,N){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:f,containerInfo:x,implementation:N}}var p=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(f,x){if(f==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Nn.createPortal=function(f,x){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return c(f,x,null,N)},Nn.flushSync=function(f){var x=p.T,N=i.p;try{if(p.T=null,i.p=2,f)return f()}finally{p.T=x,i.p=N,i.d.f()}},Nn.preconnect=function(f,x){typeof f=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,i.d.C(f,x))},Nn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Nn.preinit=function(f,x){if(typeof f=="string"&&x&&typeof x.as=="string"){var N=x.as,w=g(N,x.crossOrigin),D=typeof x.integrity=="string"?x.integrity:void 0,P=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;N==="style"?i.d.S(f,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:w,integrity:D,fetchPriority:P}):N==="script"&&i.d.X(f,{crossOrigin:w,integrity:D,fetchPriority:P,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Nn.preinitModule=function(f,x){if(typeof f=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var N=g(x.as,x.crossOrigin);i.d.M(f,{crossOrigin:N,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&i.d.M(f)},Nn.preload=function(f,x){if(typeof f=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var N=x.as,w=g(N,x.crossOrigin);i.d.L(f,N,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Nn.preloadModule=function(f,x){if(typeof f=="string")if(x){var N=g(x.as,x.crossOrigin);i.d.m(f,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:N,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else i.d.m(f)},Nn.requestFormReset=function(f){i.d.r(f)},Nn.unstable_batchedUpdates=function(f,x){return f(x)},Nn.useFormState=function(f,x,N){return p.H.useFormState(f,x,N)},Nn.useFormStatus=function(){return p.H.useHostTransitionStatus()},Nn.version="19.2.1",Nn}var Fy;function GN(){if(Fy)return pm.exports;Fy=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),pm.exports=WN(),pm.exports}/**
* @license React
* react-dom-client.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Uy;function KN(){if(Uy)return Hl;Uy=1;var s=HN(),e=af(),n=GN();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function p(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function f(t){if(c(t)!==t)throw Error(i(188))}function x(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(i(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var m=h.alternate;if(m===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===o)return f(h),t;if(m===u)return f(h),r;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=h,u=m;else{for(var b=!1,C=h.child;C;){if(C===o){b=!0,o=h,u=m;break}if(C===u){b=!0,u=h,o=m;break}C=C.sibling}if(!b){for(C=m.child;C;){if(C===o){b=!0,o=m,u=h;break}if(C===u){b=!0,u=m,o=h;break}C=C.sibling}if(!b)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?t:r}function N(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=N(t),r!==null)return r;t=t.sibling}return null}var w=Object.assign,D=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),ue=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),E=Symbol.iterator;function A(t){return t===null||typeof t!="object"?null:(t=E&&t[E]||t["@@iterator"],typeof t=="function"?t:null)}var _=Symbol.for("react.client.reference");function be(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===_?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case R:return"Fragment";case te:return"Profiler";case O:return"StrictMode";case $:return"Suspense";case X:return"SuspenseList";case S:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case z:return"Portal";case ue:return t.displayName||"Context";case ee:return(t._context.displayName||"Context")+".Consumer";case re:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case T:return r=t.displayName||null,r!==null?r:be(t.type)||"Memo";case k:r=t._payload,t=t._init;try{return be(t(r))}catch{}}return null}var Ae=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Ee=[],Oe=-1;function L(t){return{current:t}}function Q(t){0>Oe||(t.current=Ee[Oe],Ee[Oe]=null,Oe--)}function he(t,r){Oe++,Ee[Oe]=t.current,t.current=r}var ge=L(null),we=L(null),F=L(null),ce=L(null);function me(t,r){switch(he(F,r),he(we,t),he(ge,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Yx(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Yx(r),t=Xx(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Q(ge),he(ge,t)}function Ce(){Q(ge),Q(we),Q(F)}function ut(t){t.memoizedState!==null&&he(ce,t);var r=ge.current,o=Xx(r,t.type);r!==o&&(he(we,t),he(ge,o))}function tn(t){we.current===t&&(Q(ge),Q(we)),ce.current===t&&(Q(ce),Vl._currentValue=ye)}var nn,vn;function Qt(t){if(nn===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);nn=r&&r[1]||"",vn=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nn+t+vn}var us=!1;function nr(t,r){if(!t||us)return"";us=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(Z){var K=Z}Reflect.construct(t,[],oe)}else{try{oe.call()}catch(Z){K=Z}t.call(oe.prototype)}}else{try{throw Error()}catch(Z){K=Z}(oe=t())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(Z){if(Z&&K&&typeof Z.stack=="string")return[Z.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),b=m[0],C=m[1];if(b&&C){var M=b.split(`
`),G=C.split(`
`);for(h=u=0;u<M.length&&!M[u].includes("DetermineComponentFrameRoot");)u++;for(;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;if(u===M.length||h===G.length)for(u=M.length-1,h=G.length-1;1<=u&&0<=h&&M[u]!==G[h];)h--;for(;1<=u&&0<=h;u--,h--)if(M[u]!==G[h]){if(u!==1||h!==1)do if(u--,h--,0>h||M[u]!==G[h]){var se=`
`+M[u].replace(" at new "," at ");return t.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",t.displayName)),se}while(1<=u&&0<=h);break}}}finally{us=!1,Error.prepareStackTrace=o}return(o=t?t.displayName||t.name:"")?Qt(o):""}function Dr(t,r){switch(t.tag){case 26:case 27:case 5:return Qt(t.type);case 16:return Qt("Lazy");case 13:return t.child!==r&&r!==null?Qt("Suspense Fallback"):Qt("Suspense");case 19:return Qt("SuspenseList");case 0:case 15:return nr(t.type,!1);case 11:return nr(t.type.render,!1);case 1:return nr(t.type,!0);case 31:return Qt("Activity");default:return""}}function Pr(t){try{var r="",o=null;do r+=Dr(t,o),o=t,t=t.return;while(t);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var kt=Object.prototype.hasOwnProperty,Et=s.unstable_scheduleCallback,rr=s.unstable_cancelCallback,Fi=s.unstable_shouldYield,Rr=s.unstable_requestPaint,Y=s.unstable_now,Fe=s.unstable_getCurrentPriorityLevel,rt=s.unstable_ImmediatePriority,_t=s.unstable_UserBlockingPriority,En=s.unstable_NormalPriority,Mr=s.unstable_LowPriority,_n=s.unstable_IdlePriority,Ea=s.log,_a=s.unstable_setDisableYieldValue,$n=null,Yt=null;function Rn(t){if(typeof Ea=="function"&&_a(t),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode($n,t)}catch{}}var Tt=Math.clz32?Math.clz32:Ia,Ta=Math.log,Fs=Math.LN2;function Ia(t){return t>>>=0,t===0?32:31-(Ta(t)/Fs|0)|0}var sr=256,Lr=262144,jt=4194304;function ne(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function fe(t,r,o){var u=t.pendingLanes;if(u===0)return 0;var h=0,m=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var C=u&134217727;return C!==0?(u=C&~m,u!==0?h=ne(u):(b&=C,b!==0?h=ne(b):o||(o=C&~t,o!==0&&(h=ne(o))))):(C=u&~m,C!==0?h=ne(C):b!==0?h=ne(b):o||(o=u&~t,o!==0&&(h=ne(o)))),h===0?0:r!==0&&r!==h&&(r&m)===0&&(m=h&-h,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:h}function pe(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function _e(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Be(){var t=jt;return jt<<=1,(jt&62914560)===0&&(jt=4194304),t}function Pe(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function cn(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function rn(t,r,o,u,h,m){var b=t.pendingLanes;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=o,t.entangledLanes&=o,t.errorRecoveryDisabledLanes&=o,t.shellSuspendCounter=0;var C=t.entanglements,M=t.expirationTimes,G=t.hiddenUpdates;for(o=b&~o;0<o;){var se=31-Tt(o),oe=1<<se;C[se]=0,M[se]=-1;var K=G[se];if(K!==null)for(G[se]=null,se=0;se<K.length;se++){var Z=K[se];Z!==null&&(Z.lane&=-536870913)}o&=~oe}u!==0&&Xt(t,u,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(b&~r))}function Xt(t,r,o){t.pendingLanes|=r,t.suspendedLanes&=~r;var u=31-Tt(r);t.entangledLanes|=r,t.entanglements[u]=t.entanglements[u]|1073741824|o&261930}function Or(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-Tt(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}function Ui(t,r){var o=r&-r;return o=(o&42)!==0?1:Fr(o),(o&(t.suspendedLanes|r))!==0?0:o}function Fr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ir(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function qe(){var t=de.p;return t!==0?t:(t=window.event,t===void 0?32:vy(t.type))}function De(t,r){var o=de.p;try{return de.p=t,r()}finally{de.p=o}}var wn=Math.random().toString(36).slice(2),At="__reactFiber$"+wn,sn="__reactProps$"+wn,Ur="__reactContainer$"+wn,Aa="__reactEvents$"+wn,yh="__reactListeners$"+wn,Uu="__reactHandles$"+wn,Vu="__reactResources$"+wn,Vr="__reactMarker$"+wn;function Da(t){delete t[At],delete t[sn],delete t[Aa],delete t[yh],delete t[Uu]}function zr(t){var r=t[At];if(r)return r;for(var o=t.parentNode;o;){if(r=o[Ur]||o[At]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=sy(t);t!==null;){if(o=t[At])return o;t=sy(t)}return r}t=o,o=t.parentNode}return null}function ar(t){if(t=t[At]||t[Ur]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function Bn(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function qr(t){var r=t[Vu];return r||(r=t[Vu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Vt(t){t[Vr]=!0}var Go=new Set,Ko={};function $r(t,r){Br(t,r),Br(t+"Capture",r)}function Br(t,r){for(Ko[t]=r,t=0;t<r.length;t++)Go.add(r[t])}var Qo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yo={},Xo={};function zu(t){return kt.call(Xo,t)?!0:kt.call(Yo,t)?!1:Qo.test(t)?Xo[t]=!0:(Yo[t]=!0,!1)}function Pa(t,r,o){if(zu(r))if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+o)}}function Hn(t,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+o)}}function zt(t,r,o,u){if(u===null)t.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(o);return}t.setAttributeNS(r,o,""+u)}}function an(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Us(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Jo(t,r,o){var u=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var h=u.get,m=u.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(b){o=""+b,m.call(this,b)}}),Object.defineProperty(t,r,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function ct(t){if(!t._valueTracker){var r=Us(t)?"checked":"value";t._valueTracker=Jo(t,r,""+t[r])}}function Vi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=Us(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function Hr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var zi=/[\n"\\]/g;function Wn(t){return t.replace(zi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ra(t,r,o,u,h,m,b,C){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),r!=null?b==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+an(r)):t.value!==""+an(r)&&(t.value=""+an(r)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),r!=null?Zo(t,b,an(r)):o!=null?Zo(t,b,an(o)):u!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?t.name=""+an(C):t.removeAttribute("name")}function qu(t,r,o,u,h,m,b,C){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){ct(t);return}o=o!=null?""+an(o):"",r=r!=null?""+an(r):o,C||r===t.value||(t.value=r),t.defaultValue=r}u=u??h,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=C?t.checked:!!u,t.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),ct(t)}function Zo(t,r,o){r==="number"&&Hr(t.ownerDocument)===t||t.defaultValue===""+o||(t.defaultValue=""+o)}function Vs(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+an(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function $u(t,r,o){if(r!=null&&(r=""+an(r),r!==t.value&&(t.value=r),o==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=o!=null?""+an(o):""}function zs(t,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(i(92));if(Ae(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=an(r),t.defaultValue=o,u=t.textContent,u===o&&u!==""&&u!==null&&(t.value=u),ct(t)}function Mn(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var Bu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function el(t,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":u?t.setProperty(r,o):typeof o!="number"||o===0||Bu.has(r)?r==="float"?t.cssFloat=o:t[r]=(""+o).trim():t[r]=o+"px"}function tl(t,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var h in r)u=r[h],r.hasOwnProperty(h)&&o[h]!==u&&el(t,h,u)}else for(var m in r)r.hasOwnProperty(m)&&el(t,m,r[m])}function Ma(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function La(t){return qs.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function br(){}var nl=null;function or(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $s=null,Wr=null;function qi(t){var r=ar(t);if(r&&(t=r.stateNode)){var o=t[sn]||null;e:switch(t=r.stateNode,r.type){case"input":if(Ra(t,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Wn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=u[sn]||null;if(!h)throw Error(i(90));Ra(u,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===t.form&&Vi(u)}break e;case"textarea":$u(t,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&Vs(t,!!o.multiple,r,!1)}}}var Oa=!1;function Bs(t,r,o){if(Oa)return t(r,o);Oa=!0;try{var u=t(r);return u}finally{if(Oa=!1,($s!==null||Wr!==null)&&(Fc(),$s&&(r=$s,t=Wr,Wr=$s=null,qi(r),t)))for(r=0;r<t.length;r++)qi(t[r])}}function vr(t,r){var o=t.stateNode;if(o===null)return null;var u=o[sn]||null;if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$i=!1;if(lr)try{var mt={};Object.defineProperty(mt,"passive",{get:function(){$i=!0}}),window.addEventListener("test",mt,mt),window.removeEventListener("test",mt,mt)}catch{$i=!1}var Gr=null,rl=null,Bi=null;function sl(){if(Bi)return Bi;var t,r=rl,o=r.length,u,h="value"in Gr?Gr.value:Gr.textContent,m=h.length;for(t=0;t<o&&r[t]===h[t];t++);var b=o-t;for(u=1;u<=b&&r[o-u]===h[m-u];u++);return Bi=h.slice(t,1<u?1-u:void 0)}function Hi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function cs(){return!0}function wr(){return!1}function dn(t){function r(o,u,h,m,b){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var C in t)t.hasOwnProperty(C)&&(o=t[C],this[C]=o?o(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?cs:wr,this.isPropagationStopped=wr,this}return w(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=cs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=cs)},persist:function(){},isPersistent:cs}),r}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kr=dn(ds),Hs=w({},ds,{view:0,detail:0}),il=dn(Hs),Ws,Fa,Qr,Ua=w({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qr&&(Qr&&t.type==="mousemove"?(Ws=t.screenX-Qr.screenX,Fa=t.screenY-Qr.screenY):Fa=Ws=0,Qr=t),Ws)},movementY:function(t){return"movementY"in t?t.movementY:Fa}}),al=dn(Ua),Wi=w({},Ua,{dataTransfer:0}),Wu=dn(Wi),Gu=w({},Hs,{relatedTarget:0}),Gi=dn(Gu),ol=w({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),Ku=dn(ol),Va=w({},ds,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Qu=dn(Va),Yu=w({},ds,{data:0}),Yr=dn(Yu),Xu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ec(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Zu[t])?!!r[t]:!1}function Gs(){return ec}var Tn=w({},Hs,{key:function(t){if(t.key){var r=Xu[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Hi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ju[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gs,charCode:function(t){return t.type==="keypress"?Hi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tc=dn(Tn),nc=w({},Ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hs=dn(nc),d=w({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gs}),y=dn(d),v=w({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=dn(v),H=w({},Ua,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),J=dn(H),xe=w({},ds,{newState:0,oldState:0}),He=dn(xe),Rt=[9,13,27,32],dt=lr&&"CompositionEvent"in window,St=null;lr&&"documentMode"in document&&(St=document.documentMode);var ur=lr&&"TextEvent"in window&&!St,ps=lr&&(!dt||St&&8<St&&11>=St),Nr=" ",kr=!1;function Ki(t,r){switch(t){case"keyup":return Rt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function za(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qa=!1;function d2(t,r){switch(t){case"compositionend":return za(r);case"keypress":return r.which!==32?null:(kr=!0,Nr);case"textInput":return t=r.data,t===Nr&&kr?null:t;default:return null}}function h2(t,r){if(qa)return t==="compositionend"||!dt&&Ki(t,r)?(t=sl(),Bi=rl=Gr=null,qa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return ps&&r.locale!=="ko"?null:r.data;default:return null}}var p2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function o0(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!p2[t.type]:r==="textarea"}function l0(t,r,o,u){$s?Wr?Wr.push(u):Wr=[u]:$s=u,r=Hc(r,"onChange"),0<r.length&&(o=new Kr("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var ll=null,ul=null;function m2(t){Bx(t,0)}function rc(t){var r=Bn(t);if(Vi(r))return t}function u0(t,r){if(t==="change")return r}var c0=!1;if(lr){var bh;if(lr){var vh="oninput"in document;if(!vh){var d0=document.createElement("div");d0.setAttribute("oninput","return;"),vh=typeof d0.oninput=="function"}bh=vh}else bh=!1;c0=bh&&(!document.documentMode||9<document.documentMode)}function h0(){ll&&(ll.detachEvent("onpropertychange",p0),ul=ll=null)}function p0(t){if(t.propertyName==="value"&&rc(ul)){var r=[];l0(r,ul,t,or(t)),Bs(m2,r)}}function f2(t,r,o){t==="focusin"?(h0(),ll=r,ul=o,ll.attachEvent("onpropertychange",p0)):t==="focusout"&&h0()}function g2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rc(ul)}function x2(t,r){if(t==="click")return rc(r)}function y2(t,r){if(t==="input"||t==="change")return rc(r)}function b2(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Gn=typeof Object.is=="function"?Object.is:b2;function cl(t,r){if(Gn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!kt.call(r,h)||!Gn(t[h],r[h]))return!1}return!0}function m0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function f0(t,r){var o=m0(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=m0(o)}}function g0(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?g0(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function x0(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Hr(t.document);r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Hr(t.document)}return r}function wh(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var v2=lr&&"documentMode"in document&&11>=document.documentMode,$a=null,Nh=null,dl=null,kh=!1;function y0(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;kh||$a==null||$a!==Hr(u)||(u=$a,"selectionStart"in u&&wh(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),dl&&cl(dl,u)||(dl=u,u=Hc(Nh,"onSelect"),0<u.length&&(r=new Kr("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=$a)))}function Qi(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var Ba={animationend:Qi("Animation","AnimationEnd"),animationiteration:Qi("Animation","AnimationIteration"),animationstart:Qi("Animation","AnimationStart"),transitionrun:Qi("Transition","TransitionRun"),transitionstart:Qi("Transition","TransitionStart"),transitioncancel:Qi("Transition","TransitionCancel"),transitionend:Qi("Transition","TransitionEnd")},jh={},b0={};lr&&(b0=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function Yi(t){if(jh[t])return jh[t];if(!Ba[t])return t;var r=Ba[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in b0)return jh[t]=r[o];return t}var v0=Yi("animationend"),w0=Yi("animationiteration"),N0=Yi("animationstart"),w2=Yi("transitionrun"),N2=Yi("transitionstart"),k2=Yi("transitioncancel"),k0=Yi("transitionend"),j0=new Map,Sh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sh.push("scrollEnd");function jr(t,r){j0.set(t,r),$r(r,[t])}var sc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},cr=[],Ha=0,Ch=0;function ic(){for(var t=Ha,r=Ch=Ha=0;r<t;){var o=cr[r];cr[r++]=null;var u=cr[r];cr[r++]=null;var h=cr[r];cr[r++]=null;var m=cr[r];if(cr[r++]=null,u!==null&&h!==null){var b=u.pending;b===null?h.next=h:(h.next=b.next,b.next=h),u.pending=h}m!==0&&S0(o,h,m)}}function ac(t,r,o,u){cr[Ha++]=t,cr[Ha++]=r,cr[Ha++]=o,cr[Ha++]=u,Ch|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function Eh(t,r,o,u){return ac(t,r,o,u),oc(t)}function Xi(t,r){return ac(t,null,null,r),oc(t)}function S0(t,r,o){t.lanes|=o;var u=t.alternate;u!==null&&(u.lanes|=o);for(var h=!1,m=t.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&r!==null&&(h=31-Tt(o),t=m.hiddenUpdates,u=t[h],u===null?t[h]=[r]:u.push(r),r.lane=o|536870912),m):null}function oc(t){if(50<Pl)throw Pl=0,Lp=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Wa={};function j2(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(t,r,o,u){return new j2(t,r,o,u)}function _h(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ms(t,r){var o=t.alternate;return o===null?(o=Kn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&65011712,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o.refCleanup=t.refCleanup,o}function C0(t,r){t.flags&=65011714;var o=t.alternate;return o===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=o.childLanes,t.lanes=o.lanes,t.child=o.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=o.memoizedProps,t.memoizedState=o.memoizedState,t.updateQueue=o.updateQueue,t.type=o.type,r=o.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function lc(t,r,o,u,h,m){var b=0;if(u=t,typeof t=="function")_h(t)&&(b=1);else if(typeof t=="string")b=TN(t,o,ge.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case S:return t=Kn(31,o,r,h),t.elementType=S,t.lanes=m,t;case R:return Ji(o.children,h,m,r);case O:b=8,h|=24;break;case te:return t=Kn(12,o,r,h|2),t.elementType=te,t.lanes=m,t;case $:return t=Kn(13,o,r,h),t.elementType=$,t.lanes=m,t;case X:return t=Kn(19,o,r,h),t.elementType=X,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ue:b=10;break e;case ee:b=9;break e;case re:b=11;break e;case T:b=14;break e;case k:b=16,u=null;break e}b=29,o=Error(i(130,t===null?"null":typeof t,"")),u=null}return r=Kn(b,o,r,h),r.elementType=t,r.type=u,r.lanes=m,r}function Ji(t,r,o,u){return t=Kn(7,t,u,r),t.lanes=o,t}function Th(t,r,o){return t=Kn(6,t,null,r),t.lanes=o,t}function E0(t){var r=Kn(18,null,null,0);return r.stateNode=t,r}function Ih(t,r,o){return r=Kn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var _0=new WeakMap;function dr(t,r){if(typeof t=="object"&&t!==null){var o=_0.get(t);return o!==void 0?o:(r={value:t,source:r,stack:Pr(r)},_0.set(t,r),r)}return{value:t,source:r,stack:Pr(r)}}var Ga=[],Ka=0,uc=null,hl=0,hr=[],pr=0,Ks=null,Xr=1,Jr="";function fs(t,r){Ga[Ka++]=hl,Ga[Ka++]=uc,uc=t,hl=r}function T0(t,r,o){hr[pr++]=Xr,hr[pr++]=Jr,hr[pr++]=Ks,Ks=t;var u=Xr;t=Jr;var h=32-Tt(u)-1;u&=~(1<<h),o+=1;var m=32-Tt(r)+h;if(30<m){var b=h-h%5;m=(u&(1<<b)-1).toString(32),u>>=b,h-=b,Xr=1<<32-Tt(r)+h|o<<h|u,Jr=m+t}else Xr=1<<m|o<<h|u,Jr=t}function Ah(t){t.return!==null&&(fs(t,1),T0(t,1,0))}function Dh(t){for(;t===uc;)uc=Ga[--Ka],Ga[Ka]=null,hl=Ga[--Ka],Ga[Ka]=null;for(;t===Ks;)Ks=hr[--pr],hr[pr]=null,Jr=hr[--pr],hr[pr]=null,Xr=hr[--pr],hr[pr]=null}function I0(t,r){hr[pr++]=Xr,hr[pr++]=Jr,hr[pr++]=Ks,Xr=r.id,Jr=r.overflow,Ks=t}var hn=null,vt=null,et=!1,Qs=null,mr=!1,Ph=Error(i(519));function Ys(t){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pl(dr(r,t)),Ph}function A0(t){var r=t.stateNode,o=t.type,u=t.memoizedProps;switch(r[At]=t,r[sn]=u,o){case"dialog":Ke("cancel",r),Ke("close",r);break;case"iframe":case"object":case"embed":Ke("load",r);break;case"video":case"audio":for(o=0;o<Ml.length;o++)Ke(Ml[o],r);break;case"source":Ke("error",r);break;case"img":case"image":case"link":Ke("error",r),Ke("load",r);break;case"details":Ke("toggle",r);break;case"input":Ke("invalid",r),qu(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ke("invalid",r);break;case"textarea":Ke("invalid",r),zs(r,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||Kx(r.textContent,o)?(u.popover!=null&&(Ke("beforetoggle",r),Ke("toggle",r)),u.onScroll!=null&&Ke("scroll",r),u.onScrollEnd!=null&&Ke("scrollend",r),u.onClick!=null&&(r.onclick=br),r=!0):r=!1,r||Ys(t,!0)}function D0(t){for(hn=t.return;hn;)switch(hn.tag){case 5:case 31:case 13:mr=!1;return;case 27:case 3:mr=!0;return;default:hn=hn.return}}function Qa(t){if(t!==hn)return!1;if(!et)return D0(t),et=!0,!1;var r=t.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=t.type,o=!(o!=="form"&&o!=="button")||Xp(t.type,t.memoizedProps)),o=!o),o&&vt&&Ys(t),D0(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));vt=ry(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));vt=ry(t)}else r===27?(r=vt,ci(t.type)?(t=nm,nm=null,vt=t):vt=r):vt=hn?fr(t.stateNode.nextSibling):null;return!0}function Zi(){vt=hn=null,et=!1}function Rh(){var t=Qs;return t!==null&&(Un===null?Un=t:Un.push.apply(Un,t),Qs=null),t}function pl(t){Qs===null?Qs=[t]:Qs.push(t)}var Mh=L(null),ea=null,gs=null;function Xs(t,r,o){he(Mh,r._currentValue),r._currentValue=o}function xs(t){t._currentValue=Mh.current,Q(Mh)}function Lh(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function Oh(t,r,o,u){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var b=h.child;m=m.firstContext;e:for(;m!==null;){var C=m;m=h;for(var M=0;M<r.length;M++)if(C.context===r[M]){m.lanes|=o,C=m.alternate,C!==null&&(C.lanes|=o),Lh(m.return,o,t),u||(b=null);break e}m=C.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(i(341));b.lanes|=o,m=b.alternate,m!==null&&(m.lanes|=o),Lh(b,o,t),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===t){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function Ya(t,r,o,u){t=null;for(var h=r,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var C=h.type;Gn(h.pendingProps.value,b.value)||(t!==null?t.push(C):t=[C])}}else if(h===ce.current){if(b=h.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Vl):t=[Vl])}h=h.return}t!==null&&Oh(r,t,o,u),r.flags|=262144}function cc(t){for(t=t.firstContext;t!==null;){if(!Gn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ta(t){ea=t,gs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function pn(t){return P0(ea,t)}function dc(t,r){return ea===null&&ta(t),P0(t,r)}function P0(t,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},gs===null){if(t===null)throw Error(i(308));gs=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else gs=gs.next=r;return o}var S2=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(o,u){t.push(u)}};this.abort=function(){r.aborted=!0,t.forEach(function(o){return o()})}},C2=s.unstable_scheduleCallback,E2=s.unstable_NormalPriority,qt={$$typeof:ue,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fh(){return{controller:new S2,data:new Map,refCount:0}}function ml(t){t.refCount--,t.refCount===0&&C2(E2,function(){t.controller.abort()})}var fl=null,Uh=0,Xa=0,Ja=null;function _2(t,r){if(fl===null){var o=fl=[];Uh=0,Xa=qp(),Ja={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Uh++,r.then(R0,R0),r}function R0(){if(--Uh===0&&fl!==null){Ja!==null&&(Ja.status="fulfilled");var t=fl;fl=null,Xa=0,Ja=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function T2(t,r){var o=[],u={status:"pending",value:null,reason:null,then:function(h){o.push(h)}};return t.then(function(){u.status="fulfilled",u.value=r;for(var h=0;h<o.length;h++)(0,o[h])(r)},function(h){for(u.status="rejected",u.reason=h,h=0;h<o.length;h++)(0,o[h])(void 0)}),u}var M0=B.S;B.S=function(t,r){yx=Y(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&_2(t,r),M0!==null&&M0(t,r)};var na=L(null);function Vh(){var t=na.current;return t!==null?t:yt.pooledCache}function hc(t,r){r===null?he(na,na.current):he(na,r.pool)}function L0(){var t=Vh();return t===null?null:{parent:qt._currentValue,pool:t}}var Za=Error(i(460)),zh=Error(i(474)),pc=Error(i(542)),mc={then:function(){}};function O0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function F0(t,r,o){switch(o=t[o],o===void 0?t.push(r):o!==r&&(r.then(br,br),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,V0(t),t;default:if(typeof r.status=="string")r.then(br,br);else{if(t=yt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(u){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=u}},function(u){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,V0(t),t}throw sa=r,Za}}function ra(t){try{var r=t._init;return r(t._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(sa=o,Za):o}}var sa=null;function U0(){if(sa===null)throw Error(i(459));var t=sa;return sa=null,t}function V0(t){if(t===Za||t===pc)throw Error(i(483))}var eo=null,gl=0;function fc(t){var r=gl;return gl+=1,eo===null&&(eo=[]),F0(eo,t,r)}function xl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function gc(t,r){throw r.$$typeof===D?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function z0(t){function r(q,U){if(t){var W=q.deletions;W===null?(q.deletions=[U],q.flags|=16):W.push(U)}}function o(q,U){if(!t)return null;for(;U!==null;)r(q,U),U=U.sibling;return null}function u(q){for(var U=new Map;q!==null;)q.key!==null?U.set(q.key,q):U.set(q.index,q),q=q.sibling;return U}function h(q,U){return q=ms(q,U),q.index=0,q.sibling=null,q}function m(q,U,W){return q.index=W,t?(W=q.alternate,W!==null?(W=W.index,W<U?(q.flags|=67108866,U):W):(q.flags|=67108866,U)):(q.flags|=1048576,U)}function b(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function C(q,U,W,ie){return U===null||U.tag!==6?(U=Th(W,q.mode,ie),U.return=q,U):(U=h(U,W),U.return=q,U)}function M(q,U,W,ie){var Te=W.type;return Te===R?se(q,U,W.props.children,ie,W.key):U!==null&&(U.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===k&&ra(Te)===U.type)?(U=h(U,W.props),xl(U,W),U.return=q,U):(U=lc(W.type,W.key,W.props,null,q.mode,ie),xl(U,W),U.return=q,U)}function G(q,U,W,ie){return U===null||U.tag!==4||U.stateNode.containerInfo!==W.containerInfo||U.stateNode.implementation!==W.implementation?(U=Ih(W,q.mode,ie),U.return=q,U):(U=h(U,W.children||[]),U.return=q,U)}function se(q,U,W,ie,Te){return U===null||U.tag!==7?(U=Ji(W,q.mode,ie,Te),U.return=q,U):(U=h(U,W),U.return=q,U)}function oe(q,U,W){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Th(""+U,q.mode,W),U.return=q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case P:return W=lc(U.type,U.key,U.props,null,q.mode,W),xl(W,U),W.return=q,W;case z:return U=Ih(U,q.mode,W),U.return=q,U;case k:return U=ra(U),oe(q,U,W)}if(Ae(U)||A(U))return U=Ji(U,q.mode,W,null),U.return=q,U;if(typeof U.then=="function")return oe(q,fc(U),W);if(U.$$typeof===ue)return oe(q,dc(q,U),W);gc(q,U)}return null}function K(q,U,W,ie){var Te=U!==null?U.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Te!==null?null:C(q,U,""+W,ie);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case P:return W.key===Te?M(q,U,W,ie):null;case z:return W.key===Te?G(q,U,W,ie):null;case k:return W=ra(W),K(q,U,W,ie)}if(Ae(W)||A(W))return Te!==null?null:se(q,U,W,ie,null);if(typeof W.then=="function")return K(q,U,fc(W),ie);if(W.$$typeof===ue)return K(q,U,dc(q,W),ie);gc(q,W)}return null}function Z(q,U,W,ie,Te){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return q=q.get(W)||null,C(U,q,""+ie,Te);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case P:return q=q.get(ie.key===null?W:ie.key)||null,M(U,q,ie,Te);case z:return q=q.get(ie.key===null?W:ie.key)||null,G(U,q,ie,Te);case k:return ie=ra(ie),Z(q,U,W,ie,Te)}if(Ae(ie)||A(ie))return q=q.get(W)||null,se(U,q,ie,Te,null);if(typeof ie.then=="function")return Z(q,U,W,fc(ie),Te);if(ie.$$typeof===ue)return Z(q,U,W,dc(U,ie),Te);gc(U,ie)}return null}function je(q,U,W,ie){for(var Te=null,st=null,Se=U,We=U=0,Ye=null;Se!==null&&We<W.length;We++){Se.index>We?(Ye=Se,Se=null):Ye=Se.sibling;var it=K(q,Se,W[We],ie);if(it===null){Se===null&&(Se=Ye);break}t&&Se&&it.alternate===null&&r(q,Se),U=m(it,U,We),st===null?Te=it:st.sibling=it,st=it,Se=Ye}if(We===W.length)return o(q,Se),et&&fs(q,We),Te;if(Se===null){for(;We<W.length;We++)Se=oe(q,W[We],ie),Se!==null&&(U=m(Se,U,We),st===null?Te=Se:st.sibling=Se,st=Se);return et&&fs(q,We),Te}for(Se=u(Se);We<W.length;We++)Ye=Z(Se,q,We,W[We],ie),Ye!==null&&(t&&Ye.alternate!==null&&Se.delete(Ye.key===null?We:Ye.key),U=m(Ye,U,We),st===null?Te=Ye:st.sibling=Ye,st=Ye);return t&&Se.forEach(function(fi){return r(q,fi)}),et&&fs(q,We),Te}function Re(q,U,W,ie){if(W==null)throw Error(i(151));for(var Te=null,st=null,Se=U,We=U=0,Ye=null,it=W.next();Se!==null&&!it.done;We++,it=W.next()){Se.index>We?(Ye=Se,Se=null):Ye=Se.sibling;var fi=K(q,Se,it.value,ie);if(fi===null){Se===null&&(Se=Ye);break}t&&Se&&fi.alternate===null&&r(q,Se),U=m(fi,U,We),st===null?Te=fi:st.sibling=fi,st=fi,Se=Ye}if(it.done)return o(q,Se),et&&fs(q,We),Te;if(Se===null){for(;!it.done;We++,it=W.next())it=oe(q,it.value,ie),it!==null&&(U=m(it,U,We),st===null?Te=it:st.sibling=it,st=it);return et&&fs(q,We),Te}for(Se=u(Se);!it.done;We++,it=W.next())it=Z(Se,q,We,it.value,ie),it!==null&&(t&&it.alternate!==null&&Se.delete(it.key===null?We:it.key),U=m(it,U,We),st===null?Te=it:st.sibling=it,st=it);return t&&Se.forEach(function(VN){return r(q,VN)}),et&&fs(q,We),Te}function xt(q,U,W,ie){if(typeof W=="object"&&W!==null&&W.type===R&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case P:e:{for(var Te=W.key;U!==null;){if(U.key===Te){if(Te=W.type,Te===R){if(U.tag===7){o(q,U.sibling),ie=h(U,W.props.children),ie.return=q,q=ie;break e}}else if(U.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===k&&ra(Te)===U.type){o(q,U.sibling),ie=h(U,W.props),xl(ie,W),ie.return=q,q=ie;break e}o(q,U);break}else r(q,U);U=U.sibling}W.type===R?(ie=Ji(W.props.children,q.mode,ie,W.key),ie.return=q,q=ie):(ie=lc(W.type,W.key,W.props,null,q.mode,ie),xl(ie,W),ie.return=q,q=ie)}return b(q);case z:e:{for(Te=W.key;U!==null;){if(U.key===Te)if(U.tag===4&&U.stateNode.containerInfo===W.containerInfo&&U.stateNode.implementation===W.implementation){o(q,U.sibling),ie=h(U,W.children||[]),ie.return=q,q=ie;break e}else{o(q,U);break}else r(q,U);U=U.sibling}ie=Ih(W,q.mode,ie),ie.return=q,q=ie}return b(q);case k:return W=ra(W),xt(q,U,W,ie)}if(Ae(W))return je(q,U,W,ie);if(A(W)){if(Te=A(W),typeof Te!="function")throw Error(i(150));return W=Te.call(W),Re(q,U,W,ie)}if(typeof W.then=="function")return xt(q,U,fc(W),ie);if(W.$$typeof===ue)return xt(q,U,dc(q,W),ie);gc(q,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,U!==null&&U.tag===6?(o(q,U.sibling),ie=h(U,W),ie.return=q,q=ie):(o(q,U),ie=Th(W,q.mode,ie),ie.return=q,q=ie),b(q)):o(q,U)}return function(q,U,W,ie){try{gl=0;var Te=xt(q,U,W,ie);return eo=null,Te}catch(Se){if(Se===Za||Se===pc)throw Se;var st=Kn(29,Se,null,q.mode);return st.lanes=ie,st.return=q,st}finally{}}}var ia=z0(!0),q0=z0(!1),Js=!1;function qh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $h(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Zs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ei(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(at&2)!==0){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,r=oc(t),S0(t,null,o),r}return ac(t,u,r,o),oc(t)}function yl(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Or(t,o)}}function Bh(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?h=m=b:m=m.next=b,o=o.next}while(o!==null);m===null?h=m=r:m=m.next=r}else h=m=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}var Hh=!1;function bl(){if(Hh){var t=Ja;if(t!==null)throw t}}function vl(t,r,o,u){Hh=!1;var h=t.updateQueue;Js=!1;var m=h.firstBaseUpdate,b=h.lastBaseUpdate,C=h.shared.pending;if(C!==null){h.shared.pending=null;var M=C,G=M.next;M.next=null,b===null?m=G:b.next=G,b=M;var se=t.alternate;se!==null&&(se=se.updateQueue,C=se.lastBaseUpdate,C!==b&&(C===null?se.firstBaseUpdate=G:C.next=G,se.lastBaseUpdate=M))}if(m!==null){var oe=h.baseState;b=0,se=G=M=null,C=m;do{var K=C.lane&-536870913,Z=K!==C.lane;if(Z?(Qe&K)===K:(u&K)===K){K!==0&&K===Xa&&(Hh=!0),se!==null&&(se=se.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var je=t,Re=C;K=r;var xt=o;switch(Re.tag){case 1:if(je=Re.payload,typeof je=="function"){oe=je.call(xt,oe,K);break e}oe=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Re.payload,K=typeof je=="function"?je.call(xt,oe,K):je,K==null)break e;oe=w({},oe,K);break e;case 2:Js=!0}}K=C.callback,K!==null&&(t.flags|=64,Z&&(t.flags|=8192),Z=h.callbacks,Z===null?h.callbacks=[K]:Z.push(K))}else Z={lane:K,tag:C.tag,payload:C.payload,callback:C.callback,next:null},se===null?(G=se=Z,M=oe):se=se.next=Z,b|=K;if(C=C.next,C===null){if(C=h.shared.pending,C===null)break;Z=C,C=Z.next,Z.next=null,h.lastBaseUpdate=Z,h.shared.pending=null}}while(!0);se===null&&(M=oe),h.baseState=M,h.firstBaseUpdate=G,h.lastBaseUpdate=se,m===null&&(h.shared.lanes=0),ii|=b,t.lanes=b,t.memoizedState=oe}}function $0(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function B0(t,r){var o=t.callbacks;if(o!==null)for(t.callbacks=null,t=0;t<o.length;t++)$0(o[t],r)}var to=L(null),xc=L(0);function H0(t,r){t=Cs,he(xc,t),he(to,r),Cs=t|r.baseLanes}function Wh(){he(xc,Cs),he(to,to.current)}function Gh(){Cs=xc.current,Q(to),Q(xc)}var Qn=L(null),Sr=null;function ti(t){var r=t.alternate;he(Mt,Mt.current&1),he(Qn,t),Sr===null&&(r===null||to.current!==null||r.memoizedState!==null)&&(Sr=t)}function Kh(t){he(Mt,Mt.current),he(Qn,t),Sr===null&&(Sr=t)}function W0(t){t.tag===22?(he(Mt,Mt.current),he(Qn,t),Sr===null&&(Sr=t)):ni()}function ni(){he(Mt,Mt.current),he(Qn,Qn.current)}function Yn(t){Q(Qn),Sr===t&&(Sr=null),Q(Mt)}var Mt=L(0);function yc(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||em(o)||tm(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ys=0,$e=null,ft=null,$t=null,bc=!1,no=!1,aa=!1,vc=0,wl=0,ro=null,I2=0;function Dt(){throw Error(i(321))}function Qh(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Gn(t[o],r[o]))return!1;return!0}function Yh(t,r,o,u,h,m){return ys=m,$e=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,B.H=t===null||t.memoizedState===null?Tg:dp,aa=!1,m=o(u,h),aa=!1,no&&(m=K0(r,o,u,h)),G0(t),m}function G0(t){B.H=jl;var r=ft!==null&&ft.next!==null;if(ys=0,$t=ft=$e=null,bc=!1,wl=0,ro=null,r)throw Error(i(300));t===null||Bt||(t=t.dependencies,t!==null&&cc(t)&&(Bt=!0))}function K0(t,r,o,u){$e=t;var h=0;do{if(no&&(ro=null),wl=0,no=!1,25<=h)throw Error(i(301));if(h+=1,$t=ft=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}B.H=Ig,m=r(o,u)}while(no);return m}function A2(){var t=B.H,r=t.useState()[0];return r=typeof r.then=="function"?Nl(r):r,t=t.useState()[0],(ft!==null?ft.memoizedState:null)!==t&&($e.flags|=1024),r}function Xh(){var t=vc!==0;return vc=0,t}function Jh(t,r,o){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~o}function Zh(t){if(bc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}bc=!1}ys=0,$t=ft=$e=null,no=!1,wl=vc=0,ro=null}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?$e.memoizedState=$t=t:$t=$t.next=t,$t}function Lt(){if(ft===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var r=$t===null?$e.memoizedState:$t.next;if(r!==null)$t=r,ft=t;else{if(t===null)throw $e.alternate===null?Error(i(467)):Error(i(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},$t===null?$e.memoizedState=$t=t:$t=$t.next=t}return $t}function wc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nl(t){var r=wl;return wl+=1,ro===null&&(ro=[]),t=F0(ro,t,r),r=$e,($t===null?r.memoizedState:$t.next)===null&&(r=r.alternate,B.H=r===null||r.memoizedState===null?Tg:dp),t}function Nc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Nl(t);if(t.$$typeof===ue)return pn(t)}throw Error(i(438,String(t)))}function ep(t){var r=null,o=$e.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=$e.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=wc(),$e.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(t),u=0;u<t;u++)o[u]=j;return r.index++,o}function bs(t,r){return typeof r=="function"?r(t):r}function kc(t){var r=Lt();return tp(r,ft,t)}function tp(t,r,o){var u=t.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var h=t.baseQueue,m=u.pending;if(m!==null){if(h!==null){var b=h.next;h.next=m.next,m.next=b}r.baseQueue=h=m,u.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{r=h.next;var C=b=null,M=null,G=r,se=!1;do{var oe=G.lane&-536870913;if(oe!==G.lane?(Qe&oe)===oe:(ys&oe)===oe){var K=G.revertLane;if(K===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),oe===Xa&&(se=!0);else if((ys&K)===K){G=G.next,K===Xa&&(se=!0);continue}else oe={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(C=M=oe,b=m):M=M.next=oe,$e.lanes|=K,ii|=K;oe=G.action,aa&&o(m,oe),m=G.hasEagerState?G.eagerState:o(m,oe)}else K={lane:oe,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(C=M=K,b=m):M=M.next=K,$e.lanes|=oe,ii|=oe;G=G.next}while(G!==null&&G!==r);if(M===null?b=m:M.next=C,!Gn(m,t.memoizedState)&&(Bt=!0,se&&(o=Ja,o!==null)))throw o;t.memoizedState=m,t.baseState=b,t.baseQueue=M,u.lastRenderedState=m}return h===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function np(t){var r=Lt(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,m=r.memoizedState;if(h!==null){o.pending=null;var b=h=h.next;do m=t(m,b.action),b=b.next;while(b!==h);Gn(m,r.memoizedState)||(Bt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,u]}function Q0(t,r,o){var u=$e,h=Lt(),m=et;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var b=!Gn((ft||h).memoizedState,o);if(b&&(h.memoizedState=o,Bt=!0),h=h.queue,ip(J0.bind(null,u,h,t),[t]),h.getSnapshot!==r||b||$t!==null&&$t.memoizedState.tag&1){if(u.flags|=2048,so(9,{destroy:void 0},X0.bind(null,u,h,o,r),null),yt===null)throw Error(i(349));m||(ys&127)!==0||Y0(u,r,o)}return o}function Y0(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=$e.updateQueue,r===null?(r=wc(),$e.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function X0(t,r,o,u){r.value=o,r.getSnapshot=u,Z0(r)&&eg(t)}function J0(t,r,o){return o(function(){Z0(r)&&eg(t)})}function Z0(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Gn(t,o)}catch{return!0}}function eg(t){var r=Xi(t,2);r!==null&&Vn(r,t,2)}function rp(t){var r=In();if(typeof t=="function"){var o=t;if(t=o(),aa){Rn(!0);try{o()}finally{Rn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:t},r}function tg(t,r,o,u){return t.baseState=o,tp(t,ft,typeof u=="function"?u:bs)}function D2(t,r,o,u,h){if(Cc(t))throw Error(i(485));if(t=r.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};B.T!==null?o(!0):m.isTransition=!1,u(m),o=r.pending,o===null?(m.next=r.pending=m,ng(r,m)):(m.next=o.next,r.pending=o.next=m)}}function ng(t,r){var o=r.action,u=r.payload,h=t.state;if(r.isTransition){var m=B.T,b={};B.T=b;try{var C=o(h,u),M=B.S;M!==null&&M(b,C),rg(t,r,C)}catch(G){sp(t,r,G)}finally{m!==null&&b.types!==null&&(m.types=b.types),B.T=m}}else try{m=o(h,u),rg(t,r,m)}catch(G){sp(t,r,G)}}function rg(t,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){sg(t,r,u)},function(u){return sp(t,r,u)}):sg(t,r,o)}function sg(t,r,o){r.status="fulfilled",r.value=o,ig(r),t.state=o,r=t.pending,r!==null&&(o=r.next,o===r?t.pending=null:(o=o.next,r.next=o,ng(t,o)))}function sp(t,r,o){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,ig(r),r=r.next;while(r!==u)}t.action=null}function ig(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function ag(t,r){return r}function og(t,r){if(et){var o=yt.formState;if(o!==null){e:{var u=$e;if(et){if(vt){t:{for(var h=vt,m=mr;h.nodeType!==8;){if(!m){h=null;break t}if(h=fr(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){vt=fr(h.nextSibling),u=h.data==="F!";break e}}Ys(u)}u=!1}u&&(r=o[0])}}return o=In(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ag,lastRenderedState:r},o.queue=u,o=Cg.bind(null,$e,u),u.dispatch=o,u=rp(!1),m=cp.bind(null,$e,!1,u.queue),u=In(),h={state:r,dispatch:null,action:t,pending:null},u.queue=h,o=D2.bind(null,$e,h,m,o),h.dispatch=o,u.memoizedState=t,[r,o,!1]}function lg(t){var r=Lt();return ug(r,ft,t)}function ug(t,r,o){if(r=tp(t,r,ag)[0],t=kc(bs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Nl(r)}catch(b){throw b===Za?pc:b}else u=r;r=Lt();var h=r.queue,m=h.dispatch;return o!==r.memoizedState&&($e.flags|=2048,so(9,{destroy:void 0},P2.bind(null,h,o),null)),[u,m,t]}function P2(t,r){t.action=r}function cg(t){var r=Lt(),o=ft;if(o!==null)return ug(r,o,t);Lt(),r=r.memoizedState,o=Lt();var u=o.queue.dispatch;return o.memoizedState=t,[r,u,!1]}function so(t,r,o,u){return t={tag:t,create:o,deps:u,inst:r,next:null},r=$e.updateQueue,r===null&&(r=wc(),$e.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t),t}function dg(){return Lt().memoizedState}function jc(t,r,o,u){var h=In();$e.flags|=t,h.memoizedState=so(1|r,{destroy:void 0},o,u===void 0?null:u)}function Sc(t,r,o,u){var h=Lt();u=u===void 0?null:u;var m=h.memoizedState.inst;ft!==null&&u!==null&&Qh(u,ft.memoizedState.deps)?h.memoizedState=so(r,m,o,u):($e.flags|=t,h.memoizedState=so(1|r,m,o,u))}function hg(t,r){jc(8390656,8,t,r)}function ip(t,r){Sc(2048,8,t,r)}function R2(t){$e.flags|=4;var r=$e.updateQueue;if(r===null)r=wc(),$e.updateQueue=r,r.events=[t];else{var o=r.events;o===null?r.events=[t]:o.push(t)}}function pg(t){var r=Lt().memoizedState;return R2({ref:r,nextImpl:t}),function(){if((at&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function mg(t,r){return Sc(4,2,t,r)}function fg(t,r){return Sc(4,4,t,r)}function gg(t,r){if(typeof r=="function"){t=t();var o=r(t);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function xg(t,r,o){o=o!=null?o.concat([t]):null,Sc(4,4,gg.bind(null,r,t),o)}function ap(){}function yg(t,r){var o=Lt();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&Qh(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function bg(t,r){var o=Lt();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&Qh(r,u[1]))return u[0];if(u=t(),aa){Rn(!0);try{t()}finally{Rn(!1)}}return o.memoizedState=[u,r],u}function op(t,r,o){return o===void 0||(ys&1073741824)!==0&&(Qe&261930)===0?t.memoizedState=r:(t.memoizedState=o,t=vx(),$e.lanes|=t,ii|=t,o)}function vg(t,r,o,u){return Gn(o,r)?o:to.current!==null?(t=op(t,o,u),Gn(t,r)||(Bt=!0),t):(ys&42)===0||(ys&1073741824)!==0&&(Qe&261930)===0?(Bt=!0,t.memoizedState=o):(t=vx(),$e.lanes|=t,ii|=t,r)}function wg(t,r,o,u,h){var m=de.p;de.p=m!==0&&8>m?m:8;var b=B.T,C={};B.T=C,cp(t,!1,r,o);try{var M=h(),G=B.S;if(G!==null&&G(C,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var se=T2(M,u);kl(t,r,se,Zn(t))}else kl(t,r,u,Zn(t))}catch(oe){kl(t,r,{then:function(){},status:"rejected",reason:oe},Zn())}finally{de.p=m,b!==null&&C.types!==null&&(b.types=C.types),B.T=b}}function M2(){}function lp(t,r,o,u){if(t.tag!==5)throw Error(i(476));var h=Ng(t).queue;wg(t,h,r,ye,o===null?M2:function(){return kg(t),o(u)})}function Ng(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:ye},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:o},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function kg(t){var r=Ng(t);r.next===null&&(r=t.alternate.memoizedState),kl(t,r.next.queue,{},Zn())}function up(){return pn(Vl)}function jg(){return Lt().memoizedState}function Sg(){return Lt().memoizedState}function L2(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var o=Zn();t=Zs(o);var u=ei(r,t,o);u!==null&&(Vn(u,r,o),yl(u,r,o)),r={cache:Fh()},t.payload=r;return}r=r.return}}function O2(t,r,o){var u=Zn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Cc(t)?Eg(r,o):(o=Eh(t,r,o,u),o!==null&&(Vn(o,t,u),_g(o,r,u)))}function Cg(t,r,o){var u=Zn();kl(t,r,o,u)}function kl(t,r,o,u){var h={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Cc(t))Eg(r,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var b=r.lastRenderedState,C=m(b,o);if(h.hasEagerState=!0,h.eagerState=C,Gn(C,b))return ac(t,r,h,0),yt===null&&ic(),!1}catch{}finally{}if(o=Eh(t,r,h,u),o!==null)return Vn(o,t,u),_g(o,r,u),!0}return!1}function cp(t,r,o,u){if(u={lane:2,revertLane:qp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Cc(t)){if(r)throw Error(i(479))}else r=Eh(t,o,u,2),r!==null&&Vn(r,t,2)}function Cc(t){var r=t.alternate;return t===$e||r!==null&&r===$e}function Eg(t,r){no=bc=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function _g(t,r,o){if((o&4194048)!==0){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Or(t,o)}}var jl={readContext:pn,use:Nc,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useLayoutEffect:Dt,useInsertionEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useSyncExternalStore:Dt,useId:Dt,useHostTransitionStatus:Dt,useFormState:Dt,useActionState:Dt,useOptimistic:Dt,useMemoCache:Dt,useCacheRefresh:Dt};jl.useEffectEvent=Dt;var Tg={readContext:pn,use:Nc,useCallback:function(t,r){return In().memoizedState=[t,r===void 0?null:r],t},useContext:pn,useEffect:hg,useImperativeHandle:function(t,r,o){o=o!=null?o.concat([t]):null,jc(4194308,4,gg.bind(null,r,t),o)},useLayoutEffect:function(t,r){return jc(4194308,4,t,r)},useInsertionEffect:function(t,r){jc(4,2,t,r)},useMemo:function(t,r){var o=In();r=r===void 0?null:r;var u=t();if(aa){Rn(!0);try{t()}finally{Rn(!1)}}return o.memoizedState=[u,r],u},useReducer:function(t,r,o){var u=In();if(o!==void 0){var h=o(r);if(aa){Rn(!0);try{o(r)}finally{Rn(!1)}}}else h=r;return u.memoizedState=u.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},u.queue=t,t=t.dispatch=O2.bind(null,$e,t),[u.memoizedState,t]},useRef:function(t){var r=In();return t={current:t},r.memoizedState=t},useState:function(t){t=rp(t);var r=t.queue,o=Cg.bind(null,$e,r);return r.dispatch=o,[t.memoizedState,o]},useDebugValue:ap,useDeferredValue:function(t,r){var o=In();return op(o,t,r)},useTransition:function(){var t=rp(!1);return t=wg.bind(null,$e,t.queue,!0,!1),In().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,o){var u=$e,h=In();if(et){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),yt===null)throw Error(i(349));(Qe&127)!==0||Y0(u,r,o)}h.memoizedState=o;var m={value:o,getSnapshot:r};return h.queue=m,hg(J0.bind(null,u,m,t),[t]),u.flags|=2048,so(9,{destroy:void 0},X0.bind(null,u,m,o,r),null),o},useId:function(){var t=In(),r=yt.identifierPrefix;if(et){var o=Jr,u=Xr;o=(u&~(1<<32-Tt(u)-1)).toString(32)+o,r="_"+r+"R_"+o,o=vc++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=I2++,r="_"+r+"r_"+o.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:up,useFormState:og,useActionState:og,useOptimistic:function(t){var r=In();r.memoizedState=r.baseState=t;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=cp.bind(null,$e,!0,o),o.dispatch=r,[t,r]},useMemoCache:ep,useCacheRefresh:function(){return In().memoizedState=L2.bind(null,$e)},useEffectEvent:function(t){var r=In(),o={impl:t};return r.memoizedState=o,function(){if((at&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},dp={readContext:pn,use:Nc,useCallback:yg,useContext:pn,useEffect:ip,useImperativeHandle:xg,useInsertionEffect:mg,useLayoutEffect:fg,useMemo:bg,useReducer:kc,useRef:dg,useState:function(){return kc(bs)},useDebugValue:ap,useDeferredValue:function(t,r){var o=Lt();return vg(o,ft.memoizedState,t,r)},useTransition:function(){var t=kc(bs)[0],r=Lt().memoizedState;return[typeof t=="boolean"?t:Nl(t),r]},useSyncExternalStore:Q0,useId:jg,useHostTransitionStatus:up,useFormState:lg,useActionState:lg,useOptimistic:function(t,r){var o=Lt();return tg(o,ft,t,r)},useMemoCache:ep,useCacheRefresh:Sg};dp.useEffectEvent=pg;var Ig={readContext:pn,use:Nc,useCallback:yg,useContext:pn,useEffect:ip,useImperativeHandle:xg,useInsertionEffect:mg,useLayoutEffect:fg,useMemo:bg,useReducer:np,useRef:dg,useState:function(){return np(bs)},useDebugValue:ap,useDeferredValue:function(t,r){var o=Lt();return ft===null?op(o,t,r):vg(o,ft.memoizedState,t,r)},useTransition:function(){var t=np(bs)[0],r=Lt().memoizedState;return[typeof t=="boolean"?t:Nl(t),r]},useSyncExternalStore:Q0,useId:jg,useHostTransitionStatus:up,useFormState:cg,useActionState:cg,useOptimistic:function(t,r){var o=Lt();return ft!==null?tg(o,ft,t,r):(o.baseState=t,[t,o.queue.dispatch])},useMemoCache:ep,useCacheRefresh:Sg};Ig.useEffectEvent=pg;function hp(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:w({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var pp={enqueueSetState:function(t,r,o){t=t._reactInternals;var u=Zn(),h=Zs(u);h.payload=r,o!=null&&(h.callback=o),r=ei(t,h,u),r!==null&&(Vn(r,t,u),yl(r,t,u))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=Zn(),h=Zs(u);h.tag=1,h.payload=r,o!=null&&(h.callback=o),r=ei(t,h,u),r!==null&&(Vn(r,t,u),yl(r,t,u))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=Zn(),u=Zs(o);u.tag=2,r!=null&&(u.callback=r),r=ei(t,u,o),r!==null&&(Vn(r,t,o),yl(r,t,o))}};function Ag(t,r,o,u,h,m,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,m,b):r.prototype&&r.prototype.isPureReactComponent?!cl(o,u)||!cl(h,m):!0}function Dg(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&pp.enqueueReplaceState(r,r.state,null)}function oa(t,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(t=t.defaultProps){o===r&&(o=w({},o));for(var h in t)o[h]===void 0&&(o[h]=t[h])}return o}function Pg(t){sc(t)}function Rg(t){console.error(t)}function Mg(t){sc(t)}function Ec(t,r){try{var o=t.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function Lg(t,r,o){try{var u=t.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function mp(t,r,o){return o=Zs(o),o.tag=3,o.payload={element:null},o.callback=function(){Ec(t,r)},o}function Og(t){return t=Zs(t),t.tag=3,t}function Fg(t,r,o,u){var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var m=u.value;t.payload=function(){return h(m)},t.callback=function(){Lg(r,o,u)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Lg(r,o,u),typeof h!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function F2(t,r,o,u,h){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&Ya(r,o,h,!0),o=Qn.current,o!==null){switch(o.tag){case 31:case 13:return Sr===null?Uc():o.alternate===null&&Pt===0&&(Pt=3),o.flags&=-257,o.flags|=65536,o.lanes=h,u===mc?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),Up(t,u,h)),!1;case 22:return o.flags|=65536,u===mc?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),Up(t,u,h)),!1}throw Error(i(435,o.tag))}return Up(t,u,h),Uc(),!1}if(et)return r=Qn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,u!==Ph&&(t=Error(i(422),{cause:u}),pl(dr(t,o)))):(u!==Ph&&(r=Error(i(423),{cause:u}),pl(dr(r,o))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,u=dr(u,o),h=mp(t.stateNode,u,h),Bh(t,h),Pt!==4&&(Pt=2)),!1;var m=Error(i(520),{cause:u});if(m=dr(m,o),Dl===null?Dl=[m]:Dl.push(m),Pt!==4&&(Pt=2),r===null)return!0;u=dr(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,t=h&-h,o.lanes|=t,t=mp(o.stateNode,u,t),Bh(o,t),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ai===null||!ai.has(m))))return o.flags|=65536,h&=-h,o.lanes|=h,h=Og(h),Fg(h,t,o,u),Bh(o,h),!1}o=o.return}while(o!==null);return!1}var fp=Error(i(461)),Bt=!1;function mn(t,r,o,u){r.child=t===null?q0(r,null,o,u):ia(r,t.child,o,u)}function Ug(t,r,o,u,h){o=o.render;var m=r.ref;if("ref"in u){var b={};for(var C in u)C!=="ref"&&(b[C]=u[C])}else b=u;return ta(r),u=Yh(t,r,o,b,m,h),C=Xh(),t!==null&&!Bt?(Jh(t,r,h),vs(t,r,h)):(et&&C&&Ah(r),r.flags|=1,mn(t,r,u,h),r.child)}function Vg(t,r,o,u,h){if(t===null){var m=o.type;return typeof m=="function"&&!_h(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,zg(t,r,m,u,h)):(t=lc(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!kp(t,h)){var b=m.memoizedProps;if(o=o.compare,o=o!==null?o:cl,o(b,u)&&t.ref===r.ref)return vs(t,r,h)}return r.flags|=1,t=ms(m,u),t.ref=r.ref,t.return=r,r.child=t}function zg(t,r,o,u,h){if(t!==null){var m=t.memoizedProps;if(cl(m,u)&&t.ref===r.ref)if(Bt=!1,r.pendingProps=u=m,kp(t,h))(t.flags&131072)!==0&&(Bt=!0);else return r.lanes=t.lanes,vs(t,r,h)}return gp(t,r,o,u,h)}function qg(t,r,o,u){var h=u.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,t!==null){for(u=r.child=t.child,h=0;u!==null;)h=h|u.lanes|u.childLanes,u=u.sibling;u=h&~m}else u=0,r.child=null;return $g(t,r,m,o,u)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&hc(r,m!==null?m.cachePool:null),m!==null?H0(r,m):Wh(),W0(r);else return u=r.lanes=536870912,$g(t,r,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(hc(r,m.cachePool),H0(r,m),ni(),r.memoizedState=null):(t!==null&&hc(r,null),Wh(),ni());return mn(t,r,h,o),r.child}function Sl(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function $g(t,r,o,u,h){var m=Vh();return m=m===null?null:{parent:qt._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},t!==null&&hc(r,null),Wh(),W0(r),t!==null&&Ya(t,r,u,!0),r.childLanes=h,null}function _c(t,r){return r=Ic({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Bg(t,r,o){return ia(r,t.child,null,o),t=_c(r,r.pendingProps),t.flags|=2,Yn(r),r.memoizedState=null,t}function U2(t,r,o){var u=r.pendingProps,h=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(et){if(u.mode==="hidden")return t=_c(r,u),r.lanes=536870912,Sl(null,t);if(Kh(r),(t=vt)?(t=ny(t,mr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ks!==null?{id:Xr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},o=E0(t),o.return=r,r.child=o,hn=r,vt=null)):t=null,t===null)throw Ys(r);return r.lanes=536870912,null}return _c(r,u)}var m=t.memoizedState;if(m!==null){var b=m.dehydrated;if(Kh(r),h)if(r.flags&256)r.flags&=-257,r=Bg(t,r,o);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(i(558));else if(Bt||Ya(t,r,o,!1),h=(o&t.childLanes)!==0,Bt||h){if(u=yt,u!==null&&(b=Ui(u,o),b!==0&&b!==m.retryLane))throw m.retryLane=b,Xi(t,b),Vn(u,t,b),fp;Uc(),r=Bg(t,r,o)}else t=m.treeContext,vt=fr(b.nextSibling),hn=r,et=!0,Qs=null,mr=!1,t!==null&&I0(r,t),r=_c(r,u),r.flags|=4096;return r}return t=ms(t.child,{mode:u.mode,children:u.children}),t.ref=r.ref,r.child=t,t.return=r,t}function Tc(t,r){var o=r.ref;if(o===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(t===null||t.ref!==o)&&(r.flags|=4194816)}}function gp(t,r,o,u,h){return ta(r),o=Yh(t,r,o,u,void 0,h),u=Xh(),t!==null&&!Bt?(Jh(t,r,h),vs(t,r,h)):(et&&u&&Ah(r),r.flags|=1,mn(t,r,o,h),r.child)}function Hg(t,r,o,u,h,m){return ta(r),r.updateQueue=null,o=K0(r,u,o,h),G0(t),u=Xh(),t!==null&&!Bt?(Jh(t,r,m),vs(t,r,m)):(et&&u&&Ah(r),r.flags|=1,mn(t,r,o,m),r.child)}function Wg(t,r,o,u,h){if(ta(r),r.stateNode===null){var m=Wa,b=o.contextType;typeof b=="object"&&b!==null&&(m=pn(b)),m=new o(u,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=pp,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=u,m.state=r.memoizedState,m.refs={},qh(r),b=o.contextType,m.context=typeof b=="object"&&b!==null?pn(b):Wa,m.state=r.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(hp(r,o,b,u),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&pp.enqueueReplaceState(m,m.state,null),vl(r,u,m,h),bl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(t===null){m=r.stateNode;var C=r.memoizedProps,M=oa(o,C);m.props=M;var G=m.context,se=o.contextType;b=Wa,typeof se=="object"&&se!==null&&(b=pn(se));var oe=o.getDerivedStateFromProps;se=typeof oe=="function"||typeof m.getSnapshotBeforeUpdate=="function",C=r.pendingProps!==C,se||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C||G!==b)&&Dg(r,m,u,b),Js=!1;var K=r.memoizedState;m.state=K,vl(r,u,m,h),bl(),G=r.memoizedState,C||K!==G||Js?(typeof oe=="function"&&(hp(r,o,oe,u),G=r.memoizedState),(M=Js||Ag(r,o,M,u,K,G,b))?(se||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=G),m.props=u,m.state=G,m.context=b,u=M):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{m=r.stateNode,$h(t,r),b=r.memoizedProps,se=oa(o,b),m.props=se,oe=r.pendingProps,K=m.context,G=o.contextType,M=Wa,typeof G=="object"&&G!==null&&(M=pn(G)),C=o.getDerivedStateFromProps,(G=typeof C=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==oe||K!==M)&&Dg(r,m,u,M),Js=!1,K=r.memoizedState,m.state=K,vl(r,u,m,h),bl();var Z=r.memoizedState;b!==oe||K!==Z||Js||t!==null&&t.dependencies!==null&&cc(t.dependencies)?(typeof C=="function"&&(hp(r,o,C,u),Z=r.memoizedState),(se=Js||Ag(r,o,se,u,K,Z,M)||t!==null&&t.dependencies!==null&&cc(t.dependencies))?(G||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,Z,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,Z,M)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=Z),m.props=u,m.state=Z,m.context=M,u=se):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),u=!1)}return m=u,Tc(t,r),u=(r.flags&128)!==0,m||u?(m=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&u?(r.child=ia(r,t.child,null,h),r.child=ia(r,null,o,h)):mn(t,r,o,h),r.memoizedState=m.state,t=r.child):t=vs(t,r,h),t}function Gg(t,r,o,u){return Zi(),r.flags|=256,mn(t,r,o,u),r.child}var xp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yp(t){return{baseLanes:t,cachePool:L0()}}function bp(t,r,o){return t=t!==null?t.childLanes&~o:0,r&&(t|=Jn),t}function Kg(t,r,o){var u=r.pendingProps,h=!1,m=(r.flags&128)!==0,b;if((b=m)||(b=t!==null&&t.memoizedState===null?!1:(Mt.current&2)!==0),b&&(h=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,t===null){if(et){if(h?ti(r):ni(),(t=vt)?(t=ny(t,mr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ks!==null?{id:Xr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},o=E0(t),o.return=r,r.child=o,hn=r,vt=null)):t=null,t===null)throw Ys(r);return tm(t)?r.lanes=32:r.lanes=536870912,null}var C=u.children;return u=u.fallback,h?(ni(),h=r.mode,C=Ic({mode:"hidden",children:C},h),u=Ji(u,h,o,null),C.return=r,u.return=r,C.sibling=u,r.child=C,u=r.child,u.memoizedState=yp(o),u.childLanes=bp(t,b,o),r.memoizedState=xp,Sl(null,u)):(ti(r),vp(r,C))}var M=t.memoizedState;if(M!==null&&(C=M.dehydrated,C!==null)){if(m)r.flags&256?(ti(r),r.flags&=-257,r=wp(t,r,o)):r.memoizedState!==null?(ni(),r.child=t.child,r.flags|=128,r=null):(ni(),C=u.fallback,h=r.mode,u=Ic({mode:"visible",children:u.children},h),C=Ji(C,h,o,null),C.flags|=2,u.return=r,C.return=r,u.sibling=C,r.child=u,ia(r,t.child,null,o),u=r.child,u.memoizedState=yp(o),u.childLanes=bp(t,b,o),r.memoizedState=xp,r=Sl(null,u));else if(ti(r),tm(C)){if(b=C.nextSibling&&C.nextSibling.dataset,b)var G=b.dgst;b=G,u=Error(i(419)),u.stack="",u.digest=b,pl({value:u,source:null,stack:null}),r=wp(t,r,o)}else if(Bt||Ya(t,r,o,!1),b=(o&t.childLanes)!==0,Bt||b){if(b=yt,b!==null&&(u=Ui(b,o),u!==0&&u!==M.retryLane))throw M.retryLane=u,Xi(t,u),Vn(b,t,u),fp;em(C)||Uc(),r=wp(t,r,o)}else em(C)?(r.flags|=192,r.child=t.child,r=null):(t=M.treeContext,vt=fr(C.nextSibling),hn=r,et=!0,Qs=null,mr=!1,t!==null&&I0(r,t),r=vp(r,u.children),r.flags|=4096);return r}return h?(ni(),C=u.fallback,h=r.mode,M=t.child,G=M.sibling,u=ms(M,{mode:"hidden",children:u.children}),u.subtreeFlags=M.subtreeFlags&65011712,G!==null?C=ms(G,C):(C=Ji(C,h,o,null),C.flags|=2),C.return=r,u.return=r,u.sibling=C,r.child=u,Sl(null,u),u=r.child,C=t.child.memoizedState,C===null?C=yp(o):(h=C.cachePool,h!==null?(M=qt._currentValue,h=h.parent!==M?{parent:M,pool:M}:h):h=L0(),C={baseLanes:C.baseLanes|o,cachePool:h}),u.memoizedState=C,u.childLanes=bp(t,b,o),r.memoizedState=xp,Sl(t.child,u)):(ti(r),o=t.child,t=o.sibling,o=ms(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,t!==null&&(b=r.deletions,b===null?(r.deletions=[t],r.flags|=16):b.push(t)),r.child=o,r.memoizedState=null,o)}function vp(t,r){return r=Ic({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Ic(t,r){return t=Kn(22,t,null,r),t.lanes=0,t}function wp(t,r,o){return ia(r,t.child,null,o),t=vp(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Qg(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),Lh(t.return,r,o)}function Np(t,r,o,u,h,m){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h,treeForkCount:m}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=o,b.tailMode=h,b.treeForkCount=m)}function Yg(t,r,o){var u=r.pendingProps,h=u.revealOrder,m=u.tail;u=u.children;var b=Mt.current,C=(b&2)!==0;if(C?(b=b&1|2,r.flags|=128):b&=1,he(Mt,b),mn(t,r,u,o),u=et?hl:0,!C&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qg(t,o,r);else if(t.tag===19)Qg(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&yc(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),Np(r,!1,h,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&yc(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}Np(r,!0,o,null,m,u);break;case"together":Np(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function vs(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),ii|=r.lanes,(o&r.childLanes)===0)if(t!==null){if(Ya(t,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,o=ms(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=ms(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function kp(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&cc(t)))}function V2(t,r,o){switch(r.tag){case 3:me(r,r.stateNode.containerInfo),Xs(r,qt,t.memoizedState.cache),Zi();break;case 27:case 5:ut(r);break;case 4:me(r,r.stateNode.containerInfo);break;case 10:Xs(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Kh(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(ti(r),r.flags|=128,null):(o&r.child.childLanes)!==0?Kg(t,r,o):(ti(r),t=vs(t,r,o),t!==null?t.sibling:null);ti(r);break;case 19:var h=(t.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(Ya(t,r,o,!1),u=(o&r.childLanes)!==0),h){if(u)return Yg(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),he(Mt,Mt.current),u)break;return null;case 22:return r.lanes=0,qg(t,r,o,r.pendingProps);case 24:Xs(r,qt,t.memoizedState.cache)}return vs(t,r,o)}function Xg(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps)Bt=!0;else{if(!kp(t,o)&&(r.flags&128)===0)return Bt=!1,V2(t,r,o);Bt=(t.flags&131072)!==0}else Bt=!1,et&&(r.flags&1048576)!==0&&T0(r,hl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(t=ra(r.elementType),r.type=t,typeof t=="function")_h(t)?(u=oa(t,u),r.tag=1,r=Wg(null,r,t,u,o)):(r.tag=0,r=gp(null,r,t,u,o));else{if(t!=null){var h=t.$$typeof;if(h===re){r.tag=11,r=Ug(null,r,t,u,o);break e}else if(h===T){r.tag=14,r=Vg(null,r,t,u,o);break e}}throw r=be(t)||t,Error(i(306,r,""))}}return r;case 0:return gp(t,r,r.type,r.pendingProps,o);case 1:return u=r.type,h=oa(u,r.pendingProps),Wg(t,r,u,h,o);case 3:e:{if(me(r,r.stateNode.containerInfo),t===null)throw Error(i(387));u=r.pendingProps;var m=r.memoizedState;h=m.element,$h(t,r),vl(r,u,null,o);var b=r.memoizedState;if(u=b.cache,Xs(r,qt,u),u!==m.cache&&Oh(r,[qt],o,!0),bl(),u=b.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Gg(t,r,u,o);break e}else if(u!==h){h=dr(Error(i(424)),r),pl(h),r=Gg(t,r,u,o);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(vt=fr(t.firstChild),hn=r,et=!0,Qs=null,mr=!0,o=q0(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Zi(),u===h){r=vs(t,r,o);break e}mn(t,r,u,o)}r=r.child}return r;case 26:return Tc(t,r),t===null?(o=ly(r.type,null,r.pendingProps,null))?r.memoizedState=o:et||(o=r.type,t=r.pendingProps,u=Wc(F.current).createElement(o),u[At]=r,u[sn]=t,fn(u,o,t),Vt(u),r.stateNode=u):r.memoizedState=ly(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return ut(r),t===null&&et&&(u=r.stateNode=iy(r.type,r.pendingProps,F.current),hn=r,mr=!0,h=vt,ci(r.type)?(nm=h,vt=fr(u.firstChild)):vt=h),mn(t,r,r.pendingProps.children,o),Tc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&et&&((h=u=vt)&&(u=gN(u,r.type,r.pendingProps,mr),u!==null?(r.stateNode=u,hn=r,vt=fr(u.firstChild),mr=!1,h=!0):h=!1),h||Ys(r)),ut(r),h=r.type,m=r.pendingProps,b=t!==null?t.memoizedProps:null,u=m.children,Xp(h,m)?u=null:b!==null&&Xp(h,b)&&(r.flags|=32),r.memoizedState!==null&&(h=Yh(t,r,A2,null,null,o),Vl._currentValue=h),Tc(t,r),mn(t,r,u,o),r.child;case 6:return t===null&&et&&((t=o=vt)&&(o=xN(o,r.pendingProps,mr),o!==null?(r.stateNode=o,hn=r,vt=null,t=!0):t=!1),t||Ys(r)),null;case 13:return Kg(t,r,o);case 4:return me(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=ia(r,null,u,o):mn(t,r,u,o),r.child;case 11:return Ug(t,r,r.type,r.pendingProps,o);case 7:return mn(t,r,r.pendingProps,o),r.child;case 8:return mn(t,r,r.pendingProps.children,o),r.child;case 12:return mn(t,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,Xs(r,r.type,u.value),mn(t,r,u.children,o),r.child;case 9:return h=r.type._context,u=r.pendingProps.children,ta(r),h=pn(h),u=u(h),r.flags|=1,mn(t,r,u,o),r.child;case 14:return Vg(t,r,r.type,r.pendingProps,o);case 15:return zg(t,r,r.type,r.pendingProps,o);case 19:return Yg(t,r,o);case 31:return U2(t,r,o);case 22:return qg(t,r,o,r.pendingProps);case 24:return ta(r),u=pn(qt),t===null?(h=Vh(),h===null&&(h=yt,m=Fh(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=o),h=m),r.memoizedState={parent:u,cache:h},qh(r),Xs(r,qt,h)):((t.lanes&o)!==0&&($h(t,r),vl(r,null,null,o),bl()),h=t.memoizedState,m=r.memoizedState,h.parent!==u?(h={parent:u,cache:u},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Xs(r,qt,u)):(u=m.cache,Xs(r,qt,u),u!==h.cache&&Oh(r,[qt],o,!0))),mn(t,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function ws(t){t.flags|=4}function jp(t,r,o,u,h){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(jx())t.flags|=8192;else throw sa=mc,zh}else t.flags&=-16777217}function Jg(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!py(r))if(jx())t.flags|=8192;else throw sa=mc,zh}function Ac(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Be():536870912,t.lanes|=r,lo|=r)}function Cl(t,r){if(!et)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function wt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&65011712,u|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function z2(t,r,o){var u=r.pendingProps;switch(Dh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(r),null;case 1:return wt(r),null;case 3:return o=r.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),xs(qt),Ce(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(Qa(r)?ws(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Rh())),wt(r),null;case 26:var h=r.type,m=r.memoizedState;return t===null?(ws(r),m!==null?(wt(r),Jg(r,m)):(wt(r),jp(r,h,null,u,o))):m?m!==t.memoizedState?(ws(r),wt(r),Jg(r,m)):(wt(r),r.flags&=-16777217):(t=t.memoizedProps,t!==u&&ws(r),wt(r),jp(r,h,t,u,o)),null;case 27:if(tn(r),o=F.current,h=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==u&&ws(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return wt(r),null}t=ge.current,Qa(r)?A0(r):(t=iy(h,u,o),r.stateNode=t,ws(r))}return wt(r),null;case 5:if(tn(r),h=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==u&&ws(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return wt(r),null}if(m=ge.current,Qa(r))A0(r);else{var b=Wc(F.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?b.createElement("select",{is:u.is}):b.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?b.createElement(h,{is:u.is}):b.createElement(h)}}m[At]=r,m[sn]=u;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=m;e:switch(fn(m,h,u),h){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ws(r)}}return wt(r),jp(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,o),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==u&&ws(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(i(166));if(t=F.current,Qa(r)){if(t=r.stateNode,o=r.memoizedProps,u=null,h=hn,h!==null)switch(h.tag){case 27:case 5:u=h.memoizedProps}t[At]=r,t=!!(t.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Kx(t.nodeValue,o)),t||Ys(r,!0)}else t=Wc(t).createTextNode(u),t[At]=r,r.stateNode=t}return wt(r),null;case 31:if(o=r.memoizedState,t===null||t.memoizedState!==null){if(u=Qa(r),o!==null){if(t===null){if(!u)throw Error(i(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[At]=r}else Zi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;wt(r),t=!1}else o=Rh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),t=!0;if(!t)return r.flags&256?(Yn(r),r):(Yn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return wt(r),null;case 13:if(u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Qa(r),u!==null&&u.dehydrated!==null){if(t===null){if(!h)throw Error(i(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[At]=r}else Zi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;wt(r),h=!1}else h=Rh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(Yn(r),r):(Yn(r),null)}return Yn(r),(r.flags&128)!==0?(r.lanes=o,r):(o=u!==null,t=t!==null&&t.memoizedState!==null,o&&(u=r.child,h=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(h=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==h&&(u.flags|=2048)),o!==t&&o&&(r.child.flags|=8192),Ac(r,r.updateQueue),wt(r),null);case 4:return Ce(),t===null&&Wp(r.stateNode.containerInfo),wt(r),null;case 10:return xs(r.type),wt(r),null;case 19:if(Q(Mt),u=r.memoizedState,u===null)return wt(r),null;if(h=(r.flags&128)!==0,m=u.rendering,m===null)if(h)Cl(u,!1);else{if(Pt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=yc(t),m!==null){for(r.flags|=128,Cl(u,!1),t=m.updateQueue,r.updateQueue=t,Ac(r,t),r.subtreeFlags=0,t=o,o=r.child;o!==null;)C0(o,t),o=o.sibling;return he(Mt,Mt.current&1|2),et&&fs(r,u.treeForkCount),r.child}t=t.sibling}u.tail!==null&&Y()>Lc&&(r.flags|=128,h=!0,Cl(u,!1),r.lanes=4194304)}else{if(!h)if(t=yc(m),t!==null){if(r.flags|=128,h=!0,t=t.updateQueue,r.updateQueue=t,Ac(r,t),Cl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!et)return wt(r),null}else 2*Y()-u.renderingStartTime>Lc&&o!==536870912&&(r.flags|=128,h=!0,Cl(u,!1),r.lanes=4194304);u.isBackwards?(m.sibling=r.child,r.child=m):(t=u.last,t!==null?t.sibling=m:r.child=m,u.last=m)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=Y(),t.sibling=null,o=Mt.current,he(Mt,h?o&1|2:o&1),et&&fs(r,u.treeForkCount),t):(wt(r),null);case 22:case 23:return Yn(r),Gh(),u=r.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(wt(r),r.subtreeFlags&6&&(r.flags|=8192)):wt(r),o=r.updateQueue,o!==null&&Ac(r,o.retryQueue),o=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),t!==null&&Q(na),null;case 24:return o=null,t!==null&&(o=t.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),xs(qt),wt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function q2(t,r){switch(Dh(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return xs(qt),Ce(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return tn(r),null;case 31:if(r.memoizedState!==null){if(Yn(r),r.alternate===null)throw Error(i(340));Zi()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Yn(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Zi()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Q(Mt),null;case 4:return Ce(),null;case 10:return xs(r.type),null;case 22:case 23:return Yn(r),Gh(),t!==null&&Q(na),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return xs(qt),null;case 25:return null;default:return null}}function Zg(t,r){switch(Dh(r),r.tag){case 3:xs(qt),Ce();break;case 26:case 27:case 5:tn(r);break;case 4:Ce();break;case 31:r.memoizedState!==null&&Yn(r);break;case 13:Yn(r);break;case 19:Q(Mt);break;case 10:xs(r.type);break;case 22:case 23:Yn(r),Gh(),t!==null&&Q(na);break;case 24:xs(qt)}}function El(t,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var h=u.next;o=h;do{if((o.tag&t)===t){u=void 0;var m=o.create,b=o.inst;u=m(),b.destroy=u}o=o.next}while(o!==h)}}catch(C){pt(r,r.return,C)}}function ri(t,r,o){try{var u=r.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var m=h.next;u=m;do{if((u.tag&t)===t){var b=u.inst,C=b.destroy;if(C!==void 0){b.destroy=void 0,h=r;var M=o,G=C;try{G()}catch(se){pt(h,M,se)}}}u=u.next}while(u!==m)}}catch(se){pt(r,r.return,se)}}function ex(t){var r=t.updateQueue;if(r!==null){var o=t.stateNode;try{B0(r,o)}catch(u){pt(t,t.return,u)}}}function tx(t,r,o){o.props=oa(t.type,t.memoizedProps),o.state=t.memoizedState;try{o.componentWillUnmount()}catch(u){pt(t,r,u)}}function _l(t,r){try{var o=t.ref;if(o!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof o=="function"?t.refCleanup=o(u):o.current=u}}catch(h){pt(t,r,h)}}function Zr(t,r){var o=t.ref,u=t.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(h){pt(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(h){pt(t,r,h)}else o.current=null}function nx(t){var r=t.type,o=t.memoizedProps,u=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(h){pt(t,t.return,h)}}function Sp(t,r,o){try{var u=t.stateNode;cN(u,t.type,o,r),u[sn]=r}catch(h){pt(t,t.return,h)}}function rx(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ci(t.type)||t.tag===4}function Cp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ci(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ep(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(t,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(t),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=br));else if(u!==4&&(u===27&&ci(t.type)&&(o=t.stateNode,r=null),t=t.child,t!==null))for(Ep(t,r,o),t=t.sibling;t!==null;)Ep(t,r,o),t=t.sibling}function Dc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(u===27&&ci(t.type)&&(o=t.stateNode),t=t.child,t!==null))for(Dc(t,r,o),t=t.sibling;t!==null;)Dc(t,r,o),t=t.sibling}function sx(t){var r=t.stateNode,o=t.memoizedProps;try{for(var u=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);fn(r,u,o),r[At]=t,r[sn]=o}catch(m){pt(t,t.return,m)}}var Ns=!1,Ht=!1,_p=!1,ix=typeof WeakSet=="function"?WeakSet:Set,on=null;function $2(t,r){if(t=t.containerInfo,Qp=Zc,t=x0(t),wh(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var b=0,C=-1,M=-1,G=0,se=0,oe=t,K=null;t:for(;;){for(var Z;oe!==o||h!==0&&oe.nodeType!==3||(C=b+h),oe!==m||u!==0&&oe.nodeType!==3||(M=b+u),oe.nodeType===3&&(b+=oe.nodeValue.length),(Z=oe.firstChild)!==null;)K=oe,oe=Z;for(;;){if(oe===t)break t;if(K===o&&++G===h&&(C=b),K===m&&++se===u&&(M=b),(Z=oe.nextSibling)!==null)break;oe=K,K=oe.parentNode}oe=Z}o=C===-1||M===-1?null:{start:C,end:M}}else o=null}o=o||{start:0,end:0}}else o=null;for(Yp={focusedElem:t,selectionRange:o},Zc=!1,on=r;on!==null;)if(r=on,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,on=t;else for(;on!==null;){switch(r=on,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(o=0;o<t.length;o++)h=t[o],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,o=r,h=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var je=oa(o.type,h);t=u.getSnapshotBeforeUpdate(je,m),u.__reactInternalSnapshotBeforeUpdate=t}catch(Re){pt(o,o.return,Re)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,o=t.nodeType,o===9)Zp(t);else if(o===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Zp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,on=t;break}on=r.return}}function ax(t,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:js(t,o),u&4&&El(5,o);break;case 1:if(js(t,o),u&4)if(t=o.stateNode,r===null)try{t.componentDidMount()}catch(b){pt(o,o.return,b)}else{var h=oa(o.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(b){pt(o,o.return,b)}}u&64&&ex(o),u&512&&_l(o,o.return);break;case 3:if(js(t,o),u&64&&(t=o.updateQueue,t!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{B0(t,r)}catch(b){pt(o,o.return,b)}}break;case 27:r===null&&u&4&&sx(o);case 26:case 5:js(t,o),r===null&&u&4&&nx(o),u&512&&_l(o,o.return);break;case 12:js(t,o);break;case 31:js(t,o),u&4&&ux(t,o);break;case 13:js(t,o),u&4&&cx(t,o),u&64&&(t=o.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(o=J2.bind(null,o),yN(t,o))));break;case 22:if(u=o.memoizedState!==null||Ns,!u){r=r!==null&&r.memoizedState!==null||Ht,h=Ns;var m=Ht;Ns=u,(Ht=r)&&!m?Ss(t,o,(o.subtreeFlags&8772)!==0):js(t,o),Ns=h,Ht=m}break;case 30:break;default:js(t,o)}}function ox(t){var r=t.alternate;r!==null&&(t.alternate=null,ox(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Da(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ct=null,Ln=!1;function ks(t,r,o){for(o=o.child;o!==null;)lx(t,r,o),o=o.sibling}function lx(t,r,o){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount($n,o)}catch{}switch(o.tag){case 26:Ht||Zr(o,r),ks(t,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ht||Zr(o,r);var u=Ct,h=Ln;ci(o.type)&&(Ct=o.stateNode,Ln=!1),ks(t,r,o),Ol(o.stateNode),Ct=u,Ln=h;break;case 5:Ht||Zr(o,r);case 6:if(u=Ct,h=Ln,Ct=null,ks(t,r,o),Ct=u,Ln=h,Ct!==null)if(Ln)try{(Ct.nodeType===9?Ct.body:Ct.nodeName==="HTML"?Ct.ownerDocument.body:Ct).removeChild(o.stateNode)}catch(m){pt(o,r,m)}else try{Ct.removeChild(o.stateNode)}catch(m){pt(o,r,m)}break;case 18:Ct!==null&&(Ln?(t=Ct,ey(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,o.stateNode),xo(t)):ey(Ct,o.stateNode));break;case 4:u=Ct,h=Ln,Ct=o.stateNode.containerInfo,Ln=!0,ks(t,r,o),Ct=u,Ln=h;break;case 0:case 11:case 14:case 15:ri(2,o,r),Ht||ri(4,o,r),ks(t,r,o);break;case 1:Ht||(Zr(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&tx(o,r,u)),ks(t,r,o);break;case 21:ks(t,r,o);break;case 22:Ht=(u=Ht)||o.memoizedState!==null,ks(t,r,o),Ht=u;break;default:ks(t,r,o)}}function ux(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{xo(t)}catch(o){pt(r,r.return,o)}}}function cx(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{xo(t)}catch(o){pt(r,r.return,o)}}function B2(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new ix),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new ix),r;default:throw Error(i(435,t.tag))}}function Pc(t,r){var o=B2(t);r.forEach(function(u){if(!o.has(u)){o.add(u);var h=Z2.bind(null,t,u);u.then(h,h)}})}function On(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u],m=t,b=r,C=b;e:for(;C!==null;){switch(C.tag){case 27:if(ci(C.type)){Ct=C.stateNode,Ln=!1;break e}break;case 5:Ct=C.stateNode,Ln=!1;break e;case 3:case 4:Ct=C.stateNode.containerInfo,Ln=!0;break e}C=C.return}if(Ct===null)throw Error(i(160));lx(m,b,h),Ct=null,Ln=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)dx(r,t),r=r.sibling}var Cr=null;function dx(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:On(r,t),Fn(t),u&4&&(ri(3,t,t.return),El(3,t),ri(5,t,t.return));break;case 1:On(r,t),Fn(t),u&512&&(Ht||o===null||Zr(o,o.return)),u&64&&Ns&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(o=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var h=Cr;if(On(r,t),Fn(t),u&512&&(Ht||o===null||Zr(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=t.memoizedState,o===null)if(u===null)if(t.stateNode===null){e:{u=t.type,o=t.memoizedProps,h=h.ownerDocument||h;t:switch(u){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Vr]||m[At]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(u),h.head.insertBefore(m,h.querySelector("head > title"))),fn(m,u,o),m[At]=t,Vt(m),u=m;break e;case"link":var b=dy("link","href",h).get(u+(o.href||""));if(b){for(var C=0;C<b.length;C++)if(m=b[C],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(C,1);break t}}m=h.createElement(u),fn(m,u,o),h.head.appendChild(m);break;case"meta":if(b=dy("meta","content",h).get(u+(o.content||""))){for(C=0;C<b.length;C++)if(m=b[C],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(C,1);break t}}m=h.createElement(u),fn(m,u,o),h.head.appendChild(m);break;default:throw Error(i(468,u))}m[At]=t,Vt(m),u=m}t.stateNode=u}else hy(h,t.type,t.stateNode);else t.stateNode=cy(h,u,t.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?hy(h,t.type,t.stateNode):cy(h,u,t.memoizedProps)):u===null&&t.stateNode!==null&&Sp(t,t.memoizedProps,o.memoizedProps)}break;case 27:On(r,t),Fn(t),u&512&&(Ht||o===null||Zr(o,o.return)),o!==null&&u&4&&Sp(t,t.memoizedProps,o.memoizedProps);break;case 5:if(On(r,t),Fn(t),u&512&&(Ht||o===null||Zr(o,o.return)),t.flags&32){h=t.stateNode;try{Mn(h,"")}catch(je){pt(t,t.return,je)}}u&4&&t.stateNode!=null&&(h=t.memoizedProps,Sp(t,h,o!==null?o.memoizedProps:h)),u&1024&&(_p=!0);break;case 6:if(On(r,t),Fn(t),u&4){if(t.stateNode===null)throw Error(i(162));u=t.memoizedProps,o=t.stateNode;try{o.nodeValue=u}catch(je){pt(t,t.return,je)}}break;case 3:if(Qc=null,h=Cr,Cr=Gc(r.containerInfo),On(r,t),Cr=h,Fn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{xo(r.containerInfo)}catch(je){pt(t,t.return,je)}_p&&(_p=!1,hx(t));break;case 4:u=Cr,Cr=Gc(t.stateNode.containerInfo),On(r,t),Fn(t),Cr=u;break;case 12:On(r,t),Fn(t);break;case 31:On(r,t),Fn(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Pc(t,u)));break;case 13:On(r,t),Fn(t),t.child.flags&8192&&t.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Mc=Y()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Pc(t,u)));break;case 22:h=t.memoizedState!==null;var M=o!==null&&o.memoizedState!==null,G=Ns,se=Ht;if(Ns=G||h,Ht=se||M,On(r,t),Ht=se,Ns=G,Fn(t),u&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(o===null||M||Ns||Ht||la(t)),o=null,r=t;;){if(r.tag===5||r.tag===26){if(o===null){M=o=r;try{if(m=M.stateNode,h)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{C=M.stateNode;var oe=M.memoizedProps.style,K=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;C.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(je){pt(M,M.return,je)}}}else if(r.tag===6){if(o===null){M=r;try{M.stateNode.nodeValue=h?"":M.memoizedProps}catch(je){pt(M,M.return,je)}}}else if(r.tag===18){if(o===null){M=r;try{var Z=M.stateNode;h?ty(Z,!0):ty(M.stateNode,!1)}catch(je){pt(M,M.return,je)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=t.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Pc(t,o))));break;case 19:On(r,t),Fn(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Pc(t,u)));break;case 30:break;case 21:break;default:On(r,t),Fn(t)}}function Fn(t){var r=t.flags;if(r&2){try{for(var o,u=t.return;u!==null;){if(rx(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var h=o.stateNode,m=Cp(t);Dc(t,m,h);break;case 5:var b=o.stateNode;o.flags&32&&(Mn(b,""),o.flags&=-33);var C=Cp(t);Dc(t,C,b);break;case 3:case 4:var M=o.stateNode.containerInfo,G=Cp(t);Ep(t,G,M);break;default:throw Error(i(161))}}catch(se){pt(t,t.return,se)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function hx(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;hx(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function js(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)ax(t,r.alternate,r),r=r.sibling}function la(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:ri(4,r,r.return),la(r);break;case 1:Zr(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&tx(r,r.return,o),la(r);break;case 27:Ol(r.stateNode);case 26:case 5:Zr(r,r.return),la(r);break;case 22:r.memoizedState===null&&la(r);break;case 30:la(r);break;default:la(r)}t=t.sibling}}function Ss(t,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,h=t,m=r,b=m.flags;switch(m.tag){case 0:case 11:case 15:Ss(h,m,o),El(4,m);break;case 1:if(Ss(h,m,o),u=m,h=u.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(G){pt(u,u.return,G)}if(u=m,h=u.updateQueue,h!==null){var C=u.stateNode;try{var M=h.shared.hiddenCallbacks;if(M!==null)for(h.shared.hiddenCallbacks=null,h=0;h<M.length;h++)$0(M[h],C)}catch(G){pt(u,u.return,G)}}o&&b&64&&ex(m),_l(m,m.return);break;case 27:sx(m);case 26:case 5:Ss(h,m,o),o&&u===null&&b&4&&nx(m),_l(m,m.return);break;case 12:Ss(h,m,o);break;case 31:Ss(h,m,o),o&&b&4&&ux(h,m);break;case 13:Ss(h,m,o),o&&b&4&&cx(h,m);break;case 22:m.memoizedState===null&&Ss(h,m,o),_l(m,m.return);break;case 30:break;default:Ss(h,m,o)}r=r.sibling}}function Tp(t,r){var o=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==o&&(t!=null&&t.refCount++,o!=null&&ml(o))}function Ip(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ml(t))}function Er(t,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)px(t,r,o,u),r=r.sibling}function px(t,r,o,u){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Er(t,r,o,u),h&2048&&El(9,r);break;case 1:Er(t,r,o,u);break;case 3:Er(t,r,o,u),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ml(t)));break;case 12:if(h&2048){Er(t,r,o,u),t=r.stateNode;try{var m=r.memoizedProps,b=m.id,C=m.onPostCommit;typeof C=="function"&&C(b,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){pt(r,r.return,M)}}else Er(t,r,o,u);break;case 31:Er(t,r,o,u);break;case 13:Er(t,r,o,u);break;case 23:break;case 22:m=r.stateNode,b=r.alternate,r.memoizedState!==null?m._visibility&2?Er(t,r,o,u):Tl(t,r):m._visibility&2?Er(t,r,o,u):(m._visibility|=2,io(t,r,o,u,(r.subtreeFlags&10256)!==0||!1)),h&2048&&Tp(b,r);break;case 24:Er(t,r,o,u),h&2048&&Ip(r.alternate,r);break;default:Er(t,r,o,u)}}function io(t,r,o,u,h){for(h=h&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,b=r,C=o,M=u,G=b.flags;switch(b.tag){case 0:case 11:case 15:io(m,b,C,M,h),El(8,b);break;case 23:break;case 22:var se=b.stateNode;b.memoizedState!==null?se._visibility&2?io(m,b,C,M,h):Tl(m,b):(se._visibility|=2,io(m,b,C,M,h)),h&&G&2048&&Tp(b.alternate,b);break;case 24:io(m,b,C,M,h),h&&G&2048&&Ip(b.alternate,b);break;default:io(m,b,C,M,h)}r=r.sibling}}function Tl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=t,u=r,h=u.flags;switch(u.tag){case 22:Tl(o,u),h&2048&&Tp(u.alternate,u);break;case 24:Tl(o,u),h&2048&&Ip(u.alternate,u);break;default:Tl(o,u)}r=r.sibling}}var Il=8192;function ao(t,r,o){if(t.subtreeFlags&Il)for(t=t.child;t!==null;)mx(t,r,o),t=t.sibling}function mx(t,r,o){switch(t.tag){case 26:ao(t,r,o),t.flags&Il&&t.memoizedState!==null&&IN(o,Cr,t.memoizedState,t.memoizedProps);break;case 5:ao(t,r,o);break;case 3:case 4:var u=Cr;Cr=Gc(t.stateNode.containerInfo),ao(t,r,o),Cr=u;break;case 22:t.memoizedState===null&&(u=t.alternate,u!==null&&u.memoizedState!==null?(u=Il,Il=16777216,ao(t,r,o),Il=u):ao(t,r,o));break;default:ao(t,r,o)}}function fx(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Al(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];on=u,xx(u,t)}fx(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)gx(t),t=t.sibling}function gx(t){switch(t.tag){case 0:case 11:case 15:Al(t),t.flags&2048&&ri(9,t,t.return);break;case 3:Al(t);break;case 12:Al(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Rc(t)):Al(t);break;default:Al(t)}}function Rc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];on=u,xx(u,t)}fx(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:ri(8,r,r.return),Rc(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Rc(r));break;default:Rc(r)}t=t.sibling}}function xx(t,r){for(;on!==null;){var o=on;switch(o.tag){case 0:case 11:case 15:ri(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ml(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,on=u;else e:for(o=t;on!==null;){u=on;var h=u.sibling,m=u.return;if(ox(u),u===o){on=null;break e}if(h!==null){h.return=m,on=h;break e}on=m}}}var H2={getCacheForType:function(t){var r=pn(qt),o=r.data.get(t);return o===void 0&&(o=t(),r.data.set(t,o)),o},cacheSignal:function(){return pn(qt).controller.signal}},W2=typeof WeakMap=="function"?WeakMap:Map,at=0,yt=null,Ge=null,Qe=0,ht=0,Xn=null,si=!1,oo=!1,Ap=!1,Cs=0,Pt=0,ii=0,ua=0,Dp=0,Jn=0,lo=0,Dl=null,Un=null,Pp=!1,Mc=0,yx=0,Lc=1/0,Oc=null,ai=null,Jt=0,oi=null,uo=null,Es=0,Rp=0,Mp=null,bx=null,Pl=0,Lp=null;function Zn(){return(at&2)!==0&&Qe!==0?Qe&-Qe:B.T!==null?qp():qe()}function vx(){if(Jn===0)if((Qe&536870912)===0||et){var t=Lr;Lr<<=1,(Lr&3932160)===0&&(Lr=262144),Jn=t}else Jn=536870912;return t=Qn.current,t!==null&&(t.flags|=32),Jn}function Vn(t,r,o){(t===yt&&(ht===2||ht===9)||t.cancelPendingCommit!==null)&&(co(t,0),li(t,Qe,Jn,!1)),cn(t,o),((at&2)===0||t!==yt)&&(t===yt&&((at&2)===0&&(ua|=o),Pt===4&&li(t,Qe,Jn,!1)),es(t))}function wx(t,r,o){if((at&6)!==0)throw Error(i(327));var u=!o&&(r&127)===0&&(r&t.expiredLanes)===0||pe(t,r),h=u?Q2(t,r):Fp(t,r,!0),m=u;do{if(h===0){oo&&!u&&li(t,r,0,!1);break}else{if(o=t.current.alternate,m&&!G2(o)){h=Fp(t,r,!1),m=!1;continue}if(h===2){if(m=r,t.errorRecoveryDisabledLanes&m)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var C=t;h=Dl;var M=C.current.memoizedState.isDehydrated;if(M&&(co(C,b).flags|=256),b=Fp(C,b,!1),b!==2){if(Ap&&!M){C.errorRecoveryDisabledLanes|=m,ua|=m,h=4;break e}m=Un,Un=h,m!==null&&(Un===null?Un=m:Un.push.apply(Un,m))}h=b}if(m=!1,h!==2)continue}}if(h===1){co(t,0),li(t,r,0,!0);break}e:{switch(u=t,m=h,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:li(u,r,Jn,!si);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(h=Mc+300-Y(),10<h)){if(li(u,r,Jn,!si),fe(u,0,!0)!==0)break e;Es=r,u.timeoutHandle=Jx(Nx.bind(null,u,o,Un,Oc,Pp,r,Jn,ua,lo,si,m,"Throttled",-0,0),h);break e}Nx(u,o,Un,Oc,Pp,r,Jn,ua,lo,si,m,null,-0,0)}}break}while(!0);es(t)}function Nx(t,r,o,u,h,m,b,C,M,G,se,oe,K,Z){if(t.timeoutHandle=-1,oe=r.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:br},mx(r,m,oe);var je=(m&62914560)===m?Mc-Y():(m&4194048)===m?yx-Y():0;if(je=AN(oe,je),je!==null){Es=m,t.cancelPendingCommit=je(Ix.bind(null,t,r,m,o,u,h,b,C,M,se,oe,null,K,Z)),li(t,m,b,!G);return}}Ix(t,r,m,o,u,h,b,C,M)}function G2(t){for(var r=t;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var h=o[u],m=h.getSnapshot;h=h.value;try{if(!Gn(m(),h))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function li(t,r,o,u){r&=~Dp,r&=~ua,t.suspendedLanes|=r,t.pingedLanes&=~r,u&&(t.warmLanes|=r),u=t.expirationTimes;for(var h=r;0<h;){var m=31-Tt(h),b=1<<m;u[m]=-1,h&=~b}o!==0&&Xt(t,o,r)}function Fc(){return(at&6)===0?(Rl(0),!1):!0}function Op(){if(Ge!==null){if(ht===0)var t=Ge.return;else t=Ge,gs=ea=null,Zh(t),eo=null,gl=0,t=Ge;for(;t!==null;)Zg(t.alternate,t),t=t.return;Ge=null}}function co(t,r){var o=t.timeoutHandle;o!==-1&&(t.timeoutHandle=-1,pN(o)),o=t.cancelPendingCommit,o!==null&&(t.cancelPendingCommit=null,o()),Es=0,Op(),yt=t,Ge=o=ms(t.current,null),Qe=r,ht=0,Xn=null,si=!1,oo=pe(t,r),Ap=!1,lo=Jn=Dp=ua=ii=Pt=0,Un=Dl=null,Pp=!1,(r&8)!==0&&(r|=r&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=r;0<u;){var h=31-Tt(u),m=1<<h;r|=t[h],u&=~m}return Cs=r,ic(),o}function kx(t,r){$e=null,B.H=jl,r===Za||r===pc?(r=U0(),ht=3):r===zh?(r=U0(),ht=4):ht=r===fp?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Xn=r,Ge===null&&(Pt=1,Ec(t,dr(r,t.current)))}function jx(){var t=Qn.current;return t===null?!0:(Qe&4194048)===Qe?Sr===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?t===Sr:!1}function Sx(){var t=B.H;return B.H=jl,t===null?jl:t}function Cx(){var t=B.A;return B.A=H2,t}function Uc(){Pt=4,si||(Qe&4194048)!==Qe&&Qn.current!==null||(oo=!0),(ii&134217727)===0&&(ua&134217727)===0||yt===null||li(yt,Qe,Jn,!1)}function Fp(t,r,o){var u=at;at|=2;var h=Sx(),m=Cx();(yt!==t||Qe!==r)&&(Oc=null,co(t,r)),r=!1;var b=Pt;e:do try{if(ht!==0&&Ge!==null){var C=Ge,M=Xn;switch(ht){case 8:Op(),b=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(r=!0);var G=ht;if(ht=0,Xn=null,ho(t,C,M,G),o&&oo){b=0;break e}break;default:G=ht,ht=0,Xn=null,ho(t,C,M,G)}}K2(),b=Pt;break}catch(se){kx(t,se)}while(!0);return r&&t.shellSuspendCounter++,gs=ea=null,at=u,B.H=h,B.A=m,Ge===null&&(yt=null,Qe=0,ic()),b}function K2(){for(;Ge!==null;)Ex(Ge)}function Q2(t,r){var o=at;at|=2;var u=Sx(),h=Cx();yt!==t||Qe!==r?(Oc=null,Lc=Y()+500,co(t,r)):oo=pe(t,r);e:do try{if(ht!==0&&Ge!==null){r=Ge;var m=Xn;t:switch(ht){case 1:ht=0,Xn=null,ho(t,r,m,1);break;case 2:case 9:if(O0(m)){ht=0,Xn=null,_x(r);break}r=function(){ht!==2&&ht!==9||yt!==t||(ht=7),es(t)},m.then(r,r);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:O0(m)?(ht=0,Xn=null,_x(r)):(ht=0,Xn=null,ho(t,r,m,7));break;case 5:var b=null;switch(Ge.tag){case 26:b=Ge.memoizedState;case 5:case 27:var C=Ge;if(b?py(b):C.stateNode.complete){ht=0,Xn=null;var M=C.sibling;if(M!==null)Ge=M;else{var G=C.return;G!==null?(Ge=G,Vc(G)):Ge=null}break t}}ht=0,Xn=null,ho(t,r,m,5);break;case 6:ht=0,Xn=null,ho(t,r,m,6);break;case 8:Op(),Pt=6;break e;default:throw Error(i(462))}}Y2();break}catch(se){kx(t,se)}while(!0);return gs=ea=null,B.H=u,B.A=h,at=o,Ge!==null?0:(yt=null,Qe=0,ic(),Pt)}function Y2(){for(;Ge!==null&&!Fi();)Ex(Ge)}function Ex(t){var r=Xg(t.alternate,t,Cs);t.memoizedProps=t.pendingProps,r===null?Vc(t):Ge=r}function _x(t){var r=t,o=r.alternate;switch(r.tag){case 15:case 0:r=Hg(o,r,r.pendingProps,r.type,void 0,Qe);break;case 11:r=Hg(o,r,r.pendingProps,r.type.render,r.ref,Qe);break;case 5:Zh(r);default:Zg(o,r),r=Ge=C0(r,Cs),r=Xg(o,r,Cs)}t.memoizedProps=t.pendingProps,r===null?Vc(t):Ge=r}function ho(t,r,o,u){gs=ea=null,Zh(r),eo=null,gl=0;var h=r.return;try{if(F2(t,h,r,o,Qe)){Pt=1,Ec(t,dr(o,t.current)),Ge=null;return}}catch(m){if(h!==null)throw Ge=h,m;Pt=1,Ec(t,dr(o,t.current)),Ge=null;return}r.flags&32768?(et||u===1?t=!0:oo||(Qe&536870912)!==0?t=!1:(si=t=!0,(u===2||u===9||u===3||u===6)&&(u=Qn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Tx(r,t)):Vc(r)}function Vc(t){var r=t;do{if((r.flags&32768)!==0){Tx(r,si);return}t=r.return;var o=z2(r.alternate,r,Cs);if(o!==null){Ge=o;return}if(r=r.sibling,r!==null){Ge=r;return}Ge=r=t}while(r!==null);Pt===0&&(Pt=5)}function Tx(t,r){do{var o=q2(t.alternate,t);if(o!==null){o.flags&=32767,Ge=o;return}if(o=t.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(t=t.sibling,t!==null)){Ge=t;return}Ge=t=o}while(t!==null);Pt=6,Ge=null}function Ix(t,r,o,u,h,m,b,C,M){t.cancelPendingCommit=null;do zc();while(Jt!==0);if((at&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=Ch,rn(t,o,m,b,C,M),t===yt&&(Ge=yt=null,Qe=0),uo=r,oi=t,Es=o,Rp=m,Mp=h,bx=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,eN(En,function(){return Mx(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=B.T,B.T=null,h=de.p,de.p=2,b=at,at|=4;try{$2(t,r,o)}finally{at=b,de.p=h,B.T=u}}Jt=1,Ax(),Dx(),Px()}}function Ax(){if(Jt===1){Jt=0;var t=oi,r=uo,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=B.T,B.T=null;var u=de.p;de.p=2;var h=at;at|=4;try{dx(r,t);var m=Yp,b=x0(t.containerInfo),C=m.focusedElem,M=m.selectionRange;if(b!==C&&C&&C.ownerDocument&&g0(C.ownerDocument.documentElement,C)){if(M!==null&&wh(C)){var G=M.start,se=M.end;if(se===void 0&&(se=G),"selectionStart"in C)C.selectionStart=G,C.selectionEnd=Math.min(se,C.value.length);else{var oe=C.ownerDocument||document,K=oe&&oe.defaultView||window;if(K.getSelection){var Z=K.getSelection(),je=C.textContent.length,Re=Math.min(M.start,je),xt=M.end===void 0?Re:Math.min(M.end,je);!Z.extend&&Re>xt&&(b=xt,xt=Re,Re=b);var q=f0(C,Re),U=f0(C,xt);if(q&&U&&(Z.rangeCount!==1||Z.anchorNode!==q.node||Z.anchorOffset!==q.offset||Z.focusNode!==U.node||Z.focusOffset!==U.offset)){var W=oe.createRange();W.setStart(q.node,q.offset),Z.removeAllRanges(),Re>xt?(Z.addRange(W),Z.extend(U.node,U.offset)):(W.setEnd(U.node,U.offset),Z.addRange(W))}}}}for(oe=[],Z=C;Z=Z.parentNode;)Z.nodeType===1&&oe.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<oe.length;C++){var ie=oe[C];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Zc=!!Qp,Yp=Qp=null}finally{at=h,de.p=u,B.T=o}}t.current=r,Jt=2}}function Dx(){if(Jt===2){Jt=0;var t=oi,r=uo,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=B.T,B.T=null;var u=de.p;de.p=2;var h=at;at|=4;try{ax(t,r.alternate,r)}finally{at=h,de.p=u,B.T=o}}Jt=3}}function Px(){if(Jt===4||Jt===3){Jt=0,Rr();var t=oi,r=uo,o=Es,u=bx;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Jt=5:(Jt=0,uo=oi=null,Rx(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ai=null),ir(o),r=r.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot($n,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=B.T,h=de.p,de.p=2,B.T=null;try{for(var m=t.onRecoverableError,b=0;b<u.length;b++){var C=u[b];m(C.value,{componentStack:C.stack})}}finally{B.T=r,de.p=h}}(Es&3)!==0&&zc(),es(t),h=t.pendingLanes,(o&261930)!==0&&(h&42)!==0?t===Lp?Pl++:(Pl=0,Lp=t):Pl=0,Rl(0)}}function Rx(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,ml(r)))}function zc(){return Ax(),Dx(),Px(),Mx()}function Mx(){if(Jt!==5)return!1;var t=oi,r=Rp;Rp=0;var o=ir(Es),u=B.T,h=de.p;try{de.p=32>o?32:o,B.T=null,o=Mp,Mp=null;var m=oi,b=Es;if(Jt=0,uo=oi=null,Es=0,(at&6)!==0)throw Error(i(331));var C=at;if(at|=4,gx(m.current),px(m,m.current,b,o),at=C,Rl(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot($n,m)}catch{}return!0}finally{de.p=h,B.T=u,Rx(t,r)}}function Lx(t,r,o){r=dr(o,r),r=mp(t.stateNode,r,2),t=ei(t,r,2),t!==null&&(cn(t,2),es(t))}function pt(t,r,o){if(t.tag===3)Lx(t,t,o);else for(;r!==null;){if(r.tag===3){Lx(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ai===null||!ai.has(u))){t=dr(o,t),o=Og(2),u=ei(r,o,2),u!==null&&(Fg(o,u,r,t),cn(u,2),es(u));break}}r=r.return}}function Up(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new W2;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(Ap=!0,h.add(o),t=X2.bind(null,t,r,o),r.then(t,t))}function X2(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),t.pingedLanes|=t.suspendedLanes&o,t.warmLanes&=~o,yt===t&&(Qe&o)===o&&(Pt===4||Pt===3&&(Qe&62914560)===Qe&&300>Y()-Mc?(at&2)===0&&co(t,0):Dp|=o,lo===Qe&&(lo=0)),es(t)}function Ox(t,r){r===0&&(r=Be()),t=Xi(t,r),t!==null&&(cn(t,r),es(t))}function J2(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),Ox(t,o)}function Z2(t,r){var o=0;switch(t.tag){case 31:case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(r),Ox(t,o)}function eN(t,r){return Et(t,r)}var qc=null,po=null,Vp=!1,$c=!1,zp=!1,ui=0;function es(t){t!==po&&t.next===null&&(po===null?qc=po=t:po=po.next=t),$c=!0,Vp||(Vp=!0,nN())}function Rl(t,r){if(!zp&&$c){zp=!0;do for(var o=!1,u=qc;u!==null;){if(t!==0){var h=u.pendingLanes;if(h===0)var m=0;else{var b=u.suspendedLanes,C=u.pingedLanes;m=(1<<31-Tt(42|t)+1)-1,m&=h&~(b&~C),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,zx(u,m))}else m=Qe,m=fe(u,u===yt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||pe(u,m)||(o=!0,zx(u,m));u=u.next}while(o);zp=!1}}function tN(){Fx()}function Fx(){$c=Vp=!1;var t=0;ui!==0&&hN()&&(t=ui);for(var r=Y(),o=null,u=qc;u!==null;){var h=u.next,m=Ux(u,r);m===0?(u.next=null,o===null?qc=h:o.next=h,h===null&&(po=o)):(o=u,(t!==0||(m&3)!==0)&&($c=!0)),u=h}Jt!==0&&Jt!==5||Rl(t),ui!==0&&(ui=0)}function Ux(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var b=31-Tt(m),C=1<<b,M=h[b];M===-1?((C&o)===0||(C&u)!==0)&&(h[b]=_e(C,r)):M<=r&&(t.expiredLanes|=C),m&=~C}if(r=yt,o=Qe,o=fe(t,t===r?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,o===0||t===r&&(ht===2||ht===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&rr(u),t.callbackNode=null,t.callbackPriority=0;if((o&3)===0||pe(t,o)){if(r=o&-o,r===t.callbackPriority)return r;switch(u!==null&&rr(u),ir(o)){case 2:case 8:o=_t;break;case 32:o=En;break;case 268435456:o=_n;break;default:o=En}return u=Vx.bind(null,t),o=Et(o,u),t.callbackPriority=r,t.callbackNode=o,r}return u!==null&&u!==null&&rr(u),t.callbackPriority=2,t.callbackNode=null,2}function Vx(t,r){if(Jt!==0&&Jt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var o=t.callbackNode;if(zc()&&t.callbackNode!==o)return null;var u=Qe;return u=fe(t,t===yt?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(wx(t,u,r),Ux(t,Y()),t.callbackNode!=null&&t.callbackNode===o?Vx.bind(null,t):null)}function zx(t,r){if(zc())return null;wx(t,r,!0)}function nN(){mN(function(){(at&6)!==0?Et(rt,tN):Fx()})}function qp(){if(ui===0){var t=Xa;t===0&&(t=sr,sr<<=1,(sr&261888)===0&&(sr=256)),ui=t}return ui}function qx(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:La(""+t)}function $x(t,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,t.id&&o.setAttribute("form",t.id),r.parentNode.insertBefore(o,r),t=new FormData(t),o.parentNode.removeChild(o),t}function rN(t,r,o,u,h){if(r==="submit"&&o&&o.stateNode===h){var m=qx((h[sn]||null).action),b=u.submitter;b&&(r=(r=b[sn]||null)?qx(r.formAction):b.getAttribute("formAction"),r!==null&&(m=r,b=null));var C=new Kr("action","action",null,u,h);t.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ui!==0){var M=b?$x(h,b):new FormData(h);lp(o,{pending:!0,data:M,method:h.method,action:m},null,M)}}else typeof m=="function"&&(C.preventDefault(),M=b?$x(h,b):new FormData(h),lp(o,{pending:!0,data:M,method:h.method,action:m},m,M))},currentTarget:h}]})}}for(var $p=0;$p<Sh.length;$p++){var Bp=Sh[$p],sN=Bp.toLowerCase(),iN=Bp[0].toUpperCase()+Bp.slice(1);jr(sN,"on"+iN)}jr(v0,"onAnimationEnd"),jr(w0,"onAnimationIteration"),jr(N0,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(w2,"onTransitionRun"),jr(N2,"onTransitionStart"),jr(k2,"onTransitionCancel"),jr(k0,"onTransitionEnd"),Br("onMouseEnter",["mouseout","mouseover"]),Br("onMouseLeave",["mouseout","mouseover"]),Br("onPointerEnter",["pointerout","pointerover"]),Br("onPointerLeave",["pointerout","pointerover"]),$r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$r("onBeforeInput",["compositionend","keypress","textInput","paste"]),$r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ml));function Bx(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var m=void 0;if(r)for(var b=u.length-1;0<=b;b--){var C=u[b],M=C.instance,G=C.currentTarget;if(C=C.listener,M!==m&&h.isPropagationStopped())break e;m=C,h.currentTarget=G;try{m(h)}catch(se){sc(se)}h.currentTarget=null,m=M}else for(b=0;b<u.length;b++){if(C=u[b],M=C.instance,G=C.currentTarget,C=C.listener,M!==m&&h.isPropagationStopped())break e;m=C,h.currentTarget=G;try{m(h)}catch(se){sc(se)}h.currentTarget=null,m=M}}}}function Ke(t,r){var o=r[Aa];o===void 0&&(o=r[Aa]=new Set);var u=t+"__bubble";o.has(u)||(Hx(r,t,2,!1),o.add(u))}function Hp(t,r,o){var u=0;r&&(u|=4),Hx(o,t,u,r)}var Bc="_reactListening"+Math.random().toString(36).slice(2);function Wp(t){if(!t[Bc]){t[Bc]=!0,Go.forEach(function(o){o!=="selectionchange"&&(aN.has(o)||Hp(o,!1,t),Hp(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Bc]||(r[Bc]=!0,Hp("selectionchange",!1,r))}}function Hx(t,r,o,u){switch(vy(r)){case 2:var h=RN;break;case 8:h=MN;break;default:h=om}o=h.bind(null,r,o,t),h=void 0,!$i||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function Gp(t,r,o,u,h){var m=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var C=u.stateNode.containerInfo;if(C===h)break;if(b===4)for(b=u.return;b!==null;){var M=b.tag;if((M===3||M===4)&&b.stateNode.containerInfo===h)return;b=b.return}for(;C!==null;){if(b=zr(C),b===null)return;if(M=b.tag,M===5||M===6||M===26||M===27){u=m=b;continue e}C=C.parentNode}}u=u.return}Bs(function(){var G=m,se=or(o),oe=[];e:{var K=j0.get(t);if(K!==void 0){var Z=Kr,je=t;switch(t){case"keypress":if(Hi(o)===0)break e;case"keydown":case"keyup":Z=tc;break;case"focusin":je="focus",Z=Gi;break;case"focusout":je="blur",Z=Gi;break;case"beforeblur":case"afterblur":Z=Gi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=al;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Wu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=y;break;case v0:case w0:case N0:Z=Ku;break;case k0:Z=I;break;case"scroll":case"scrollend":Z=il;break;case"wheel":Z=J;break;case"copy":case"cut":case"paste":Z=Qu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=hs;break;case"toggle":case"beforetoggle":Z=He}var Re=(r&4)!==0,xt=!Re&&(t==="scroll"||t==="scrollend"),q=Re?K!==null?K+"Capture":null:K;Re=[];for(var U=G,W;U!==null;){var ie=U;if(W=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||W===null||q===null||(ie=vr(U,q),ie!=null&&Re.push(Ll(U,ie,W))),xt)break;U=U.return}0<Re.length&&(K=new Z(K,je,null,o,se),oe.push({event:K,listeners:Re}))}}if((r&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",K&&o!==nl&&(je=o.relatedTarget||o.fromElement)&&(zr(je)||je[Ur]))break e;if((Z||K)&&(K=se.window===se?se:(K=se.ownerDocument)?K.defaultView||K.parentWindow:window,Z?(je=o.relatedTarget||o.toElement,Z=G,je=je?zr(je):null,je!==null&&(xt=c(je),Re=je.tag,je!==xt||Re!==5&&Re!==27&&Re!==6)&&(je=null)):(Z=null,je=G),Z!==je)){if(Re=al,ie="onMouseLeave",q="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(Re=hs,ie="onPointerLeave",q="onPointerEnter",U="pointer"),xt=Z==null?K:Bn(Z),W=je==null?K:Bn(je),K=new Re(ie,U+"leave",Z,o,se),K.target=xt,K.relatedTarget=W,ie=null,zr(se)===G&&(Re=new Re(q,U+"enter",je,o,se),Re.target=W,Re.relatedTarget=xt,ie=Re),xt=ie,Z&&je)t:{for(Re=oN,q=Z,U=je,W=0,ie=q;ie;ie=Re(ie))W++;ie=0;for(var Te=U;Te;Te=Re(Te))ie++;for(;0<W-ie;)q=Re(q),W--;for(;0<ie-W;)U=Re(U),ie--;for(;W--;){if(q===U||U!==null&&q===U.alternate){Re=q;break t}q=Re(q),U=Re(U)}Re=null}else Re=null;Z!==null&&Wx(oe,K,Z,Re,!1),je!==null&&xt!==null&&Wx(oe,xt,je,Re,!0)}}e:{if(K=G?Bn(G):window,Z=K.nodeName&&K.nodeName.toLowerCase(),Z==="select"||Z==="input"&&K.type==="file")var st=u0;else if(o0(K))if(c0)st=y2;else{st=g2;var Se=f2}else Z=K.nodeName,!Z||Z.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&Ma(G.elementType)&&(st=u0):st=x2;if(st&&(st=st(t,G))){l0(oe,st,o,se);break e}Se&&Se(t,K,G),t==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&Zo(K,"number",K.value)}switch(Se=G?Bn(G):window,t){case"focusin":(o0(Se)||Se.contentEditable==="true")&&($a=Se,Nh=G,dl=null);break;case"focusout":dl=Nh=$a=null;break;case"mousedown":kh=!0;break;case"contextmenu":case"mouseup":case"dragend":kh=!1,y0(oe,o,se);break;case"selectionchange":if(v2)break;case"keydown":case"keyup":y0(oe,o,se)}var We;if(dt)e:{switch(t){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else qa?Ki(t,o)&&(Ye="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Ye="onCompositionStart");Ye&&(ps&&o.locale!=="ko"&&(qa||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&qa&&(We=sl()):(Gr=se,rl="value"in Gr?Gr.value:Gr.textContent,qa=!0)),Se=Hc(G,Ye),0<Se.length&&(Ye=new Yr(Ye,t,null,o,se),oe.push({event:Ye,listeners:Se}),We?Ye.data=We:(We=za(o),We!==null&&(Ye.data=We)))),(We=ur?d2(t,o):h2(t,o))&&(Ye=Hc(G,"onBeforeInput"),0<Ye.length&&(Se=new Yr("onBeforeInput","beforeinput",null,o,se),oe.push({event:Se,listeners:Ye}),Se.data=We)),rN(oe,t,G,o,se)}Bx(oe,r)})}function Ll(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Hc(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=vr(t,o),h!=null&&u.unshift(Ll(t,h,m)),h=vr(t,r),h!=null&&u.push(Ll(t,h,m))),t.tag===3)return u;t=t.return}return[]}function oN(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Wx(t,r,o,u,h){for(var m=r._reactName,b=[];o!==null&&o!==u;){var C=o,M=C.alternate,G=C.stateNode;if(C=C.tag,M!==null&&M===u)break;C!==5&&C!==26&&C!==27||G===null||(M=G,h?(G=vr(o,m),G!=null&&b.unshift(Ll(o,G,M))):h||(G=vr(o,m),G!=null&&b.push(Ll(o,G,M)))),o=o.return}b.length!==0&&t.push({event:r,listeners:b})}var lN=/\r\n?/g,uN=/\u0000|\uFFFD/g;function Gx(t){return(typeof t=="string"?t:""+t).replace(lN,`
`).replace(uN,"")}function Kx(t,r){return r=Gx(r),Gx(t)===r}function gt(t,r,o,u,h,m){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||Mn(t,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&Mn(t,""+u);break;case"className":Hn(t,"class",u);break;case"tabIndex":Hn(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Hn(t,o,u);break;case"style":tl(t,u,m);break;case"data":if(r!=="object"){Hn(t,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){t.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(o);break}u=La(""+u),t.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&gt(t,r,"name",h.name,h,null),gt(t,r,"formEncType",h.formEncType,h,null),gt(t,r,"formMethod",h.formMethod,h,null),gt(t,r,"formTarget",h.formTarget,h,null)):(gt(t,r,"encType",h.encType,h,null),gt(t,r,"method",h.method,h,null),gt(t,r,"target",h.target,h,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(o);break}u=La(""+u),t.setAttribute(o,u);break;case"onClick":u!=null&&(t.onclick=br);break;case"onScroll":u!=null&&Ke("scroll",t);break;case"onScrollEnd":u!=null&&Ke("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=o}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}o=La(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(o,""+u):t.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(o,""):t.removeAttribute(o);break;case"capture":case"download":u===!0?t.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(o,u):t.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(o,u):t.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(o):t.setAttribute(o,u);break;case"popover":Ke("beforetoggle",t),Ke("toggle",t),Pa(t,"popover",u);break;case"xlinkActuate":zt(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":zt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":zt(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":zt(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":zt(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":zt(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":zt(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":zt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":zt(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Pa(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Hu.get(o)||o,Pa(t,o,u))}}function Kp(t,r,o,u,h,m){switch(o){case"style":tl(t,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=o}}break;case"children":typeof u=="string"?Mn(t,u):(typeof u=="number"||typeof u=="bigint")&&Mn(t,""+u);break;case"onScroll":u!=null&&Ke("scroll",t);break;case"onScrollEnd":u!=null&&Ke("scrollend",t);break;case"onClick":u!=null&&(t.onclick=br);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ko.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(h=o.endsWith("Capture"),r=o.slice(2,h?o.length-7:void 0),m=t[sn]||null,m=m!=null?m[o]:null,typeof m=="function"&&t.removeEventListener(r,m,h),typeof u=="function")){typeof m!="function"&&m!==null&&(o in t?t[o]=null:t.hasAttribute(o)&&t.removeAttribute(o)),t.addEventListener(r,u,h);break e}o in t?t[o]=u:u===!0?t.setAttribute(o,""):Pa(t,o,u)}}}function fn(t,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",t),Ke("load",t);var u=!1,h=!1,m;for(m in o)if(o.hasOwnProperty(m)){var b=o[m];if(b!=null)switch(m){case"src":u=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:gt(t,r,m,b,o,null)}}h&&gt(t,r,"srcSet",o.srcSet,o,null),u&&gt(t,r,"src",o.src,o,null);return;case"input":Ke("invalid",t);var C=m=b=h=null,M=null,G=null;for(u in o)if(o.hasOwnProperty(u)){var se=o[u];if(se!=null)switch(u){case"name":h=se;break;case"type":b=se;break;case"checked":M=se;break;case"defaultChecked":G=se;break;case"value":m=se;break;case"defaultValue":C=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,r));break;default:gt(t,r,u,se,o,null)}}qu(t,m,C,M,G,b,h,!1);return;case"select":Ke("invalid",t),u=b=m=null;for(h in o)if(o.hasOwnProperty(h)&&(C=o[h],C!=null))switch(h){case"value":m=C;break;case"defaultValue":b=C;break;case"multiple":u=C;default:gt(t,r,h,C,o,null)}r=m,o=b,t.multiple=!!u,r!=null?Vs(t,!!u,r,!1):o!=null&&Vs(t,!!u,o,!0);return;case"textarea":Ke("invalid",t),m=h=u=null;for(b in o)if(o.hasOwnProperty(b)&&(C=o[b],C!=null))switch(b){case"value":u=C;break;case"defaultValue":h=C;break;case"children":m=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:gt(t,r,b,C,o,null)}zs(t,u,h,m);return;case"option":for(M in o)if(o.hasOwnProperty(M)&&(u=o[M],u!=null))switch(M){case"selected":t.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:gt(t,r,M,u,o,null)}return;case"dialog":Ke("beforetoggle",t),Ke("toggle",t),Ke("cancel",t),Ke("close",t);break;case"iframe":case"object":Ke("load",t);break;case"video":case"audio":for(u=0;u<Ml.length;u++)Ke(Ml[u],t);break;case"image":Ke("error",t),Ke("load",t);break;case"details":Ke("toggle",t);break;case"embed":case"source":case"link":Ke("error",t),Ke("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in o)if(o.hasOwnProperty(G)&&(u=o[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:gt(t,r,G,u,o,null)}return;default:if(Ma(r)){for(se in o)o.hasOwnProperty(se)&&(u=o[se],u!==void 0&&Kp(t,r,se,u,o,void 0));return}}for(C in o)o.hasOwnProperty(C)&&(u=o[C],u!=null&&gt(t,r,C,u,o,null))}function cN(t,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,b=null,C=null,M=null,G=null,se=null;for(Z in o){var oe=o[Z];if(o.hasOwnProperty(Z)&&oe!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":M=oe;default:u.hasOwnProperty(Z)||gt(t,r,Z,null,u,oe)}}for(var K in u){var Z=u[K];if(oe=o[K],u.hasOwnProperty(K)&&(Z!=null||oe!=null))switch(K){case"type":m=Z;break;case"name":h=Z;break;case"checked":G=Z;break;case"defaultChecked":se=Z;break;case"value":b=Z;break;case"defaultValue":C=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:Z!==oe&&gt(t,r,K,Z,u,oe)}}Ra(t,b,C,M,G,se,m,h);return;case"select":Z=b=C=K=null;for(m in o)if(M=o[m],o.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":Z=M;default:u.hasOwnProperty(m)||gt(t,r,m,null,u,M)}for(h in u)if(m=u[h],M=o[h],u.hasOwnProperty(h)&&(m!=null||M!=null))switch(h){case"value":K=m;break;case"defaultValue":C=m;break;case"multiple":b=m;default:m!==M&&gt(t,r,h,m,u,M)}r=C,o=b,u=Z,K!=null?Vs(t,!!o,K,!1):!!u!=!!o&&(r!=null?Vs(t,!!o,r,!0):Vs(t,!!o,o?[]:"",!1));return;case"textarea":Z=K=null;for(C in o)if(h=o[C],o.hasOwnProperty(C)&&h!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:gt(t,r,C,null,u,h)}for(b in u)if(h=u[b],m=o[b],u.hasOwnProperty(b)&&(h!=null||m!=null))switch(b){case"value":K=h;break;case"defaultValue":Z=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==m&&gt(t,r,b,h,u,m)}$u(t,K,Z);return;case"option":for(var je in o)if(K=o[je],o.hasOwnProperty(je)&&K!=null&&!u.hasOwnProperty(je))switch(je){case"selected":t.selected=!1;break;default:gt(t,r,je,null,u,K)}for(M in u)if(K=u[M],Z=o[M],u.hasOwnProperty(M)&&K!==Z&&(K!=null||Z!=null))switch(M){case"selected":t.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:gt(t,r,M,K,u,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in o)K=o[Re],o.hasOwnProperty(Re)&&K!=null&&!u.hasOwnProperty(Re)&&gt(t,r,Re,null,u,K);for(G in u)if(K=u[G],Z=o[G],u.hasOwnProperty(G)&&K!==Z&&(K!=null||Z!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,r));break;default:gt(t,r,G,K,u,Z)}return;default:if(Ma(r)){for(var xt in o)K=o[xt],o.hasOwnProperty(xt)&&K!==void 0&&!u.hasOwnProperty(xt)&&Kp(t,r,xt,void 0,u,K);for(se in u)K=u[se],Z=o[se],!u.hasOwnProperty(se)||K===Z||K===void 0&&Z===void 0||Kp(t,r,se,K,u,Z);return}}for(var q in o)K=o[q],o.hasOwnProperty(q)&&K!=null&&!u.hasOwnProperty(q)&&gt(t,r,q,null,u,K);for(oe in u)K=u[oe],Z=o[oe],!u.hasOwnProperty(oe)||K===Z||K==null&&Z==null||gt(t,r,oe,K,u,Z)}function Qx(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function dN(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var h=o[u],m=h.transferSize,b=h.initiatorType,C=h.duration;if(m&&C&&Qx(b)){for(b=0,C=h.responseEnd,u+=1;u<o.length;u++){var M=o[u],G=M.startTime;if(G>C)break;var se=M.transferSize,oe=M.initiatorType;se&&Qx(oe)&&(M=M.responseEnd,b+=se*(M<C?1:(C-G)/(M-G)))}if(--u,r+=8*(m+b)/(h.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Qp=null,Yp=null;function Wc(t){return t.nodeType===9?t:t.ownerDocument}function Yx(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xx(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Xp(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Jp=null;function hN(){var t=window.event;return t&&t.type==="popstate"?t===Jp?!1:(Jp=t,!0):(Jp=null,!1)}var Jx=typeof setTimeout=="function"?setTimeout:void 0,pN=typeof clearTimeout=="function"?clearTimeout:void 0,Zx=typeof Promise=="function"?Promise:void 0,mN=typeof queueMicrotask=="function"?queueMicrotask:typeof Zx<"u"?function(t){return Zx.resolve(null).then(t).catch(fN)}:Jx;function fN(t){setTimeout(function(){throw t})}function ci(t){return t==="head"}function ey(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"||o==="/&"){if(u===0){t.removeChild(h),xo(r);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Ol(t.ownerDocument.documentElement);else if(o==="head"){o=t.ownerDocument.head,Ol(o);for(var m=o.firstChild;m;){var b=m.nextSibling,C=m.nodeName;m[Vr]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=b}}else o==="body"&&Ol(t.ownerDocument.body);o=h}while(o);xo(r)}function ty(t,r){var o=t;t=0;do{var u=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(t===0)break;t--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||t++;o=u}while(o)}function Zp(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Zp(o),Da(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}t.removeChild(o)}}function gN(t,r,o,u){for(;t.nodeType===1;){var h=o;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[Vr])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence")||m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=fr(t.nextSibling),t===null)break}return null}function xN(t,r,o){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!o||(t=fr(t.nextSibling),t===null))return null;return t}function ny(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=fr(t.nextSibling),t===null))return null;return t}function em(t){return t.data==="$?"||t.data==="$~"}function tm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function yN(t,r){var o=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||o.readyState!=="loading")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function fr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var nm=null;function ry(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"||o==="/&"){if(r===0)return fr(t.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}t=t.nextSibling}return null}function sy(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return t;r--}else o!=="/$"&&o!=="/&"||r++}t=t.previousSibling}return null}function iy(t,r,o){switch(r=Wc(o),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Ol(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Da(t)}var gr=new Map,ay=new Set;function Gc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var _s=de.d;de.d={f:bN,r:vN,D:wN,C:NN,L:kN,m:jN,X:CN,S:SN,M:EN};function bN(){var t=_s.f(),r=Fc();return t||r}function vN(t){var r=ar(t);r!==null&&r.tag===5&&r.type==="form"?kg(r):_s.r(t)}var mo=typeof document>"u"?null:document;function oy(t,r,o){var u=mo;if(u&&typeof r=="string"&&r){var h=Wn(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof o=="string"&&(h+='[crossorigin="'+o+'"]'),ay.has(h)||(ay.add(h),t={rel:t,crossOrigin:o,href:r},u.querySelector(h)===null&&(r=u.createElement("link"),fn(r,"link",t),Vt(r),u.head.appendChild(r)))}}function wN(t){_s.D(t),oy("dns-prefetch",t,null)}function NN(t,r){_s.C(t,r),oy("preconnect",t,r)}function kN(t,r,o){_s.L(t,r,o);var u=mo;if(u&&t&&r){var h='link[rel="preload"][as="'+Wn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(h+='[imagesrcset="'+Wn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(h+='[imagesizes="'+Wn(o.imageSizes)+'"]')):h+='[href="'+Wn(t)+'"]';var m=h;switch(r){case"style":m=fo(t);break;case"script":m=go(t)}gr.has(m)||(t=w({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:t,as:r},o),gr.set(m,t),u.querySelector(h)!==null||r==="style"&&u.querySelector(Fl(m))||r==="script"&&u.querySelector(Ul(m))||(r=u.createElement("link"),fn(r,"link",t),Vt(r),u.head.appendChild(r)))}}function jN(t,r){_s.m(t,r);var o=mo;if(o&&t){var u=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+Wn(u)+'"][href="'+Wn(t)+'"]',m=h;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=go(t)}if(!gr.has(m)&&(t=w({rel:"modulepreload",href:t},r),gr.set(m,t),o.querySelector(h)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Ul(m)))return}u=o.createElement("link"),fn(u,"link",t),Vt(u),o.head.appendChild(u)}}}function SN(t,r,o){_s.S(t,r,o);var u=mo;if(u&&t){var h=qr(u).hoistableStyles,m=fo(t);r=r||"default";var b=h.get(m);if(!b){var C={loading:0,preload:null};if(b=u.querySelector(Fl(m)))C.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":r},o),(o=gr.get(m))&&rm(t,o);var M=b=u.createElement("link");Vt(M),fn(M,"link",t),M._p=new Promise(function(G,se){M.onload=G,M.onerror=se}),M.addEventListener("load",function(){C.loading|=1}),M.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Kc(b,r,u)}b={type:"stylesheet",instance:b,count:1,state:C},h.set(m,b)}}}function CN(t,r){_s.X(t,r);var o=mo;if(o&&t){var u=qr(o).hoistableScripts,h=go(t),m=u.get(h);m||(m=o.querySelector(Ul(h)),m||(t=w({src:t,async:!0},r),(r=gr.get(h))&&sm(t,r),m=o.createElement("script"),Vt(m),fn(m,"link",t),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(h,m))}}function EN(t,r){_s.M(t,r);var o=mo;if(o&&t){var u=qr(o).hoistableScripts,h=go(t),m=u.get(h);m||(m=o.querySelector(Ul(h)),m||(t=w({src:t,async:!0,type:"module"},r),(r=gr.get(h))&&sm(t,r),m=o.createElement("script"),Vt(m),fn(m,"link",t),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(h,m))}}function ly(t,r,o,u){var h=(h=F.current)?Gc(h):null;if(!h)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=fo(o.href),o=qr(h).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){t=fo(o.href);var m=qr(h).hoistableStyles,b=m.get(t);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,b),(m=h.querySelector(Fl(t)))&&!m._p&&(b.instance=m,b.state.loading=5),gr.has(t)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},gr.set(t,o),m||_N(h,t,o,b.state))),r&&u===null)throw Error(i(528,""));return b}if(r&&u!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=go(o),o=qr(h).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function fo(t){return'href="'+Wn(t)+'"'}function Fl(t){return'link[rel="stylesheet"]['+t+"]"}function uy(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function _N(t,r,o,u){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=t.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),fn(r,"link",o),Vt(r),t.head.appendChild(r))}function go(t){return'[src="'+Wn(t)+'"]'}function Ul(t){return"script[async]"+t}function cy(t,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=t.querySelector('style[data-href~="'+Wn(o.href)+'"]');if(u)return r.instance=u,Vt(u),u;var h=w({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),Vt(u),fn(u,"style",h),Kc(u,o.precedence,t),r.instance=u;case"stylesheet":h=fo(o.href);var m=t.querySelector(Fl(h));if(m)return r.state.loading|=4,r.instance=m,Vt(m),m;u=uy(o),(h=gr.get(h))&&rm(u,h),m=(t.ownerDocument||t).createElement("link"),Vt(m);var b=m;return b._p=new Promise(function(C,M){b.onload=C,b.onerror=M}),fn(m,"link",u),r.state.loading|=4,Kc(m,o.precedence,t),r.instance=m;case"script":return m=go(o.src),(h=t.querySelector(Ul(m)))?(r.instance=h,Vt(h),h):(u=o,(h=gr.get(m))&&(u=w({},o),sm(u,h)),t=t.ownerDocument||t,h=t.createElement("script"),Vt(h),fn(h,"link",u),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Kc(u,o.precedence,t));return r.instance}function Kc(t,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=u.length?u[u.length-1]:null,m=h,b=0;b<u.length;b++){var C=u[b];if(C.dataset.precedence===r)m=C;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(t,r.firstChild))}function rm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function sm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Qc=null;function dy(t,r,o){if(Qc===null){var u=new Map,h=Qc=new Map;h.set(o,u)}else h=Qc,u=h.get(o),u||(u=new Map,h.set(o,u));if(u.has(t))return u;for(u.set(t,null),o=o.getElementsByTagName(t),h=0;h<o.length;h++){var m=o[h];if(!(m[Vr]||m[At]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(r)||"";b=t+b;var C=u.get(b);C?C.push(m):u.set(b,[m])}}return u}function hy(t,r,o){t=t.ownerDocument||t,t.head.insertBefore(o,r==="title"?t.querySelector("head > title"):null)}function TN(t,r,o){if(o===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function py(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function IN(t,r,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var h=fo(u.href),m=r.querySelector(Fl(h));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Yc.bind(t),r.then(t,t)),o.state.loading|=4,o.instance=m,Vt(m);return}m=r.ownerDocument||r,u=uy(u),(h=gr.get(h))&&rm(u,h),m=m.createElement("link"),Vt(m);var b=m;b._p=new Promise(function(C,M){b.onload=C,b.onerror=M}),fn(m,"link",u),o.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(t.count++,o=Yc.bind(t),r.addEventListener("load",o),r.addEventListener("error",o))}}var im=0;function AN(t,r){return t.stylesheets&&t.count===0&&Jc(t,t.stylesheets),0<t.count||0<t.imgCount?function(o){var u=setTimeout(function(){if(t.stylesheets&&Jc(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&im===0&&(im=62500*dN());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Jc(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>im?50:800)+r);return t.unsuspend=o,function(){t.unsuspend=null,clearTimeout(u),clearTimeout(h)}}:null}function Yc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Xc=null;function Jc(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Xc=new Map,r.forEach(DN,t),Xc=null,Yc.call(t))}function DN(t,r){if(!(r.state.loading&4)){var o=Xc.get(t);if(o)var u=o.get(null);else{o=new Map,Xc.set(t,o);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var b=h[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),u=b)}u&&o.set(null,u)}h=r.instance,b=h.getAttribute("data-precedence"),m=o.get(b)||u,m===u&&o.set(null,h),o.set(b,h),this.count++,u=Yc.bind(this),h.addEventListener("load",u),h.addEventListener("error",u),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Vl={$$typeof:ue,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function PN(t,r,o,u,h,m,b,C,M){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.hiddenUpdates=Pe(null),this.identifierPrefix=u,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function my(t,r,o,u,h,m,b,C,M,G,se,oe){return t=new PN(t,r,o,b,M,G,se,oe,C),r=1,m===!0&&(r|=24),m=Kn(3,null,null,r),t.current=m,m.stateNode=t,r=Fh(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:r},qh(m),t}function fy(t){return t?(t=Wa,t):Wa}function gy(t,r,o,u,h,m){h=fy(h),u.context===null?u.context=h:u.pendingContext=h,u=Zs(r),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=ei(t,u,r),o!==null&&(Vn(o,t,r),yl(o,t,r))}function xy(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function am(t,r){xy(t,r),(t=t.alternate)&&xy(t,r)}function yy(t){if(t.tag===13||t.tag===31){var r=Xi(t,67108864);r!==null&&Vn(r,t,67108864),am(t,67108864)}}function by(t){if(t.tag===13||t.tag===31){var r=Zn();r=Fr(r);var o=Xi(t,r);o!==null&&Vn(o,t,r),am(t,r)}}var Zc=!0;function RN(t,r,o,u){var h=B.T;B.T=null;var m=de.p;try{de.p=2,om(t,r,o,u)}finally{de.p=m,B.T=h}}function MN(t,r,o,u){var h=B.T;B.T=null;var m=de.p;try{de.p=8,om(t,r,o,u)}finally{de.p=m,B.T=h}}function om(t,r,o,u){if(Zc){var h=lm(u);if(h===null)Gp(t,r,u,ed,o),wy(t,u);else if(ON(h,t,r,o,u))u.stopPropagation();else if(wy(t,u),r&4&&-1<LN.indexOf(t)){for(;h!==null;){var m=ar(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=ne(m.pendingLanes);if(b!==0){var C=m;for(C.pendingLanes|=2,C.entangledLanes|=2;b;){var M=1<<31-Tt(b);C.entanglements[1]|=M,b&=~M}es(m),(at&6)===0&&(Lc=Y()+500,Rl(0))}}break;case 31:case 13:C=Xi(m,2),C!==null&&Vn(C,m,2),Fc(),am(m,2)}if(m=lm(u),m===null&&Gp(t,r,u,ed,o),m===h)break;h=m}h!==null&&u.stopPropagation()}else Gp(t,r,u,null,o)}}function lm(t){return t=or(t),um(t)}var ed=null;function um(t){if(ed=null,t=zr(t),t!==null){var r=c(t);if(r===null)t=null;else{var o=r.tag;if(o===13){if(t=p(r),t!==null)return t;t=null}else if(o===31){if(t=g(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return ed=t,null}function vy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fe()){case rt:return 2;case _t:return 8;case En:case Mr:return 32;case _n:return 268435456;default:return 32}default:return 32}}var cm=!1,di=null,hi=null,pi=null,zl=new Map,ql=new Map,mi=[],LN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wy(t,r){switch(t){case"focusin":case"focusout":di=null;break;case"dragenter":case"dragleave":hi=null;break;case"mouseover":case"mouseout":pi=null;break;case"pointerover":case"pointerout":zl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ql.delete(r.pointerId)}}function $l(t,r,o,u,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[h]},r!==null&&(r=ar(r),r!==null&&yy(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function ON(t,r,o,u,h){switch(r){case"focusin":return di=$l(di,t,r,o,u,h),!0;case"dragenter":return hi=$l(hi,t,r,o,u,h),!0;case"mouseover":return pi=$l(pi,t,r,o,u,h),!0;case"pointerover":var m=h.pointerId;return zl.set(m,$l(zl.get(m)||null,t,r,o,u,h)),!0;case"gotpointercapture":return m=h.pointerId,ql.set(m,$l(ql.get(m)||null,t,r,o,u,h)),!0}return!1}function Ny(t){var r=zr(t.target);if(r!==null){var o=c(r);if(o!==null){if(r=o.tag,r===13){if(r=p(o),r!==null){t.blockedOn=r,De(t.priority,function(){by(o)});return}}else if(r===31){if(r=g(o),r!==null){t.blockedOn=r,De(t.priority,function(){by(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function td(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=lm(t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);nl=u,o.target.dispatchEvent(u),nl=null}else return r=ar(o),r!==null&&yy(r),t.blockedOn=o,!1;r.shift()}return!0}function ky(t,r,o){td(t)&&o.delete(r)}function FN(){cm=!1,di!==null&&td(di)&&(di=null),hi!==null&&td(hi)&&(hi=null),pi!==null&&td(pi)&&(pi=null),zl.forEach(ky),ql.forEach(ky)}function nd(t,r){t.blockedOn===r&&(t.blockedOn=null,cm||(cm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,FN)))}var rd=null;function jy(t){rd!==t&&(rd=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){rd===t&&(rd=null);for(var r=0;r<t.length;r+=3){var o=t[r],u=t[r+1],h=t[r+2];if(typeof u!="function"){if(um(u||o)===null)continue;break}var m=ar(o);m!==null&&(t.splice(r,3),r-=3,lp(m,{pending:!0,data:h,method:o.method,action:u},u,h))}}))}function xo(t){function r(M){return nd(M,t)}di!==null&&nd(di,t),hi!==null&&nd(hi,t),pi!==null&&nd(pi,t),zl.forEach(r),ql.forEach(r);for(var o=0;o<mi.length;o++){var u=mi[o];u.blockedOn===t&&(u.blockedOn=null)}for(;0<mi.length&&(o=mi[0],o.blockedOn===null);)Ny(o),o.blockedOn===null&&mi.shift();if(o=(t.ownerDocument||t).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var h=o[u],m=o[u+1],b=h[sn]||null;if(typeof m=="function")b||jy(o);else if(b){var C=null;if(m&&m.hasAttribute("formAction")){if(h=m,b=m[sn]||null)C=b.formAction;else if(um(h)!==null)continue}else C=b.action;typeof C=="function"?o[u+1]=C:(o.splice(u,3),u-=3),jy(o)}}}function Sy(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return h=b})},focusReset:"manual",scroll:"manual"})}function r(){h!==null&&(h(),h=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),h!==null&&(h(),h=null)}}}function dm(t){this._internalRoot=t}sd.prototype.render=dm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,u=Zn();gy(o,u,t,r,null,null)},sd.prototype.unmount=dm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;gy(t.current,2,null,t,null,null),Fc(),r[Ur]=null}};function sd(t){this._internalRoot=t}sd.prototype.unstable_scheduleHydration=function(t){if(t){var r=qe();t={blockedOn:null,target:t,priority:r};for(var o=0;o<mi.length&&r!==0&&r<mi[o].priority;o++);mi.splice(o,0,t),o===0&&Ny(t)}};var Cy=e.version;if(Cy!=="19.2.1")throw Error(i(527,Cy,"19.2.1"));de.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=x(r),t=t!==null?N(t):null,t=t===null?null:t.stateNode,t};var UN={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!id.isDisabled&&id.supportsFiber)try{$n=id.inject(UN),Yt=id}catch{}}return Hl.createRoot=function(t,r){if(!l(t))throw Error(i(299));var o=!1,u="",h=Pg,m=Rg,b=Mg;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=my(t,1,!1,null,null,o,u,null,h,m,b,Sy),t[Ur]=r.current,Wp(t),new dm(r)},Hl.hydrateRoot=function(t,r,o){if(!l(t))throw Error(i(299));var u=!1,h="",m=Pg,b=Rg,C=Mg,M=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.formState!==void 0&&(M=o.formState)),r=my(t,1,!0,r,o??null,u,h,M,m,b,C,Sy),r.context=fy(null),o=r.current,u=Zn(),u=Fr(u),h=Zs(u),h.callback=null,ei(o,h,u),o=u,r.current.lanes=o,cn(r,o),es(r),t[Ur]=r.current,Wp(t),new sd(r)},Hl.version="19.2.1",Hl}var Vy;function QN(){if(Vy)return hm.exports;Vy=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),hm.exports=KN(),hm.exports}var YN=QN();const XN=Ev(YN),Fo=({className:s,onClick:e,style:n,title:i})=>{const[l,c]=V.useState(!1);return l?a.jsxs("svg",{viewBox:"0 0 300 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:s,"aria-label":"MASERP",onClick:e,style:n,role:"img",children:[i&&a.jsx("title",{children:i}),a.jsxs("g",{children:[a.jsx("path",{d:"M42 12L70 28V60L42 76L14 60V28L42 12Z",fill:"#1E3A8A"}),a.jsx("path",{d:"M42 30L54 38V50L42 58L30 50V38L42 30Z",fill:"#FFFFFF"})]}),a.jsx("text",{x:"90",y:"55",fill:"#1E3A8A",fontFamily:"sans-serif",fontWeight:"bold",fontSize:"42",children:"MASERP"})]}):a.jsx("img",{src:"/logo.png",alt:"MASERP",className:`object-contain ${s||""}`,onError:()=>c(!0),onClick:e,style:n,title:i})},JN=({onLogin:s})=>{const[e,n]=V.useState(""),[i,l]=V.useState(""),[c,p]=V.useState(""),[g,f]=V.useState(!1),x=async N=>{if(N.preventDefault(),e&&i){f(!0),p("");try{await s(e,i)||p("Invalid email or password.")}catch(w){console.error("Login error",w),p(w.message||"Login failed")}finally{f(!1)}}else p("Please enter both email and password.")};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 p-4",children:a.jsxs("div",{className:"bg-white p-8 md:p-12 rounded-2xl shadow-lg w-full max-w-md transform transition-all duration-300 border-t-4 border-purple-900",children:[a.jsxs("div",{className:"flex flex-col items-center mb-8",children:[a.jsx(Fo,{className:"h-20 w-auto mb-4"}),a.jsx("p",{className:"text-blue-900 font-medium",children:"Admin Login"})]}),a.jsxs("form",{onSubmit:x,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-blue-900",children:"Email"}),a.jsx("input",{id:"email",type:"text",value:e,onChange:N=>n(N.target.value),className:"mt-1 block w-full px-4 py-3 bg-slate-50 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-purple-900 focus:border-purple-900 sm:text-sm text-blue-900",placeholder:"admin or user@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-blue-900",children:"Password"}),a.jsx("input",{id:"password",type:"password",value:i,onChange:N=>l(N.target.value),className:"mt-1 block w-full px-4 py-3 bg-slate-50 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-purple-900 focus:border-purple-900 sm:text-sm text-blue-900",placeholder:""})]}),c&&a.jsx("p",{className:"text-sm text-red-600",children:c}),a.jsx("button",{type:"submit",disabled:g,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-900 hover:bg-purple-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-900 transition-colors duration-200 disabled:bg-purple-400",children:g?"Logging in...":"Login"})]})]})})},ZN=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.68c.11-.32.223-.65.334-.982l.012-.035a6.375 6.375 0 01-2.924-4.982 6.375 6.375 0 0111.085-3.834c.11.32.223.65.334.982l.012-.035a6.375 6.375 0 01-2.924 4.982 6.375 6.375 0 01-11.085 3.834 6.375 6.375 0 012.924 4.982z"})}),ou=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h6M9 11.25h6m-6 4.5h6M21 21V3M3 21V3"})}),of=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"})}),lf=s=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:[a.jsx("path",{d:"M12 14.25c-3.75 0-7.5-1.34-7.5-3v-4.5c0-1.66 3.35-3 7.5-3s7.5 1.34 7.5 3v4.5c0 1.65-3.75 3-7.5 3z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5v6.75c0 1.65 3.75 3 7.5 3s7.5-1.35 7.5-3V10.5M4.5 10.5L12 15l7.5-4.5"})]}),_v=s=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 100-18 9 9 0 000 18z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 9h16.5M3.75 15h16.5M12 3v18"})]}),Tv=({module:s,onSelect:e})=>a.jsxs("div",{onClick:e,className:"bg-white p-8 rounded-2xl shadow-md hover:shadow-xl hover:-translate-y-2 transition-all duration-300 cursor-pointer text-center flex flex-col items-center h-full border-t-4 border-transparent hover:border-purple-600",role:"button",tabIndex:0,onKeyDown:n=>n.key==="Enter"&&e(),children:[a.jsx("div",{className:"text-purple-800 mb-5",children:s.icon}),a.jsx("h2",{className:"font-bold text-xl text-blue-900 mb-2",children:s.title}),a.jsx("p",{className:"text-sm text-blue-900 flex-grow",children:s.description})]}),Uo=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})}),Im=[{id:"hr",icon:a.jsx(ZN,{className:"w-12 h-12"}),title:"HR Module",description:"Attendance, Shifts, CCTV snapshots, Employee management"},{id:"inventory_management",icon:a.jsx(ou,{className:"w-12 h-12"}),title:"Inventory Management",description:"Manage assets, labs, printers, and consumables."},{id:"supply_chain",icon:a.jsx(ou,{className:"w-12 h-12"}),title:"Supply Chain Module",description:"Manage procurement, logistics, and supplier relations."},{id:"finance",icon:a.jsx(of,{className:"w-12 h-12"}),title:"Finance Module",description:"Budgeting, Payments, Receipts, WhatsApp receipts"},{id:"student",icon:a.jsx(lf,{className:"w-12 h-12"}),title:"Student Module",description:"Applicants, Student Portal, Attendance, Course delivery"},{id:"website",icon:a.jsx(_v,{className:"w-12 h-12"}),title:"Website & Portals",description:"Applicant Portal, Student Portal, Teacher/Admin Dashboards"}],ek=({onModuleSelect:s,onLogout:e,accessibleModules:n})=>{const i=n?Im.filter(l=>n.includes(l.id)):Im;return a.jsxs("div",{className:"relative w-full max-w-6xl mx-auto p-4 sm:p-8",children:[a.jsxs("header",{className:"text-center mb-10 flex flex-col items-center",children:[a.jsx(Fo,{className:"h-20 w-auto mb-6"}),a.jsx("p",{className:"text-blue-900 text-lg",children:"Select a module to continue"})]}),a.jsx("main",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:i.length>0?i.map(l=>a.jsx(Tv,{module:l,onSelect:()=>s(l.id)},l.id)):a.jsxs("div",{className:"md:col-span-2 lg:col-span-3 text-center p-8 bg-white rounded-lg shadow-md",children:[a.jsx("h2",{className:"text-xl font-semibold text-blue-900",children:"No Modules Assigned"}),a.jsx("p",{className:"text-blue-900 mt-2",children:"You have not been assigned any modules. Please contact an administrator."})]})}),a.jsx("div",{className:"absolute top-4 right-4 sm:top-8 sm:right-8",children:a.jsxs("button",{onClick:e,className:"flex items-center gap-2 bg-white text-purple-900 px-4 py-2 rounded-lg shadow-md hover:bg-purple-50 transition-colors border border-purple-200","aria-label":"Logout",children:[a.jsx(Uo,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:"Logout"})]})})]})},tk=({employee:s,onModuleSelect:e,onLogout:n,accessibleModules:i})=>{var l;const c=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),p=Im.filter(x=>i.includes(x.id)),g=s.employmentType==="Probation"?{total:0,used:0}:((l=s.leaveBalance)==null?void 0:l.annual)||{total:14,used:0},f=Math.max(0,g.total-g.used);return a.jsxs("div",{className:"min-h-screen bg-slate-50",children:[a.jsxs("header",{className:"bg-purple-900 shadow-sm border-b border-purple-800 px-6 py-4 flex justify-between items-center",children:[a.jsx(Fo,{className:"h-8 w-auto brightness-0 invert"}),a.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-purple-100 hover:text-white transition-colors text-sm font-medium",children:[a.jsx(Uo,{className:"w-5 h-5"}),"Logout"]})]}),a.jsxs("main",{className:"max-w-7xl mx-auto p-6 sm:p-8 space-y-8",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-blue-900",children:["Welcome back, ",s.firstName]}),a.jsx("p",{className:"text-blue-900 mt-1",children:c})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100 flex items-center gap-4",children:[a.jsx("div",{className:"h-16 w-16 rounded-full bg-purple-100 flex items-center justify-center text-purple-900 font-bold text-2xl",children:s.firstName.charAt(0)}),a.jsxs("div",{children:[a.jsxs("h2",{className:"font-bold text-blue-900",children:[s.firstName," ",s.lastName]}),a.jsx("p",{className:"text-sm text-blue-900",children:s.designation}),a.jsx("p",{className:"text-xs text-blue-800",children:s.department})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[a.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-1",children:"My Shift"}),a.jsx("p",{className:"text-lg font-semibold text-blue-900",children:s.shift||"Standard (9-6)"}),a.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[a.jsx("span",{className:"h-2 w-2 rounded-full bg-green-500"}),a.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Active"})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[a.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-1",children:"Annual Leave Balance"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-3xl font-bold text-blue-900",children:f}),a.jsxs("span",{className:"text-sm text-blue-800",children:["/ ",g.total," days"]})]}),a.jsx("div",{className:"w-full bg-slate-100 rounded-full h-1.5 mt-3",children:a.jsx("div",{className:"bg-purple-900 h-1.5 rounded-full",style:{width:g.total>0?`${f/g.total*100}%`:"0%"}})})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-6",children:"My Applications"}),p.length>0?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(x=>a.jsx(Tv,{module:x,onSelect:()=>e(x.id)},x.id))}):a.jsxs("div",{className:"bg-white rounded-xl p-8 text-center border border-dashed border-slate-300",children:[a.jsx("p",{className:"text-blue-900",children:"You do not have access to any modules yet."}),a.jsx("p",{className:"text-sm text-blue-800 mt-1",children:"Contact HR or IT administrator for access."})]})]})]})]})},Gd=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"})}),nk=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.68c.11-.32.223-.65.334-.982l.012-.035a6.375 6.375 0 01-2.924-4.982 6.375 6.375 0 0111.085-3.834c.11.32.223-.65.334.982l.012-.035a6.375 6.375 0 01-2.924 4.982 6.375 6.375 0 01-11.085 3.834 6.375 6.375 0 012.924 4.982z"})}),uf=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0h18M12 12.75h.008v.008H12v-.008z"})}),Io=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 14.25v2.25m3-4.5v4.5m3-6.75v6.75m3-9v9M6 20.25h12A2.25 2.25 0 0020.25 18V6A2.25 2.25 0 0018 3.75H6A2.25 2.25 0 003.75 6v12A2.25 2.25 0 006 20.25z"})}),Sd=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m-7.5-2.962a3.75 3.75 0 015.25 0m-5.25 0a3.75 3.75 0 00-5.25 0M3 13.001v-5.25a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.75v5.25c0 .621-.504 1.125-1.125 1.125H4.125A1.125 1.125 0 013 13.001z"})}),rk=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286zm0 13.036h.008v.008h-.008v-.008z"})}),sk=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),ik=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),Iv=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),Av=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"})}),Dv=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),Kd=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zM12 2.25V4.5m5.834.166l-1.591 1.591M20.25 10.5H18M5.834 7.75l-1.591-1.591M4.5 10.5H2.25m11.106 4.75L9.13 18.218m-2.923-8.814l.159.098m3.523-2.226L9.13 5.782"})}),cf=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-1.008 1.11-1.226l.45-1.691a1.125 1.125 0 012.15 0l.45 1.691c.55.218 1.02.684 1.11 1.226l1.691.45a1.125 1.125 0 010 2.15l-1.691.45c-.09.542-.56 1.008-1.11 1.226l-.45 1.691a1.125 1.125 0 01-2.15 0l-.45-1.691a1.722 1.722 0 01-1.11-1.226l-1.691-.45a1.125 1.125 0 010-2.15l1.691-.45zM12 12.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5zM3.94 14.406c-.542-.09-1.008-.56-1.226-1.11l-1.691-.45a1.125 1.125 0 010-2.15l1.691-.45c.218-.55.684-1.02 1.226-1.11l.45-1.691a1.125 1.125 0 012.15 0l.45 1.691c.55.218 1.02.684 1.11 1.226l1.691.45a1.125 1.125 0 010 2.15l-1.691.45c-.218.55-.684 1.02-1.226 1.11l-.45 1.691a1.125 1.125 0 01-2.15 0l-.45-1.691a1.722 1.722 0 01-1.11-1.226l-1.691-.45a1.125 1.125 0 010-2.15l1.691-.45c.09.542.56 1.008 1.11 1.226l.45 1.691a1.125 1.125 0 01-2.15 0l-.45-1.691a1.722 1.722 0 01-1.11-1.226zM14.406 20.06c-.09.542-.56 1.008-1.11 1.226l-.45 1.691a1.125 1.125 0 01-2.15 0l-.45-1.691c-.55-.218-1.02-.684-1.11-1.226l-1.691-.45a1.125 1.125 0 010-2.15l1.691-.45c.09-.542.56-1.008 1.11-1.226l.45-1.691a1.125 1.125 0 012.15 0l.45 1.691c.55.218 1.02.684 1.11 1.226l1.691.45a1.125 1.125 0 010 2.15l-1.691.45z"})}),lu=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-1.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25A2.25 2.25 0 015.25 3h9.75a2.25 2.25 0 012.25 2.25z"})}),Pv=s=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 3.75H6A2.25 2.25 0 003.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0120.25 6v1.5m0 9V18A2.25 2.25 0 0118 20.25h-1.5m-9 0H6A2.25 2.25 0 013.75 18v-1.5M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v3m0 9v3m-4.5-4.5h-3m9 0h-3m-9-4.5h3m9 0h3"})]}),Rv=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0110.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0l.229 2.523a1.125 1.125 0 01-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.061A2.25 2.25 0 0021 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 00-1.913-.247M6.34 18H5.279A2.25 2.25 0 013 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 011.913-.247m10.5 0a48.536 48.536 0 00-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5zm-3 0h.008v.008H15V10.5z"})}),ak=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),df=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.75 3.03v.568c0 .334.148.65.405.864l1.068.89c.442.369.535 1.01.216 1.49l-.51.766a2.25 2.25 0 01-1.161.886l-.143.048a1.107 1.107 0 00-.57 1.664l.143.258a1.107 1.107 0 001.664.57l.143-.048a2.25 2.25 0 011.161.886l.51.766c.319.48.126 1.121-.216 1.49l-1.068.89a1.125 1.125 0 00-.405.864v.568m-6 0v-.568c0-.334-.148-.65-.405-.864l-1.068-.89a1.125 1.125 0 01-.216-1.49l.51-.766a2.25 2.25 0 001.161-.886l.143-.048a1.107 1.107 0 01.57-1.664l-.143-.258a1.107 1.107 0 01-1.664-.57l-.143.048a2.25 2.25 0 00-1.161-.886l-.51-.766a1.125 1.125 0 01.216-1.49l1.068-.89a1.125 1.125 0 00.405-.864v-.568a3 3 0 013-3h3.5a3 3 0 013 3v1.173c0 .521-.175 1.02-.49 1.432l-1.148 1.53c-.314.413-.77.68-1.256.75l-4.11.587c-.504.072-.994.27-1.432.559l-1.148.765a3 3 0 00-1.432 2.559V18a3 3 0 003 3h3.5a3 3 0 003-3v-1.173c0-.521.175-1.02.49-1.432l1.148-1.53c.314-.413.77-.68 1.256-.75l4.11-.587c.504-.072.994-.27 1.432-.559l1.148-.765a3 3 0 001.432-2.559V6a3 3 0 00-3-3h-3.5a3 3 0 00-3 3z"})}),uu=[{id:"dashboard",label:"Dashboard",icon:Gd},{id:"employees",label:"Employees",icon:nk},{id:"attendance",label:"Attendance",icon:uf},{id:"reports",label:"Reports",icon:Io},{id:"users",label:"Users",icon:Sd},{id:"user-access",label:"User Access Management",icon:rk}],cu=[{id:"departments",label:"Departments",icon:sk},{id:"leaves",label:"Leaves",icon:ik},{id:"payroll",label:"Payroll",icon:Iv},{id:"performance",label:"Performance",icon:Av},{id:"training",label:"Training",icon:Dv},{id:"recruitment",label:"Recruitment",icon:Kd}],ok=[...uu,...cu],hf=[{id:"master",label:"Master Inventory",icon:ou},{id:"laptops",label:"Laptops",icon:lu},{id:"desktops",label:"Desktops",icon:lu},{id:"printers",label:"Printers & Toners",icon:Rv},{id:"labs",label:"Computer Labs",icon:Pv},{id:"kitchen",label:"The Chef's Academy",icon:df}],Cd=[{id:"assets",label:"Inventory",icon:lu},{id:"users",label:"Users",icon:Sd},{id:"mrf",label:"MRF",icon:ak},{id:"reports",label:"Reports",icon:Io},{id:"settings",label:"Settings",icon:cf}],lk=[...hf,...Cd.filter(s=>["users","mrf","reports","settings"].includes(s.id))],Mv=[{id:"sc_requests",label:"New Request",icon:ou},{id:"sc_my_requests",label:"My Requests",icon:Io},{id:"sc_approvals",label:"Account Manager",icon:Kd},{id:"sc_store",label:"Store Fulfillment",icon:df},{id:"sc_purchase",label:"Purchase Department",icon:of}],uk=[{id:"fin_dashboard",label:"Dashboard",icon:Gd},{id:"budgeting",label:"Budgeting",icon:of},{id:"payments",label:"Payments",icon:Iv},{id:"receipts",label:"Receipts",icon:Av},{id:"fin_reports",label:"Reports",icon:Io}],ck=[{id:"std_dashboard",label:"Dashboard",icon:Gd},{id:"applicants",label:"Applicants",icon:Kd},{id:"student_portal",label:"Student Portal",icon:lf},{id:"std_attendance",label:"Attendance",icon:uf},{id:"course_delivery",label:"Course Delivery",icon:Dv}],dk=[{id:"web_dashboard",label:"Dashboard",icon:Gd},{id:"applicant_portal",label:"Applicant Portal",icon:Kd},{id:"student_portal_mgmt",label:"Student Portal",icon:lf},{id:"teacher_dash",label:"Teacher Dashboard",icon:_v},{id:"admin_dash",label:"Admin Dashboard",icon:cf}],zy={hr:ok,inventory_management:lk,supply_chain:Mv,finance:uk,student:ck,website:dk},qy=({link:s,activePage:e,setActivePage:n,isCollapsed:i})=>{const l=e===s.id;return a.jsxs("a",{href:"#",onClick:c=>{c.preventDefault(),n(s.id)},className:`flex items-center py-2.5 px-4 rounded-md transition-colors duration-200 ${l?"bg-purple-50 text-purple-900 font-bold border-r-4 border-purple-900":"text-blue-900 hover:bg-purple-50 hover:text-purple-900"} ${i?"justify-center":""}`,children:[a.jsx(s.icon,{className:`h-5 w-5 ${l?"text-purple-900":"text-purple-400"}`}),!i&&a.jsx("span",{className:"ml-3 text-sm",children:s.label})]})},hk=({activePage:s,setActivePage:e,isCollapsed:n,onLogout:i,permissions:l,currentUserEmail:c,employees:p})=>{const g=c==="admin",f=p.find(D=>D.email===c),x=g?"Administrator":f?`${f.firstName} ${f.lastName}`:c,N=(g?uu:uu.filter(D=>{var P;return(P=l[D.id])==null?void 0:P.view})).filter(D=>!((f==null?void 0:f.role)==="Employee"&&D.id==="dashboard")),w=g?cu:cu.filter(D=>{var P;return(P=l[D.id])==null?void 0:P.view});return a.jsxs("aside",{className:`bg-white flex flex-col transition-all duration-300 ease-in-out border-r border-slate-200 ${n?"w-20":"w-64"}`,children:[a.jsx("div",{className:`flex items-center border-b h-16 px-4 ${n?"justify-center":"justify-start"}`,children:n?a.jsx("div",{className:"bg-purple-900 text-white font-bold text-lg rounded-md p-2 w-9 h-9 flex items-center justify-center",children:"M"}):a.jsx(Fo,{className:"h-8 w-auto"})}),a.jsxs("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:[N.map(D=>a.jsx(qy,{link:D,activePage:s,setActivePage:e,isCollapsed:n},D.id)),w.length>0&&a.jsxs("div",{className:"pt-4",children:[!n&&a.jsx("h3",{className:"px-4 text-xs font-semibold text-blue-900 uppercase tracking-wider mb-2",children:"HR Module"}),a.jsx("div",{className:"space-y-2",children:w.map(D=>a.jsx(qy,{link:D,activePage:s,setActivePage:e,isCollapsed:n},D.id))})]})]}),a.jsxs("div",{className:"mt-auto border-t border-slate-200",children:[a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:`flex items-center ${n?"justify-center":""}`,children:[a.jsx("div",{className:"h-9 w-9 rounded-full bg-purple-100 flex-shrink-0 flex items-center justify-center text-purple-900 font-bold","aria-label":"User avatar placeholder",children:x.charAt(0)}),!n&&a.jsxs("div",{className:"ml-3 overflow-hidden",children:[a.jsx("p",{className:"text-sm font-semibold text-blue-900 truncate",title:x,children:x}),a.jsx("p",{className:"text-xs text-blue-800 truncate",title:c,children:c})]})]})}),a.jsx("div",{className:"p-4 border-t border-slate-200",children:a.jsxs("button",{onClick:i,className:`flex items-center w-full py-2.5 px-4 rounded-md transition-colors duration-200 text-blue-900 hover:bg-red-50 hover:text-red-600 ${n?"justify-center":""}`,children:[a.jsx(Uo,{className:"h-5 w-5"}),!n&&a.jsx("span",{className:"ml-3 text-sm font-medium",children:"Logout"})]})})]})]})},Ed=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),pk=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})}),mk=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),pf=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5"})}),fk=({toggleSidebar:s,isSidebarCollapsed:e,onLogout:n,searchQuery:i,onSearchChange:l,onBack:c})=>a.jsxs("header",{className:"bg-purple-900 border-b border-purple-800 h-16 flex items-center justify-between px-6 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("button",{onClick:s,className:"text-purple-200 hover:text-white mr-4",children:e?a.jsx(pk,{className:"w-5 h-5"}):a.jsx(Ed,{className:"w-5 h-5"})}),a.jsxs("button",{onClick:c,className:"flex items-center gap-2 text-sm font-medium text-purple-100 hover:text-white mr-4",children:[a.jsx(pf,{className:"w-5 h-5"}),a.jsx("span",{children:"Home"})]}),a.jsx("div",{className:"flex items-center text-sm",children:a.jsx("span",{className:"font-semibold text-white text-lg tracking-wide",children:"MASERP"})})]}),a.jsx("div",{className:"flex-1 max-w-md mx-4",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(mk,{className:"h-5 w-5 text-purple-300"})}),a.jsx("input",{type:"text",placeholder:"Search employees, users...",value:i,onChange:p=>l(p.target.value),className:"block w-full bg-purple-800 border border-transparent rounded-md py-2 pl-10 pr-3 text-sm text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent focus:bg-purple-700"})]})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{className:"text-sm font-medium text-purple-200 hover:text-white",children:"Invite"}),a.jsx("button",{className:"text-purple-200 hover:text-white","aria-label":"Settings",children:a.jsx(cf,{className:"w-5 h-5"})}),a.jsx("button",{onClick:n,className:"text-purple-200 hover:text-red-300","aria-label":"Logout",children:a.jsx(Uo,{className:"w-5 h-5"})}),a.jsx("div",{className:"h-8 w-8 rounded-full bg-purple-700 text-purple-200 flex items-center justify-center text-xs font-bold border border-purple-600","aria-label":"User avatar placeholder",children:"U"})]})]}),gk=({percentage:s,color:e,displayText:n})=>{const i=2*Math.PI*30,l=i-s/100*i;return a.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",children:[a.jsx("circle",{className:"text-blue-200",strokeWidth:"8",stroke:"currentColor",fill:"transparent",r:30,cx:"40",cy:"40"}),a.jsx("circle",{className:e,strokeWidth:"8",strokeDasharray:i,strokeDashoffset:l,strokeLinecap:"round",stroke:"currentColor",fill:"transparent",r:30,cx:"40",cy:"40"}),a.jsx("text",{x:"50%",y:"50%",textAnchor:"middle",dy:".3em",className:"text-lg font-bold text-blue-900 transform rotate-90 origin-center",children:n})]})},xk=({title:s,value:e,percentage:n,color:i})=>a.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(gk,{percentage:n,color:i,displayText:e})}),a.jsx("div",{className:"ml-4 text-left",children:a.jsx("p",{className:"text-sm text-blue-900",children:s})})]}),yk=({employees:s,leaveRequests:e,onLeaveRequestAction:n,onNavigate:i})=>{const[l,c]=V.useState([]),[p,g]=V.useState(!1);V.useEffect(()=>{const R=localStorage.getItem("hrQuickAccess");c(R?JSON.parse(R):["employees","attendance","leaves","payroll"])},[]);const f=s.length,x=f>0?Math.floor(f*(.85+Math.random()*.1)):0,N=[{title:"Present Employees",value:x.toString(),percentage:f>0?Math.round(x/f*100):0,color:"text-green-500"},{title:"Total Employees",value:f.toString(),percentage:100,color:"text-blue-900"}],w=V.useMemo(()=>e.filter(R=>R.status==="Pending HR"),[e]),D=R=>{const O=s.find(te=>te.id===R);return O?`${O.firstName} ${O.lastName}`:"Unknown Employee"},P=[...uu,...cu].filter(R=>R.id!=="dashboard"),z=R=>{c(O=>{let te;return O.includes(R)?te=O.filter(ee=>ee!==R):te=[...O,R],localStorage.setItem("hrQuickAccess",JSON.stringify(te)),te})};return a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"HR Dashboard"}),a.jsx("p",{className:"text-blue-900 mt-1",children:"Overview of personnel, attendance, and pending actions."})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:N.map(R=>a.jsx(xk,{...R},R.title))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6",children:[a.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-lg shadow-sm border border-blue-100",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"font-bold text-blue-900 text-lg",children:"Pending Approvals"}),a.jsxs("span",{className:"text-xs font-medium bg-orange-100 text-orange-800 px-2 py-1 rounded-full",children:[w.length," Pending"]})]}),w.length>0?a.jsxs("div",{className:"space-y-4",children:[w.slice(0,5).map(R=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[a.jsxs("div",{className:"mb-3 sm:mb-0",children:[a.jsx("p",{className:"font-semibold text-blue-900",children:D(R.employeeId)}),a.jsxs("p",{className:"text-sm text-blue-900",children:[a.jsx("span",{className:"font-medium text-blue-900",children:R.leaveType}),"  ",R.fromDate," to ",R.toDate]}),a.jsxs("p",{className:"text-xs text-blue-900 mt-1 italic",children:['"',R.reason,'"']})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>n(R.id,"Approve"),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded hover:bg-green-700 transition-colors",children:"Approve"}),a.jsx("button",{onClick:()=>n(R.id,"Reject"),className:"px-3 py-1.5 bg-red-100 text-red-700 text-xs font-medium rounded hover:bg-red-200 transition-colors border border-red-200",children:"Reject"})]})]},R.id)),w.length>5&&a.jsxs("button",{onClick:()=>i("leaves"),className:"w-full text-center text-sm text-blue-900 hover:underline py-2",children:["View all ",w.length," requests"]})]}):a.jsxs("div",{className:"text-center py-10",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-green-100 text-green-600 mb-3",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("p",{className:"text-blue-900 font-medium",children:"All caught up!"}),a.jsx("p",{className:"text-blue-900 text-sm",children:"No pending leave requests."})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-blue-100 flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"font-bold text-blue-900 text-lg",children:"Create Shortcuts"}),a.jsx("button",{onClick:()=>g(!0),className:"text-blue-900 hover:text-blue-800 text-xs font-medium hover:underline",children:"Customize"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.map(R=>{const O=P.find(ee=>ee.id===R);if(!O)return null;const te=O.icon;return a.jsxs("button",{onClick:()=>i(R),className:"flex flex-col items-center justify-center p-4 bg-blue-50 hover:bg-blue-100 border border-blue-200 hover:border-blue-300 rounded-lg transition-all duration-200 group",children:[a.jsx(te,{className:"w-6 h-6 text-blue-900 group-hover:text-blue-900 mb-2"}),a.jsx("span",{className:"text-xs font-medium text-blue-900 group-hover:text-blue-900 text-center line-clamp-1",children:O.label})]},R)}),a.jsxs("button",{onClick:()=>g(!0),className:"flex flex-col items-center justify-center p-4 border-2 border-dashed border-blue-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-all text-blue-900 hover:text-blue-900",children:[a.jsx("span",{className:"text-2xl leading-none mb-1",children:"+"}),a.jsx("span",{className:"text-xs font-medium",children:"Add"})]})]})]})]}),p&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:()=>g(!1),children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",onClick:R=>R.stopPropagation(),children:[a.jsxs("div",{className:"p-5 border-b border-blue-100",children:[a.jsx("h3",{className:"font-bold text-lg text-blue-900",children:"Create Shortcuts"}),a.jsx("p",{className:"text-sm text-blue-900",children:"Select shortcuts to pin to your dashboard."})]}),a.jsx("div",{className:"p-5 max-h-[60vh] overflow-y-auto grid grid-cols-1 gap-2",children:P.map(R=>{const O=l.includes(R.id),te=R.icon;return a.jsxs("label",{className:`flex items-center p-3 rounded-lg border cursor-pointer transition-colors ${O?"bg-blue-50 border-blue-200":"bg-white border-blue-200 hover:bg-blue-50"}`,children:[a.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-blue-900 rounded focus:ring-blue-900 border-blue-300",checked:O,onChange:()=>z(R.id)}),a.jsxs("div",{className:"ml-3 flex items-center",children:[a.jsx(te,{className:"w-5 h-5 text-blue-900"}),a.jsx("span",{className:"ml-3 text-sm font-medium text-blue-900",children:R.label})]})]},R.id)})}),a.jsx("div",{className:"p-5 border-t border-blue-100 flex justify-end",children:a.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-blue-900 text-white rounded-md text-sm font-medium hover:bg-blue-800",children:"Done"})})]})})]})},gn=({id:s,label:e,type:n="text",value:i,onChange:l,required:c=!1,placeholder:p,disabled:g=!1})=>a.jsxs("div",{children:[a.jsx("label",{htmlFor:s,className:"block text-sm font-medium text-blue-900",children:e}),a.jsx("input",{type:n,id:s,name:s,value:i||"",onChange:l,required:c,placeholder:p,disabled:g,className:"mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm disabled:bg-slate-100 disabled:text-blue-900"})]}),ca=({id:s,label:e,value:n,onChange:i,children:l,required:c=!1})=>a.jsxs("div",{children:[a.jsx("label",{htmlFor:s,className:"block text-sm font-medium text-blue-900",children:e}),a.jsx("select",{id:s,name:s,value:n||"",onChange:i,required:c,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md",children:l})]}),ad=({title:s,children:e})=>a.jsxs("div",{className:"pt-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-4 border-b pb-2",children:s}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e})]}),bk=({isOpen:s,onClose:e,employee:n,onSave:i})=>{const[l,c]=V.useState({});if(V.useEffect(()=>{n&&c(n)},[n]),!s)return null;const p=f=>{const{id:x,value:N}=f.target;c(w=>({...w,[x]:N}))},g=f=>{f.preventDefault();const{id:x,...N}=l;n.id&&i(n.id,N)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",onClick:e,children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] flex flex-col",onClick:f=>f.stopPropagation(),children:[a.jsx("div",{className:"sticky top-0 bg-white p-6 border-b z-10",children:a.jsxs("h2",{className:"text-xl font-bold text-blue-900",children:["Edit Employee: ",n.firstName," ",n.lastName]})}),a.jsxs("form",{onSubmit:g,className:"flex-1 overflow-y-auto",children:[a.jsx("div",{className:"p-8",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs(ad,{title:"Personal Details",children:[a.jsx(gn,{id:"employeeId",label:"Employee ID",value:l.employeeId,onChange:p,placeholder:"e.g., EMP-001"}),a.jsx(gn,{id:"firstName",label:"First Name",value:l.firstName,onChange:p,required:!0}),a.jsx(gn,{id:"lastName",label:"Last Name",value:l.lastName,onChange:p,required:!0}),a.jsx(gn,{id:"fatherName",label:"Father's Name",value:l.fatherName,onChange:p,required:!0}),a.jsx(gn,{id:"cnic",label:"CNIC",value:l.cnic,onChange:p,placeholder:"e.g., 35202-1234567-1"}),a.jsx(gn,{id:"dob",label:"Date of Birth",type:"date",value:l.dob,onChange:p}),a.jsxs(ca,{id:"gender",label:"Gender",value:l.gender,onChange:p,children:[a.jsx("option",{children:"Male"}),a.jsx("option",{children:"Female"}),a.jsx("option",{children:"Other"})]}),a.jsxs(ca,{id:"maritalStatus",label:"Marital Status",value:l.maritalStatus,onChange:p,children:[a.jsx("option",{children:"Single"}),a.jsx("option",{children:"Married"})]})]}),a.jsxs(ad,{title:"Contact & Address",children:[a.jsx(gn,{id:"phone",label:"Phone Number",value:l.phone,onChange:p,placeholder:"e.g., 0300-1234567"}),a.jsx(gn,{id:"email",label:"Official Email (Username)",type:"email",value:l.email,onChange:()=>{},required:!0,disabled:!0}),a.jsx(gn,{id:"personalEmail",label:"Personal Email",type:"email",value:l.personalEmail,onChange:p}),a.jsx(gn,{id:"currentAddress",label:"Current Address",value:l.currentAddress,onChange:p}),a.jsx(gn,{id:"permanentAddress",label:"Permanent Address",value:l.permanentAddress,onChange:p})]}),a.jsxs(ad,{title:"Employment Details",children:[a.jsxs(ca,{id:"department",label:"Department",value:l.department,onChange:p,required:!0,children:[a.jsx("option",{children:"Human Resources"}),a.jsx("option",{children:"IT"}),a.jsx("option",{children:"Finance"}),a.jsx("option",{children:"Engineering"}),a.jsx("option",{children:"Marketing"}),a.jsx("option",{children:"Sales"})]}),a.jsx(gn,{id:"designation",label:"Designation",value:l.designation,onChange:p,required:!0}),a.jsx(gn,{id:"joiningDate",label:"Joining Date",type:"date",value:l.joiningDate,onChange:p,required:!0}),a.jsxs(ca,{id:"shift",label:"Shift Timing",value:l.shift,onChange:p,required:!0,children:[a.jsx("option",{children:"Morning (09:00 AM - 06:00 PM)"}),a.jsx("option",{children:"Evening (02:00 PM - 11:00 PM)"}),a.jsx("option",{children:"Night (10:00 PM - 07:00 AM)"})]}),a.jsxs(ca,{id:"employmentType",label:"Employment Type",value:l.employmentType,onChange:p,children:[a.jsx("option",{children:"Permanent"}),a.jsx("option",{children:"Probation"}),a.jsx("option",{children:"Intern"})]}),a.jsxs(ca,{id:"status",label:"Status",value:l.status,onChange:p,children:[a.jsx("option",{children:"Active"}),a.jsx("option",{children:"Resigned"}),a.jsx("option",{children:"Terminated"})]})]}),a.jsxs(ad,{title:"Financial & System Access",children:[a.jsx(gn,{id:"salary",label:"Salary (PKR)",type:"number",value:l.salary,onChange:p,required:!0}),a.jsx(gn,{id:"bankName",label:"Bank Name",value:l.bankName,onChange:p}),a.jsx(gn,{id:"accountTitle",label:"Account Title",value:l.accountTitle,onChange:p}),a.jsx(gn,{id:"accountNumber",label:"Account Number",value:l.accountNumber,onChange:p}),a.jsxs(ca,{id:"role",label:"System Role",value:l.role,onChange:p,required:!0,children:[a.jsx("option",{value:"Employee",children:"Employee"}),a.jsx("option",{value:"HOD",children:"HOD"}),a.jsx("option",{value:"HR",children:"HR"})]})]})]})}),a.jsxs("div",{className:"sticky bottom-0 bg-slate-50 p-4 flex justify-end gap-4 border-t",children:[a.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 border border-slate-300 rounded-md shadow-sm text-sm font-medium text-blue-900 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",children:"Cancel"}),a.jsx("button",{type:"submit",className:"py-2 px-6 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500",children:"Save Changes"})]})]})]})})},$y={employeeId:"",firstName:"",lastName:"",fatherName:"",cnic:"",dob:"",gender:"Male",maritalStatus:"Single",currentAddress:"",permanentAddress:"",email:"",personalEmail:"",phone:"",emergencyContactName:"",emergencyContactPhone:"",department:"Human Resources",designation:"",joiningDate:"",employmentType:"Probation",status:"Active",salary:"",shift:"Morning (09:00 AM - 06:00 PM)",bankName:"",accountTitle:"",accountNumber:"",role:"Employee",password:"",confirmPassword:""},Zt=({id:s,label:e,type:n="text",value:i,onChange:l,required:c=!1,placeholder:p})=>a.jsxs("div",{children:[a.jsx("label",{htmlFor:s,className:"block text-sm font-medium text-blue-900",children:e}),a.jsx("input",{type:n,id:s,name:s,value:i||"",onChange:l,required:c,placeholder:p,className:"mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 text-blue-900 focus:outline-none focus:ring-blue-900 focus:border-blue-900 sm:text-sm"})]}),yo=({id:s,label:e,value:n,onChange:i,children:l,required:c=!1})=>a.jsxs("div",{children:[a.jsx("label",{htmlFor:s,className:"block text-sm font-medium text-blue-900",children:e}),a.jsx("select",{id:s,name:s,value:n||"",onChange:i,required:c,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 text-blue-900 focus:outline-none focus:ring-blue-900 focus:border-blue-900 sm:text-sm rounded-md",children:l})]}),Wl=({title:s,children:e})=>a.jsxs("div",{className:"pt-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-4 border-b pb-2",children:s}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e})]}),vk=({onAddEmployee:s,employees:e,onResignEmployee:n,onUpdateEmployee:i})=>{const[l,c]=V.useState($y),[p,g]=V.useState(null),[f,x]=V.useState(null),[N,w]=V.useState(!1),[D,P]=V.useState(null),[z,R]=V.useState(!1);V.useEffect(()=>{if(p){const k=setTimeout(()=>g(null),5e3);return()=>clearTimeout(k)}},[p]),V.useEffect(()=>{if(f){const k=setTimeout(()=>x(null),5e3);return()=>clearTimeout(k)}},[f]);const O=k=>{const{id:S,value:j}=k.target;c(E=>({...E,[S]:j}))},te=k=>{c(S=>({...S,employmentType:k}))},ee=k=>{if(k.preventDefault(),l.password!==l.confirmPassword){g({type:"error",text:"Passwords do not match."});return}if(l.password.length<6){g({type:"error",text:"Password must be at least 6 characters long."});return}const{password:S,confirmPassword:j,...E}=l;s(E,S),x({type:"success",text:`Employee ${l.firstName} ${l.lastName} added successfully.`}),c($y),R(!1)},ue=k=>{P(k),w(!0)},re=()=>{P(null),w(!1)},$=async(k,S)=>{const j=await i(k,S);x({type:j.success?"success":"error",text:j.message}),j.success&&re()},X=async k=>{if(window.confirm(`Are you sure you want to mark ${k.firstName} ${k.lastName} as resigned?`)){const S=await n(k.id);x({type:S.success?"success":"error",text:S.message})}},T=V.useMemo(()=>[...e].sort((k,S)=>k.status==="Resigned"&&S.status!=="Resigned"?1:k.status!=="Resigned"&&S.status==="Resigned"?-1:0),[e]);return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Employee Management"}),a.jsx("button",{onClick:()=>R(!z),className:`py-2 px-4 rounded-md shadow-sm text-sm font-medium text-white transition-colors ${z?"bg-red-500 hover:bg-red-600":"bg-blue-900 hover:bg-blue-800"}`,children:z?"Cancel Adding":"Add New Employee"})]}),z&&a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm max-w-6xl mx-auto border border-blue-100",children:[a.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-6",children:"Add New Employee"}),a.jsxs("form",{onSubmit:ee,className:"space-y-6",children:[a.jsxs(Wl,{title:"Personal Details",children:[a.jsx(Zt,{id:"employeeId",label:"Employee ID",value:l.employeeId,onChange:O,placeholder:"e.g., EMP-001"}),a.jsx(Zt,{id:"firstName",label:"First Name",value:l.firstName,onChange:O,required:!0}),a.jsx(Zt,{id:"lastName",label:"Last Name",value:l.lastName,onChange:O,required:!0}),a.jsx(Zt,{id:"fatherName",label:"Father's Name",value:l.fatherName,onChange:O,required:!0}),a.jsx(Zt,{id:"cnic",label:"CNIC",value:l.cnic,onChange:O,placeholder:"e.g., 35202-1234567-1"}),a.jsx(Zt,{id:"dob",label:"Date of Birth",type:"date",value:l.dob,onChange:O}),a.jsxs(yo,{id:"gender",label:"Gender",value:l.gender,onChange:O,children:[a.jsx("option",{children:"Male"}),a.jsx("option",{children:"Female"}),a.jsx("option",{children:"Other"})]}),a.jsxs(yo,{id:"maritalStatus",label:"Marital Status",value:l.maritalStatus,onChange:O,children:[a.jsx("option",{children:"Single"}),a.jsx("option",{children:"Married"})]})]}),a.jsxs(Wl,{title:"Contact & Address",children:[a.jsx(Zt,{id:"phone",label:"Phone Number",value:l.phone,onChange:O,placeholder:"e.g., 0300-1234567"}),a.jsx(Zt,{id:"email",label:"Official Email",type:"email",value:l.email,onChange:O,required:!0}),a.jsx(Zt,{id:"personalEmail",label:"Personal Email",type:"email",value:l.personalEmail,onChange:O}),a.jsx(Zt,{id:"currentAddress",label:"Current Address",value:l.currentAddress,onChange:O}),a.jsx(Zt,{id:"permanentAddress",label:"Permanent Address",value:l.permanentAddress,onChange:O})]}),a.jsxs(Wl,{title:"Employment Details",children:[a.jsxs(yo,{id:"department",label:"Department",value:l.department,onChange:O,required:!0,children:[a.jsx("option",{children:"Human Resources"}),a.jsx("option",{children:"IT"}),a.jsx("option",{children:"Finance"}),a.jsx("option",{children:"Engineering"}),a.jsx("option",{children:"Marketing"}),a.jsx("option",{children:"Sales"})]}),a.jsx(Zt,{id:"designation",label:"Designation",value:l.designation,onChange:O,required:!0}),a.jsx(Zt,{id:"joiningDate",label:"Joining Date",type:"date",value:l.joiningDate,onChange:O,required:!0}),a.jsxs(yo,{id:"shift",label:"Shift Timing",value:l.shift,onChange:O,required:!0,children:[a.jsx("option",{children:"Morning (09:00 AM - 06:00 PM)"}),a.jsx("option",{children:"Evening (02:00 PM - 11:00 PM)"}),a.jsx("option",{children:"Night (10:00 PM - 07:00 AM)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-2",children:"Employment Status"}),a.jsxs("div",{className:"flex space-x-6 mt-2",children:[a.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-blue-900 rounded focus:ring-blue-900 border-slate-300",checked:l.employmentType==="Probation",onChange:()=>te("Probation")}),a.jsx("span",{className:"ml-2 text-blue-900",children:"Probation"})]}),a.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-blue-900 rounded focus:ring-blue-900 border-slate-300",checked:l.employmentType==="Permanent",onChange:()=>te("Permanent")}),a.jsx("span",{className:"ml-2 text-blue-900",children:"Permanent"})]})]}),a.jsx("p",{className:"text-xs text-blue-900 mt-1",children:l.employmentType==="Probation"?"Leaves are not allocated during probation.":"Leaves will be allocated pro-rata based on joining date."})]}),a.jsxs(yo,{id:"status",label:"Status",value:l.status,onChange:O,children:[a.jsx("option",{children:"Active"}),a.jsx("option",{children:"Resigned"}),a.jsx("option",{children:"Terminated"})]})]}),a.jsxs(Wl,{title:"Financial & System Access",children:[a.jsx(Zt,{id:"salary",label:"Salary (PKR)",type:"number",value:l.salary,onChange:O,required:!0}),a.jsx(Zt,{id:"bankName",label:"Bank Name",value:l.bankName,onChange:O}),a.jsx(Zt,{id:"accountTitle",label:"Account Title",value:l.accountTitle,onChange:O}),a.jsx(Zt,{id:"accountNumber",label:"Account Number",value:l.accountNumber,onChange:O}),a.jsxs(yo,{id:"role",label:"System Role",value:l.role,onChange:O,required:!0,children:[a.jsx("option",{value:"Employee",children:"Employee"}),a.jsx("option",{value:"HOD",children:"HOD"}),a.jsx("option",{value:"HR",children:"HR"})]})]}),a.jsxs(Wl,{title:"Create User Account",children:[a.jsx(Zt,{id:"password",label:"Password for User Account",type:"password",value:l.password,onChange:O,required:!0,placeholder:"Min. 6 characters"}),a.jsx(Zt,{id:"confirmPassword",label:"Confirm Password",type:"password",value:l.confirmPassword,onChange:O,required:!0})]}),p&&a.jsx("div",{className:`mt-4 p-3 rounded-md text-sm ${p.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.text}),a.jsxs("div",{className:"flex justify-end pt-4 gap-4",children:[a.jsx("button",{type:"button",onClick:()=>R(!1),className:"py-2 px-6 border border-slate-300 rounded-md shadow-sm text-sm font-medium text-blue-900 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",children:"Cancel"}),a.jsx("button",{type:"submit",className:"py-2 px-6 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-900 hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900",children:"Add Employee"})]})]})]}),a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm max-w-7xl mx-auto",children:[a.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-4",children:"Employee List"}),f&&a.jsx("div",{className:`mb-4 p-3 rounded-md text-sm ${f.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:f.text}),a.jsx("div",{className:"overflow-x-auto",children:e.length>0?a.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[a.jsx("thead",{className:"bg-slate-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Emp. ID"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Name"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Designation"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Department"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Shift"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Status"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Salary (PKR)"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:T.map(k=>a.jsxs("tr",{className:`${k.status==="Resigned"?"bg-slate-50 opacity-60":""} hover:bg-purple-50 transition-colors`,children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-blue-900",children:k.employeeId||"N/A"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:[k.firstName," ",k.lastName,a.jsx("div",{className:"text-xs text-blue-900 font-normal",children:k.email})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:k.designation}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:k.department}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:k.shift||"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${k.status==="Active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:k.status})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:k.salary}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-4",children:[a.jsx("button",{onClick:()=>ue(k),className:"text-blue-900 hover:text-blue-950",children:"Edit"}),a.jsx("button",{onClick:()=>X(k),disabled:k.status==="Resigned",className:"text-orange-600 hover:text-orange-900 disabled:text-blue-900 disabled:cursor-not-allowed disabled:no-underline",children:"Resign"})]})]},k.id))})]}):a.jsx("p",{className:"text-center text-blue-900 py-10",children:'There are no employees to display. Click "Add New Employee" to get started.'})})]}),N&&D&&a.jsx(bk,{isOpen:N,onClose:re,employee:D,onSave:$})]})},wk=({users:s,employees:e})=>a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm",children:[a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Users Management"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[a.jsx("thead",{className:"bg-slate-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Name"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Email / Username"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Password"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:s.length>0?s.map((n,i)=>{const l=e.find(p=>p.email===n.email),c=n.email==="admin"?"Administrator":l?`${l.firstName} ${l.lastName}`:"N/A";return a.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:c}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:n.email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900 font-mono",children:n.password})]},i)}):a.jsx("tr",{children:a.jsx("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-blue-900",children:"No users found matching your search."})})})]})})]}),Qd=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),Nk=({options:s,value:e,onChange:n,placeholder:i})=>{const[l,c]=V.useState(!1),p=V.useRef(null),g=s.find(x=>x.value===e);V.useEffect(()=>{const x=N=>{p.current&&!p.current.contains(N.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[]);const f=x=>{n(x.value),c(!1)};return a.jsxs("div",{className:"relative mt-1",ref:p,children:[a.jsxs("button",{type:"button",className:"relative w-full cursor-default rounded-md border border-slate-300 bg-white py-2 pl-3 pr-10 text-left shadow-sm focus:border-teal-500 focus:outline-none focus:ring-1 focus:ring-teal-500 sm:text-sm",onClick:()=>c(!l),"aria-haspopup":"listbox","aria-expanded":l,children:[g?a.jsxs("div",{children:[a.jsx("span",{className:"block truncate font-medium text-slate-800",children:g.primaryText}),a.jsx("span",{className:"block truncate text-xs text-slate-500",children:g.secondaryText})]}):a.jsx("span",{className:"text-slate-500",children:i}),a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:a.jsx(Qd,{className:`h-5 w-5 text-slate-400 transition-transform ${l?"rotate-180":""}`,"aria-hidden":"true"})})]}),l&&a.jsx("ul",{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",role:"listbox",children:s.map(x=>a.jsx("li",{className:"relative cursor-default select-none py-2 pl-3 pr-9 text-slate-900 hover:bg-teal-50",onClick:()=>f(x),role:"option","aria-selected":e===x.value,children:a.jsxs("div",{children:[a.jsx("span",{className:`block truncate ${e===x.value?"font-semibold":"font-normal"}`,children:x.primaryText}),a.jsx("span",{className:"block truncate text-xs text-slate-500",children:x.secondaryText})]})},x.value))})]})},kk=[{id:"hr",name:"HR Module"},{id:"inventory_management",name:"Inventory Management"},{id:"supply_chain",name:"Supply Chain Module"},{id:"finance",name:"Finance Module"},{id:"student",name:"Student Module"},{id:"website",name:"Website & Portals"}],By=["view","edit","delete","update"],jk=({users:s,employees:e,allPermissions:n,onUserPermissionsChange:i})=>{const[l,c]=V.useState(null),[p,g]=V.useState(null),[f,x]=V.useState(new Set),[N,w]=V.useState(null),D=s.filter(ee=>ee.email!=="admin").map(ee=>{const ue=e.find(X=>X.email===ee.email),re=ue?`${ue.firstName} ${ue.lastName}`:ee.email,$=ue?ee.email:"No employee record";return{value:ee.email,primaryText:re,secondaryText:$}});V.useEffect(()=>{l?(g(n[l]||{}),x(new Set)):g(null)},[l,n]),V.useEffect(()=>{if(N){const ee=setTimeout(()=>w(null),5e3);return()=>clearTimeout(ee)}},[N]);const P=(ee,ue)=>{g(re=>{if(!re)return null;const $={...re};if(ue){const X=zy[ee]||[],T={};X.forEach(k=>{T[k.id]={view:!1,edit:!1,delete:!1,update:!1}}),$[ee]=T}else delete $[ee],x(X=>{const T=new Set(X);return T.delete(ee),T});return $})},z=ee=>{x(ue=>{const re=new Set(ue);return re.has(ee)?re.delete(ee):re.add(ee),re})},R=(ee,ue,re,$)=>{g(X=>{if(!X)return null;const T=X[ee]||{},k=T[ue]||{view:!1,edit:!1,delete:!1,update:!1};return{...X,[ee]:{...T,[ue]:{...k,[re]:$}}}})},O=()=>{!l||p===null||(i(l,p),w({type:"success",text:`Permissions for ${l} have been updated.`}),c(null))},te=()=>{c(null),g(null)};return a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm max-w-5xl mx-auto",children:[a.jsx("h1",{className:"text-2xl font-bold text-blue-900 mb-6",children:"User Access Management"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{htmlFor:"select-user",className:"block text-sm font-medium text-blue-900",children:"Select a user to manage their module access"}),a.jsx(Nk,{options:D,value:l,onChange:c,placeholder:"-- Select a user --"})]}),N&&a.jsx("div",{className:`my-4 p-3 rounded-md text-sm ${N.type==="error"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:N.text}),l&&p!==null&&a.jsxs("div",{children:[a.jsx("div",{className:"space-y-4",children:kk.map(ee=>{const ue=!!p[ee.id],re=f.has(ee.id),$=zy[ee.id]||[];return a.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden transition-all duration-300",children:[a.jsxs("div",{className:"flex items-center p-4 bg-slate-50",children:[a.jsx("input",{type:"checkbox",id:`module-access-${ee.id}`,className:"h-5 w-5 text-teal-600 border-slate-300 rounded focus:ring-teal-500",checked:ue,onChange:X=>P(ee.id,X.target.checked)}),a.jsx("label",{htmlFor:`module-access-${ee.id}`,className:"ml-3 flex-1 text-lg font-semibold text-blue-900 cursor-pointer",children:ee.name}),a.jsx("button",{onClick:()=>z(ee.id),disabled:!ue,className:"p-1 text-blue-900 rounded-full hover:bg-slate-200 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-transparent","aria-expanded":re,children:a.jsx(Qd,{className:`w-5 h-5 transition-transform duration-300 ${re?"rotate-180":""}`})})]}),ue&&re&&a.jsxs("div",{className:"bg-white p-4 border-t border-slate-200",children:[a.jsx("h3",{className:"text-md font-semibold text-blue-900 mb-3",children:"Page Permissions"}),$.length>0?a.jsxs("table",{className:"min-w-full divide-y divide-slate-200 border",children:[a.jsx("thead",{className:"bg-slate-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Feature"}),By.map(X=>a.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-blue-900 uppercase tracking-wider",children:X},X))]})}),a.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:$.map(X=>a.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:X.label}),By.map(T=>{var k,S;return a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900 text-center",children:a.jsx("input",{type:"checkbox",className:"h-4 w-4 text-teal-600 border-slate-300 rounded focus:ring-teal-500",checked:((S=(k=p[ee.id])==null?void 0:k[X.id])==null?void 0:S[T])||!1,onChange:j=>R(ee.id,X.id,T,j.target.checked)})},T)})]},X.id))})]}):a.jsx("p",{className:"text-sm text-blue-900",children:"No configurable pages for this module."})]})]},ee.id)})}),a.jsxs("div",{className:"flex justify-end pt-6 gap-3",children:[a.jsx("button",{onClick:te,className:"py-2 px-4 border border-slate-300 rounded-md shadow-sm text-sm font-medium text-blue-900 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",children:"Cancel"}),a.jsx("button",{onClick:O,className:"py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500",children:"Save Permissions"})]})]})]})},Sk=({employee:s,onApply:e,onCancel:n})=>{const[i,l]=V.useState({fromDate:"",toDate:"",leaveType:"Casual Leave",reason:""}),[c,p]=V.useState("");V.useEffect(()=>{if(c){const w=setTimeout(()=>p(""),5e3);return()=>clearTimeout(w)}},[c]);const g=V.useMemo(()=>{if(i.fromDate&&i.toDate){const w=new Date(i.fromDate),D=new Date(i.toDate);if(D<w)return 0;const P=Math.abs(D.getTime()-w.getTime());return Math.ceil(P/(1e3*60*60*24))+1}return 0},[i.fromDate,i.toDate]),f=V.useMemo(()=>{var w;const D={"Casual Leave":"casual","Sick Leave":"sick","Annual Leave":"annual","Maternity Leave":"maternity","Paternity Leave":"paternity","Alternate Day Off":"alternateDayOff",Others:"others"}[i.leaveType],P=((w=s.leaveBalance)==null?void 0:w[D])||{total:0,used:0};return{total:P.total,used:P.used,remaining:Math.max(0,P.total-P.used)}},[i.leaveType,s.leaveBalance]),x=w=>{const{id:D,value:P}=w.target;l(z=>({...z,[D]:P}))},N=w=>{if(w.preventDefault(),!i.fromDate||!i.toDate||!i.reason){p("Please fill in all required fields.");return}if(new Date(i.toDate)<new Date(i.fromDate)){p('"To Date" cannot be earlier than "From Date".');return}if(i.leaveType!=="Others"){if(f.remaining<=0){p(`Your ${i.leaveType} quota is exhausted. Please select a different leave type.`);return}if(g>f.remaining){p(`Insufficient balance for ${i.leaveType}. You have ${f.remaining} days remaining, but requested ${g}.`);return}}p("");const D={employeeId:s.id,...i,status:"Pending HOD"};e(D),n()};return a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm max-w-4xl mx-auto",children:[a.jsx("h1",{className:"text-2xl font-bold text-blue-900 mb-6",children:"Apply for Leave"}),a.jsxs("form",{onSubmit:N,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 p-4 border rounded-md bg-slate-50",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Name:"})," ",a.jsxs("span",{className:"text-sm text-blue-900",children:[s.firstName," ",s.lastName]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Department:"})," ",a.jsx("span",{className:"text-sm text-blue-900",children:s.department})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"fromDate",className:"block text-sm font-medium text-blue-900",children:"From Date"}),a.jsx("input",{type:"date",id:"fromDate",value:i.fromDate,onChange:x,required:!0,className:"mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"toDate",className:"block text-sm font-medium text-blue-900",children:"To Date"}),a.jsx("input",{type:"date",id:"toDate",value:i.toDate,onChange:x,required:!0,className:"mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]})]}),a.jsxs("div",{className:"p-3 text-center bg-teal-50 border border-teal-200 rounded-md",children:[a.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Leave Days Requested:"}),a.jsx("span",{className:"ml-2 text-md font-bold text-teal-600",children:g>0?g:"--"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"leaveType",className:"block text-sm font-medium text-blue-900",children:"Leave Type"}),a.jsxs("select",{id:"leaveType",value:i.leaveType,onChange:x,required:!0,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md",children:[a.jsx("option",{children:"Casual Leave"}),a.jsx("option",{children:"Sick Leave"}),a.jsx("option",{children:"Annual Leave"}),a.jsx("option",{children:"Maternity Leave"}),a.jsx("option",{children:"Paternity Leave"}),a.jsx("option",{children:"Alternate Day Off"}),a.jsx("option",{children:"Others"})]}),i.leaveType!=="Others"&&a.jsxs("p",{className:`mt-1 text-xs ${f.remaining===0?"text-red-600 font-bold":"text-blue-900"}`,children:["Remaining Balance: ",f.remaining," days (Used: ",f.used,"/",f.total,")"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"reason",className:"block text-sm font-medium text-blue-900",children:"Reason for Leave"}),a.jsx("textarea",{id:"reason",value:i.reason,onChange:x,rows:4,required:!0,className:"mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]}),c&&a.jsx("div",{className:"p-3 rounded-md text-sm bg-red-100 text-red-800 border border-red-200",children:c}),a.jsxs("div",{className:"flex justify-end pt-4 gap-3",children:[a.jsx("button",{type:"button",onClick:n,className:"py-2 px-4 border border-slate-300 rounded-md shadow-sm text-sm font-medium text-blue-900 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:i.leaveType!=="Others"&&f.remaining<=0,className:"py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 disabled:bg-slate-400 disabled:cursor-not-allowed",children:"Apply for Leave"})]})]})]})},Ck=({employee:s})=>{var e,n,i,l,c,p,g;const[f,x]=V.useState(!1),N=s.employmentType==="Probation",w=N?{annual:{total:0,used:0},sick:{total:0,used:0},casual:{total:0,used:0},maternity:{total:0,used:0},paternity:{total:0,used:0},alternateDayOff:{total:0,used:0}}:{annual:((e=s.leaveBalance)==null?void 0:e.annual)||{total:14,used:0},sick:((n=s.leaveBalance)==null?void 0:n.sick)||{total:7,used:0},casual:((i=s.leaveBalance)==null?void 0:i.casual)||{total:6,used:0},maternity:((l=s.leaveBalance)==null?void 0:l.maternity)||{total:90,used:0},paternity:((c=s.leaveBalance)==null?void 0:c.paternity)||{total:7,used:0},alternateDayOff:((p=s.leaveBalance)==null?void 0:p.alternateDayOff)||{total:50,used:0},others:((g=s.leaveBalance)==null?void 0:g.others)||{}},D=(z,R)=>!R||R===0?0:Math.min(100,z/R*100),P=({label:z,data:R,colorClass:O})=>{const te=R||{total:0,used:0},ee=te.used||0,ue=te.total||0;return a.jsxs("div",{className:"mb-4 last:mb-0",children:[a.jsxs("div",{className:"flex justify-between text-sm mb-1 font-medium text-blue-900",children:[a.jsx("span",{children:z}),a.jsxs("span",{children:[ee," / ",ue," Days Used"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:a.jsx("div",{className:`h-2.5 rounded-full ${O}`,style:{width:`${D(ee,ue)}%`}})}),a.jsxs("div",{className:"text-xs text-right text-blue-900 mt-1",children:[Math.max(0,ue-ee)," Remaining"]})]})};return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 mb-6 overflow-hidden",children:[a.jsxs("button",{onClick:()=>x(!f),className:"w-full flex justify-between items-center p-4 bg-slate-50 hover:bg-slate-100 transition-colors",children:[a.jsxs("span",{className:"font-bold text-blue-900",children:["My Leave Balance ",N&&"(Probation - No Leaves Allocated)"]}),a.jsxs("div",{className:"flex items-center text-sm text-blue-900 font-medium",children:[f?"Hide Details":"Show Details",a.jsx(Qd,{className:`ml-2 w-4 h-4 transition-transform ${f?"rotate-180":""}`})]})]}),f&&a.jsx("div",{className:"p-6 border-t border-slate-200",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100",children:a.jsx(P,{label:"Annual Leave",data:w.annual,colorClass:"bg-blue-900"})}),a.jsx("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-100",children:a.jsx(P,{label:"Sick Leave",data:w.sick,colorClass:"bg-purple-600"})}),a.jsx("div",{className:"p-4 bg-indigo-50 rounded-lg border border-indigo-100",children:a.jsx(P,{label:"Casual Leave",data:w.casual,colorClass:"bg-indigo-600"})}),a.jsx("div",{className:"p-4 bg-pink-50 rounded-lg border border-pink-100",children:a.jsx(P,{label:"Maternity Leave",data:w.maternity,colorClass:"bg-pink-500"})}),a.jsx("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:a.jsx(P,{label:"Paternity Leave",data:w.paternity,colorClass:"bg-slate-600"})}),a.jsx("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-100",children:a.jsx(P,{label:"Alternate Day Off",data:w.alternateDayOff,colorClass:"bg-purple-800"})})]})})]})},Ek=({currentUserEmail:s,employees:e,leaveRequests:n,onAddLeaveRequest:i,onLeaveRequestAction:l})=>{const[c,p]=V.useState(!1),g=s==="admin",f=e.find(z=>z.email===s),x=V.useMemo(()=>{if(!f&&!g)return[];const z=g?"admin":f==null?void 0:f.role,R=f==null?void 0:f.department;return n.filter(O=>{const te=e.find(ee=>ee.id===O.employeeId);return te?O.status==="Pending HOD"&&(z==="admin"||z==="HOD"&&te.department===R)||O.status==="Pending HR"&&(z==="admin"||z==="HR"):!1})},[n,s,e,g,f]),N=f?n.filter(z=>z.employeeId===f.id).sort((z,R)=>new Date(R.fromDate).getTime()-new Date(z.fromDate).getTime()):[],w=z=>{const R=e.find(O=>O.id===z);return R?`${R.firstName} ${R.lastName}`:"Unknown Employee"},D=({status:z})=>{const R="px-2.5 py-0.5 text-xs font-medium rounded-full",O={"Pending HOD":"bg-yellow-100 text-yellow-800","Pending HR":"bg-orange-100 text-orange-800",Approved:"bg-green-100 text-green-800",Rejected:"bg-red-100 text-red-800"};return a.jsx("span",{className:`${R} ${O[z]}`,children:z})};if(c&&f)return a.jsx(Sk,{employee:f,onApply:i,onCancel:()=>p(!1)});const P=(f==null?void 0:f.role)==="Employee"&&(f==null?void 0:f.employmentType)!=="Probation";return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Leave Management"}),P&&a.jsx("button",{onClick:()=>p(!0),className:"py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-700 hover:bg-purple-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",children:"Apply for Leave"})]}),f&&a.jsx(Ck,{employee:f}),x.length>0&&a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[a.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-4",children:"Awaiting Your Approval"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[a.jsx("thead",{className:"bg-slate-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Employee"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Dates"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Reason"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:x.map(z=>a.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 text-sm font-medium text-blue-900",children:w(z.employeeId)}),a.jsxs("td",{className:"px-6 py-4 text-sm text-blue-900",children:[z.fromDate," to ",z.toDate]}),a.jsx("td",{className:"px-6 py-4 text-sm text-blue-900",children:z.leaveType}),a.jsx("td",{className:"px-6 py-4 text-sm text-blue-900 max-w-xs truncate",title:z.reason,children:z.reason}),a.jsx("td",{className:"px-6 py-4 text-sm",children:a.jsx(D,{status:z.status})}),a.jsxs("td",{className:"px-6 py-4 text-sm space-x-2",children:[a.jsx("button",{onClick:()=>l(z.id,"Approve"),className:"text-green-600 hover:text-green-900 font-medium",children:"Approve"}),a.jsx("button",{onClick:()=>l(z.id,"Reject"),className:"text-red-600 hover:text-red-900 font-medium",children:"Reject"})]})]},z.id))})]})})]}),N.length>0&&a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[a.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-4",children:"My Leave History"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[a.jsx("thead",{className:"bg-slate-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"From"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"To"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Reason"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Status"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:N.map(z=>a.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 text-sm text-blue-900",children:z.fromDate}),a.jsx("td",{className:"px-6 py-4 text-sm text-blue-900",children:z.toDate}),a.jsx("td",{className:"px-6 py-4 text-sm text-blue-900",children:z.leaveType}),a.jsx("td",{className:"px-6 py-4 text-sm text-blue-900 max-w-xs truncate",title:z.reason,children:z.reason}),a.jsx("td",{className:"px-6 py-4 text-sm",children:a.jsx(D,{status:z.status})})]},z.id))})]})})]})]})},_k=[{name:"School of Arts",departments:["Department of Fine Arts","Department of Music","Department of Performing Arts","Department of Visual Arts"]},{name:"School of SIR",departments:["Department of Information Technology","Department of Robotics","Department of Software Engineering","Department of Data Science"]},{name:"School of SADU",departments:["Department of Architecture & Design","Department of Urban & Regional Planning","Department of Interior Design"]},{name:"School of SDCA",departments:["Department of Digital Communication","Department of Animation & VFX","Department of Media & Cultural Studies","Department of Game Design"]}],Tk=()=>{const[s,e]=V.useState(null),n=i=>{e(s===i?null:i)};return a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm max-w-4xl mx-auto",children:[a.jsx("h1",{className:"text-2xl font-bold text-blue-900 mb-6",children:"Departments by School"}),a.jsx("div",{className:"space-y-4",children:_k.map(i=>{const l=s===i.name;return a.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden transition-all duration-300",children:[a.jsxs("button",{onClick:()=>n(i.name),className:"w-full flex justify-between items-center p-4 bg-slate-50 hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-inset","aria-expanded":l,"aria-controls":`departments-${i.name}`,children:[a.jsx("h2",{className:"text-lg font-semibold text-blue-900",children:i.name}),a.jsx(Qd,{className:`w-5 h-5 text-blue-900 transition-transform duration-300 ${l?"rotate-180":""}`})]}),l&&a.jsx("div",{id:`departments-${i.name}`,className:"bg-white p-4 border-t border-slate-200",children:a.jsx("ul",{className:"space-y-2 pl-4 list-disc list-inside",children:i.departments.map(c=>a.jsx("li",{className:"text-blue-900 text-sm",children:c},c))})})]},i.name)})})]})},Hy=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 11.21 12.75 11 12 11c-.75 0-1.536.21-2.121.659-1.172.879-1.172 2.303 0 3.182zM12 21a9 9 0 110-18 9 9 0 010 18z"})}),da=({icon:s,title:e,value:n,bgColor:i})=>a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm flex items-center space-x-4",children:[a.jsx("div",{className:`p-3 rounded-full ${i}`,children:a.jsx(s,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-blue-900",children:e}),a.jsx("p",{className:"text-xl font-bold text-blue-900",children:n})]})]}),_r=s=>new Intl.NumberFormat("en-PK",{style:"currency",currency:"PKR",minimumFractionDigits:0,maximumFractionDigits:0}).format(s).replace("PKR","PKR "),Ik=({employees:s,payrollHistory:e,attendanceRecords:n=[],leaveRequests:i=[],onRunPayroll:l})=>{const[c,p]=V.useState(!1),[g,f]=V.useState(null),[x,N]=V.useState(null),[w,D]=V.useState(()=>new Date().toISOString().slice(0,7));V.useEffect(()=>{if(x){const re=setTimeout(()=>N(null),5e3);return()=>clearTimeout(re)}},[x]);const P=s.reduce((re,$)=>re+parseFloat($.salary||"0"),0),z=s.length>0?P/s.length:0,R=new Date;R.setMonth(R.getMonth()+1,0);const O=async()=>{if(window.confirm(`Are you sure you want to run payroll for ${w}? This calculates deductions based on attendance.`)){const re=await l();N({type:re.success?"success":"error",text:re.message})}},te=(re,$,X,T)=>{const k=n.filter(j=>{const E=new Date(j.date);return(j.employeeId===$||j.employeeId===re)&&E.getMonth()===T&&E.getFullYear()===X}).length;let S=0;return i.filter(j=>j.employeeId===re&&j.status==="Approved").forEach(j=>{const E=new Date(j.fromDate),A=new Date(j.toDate);for(let _=new Date(E);_<=A;_.setDate(_.getDate()+1))if(_.getMonth()===T&&_.getFullYear()===X){const be=_.toISOString().split("T")[0];n.some(Ae=>(Ae.employeeId===$||Ae.employeeId===re)&&Ae.date===be)||S++}}),{daysPresent:k,approvedLeaveDays:S,totalPaidDays:k+S}},ee=re=>{const[$,X]=w.split("-").map(Number),T=X-1,{daysPresent:k,approvedLeaveDays:S,totalPaidDays:j}=te(re.id,re.employeeId,$,T),E=parseFloat(re.salary||"0");let A=E,_=0;if(n.some(Ee=>{const Oe=new Date(Ee.date);return Oe.getMonth()===T&&Oe.getFullYear()===$})){const Ee=Math.min(30,j);A=E/30*Ee,_=E-A,_<0&&(_=0)}else _=0;const be=A,Ae=new Date($,T).toLocaleString("default",{month:"long",year:"numeric"}),B=[["MASBOT ERP Payslip"],[`Report for: ${Ae}`],[],["Employee Details"],["Employee ID",re.employeeId||re.id],["Name",`${re.firstName} ${re.lastName}`],["Department",re.department],["Designation",re.designation],[],["Attendance Summary"],["Days Present",k],["Approved Leave Days",S],["Total Paid Days",j],[],["Earnings","Amount (PKR)"],["Base Salary",E],[],["Deductions","Amount (PKR)"],["Absenteeism / Unpaid",_],[],["",""],["Net Salary",be]],de=XLSX.utils.aoa_to_sheet(B);de["!cols"]=[{wch:25},{wch:20}];const ye=XLSX.utils.book_new();XLSX.utils.book_append_sheet(ye,de,"Payslip"),XLSX.writeFile(ye,`Payslip-${re.firstName}_${re.lastName}-${w}.xlsx`)},ue=()=>{const[re,$]=w.split("-").map(Number),X=$-1;return a.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[a.jsx("thead",{className:"bg-slate-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Employee"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Days Present"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Paid Leave"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Total Days"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Base Salary"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Deductions"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Net Pay"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:s.map(T=>{const k=parseFloat(T.salary||"0"),{daysPresent:S,approvedLeaveDays:j,totalPaidDays:E}=te(T.id,T.employeeId,re,X);let A=k,_=0;const be=n.some(Ae=>{const B=new Date(Ae.date);return B.getMonth()===X&&B.getFullYear()===re});if(be){const Ae=Math.min(30,E);A=k/30*Ae,_=k-A,_<0&&(_=0)}return a.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsxs("div",{className:"text-sm font-medium text-blue-900",children:[T.firstName," ",T.lastName]}),a.jsx("div",{className:"text-xs text-blue-900",children:T.employeeId})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900 font-bold",children:be?S:"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-bold",children:be?j:"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:be?E:"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:_r(k)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-500",children:_>0?`-${_r(_)}`:"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-green-600",children:_r(A)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsx("button",{onClick:()=>ee(T),className:"text-teal-600 hover:text-teal-900",children:"Payslip"})})]},T.id)})})]})};return c?g?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("button",{onClick:()=>f(null),className:"flex items-center gap-2 text-sm font-medium text-blue-900 hover:text-teal-600",children:[a.jsx(Ed,{className:"w-5 h-5"}),a.jsx("span",{children:"Back to History"})]})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-blue-900",children:["Payroll Details: ",g.monthYear]}),a.jsxs("p",{className:"text-blue-900 mt-1",children:["Processed on ",new Date(g.date).toLocaleDateString()]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(da,{icon:Hy,title:"Total Payout",value:_r(g.totalNetPay),bgColor:"bg-green-500"}),a.jsx(da,{icon:Sd,title:"Employees Paid",value:g.employeeRecords.length.toString(),bgColor:"bg-blue-500"}),a.jsx(da,{icon:Io,title:"Total Deductions",value:_r(g.totalDeductions),bgColor:"bg-red-500"})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[a.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-4",children:"Breakdown"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[a.jsx("thead",{className:"bg-slate-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Employee"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Department"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Base Salary"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Deductions"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Net Pay"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:g.employeeRecords.map(re=>a.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:re.employeeName}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:re.department}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:_r(re.baseSalary)}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-500",children:["-",_r(re.deductions)]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-green-600",children:_r(re.netPay)})]},re.employeeId))})]})})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("button",{onClick:()=>p(!1),className:"flex items-center gap-2 text-sm font-medium text-blue-900 hover:text-teal-600",children:[a.jsx(Ed,{className:"w-5 h-5"}),a.jsx("span",{children:"Back to Payroll"})]})}),a.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Payroll History"}),e.length>0?a.jsx("div",{className:"space-y-4",children:e.map(re=>a.jsxs("div",{onClick:()=>f(re),className:"bg-white p-4 rounded-lg shadow-sm border border-transparent hover:border-teal-500 cursor-pointer transition-all flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-blue-900 text-lg",children:re.monthYear}),a.jsxs("p",{className:"text-xs text-blue-900",children:["Processed: ",new Date(re.date).toLocaleDateString()]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-blue-900",children:"Paid Out"}),a.jsx("p",{className:"font-bold text-green-600",children:_r(re.totalNetPay)})]})]},re.id))}):a.jsx("div",{className:"text-center py-10 bg-white rounded-lg",children:a.jsx("p",{className:"text-blue-900",children:"No payroll history found."})})]}):a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Payroll Management"}),a.jsx("p",{className:"text-blue-900 mt-1",children:"Salaries are automatically calculated based on attendance records and approved leaves."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(da,{icon:Hy,title:"Est. Monthly Payroll",value:_r(P),bgColor:"bg-teal-500"}),a.jsx(da,{icon:Sd,title:"Total Employees",value:s.length.toString(),bgColor:"bg-blue-500"}),a.jsx(da,{icon:Io,title:"Avg. Salary",value:_r(z),bgColor:"bg-orange-500"}),a.jsx(da,{icon:uf,title:"Next Payroll",value:R.toLocaleDateString(),bgColor:"bg-indigo-500"})]}),a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center mb-6 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("h2",{className:"text-xl font-bold text-blue-900",children:"Salaries"}),a.jsx("input",{type:"month",value:w,onChange:re=>D(re.target.value),className:"border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm text-blue-900"})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>p(!0),className:"btn-secondary py-2 px-4 border rounded-md text-sm font-medium hover:bg-gray-50 text-blue-900",children:"View History"}),a.jsx("button",{onClick:O,className:"bg-teal-600 text-white py-2 px-4 rounded-md text-sm font-medium hover:bg-teal-700 shadow-sm",children:"Finalize & Run Payroll"})]})]}),x&&a.jsx("div",{className:`mb-4 p-3 rounded-md text-sm ${x.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.text}),a.jsx("div",{className:"overflow-x-auto",children:s.length>0?ue():a.jsx("p",{className:"text-center text-blue-900 py-4",children:"No employees found."})})]})]})},Ak=({employees:s,attendanceRecords:e=[],leaveRequests:n=[]})=>{const[i,l]=V.useState("monthly"),[c,p]=V.useState("All"),[g,f]=V.useState(""),[x,N]=V.useState(()=>new Date().toISOString().slice(0,7)),[w,D]=V.useState(()=>new Date().toISOString().split("T")[0]),[P,z]=V.useState(()=>new Date().toISOString().split("T")[0]),R=V.useMemo(()=>{const $=s.map(X=>X.department);return["All",...Array.from(new Set($))]},[s]),O=V.useMemo(()=>s.filter($=>{const X=c==="All"||$.department===c,T=`${$.firstName} ${$.lastName}`.toLowerCase().includes(g.toLowerCase());return X&&T}),[s,c,g]),te=$=>{const[X,T]=x.split("-").map(Number),k=T-1,S=e.filter(A=>{const _=new Date(A.date);return(A.employeeId&&String(A.employeeId).trim()===String($.employeeId||$.id).trim()||A.employeeId===$.id)&&_.getMonth()===k&&_.getFullYear()===X});let j=0;S.length>0&&(j=Math.round(S.length/30*100),j>100&&(j=100));const E=n.filter(A=>{const _=A.employeeId===$.id,be=new Date(A.fromDate),Ae=be.getMonth()===k&&be.getFullYear()===X;return _&&A.status==="Approved"&&Ae}).length;return{attendancePct:j,approvedLeaves:E,daysPresent:S.length}},ee=V.useMemo(()=>e.filter($=>{if($.date<w||$.date>P)return!1;const X=s.find(k=>String(k.employeeId).trim()===String($.employeeId).trim()||k.id===$.employeeId);if(!X||c!=="All"&&X.department!==c)return!1;const T=`${X.firstName} ${X.lastName}`.toLowerCase();return!(g&&!T.includes(g.toLowerCase()))}).map($=>{const X=s.find(T=>String(T.employeeId).trim()===String($.employeeId).trim()||T.id===$.employeeId);return{...$,empName:X?`${X.firstName} ${X.lastName}`:"Unknown",department:(X==null?void 0:X.department)||"-",designation:(X==null?void 0:X.designation)||"-"}}).sort(($,X)=>$.date.localeCompare(X.date)||$.empName.localeCompare(X.empName)),[e,w,P,c,s,g]),ue=V.useMemo(()=>{const $=[],X=new Date(w),T=new Date(P),k=s.filter(j=>{const E=c==="All"||j.department===c,A=`${j.firstName} ${j.lastName}`.toLowerCase().includes(g.toLowerCase());return E&&A}),S=new Set;e.forEach(j=>{j.date>=w&&j.date<=P&&S.add(`${String(j.employeeId).trim()}_${j.date}`)});for(let j=new Date(X);j<=T;j.setDate(j.getDate()+1)){const E=j.toISOString().split("T")[0];k.forEach(A=>{const _=String(A.employeeId||"").trim(),be=A.id;if(!(S.has(`${_}_${E}`)||S.has(`${be}_${E}`))){const Ae=n.find(B=>B.employeeId===A.id&&B.status==="Approved"&&E>=B.fromDate&&E<=B.toDate);$.push({date:E,empId:A.employeeId||A.id,name:`${A.firstName} ${A.lastName}`,department:A.department,designation:A.designation,status:Ae?"On Leave":"Absent",remarks:Ae?Ae.leaveType:"-"})}})}return $.sort((j,E)=>j.date.localeCompare(E.date)||j.name.localeCompare(E.name))},[w,P,c,s,e,n,g]),re=()=>{if(i==="monthly"){const $=O.map((k,S)=>{const{attendancePct:j,approvedLeaves:E,daysPresent:A}=te(k);return new Intl.NumberFormat("en-PK",{style:"currency",currency:"PKR",minimumFractionDigits:0}).format(parseFloat(k.salary||"0")),{"#":S+1,Name:`${k.firstName} ${k.lastName}`,Department:k.department,Designation:k.designation,Month:x,"Days Present":A,"Attendance (%)":`${j}%`,"Leaves Taken":E}}),X=XLSX.utils.json_to_sheet($),T=XLSX.utils.book_new();XLSX.utils.book_append_sheet(T,X,"Monthly Report"),XLSX.writeFile(T,`HR_Monthly_Report_${x}.xlsx`)}else if(i==="attendance"){const $=ee.map(k=>({Date:k.date,"Employee ID":k.employeeId,Name:k.empName,Department:k.department,"Time In":k.timeIn,"Time Out":k.timeOut||"-",Status:k.status})),X=XLSX.utils.json_to_sheet($),T=XLSX.utils.book_new();XLSX.utils.book_append_sheet(T,X,"Attendance"),XLSX.writeFile(T,`Attendance_Report_${w}_to_${P}.xlsx`)}else if(i==="absent"){const $=ue.map(k=>({Date:k.date,"Employee ID":k.empId,Name:k.name,Department:k.department,Status:k.status,Remarks:k.remarks})),X=XLSX.utils.json_to_sheet($),T=XLSX.utils.book_new();XLSX.utils.book_append_sheet(T,X,"Absent"),XLSX.writeFile(T,`Absent_Report_${w}_to_${P}.xlsx`)}};return a.jsxs("div",{className:"bg-white p-6 sm:p-8 rounded-lg shadow-sm min-h-screen",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8 gap-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"HR Reports"}),a.jsx("p",{className:"text-sm text-blue-900",children:"Generate comprehensive reports for attendance and performance."})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 bg-slate-100 p-1 rounded-lg",children:[a.jsx("button",{onClick:()=>l("monthly"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${i==="monthly"?"bg-white text-teal-700 shadow-sm":"text-blue-900 hover:text-blue-950"}`,children:"Monthly Performance"}),a.jsx("button",{onClick:()=>l("attendance"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${i==="attendance"?"bg-white text-teal-700 shadow-sm":"text-blue-900 hover:text-blue-950"}`,children:"Attendance Report"}),a.jsx("button",{onClick:()=>l("absent"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${i==="absent"?"bg-white text-teal-700 shadow-sm":"text-blue-900 hover:text-blue-950"}`,children:"Absent Report"})]}),a.jsxs("button",{onClick:re,className:"bg-green-600 hover:bg-green-700 text-white text-sm font-medium py-2 px-4 rounded-md transition-colors shadow-sm flex items-center gap-2",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Excel"]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6 bg-slate-50 p-4 rounded-lg border border-slate-200 items-end",children:[a.jsxs("div",{className:"w-full md:w-auto",children:[a.jsx("label",{htmlFor:"department-filter",className:"block text-xs font-medium text-blue-900 mb-1",children:"Department"}),a.jsx("select",{id:"department-filter",value:c,onChange:$=>p($.target.value),className:"block w-full md:w-48 pl-3 pr-10 py-2 text-base border-slate-300 bg-white text-blue-900 focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md border",children:R.map($=>a.jsx("option",{value:$,children:$},$))})]}),a.jsxs("div",{className:"w-full md:w-auto",children:[a.jsx("label",{htmlFor:"name-search",className:"block text-xs font-medium text-blue-900 mb-1",children:"Employee Name"}),a.jsx("input",{type:"text",id:"name-search",placeholder:"Search by name...",value:g,onChange:$=>f($.target.value),className:"block w-full md:w-48 px-3 py-2 text-base border-slate-300 bg-white text-blue-900 focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md border"})]}),i==="monthly"?a.jsxs("div",{className:"w-full md:w-auto",children:[a.jsx("label",{htmlFor:"month-filter",className:"block text-xs font-medium text-blue-900 mb-1",children:"Select Month"}),a.jsx("input",{type:"month",id:"month-filter",value:x,onChange:$=>N($.target.value),className:"block w-full md:w-48 px-3 py-2 text-base border-slate-300 bg-white text-blue-900 focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md border"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"w-full md:w-auto",children:[a.jsx("label",{htmlFor:"from-date",className:"block text-xs font-medium text-blue-900 mb-1",children:"From Date"}),a.jsx("input",{type:"date",id:"from-date",value:w,onChange:$=>D($.target.value),className:"block w-full md:w-40 px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]}),a.jsxs("div",{className:"w-full md:w-auto",children:[a.jsx("label",{htmlFor:"to-date",className:"block text-xs font-medium text-blue-900 mb-1",children:"To Date"}),a.jsx("input",{type:"date",id:"to-date",value:P,onChange:$=>z($.target.value),className:"block w-full md:w-40 px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]})]})]}),i==="monthly"&&a.jsxs("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:[a.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[a.jsx("thead",{className:"bg-slate-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"#"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Department"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Designation"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Attendance"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Leaves"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Salary"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:O.map(($,X)=>{const{attendancePct:T,approvedLeaves:k}=te($),S=new Intl.NumberFormat("en-PK",{style:"currency",currency:"PKR",minimumFractionDigits:0}).format(parseFloat($.salary||"0"));return a.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:X+1}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900 font-medium",children:[$.firstName," ",$.lastName]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:$.department}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:$.designation}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsxs("span",{className:`text-xs font-semibold inline-block py-1 px-2 rounded-full ${T>=90?"text-green-600 bg-green-100":T>=75?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100"}`,children:[T,"%"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:k}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:S.replace("PKR","PKR ")})]},$.id)})})]}),O.length===0&&a.jsx("p",{className:"text-center py-8 text-blue-900",children:"No data found matching criteria."})]}),i==="attendance"&&a.jsxs("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:[a.jsxs("div",{className:"p-3 bg-green-50 border-b border-green-100 text-sm text-green-800 font-medium",children:["Showing ",ee.length," records from ",w," to ",P]}),a.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[a.jsx("thead",{className:"bg-slate-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Department"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Time In"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Time Out"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Status"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:ee.map(($,X)=>a.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:$.date}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:$.empName}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:$.department}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-blue-900",children:$.timeIn}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-blue-900",children:$.timeOut||"--"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${$.status==="Late"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:$.status})})]},X))})]}),ee.length===0&&a.jsx("p",{className:"text-center py-8 text-blue-900",children:"No attendance records found for this period."})]}),i==="absent"&&a.jsxs("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:[a.jsxs("div",{className:"p-3 bg-red-50 border-b border-red-100 text-sm text-red-800 font-medium",children:["Showing ",ue.length," absentee records from ",w," to ",P]}),a.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[a.jsx("thead",{className:"bg-slate-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Department"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Remarks"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:ue.map(($,X)=>a.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:$.date}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:$.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:$.department}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${$.status==="On Leave"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:$.status})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:$.remarks})]},X))})]}),ue.length===0&&a.jsx("p",{className:"text-center py-8 text-blue-900",children:"No absences found! Everyone was present."})]})]})},Dk=({employees:s,attendanceRecords:e,onUploadAttendance:n,currentUserEmail:i})=>{const[l,c]=V.useState(null),[p,g]=V.useState(!1),f=new Date().toISOString().split("T")[0],[x,N]=V.useState(f),[w,D]=V.useState(f),[P,z]=V.useState("All"),R=V.useRef(null),O=s.find(j=>j.email===i),te=i==="admin",ee=(O==null?void 0:O.role)==="HR",ue=te||ee;V.useEffect(()=>{if(l){const j=setTimeout(()=>c(null),5e3);return()=>clearTimeout(j)}},[l]);const re=V.useMemo(()=>{const j=s.map(E=>E.department).filter(Boolean);return["All",...Array.from(new Set(j))]},[s]),$=j=>{if(typeof j=="number"){const E=Math.round(j*86400),A=Math.floor(E/3600),_=Math.floor(E%3600/60);return`${String(A).padStart(2,"0")}:${String(_).padStart(2,"0")}`}if(typeof j=="string"){const E=j.split(":");if(E.length>=2){let A=parseInt(E[0]);const _=E[1];return j.toLowerCase().includes("pm")&&A<12&&(A+=12),j.toLowerCase().includes("am")&&A===12&&(A=0),`${String(A).padStart(2,"0")}:${_.substring(0,2)}`}}return String(j||"")},X=j=>{if(typeof j=="number"){const E=Math.floor(j-25569)*86400;return new Date(E*1e3).toISOString().split("T")[0]}try{const E=new Date(j);return isNaN(E.getTime())?String(j):E.toISOString().split("T")[0]}catch{return String(j)}},T=async j=>{var E;const A=(E=j.target.files)==null?void 0:E[0];if(A){g(!0),c(null);try{const _=await A.arrayBuffer(),be=XLSX.read(_,{type:"array"}),Ae=be.SheetNames[0],B=be.Sheets[Ae],de=XLSX.utils.sheet_to_json(B),ye=new Map;de.forEach(L=>{const Q={};Object.keys(L).forEach(me=>{const Ce=me.replace(/[^a-zA-Z0-9]/g,"").toLowerCase();Q[Ce]=L[me]});const he=Q.employeeid||Q.empid||Q.id||Q.userid||Q.acno,ge=Q.name||Q.employeename||Q.empname||Q.employee,we=Q.date||Q.attendancedate||Q.time,F=Q.time||Q.timein||Q.checkin||Q.datetime;if(!we)return;let ce;if(he){const me=String(he).trim();ce=s.find(Ce=>Ce.employeeId&&String(Ce.employeeId).trim()===me||Ce.id&&String(Ce.id).trim()===me)}if(!ce&&ge){const me=String(ge).trim().toLowerCase();ce=s.find(Ce=>`${Ce.firstName} ${Ce.lastName}`.toLowerCase()===me)}if(ce){let me=X(we),Ce=$(F);if(we.toString().includes("T")||typeof we=="string"&&we.length>15){const ut=new Date(we);if(!isNaN(ut.getTime())){me=ut.toISOString().split("T")[0];const tn=String(ut.getHours()).padStart(2,"0"),nn=String(ut.getMinutes()).padStart(2,"0");Ce=`${tn}:${nn}`}}if(me&&Ce&&Ce.includes(":")){const ut=`${ce.id}_${me}`,[tn,nn]=Ce.split(":").map(Number),vn=tn*60+nn;ye.has(ut)||ye.set(ut,{employeeId:ce.id,date:me,times:[],status:"Present"});const Qt=ye.get(ut);Qt.times.includes(vn)||Qt.times.push(vn)}}});const Ee=[];let Oe=0;if(ye.forEach(L=>{if(L.times.sort((Q,he)=>Q-he),L.times.length>0){const Q=L.times[0],he=L.times[L.times.length-1],ge=`${String(Math.floor(Q/60)).padStart(2,"0")}:${String(Q%60).padStart(2,"0")}`;let we="";L.times.length>1&&(we=`${String(Math.floor(he/60)).padStart(2,"0")}:${String(he%60).padStart(2,"0")}`);let F="Present";const[ce,me]=ge.split(":").map(Number);(ce>9||ce===9&&me>15)&&(F="Late"),Ee.push({employeeId:L.employeeId,date:L.date,timeIn:ge,timeOut:we,status:F}),Oe++}}),Ee.length>0){const L=await n(Ee);c({type:L.success?"success":"error",text:`${L.message} (${Oe} daily records processed)`})}else c({type:"error",text:"No valid records matched. Ensure ID or Name columns match your employee data."})}catch(_){console.error("Error processing file:",_),c({type:"error",text:"Failed to process the uploaded file. Please ensure it is a valid Excel/CSV file."})}finally{g(!1),R.current&&(R.current.value="")}}},k=j=>{const E=s.find(A=>A.employeeId===j||A.id===j);return E?`${E.firstName} ${E.lastName}`:"Unknown"},S=V.useMemo(()=>e.filter(j=>{if(!ue&&O&&!(j.employeeId===O.id||j.employeeId===O.employeeId)||!(j.date>=x&&j.date<=w))return!1;if(ue&&P!=="All"){const E=s.find(A=>A.employeeId===j.employeeId||A.id===j.employeeId);if((E==null?void 0:E.department)!==P)return!1}return!0}).sort((j,E)=>{if(j.date!==E.date)return E.date.localeCompare(j.date);const A=k(j.employeeId),_=k(E.employeeId);return A.localeCompare(_)}),[e,x,w,P,s,ue,O]);return a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Attendance Management"}),a.jsx("p",{className:"text-blue-900 mt-1",children:ue?"Upload biometric logs or view daily records.":"View your attendance history."})]}),ue&&a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"file",ref:R,onChange:T,accept:".xlsx, .xls, .csv",className:"hidden"}),a.jsxs("button",{onClick:()=>{var j;return(j=R.current)==null?void 0:j.click()},disabled:p,className:"flex items-center justify-center gap-2 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 disabled:bg-teal-400 disabled:cursor-not-allowed",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),p?"Processing...":"Upload Machine Data"]})]})]}),l&&a.jsx("div",{className:`p-3 rounded-md text-sm ${l.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:l.text}),a.jsxs("div",{className:"bg-slate-50 p-4 rounded-md border border-slate-200",children:[a.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-3",children:"Filters"}),a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"from-date",className:"block text-xs font-medium text-blue-900 mb-1",children:"From Date"}),a.jsx("input",{type:"date",id:"from-date",value:x,onChange:j=>N(j.target.value),className:"block w-full sm:w-40 px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"to-date",className:"block text-xs font-medium text-blue-900 mb-1",children:"To Date"}),a.jsx("input",{type:"date",id:"to-date",value:w,onChange:j=>D(j.target.value),className:"block w-full sm:w-40 px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]}),ue&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"dept-select",className:"block text-xs font-medium text-blue-900 mb-1",children:"Department"}),a.jsx("select",{id:"dept-select",value:P,onChange:j=>z(j.target.value),className:"block w-full sm:w-48 px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",children:re.map(j=>a.jsx("option",{value:j,children:j},j))})]})]})]}),a.jsx("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[a.jsx("thead",{className:"bg-slate-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Employee ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Employee Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Time In"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Time Out"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Status"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:S.length>0?S.map(j=>{const E=j.status==="Late"?"bg-yellow-100 text-yellow-800":j.status==="Absent"?"bg-red-100 text-red-800":"bg-green-100 text-green-800";return a.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:j.date}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:j.employeeId}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:k(j.employeeId)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:j.timeIn}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:j.timeOut||"--"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E}`,children:j.status})})]},j.id)}):a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"text-center py-10",children:a.jsx("p",{className:"text-blue-900",children:"No attendance records found for the selected criteria."})})})})]})})]})},Pk=({onBack:s,employees:e,users:n,onAddEmployee:i,onLogout:l,allPermissions:c,onUserPermissionsChange:p,currentUserEmail:g,leaveRequests:f,onAddLeaveRequest:x,onLeaveRequestAction:N,onResignEmployee:w,payrollHistory:D,onRunPayroll:P,onUpdateEmployee:z,attendanceRecords:R,onUploadAttendance:O})=>{var te;const[ee,ue]=V.useState(!1),re=g==="admin",$=((te=c[g])==null?void 0:te.hr)||{},X=e.find(B=>B.email===g),T=V.useMemo(()=>{if(re)return"dashboard";const B=[...uu,...cu].filter(de=>{var ye;return(X==null?void 0:X.role)==="Employee"&&de.id==="dashboard"?!1:(ye=$[de.id])==null?void 0:ye.view});return B.length>0?B[0].id:null},[re,$,X]),[k,S]=V.useState(T),[j,E]=V.useState("");V.useEffect(()=>{!k&&T&&S(T)},[T,k]);const A=()=>{ue(!ee)},_=V.useMemo(()=>{if(!j)return e;const B=j.toLowerCase();return e.filter(de=>`${de.firstName} ${de.lastName}`.toLowerCase().includes(B)||de.email.toLowerCase().includes(B)||de.department.toLowerCase().includes(B)||de.designation.toLowerCase().includes(B)||(de.employeeId||"").toLowerCase().includes(B))},[e,j]),be=V.useMemo(()=>{if(!j)return n;const B=j.toLowerCase();return n.filter(de=>{if(de.email.toLowerCase().includes(B))return!0;const ye=e.find(Ee=>Ee.email===de.email);return!!(ye&&`${ye.firstName} ${ye.lastName}`.toLowerCase().includes(B))})},[n,e,j]),Ae=()=>{if(!k)return a.jsxs("div",{className:"p-6 text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Access Denied"}),a.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"You do not have permission to view any pages in this module. Please contact an administrator."}),a.jsx("button",{onClick:s,className:"mt-4 text-teal-600 hover:underline",children:"Go Back"})]});switch(k){case"dashboard":return a.jsx(yk,{employees:e,leaveRequests:f,onLeaveRequestAction:N,onNavigate:S});case"employees":return a.jsx(vk,{onAddEmployee:i,employees:_,onResignEmployee:w,onUpdateEmployee:z});case"attendance":return a.jsx(Dk,{employees:e,attendanceRecords:R,onUploadAttendance:O,currentUserEmail:g});case"reports":return a.jsx(Ak,{employees:e,attendanceRecords:R,leaveRequests:f});case"users":return a.jsx(wk,{users:be,employees:e});case"user-access":return a.jsx(jk,{users:n,employees:e,allPermissions:c,onUserPermissionsChange:p});case"leaves":return a.jsx(Ek,{currentUserEmail:g,employees:e,leaveRequests:f,onAddLeaveRequest:x,onLeaveRequestAction:N});case"departments":return a.jsx(Tk,{});case"payroll":return a.jsx(Ik,{employees:e,payrollHistory:D,attendanceRecords:R,leaveRequests:f,onRunPayroll:P});default:return a.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm",children:["Content for ",k]})}};return a.jsxs("div",{className:"flex h-screen bg-slate-100",children:[a.jsx(hk,{activePage:k||"",setActivePage:S,isCollapsed:ee,onLogout:l,permissions:$,currentUserEmail:g,employees:e}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(fk,{toggleSidebar:A,isSidebarCollapsed:ee,onLogout:l,searchQuery:j,onSearchChange:E,onBack:s}),a.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-slate-100",children:a.jsx("div",{className:"p-6",children:Ae()})})]})]})},Rk=({currentPage:s,onNavigate:e,permissions:n,currentUserEmail:i,employees:l})=>{const c=i==="admin",p=hf.map(w=>w.id),g=c?Cd:Cd.filter(w=>{var D;return w.id==="assets"?p.some(P=>{var z;return(z=n==null?void 0:n[P])==null?void 0:z.view}):(D=n==null?void 0:n[w.id])==null?void 0:D.view}),f=l.find(w=>w.email===i),x=c?"Administrator":f?`${f.firstName} ${f.lastName}`:i,N=x.charAt(0).toUpperCase();return a.jsxs("aside",{className:"w-64 flex-shrink-0 flex flex-col bg-white dark:bg-gray-800 border-r border-slate-200 dark:border-gray-700",children:[a.jsx("div",{className:"flex items-center justify-center h-20 border-b border-slate-200 dark:border-gray-700 flex-shrink-0 px-4",children:a.jsx(Fo,{className:"w-full h-10"})}),a.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:g.map(w=>{const D=w.icon;return a.jsxs("button",{onClick:()=>e(w.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors text-left ${s===w.id?"bg-purple-50 text-purple-900 font-bold border-r-4 border-purple-900":"text-blue-900 dark:text-blue-300 hover:bg-purple-50 hover:text-purple-900 dark:hover:bg-gray-700"}`,children:[a.jsx(D,{className:`w-6 h-6 ${s===w.id?"text-purple-900":"text-purple-800"}`}),a.jsx("span",{className:"font-medium",children:w.label})]},w.id)})}),a.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900 flex items-center justify-center font-bold text-purple-900 dark:text-purple-300",children:N}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-sm text-blue-900 dark:text-white",title:x,children:x}),a.jsx("p",{className:"text-xs text-blue-800 dark:text-gray-400",title:i,children:i})]})]})})]})},Mk=s=>{if(!s.specs)return"-";const{cpu:e,ram:n,storage:i,gpu:l,lcd:c}=s.specs;if(s.type==="Monitor"&&c)return c;const p=[e,n,i,l].filter(Boolean);return p.length===0?"-":p.join(" / ")},mf=({inventory:s,onEdit:e,onResign:n,onDelete:i,view:l})=>{const c=g=>{switch(g){case"In Use":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"In Stock":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Maintenance":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},p=l==="All"||l==="In Use";return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm text-left text-blue-600 dark:text-gray-400",children:[a.jsx("thead",{className:"text-xs text-blue-900 uppercase bg-blue-50 dark:bg-gray-700 dark:text-gray-400",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3",children:"Type"}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:"Brand"}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:"Model"}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:"Specifications"}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:"Serial No."}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:"Assigned To"}),p&&a.jsx("th",{scope:"col",className:"px-6 py-3",children:"Department"}),p&&a.jsx("th",{scope:"col",className:"px-6 py-3",children:"Issue Date"}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:"Others"}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:a.jsx("span",{className:"sr-only",children:"Actions"})})]})}),a.jsx("tbody",{children:s.map(g=>a.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700 hover:bg-blue-50 dark:hover:bg-gray-600",children:[a.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-blue-900 dark:text-white whitespace-nowrap",children:g.type}),a.jsx("td",{className:"px-6 py-4 font-semibold text-blue-800",children:g.brand||"-"}),a.jsx("td",{className:"px-6 py-4 text-blue-800",children:g.model}),a.jsx("td",{className:"px-6 py-4 text-xs text-blue-600",children:Mk(g)}),a.jsx("td",{className:"px-6 py-4 font-mono text-xs text-blue-600",children:g.serialNumber||"-"}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${c(g.status)}`,children:g.status})}),a.jsx("td",{className:"px-6 py-4 text-blue-800",children:g.assignedTo||"-"}),p&&a.jsx("td",{className:"px-6 py-4 text-blue-800",children:g.department||"-"}),p&&a.jsx("td",{className:"px-6 py-4 text-blue-800",children:g.issueDate||"-"}),a.jsx("td",{className:"px-6 py-4 text-blue-600",children:g.others||"-"}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end space-x-4",children:[a.jsx("button",{onClick:()=>e(g),className:"font-medium text-blue-600 dark:text-blue-500 hover:underline",children:"Edit"}),g.status==="In Use"&&g.assignedTo&&a.jsx("button",{onClick:()=>n(g.assignedTo),className:"font-medium text-yellow-600 dark:text-yellow-500 hover:underline",children:"Resign"}),i&&a.jsx("button",{onClick:()=>i(g.id),className:"font-medium text-red-600 dark:text-red-500 hover:underline",children:"Delete"})]})})]},g.id))})]})})},od={type:"Kitchen",model:"",brand:"",status:"In Stock",assignedTo:"",serialNumber:"",department:"",designation:"",issueDate:"",vendor:"",maintenanceDate:"",others:"",specs:{cpu:"",ram:"",storage:"",gpu:"",lcd:""},telephoneExt:"",quantity:1,unit:"",itemCode:"",itemName:"",subCategory:"",purchaseDate:"",cost:"",assetLife:"",location:"",condition:"",remarks:""},Wy=({type:s,specs:e,brand:n,onChange:i})=>s!=="Laptop"&&s!=="Desktop"&&s!=="Monitor"&&s!=="Electronics"?null:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-3 pt-3 border-t border-blue-200 dark:border-gray-600",children:[a.jsx("input",{type:"text",name:"brand",value:n||"",onChange:i,placeholder:"Brand (e.g., Dell, HP)",className:"input-style mb-3"}),(s==="Laptop"||s==="Desktop")&&a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",name:"cpu",value:(e==null?void 0:e.cpu)||"",onChange:i,placeholder:"CPU (e.g., Core i7)",className:"input-style mb-3"}),a.jsx("input",{type:"text",name:"ram",value:(e==null?void 0:e.ram)||"",onChange:i,placeholder:"RAM (e.g., 16GB DDR4)",className:"input-style mb-3"}),a.jsx("input",{type:"text",name:"storage",value:(e==null?void 0:e.storage)||"",onChange:i,placeholder:"Storage (e.g., 512GB SSD)",className:"input-style mb-3"})]}),s==="Desktop"&&a.jsx("input",{type:"text",name:"gpu",value:(e==null?void 0:e.gpu)||"",onChange:i,placeholder:"GPU (e.g., NVIDIA RTX 3060)",className:"input-style mb-3"}),(s==="Laptop"||s==="Desktop"||s==="Monitor")&&a.jsx("input",{type:"text",name:"lcd",value:(e==null?void 0:e.lcd)||"",onChange:i,placeholder:"LCD / Display",className:"input-style mb-3"})]}),Nu=s=>{const{isOpen:e,onClose:n,onSave:i,editingAsset:l,initialStatus:c,initialType:p,isMultiAddMode:g,employees:f}=s,x=(k="In Stock")=>({...od,specs:{...od.specs},status:k}),[N,w]=V.useState(x()),[D,P]=V.useState({assignedTo:"",department:"",designation:"",issueDate:""}),[z,R]=V.useState([x("In Use")]),O=V.useCallback(()=>{w(x()),P({assignedTo:"",department:"",designation:"",issueDate:""}),R([x("In Use")])},[]);V.useEffect(()=>{if(e)if(l)w({...od,...l,specs:{...od.specs,...l.specs||{}}});else if(g)R([x("In Use")]),P({assignedTo:"",department:"",designation:"",issueDate:""});else{const k=x(c);p&&(k.type=p),w(k)}else setTimeout(O,300)},[e,l,g,c,p,O]);const te=k=>{const{name:S,value:j}=k.target;if(["cpu","ram","storage","gpu","lcd"].includes(S))w(E=>({...E,specs:{...E.specs||{},[S]:j}}));else if(S==="assignedTo"){const E=f.find(A=>`${A.firstName} ${A.lastName}`===j);w(E?A=>({...A,assignedTo:j,department:E.department,designation:E.designation}):A=>({...A,assignedTo:j}))}else w(E=>({...E,[S]:j}))},ee=k=>{const{name:S,value:j}=k.target;if(S==="assignedTo"){const E=f.find(A=>`${A.firstName} ${A.lastName}`===j);P(E?A=>({...A,assignedTo:j,department:E.department,designation:E.designation}):A=>({...A,[S]:j,department:"",designation:""}))}else P(E=>({...E,[S]:j}))},ue=(k,S)=>{const{name:j,value:E}=S.target;R(A=>{const _=[...A],be={..._[k]};return be.specs&&(be.specs={...be.specs}),["cpu","ram","storage","gpu","lcd"].includes(j)?be.specs={...be.specs||{},[j]:E}:j==="brand"?be.brand=E:be[j]=E,_[k]=be,_})},re=()=>{R(k=>[...k,x("In Use")])},$=k=>{R(S=>S.filter((j,E)=>E!==k))},X=k=>{if(k.preventDefault(),g&&!l){const S=z.map(j=>({...j,...D,status:"In Use"}));i(S)}else i([N],l==null?void 0:l.id)};if(!e)return null;const T=a.jsx("datalist",{id:"employee-list",children:f.map(k=>a.jsx("option",{value:`${k.firstName} ${k.lastName}`},k.id))});return g&&!l?a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 p-4 overflow-y-auto flex justify-center items-start",onClick:n,children:[T,a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl",onClick:k=>k.stopPropagation(),children:[a.jsxs("form",{onSubmit:X,children:[a.jsxs("div",{className:"p-6 border-b border-blue-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-xl font-bold text-blue-900 dark:text-white",children:"Assign New Assets"}),a.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:"Bulk assign assets to an employee."})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"bg-blue-50 dark:bg-gray-700 p-4 rounded-lg",children:[a.jsx("h3",{className:"font-medium text-blue-900 dark:text-white mb-3",children:"Employee Details"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("input",{list:"employee-list",name:"assignedTo",value:D.assignedTo,onChange:ee,placeholder:"Search Employee",className:"input-style",required:!0}),a.jsx("input",{type:"text",name:"department",value:D.department,onChange:k=>{},placeholder:"Department",className:"input-style bg-gray-100",readOnly:!0}),a.jsx("input",{type:"text",name:"designation",value:D.designation,onChange:k=>{},placeholder:"Designation",className:"input-style bg-gray-100",readOnly:!0}),a.jsx("input",{type:"date",name:"issueDate",value:D.issueDate,onChange:ee,className:"input-style",required:!0})]})]}),a.jsxs("div",{className:"space-y-4",children:[z.map((k,S)=>a.jsxs("div",{className:"border border-blue-200 dark:border-gray-600 p-4 rounded-lg relative",children:[a.jsx("button",{type:"button",onClick:()=>$(S),className:"absolute top-2 right-2 text-red-500 hover:text-red-700",title:"Remove Asset",children:""}),a.jsxs("h4",{className:"text-sm font-medium text-blue-800 dark:text-gray-300 mb-2",children:["Asset #",S+1]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("select",{name:"type",value:k.type,onChange:j=>ue(S,j),className:"input-style",children:[a.jsx("option",{value:"Laptop",children:"Laptop"}),a.jsx("option",{value:"Desktop",children:"Desktop"}),a.jsx("option",{value:"Monitor",children:"Monitor"}),a.jsx("option",{value:"Electronics",children:"Electronics"}),a.jsx("option",{value:"Furniture",children:"Furniture"}),a.jsx("option",{value:"Accessory",children:"Accessory"})]}),a.jsx("input",{type:"text",name:"model",value:k.model,onChange:j=>ue(S,j),placeholder:"Model",className:"input-style",required:!0}),a.jsx("input",{type:"text",name:"serialNumber",value:k.serialNumber,onChange:j=>ue(S,j),placeholder:"Serial Number",className:"input-style"})]}),a.jsx(Wy,{type:k.type,specs:k.specs,brand:k.brand,onChange:j=>ue(S,j)})]},S)),a.jsx("button",{type:"button",onClick:re,className:"w-full py-2 border-2 border-dashed border-blue-300 dark:border-gray-600 rounded-lg text-blue-600 dark:text-gray-400 hover:bg-blue-50 dark:hover:bg-gray-700",children:"+ Add Another Asset"})]})]}),a.jsxs("div",{className:"p-6 border-t border-blue-200 dark:border-gray-700 flex justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-blue-800 bg-white border border-blue-300 rounded-lg hover:bg-blue-50",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-900 rounded-lg hover:bg-blue-800",children:"Assign Assets"})]})]}),a.jsx("style",{children:`
                        .input-style { background-color: #F9FAFB; border: 1px solid #BFDBFE; border-radius: 0.375rem; padding: 0.5rem 0.75rem; width: 100%; color: #1e3a8a; }
                        .input-style::placeholder { color: #93C5FD; }
                        .dark .input-style { background-color: #374151; border-color: #4B5563; color: white; }
                     `})]})]}):a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 p-4 overflow-y-auto flex justify-center items-start",onClick:n,children:[T,a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl",onClick:k=>k.stopPropagation(),children:[a.jsxs("form",{onSubmit:X,children:[a.jsxs("div",{className:"p-6 border-b border-blue-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-xl font-bold text-blue-900 dark:text-white",children:l?"Edit Asset":"Add New Asset"}),a.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:"Enter details for the item."})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-style",children:"Category"}),a.jsxs("select",{name:"type",value:N.type,onChange:te,className:"input-style",children:[a.jsx("option",{value:"Kitchen",children:"Kitchen"}),a.jsx("option",{value:"Laptop",children:"Laptop"}),a.jsx("option",{value:"Desktop",children:"Desktop"}),a.jsx("option",{value:"Printer",children:"Printer"}),a.jsx("option",{value:"Monitor",children:"Monitor"}),a.jsx("option",{value:"Electronics",children:"Electronics"}),a.jsx("option",{value:"Furniture",children:"Furniture"}),a.jsx("option",{value:"Accessory",children:"Accessory"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-style",children:"Model / Name"}),a.jsx("input",{type:"text",name:"model",value:N.model,onChange:te,className:"input-style",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-style",children:"Status"}),a.jsxs("select",{name:"status",value:N.status,onChange:te,className:"input-style",children:[a.jsx("option",{value:"In Stock",children:"In Stock"}),a.jsx("option",{value:"In Use",children:"In Use"}),a.jsx("option",{value:"Maintenance",children:"Maintenance"})]})]}),N.type==="Kitchen"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-style",children:"Quantity"}),a.jsx("input",{type:"number",name:"quantity",value:N.quantity,onChange:te,className:"input-style",required:!0,min:"0",step:"any"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-style",children:"Unit (e.g. kg, liters)"}),a.jsx("input",{type:"text",name:"unit",value:N.unit,onChange:te,className:"input-style"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-style",children:"Item Code"}),a.jsx("input",{type:"text",name:"itemCode",value:N.itemCode,onChange:te,className:"input-style"})]})]}):a.jsxs("div",{children:[a.jsx("label",{className:"label-style",children:"Serial Number"}),a.jsx("input",{type:"text",name:"serialNumber",value:N.serialNumber,onChange:te,className:"input-style"})]})]}),N.status==="In Use"&&a.jsxs("div",{className:"bg-blue-50 dark:bg-gray-700 p-4 rounded-lg space-y-3",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-900 dark:text-white",children:"Assignment Details"}),a.jsx("input",{list:"employee-list",name:"assignedTo",value:N.assignedTo,onChange:te,placeholder:"Assigned To (Employee)",className:"input-style"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("input",{type:"text",name:"department",value:N.department,onChange:te,placeholder:"Department",className:"input-style"}),a.jsx("input",{type:"text",name:"location",value:N.location,onChange:te,placeholder:"Location",className:"input-style"})]}),a.jsx("input",{type:"date",name:"issueDate",value:N.issueDate,onChange:te,className:"input-style"})]}),a.jsx(Wy,{type:N.type,specs:N.specs,brand:N.brand,onChange:te}),a.jsx("textarea",{name:"others",value:N.others,onChange:te,placeholder:"Other Details / Remarks",className:"input-style",rows:2})]}),a.jsxs("div",{className:"p-6 border-t border-blue-200 dark:border-gray-700 flex justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-blue-800 bg-white border border-blue-300 rounded-lg hover:bg-blue-50",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-900 rounded-lg hover:bg-blue-800",children:"Save Asset"})]})]}),a.jsx("style",{children:`
                    .input-style { background-color: #F9FAFB; border: 1px solid #BFDBFE; border-radius: 0.375rem; padding: 0.5rem 0.75rem; width: 100%; color: #1e3a8a; }
                    .input-style::placeholder { color: #93C5FD; }
                    .dark .input-style { background-color: #374151; border-color: #4B5563; color: white; }
                    .label-style { display: block; font-size: 0.875rem; font-weight: 500; color: #1e3a8a; margin-bottom: 0.25rem; }
                    .dark .label-style { color: #D1D5DB; }
                `})]})]})},Lk=({title:s,count:e,icon:n,onClick:i,color:l})=>a.jsxs("div",{onClick:i,className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform duration-200 flex flex-col items-start",children:[a.jsx("div",{className:`rounded-lg p-3 mb-4 ${l}`,children:wu.cloneElement(n,{className:"h-8 w-8 text-white"})}),a.jsx("h3",{className:"font-bold text-lg text-blue-900 dark:text-white",children:s}),a.jsxs("p",{className:"text-blue-900 dark:text-gray-400 mt-1 text-sm",children:[e," items"]})]}),Ok=({isOpen:s,onClose:e,onSave:n,editingGroupedToner:i})=>{const[l,c]=V.useState(""),[p,g]=V.useState(""),[f,x]=V.useState(0),[N,w]=V.useState(0);V.useEffect(()=>{s&&(i?(c(i.model),g(i.compatiblePrinters.join(", ")),x(i.filled.quantity),w(i.empty.quantity)):(c(""),g(""),x(1),w(0)))},[s,i]);const D=R=>{R.preventDefault();const O=p.split(",").map(te=>te.trim()).filter(Boolean);n({model:l,compatiblePrinters:O,filledQuantity:Number(f)||0,emptyQuantity:Number(N)||0,originalModelName:i==null?void 0:i.model})};if(!s)return null;const P=i?"Edit Toner Model":"Add New Toner Model",z=i?"Update the details for this toner model.":"Enter the details for the new toner model.";return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 p-4 overflow-y-auto flex justify-center items-start","aria-modal":"true",role:"dialog",onClick:e,children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg",onClick:R=>R.stopPropagation(),children:[a.jsxs("form",{onSubmit:D,children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:P}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:z})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"model",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Toner Model"}),a.jsx("input",{type:"text",id:"model",name:"model",value:l,onChange:R=>c(R.target.value),required:!0,className:"mt-1 block w-full input-style",placeholder:"e.g., HP 58A"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"compatiblePrinters",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Compatible Printer Models"}),a.jsx("input",{type:"text",id:"compatiblePrinters",name:"compatiblePrinters",value:p,onChange:R=>g(R.target.value),className:"mt-1 block w-full input-style",placeholder:"e.g., HP LaserJet Pro M404dn, Other Model"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Separate multiple models with a comma."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"filledQuantity",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filled Quantity"}),a.jsx("input",{type:"number",id:"filledQuantity",name:"filledQuantity",value:f,onChange:R=>x(parseInt(R.target.value,10)),min:"0",required:!0,className:"mt-1 block w-full input-style"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"emptyQuantity",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Empty Quantity"}),a.jsx("input",{type:"number",id:"emptyQuantity",name:"emptyQuantity",value:N,onChange:R=>w(parseInt(R.target.value,10)),min:"0",required:!0,className:"mt-1 block w-full input-style"})]})]})]}),a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600 flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-500 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700",children:"Save Toner Model"})]})]}),a.jsx("style",{children:".input-style { background-color: #F9FAFB; border: 1px solid #D1D5DB; border-radius: 0.5rem; padding: 0.75rem 1rem; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); transition: all 0.2s ease-in-out; } .dark .input-style { background-color: #374151; border-color: #4B5563; color: #F9FAFB; } .input-style:focus { outline: none; --tw-ring-color: #3B82F6; box-shadow: 0 0 0 2px var(--tw-ring-color); }"})]})})},mm=({title:s,count:e,icon:n,colorClasses:i})=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 flex items-center space-x-4",children:[a.jsx("div",{className:`rounded-full p-3 ${i.bg}`,children:wu.cloneElement(n,{className:`h-6 w-6 ${i.text}`})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-gray-400",children:s}),a.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:e})]})]}),Fk=s=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...s,children:a.jsx("path",{fillRule:"evenodd",d:"M3 3.5A1.5 1.5 0 014.5 2h5.25a1.5 1.5 0 011.06.44l3.5 3.5a1.5 1.5 0 01.44 1.06V16.5A1.5 1.5 0 0113.5 18H4.5A1.5 1.5 0 013 16.5v-13zM9 12.25a.75.75 0 00-1.5 0v.5a.75.75 0 001.5 0v-.5z",clipRule:"evenodd"})}),Uk=s=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...s,children:[a.jsx("path",{d:"M5.5 2A2.5 2.5 0 003 4.5v11A2.5 2.5 0 005.5 18h9a2.5 2.5 0 002.5-2.5V8.31l-5.5-5.5H5.5zM9 4.75a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 019 4.75z"}),a.jsx("path",{d:"M10.121 2.227a.75.75 0 00-1.06 0l-5.5 5.5A.75.75 0 004 8.25v7.25a.75.75 0 00.75.75h8.5a.75.75 0 00.75-.75V8.25a.75.75 0 00-.22-.53l-5.5-5.5zM10 8a1 1 0 11-2 0 1 1 0 012 0z"})]}),Vk=s=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...s,children:[a.jsx("path",{d:"M2 3.5A1.5 1.5 0 013.5 2h13A1.5 1.5 0 0118 3.5v13a1.5 1.5 0 01-1.5 1.5h-13A1.5 1.5 0 012 16.5v-13z"}),a.jsx("path",{d:"M5 6a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H6z"})]}),zk=s=>{const{printers:e,toners:n,onAddNewAsset:i,onUpdateAsset:l,onDeleteAsset:c,onResignEmployee:p,onSaveTonerModel:g,onDeleteTonerModel:f,onMarkTonerEmpty:x,onMarkTonerFilled:N,employees:w}=s,[D,P]=V.useState("printers"),[z,R]=V.useState(""),[O,te]=V.useState(!1),[ee,ue]=V.useState(null),[re,$]=V.useState(),[X,T]=V.useState(!1),[k,S]=V.useState(null),[j,E]=V.useState("All"),A=V.useMemo(()=>{const F=z.trim().toLowerCase();return F?e.filter(ce=>Object.values(ce).some(me=>String(me).toLowerCase().includes(F))||Object.values(ce.specs||{}).some(me=>String(me).toLowerCase().includes(F))):e},[e,z]),_=V.useMemo(()=>["All",...Array.from(new Set(n.map(F=>F.model)))],[n]),be=V.useMemo(()=>{const F=new Map;return n.forEach(ce=>{F.has(ce.model)||F.set(ce.model,{model:ce.model,compatiblePrinters:ce.compatiblePrinters,filled:{id:null,quantity:0},empty:{id:null,quantity:0}});const me=F.get(ce.model);ce.status==="Filled"?(me.filled.id=ce.id,me.filled.quantity=ce.quantity,me.compatiblePrinters=[...new Set([...me.compatiblePrinters,...ce.compatiblePrinters])]):ce.status==="Empty"&&(me.empty.id=ce.id,me.empty.quantity=ce.quantity,me.compatiblePrinters=[...new Set([...me.compatiblePrinters,...ce.compatiblePrinters])])}),Array.from(F.values()).sort((ce,me)=>ce.model.localeCompare(me.model))},[n]),Ae=V.useMemo(()=>j==="All"?be:be.filter(F=>F.model===j),[be,j]),B=V.useMemo(()=>({total:n.reduce((F,ce)=>F+ce.quantity,0),filled:n.filter(F=>F.status==="Filled").reduce((F,ce)=>F+ce.quantity,0),empty:n.filter(F=>F.status==="Empty").reduce((F,ce)=>F+ce.quantity,0)}),[n]),de=()=>{ue(null),$("Printer"),te(!0)},ye=F=>{ue(F),$(void 0),te(!0)},Ee=()=>{te(!1),ue(null),$(void 0)},Oe=()=>{S(null),T(!0)},L=F=>{S(F),T(!0)},Q=()=>{T(!1)},he=(F,ce)=>{const me={...F[0],type:"Printer"};ce?l({...me,id:ce}):i([me]),Ee()},ge=F=>{g(F),Q()},we=F=>{window.confirm(`Are you sure you want to delete all toner records for model "${F}"? This will remove both filled and empty stock. This action cannot be undone.`)&&f(F)};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:"Printers & Toners"}),a.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:"Manage all printing devices and their consumables."})]})}),a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:a.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[a.jsxs("button",{onClick:()=>P("printers"),className:`${D==="printers"?"border-purple-900 text-purple-900 dark:text-blue-400":"border-transparent text-blue-600 dark:text-gray-400 hover:text-blue-900 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:["Printers (",e.length,")"]}),a.jsxs("button",{onClick:()=>P("toners"),className:`${D==="toners"?"border-purple-900 text-purple-900 dark:text-blue-400":"border-transparent text-blue-600 dark:text-gray-400 hover:text-blue-900 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:["Toners (",_.length-1," Models)"]})]})}),D==="printers"&&a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 gap-4",children:[a.jsxs("div",{className:"relative w-full sm:w-auto flex-grow",children:[a.jsx("input",{type:"text",placeholder:"Search printers... (e.g., model, serial, user)",value:z,onChange:F=>R(F.target.value),className:"w-full sm:w-96 pl-10 pr-4 py-2 border border-slate-200 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-900 text-blue-900 placeholder-slate-400"}),a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"h-5 w-5 text-purple-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),a.jsxs("button",{onClick:de,className:"px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors shadow-md text-sm font-medium flex items-center space-x-2",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),a.jsx("span",{children:"Add New Printer"})]})]}),a.jsx(mf,{inventory:A,onEdit:ye,onResign:p,view:"All",onDelete:c})]}),D==="toners"&&a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[a.jsx(mm,{title:"Total Toner Stock",count:B.total,icon:a.jsx(Vk,{}),colorClasses:{bg:"bg-purple-100 dark:bg-gray-700",text:"text-purple-900 dark:text-gray-300"}}),a.jsx(mm,{title:"Total Filled Toners",count:B.filled,icon:a.jsx(Fk,{}),colorClasses:{bg:"bg-green-100 dark:bg-green-900",text:"text-green-600 dark:text-green-300"}}),a.jsx(mm,{title:"Total Empty Toners",count:B.empty,icon:a.jsx(Uk,{}),colorClasses:{bg:"bg-yellow-100 dark:bg-yellow-900",text:"text-yellow-600 dark:text-yellow-300"}})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow gap-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{htmlFor:"tonerModelFilter",className:"text-sm font-medium text-blue-900 dark:text-gray-300",children:"Filter by Model:"}),a.jsx("select",{id:"tonerModelFilter",value:j,onChange:F=>E(F.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 text-blue-900",children:_.map(F=>a.jsx("option",{value:F,children:F},F))})]}),a.jsxs("button",{onClick:Oe,className:"px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors shadow-md text-sm font-medium flex items-center space-x-2",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),a.jsx("span",{children:"Add New Toner Model"})]})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm text-left text-blue-600 dark:text-gray-400",children:[a.jsx("thead",{className:"text-xs text-blue-900 uppercase bg-purple-50 dark:bg-gray-700 dark:text-gray-400",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3",children:"Toner Model"}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:"Compatible Printers"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Filled Qty"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Empty Qty"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Total Qty"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Actions"})]})}),a.jsx("tbody",{children:Ae.map(F=>a.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700 hover:bg-purple-50 dark:hover:bg-gray-600",children:[a.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-blue-900 dark:text-white whitespace-nowrap",children:F.model}),a.jsx("td",{className:"px-6 py-4 text-xs text-blue-800",children:F.compatiblePrinters.join(", ")}),a.jsx("td",{className:"px-6 py-4 text-center",children:a.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",children:F.filled.quantity})}),a.jsx("td",{className:"px-6 py-4 text-center",children:a.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",children:F.empty.quantity})}),a.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 dark:text-gray-300",children:F.filled.quantity+F.empty.quantity}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[a.jsx("button",{onClick:()=>x(F.filled.id),disabled:!F.filled.id||F.filled.quantity===0,className:"font-medium text-yellow-600 dark:text-yellow-500 hover:underline disabled:text-gray-400 dark:disabled:text-gray-500 disabled:cursor-not-allowed disabled:no-underline","aria-label":`Mark one ${F.model} toner as empty`,title:"Mark 1 Empty",children:"Mark Empty"}),a.jsx("button",{onClick:()=>N(F.empty.id),disabled:!F.empty.id||F.empty.quantity===0,className:"font-medium text-green-600 dark:text-green-500 hover:underline disabled:text-gray-400 dark:disabled:text-gray-500 disabled:cursor-not-allowed disabled:no-underline","aria-label":`Mark one ${F.model} toner as filled`,title:"Mark 1 Filled",children:"Mark Filled"}),a.jsx("button",{onClick:()=>L(F),className:"font-medium text-blue-600 dark:text-blue-500 hover:underline","aria-label":`Edit ${F.model} toner model`,title:"Edit Model",children:"Edit"}),a.jsx("button",{onClick:()=>we(F.model),className:"font-medium text-red-600 dark:text-red-500 hover:underline","aria-label":`Delete all ${F.model} toner records`,title:"Delete Model",children:"Delete"})]})})]},F.model))})]})})]})]}),a.jsx(Nu,{isOpen:O,onClose:Ee,onSave:he,editingAsset:ee,initialType:re,employees:w}),a.jsx(Ok,{isOpen:X,onClose:Q,onSave:ge,editingGroupedToner:k})]})},Gy={serialNumber:"",systemModel:"",lcdModel:"",lcdInches:"",cpu:"",ram:"",storage:"",gpu:"",keyboard:"",mouse:"",networkDevice:"Ethernet"},qk=({isOpen:s,onClose:e,onSave:n,editingSystem:i})=>{const[l,c]=V.useState(Gy);V.useEffect(()=>{s&&c(i||Gy)},[s,i]);const p=f=>{const{name:x,value:N}=f.target;c(w=>({...w,[x]:N}))},g=f=>{f.preventDefault(),n(l,i==null?void 0:i.id)};return s?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 p-4 overflow-y-auto flex justify-center items-start",onClick:e,"aria-modal":"true",role:"dialog",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl",onClick:f=>f.stopPropagation(),children:[a.jsxs("form",{onSubmit:g,children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:i?"Edit System":"Add New System"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enter the details of the computer system."})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"System & Display"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"systemModel",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"System Model"}),a.jsx("input",{type:"text",id:"systemModel",name:"systemModel",value:l.systemModel,onChange:p,required:!0,className:"mt-1 block w-full input-style"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"serialNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Serial Number"}),a.jsx("input",{type:"text",id:"serialNumber",name:"serialNumber",value:l.serialNumber,onChange:p,required:!0,className:"mt-1 block w-full input-style"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"lcdModel",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"LCD Model"}),a.jsx("input",{type:"text",id:"lcdModel",name:"lcdModel",value:l.lcdModel,onChange:p,required:!0,className:"mt-1 block w-full input-style"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"lcdInches",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"LCD Size (Inches)"}),a.jsx("input",{type:"text",id:"lcdInches",name:"lcdInches",value:l.lcdInches,onChange:p,required:!0,className:"mt-1 block w-full input-style"})]})]})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Core Components"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"cpu",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"CPU"}),a.jsx("input",{type:"text",id:"cpu",name:"cpu",value:l.cpu,onChange:p,required:!0,className:"mt-1 block w-full input-style"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"ram",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"RAM"}),a.jsx("input",{type:"text",id:"ram",name:"ram",value:l.ram,onChange:p,required:!0,className:"mt-1 block w-full input-style"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"storage",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Storage"}),a.jsx("input",{type:"text",id:"storage",name:"storage",value:l.storage,onChange:p,required:!0,className:"mt-1 block w-full input-style"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"gpu",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Graphics Card (GPU)"}),a.jsx("input",{type:"text",id:"gpu",name:"gpu",value:l.gpu,onChange:p,required:!0,className:"mt-1 block w-full input-style"})]})]})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Peripherals & Network"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"keyboard",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Keyboard"}),a.jsx("input",{type:"text",id:"keyboard",name:"keyboard",value:l.keyboard,onChange:p,required:!0,className:"mt-1 block w-full input-style"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"mouse",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mouse"}),a.jsx("input",{type:"text",id:"mouse",name:"mouse",value:l.mouse,onChange:p,required:!0,className:"mt-1 block w-full input-style"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"networkDevice",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Network Device"}),a.jsx("input",{type:"text",id:"networkDevice",name:"networkDevice",value:l.networkDevice,onChange:p,required:!0,className:"mt-1 block w-full input-style",placeholder:"e.g., Ethernet or WiFi Tenda"})]})]})]})]}),a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600 flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-500 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700",children:"Save System"})]})]}),a.jsx("style",{children:`
                    .input-style {
                        background-color: #F9FAFB; /* bg-gray-50 */
                        border: 1px solid #D1D5DB; /* border-gray-300 */
                        border-radius: 0.375rem; /* rounded-md */
                        padding: 0.5rem 0.75rem; /* px-3 py-2 */
                        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
                        transition: all 0.2s ease-in-out;
                    }
                    .dark .input-style {
                        background-color: #374151; /* dark:bg-gray-700 */
                        border-color: #4B5563; /* dark:border-gray-600 */
                        color: #F9FAFB; /* dark:text-white */
                    }
                    .input-style:focus {
                        outline: none;
                        --tw-ring-color: #3B82F6; /* focus:ring-blue-500 */
                        box-shadow: 0 0 0 2px var(--tw-ring-color);
                    }
                `})]})}):null},$k=({labs:s,onAddSystem:e,onUpdateSystem:n,onDeleteSystem:i})=>{const[l,c]=V.useState(null),[p,g]=V.useState(!1),[f,x]=V.useState(null),N=()=>{x(null),g(!0)},w=O=>{x(O),g(!0)},D=()=>{g(!1),x(null)},P=(O,te)=>{l&&(te?n(l.id,{...O,id:te}):e(l.id,O),D())},z=O=>{l&&window.confirm(`Are you sure you want to delete system ${O}?`)&&i(l.id,O)},R=()=>{if(!l)return;const O=["ID","Serial Number","System Model","LCD Model","LCD Inches","CPU","RAM","Storage","GPU","Keyboard","Mouse","Network Device"],te=l.systems.map($=>[`"${$.id}"`,`"${$.serialNumber}"`,`"${$.systemModel}"`,`"${$.lcdModel}"`,`"${$.lcdInches}"`,`"${$.cpu}"`,`"${$.ram}"`,`"${$.storage}"`,`"${$.gpu}"`,`"${$.keyboard}"`,`"${$.mouse}"`,`"${$.networkDevice}"`].join(",")),ee="data:text/csv;charset=utf-8,"+[O.join(","),...te].join(`
`),ue=encodeURI(ee),re=document.createElement("a");re.setAttribute("href",ue),re.setAttribute("download",`${l.name.replace(/\s+/g,"_")}_Inventory.csv`),document.body.appendChild(re),re.click(),document.body.removeChild(re)};return l?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-6",children:[a.jsxs("button",{onClick:()=>c(null),className:"mb-6 flex items-center text-sm font-medium text-blue-900 dark:text-blue-400 hover:underline",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to All Labs"]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:[l.name," - Systems Inventory"]}),a.jsxs("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:["Total Systems: ",l.systems.length]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("button",{onClick:R,disabled:l.systems.length===0,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors shadow-md text-sm font-medium flex items-center space-x-2 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),a.jsx("span",{children:"Download Inventory"})]}),a.jsxs("button",{onClick:N,className:"px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors shadow-md text-sm font-medium flex items-center space-x-2",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),a.jsx("span",{children:"Add New System"})]})]})]}),l.systems.length>0?a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm text-left text-blue-600 dark:text-gray-400",children:[a.jsx("thead",{className:"text-xs text-blue-900 uppercase bg-purple-50 dark:bg-gray-700 dark:text-gray-400",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3",children:"ID"}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:"Serial No."}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:"System Model"}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:"CPU"}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:"RAM"}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:"Storage"}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:"GPU"}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:"Keyboard"}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:"Mouse"}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:a.jsx("span",{className:"sr-only",children:"Actions"})})]})}),a.jsx("tbody",{children:l.systems.map(O=>a.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700 hover:bg-purple-50 dark:hover:bg-gray-600",children:[a.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-blue-900 dark:text-white whitespace-nowrap",children:O.id}),a.jsx("td",{className:"px-6 py-4",children:O.serialNumber}),a.jsx("td",{className:"px-6 py-4",children:O.systemModel}),a.jsx("td",{className:"px-6 py-4",children:O.cpu}),a.jsx("td",{className:"px-6 py-4",children:O.ram}),a.jsx("td",{className:"px-6 py-4",children:O.storage}),a.jsx("td",{className:"px-6 py-4",children:O.gpu}),a.jsx("td",{className:"px-6 py-4",children:O.keyboard}),a.jsx("td",{className:"px-6 py-4",children:O.mouse}),a.jsxs("td",{className:"px-6 py-4 text-right flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>w(O),className:"font-medium text-blue-600 dark:text-blue-500 hover:underline",children:"Edit"}),a.jsx("button",{onClick:()=>z(O.id),className:"font-medium text-red-600 dark:text-red-500 hover:underline",children:"Delete"})]})]},O.id))})]})}):a.jsxs("div",{className:"text-center py-10 px-6 bg-white dark:bg-gray-800 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-white",children:"No Systems Found"}),a.jsxs("p",{className:"mt-1 text-sm text-blue-600 dark:text-gray-400",children:["There are no systems currently registered in ",l.name,"."]}),a.jsx("button",{onClick:N,className:"mt-4 px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors shadow-md text-sm font-medium",children:"Add the First System"})]})]}),a.jsx(qk,{isOpen:p,onClose:D,onSave:P,editingSystem:f})]}):a.jsxs("div",{className:"p-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white mb-6",children:"Computer Labs"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(O=>a.jsxs("div",{onClick:()=>c(O),className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 cursor-pointer hover:shadow-lg hover:scale-105 transition-transform duration-200",children:[a.jsx("h3",{className:"font-bold text-lg text-blue-900 dark:text-white",children:O.name}),a.jsxs("p",{className:"text-blue-600 dark:text-gray-400 mt-2",children:[O.systems.length," Systems"]})]},O.id))})]})},bo={Barista:[{name:"Espresso Shot",ingredients:[{name:"Coffee Beans",quantity:.018,unit:"kg"}]},{name:"Cappuccino",ingredients:[{name:"Coffee Beans",quantity:.018,unit:"kg"},{name:"Milk",quantity:.15,unit:"liters"}]}],Cooking:[{name:"Basic Omelette",ingredients:[{name:"Eggs",quantity:2,unit:"pieces"},{name:"Butter",quantity:.01,unit:"kg"},{name:"Salt",quantity:.001,unit:"kg"}]},{name:"Mirepoix Prep",ingredients:[{name:"Onion",quantity:2,unit:"pieces"},{name:"Carrot",quantity:1,unit:"pieces"},{name:"Celery",quantity:1,unit:"pieces"}]}],"Culinary Chef":[{name:"Vinaigrette",ingredients:[{name:"Olive Oil",quantity:.06,unit:"liters"},{name:"Vinegar",quantity:.02,unit:"liters"},{name:"Salt",quantity:.001,unit:"kg"}]}],Bakery:[{name:"Simple Bread Dough",ingredients:[{name:"Flour",quantity:.5,unit:"kg"},{name:"Water",quantity:.3,unit:"liters"},{name:"Yeast",quantity:.007,unit:"kg"},{name:"Salt",quantity:.01,unit:"kg"}]},{name:"Basic Cookie Dough",ingredients:[{name:"Flour",quantity:.25,unit:"kg"},{name:"Butter",quantity:.15,unit:"kg"},{name:"Sugar",quantity:.2,unit:"kg"},{name:"Eggs",quantity:1,unit:"pieces"}]}]},Bk=s=>{var e;const[n,i]=V.useState(!1),[l,c]=V.useState(null),[p,g]=V.useState(null),[f,x]=V.useState(Object.keys(bo)[0]),[N,w]=V.useState(bo[f][0].name),[D,P]=V.useState(1),[z,R]=V.useState(!1),[O,te]=V.useState("item"),[ee,ue]=V.useState([]),[re,$]=V.useState(""),[X,T]=V.useState(""),[k,S]=V.useState(1),[j,E]=V.useState("");V.useEffect(()=>{w(bo[f][0].name)},[f]),V.useEffect(()=>{if(p){const F=setTimeout(()=>g(null),5e3);return()=>clearTimeout(F)}},[p]);const A=V.useMemo(()=>s.inventory.filter(F=>F.type==="Kitchen"),[s.inventory]),_=V.useMemo(()=>bo[f].find(F=>F.name===N),[f,N]),be=V.useMemo(()=>{if(!_)return{canMake:!1,needed:[]};let F=!0;const ce=_.ingredients.map(me=>{const Ce=A.find(vn=>vn.model.toLowerCase()===me.name.toLowerCase()),ut=me.quantity*D,tn=(Ce==null?void 0:Ce.quantity)||0,nn=tn>=ut;return nn||(F=!1),{name:me.name,required:ut.toFixed(3),available:tn,sufficient:nn,unit:me.unit}});return{canMake:F,needed:ce}},[_,A,D]),Ae=()=>{c(null),i(!0)},B=F=>{c(F),i(!0)},de=(F,ce)=>{const me=F.map(Ce=>({...Ce,type:"Kitchen",status:"In Stock",assignedTo:""}));ce&&me.length===1?s.onUpdateAsset({...me[0],id:ce}):s.onAddNewAsset(me),i(!1),g({type:"success",text:`Material ${ce?"updated":"added"} successfully.`})},ye=async()=>{if(!_||!be.canMake)return;const F=_.ingredients.map(ce=>{const me=A.find(ut=>ut.model.toLowerCase()===ce.name.toLowerCase()),Ce=me.quantity-ce.quantity*D;return{id:me.id,newQuantity:Ce}});await s.onUpdateKitchenStock(F),g({type:"success",text:`${D} student(s) worth of materials for ${N} used. Stock updated.`})},Ee=F=>{ue([]),$(""),T(""),S(1),E(""),F&&(te("item"),Oe(F,1)),R(!0)},Oe=(F,ce)=>{ue(me=>me.find(Ce=>Ce.item.id===F.id)?me.map(Ce=>Ce.item.id===F.id?{...Ce,qty:Ce.qty+ce}:Ce):[...me,{item:F,qty:ce}])},L=(F,ce)=>{ue(ee.map(me=>me.item.id===F?{...me,qty:Math.max(.001,ce)}:me))},Q=F=>{ue(ee.filter(ce=>ce.item.id!==F))},he=()=>{if(!s.recipes||!X)return;const F=s.recipes.find(ce=>ce.id===X);F&&F.ingredients.forEach(ce=>{const me=ce.name.toLowerCase().trim(),Ce=A.find(ut=>ut.model.toLowerCase().trim()===me);Ce&&Oe(Ce,ce.quantity*k)})},ge=async()=>{if(!s.onCreateSCRequest)return;if(ee.length===0){alert("Cart is empty");return}const F=s.employees.find(me=>me.email===s.currentUserEmail),ce={requesterName:F?`${F.firstName} ${F.lastName}`:s.currentUserEmail||"Chef",requesterEmail:s.currentUserEmail||"",department:"Kitchen",date:new Date().toISOString(),purpose:re||"Kitchen Restock",status:"Pending Account Manager",items:ee.map(me=>({inventoryId:me.item.id,name:me.item.model,quantityRequested:me.qty,unit:me.item.unit||"units"}))};await s.onCreateSCRequest(ce),R(!1),g({type:"success",text:"Requisition submitted to Store Manager."})},we=V.useMemo(()=>{if(!j)return A;const F=j.toLowerCase();return A.filter(ce=>ce.model.toLowerCase().includes(F))},[A,j]);return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"The Chef's Academy"}),a.jsx("div",{className:"flex gap-2",children:s.onCreateSCRequest&&a.jsxs("button",{onClick:()=>Ee(),className:"px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 font-medium flex items-center gap-2 shadow-sm",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})}),"New Store Requisition"]})})]}),p&&a.jsx("div",{className:`p-4 rounded-md text-sm ${p.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.text}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Class Recipe Execution"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Course"}),a.jsx("select",{value:f,onChange:F=>x(F.target.value),className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5",children:Object.keys(bo).map(F=>a.jsx("option",{value:F,children:F},F))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Recipe"}),a.jsx("select",{value:N,onChange:F=>w(F.target.value),className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5",children:bo[f].map(F=>a.jsx("option",{value:F.name,children:F.name},F.name))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Students / Servings"}),a.jsx("input",{type:"number",min:"1",value:D,onChange:F=>P(Math.max(1,parseInt(F.target.value)||1)),className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5"})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Materials Required:"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:be.needed.map((F,ce)=>a.jsxs("div",{className:`p-3 rounded border flex justify-between items-center ${F.sufficient?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:F.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Need: ",F.required," ",F.unit]})]}),a.jsxs("div",{className:`text-xs font-bold ${F.sufficient?"text-green-700":"text-red-700"}`,children:[F.sufficient?"Available":"Low Stock",a.jsx("br",{}),a.jsxs("span",{className:"font-normal text-gray-500",children:["Stock: ",F.available]})]})]},ce))})]}),a.jsx("div",{className:"mt-6 flex justify-end",children:a.jsx("button",{onClick:ye,disabled:!be.canMake,className:"px-6 py-2.5 bg-blue-900 text-white rounded-lg hover:bg-blue-800 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium shadow-sm transition-colors",children:"Use Materials for Class"})})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Kitchen Inventory"}),a.jsx("button",{onClick:Ae,className:"text-sm text-blue-900 hover:underline font-medium",children:"+ Add New Ingredient"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[a.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3",children:"Ingredient Name"}),a.jsx("th",{className:"px-6 py-3 text-center",children:"Current Stock"}),a.jsx("th",{className:"px-6 py-3 text-center",children:"Unit"}),a.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),a.jsx("tbody",{children:A.map(F=>a.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-purple-50 dark:hover:bg-gray-600 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white",children:F.model}),a.jsx("td",{className:"px-6 py-4 text-center font-semibold",children:F.quantity}),a.jsx("td",{className:"px-6 py-4 text-center",children:F.unit}),a.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[a.jsx("button",{onClick:()=>Ee(F),className:"font-medium text-blue-900 hover:underline",children:"Request"}),a.jsx("button",{onClick:()=>B(F),className:"font-medium text-teal-600 hover:underline",children:"Edit"}),a.jsx("button",{onClick:()=>s.onDeleteAsset(F.id),className:"font-medium text-red-600 hover:underline",children:"Delete"})]})]},F.id))})]})})]}),a.jsx(Nu,{isOpen:n,onClose:()=>i(!1),onSave:de,editingAsset:l,employees:s.employees,initialType:"Kitchen"}),z&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 p-4 overflow-y-auto flex justify-center items-start",onClick:()=>R(!1),children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl",onClick:F=>F.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"New Store Requisition"}),a.jsx("button",{onClick:()=>R(!1),className:"text-slate-400 hover:text-slate-600",children:""})]}),a.jsxs("div",{className:"p-6 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex space-x-4 mb-4 border-b",children:[a.jsx("button",{onClick:()=>te("item"),className:`pb-2 text-sm font-medium ${O==="item"?"border-b-2 border-blue-900 text-blue-900":"text-slate-500"}`,children:"Select Items"}),a.jsx("button",{onClick:()=>te("dish"),className:`pb-2 text-sm font-medium ${O==="dish"?"border-b-2 border-blue-900 text-blue-900":"text-slate-500"}`,children:"Select by Dish"})]}),O==="item"?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",placeholder:"Search ingredients...",className:"w-full border rounded px-3 py-2 text-sm mb-2",value:j,onChange:F=>E(F.target.value)}),a.jsx("div",{className:"h-64 overflow-y-auto border rounded",children:a.jsxs("table",{className:"w-full text-sm text-left",children:[a.jsx("thead",{className:"bg-slate-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2",children:"Item"}),a.jsx("th",{className:"px-3 py-2",children:"Stock"}),a.jsx("th",{className:"px-3 py-2"})]})}),a.jsx("tbody",{children:we.map(F=>a.jsxs("tr",{className:"hover:bg-purple-50 border-b transition-colors",children:[a.jsx("td",{className:"px-3 py-2",children:F.model}),a.jsxs("td",{className:"px-3 py-2",children:[F.quantity," ",F.unit]}),a.jsxs("td",{className:"px-3 py-2 text-right",children:[a.jsx("button",{onClick:()=>Oe(F,1),className:"text-xs bg-blue-50 text-blue-900 px-2 py-1 rounded hover:bg-blue-100",children:"Add"}),(F.quantity||0)===0&&a.jsx("span",{className:"block text-[10px] text-red-500",children:"Out of Stock"})]})]},F.id))})]})})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Select Dish"}),a.jsxs("select",{className:"w-full border rounded px-3 py-2 text-sm",value:X,onChange:F=>T(F.target.value),children:[a.jsx("option",{value:"",children:"-- Choose --"}),(e=s.recipes)==null?void 0:e.map(F=>a.jsx("option",{value:F.id,children:F.name},F.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Portions"}),a.jsx("input",{type:"number",min:"1",value:k,onChange:F=>S(parseInt(F.target.value)),className:"w-full border rounded px-3 py-2 text-sm"})]}),a.jsx("button",{onClick:he,className:"w-full bg-blue-900 text-white py-2 rounded text-sm hover:bg-blue-800",children:"Add Ingredients to Cart"})]})]}),a.jsxs("div",{className:"flex flex-col h-full bg-slate-50 rounded border p-4",children:[a.jsx("h3",{className:"font-bold text-slate-800 mb-2",children:"Request Cart"}),a.jsx("div",{className:"flex-1 overflow-y-auto mb-4 bg-white rounded border p-2",children:ee.length===0?a.jsx("p",{className:"text-slate-400 text-center text-sm py-4",children:"Empty"}):a.jsx("ul",{className:"space-y-2",children:ee.map((F,ce)=>a.jsxs("li",{className:"flex justify-between items-center text-sm border-b pb-1",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:F.item.model}),a.jsxs("span",{className:"text-xs text-slate-500 ml-1",children:["(",F.item.unit,")"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"number",min:"0.1",step:"0.1",value:F.qty,onChange:me=>L(F.item.id,parseFloat(me.target.value)),className:"w-16 border rounded px-1 py-0.5 text-center"}),a.jsx("button",{onClick:()=>Q(F.item.id),className:"text-red-500 hover:text-red-700",children:""})]})]},ce))})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Purpose / Note"}),a.jsx("textarea",{className:"w-full border rounded px-3 py-2 text-sm",rows:2,placeholder:"e.g. Class preparation",value:re,onChange:F=>$(F.target.value)}),a.jsx("button",{onClick:ge,className:"w-full mt-3 bg-green-600 text-white py-2 rounded font-medium hover:bg-green-700",children:"Submit Request"})]})]})]})]})})]})},Hk=({inventory:s,employees:e,onAddNewAsset:n,onUpdateAsset:i,onDeleteAsset:l,onResignEmployee:c})=>{const[p,g]=V.useState(!1),[f,x]=V.useState(null),[N,w]=V.useState("All"),[D,P]=V.useState(""),[z,R]=V.useState(),O=V.useMemo(()=>s.filter(X=>X.type!=="Kitchen"),[s]),te=V.useMemo(()=>{const X=N==="All"?O:O.filter(k=>k.status===N),T=D.trim().toLowerCase();return T?X.filter(k=>Object.values(k).some(S=>String(S).toLowerCase().includes(T))||Object.values(k.specs||{}).some(S=>String(S).toLowerCase().includes(T))):X},[N,O,D]),ee=["All","In Use","In Stock","Maintenance"],ue=()=>{x(null),R(N==="All"?"In Use":N),g(!0)},re=X=>{x(X),g(!0)},$=(X,T)=>{T&&X.length===1?i({...X[0],id:T}):n(X),g(!1),x(null)};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:"Master Inventory"}),a.jsx("p",{className:"text-sm text-blue-900 dark:text-gray-400",children:"A complete list of all company hardware (IT & General)."})]}),a.jsxs("button",{onClick:ue,className:"px-4 py-2 bg-purple-900 text-white rounded-lg hover:bg-purple-800 transition-colors shadow-md text-sm font-medium flex items-center space-x-2",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),a.jsx("span",{children:"Assign New Asset"})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-4",children:[a.jsx("div",{className:"flex bg-purple-50 dark:bg-gray-700 rounded-lg",children:ee.map(X=>a.jsxs("button",{onClick:()=>w(X),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${N===X?"bg-purple-900 text-white shadow":"text-blue-900 dark:text-gray-300 hover:bg-purple-200 dark:hover:bg-gray-600"}`,children:[X," (",X==="All"?O.length:O.filter(T=>T.status===X).length,")"]},X))}),a.jsxs("div",{className:"relative w-full md:w-auto",children:[a.jsx("input",{type:"text",placeholder:"Search anything...",value:D,onChange:X=>P(X.target.value),className:"w-full md:w-80 pl-10 pr-4 py-2 border border-slate-200 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-900 placeholder-slate-400 text-blue-900"}),a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"h-5 w-5 text-purple-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]}),a.jsx(mf,{inventory:te,onEdit:re,onResign:c,onDelete:l,view:N})]}),a.jsx(Nu,{isOpen:p,onClose:()=>g(!1),onSave:$,editingAsset:f,initialStatus:z,employees:e,isMultiAddMode:!f&&N!=="In Stock"&&N!=="Maintenance"})]})},Ky=({assetType:s,inventory:e,employees:n,onAddNewAsset:i,onUpdateAsset:l,onDeleteAsset:c,onResignEmployee:p})=>{const[g,f]=V.useState(!1),[x,N]=V.useState(null),[w,D]=V.useState(""),P=V.useMemo(()=>e.filter(k=>k.type===s),[e,s]),z=V.useMemo(()=>{const k=w.trim().toLowerCase();return k?P.filter(S=>Object.values(S).some(j=>String(j).toLowerCase().includes(k))||Object.values(S.specs||{}).some(j=>String(j).toLowerCase().includes(k))):P},[P,w]),R=V.useMemo(()=>({total:P.length,inUse:P.filter(k=>k.status==="In Use").length,inStock:P.filter(k=>k.status==="In Stock").length,maintenance:P.filter(k=>k.status==="Maintenance").length}),[P]),O=()=>{N(null),f(!0)},te=k=>{N(k),f(!0)},ee=(k,S)=>{const j=k.map(E=>({...E,type:s}));S&&j.length===1?l({...j[0],id:S}):i(j),f(!1),N(null)},ue=({title:k,count:S,icon:j,colorClasses:E})=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 flex items-center space-x-4",children:[a.jsx("div",{className:`rounded-full p-3 ${E.bg}`,children:wu.cloneElement(j,{className:`h-6 w-6 ${E.text}`})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-gray-400",children:k}),a.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:S})]})]}),re=k=>a.jsx("svg",{...k,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),$=k=>a.jsx("svg",{...k,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),X=k=>a.jsx("svg",{...k,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),T=k=>a.jsxs("svg",{...k,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066 2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]});return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:[s," Inventory"]}),a.jsx("button",{onClick:O,className:"px-4 py-2 bg-purple-900 text-white rounded-lg hover:bg-purple-800 text-sm font-medium flex items-center space-x-2",children:a.jsxs("span",{children:["Add New ",s]})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[a.jsx(ue,{title:`Total ${s}s`,count:R.total,icon:a.jsx(re,{}),colorClasses:{bg:"bg-purple-50 dark:bg-gray-700",text:"text-purple-800 dark:text-gray-300"}}),a.jsx(ue,{title:"In Use",count:R.inUse,icon:a.jsx($,{}),colorClasses:{bg:"bg-green-100 dark:bg-green-900",text:"text-green-600 dark:text-green-300"}}),a.jsx(ue,{title:"In Stock",count:R.inStock,icon:a.jsx(X,{}),colorClasses:{bg:"bg-purple-100 dark:bg-purple-900",text:"text-purple-900 dark:text-blue-300"}}),a.jsx(ue,{title:"Maintenance",count:R.maintenance,icon:a.jsx(T,{}),colorClasses:{bg:"bg-yellow-100 dark:bg-yellow-900",text:"text-yellow-600 dark:text-yellow-300"}})]}),a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"relative w-full md:w-auto",children:[a.jsx("input",{type:"text",placeholder:`Search ${s}s... (e.g., model, serial, user)`,value:w,onChange:k=>D(k.target.value),className:"w-full md:w-96 pl-10 pr-4 py-2 border border-slate-200 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-900 placeholder-slate-400 text-blue-900"}),a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"h-5 w-5 text-purple-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),a.jsx(mf,{inventory:z,onEdit:te,onResign:p,onDelete:c,view:"All"}),a.jsx(Nu,{isOpen:g,onClose:()=>f(!1),onSave:ee,editingAsset:x,employees:n,initialType:s})]})},Wk=s=>{const[e,n]=V.useState("overview"),i=s.currentUserEmail==="admin",l=V.useMemo(()=>({master:s.inventory.filter(p=>p.type!=="Kitchen").length,laptops:s.inventory.filter(p=>p.type==="Laptop").length,desktops:s.inventory.filter(p=>p.type==="Desktop").length,printers:s.inventory.filter(p=>p.type==="Printer").length,labs:s.labs.length,kitchen:s.inventory.filter(p=>p.type==="Kitchen").length}),[s.inventory,s.labs]),c=()=>{switch(e){case"master":return a.jsx(Hk,{inventory:s.inventory,employees:s.employees,onAddNewAsset:s.onAddNewAsset,onUpdateAsset:s.onUpdateAsset,onDeleteAsset:s.onDeleteAsset,onResignEmployee:s.onResignEmployee});case"laptops":return a.jsx(Ky,{assetType:"Laptop",inventory:s.inventory,employees:s.employees,onAddNewAsset:s.onAddNewAsset,onUpdateAsset:s.onUpdateAsset,onDeleteAsset:s.onDeleteAsset,onResignEmployee:s.onResignEmployee});case"desktops":return a.jsx(Ky,{assetType:"Desktop",inventory:s.inventory,employees:s.employees,onAddNewAsset:s.onAddNewAsset,onUpdateAsset:s.onUpdateAsset,onDeleteAsset:s.onDeleteAsset,onResignEmployee:s.onResignEmployee});case"printers":return a.jsx(zk,{printers:s.inventory.filter(f=>f.type==="Printer"),toners:s.toners,employees:s.employees,onAddNewAsset:s.onAddNewAsset,onUpdateAsset:s.onUpdateAsset,onDeleteAsset:s.onDeleteAsset,onResignEmployee:s.onResignEmployee,onSaveTonerModel:s.onSaveTonerModel,onDeleteTonerModel:s.onDeleteTonerModel,onMarkTonerEmpty:s.onMarkTonerEmpty,onMarkTonerFilled:s.onMarkTonerFilled});case"labs":return a.jsx($k,{labs:s.labs,onAddSystem:s.onAddSystem,onUpdateSystem:s.onUpdateSystem,onDeleteSystem:s.onDeleteSystem});case"kitchen":return a.jsx(Bk,{inventory:s.inventory,employees:s.employees,onAddNewAsset:s.onAddNewAsset,onUpdateAsset:s.onUpdateAsset,onDeleteAsset:s.onDeleteAsset,onUpdateKitchenStock:s.onUpdateKitchenStock,recipes:s.recipes,onCreateSCRequest:s.onCreateSCRequest,currentUserEmail:s.currentUserEmail});case"overview":default:const p=[{id:"master",title:"Master Inventory",count:l.master,icon:a.jsx(ou,{}),onClick:()=>n("master"),color:"bg-purple-900"},{id:"laptops",title:"Laptops",count:l.laptops,icon:a.jsx(lu,{}),onClick:()=>n("laptops"),color:"bg-purple-800"},{id:"desktops",title:"Desktops",count:l.desktops,icon:a.jsx(lu,{}),onClick:()=>n("desktops"),color:"bg-purple-700"},{id:"printers",title:"Printers & Toners",count:l.printers,icon:a.jsx(Rv,{}),onClick:()=>n("printers"),color:"bg-purple-900"},{id:"labs",title:"Computer Labs",count:l.labs,icon:a.jsx(Pv,{}),onClick:()=>n("labs"),color:"bg-purple-800"},{id:"kitchen",title:"The Chef's Academy",count:l.kitchen,icon:a.jsx(df,{}),onClick:()=>n("kitchen"),color:"bg-purple-900"}],g=i?p:p.filter(f=>{var x,N;return(N=(x=s.permissions)==null?void 0:x[f.id])==null?void 0:N.view});return a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white mb-6",children:"Inventory Overview"}),g.length>0?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(f=>a.jsx(Lk,{...f},f.id))}):a.jsxs("div",{className:"text-center py-10 px-6 bg-white dark:bg-gray-800 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-white",children:"No Inventory Access"}),a.jsx("p",{className:"mt-1 text-sm text-blue-900 dark:text-gray-400",children:"You do not have permission to view any inventory categories."})]})]})}};return a.jsxs("div",{className:"p-6",children:[e!=="overview"&&a.jsxs("button",{onClick:()=>n("overview"),className:"mb-6 flex items-center text-sm font-medium text-purple-800 dark:text-blue-400 hover:underline",children:[a.jsx(Ed,{className:"h-4 w-4 mr-1"}),"Back to Inventory Overview"]}),c()]})},Gk=({users:s,onResignEmployee:e})=>{const[n,i]=V.useState(null),l=c=>{i(n===c?null:c)};return a.jsxs("div",{className:"p-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white mb-6",children:"Employees & Assigned Assets"}),a.jsx("div",{className:"space-y-4",children:s.map(c=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow transition-shadow duration-200",children:[a.jsxs("div",{className:"w-full flex justify-between items-center p-4 text-left",children:[a.jsxs("div",{onClick:()=>l(c.id),className:"cursor-pointer flex-grow",children:[a.jsx("p",{className:"font-semibold text-blue-900 dark:text-white",children:c.name}),a.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:c.email})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("span",{className:"text-sm px-2 py-1 bg-purple-100 text-purple-900 dark:bg-gray-700 rounded-full",children:[c.assets.length," Assets"]}),c.assets.length>0&&a.jsx("button",{onClick:()=>e(c.name),className:"font-medium text-yellow-600 dark:text-yellow-500 hover:underline text-sm px-2 py-1 rounded-md hover:bg-yellow-100 dark:hover:bg-gray-700","aria-label":`Resign all assets from ${c.name}`,children:"Resign"}),a.jsx("button",{onClick:()=>l(c.id),"aria-label":"Toggle asset details",className:"p-1",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 text-blue-600 dark:text-gray-400 transition-transform ${n===c.id?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),n===c.id&&a.jsx("div",{className:"border-t border-slate-200 dark:border-gray-700 p-4",children:c.assets.length>0?a.jsx("ul",{className:"space-y-2",children:c.assets.map(p=>a.jsxs("li",{className:"flex justify-between items-center text-sm",children:[a.jsxs("div",{children:[a.jsxs("span",{className:"font-medium text-blue-900 dark:text-gray-200",children:[p.type,":"]}),a.jsx("span",{className:"text-blue-600 dark:text-gray-400 ml-2",children:p.model})]}),a.jsx("span",{className:"text-xs font-mono bg-purple-50 text-purple-900 dark:bg-gray-700 px-2 py-1 rounded",children:p.id})]},p.id))}):a.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400 text-center",children:"No assets assigned to this user."})})]},c.id))})]})},Qy={mrfNumber:"",demandNumber:"",description:""},Kk=({isOpen:s,onClose:e,onSave:n,editingMRF:i})=>{const[l,c]=V.useState(Qy);V.useEffect(()=>{s&&c(i?{mrfNumber:i.mrfNumber,demandNumber:i.demandNumber,description:i.description}:Qy)},[i,s]);const p=N=>{const{name:w,value:D}=N.target;c(P=>({...P,[w]:D}))},g=N=>{N.preventDefault(),n(l,i==null?void 0:i.id)};if(!s)return null;const f=i?"Edit MRF":"Generate New MRF",x=i?"Update the details for this MRF.":"Enter the details for the new Material Requisition Form.";return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 p-4 overflow-y-auto flex justify-center items-start","aria-modal":"true",role:"dialog",onClick:e,children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg",onClick:N=>N.stopPropagation(),children:[a.jsxs("form",{onSubmit:g,children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:f}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:x})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"mrfNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"MRF Number"}),a.jsx("input",{type:"text",id:"mrfNumber",name:"mrfNumber",value:l.mrfNumber,onChange:p,required:!0,className:"mt-1 block w-full input-style"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"demandNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Demand Number"}),a.jsx("input",{type:"text",id:"demandNumber",name:"demandNumber",value:l.demandNumber,onChange:p,required:!0,className:"mt-1 block w-full input-style"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),a.jsx("textarea",{id:"description",name:"description",value:l.description,onChange:p,required:!0,rows:4,className:"mt-1 block w-full input-style"})]})]}),a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600 flex justify-end space-x-3 flex-shrink-0",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 btn-secondary",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 btn-primary",children:"Save MRF"})]})]}),a.jsx("style",{children:`
                    .input-style { background-color: #F9FAFB; border: 1px solid #D1D5DB; border-radius: 0.5rem; padding: 0.75rem 1rem; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); transition: all 0.2s ease-in-out; width: 100%; }
                    .dark .input-style { background-color: #374151; border-color: #4B5563; color: #F9FAFB; }
                    .input-style:focus { outline: none; --tw-ring-color: #3B82F6; box-shadow: 0 0 0 2px var(--tw-ring-color); }
                    .btn-primary { padding: 0.5rem 1rem; font-size: 0.875rem; font-weight: 500; color: white; background-color: #2563EB; border: 1px solid transparent; border-radius: 0.5rem; }
                    .btn-primary:hover { background-color: #1D4ED8; }
                    .btn-secondary { padding: 0.5rem 1rem; font-size: 0.875rem; font-weight: 500; color: #374151; background-color: white; border: 1px solid #D1D5DB; border-radius: 0.5rem; }
                    .dark .btn-secondary { color: #D1D5DB; background-color: #374151; border-color: #4B5563; }
                    .btn-secondary:hover { background-color: #F9FAFB; }
                    .dark .btn-secondary:hover { background-color: #4B5563; }
                `})]})})},Qk=({mrfs:s,onAddNewMRF:e,onUpdateMRF:n,onDeleteMRF:i})=>{const[l,c]=V.useState(!1),[p,g]=V.useState(null),f=()=>{g(null),c(!0)},x=R=>{g(R),c(!0)},N=()=>{c(!1),g(null)},w=(R,O)=>{if(O){const te=s.find(ue=>ue.id===O);if(!te)return;const ee={...te,...R};n(ee)}else{const te={mrfNumber:R.mrfNumber,demandNumber:R.demandNumber,description:R.description,date:new Date().toISOString(),status:"Pending"};e(te)}N()},D=(R,O)=>{n({...R,status:O})},P=R=>{window.confirm("Are you sure you want to delete this MRF? This action cannot be undone.")&&i(R)},z=R=>{switch(R){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"Proceed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:"MRF Management"}),a.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:"Track and manage all Material Requisition Forms."})]}),a.jsxs("button",{onClick:f,className:"px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors shadow-md text-sm font-medium flex items-center space-x-2","aria-label":"Generate New MRF",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),a.jsx("span",{children:"Generate MRF"})]})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm text-left text-blue-600 dark:text-gray-400",children:[a.jsx("thead",{className:"text-xs text-blue-900 uppercase bg-purple-50 dark:bg-gray-700 dark:text-gray-400",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3",children:"MRF No."}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:"Demand No."}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:"Date"}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:"Description"}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),a.jsx("th",{scope:"col",className:"px-6 py-3",children:a.jsx("span",{className:"sr-only",children:"Actions"})})]})}),a.jsx("tbody",{children:s.length>0?s.map(R=>a.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700 hover:bg-purple-50 dark:hover:bg-gray-600",children:[a.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-blue-900 dark:text-white whitespace-nowrap",children:R.mrfNumber}),a.jsx("td",{className:"px-6 py-4 text-blue-800",children:R.demandNumber}),a.jsx("td",{className:"px-6 py-4 text-blue-800",children:new Date(R.date).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 text-blue-800",children:a.jsx("div",{className:"max-w-xs overflow-hidden whitespace-nowrap text-ellipsis",title:R.description,children:R.description||"-"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("select",{value:R.status,onChange:O=>D(R,O.target.value),className:`border-none rounded-md text-xs font-semibold p-1 ${z(R.status)} focus:ring-2 focus:ring-blue-900`,"aria-label":`Status for MRF ${R.mrfNumber}`,children:[a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"Proceed",children:"Proceed"})]})}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end space-x-4",children:[a.jsx("button",{onClick:()=>x(R),className:"font-medium text-blue-600 dark:text-blue-500 hover:underline",children:"Edit"}),a.jsx("button",{onClick:()=>P(R.id),className:"font-medium text-red-600 dark:text-red-500 hover:underline",children:"Delete"})]})})]},R.id)):a.jsx("tr",{children:a.jsxs("td",{colSpan:6,className:"text-center py-10 px-6",children:[a.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-white",children:"No MRFs Found"}),a.jsx("p",{className:"mt-1 text-sm text-blue-600 dark:text-gray-400",children:"There are no Material Requisition Forms yet."}),a.jsx("button",{onClick:f,className:"mt-4 px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors shadow-md text-sm font-medium",children:"Generate the First MRF"})]})})})]})})]}),a.jsx(Kk,{isOpen:l,onClose:N,onSave:w,editingMRF:p})]})},Yk=({inventory:s,employees:e})=>{const[n,i]=V.useState("user"),l=()=>{let x=[];const N=new Date().toISOString().slice(0,10);n==="user"?x=s.filter(P=>P.assignedTo).map(P=>{const z=e.find(R=>`${R.firstName} ${R.lastName}`===P.assignedTo);return{"Employee Name":P.assignedTo,Department:(z==null?void 0:z.department)||P.department||"-",Designation:(z==null?void 0:z.designation)||P.designation||"-","Asset Type":P.type,Brand:P.brand||"-",Model:P.model,"Serial Number":P.serialNumber||"-","Issue Date":P.issueDate||"-",Status:P.status}}).sort((P,z)=>P["Employee Name"].localeCompare(z["Employee Name"])):n==="equipment"?x=s.map(P=>({Type:P.type,Brand:P.brand||"-",Model:P.model,"Serial Number":P.serialNumber||"-",Status:P.status,"Assigned To":P.assignedTo||"Unassigned",Department:P.department||"-"})).sort((P,z)=>P.Type.localeCompare(z.Type)):n==="department"&&(x=s.filter(P=>P.department).map(P=>({Department:P.department,"Assigned Employee":P.assignedTo||"Unassigned","Asset Type":P.type,Model:P.model,"Serial Number":P.serialNumber||"-",Status:P.status})).sort((P,z)=>(P.Department||"").localeCompare(z.Department||"")));const w=XLSX.utils.json_to_sheet(x),D=XLSX.utils.book_new();XLSX.utils.book_append_sheet(D,w,"Report"),XLSX.writeFile(D,`Inventory_${n}_report_${N}.xlsx`)},c=()=>{window.print()},p=()=>{const x=new Map;s.filter(w=>w.assignedTo).forEach(w=>{if(!x.has(w.assignedTo)){const D=e.find(P=>`${P.firstName} ${P.lastName}`===w.assignedTo);x.set(w.assignedTo,{emp:D,assets:[]})}x.get(w.assignedTo).assets.push(w)});const N=Array.from(x.entries()).sort((w,D)=>w[0].localeCompare(D[0]));return a.jsxs("div",{className:"space-y-8",children:[N.map(([w,{emp:D,assets:P}])=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-slate-200 dark:border-gray-700 overflow-hidden break-inside-avoid",children:[a.jsxs("div",{className:"bg-slate-50 dark:bg-gray-700 px-6 py-4 border-b border-slate-200 dark:border-gray-600 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-blue-900 dark:text-white",children:w}),a.jsxs("p",{className:"text-sm text-blue-600 dark:text-gray-300",children:[(D==null?void 0:D.designation)||P[0].designation||"N/A"," - ",a.jsx("span",{className:"font-medium text-teal-600 dark:text-teal-400",children:(D==null?void 0:D.department)||P[0].department||"N/A"})]})]}),a.jsxs("div",{className:"text-sm font-medium bg-purple-100 text-purple-900 px-3 py-1 rounded-full",children:[P.length," Assets"]})]}),a.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-white dark:bg-gray-800",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Model"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Serial"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Issue Date"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-gray-700",children:P.map(z=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-3 text-sm text-blue-900 dark:text-white font-medium",children:z.type}),a.jsxs("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300",children:[z.brand," ",z.model]}),a.jsx("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300 font-mono",children:z.serialNumber||"-"}),a.jsx("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300",children:z.issueDate||"-"})]},z.id))})]})]},w)),N.length===0&&a.jsx("p",{className:"text-center text-blue-600",children:"No assigned assets found."})]})},g=()=>{const x=new Map;s.forEach(w=>{x.has(w.type)||x.set(w.type,[]),x.get(w.type).push(w)});const N=Array.from(x.entries()).sort((w,D)=>w[0].localeCompare(D[0]));return a.jsx("div",{className:"space-y-8",children:N.map(([w,D])=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-slate-200 dark:border-gray-700 overflow-hidden break-inside-avoid",children:[a.jsxs("div",{className:"bg-slate-50 dark:bg-gray-700 px-6 py-4 border-b border-slate-200 dark:border-gray-600 flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-bold text-blue-900 dark:text-white",children:w}),a.jsxs("div",{className:"text-sm font-medium bg-purple-100 text-purple-900 px-3 py-1 rounded-full",children:[D.length," Total"]})]}),a.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-white dark:bg-gray-800",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Model"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Serial"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Assigned To"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-gray-700",children:D.map(P=>a.jsxs("tr",{children:[a.jsxs("td",{className:"px-6 py-3 text-sm text-blue-900 dark:text-white",children:[P.brand," ",P.model]}),a.jsx("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300 font-mono",children:P.serialNumber||"-"}),a.jsx("td",{className:"px-6 py-3 text-sm",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${P.status==="In Use"?"bg-green-100 text-green-800":P.status==="In Stock"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:P.status})}),a.jsx("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300",children:P.assignedTo||"-"})]},P.id))})]})]},w))})},f=()=>{const x=new Map;s.forEach(w=>{const D=w.department||"Unassigned";x.has(D)||x.set(D,[]),x.get(D).push(w)});const N=Array.from(x.entries()).sort((w,D)=>w[0]==="Unassigned"?1:D[0]==="Unassigned"?-1:w[0].localeCompare(D[0]));return a.jsx("div",{className:"space-y-8",children:N.map(([w,D])=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-slate-200 dark:border-gray-700 overflow-hidden break-inside-avoid",children:[a.jsxs("div",{className:"bg-slate-50 dark:bg-gray-700 px-6 py-4 border-b border-slate-200 dark:border-gray-600 flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-bold text-blue-900 dark:text-white",children:w}),a.jsxs("div",{className:"text-sm font-medium bg-orange-100 text-orange-800 px-3 py-1 rounded-full",children:[D.length," Assets"]})]}),a.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-white dark:bg-gray-800",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Assigned To"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Model"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Serial"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-gray-700",children:D.map(P=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-3 text-sm text-blue-900 dark:text-white font-medium",children:P.assignedTo||"-"}),a.jsx("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300",children:P.type}),a.jsxs("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300",children:[P.brand," ",P.model]}),a.jsx("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300 font-mono",children:P.serialNumber||"-"})]},P.id))})]})]},w))})};return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4 no-print",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:"Inventory Reports"}),a.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:"Generate and export detailed inventory reports."})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx("div",{className:"relative",children:a.jsxs("select",{value:n,onChange:x=>i(x.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-slate-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md shadow-sm bg-white dark:bg-gray-700 dark:border-gray-600 text-blue-900 dark:text-white",children:[a.jsx("option",{value:"user",children:"User-wise Report"}),a.jsx("option",{value:"equipment",children:"Equipment-wise Report"}),a.jsx("option",{value:"department",children:"Department-wise Report"})]})}),a.jsx("button",{onClick:c,className:"px-4 py-2 bg-white dark:bg-gray-700 border border-slate-300 dark:border-gray-600 rounded-lg text-blue-900 dark:text-gray-200 hover:bg-slate-50 dark:hover:bg-gray-600 text-sm font-medium transition-colors shadow-sm",children:"Print"}),a.jsxs("button",{onClick:l,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium transition-colors shadow-md flex items-center gap-2",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Excel"]})]})]}),a.jsxs("div",{className:"report-content",children:[a.jsxs("div",{className:"hidden print-block mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-center text-blue-900",children:"MASBOT ERP Inventory Report"}),a.jsxs("p",{className:"text-center text-lg mt-2 capitalize text-blue-800",children:[n,"-wise Breakdown"]}),a.jsx("p",{className:"text-center text-sm text-blue-600",children:new Date().toLocaleDateString()})]}),n==="user"&&p(),n==="equipment"&&g(),n==="department"&&f()]}),a.jsx("style",{children:`
                @media print {
                    .no-print { display: none !important; }
                    .print-block { display: block !important; }
                    body { background-color: white; }
                    .report-content { width: 100%; }
                    /* Ensure colors print */
                    * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
                }
                .print-block { display: none; }
            `})]})},Xk=s=>{const e=s.currentUserEmail==="admin",n=V.useMemo(()=>{if(e)return"assets";if(!s.permissions)return null;if(hf.some(x=>{var N,w;return(w=(N=s.permissions)==null?void 0:N[x.id])==null?void 0:w.view}))return"assets";const f=Cd.find(x=>{var N,w;return x.id!=="assets"&&((w=(N=s.permissions)==null?void 0:N[x.id])==null?void 0:w.view)});return(f==null?void 0:f.id)||null},[e,s.permissions]),[i,l]=V.useState(n);V.useEffect(()=>{!i&&n&&l(n)},[n,i]);const c=V.useMemo(()=>{const f=new Map;return s.employees.forEach(x=>{f.set(x.email,{id:x.id,name:`${x.firstName} ${x.lastName}`,email:x.email,assets:[]})}),s.inventory.forEach(x=>{if(x.assignedTo){const N=Array.from(f.values()).find(w=>w.name===x.assignedTo);N&&N.assets.push({id:x.id,type:x.type,model:x.model})}}),Array.from(f.values())},[s.employees,s.inventory]);V.useMemo(()=>s.inventory.filter(f=>f.type==="Printer"),[s.inventory]);const p=()=>{if(!i)return a.jsxs("div",{className:"p-6 text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Access Denied"}),a.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"You do not have permission to view any pages in this module. Please contact an administrator."})]});switch(i){case"assets":return a.jsx(Wk,{inventory:s.inventory,onAddNewAsset:s.onAddNewAsset,onUpdateAsset:s.onUpdateAsset,onDeleteAsset:s.onDeleteAsset,onResignEmployee:s.onResignEmployee,employees:s.employees,labs:s.labs,toners:s.toners,onAddSystem:s.onAddSystem,onUpdateSystem:s.onUpdateSystem,onDeleteSystem:s.onDeleteSystem,onSaveTonerModel:s.onSaveTonerModel,onDeleteTonerModel:s.onDeleteTonerModel,onMarkTonerEmpty:s.onMarkTonerEmpty,onMarkTonerFilled:s.onMarkTonerFilled,onUpdateKitchenStock:s.onUpdateKitchenStock,currentUserEmail:s.currentUserEmail,permissions:s.permissions,recipes:s.recipes,onCreateSCRequest:s.onCreateSCRequest});case"users":return a.jsx(Gk,{users:c,onResignEmployee:s.onResignEmployee});case"mrf":return a.jsx(Qk,{mrfs:s.mrfs,onAddNewMRF:s.onAddNewMRF,onUpdateMRF:s.onUpdateMRF,onDeleteMRF:s.onDeleteMRF});case"reports":return a.jsx(Yk,{inventory:s.inventory,employees:s.employees});case"settings":return a.jsxs("div",{className:"p-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Settings"}),a.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Settings page is under construction."})]});default:return null}},g={assets:"Inventory",users:"Employees & Assigned Assets",labs:"Computer Labs",printers:"Printers & Toners",mrf:"MRF Management",reports:"Inventory Reports",settings:"Settings"};return a.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[a.jsx(Rk,{currentPage:i,onNavigate:l,permissions:s.permissions,currentUserEmail:s.currentUserEmail,employees:s.employees}),a.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsxs("header",{className:"bg-purple-900 dark:bg-purple-950 border-b border-purple-800 dark:border-purple-900 h-16 flex-shrink-0 flex items-center justify-between px-6",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("button",{onClick:s.onBack,className:"flex items-center gap-2 text-sm font-medium text-purple-200 hover:text-white",children:[a.jsx(pf,{className:"w-5 h-5"}),a.jsx("span",{children:"Home"})]})}),a.jsx("h1",{className:"text-lg font-bold text-white",children:i?g[i]:"Inventory Management"}),a.jsxs("button",{onClick:s.onLogout,className:"flex items-center gap-2 bg-purple-800 text-white px-4 py-2 rounded-lg shadow-sm hover:bg-purple-700 transition-colors","aria-label":"Logout",children:[a.jsx(Uo,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})]}),a.jsx("div",{className:"flex-1 overflow-x-hidden overflow-y-auto",children:p()})]})]})},Jk=({activePage:s,setActivePage:e,currentUserEmail:n})=>{const i=n==="admin";return a.jsxs("aside",{className:"w-64 bg-white border-r border-slate-200 flex flex-col flex-shrink-0",children:[a.jsx("div",{className:"h-16 flex items-center justify-center border-b border-slate-200 px-4",children:a.jsx(Fo,{className:"h-8 w-auto"})}),a.jsxs("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:[a.jsx("div",{className:"text-xs font-semibold text-blue-900 uppercase tracking-wider mb-4 px-2",children:"Supply Chain"}),Mv.map(l=>{if(l.id==="sc_approvals"&&!i)return null;const c=l.icon,p=s===l.id;return a.jsxs("button",{onClick:()=>e(l.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors text-sm font-medium ${p?"bg-purple-50 text-purple-900":"text-blue-900 hover:bg-purple-50"}`,children:[a.jsx(c,{className:`w-5 h-5 ${p?"text-purple-900":"text-purple-400"}`}),a.jsx("span",{children:l.label})]},l.id)})]}),a.jsx("div",{className:"p-4 border-t border-slate-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-8 w-8 rounded-full bg-purple-100 flex items-center justify-center text-purple-900 font-bold text-xs",children:n.charAt(0).toUpperCase()}),a.jsxs("div",{className:"overflow-hidden",children:[a.jsx("p",{className:"text-sm font-medium text-blue-900 truncate",children:n}),a.jsx("p",{className:"text-xs text-blue-800 truncate",children:i?"CEO / Admin":"User"})]})]})})]})},Zk=({inventory:s,currentUserEmail:e,employees:n,onCreateRequest:i,recipes:l=[]})=>{var c;const[p,g]=V.useState("item"),[f,x]=V.useState([]),[N,w]=V.useState(""),[D,P]=V.useState(""),[z,R]=V.useState(null),[O,te]=V.useState(""),[ee,ue]=V.useState(1),re=V.useMemo(()=>s.filter(j=>j.type==="Kitchen"&&j.model.toLowerCase().includes(D.toLowerCase())),[s,D]),$=(j,E=1)=>{x(A=>A.find(_=>_.item.id===j.id)?A.map(_=>_.item.id===j.id?{..._,qty:_.qty+E}:_):[...A,{item:j,qty:E}])},X=(j,E)=>{x(f.map(A=>A.item.id===j?{...A,qty:Math.max(.001,E)}:A))},T=j=>{x(f.filter(E=>E.item.id!==j))},k=()=>{if(!O)return;const j=l.find(_=>_.id===O);if(!j)return;let E=0,A=[];j.ingredients.forEach(_=>{const be=s.find(Ae=>Ae.model.toLowerCase()===_.name.toLowerCase()&&Ae.type==="Kitchen");if(be){const Ae=_.quantity*ee;$(be,Ae),E++}else A.push(_.name)}),A.length>0?R({type:"error",text:`Added available ingredients, but could not find: ${A.join(", ")}`}):E>0&&R({type:"success",text:`Ingredients for ${ee} portions of ${j.name} added to cart.`})},S=async()=>{if(f.length===0){R({type:"error",text:"Please add items to your request."});return}if(!N.trim()){R({type:"error",text:"Please specify a purpose or recipe for this request."});return}const j=n.find(A=>A.email===e),E={requesterName:j?`${j.firstName} ${j.lastName}`:e,requesterEmail:e,department:(j==null?void 0:j.department)||"Kitchen",date:new Date().toISOString(),purpose:N,status:"Pending Account Manager",items:f.map(A=>({inventoryId:A.item.id,name:A.item.model,quantityRequested:A.qty,unit:A.item.unit||"units"}))};await i(E),R({type:"success",text:"Request submitted successfully to Account Manager for approval."}),x([]),w("")};return a.jsx("div",{className:"max-w-6xl mx-auto space-y-6",children:a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[a.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-4",children:"New Stock Requisition"}),a.jsxs("div",{className:"flex space-x-4 mb-6 border-b border-slate-200",children:[a.jsx("button",{onClick:()=>g("item"),className:`pb-2 px-4 text-sm font-medium border-b-2 transition-colors ${p==="item"?"border-blue-900 text-blue-900":"border-transparent text-blue-800 hover:text-blue-900"}`,children:"Item Selection"}),a.jsx("button",{onClick:()=>g("dish"),className:`pb-2 px-4 text-sm font-medium border-b-2 transition-colors ${p==="dish"?"border-blue-900 text-blue-900":"border-transparent text-blue-800 hover:text-blue-900"}`,children:"Dish Selection"})]}),z&&a.jsx("div",{className:`p-4 mb-4 rounded-md text-sm ${z.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:z.text}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsx("div",{children:p==="item"?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",placeholder:"Search ingredients...",className:"w-full px-4 py-2 border rounded-lg mb-4 focus:ring-2 focus:ring-blue-900 focus:outline-none placeholder-blue-300 text-blue-900",value:D,onChange:j=>P(j.target.value)}),a.jsx("div",{className:"h-96 overflow-y-auto border rounded-lg",children:a.jsxs("table",{className:"w-full text-sm text-left",children:[a.jsx("thead",{className:"bg-purple-50 text-blue-900 font-medium sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2",children:"Item"}),a.jsx("th",{className:"px-4 py-2",children:"Available"}),a.jsx("th",{className:"px-4 py-2",children:"Action"})]})}),a.jsx("tbody",{className:"divide-y",children:re.map(j=>(f.some(E=>E.item.id===j.id),a.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[a.jsx("td",{className:"px-4 py-2 font-medium text-blue-900",children:j.model}),a.jsxs("td",{className:"px-4 py-2 text-blue-900",children:[j.quantity," ",j.unit]}),a.jsx("td",{className:"px-4 py-2",children:a.jsx("button",{onClick:()=>$(j),disabled:j.quantity===0,className:"text-xs bg-purple-900 text-white px-2 py-1 rounded hover:bg-purple-800 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"})})]},j.id)))})]})})]}):a.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-100 h-full",children:[a.jsx("h3",{className:"font-bold text-blue-900 mb-4",children:"Select a Dish"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Recipe / Dish"}),a.jsxs("select",{value:O,onChange:j=>te(j.target.value),className:"w-full border-blue-200 rounded-md focus:ring-blue-900 text-blue-900",children:[a.jsx("option",{value:"",children:"-- Select Dish --"}),l.map(j=>a.jsx("option",{value:j.id,children:j.name},j.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Number of Portions"}),a.jsx("input",{type:"number",min:"1",value:ee,onChange:j=>ue(Math.max(1,parseInt(j.target.value)||1)),className:"w-full border-blue-200 rounded-md focus:ring-blue-900 text-blue-900"})]}),a.jsx("button",{onClick:k,disabled:!O,className:"w-full bg-blue-900 text-white py-2 rounded-md hover:bg-blue-800 disabled:bg-blue-300 transition-colors",children:"Add Ingredients to Cart"}),O&&a.jsxs("div",{className:"mt-4 p-4 bg-white rounded border border-blue-100",children:[a.jsx("h4",{className:"text-xs font-bold text-blue-900 uppercase mb-2",children:"Ingredients per portion:"}),a.jsx("ul",{className:"text-xs text-blue-900 space-y-1",children:(c=l.find(j=>j.id===O))==null?void 0:c.ingredients.map((j,E)=>a.jsxs("li",{className:"flex justify-between",children:[a.jsx("span",{children:j.name}),a.jsxs("span",{children:[j.quantity," ",j.unit]})]},E))})]})]})]})}),a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200 flex flex-col",children:[a.jsx("h3",{className:"font-bold text-blue-900 mb-4",children:"Request Cart"}),a.jsx("div",{className:"flex-1 overflow-y-auto mb-4",children:f.length===0?a.jsx("p",{className:"text-blue-900 text-center py-10 italic",children:"No items selected."}):a.jsx("ul",{className:"space-y-2",children:f.map((j,E)=>a.jsxs("li",{className:"bg-white p-3 rounded shadow-sm flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-blue-900",children:j.item.model}),a.jsxs("p",{className:"text-xs text-blue-900",children:["Unit: ",j.item.unit]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",min:"0.001",step:"0.001",value:j.qty,onChange:A=>X(j.item.id,parseFloat(A.target.value)),className:"w-20 px-2 py-1 border rounded text-sm text-center text-blue-900"}),a.jsx("button",{onClick:()=>T(j.item.id),className:"text-red-500 hover:text-red-700",children:""})]})]},E))})}),a.jsxs("div",{className:"mt-auto",children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Purpose / Note"}),a.jsx("textarea",{value:N,onChange:j=>w(j.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-900 focus:outline-none mb-4 text-blue-900 placeholder-blue-300",rows:2,placeholder:"e.g. For Advanced Baking Class - Croissants"}),a.jsx("button",{onClick:S,className:"w-full bg-blue-900 text-white py-2 rounded-lg font-medium hover:bg-blue-800 transition-colors shadow-sm",children:"Submit Request"})]})]})]})]})})},ej=({requests:s,purchaseOrders:e,onAction:n,onPOAction:i})=>{const[l,c]=V.useState("requisitions"),p=s.filter(f=>f.status==="Pending Account Manager"),g=e.filter(f=>f.status==="Pending Account Manager");return a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Account Manager Approvals"})}),a.jsx("div",{className:"border-b border-slate-200 mb-6",children:a.jsxs("nav",{className:"-mb-px flex space-x-8",children:[a.jsxs("button",{onClick:()=>c("requisitions"),className:`whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm ${l==="requisitions"?"border-purple-900 text-purple-900":"border-transparent text-blue-900 hover:text-blue-800 hover:border-slate-300"}`,children:["Requisitions (",p.length,")"]}),a.jsxs("button",{onClick:()=>c("pos"),className:`whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm ${l==="pos"?"border-purple-900 text-purple-900":"border-transparent text-blue-900 hover:text-blue-800 hover:border-slate-300"}`,children:["Purchase Orders (",g.length,")"]})]})}),l==="requisitions"&&a.jsx(a.Fragment,{children:p.length===0?a.jsx("div",{className:"bg-white p-12 rounded-lg shadow-sm text-center",children:a.jsx("p",{className:"text-blue-900 text-lg",children:"No pending requisitions awaiting approval."})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:p.map(f=>a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-l-4 border-l-orange-400",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-blue-900",children:f.requesterName}),a.jsxs("p",{className:"text-sm text-blue-900",children:[f.department,"  ",new Date(f.date).toLocaleDateString()]})]}),a.jsx("span",{className:"bg-orange-100 text-orange-800 text-xs font-bold px-2 py-1 rounded uppercase tracking-wide",children:f.status})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Purpose:"}),a.jsxs("p",{className:"text-sm text-blue-900 bg-purple-50 p-2 rounded italic",children:['"',f.purpose,'"']})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Items Requested:"}),a.jsx("ul",{className:"text-sm space-y-1",children:f.items.map((x,N)=>a.jsxs("li",{className:"flex justify-between border-b border-slate-100 pb-1 last:border-0 hover:bg-purple-50 transition-colors text-blue-900",children:[a.jsx("span",{children:x.name}),a.jsxs("span",{className:"font-mono text-blue-900",children:[x.quantityRequested," ",x.unit]})]},N))})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>n(f.id,"Approve"),className:"flex-1 bg-green-600 text-white py-2 rounded font-medium hover:bg-green-700 transition-colors",children:"Approve"}),a.jsx("button",{onClick:()=>{const x=prompt("Enter rejection reason:");x&&n(f.id,"Reject",x)},className:"flex-1 bg-red-50 text-red-600 border border-red-200 py-2 rounded font-medium hover:bg-red-100 transition-colors",children:"Reject"})]})]},f.id))})}),l==="pos"&&a.jsx(a.Fragment,{children:g.length===0?a.jsx("div",{className:"bg-white p-12 rounded-lg shadow-sm text-center",children:a.jsx("p",{className:"text-blue-900 text-lg",children:"No pending Purchase Orders awaiting approval."})}):a.jsx("div",{className:"grid grid-cols-1 gap-6",children:g.map(f=>a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-l-4 border-l-purple-500",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"font-bold text-lg text-blue-900",children:["PO #",f.poNumber]}),a.jsxs("p",{className:"text-sm text-blue-900",children:["Vendor: ",f.vendorName,"  ",new Date(f.date).toLocaleDateString()]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:["PKR ",f.totalAmount.toLocaleString()]}),a.jsx("span",{className:"bg-purple-100 text-purple-800 text-xs font-bold px-2 py-1 rounded uppercase tracking-wide",children:f.status})]})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("table",{className:"w-full text-sm text-left",children:[a.jsx("thead",{className:"bg-purple-50 text-blue-900",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2",children:"Item"}),a.jsx("th",{className:"px-4 py-2 text-center",children:"Qty"}),a.jsx("th",{className:"px-4 py-2 text-right",children:"Unit Price"}),a.jsx("th",{className:"px-4 py-2 text-right",children:"Total"})]})}),a.jsx("tbody",{className:"divide-y border-t border-b",children:f.items.map((x,N)=>a.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[a.jsx("td",{className:"px-4 py-2 text-blue-900",children:x.itemName}),a.jsxs("td",{className:"px-4 py-2 text-center text-blue-900",children:[x.quantity," ",x.unit]}),a.jsx("td",{className:"px-4 py-2 text-right text-blue-900",children:x.unitPrice}),a.jsx("td",{className:"px-4 py-2 text-right text-blue-900",children:x.totalPrice})]},N))})]})}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100 justify-end",children:[a.jsx("button",{onClick:()=>i(f.id,"Reject"),className:"px-6 py-2 bg-red-50 text-red-600 border border-red-200 rounded font-medium hover:bg-red-100 transition-colors",children:"Reject PO"}),a.jsx("button",{onClick:()=>i(f.id,"Approve"),className:"px-6 py-2 bg-green-600 text-white rounded font-medium hover:bg-green-700 transition-colors",children:"Approve PO"})]})]},f.id))})})]})},tj=({requests:s,purchaseRequests:e,purchaseOrders:n,inventory:i,employees:l,onIssue:c,onForwardToPurchase:p,onCreatePurchaseRequest:g,onCreateSCRequest:f,onGRN:x,currentUserEmail:N,onAddNewAsset:w,onUpdateAsset:D,onDeleteAsset:P,recipes:z=[]})=>{const[R,O]=V.useState("inventory"),[te,ee]=V.useState(""),[ue,re]=V.useState(!1),[$,X]=V.useState([]),[T,k]=V.useState(""),[S,j]=V.useState(""),[E,A]=V.useState(!1),[_,be]=V.useState({name:"",brand:"",quantity:1,unit:"units",description:""}),[Ae,B]=V.useState(!1),[de,ye]=V.useState(null),[Ee,Oe]=V.useState({grnNumber:"",remarks:""}),[L,Q]=V.useState(!1),[he,ge]=V.useState(null),we=V.useMemo(()=>i.filter(Y=>Y.type==="Kitchen"),[i]),F=5,ce=V.useMemo(()=>{const Y=te.toLowerCase();return we.filter(Fe=>Fe.model.toLowerCase().includes(Y)||Fe.itemName&&Fe.itemName.toLowerCase().includes(Y)||Fe.itemCode&&Fe.itemCode.toLowerCase().includes(Y)||Fe.type.toLowerCase().includes(Y))},[we,te]),me=V.useMemo(()=>{if(!S)return we;const Y=S.toLowerCase();return we.filter(Fe=>Fe.model.toLowerCase().includes(Y))},[we,S]),Ce=we.filter(Y=>(Y.quantity||0)<=F),ut=s.filter(Y=>Y.status==="Pending Store"),tn=n.filter(Y=>Y.status==="Approved"),nn=V.useMemo(()=>z.map(Y=>{let Fe=1/0,rt="None";return Y.ingredients.forEach(_t=>{const En=i.find(_n=>_n.model.toLowerCase()===_t.name.toLowerCase()&&_n.type==="Kitchen"),Mr=(En==null?void 0:En.quantity)||0;if(_t.quantity>0){const _n=Math.floor(Mr/_t.quantity);_n<Fe&&(Fe=_n,rt=_t.name)}}),{...Y,maxPortions:Fe===1/0?0:Fe,limitingIngredient:rt}}),[z,i]),vn=Y=>{X([]),k(""),j(""),A(!1),be({name:"",brand:"",quantity:1,unit:"units",description:""}),Y&&Qt(Y,10),re(!0)},Qt=(Y,Fe)=>{X(rt=>rt.find(_t=>_t.item.id===Y.id)?rt.map(_t=>_t.item.id===Y.id?{..._t,qty:_t.qty+Fe}:_t):[...rt,{item:Y,qty:Fe}])},us=()=>{if(!_.name){alert("Item Name is required");return}const Y=`NEW-${Date.now()}`,Fe=_.brand?`${_.name} (${_.brand})`:_.name,rt={id:Y,model:Fe,type:"Kitchen",status:"In Stock",assignedTo:"",quantity:0,unit:_.unit,others:_.description};Qt(rt,_.quantity),be({name:"",brand:"",quantity:1,unit:"units",description:""}),alert("Custom item added to cart.")},nr=Y=>{X($.filter(Fe=>Fe.item.id!==Y))},Dr=async()=>{if(!f)return;if($.length===0){alert("Cart is empty");return}const Y=l.find(rt=>rt.email===N),Fe={requesterName:Y?`${Y.firstName} ${Y.lastName}`:N||"Store Manager",requesterEmail:N||"",department:"Store",date:new Date().toISOString(),purpose:T||"Store Stock Replenishment",status:"Pending Account Manager",items:$.map(rt=>({inventoryId:rt.item.id.startsWith("NEW-")?"":rt.item.id,name:rt.item.model,quantityRequested:rt.qty,unit:rt.item.unit||"units"}))};await f(Fe),re(!1),alert("Store Requisition (MRF) submitted to Account Manager.")},Pr=Y=>{ye(Y),Oe({grnNumber:`GRN-${Date.now()}`,remarks:"All items received in good condition."}),B(!0)},kt=async()=>{de&&(await x(de.id,Ee),B(!1),ye(null))},Et=()=>{ge(null),Q(!0)},rr=Y=>{ge(Y),Q(!0)},Fi=(Y,Fe)=>{Fe?D({...Y[0],id:Fe}):w(Y),Q(!1)},Rr=({title:Y,count:Fe,colorClass:rt,icon:_t})=>a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm flex items-center border border-slate-200",children:[a.jsx("div",{className:`p-3 rounded-full ${rt} mr-4`,children:_t}),a.jsxs("div",{children:[a.jsx("p",{className:"text-blue-900 text-sm font-medium",children:Y}),a.jsx("p",{className:"text-2xl font-bold text-blue-900",children:Fe})]})]});return a.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Store Manager Dashboard"}),a.jsx("div",{className:"flex gap-2",children:a.jsxs("button",{onClick:()=>vn(),className:"px-4 py-2 bg-purple-900 text-white rounded-lg hover:bg-purple-800 font-medium flex items-center gap-2 shadow-sm",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})}),"New Store Requisition (MRF)"]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(Rr,{title:"Total Inventory Items",count:we.length,colorClass:"bg-purple-100 text-purple-900",icon:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),a.jsx(Rr,{title:"Low Stock Alerts",count:Ce.length,colorClass:"bg-red-100 text-red-600",icon:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsx(Rr,{title:"Pending Requisitions",count:ut.length,colorClass:"bg-yellow-100 text-yellow-600",icon:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden min-h-[500px]",children:[a.jsxs("div",{className:"border-b border-slate-200 flex flex-wrap",children:[a.jsx("button",{onClick:()=>O("inventory"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${R==="inventory"?"border-purple-900 text-purple-900 bg-purple-50":"border-transparent text-blue-900 hover:text-blue-800"}`,children:"Inventory & Stock"}),a.jsx("button",{onClick:()=>O("dishAvailability"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${R==="dishAvailability"?"border-purple-900 text-purple-900 bg-purple-50":"border-transparent text-blue-900 hover:text-blue-800"}`,children:"Dish Availability"}),a.jsx("button",{onClick:()=>O("fulfillment"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${R==="fulfillment"?"border-purple-900 text-purple-900 bg-purple-50":"border-transparent text-blue-900 hover:text-blue-800"}`,children:"Fulfillment (Chef Requests)"}),a.jsx("button",{onClick:()=>O("receiving"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${R==="receiving"?"border-purple-900 text-purple-900 bg-purple-50":"border-transparent text-blue-900 hover:text-blue-800"}`,children:"Receiving (GRN)"}),a.jsx("button",{onClick:()=>O("purchaseHistory"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${R==="purchaseHistory"?"border-purple-900 text-purple-900 bg-purple-50":"border-transparent text-blue-900 hover:text-blue-800"}`,children:"Purchase History"})]}),a.jsxs("div",{className:"p-6",children:[R==="inventory"&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("input",{type:"text",placeholder:"Search inventory (Code, Name, Category)...",className:"w-full md:w-96 px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-900 focus:outline-none placeholder-slate-400 text-blue-900",value:te,onChange:Y=>ee(Y.target.value)}),a.jsx("button",{onClick:Et,className:"px-4 py-2 bg-purple-900 text-white rounded-lg hover:bg-purple-800 text-sm font-medium flex items-center gap-2",children:a.jsx("span",{children:"+ Add Item"})})]}),a.jsx("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:a.jsxs("table",{className:"min-w-full text-xs text-left divide-y divide-slate-200",children:[a.jsx("thead",{className:"bg-purple-50 text-blue-900 font-semibold whitespace-nowrap",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Item Code"}),a.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Item Name"}),a.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Category"}),a.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Sub-Category"}),a.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Brand"}),a.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Model"}),a.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Serial Number"}),a.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Quantity"}),a.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"UOM"}),a.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Purchase Date"}),a.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Cost"}),a.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Asset Life"}),a.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Location"}),a.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Condition"}),a.jsx("th",{className:"px-4 py-3 border-r border-slate-200",children:"Remarks"}),a.jsx("th",{className:"px-4 py-3 text-center sticky right-0 bg-purple-50 shadow-sm",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-100 whitespace-nowrap",children:ce.map(Y=>a.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[a.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:Y.itemCode||"-"}),a.jsx("td",{className:"px-4 py-2 border-r border-slate-100 font-medium text-blue-900",children:Y.itemName||Y.model}),a.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:Y.type}),a.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:Y.subCategory||"-"}),a.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:Y.brand||"-"}),a.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:Y.model}),a.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:Y.serialNumber||"-"}),a.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-center font-bold text-blue-900",children:Y.quantity||0}),a.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:Y.unit||"-"}),a.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:Y.purchaseDate||"-"}),a.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:Y.cost||"-"}),a.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:Y.assetLife||"-"}),a.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:Y.location||"-"}),a.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900",children:Y.condition||"-"}),a.jsx("td",{className:"px-4 py-2 border-r border-slate-100 text-blue-900 italic truncate max-w-xs",children:Y.remarks||Y.others||"-"}),a.jsxs("td",{className:"px-4 py-2 text-center sticky right-0 bg-white shadow-sm flex gap-2 justify-center",children:[a.jsx("button",{onClick:()=>rr(Y),className:"text-purple-900 hover:text-purple-950 font-medium",children:"Edit"}),a.jsx("button",{onClick:()=>P(Y.id),className:"text-red-600 hover:text-red-800 font-medium",children:"Del"}),a.jsx("button",{onClick:()=>vn(Y),className:"text-purple-900 hover:text-purple-950 font-medium",title:"Request Stock (MRF)",children:"+Stock"})]})]},Y.id))})]})})]}),R==="dishAvailability"&&a.jsx("div",{children:a.jsx("div",{className:"bg-white border border-slate-200 rounded-lg overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm text-left divide-y divide-slate-200",children:[a.jsx("thead",{className:"bg-purple-50 text-blue-900 font-semibold uppercase",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4",children:"Dish Name"}),a.jsx("th",{className:"px-6 py-4 text-center",children:"Max Portions Available"}),a.jsx("th",{className:"px-6 py-4",children:"Limiting Ingredient (Bottleneck)"})]})}),a.jsxs("tbody",{className:"divide-y divide-slate-100",children:[nn.map(Y=>a.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 font-medium text-blue-900",children:Y.name}),a.jsx("td",{className:"px-6 py-4 text-center",children:a.jsx("span",{className:`px-3 py-1 rounded-full font-bold ${Y.maxPortions>10?"bg-green-100 text-green-800":Y.maxPortions>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:Y.maxPortions})}),a.jsx("td",{className:"px-6 py-4 text-red-600 font-medium",children:Y.limitingIngredient})]},Y.id)),nn.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:3,className:"text-center py-8 text-blue-900",children:"No recipes defined."})})]})]})})}),R==="fulfillment"&&a.jsx("div",{children:ut.length===0?a.jsx("p",{className:"text-center text-blue-900 py-10",children:"No pending requests from chefs."}):a.jsx("div",{className:"space-y-6",children:ut.map(Y=>a.jsxs("div",{className:"bg-purple-50 p-6 rounded-lg border border-l-4 border-l-purple-900 flex flex-col md:flex-row gap-6",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"font-bold text-lg text-blue-900",children:Y.requesterName}),a.jsx("span",{className:"text-xs bg-purple-100 text-purple-900 px-2 py-0.5 rounded font-bold uppercase",children:"Ready to Issue"})]}),a.jsxs("p",{className:"text-sm text-blue-900 mb-4",children:[Y.department,"  Requested: ",new Date(Y.date).toLocaleString()]}),a.jsx("div",{className:"bg-white p-4 rounded-lg border border-slate-200 mb-4",children:a.jsxs("p",{className:"text-sm text-blue-900",children:[a.jsx("span",{className:"font-bold text-blue-900 block mb-1",children:"Purpose / Reason:"}),Y.purpose]})}),a.jsx("div",{className:"bg-white p-4 rounded-lg border border-slate-200",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-blue-900",children:[a.jsx("th",{className:"pb-2",children:"Item"}),a.jsx("th",{className:"pb-2 text-right",children:"Qty to Issue"})]})}),a.jsx("tbody",{className:"divide-y border-t border-slate-100",children:Y.items.map((Fe,rt)=>a.jsxs("tr",{children:[a.jsx("td",{className:"py-2 font-medium text-blue-900",children:Fe.name}),a.jsxs("td",{className:"py-2 text-right font-mono text-blue-900",children:[Fe.quantityRequested," ",Fe.unit]})]},rt))})]})})]}),a.jsxs("div",{className:"md:w-48 flex flex-col justify-center gap-3",children:[a.jsx("button",{onClick:()=>{window.confirm("Confirm issue? This will deduct items from the main inventory.")&&c(Y.id)},className:"w-full bg-purple-900 text-white py-2 rounded-lg font-bold hover:bg-purple-800 transition-colors shadow-sm text-sm",children:"Issue Items"}),a.jsx("button",{onClick:()=>p(Y.id),className:"w-full bg-orange-100 text-orange-700 border border-orange-200 py-2 rounded-lg font-bold hover:bg-orange-200 transition-colors shadow-sm text-sm",children:"Forward to Purchase"})]})]},Y.id))})}),R==="receiving"&&a.jsx("div",{children:tn.length===0?a.jsx("p",{className:"text-center text-blue-900 py-10",children:"No pending purchase orders to receive."}):a.jsx("div",{className:"space-y-6",children:tn.map(Y=>a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-l-4 border-l-green-500",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"font-bold text-lg text-blue-900",children:["PO #",Y.poNumber]}),a.jsxs("p",{className:"text-sm text-blue-900",children:["Vendor: ",Y.vendorName]})]}),a.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-bold px-2 py-1 rounded uppercase",children:"Approved - Awaiting Delivery"})]}),a.jsx("div",{className:"mb-4",children:a.jsxs("table",{className:"w-full text-sm text-left",children:[a.jsx("thead",{className:"bg-purple-50 text-blue-900",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2",children:"Item"}),a.jsx("th",{className:"px-4 py-2 text-center",children:"Qty to Receive"})]})}),a.jsx("tbody",{className:"divide-y border-t border-b border-slate-100",children:Y.items.map((Fe,rt)=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-blue-900",children:Fe.itemName}),a.jsxs("td",{className:"px-4 py-2 text-center font-bold text-blue-900",children:[Fe.quantity," ",Fe.unit]})]},rt))})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:()=>Pr(Y),className:"bg-green-600 text-white px-6 py-2 rounded font-medium hover:bg-green-700 transition-colors",children:"Generate GRN & Add Stock"})})]},Y.id))})}),R==="purchaseHistory"&&a.jsx("div",{children:a.jsxs("table",{className:"w-full text-sm text-left",children:[a.jsx("thead",{className:"bg-purple-50 text-blue-900 font-medium",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3",children:"Date"}),a.jsx("th",{className:"px-4 py-3",children:"Item"}),a.jsx("th",{className:"px-4 py-3",children:"Qty Requested"}),a.jsx("th",{className:"px-4 py-3",children:"Priority"}),a.jsx("th",{className:"px-4 py-3",children:"Status"}),a.jsx("th",{className:"px-4 py-3",children:"Notes"})]})}),a.jsxs("tbody",{className:"divide-y divide-slate-100",children:[e.map(Y=>a.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[a.jsx("td",{className:"px-4 py-3 text-blue-900",children:new Date(Y.date).toLocaleDateString()}),a.jsx("td",{className:"px-4 py-3 font-medium text-blue-900",children:Y.itemName}),a.jsxs("td",{className:"px-4 py-3 text-blue-900",children:[Y.quantityRequested," ",Y.unit]}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Y.priority==="High"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:Y.priority})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded text-xs font-bold uppercase",children:Y.status})}),a.jsx("td",{className:"px-4 py-3 text-blue-900 italic max-w-xs truncate",children:Y.notes||"-"})]},Y.id)),e.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"text-center py-8 text-blue-900",children:"No purchase requests yet."})})]})]})})]})]}),ue&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:()=>re(!1),children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",onClick:Y=>Y.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b flex justify-between items-center border-slate-200",children:[a.jsx("h2",{className:"text-xl font-bold text-blue-900",children:"Create Store Requisition (MRF)"}),a.jsx("button",{onClick:()=>re(!1),className:"text-slate-400 hover:text-slate-600 text-2xl",children:""})]}),a.jsxs("div",{className:"p-6 grid grid-cols-1 lg:grid-cols-2 gap-6 flex-1 overflow-hidden",children:[a.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[a.jsxs("div",{className:"flex mb-4 border-b border-slate-200",children:[a.jsx("button",{className:`flex-1 pb-2 text-sm font-medium ${E?"text-blue-900 hover:text-purple-800":"border-b-2 border-purple-900 text-purple-900"}`,onClick:()=>A(!1),children:"Select from Inventory"}),a.jsx("button",{className:`flex-1 pb-2 text-sm font-medium ${E?"border-b-2 border-purple-900 text-purple-900":"text-blue-900 hover:text-purple-800"}`,onClick:()=>A(!0),children:"Add Custom Item"})]}),E?a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsx("h3",{className:"font-bold text-blue-900 mb-4",children:"New / Custom Item Details"}),a.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto pr-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Item Name"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-900 focus:outline-none placeholder-slate-400 text-blue-900",placeholder:"e.g. Special Coffee Beans",value:_.name,onChange:Y=>be({..._,name:Y.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Brand (Optional)"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-900 focus:outline-none placeholder-slate-400 text-blue-900",placeholder:"e.g. Nestl",value:_.brand,onChange:Y=>be({..._,brand:Y.target.value})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Quantity"}),a.jsx("input",{type:"number",min:"1",className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-900 focus:outline-none placeholder-slate-400 text-blue-900",value:_.quantity,onChange:Y=>be({..._,quantity:parseFloat(Y.target.value)||0})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Unit"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-900 focus:outline-none placeholder-slate-400 text-blue-900",placeholder:"kg, pcs, boxes",value:_.unit,onChange:Y=>be({..._,unit:Y.target.value})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Description / Notes"}),a.jsx("textarea",{className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-900 focus:outline-none placeholder-slate-400 text-blue-900",rows:3,placeholder:"Specific details about the item...",value:_.description,onChange:Y=>be({..._,description:Y.target.value})})]}),a.jsx("button",{onClick:us,className:"w-full bg-purple-900 text-white py-2 rounded-lg font-medium hover:bg-purple-800 transition-colors",children:"Add to Cart"})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"font-bold text-blue-900 mb-2",children:"Inventory Items"}),a.jsx("input",{type:"text",placeholder:"Search items...",className:"w-full px-3 py-2 border border-slate-200 rounded-lg mb-3 text-sm focus:ring-2 focus:ring-purple-900 focus:outline-none placeholder-slate-400 text-blue-900",value:S,onChange:Y=>j(Y.target.value)}),a.jsx("div",{className:"flex-1 overflow-y-auto border border-slate-200 rounded-lg",children:a.jsxs("table",{className:"w-full text-sm text-left",children:[a.jsx("thead",{className:"bg-purple-50 text-blue-900 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2",children:"Item"}),a.jsx("th",{className:"px-3 py-2",children:"Current Stock"}),a.jsx("th",{className:"px-3 py-2"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-100",children:me.map(Y=>a.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[a.jsx("td",{className:"px-3 py-2 font-medium text-blue-900",children:Y.model}),a.jsxs("td",{className:`px-3 py-2 ${Y.quantity<=F?"text-red-600 font-bold":"text-blue-900"}`,children:[Y.quantity," ",Y.unit]}),a.jsx("td",{className:"px-3 py-2 text-right",children:a.jsx("button",{onClick:()=>Qt(Y,10),className:"text-xs bg-purple-900 text-white px-2 py-1 rounded hover:bg-purple-800",children:"Add"})})]},Y.id))})]})})]})]}),a.jsxs("div",{className:"flex flex-col h-full bg-purple-50 rounded border border-purple-200 p-4 overflow-hidden",children:[a.jsx("h3",{className:"font-bold text-blue-900 mb-2",children:"Requisition Cart"}),a.jsx("div",{className:"flex-1 overflow-y-auto mb-4 bg-white rounded border border-slate-200 p-2",children:$.length===0?a.jsx("p",{className:"text-slate-400 text-center text-sm py-10",children:"Cart is empty"}):a.jsx("ul",{className:"space-y-2",children:$.map((Y,Fe)=>a.jsxs("li",{className:"bg-white p-2 rounded border border-slate-100 shadow-sm flex justify-between items-center text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-blue-900",children:Y.item.model}),a.jsxs("p",{className:"text-xs text-blue-900",children:["Unit: ",Y.item.unit]}),Y.item.id.startsWith("NEW-")&&a.jsx("span",{className:"text-[10px] bg-purple-100 text-purple-800 px-1 rounded",children:"New Item"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",min:"1",value:Y.qty,onChange:rt=>{const _t=parseInt(rt.target.value)||0;X(En=>En.map((Mr,_n)=>_n===Fe?{...Mr,qty:_t}:Mr))},className:"w-16 px-1 py-1 border border-slate-200 rounded text-center text-blue-900"}),a.jsx("button",{onClick:()=>nr(Y.item.id),className:"text-red-500 hover:text-red-700",children:""})]})]},Fe))})}),a.jsxs("div",{className:"mt-auto",children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Purpose / Note"}),a.jsx("textarea",{value:T,onChange:Y=>k(Y.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-purple-900 focus:outline-none mb-4 placeholder-slate-400 text-blue-900",rows:2,placeholder:"e.g. Monthly Restock, Low Inventory..."}),a.jsx("button",{onClick:Dr,className:"w-full bg-green-600 text-white py-2 rounded-lg font-medium hover:bg-green-700 transition-colors shadow-sm",children:"Submit Requisition"})]})]})]})]})}),Ae&&de&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:()=>B(!1),children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg p-6",onClick:Y=>Y.stopPropagation(),children:[a.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-2",children:"Generate Goods Received Note (GRN)"}),a.jsxs("p",{className:"text-blue-900 text-sm mb-4",children:["Receive items for PO #",de.poNumber]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"GRN Number"}),a.jsx("input",{type:"text",value:Ee.grnNumber,onChange:Y=>Oe({...Ee,grnNumber:Y.target.value}),className:"w-full border rounded p-2 input-style",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Receipt Remarks / Quality Check"}),a.jsx("textarea",{value:Ee.remarks,onChange:Y=>Oe({...Ee,remarks:Y.target.value}),className:"w-full border rounded p-2 input-style",rows:3,required:!0})]}),a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 p-3 rounded text-sm text-yellow-800",children:[a.jsx("strong",{children:"Warning:"}),' Clicking "Confirm Receipt" will automatically add the PO quantities to your inventory stock levels.']}),a.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>B(!1),className:"px-4 py-2 border rounded text-blue-900 hover:bg-slate-50 border-slate-300",children:"Cancel"}),a.jsx("button",{onClick:kt,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Confirm Receipt & Add Stock"})]})]})]})}),a.jsx(Nu,{isOpen:L,onClose:()=>Q(!1),onSave:Fi,editingAsset:he,employees:l,initialType:"Kitchen"})]})},nj=({requests:s,currentUserEmail:e})=>{const n=s.filter(l=>l.requesterEmail===e||e==="admin"),i=l=>{switch(l){case"Pending Account Manager":return"bg-yellow-100 text-yellow-800";case"Pending Store":return"bg-blue-100 text-blue-800";case"Issued":return"bg-green-100 text-green-800";case"Rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-6",children:"My Requests"}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm text-left",children:[a.jsx("thead",{className:"bg-purple-50 text-blue-900 font-bold uppercase",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4",children:"Date"}),a.jsx("th",{className:"px-6 py-4",children:"Purpose"}),a.jsx("th",{className:"px-6 py-4",children:"Items Count"}),a.jsx("th",{className:"px-6 py-4",children:"Status"}),a.jsx("th",{className:"px-6 py-4",children:"Remarks"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-200",children:n.length>0?n.map(l=>a.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 text-blue-900",children:new Date(l.date).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 font-medium text-blue-900",children:l.purpose}),a.jsx("td",{className:"px-6 py-4 text-blue-900",children:l.items.length}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${i(l.status)}`,children:l.status})}),a.jsx("td",{className:"px-6 py-4 text-blue-900 italic",children:l.status==="Rejected"?l.rejectionReason:l.status==="Issued"?`Issued on ${new Date(l.issuedDate).toLocaleDateString()}`:"-"})]},l.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-blue-900",children:"No requests found."})})})]})})]})},rj=({requests:s,purchaseRequests:e,vendors:n,purchaseOrders:i,onCreatePO:l,onUpdatePO:c,onDeletePO:p,currentUserEmail:g})=>{const[f,x]=V.useState("pending"),[N,w]=V.useState(null),[D,P]=V.useState({vendorId:"",price:0}),[z,R]=V.useState(!1),[O,te]=V.useState(null),[ee,ue]=V.useState({vendorId:"",totalAmount:0,status:"Pending Account Manager"}),re=s.filter(S=>S.status==="Forwarded to Purchase"),$=async()=>{if(!N||!D.vendorId)return;const S=n.find(A=>A.id===D.vendorId);if(!S)return;const j=D.price,E={poNumber:`PO-${Date.now().toString().slice(-6)}`,originalRequestId:N.id,vendorId:S.id,vendorName:S.name,date:new Date().toISOString(),status:"Pending Account Manager",generatedBy:g,totalAmount:j,items:N.items.map(A=>({itemName:A.name,quantity:A.quantityRequested,unit:A.unit,unitPrice:j/N.items.length,totalPrice:j/N.items.length,inventoryId:A.inventoryId}))};await l(E),w(null),P({vendorId:"",price:0}),alert("Purchase Order created and sent to Account Manager for approval.")},X=S=>{te(S),ue({vendorId:S.vendorId,totalAmount:S.totalAmount,status:S.status}),R(!0)},T=async S=>{if(S.preventDefault(),!O||!c)return;const j=n.find(E=>E.id===ee.vendorId);await c(O.id,{vendorId:ee.vendorId,vendorName:(j==null?void 0:j.name)||O.vendorName,totalAmount:ee.totalAmount,status:ee.status}),R(!1),te(null)},k=S=>{switch(S){case"Pending Account Manager":return"bg-yellow-100 text-yellow-800";case"Approved":return"bg-blue-100 text-blue-800";case"Received":return"bg-green-100 text-green-800";case"Rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return a.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Purchase Department"})}),a.jsx("div",{className:"border-b border-slate-200",children:a.jsxs("nav",{className:"-mb-px flex space-x-8",children:[a.jsxs("button",{onClick:()=>x("pending"),className:`whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm ${f==="pending"?"border-blue-900 text-blue-900":"border-transparent text-blue-900 hover:text-blue-800 hover:border-slate-300"}`,children:["Process Requests (",re.length,")"]}),a.jsx("button",{onClick:()=>x("history"),className:`whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm ${f==="history"?"border-blue-900 text-blue-900":"border-transparent text-blue-900 hover:text-blue-800 hover:border-slate-300"}`,children:"Purchase History"})]})}),f==="pending"&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Requests to Process"}),re.length===0?a.jsx("div",{className:"bg-white p-8 rounded-lg shadow-sm text-center text-blue-900",children:"No requests forwarded from Store."}):a.jsx("div",{className:"space-y-4",children:re.map(S=>a.jsxs("div",{className:`bg-white p-4 rounded-lg shadow-sm border-2 cursor-pointer transition-all ${(N==null?void 0:N.id)===S.id?"border-blue-900 ring-2 ring-blue-100":"border-transparent hover:border-slate-300"}`,onClick:()=>w(S),children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h4",{className:"font-bold text-blue-900",children:S.purpose}),a.jsx("span",{className:"text-xs font-mono text-blue-900",children:new Date(S.date).toLocaleDateString()})]}),a.jsxs("p",{className:"text-sm text-blue-900 mb-2",children:["From: ",S.requesterName," (",S.department,")"]}),a.jsxs("div",{className:"bg-purple-50 p-2 rounded text-xs text-blue-900",children:[a.jsx("strong",{children:"Items:"})," ",S.items.map(j=>`${j.name} (${j.quantityRequested} ${j.unit})`).join(", ")]})]},S.id))})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm h-fit sticky top-6",children:[a.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-4 border-b pb-2",children:"Create Purchase Order"}),N?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Selected Request"}),a.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-100 rounded text-sm text-blue-900",children:[N.purpose," (",N.items.length," items)"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Date"}),a.jsx("input",{type:"text",value:new Date().toLocaleDateString(),disabled:!0,className:"w-full bg-slate-100 border rounded p-2 text-blue-900 cursor-not-allowed"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Select Vendor"}),a.jsxs("select",{value:D.vendorId,onChange:S=>P({...D,vendorId:S.target.value}),className:"w-full border rounded p-2 focus:ring-blue-900 text-blue-900",children:[a.jsx("option",{value:"",children:"-- Choose Vendor --"}),n.map(S=>a.jsx("option",{value:S.id,children:S.name},S.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Total Estimated Cost (PKR)"}),a.jsx("input",{type:"number",min:"0",value:D.price,onChange:S=>P({...D,price:parseFloat(S.target.value)}),className:"w-full border rounded p-2 focus:ring-blue-900 text-blue-900"})]}),a.jsx("button",{onClick:$,disabled:!D.vendorId||D.price<=0,className:"w-full bg-blue-900 text-white py-2 rounded font-medium hover:bg-blue-800 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors",children:"Generate PO for Approval"})]}):a.jsx("p",{className:"text-blue-900 text-sm text-center py-10",children:"Select a request from the list to generate a Purchase Order."})]})]}),f==="history"&&a.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm text-left",children:[a.jsx("thead",{className:"bg-purple-50 text-blue-900 uppercase font-bold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4",children:"Date"}),a.jsx("th",{className:"px-6 py-4",children:"PO Number"}),a.jsx("th",{className:"px-6 py-4",children:"Vendor"}),a.jsx("th",{className:"px-6 py-4",children:"Items"}),a.jsx("th",{className:"px-6 py-4 text-right",children:"Total Amount"}),a.jsx("th",{className:"px-6 py-4",children:"Status"}),a.jsx("th",{className:"px-6 py-4",children:"GRN Info"}),a.jsx("th",{className:"px-6 py-4 text-center",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-200",children:i.length>0?i.map(S=>{var j;return a.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 text-blue-900",children:new Date(S.date).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 font-mono font-medium text-blue-900",children:S.poNumber}),a.jsx("td",{className:"px-6 py-4 text-blue-900",children:S.vendorName}),a.jsx("td",{className:"px-6 py-4 text-blue-900",children:a.jsxs("div",{className:"max-w-xs truncate",title:S.items.map(E=>E.itemName).join(", "),children:[S.items.length," items (",(j=S.items[0])==null?void 0:j.itemName,"...)"]})}),a.jsxs("td",{className:"px-6 py-4 text-right font-bold text-blue-900",children:["PKR ",S.totalAmount.toLocaleString()]}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${k(S.status)}`,children:S.status})}),a.jsx("td",{className:"px-6 py-4 text-xs text-blue-900",children:S.grnNumber?a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-green-700",children:S.grnNumber}),a.jsx("p",{children:new Date(S.grnDate).toLocaleDateString()})]}):"-"}),a.jsx("td",{className:"px-6 py-4 text-center",children:a.jsxs("div",{className:"flex justify-center gap-2",children:[a.jsx("button",{onClick:()=>X(S),className:"text-blue-900 hover:text-blue-950 text-xs font-medium",title:"Edit PO",disabled:S.status==="Received",children:"Edit"}),a.jsx("span",{className:"text-blue-300",children:"|"}),a.jsx("button",{onClick:()=>p&&p(S.id),className:"text-red-600 hover:text-red-800 text-xs font-medium",title:"Delete PO",children:"Delete"})]})})]},S.id)}):a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"text-center py-10 text-blue-900",children:"No purchase history available."})})})]})}),z&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:()=>R(!1),children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",onClick:S=>S.stopPropagation(),children:[a.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-4 border-b pb-2",children:"Edit Purchase Order"}),a.jsxs("form",{onSubmit:T,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Vendor"}),a.jsx("select",{value:ee.vendorId,onChange:S=>ue({...ee,vendorId:S.target.value}),className:"w-full border rounded p-2 focus:ring-blue-900 text-blue-900",children:n.map(S=>a.jsx("option",{value:S.id,children:S.name},S.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Total Amount (PKR)"}),a.jsx("input",{type:"number",min:"0",value:ee.totalAmount,onChange:S=>ue({...ee,totalAmount:parseFloat(S.target.value)}),className:"w-full border rounded p-2 focus:ring-blue-900 text-blue-900"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Status"}),a.jsxs("select",{value:ee.status,onChange:S=>ue({...ee,status:S.target.value}),className:"w-full border rounded p-2 focus:ring-blue-900 text-blue-900",children:[a.jsx("option",{value:"Pending Account Manager",children:"Pending Account Manager"}),a.jsx("option",{value:"Approved",children:"Approved"}),a.jsx("option",{value:"Rejected",children:"Rejected"}),a.jsx("option",{value:"Received",children:"Received"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>R(!1),className:"px-4 py-2 border rounded text-blue-900 hover:bg-slate-50",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-900 text-white rounded hover:bg-blue-800",children:"Save Changes"})]})]})]})})]})},sj=s=>{const[e,n]=V.useState("sc_my_requests"),i=s.employees.find(x=>x.email===s.currentUserEmail),l=s.currentUserEmail==="admin",c=l||(i==null?void 0:i.role)==="HOD"&&(i==null?void 0:i.department)==="Finance"||(i==null?void 0:i.designation)==="Account Manager",p=l||(i==null?void 0:i.role)==="HOD"||(i==null?void 0:i.department)==="Store",g=l||(i==null?void 0:i.department)==="Finance"||(i==null?void 0:i.department)==="Purchase",f=()=>{switch(e){case"sc_requests":return a.jsx(Zk,{inventory:s.inventory,currentUserEmail:s.currentUserEmail,employees:s.employees,onCreateRequest:s.onCreateRequest,recipes:s.recipes});case"sc_approvals":return c?a.jsx(ej,{requests:s.requests,purchaseOrders:s.purchaseOrders,onAction:s.onActionRequest,onPOAction:s.onPOAction}):a.jsx("div",{className:"p-6 text-center text-blue-900",children:"Access Denied. Account Managers Only."});case"sc_store":return p?a.jsx(tj,{requests:s.requests,purchaseRequests:s.purchaseRequests,purchaseOrders:s.purchaseOrders,inventory:s.inventory,employees:s.employees,recipes:s.recipes,onIssue:s.onIssueRequest,onForwardToPurchase:s.onForwardToPurchase,onCreatePurchaseRequest:s.onCreatePurchaseRequest,onCreateSCRequest:s.onCreateRequest,onGRN:s.onGRN,currentUserEmail:s.currentUserEmail,onAddNewAsset:s.onAddNewAsset,onUpdateAsset:s.onUpdateAsset,onDeleteAsset:s.onDeleteAsset}):a.jsx("div",{className:"p-6 text-center text-blue-900",children:"Access Denied. Store Managers Only."});case"sc_purchase":return g?a.jsx(rj,{requests:s.requests,purchaseRequests:s.purchaseRequests,vendors:s.vendors,purchaseOrders:s.purchaseOrders,onCreatePO:s.onCreatePO,onUpdatePO:s.onUpdatePO,onDeletePO:s.onDeletePO,currentUserEmail:s.currentUserEmail}):a.jsx("div",{className:"p-6 text-center text-blue-900",children:"Access Denied. Purchase Department Only."});case"sc_my_requests":default:return a.jsx(nj,{requests:s.requests,currentUserEmail:s.currentUserEmail})}};return a.jsxs("div",{className:"flex h-screen bg-slate-100",children:[a.jsx(Jk,{activePage:e,setActivePage:n,currentUserEmail:s.currentUserEmail}),a.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsxs("header",{className:"bg-purple-900 border-b border-purple-800 h-16 flex-shrink-0 flex items-center justify-between px-6 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{onClick:s.onBack,className:"flex items-center gap-2 text-sm font-medium text-purple-200 hover:text-white",children:[a.jsx(pf,{className:"w-5 h-5"}),a.jsx("span",{children:"Home"})]}),a.jsx("div",{className:"h-6 w-px bg-purple-700 mx-2"}),a.jsx("h1",{className:"text-lg font-bold text-white",children:"The Chef's Academy Supply Chain"})]}),a.jsxs("button",{onClick:s.onLogout,className:"flex items-center gap-2 bg-purple-800 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:[a.jsx(Uo,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})]}),a.jsx("div",{className:"flex-1 overflow-x-hidden overflow-y-auto p-6",children:f()})]})]})},ij=s=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:[a.jsx("path",{d:"M12 1.5l2.12 6.4H21l-5.37 3.94 2.12 6.4-5.75-4.22-5.75 4.22 2.12-6.4L3 7.9h6.88L12 1.5zm0 3.82l-1.41 4.28H6.3l3.63 2.65-1.42 4.28L12 13.9l3.49 2.63-1.42-4.28L17.7 9.6h-4.29L12 5.32z"}),a.jsx("path",{d:"M12 1.5l-2.12 6.4H3l5.37 3.94-2.12 6.4 5.75-4.22 5.75 4.22-2.12-6.4L21 7.9h-6.88L12 1.5zm0 3.82L13.41 9.6h4.29l-3.63 2.65 1.42 4.28L12 13.9 8.51 16.53l1.42-4.28L6.3 9.6h4.29L12 5.32z",transform:"rotate(60 12 12)"})]}),aj=({onUpdatePassword:s,onSkip:e})=>{const[n,i]=V.useState(""),[l,c]=V.useState(""),[p,g]=V.useState(null),[f,x]=V.useState(!1),N=async w=>{if(w.preventDefault(),g(null),!n||!l){g({type:"error",text:"Please fill in both fields."});return}if(n!==l){g({type:"error",text:"Passwords do not match."});return}if(n.length<6){g({type:"error",text:"Password must be at least 6 characters long."});return}x(!0);const D=await s(n);x(!1),D.success||g({type:"error",text:D.message})};return a.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white p-8 md:p-12 rounded-2xl shadow-lg w-full max-w-md transform transition-all duration-300",children:[a.jsxs("div",{className:"flex flex-col items-center mb-8",children:[a.jsx(ij,{className:"w-20 h-20 text-orange-500 mb-4"}),a.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Change Your Password"}),a.jsx("p",{className:"text-slate-500 text-center mt-2",children:"For enhanced security, you can update your password now or skip for later."})]}),a.jsxs("form",{onSubmit:N,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-600",children:"New Password"}),a.jsx("input",{id:"newPassword",type:"password",value:n,onChange:w=>i(w.target.value),className:"mt-1 block w-full px-4 py-3 bg-slate-50 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",placeholder:""})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-600",children:"Confirm New Password"}),a.jsx("input",{id:"confirmPassword",type:"password",value:l,onChange:w=>c(w.target.value),className:"mt-1 block w-full px-4 py-3 bg-slate-50 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",placeholder:""})]}),p&&a.jsx("p",{className:`text-sm ${p.type==="error"?"text-red-500":"text-green-600"}`,children:p.text}),a.jsxs("div",{className:"space-y-4 pt-2",children:[a.jsx("button",{type:"submit",disabled:f,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-colors duration-200 disabled:bg-teal-400",children:f?"Saving...":"Save and Continue"}),a.jsx("button",{type:"button",onClick:e,className:"w-full flex justify-center py-3 px-4 border border-slate-300 rounded-md shadow-sm text-sm font-medium text-slate-700 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400 transition-colors duration-200",children:"Skip for now"})]})]})]})})},oj=()=>{};var Yy={};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Lv=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},lj=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const l=s[n++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const c=s[n++];e[i++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=s[n++],p=s[n++],g=s[n++],f=((l&7)<<18|(c&63)<<12|(p&63)<<6|g&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const c=s[n++],p=s[n++];e[i++]=String.fromCharCode((l&15)<<12|(c&63)<<6|p&63)}}return e.join("")},Ov={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<s.length;l+=3){const c=s[l],p=l+1<s.length,g=p?s[l+1]:0,f=l+2<s.length,x=f?s[l+2]:0,N=c>>2,w=(c&3)<<4|g>>4;let D=(g&15)<<2|x>>6,P=x&63;f||(P=64,p||(D=64)),i.push(n[N],n[w],n[D],n[P])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Lv(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):lj(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<s.length;){const c=n[s.charAt(l++)],p=l<s.length?n[s.charAt(l)]:0;++l;const g=l<s.length?n[s.charAt(l)]:64;++l;const f=l<s.length?n[s.charAt(l)]:64;if(++l,c==null||p==null||g==null||f==null)throw new uj;const x=c<<2|p>>4;if(i.push(x),g!==64){const N=p<<4&240|g>>2;if(i.push(N),f!==64){const w=g<<6&192|f;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class uj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cj=function(s){const e=Lv(s);return Ov.encodeByteArray(e,!0)},_d=function(s){return cj(s).replace(/\./g,"")},Fv=function(s){try{return Ov.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const hj=()=>dj().__FIREBASE_DEFAULTS__,pj=()=>{if(typeof process>"u"||typeof Yy>"u")return;const s=Yy.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},mj=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Fv(s[1]);return e&&JSON.parse(e)},Yd=()=>{try{return oj()||hj()||pj()||mj()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Uv=s=>{var e,n;return(n=(e=Yd())==null?void 0:e.emulatorHosts)==null?void 0:n[s]},fj=s=>{const e=Uv(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Vv=()=>{var s;return(s=Yd())==null?void 0:s.config},zv=s=>{var e;return(e=Yd())==null?void 0:e[`_${s}`]};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Vo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qv(s){return(await fetch(s,{credentials:"include"})).ok}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xj(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",l=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[_d(JSON.stringify(n)),_d(JSON.stringify(p)),""].join(".")}const tu={};function yj(){const s={prod:[],emulator:[]};for(const e of Object.keys(tu))tu[e]?s.emulator.push(e):s.prod.push(e);return s}function bj(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Xy=!1;function $v(s,e){if(typeof window>"u"||typeof document>"u"||!Vo(window.location.host)||tu[s]===e||tu[s]||Xy)return;tu[s]=e;function n(w){return`__firebase__banner__${w}`}const i="__firebase__banner",l=yj().prod.length>0;function c(){const w=document.getElementById(i);w&&w.remove()}function p(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function g(w,D){w.setAttribute("width","24"),w.setAttribute("id",D),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function f(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Xy=!0,c()},w}function x(w,D){w.setAttribute("id",D),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function N(){const w=bj(i),D=n("text"),P=document.getElementById(D)||document.createElement("span"),z=n("learnmore"),R=document.getElementById(z)||document.createElement("a"),O=n("preprendIcon"),te=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const ee=w.element;p(ee),x(R,z);const ue=f();g(te,O),ee.append(te,P,R,ue),document.body.appendChild(ee)}l?(P.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",N):N()}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function wj(){var s;const e=(s=Yd())==null?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Nj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kj(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function jj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Sj(){const s=Cn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Cj(){return!wj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ej(){try{return typeof indexedDB=="object"}catch{return!1}}function _j(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var c;e(((c=l.error)==null?void 0:c.message)||"")}}catch(n){e(n)}})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Tj="FirebaseError";class Os extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Tj,Object.setPrototypeOf(this,Os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ku.prototype.create)}}class ku{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],p=c?Ij(c,i):"Error",g=`${this.serviceName}: ${p} (${l}).`;return new Os(l,g,i)}}function Ij(s,e){return s.replace(Aj,(n,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const Aj=/\{\$([^}]+)}/g;function Dj(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function xa(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const l of n){if(!i.includes(l))return!1;const c=s[l],p=e[l];if(Jy(c)&&Jy(p)){if(!xa(c,p))return!1}else if(c!==p)return!1}for(const l of i)if(!n.includes(l))return!1;return!0}function Jy(s){return s!==null&&typeof s=="object"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ju(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ql(s){const e={};return s.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,l]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(l)}}),e}function Yl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function Pj(s,e){const n=new Rj(s,e);return n.subscribe.bind(n)}class Rj{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let l;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Mj(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:i},l.next===void 0&&(l.next=fm),l.error===void 0&&(l.error=fm),l.complete===void 0&&(l.complete=fm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mj(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function fm(){}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ut(s){return s&&s._delegate?s._delegate:s}class ya{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pa="[DEFAULT]";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Lj{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new gj;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Fj(e))try{this.getOrInitializeService({instanceIdentifier:pa})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});i.resolve(c)}catch{}}}}clearInstance(e=pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pa){return this.instances.has(e)}getOptions(e=pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,p]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);i===g&&p.resolve(l)}return l}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const c=this.instances.get(i);return c&&e(c,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const l of i)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Oj(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=pa){return this.component?this.component.multipleInstances?e:pa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Oj(s){return s===pa?void 0:s}function Fj(s){return s.instantiationMode==="EAGER"}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Uj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Lj(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Xe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Xe||(Xe={}));const Vj={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},zj=Xe.INFO,qj={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},$j=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),l=qj[e];if(l)console[l](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ff{constructor(e){this.name=e,this._logLevel=zj,this._logHandler=$j,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Vj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const Bj=(s,e)=>e.some(n=>s instanceof n);let Zy,eb;function Hj(){return Zy||(Zy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wj(){return eb||(eb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bv=new WeakMap,Am=new WeakMap,Hv=new WeakMap,gm=new WeakMap,gf=new WeakMap;function Gj(s){const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("success",c),s.removeEventListener("error",p)},c=()=>{n(Ni(s.result)),l()},p=()=>{i(s.error),l()};s.addEventListener("success",c),s.addEventListener("error",p)});return e.then(n=>{n instanceof IDBCursor&&Bv.set(n,s)}).catch(()=>{}),gf.set(e,s),e}function Kj(s){if(Am.has(s))return;const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",p),s.removeEventListener("abort",p)},c=()=>{n(),l()},p=()=>{i(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",c),s.addEventListener("error",p),s.addEventListener("abort",p)});Am.set(s,e)}let Dm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Am.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Hv.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ni(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Qj(s){Dm=s(Dm)}function Yj(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(xm(this),e,...n);return Hv.set(i,e.sort?e.sort():[e]),Ni(i)}:Wj().includes(s)?function(...e){return s.apply(xm(this),e),Ni(Bv.get(this))}:function(...e){return Ni(s.apply(xm(this),e))}}function Xj(s){return typeof s=="function"?Yj(s):(s instanceof IDBTransaction&&Kj(s),Bj(s,Hj())?new Proxy(s,Dm):s)}function Ni(s){if(s instanceof IDBRequest)return Gj(s);if(gm.has(s))return gm.get(s);const e=Xj(s);return e!==s&&(gm.set(s,e),gf.set(e,s)),e}const xm=s=>gf.get(s);function Jj(s,e,{blocked:n,upgrade:i,blocking:l,terminated:c}={}){const p=indexedDB.open(s,e),g=Ni(p);return i&&p.addEventListener("upgradeneeded",f=>{i(Ni(p.result),f.oldVersion,f.newVersion,Ni(p.transaction),f)}),n&&p.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),g.then(f=>{c&&f.addEventListener("close",()=>c()),l&&f.addEventListener("versionchange",x=>l(x.oldVersion,x.newVersion,x))}).catch(()=>{}),g}const Zj=["get","getKey","getAll","getAllKeys","count"],eS=["put","add","delete","clear"],ym=new Map;function tb(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(ym.get(e))return ym.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,l=eS.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(l||Zj.includes(n)))return;const c=async function(p,...g){const f=this.transaction(p,l?"readwrite":"readonly");let x=f.store;return i&&(x=x.index(g.shift())),(await Promise.all([x[n](...g),l&&f.done]))[0]};return ym.set(e,c),c}Qj(s=>({...s,get:(e,n,i)=>tb(e,n)||s.get(e,n,i),has:(e,n)=>!!tb(e,n)||s.has(e,n)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(nS(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function nS(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pm="@firebase/app",nb="0.14.6";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ds=new ff("@firebase/app"),rS="@firebase/app-compat",sS="@firebase/analytics-compat",iS="@firebase/analytics",aS="@firebase/app-check-compat",oS="@firebase/app-check",lS="@firebase/auth",uS="@firebase/auth-compat",cS="@firebase/database",dS="@firebase/data-connect",hS="@firebase/database-compat",pS="@firebase/functions",mS="@firebase/functions-compat",fS="@firebase/installations",gS="@firebase/installations-compat",xS="@firebase/messaging",yS="@firebase/messaging-compat",bS="@firebase/performance",vS="@firebase/performance-compat",wS="@firebase/remote-config",NS="@firebase/remote-config-compat",kS="@firebase/storage",jS="@firebase/storage-compat",SS="@firebase/firestore",CS="@firebase/ai",ES="@firebase/firestore-compat",_S="firebase",TS="12.6.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Rm="[DEFAULT]",IS={[Pm]:"fire-core",[rS]:"fire-core-compat",[iS]:"fire-analytics",[sS]:"fire-analytics-compat",[oS]:"fire-app-check",[aS]:"fire-app-check-compat",[lS]:"fire-auth",[uS]:"fire-auth-compat",[cS]:"fire-rtdb",[dS]:"fire-data-connect",[hS]:"fire-rtdb-compat",[pS]:"fire-fn",[mS]:"fire-fn-compat",[fS]:"fire-iid",[gS]:"fire-iid-compat",[xS]:"fire-fcm",[yS]:"fire-fcm-compat",[bS]:"fire-perf",[vS]:"fire-perf-compat",[wS]:"fire-rc",[NS]:"fire-rc-compat",[kS]:"fire-gcs",[jS]:"fire-gcs-compat",[SS]:"fire-fst",[ES]:"fire-fst-compat",[CS]:"fire-vertex","fire-js":"fire-js",[_S]:"fire-js-all"};/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Td=new Map,AS=new Map,Mm=new Map;function rb(s,e){try{s.container.addComponent(e)}catch(n){Ds.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Ao(s){const e=s.name;if(Mm.has(e))return Ds.debug(`There were multiple attempts to register component ${e}.`),!1;Mm.set(e,s);for(const n of Td.values())rb(n,s);for(const n of AS.values())rb(n,s);return!0}function xf(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function xr(s){return s==null?!1:s.settings!==void 0}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const DS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ki=new ku("app","Firebase",DS);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class PS{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ki.create("app-deleted",{appName:this._name})}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const zo=TS;function Wv(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:Rm,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw ki.create("bad-app-name",{appName:String(l)});if(n||(n=Vv()),!n)throw ki.create("no-options");const c=Td.get(l);if(c){if(xa(n,c.options)&&xa(i,c.config))return c;throw ki.create("duplicate-app",{appName:l})}const p=new Uj(l);for(const f of Mm.values())p.addComponent(f);const g=new PS(n,i,p);return Td.set(l,g),g}function Gv(s=Rm){const e=Td.get(s);if(!e&&s===Rm&&Vv())return Wv();if(!e)throw ki.create("no-app",{appName:s});return e}function ji(s,e,n){let i=IS[s]??s;n&&(i+=`-${n}`);const l=i.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const p=[`Unable to register library "${i}" with version "${e}":`];l&&p.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&c&&p.push("and"),c&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ds.warn(p.join(" "));return}Ao(new ya(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const RS="firebase-heartbeat-database",MS=1,du="firebase-heartbeat-store";let bm=null;function Kv(){return bm||(bm=Jj(RS,MS,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(du)}catch(n){console.warn(n)}}}}).catch(s=>{throw ki.create("idb-open",{originalErrorMessage:s.message})})),bm}async function LS(s){try{const e=(await Kv()).transaction(du),n=await e.objectStore(du).get(Qv(s));return await e.done,n}catch(e){if(e instanceof Os)Ds.warn(e.message);else{const n=ki.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ds.warn(n.message)}}}async function sb(s,e){try{const n=(await Kv()).transaction(du,"readwrite");await n.objectStore(du).put(e,Qv(s)),await n.done}catch(n){if(n instanceof Os)Ds.warn(n.message);else{const i=ki.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ds.warn(i.message)}}}function Qv(s){return`${s.name}!${s.options.appId}`}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const OS=1024,FS=30;class US{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zS(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=ib();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:i}),this._heartbeatsCache.heartbeats.length>FS){const c=qS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ds.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ib(),{heartbeatsToSend:i,unsentEntries:l}=VS(this._heartbeatsCache.heartbeats),c=_d(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Ds.warn(n),""}}}function ib(){return new Date().toISOString().substring(0,10)}function VS(s,e=OS){const n=[];let i=s.slice();for(const l of s){const c=n.find(p=>p.agent===l.agent);if(c){if(c.dates.push(l.date),ab(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),ab(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class zS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ej()?_j().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await LS(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return sb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return sb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function ab(s){return _d(JSON.stringify({version:2,heartbeats:s})).length}function qS(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $S(s){Ao(new ya("platform-logger",e=>new tS(e),"PRIVATE")),Ao(new ya("heartbeat",e=>new US(e),"PRIVATE")),ji(Pm,nb,s),ji(Pm,nb,"esm2020"),ji("fire-js","")}$S("");var BS="firebase",HS="12.6.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/ji(BS,HS,"app");var ob=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Si,Yv;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,k){function S(){}S.prototype=k.prototype,T.F=k.prototype,T.prototype=new S,T.prototype.constructor=T,T.D=function(j,E,A){for(var _=Array(arguments.length-2),be=2;be<arguments.length;be++)_[be-2]=arguments[be];return k.prototype[E].apply(j,_)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(T,k,S){S||(S=0);const j=Array(16);if(typeof k=="string")for(var E=0;E<16;++E)j[E]=k.charCodeAt(S++)|k.charCodeAt(S++)<<8|k.charCodeAt(S++)<<16|k.charCodeAt(S++)<<24;else for(E=0;E<16;++E)j[E]=k[S++]|k[S++]<<8|k[S++]<<16|k[S++]<<24;k=T.g[0],S=T.g[1],E=T.g[2];let A=T.g[3],_;_=k+(A^S&(E^A))+j[0]+3614090360&4294967295,k=S+(_<<7&4294967295|_>>>25),_=A+(E^k&(S^E))+j[1]+3905402710&4294967295,A=k+(_<<12&4294967295|_>>>20),_=E+(S^A&(k^S))+j[2]+606105819&4294967295,E=A+(_<<17&4294967295|_>>>15),_=S+(k^E&(A^k))+j[3]+3250441966&4294967295,S=E+(_<<22&4294967295|_>>>10),_=k+(A^S&(E^A))+j[4]+4118548399&4294967295,k=S+(_<<7&4294967295|_>>>25),_=A+(E^k&(S^E))+j[5]+1200080426&4294967295,A=k+(_<<12&4294967295|_>>>20),_=E+(S^A&(k^S))+j[6]+2821735955&4294967295,E=A+(_<<17&4294967295|_>>>15),_=S+(k^E&(A^k))+j[7]+4249261313&4294967295,S=E+(_<<22&4294967295|_>>>10),_=k+(A^S&(E^A))+j[8]+1770035416&4294967295,k=S+(_<<7&4294967295|_>>>25),_=A+(E^k&(S^E))+j[9]+2336552879&4294967295,A=k+(_<<12&4294967295|_>>>20),_=E+(S^A&(k^S))+j[10]+4294925233&4294967295,E=A+(_<<17&4294967295|_>>>15),_=S+(k^E&(A^k))+j[11]+2304563134&4294967295,S=E+(_<<22&4294967295|_>>>10),_=k+(A^S&(E^A))+j[12]+1804603682&4294967295,k=S+(_<<7&4294967295|_>>>25),_=A+(E^k&(S^E))+j[13]+4254626195&4294967295,A=k+(_<<12&4294967295|_>>>20),_=E+(S^A&(k^S))+j[14]+2792965006&4294967295,E=A+(_<<17&4294967295|_>>>15),_=S+(k^E&(A^k))+j[15]+1236535329&4294967295,S=E+(_<<22&4294967295|_>>>10),_=k+(E^A&(S^E))+j[1]+4129170786&4294967295,k=S+(_<<5&4294967295|_>>>27),_=A+(S^E&(k^S))+j[6]+3225465664&4294967295,A=k+(_<<9&4294967295|_>>>23),_=E+(k^S&(A^k))+j[11]+643717713&4294967295,E=A+(_<<14&4294967295|_>>>18),_=S+(A^k&(E^A))+j[0]+3921069994&4294967295,S=E+(_<<20&4294967295|_>>>12),_=k+(E^A&(S^E))+j[5]+3593408605&4294967295,k=S+(_<<5&4294967295|_>>>27),_=A+(S^E&(k^S))+j[10]+38016083&4294967295,A=k+(_<<9&4294967295|_>>>23),_=E+(k^S&(A^k))+j[15]+3634488961&4294967295,E=A+(_<<14&4294967295|_>>>18),_=S+(A^k&(E^A))+j[4]+3889429448&4294967295,S=E+(_<<20&4294967295|_>>>12),_=k+(E^A&(S^E))+j[9]+568446438&4294967295,k=S+(_<<5&4294967295|_>>>27),_=A+(S^E&(k^S))+j[14]+3275163606&4294967295,A=k+(_<<9&4294967295|_>>>23),_=E+(k^S&(A^k))+j[3]+4107603335&4294967295,E=A+(_<<14&4294967295|_>>>18),_=S+(A^k&(E^A))+j[8]+1163531501&4294967295,S=E+(_<<20&4294967295|_>>>12),_=k+(E^A&(S^E))+j[13]+2850285829&4294967295,k=S+(_<<5&4294967295|_>>>27),_=A+(S^E&(k^S))+j[2]+4243563512&4294967295,A=k+(_<<9&4294967295|_>>>23),_=E+(k^S&(A^k))+j[7]+1735328473&4294967295,E=A+(_<<14&4294967295|_>>>18),_=S+(A^k&(E^A))+j[12]+2368359562&4294967295,S=E+(_<<20&4294967295|_>>>12),_=k+(S^E^A)+j[5]+4294588738&4294967295,k=S+(_<<4&4294967295|_>>>28),_=A+(k^S^E)+j[8]+2272392833&4294967295,A=k+(_<<11&4294967295|_>>>21),_=E+(A^k^S)+j[11]+1839030562&4294967295,E=A+(_<<16&4294967295|_>>>16),_=S+(E^A^k)+j[14]+4259657740&4294967295,S=E+(_<<23&4294967295|_>>>9),_=k+(S^E^A)+j[1]+2763975236&4294967295,k=S+(_<<4&4294967295|_>>>28),_=A+(k^S^E)+j[4]+1272893353&4294967295,A=k+(_<<11&4294967295|_>>>21),_=E+(A^k^S)+j[7]+4139469664&4294967295,E=A+(_<<16&4294967295|_>>>16),_=S+(E^A^k)+j[10]+3200236656&4294967295,S=E+(_<<23&4294967295|_>>>9),_=k+(S^E^A)+j[13]+681279174&4294967295,k=S+(_<<4&4294967295|_>>>28),_=A+(k^S^E)+j[0]+3936430074&4294967295,A=k+(_<<11&4294967295|_>>>21),_=E+(A^k^S)+j[3]+3572445317&4294967295,E=A+(_<<16&4294967295|_>>>16),_=S+(E^A^k)+j[6]+76029189&4294967295,S=E+(_<<23&4294967295|_>>>9),_=k+(S^E^A)+j[9]+3654602809&4294967295,k=S+(_<<4&4294967295|_>>>28),_=A+(k^S^E)+j[12]+3873151461&4294967295,A=k+(_<<11&4294967295|_>>>21),_=E+(A^k^S)+j[15]+530742520&4294967295,E=A+(_<<16&4294967295|_>>>16),_=S+(E^A^k)+j[2]+3299628645&4294967295,S=E+(_<<23&4294967295|_>>>9),_=k+(E^(S|~A))+j[0]+4096336452&4294967295,k=S+(_<<6&4294967295|_>>>26),_=A+(S^(k|~E))+j[7]+1126891415&4294967295,A=k+(_<<10&4294967295|_>>>22),_=E+(k^(A|~S))+j[14]+2878612391&4294967295,E=A+(_<<15&4294967295|_>>>17),_=S+(A^(E|~k))+j[5]+4237533241&4294967295,S=E+(_<<21&4294967295|_>>>11),_=k+(E^(S|~A))+j[12]+1700485571&4294967295,k=S+(_<<6&4294967295|_>>>26),_=A+(S^(k|~E))+j[3]+2399980690&4294967295,A=k+(_<<10&4294967295|_>>>22),_=E+(k^(A|~S))+j[10]+4293915773&4294967295,E=A+(_<<15&4294967295|_>>>17),_=S+(A^(E|~k))+j[1]+2240044497&4294967295,S=E+(_<<21&4294967295|_>>>11),_=k+(E^(S|~A))+j[8]+1873313359&4294967295,k=S+(_<<6&4294967295|_>>>26),_=A+(S^(k|~E))+j[15]+4264355552&4294967295,A=k+(_<<10&4294967295|_>>>22),_=E+(k^(A|~S))+j[6]+2734768916&4294967295,E=A+(_<<15&4294967295|_>>>17),_=S+(A^(E|~k))+j[13]+1309151649&4294967295,S=E+(_<<21&4294967295|_>>>11),_=k+(E^(S|~A))+j[4]+4149444226&4294967295,k=S+(_<<6&4294967295|_>>>26),_=A+(S^(k|~E))+j[11]+3174756917&4294967295,A=k+(_<<10&4294967295|_>>>22),_=E+(k^(A|~S))+j[2]+718787259&4294967295,E=A+(_<<15&4294967295|_>>>17),_=S+(A^(E|~k))+j[9]+3951481745&4294967295,T.g[0]=T.g[0]+k&4294967295,T.g[1]=T.g[1]+(E+(_<<21&4294967295|_>>>11))&4294967295,T.g[2]=T.g[2]+E&4294967295,T.g[3]=T.g[3]+A&4294967295}i.prototype.v=function(T,k){k===void 0&&(k=T.length);const S=k-this.blockSize,j=this.C;let E=this.h,A=0;for(;A<k;){if(E==0)for(;A<=S;)l(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<k;)if(j[E++]=T.charCodeAt(A++),E==this.blockSize){l(this,j),E=0;break}}else for(;A<k;)if(j[E++]=T[A++],E==this.blockSize){l(this,j),E=0;break}}this.h=E,this.o+=k},i.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var k=1;k<T.length-8;++k)T[k]=0;k=this.o*8;for(var S=T.length-8;S<T.length;++S)T[S]=k&255,k/=256;for(this.v(T),T=Array(16),k=0,S=0;S<4;++S)for(let j=0;j<32;j+=8)T[k++]=this.g[S]>>>j&255;return T};function c(T,k){var S=g;return Object.prototype.hasOwnProperty.call(S,T)?S[T]:S[T]=k(T)}function p(T,k){this.h=k;const S=[];let j=!0;for(let E=T.length-1;E>=0;E--){const A=T[E]|0;j&&A==k||(S[E]=A,j=!1)}this.g=S}var g={};function f(T){return-128<=T&&T<128?c(T,function(k){return new p([k|0],k<0?-1:0)}):new p([T|0],T<0?-1:0)}function x(T){if(isNaN(T)||!isFinite(T))return w;if(T<0)return O(x(-T));const k=[];let S=1;for(let j=0;T>=S;j++)k[j]=T/S|0,S*=4294967296;return new p(k,0)}function N(T,k){if(T.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(T.charAt(0)=="-")return O(N(T.substring(1),k));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=x(Math.pow(k,8));let j=w;for(let A=0;A<T.length;A+=8){var E=Math.min(8,T.length-A);const _=parseInt(T.substring(A,A+E),k);E<8?(E=x(Math.pow(k,E)),j=j.j(E).add(x(_))):(j=j.j(S),j=j.add(x(_)))}return j}var w=f(0),D=f(1),P=f(16777216);s=p.prototype,s.m=function(){if(R(this))return-O(this).m();let T=0,k=1;for(let S=0;S<this.g.length;S++){const j=this.i(S);T+=(j>=0?j:4294967296+j)*k,k*=4294967296}return T},s.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(z(this))return"0";if(R(this))return"-"+O(this).toString(T);const k=x(Math.pow(T,6));var S=this;let j="";for(;;){const E=re(S,k).g;S=te(S,E.j(k));let A=((S.g.length>0?S.g[0]:S.h)>>>0).toString(T);if(S=E,z(S))return A+j;for(;A.length<6;)A="0"+A;j=A+j}},s.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function z(T){if(T.h!=0)return!1;for(let k=0;k<T.g.length;k++)if(T.g[k]!=0)return!1;return!0}function R(T){return T.h==-1}s.l=function(T){return T=te(this,T),R(T)?-1:z(T)?0:1};function O(T){const k=T.g.length,S=[];for(let j=0;j<k;j++)S[j]=~T.g[j];return new p(S,~T.h).add(D)}s.abs=function(){return R(this)?O(this):this},s.add=function(T){const k=Math.max(this.g.length,T.g.length),S=[];let j=0;for(let E=0;E<=k;E++){let A=j+(this.i(E)&65535)+(T.i(E)&65535),_=(A>>>16)+(this.i(E)>>>16)+(T.i(E)>>>16);j=_>>>16,A&=65535,_&=65535,S[E]=_<<16|A}return new p(S,S[S.length-1]&-2147483648?-1:0)};function te(T,k){return T.add(O(k))}s.j=function(T){if(z(this)||z(T))return w;if(R(this))return R(T)?O(this).j(O(T)):O(O(this).j(T));if(R(T))return O(this.j(O(T)));if(this.l(P)<0&&T.l(P)<0)return x(this.m()*T.m());const k=this.g.length+T.g.length,S=[];for(var j=0;j<2*k;j++)S[j]=0;for(j=0;j<this.g.length;j++)for(let E=0;E<T.g.length;E++){const A=this.i(j)>>>16,_=this.i(j)&65535,be=T.i(E)>>>16,Ae=T.i(E)&65535;S[2*j+2*E]+=_*Ae,ee(S,2*j+2*E),S[2*j+2*E+1]+=A*Ae,ee(S,2*j+2*E+1),S[2*j+2*E+1]+=_*be,ee(S,2*j+2*E+1),S[2*j+2*E+2]+=A*be,ee(S,2*j+2*E+2)}for(T=0;T<k;T++)S[T]=S[2*T+1]<<16|S[2*T];for(T=k;T<2*k;T++)S[T]=0;return new p(S,0)};function ee(T,k){for(;(T[k]&65535)!=T[k];)T[k+1]+=T[k]>>>16,T[k]&=65535,k++}function ue(T,k){this.g=T,this.h=k}function re(T,k){if(z(k))throw Error("division by zero");if(z(T))return new ue(w,w);if(R(T))return k=re(O(T),k),new ue(O(k.g),O(k.h));if(R(k))return k=re(T,O(k)),new ue(O(k.g),k.h);if(T.g.length>30){if(R(T)||R(k))throw Error("slowDivide_ only works with positive integers.");for(var S=D,j=k;j.l(T)<=0;)S=$(S),j=$(j);var E=X(S,1),A=X(j,1);for(j=X(j,2),S=X(S,2);!z(j);){var _=A.add(j);_.l(T)<=0&&(E=E.add(S),A=_),j=X(j,1),S=X(S,1)}return k=te(T,E.j(k)),new ue(E,k)}for(E=w;T.l(k)>=0;){for(S=Math.max(1,Math.floor(T.m()/k.m())),j=Math.ceil(Math.log(S)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),A=x(S),_=A.j(k);R(_)||_.l(T)>0;)S-=j,A=x(S),_=A.j(k);z(A)&&(A=D),E=E.add(A),T=te(T,_)}return new ue(E,T)}s.B=function(T){return re(this,T).h},s.and=function(T){const k=Math.max(this.g.length,T.g.length),S=[];for(let j=0;j<k;j++)S[j]=this.i(j)&T.i(j);return new p(S,this.h&T.h)},s.or=function(T){const k=Math.max(this.g.length,T.g.length),S=[];for(let j=0;j<k;j++)S[j]=this.i(j)|T.i(j);return new p(S,this.h|T.h)},s.xor=function(T){const k=Math.max(this.g.length,T.g.length),S=[];for(let j=0;j<k;j++)S[j]=this.i(j)^T.i(j);return new p(S,this.h^T.h)};function $(T){const k=T.g.length+1,S=[];for(let j=0;j<k;j++)S[j]=T.i(j)<<1|T.i(j-1)>>>31;return new p(S,T.h)}function X(T,k){const S=k>>5;k%=32;const j=T.g.length-S,E=[];for(let A=0;A<j;A++)E[A]=k>0?T.i(A+S)>>>k|T.i(A+S+1)<<32-k:T.i(A+S);return new p(E,T.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Yv=i,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.B,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=x,p.fromString=N,Si=p}).apply(typeof ob<"u"?ob:typeof self<"u"?self:typeof window<"u"?window:{});var ld=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xv,Xl,Jv,fd,Lm,Zv,ew,tw;(function(){var s,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ld=="object"&&ld];for(var y=0;y<d.length;++y){var v=d[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=n(this);function l(d,y){if(y)e:{var v=i;d=d.split(".");for(var I=0;I<d.length-1;I++){var H=d[I];if(!(H in v))break e;v=v[H]}d=d[d.length-1],I=v[d],y=y(I),y!=I&&y!=null&&e(v,d,{configurable:!0,writable:!0,value:y})}}l("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(d){return d||function(y){var v=[],I;for(I in y)Object.prototype.hasOwnProperty.call(y,I)&&v.push([I,y[I]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},p=this||self;function g(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function f(d,y,v){return d.call.apply(d.bind,arguments)}function x(d,y,v){return x=f,x.apply(null,arguments)}function N(d,y){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function w(d,y){function v(){}v.prototype=y.prototype,d.Z=y.prototype,d.prototype=new v,d.prototype.constructor=d,d.Ob=function(I,H,J){for(var xe=Array(arguments.length-2),He=2;He<arguments.length;He++)xe[He-2]=arguments[He];return y.prototype[H].apply(I,xe)}}var D=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function P(d){const y=d.length;if(y>0){const v=Array(y);for(let I=0;I<y;I++)v[I]=d[I];return v}return[]}function z(d,y){for(let I=1;I<arguments.length;I++){const H=arguments[I];var v=typeof H;if(v=v!="object"?v:H?Array.isArray(H)?"array":v:"null",v=="array"||v=="object"&&typeof H.length=="number"){v=d.length||0;const J=H.length||0;d.length=v+J;for(let xe=0;xe<J;xe++)d[v+xe]=H[xe]}else d.push(H)}}class R{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function O(d){p.setTimeout(()=>{throw d},0)}function te(){var d=T;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class ee{constructor(){this.h=this.g=null}add(y,v){const I=ue.get();I.set(y,v),this.h?this.h.next=I:this.g=I,this.h=I}}var ue=new R(()=>new re,d=>d.reset());class re{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let $,X=!1,T=new ee,k=()=>{const d=Promise.resolve(void 0);$=()=>{d.then(S)}};function S(){for(var d;d=te();){try{d.h.call(d.g)}catch(v){O(v)}var y=ue;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}X=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function E(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}E.prototype.h=function(){this.defaultPrevented=!0};var A=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const v=()=>{};p.addEventListener("test",v,y),p.removeEventListener("test",v,y)}catch{}return d})();function _(d){return/^[\s\xa0]*$/.test(d)}function be(d,y){E.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}w(be,E),be.prototype.init=function(d,y){const v=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(v=="mouseover"?y=d.fromElement:v=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&be.Z.h.call(this)},be.prototype.h=function(){be.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ae="closure_listenable_"+(Math.random()*1e6|0),B=0;function de(d,y,v,I,H){this.listener=d,this.proxy=null,this.src=y,this.type=v,this.capture=!!I,this.ha=H,this.key=++B,this.da=this.fa=!1}function ye(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ee(d,y,v){for(const I in d)y.call(v,d[I],I,d)}function Oe(d,y){for(const v in d)y.call(void 0,d[v],v,d)}function L(d){const y={};for(const v in d)y[v]=d[v];return y}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(d,y){let v,I;for(let H=1;H<arguments.length;H++){I=arguments[H];for(v in I)d[v]=I[v];for(let J=0;J<Q.length;J++)v=Q[J],Object.prototype.hasOwnProperty.call(I,v)&&(d[v]=I[v])}}function ge(d){this.src=d,this.g={},this.h=0}ge.prototype.add=function(d,y,v,I,H){const J=d.toString();d=this.g[J],d||(d=this.g[J]=[],this.h++);const xe=F(d,y,I,H);return xe>-1?(y=d[xe],v||(y.fa=!1)):(y=new de(y,this.src,J,!!I,H),y.fa=v,d.push(y)),y};function we(d,y){const v=y.type;if(v in d.g){var I=d.g[v],H=Array.prototype.indexOf.call(I,y,void 0),J;(J=H>=0)&&Array.prototype.splice.call(I,H,1),J&&(ye(y),d.g[v].length==0&&(delete d.g[v],d.h--))}}function F(d,y,v,I){for(let H=0;H<d.length;++H){const J=d[H];if(!J.da&&J.listener==y&&J.capture==!!v&&J.ha==I)return H}return-1}var ce="closure_lm_"+(Math.random()*1e6|0),me={};function Ce(d,y,v,I,H){if(Array.isArray(y)){for(let J=0;J<y.length;J++)Ce(d,y[J],v,I,H);return null}return v=Pr(v),d&&d[Ae]?d.J(y,v,g(I)?!!I.capture:!1,H):ut(d,y,v,!1,I,H)}function ut(d,y,v,I,H,J){if(!y)throw Error("Invalid event type");const xe=g(H)?!!H.capture:!!H;let He=nr(d);if(He||(d[ce]=He=new ge(d)),v=He.add(y,v,I,xe,J),v.proxy)return v;if(I=tn(),v.proxy=I,I.src=d,I.listener=v,d.addEventListener)A||(H=xe),H===void 0&&(H=!1),d.addEventListener(y.toString(),I,H);else if(d.attachEvent)d.attachEvent(Qt(y.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function tn(){function d(v){return y.call(d.src,d.listener,v)}const y=us;return d}function nn(d,y,v,I,H){if(Array.isArray(y))for(var J=0;J<y.length;J++)nn(d,y[J],v,I,H);else I=g(I)?!!I.capture:!!I,v=Pr(v),d&&d[Ae]?(d=d.i,J=String(y).toString(),J in d.g&&(y=d.g[J],v=F(y,v,I,H),v>-1&&(ye(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete d.g[J],d.h--)))):d&&(d=nr(d))&&(y=d.g[y.toString()],d=-1,y&&(d=F(y,v,I,H)),(v=d>-1?y[d]:null)&&vn(v))}function vn(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Ae])we(y.i,d);else{var v=d.type,I=d.proxy;y.removeEventListener?y.removeEventListener(v,I,d.capture):y.detachEvent?y.detachEvent(Qt(v),I):y.addListener&&y.removeListener&&y.removeListener(I),(v=nr(y))?(we(v,d),v.h==0&&(v.src=null,y[ce]=null)):ye(d)}}}function Qt(d){return d in me?me[d]:me[d]="on"+d}function us(d,y){if(d.da)d=!0;else{y=new be(y,this);const v=d.listener,I=d.ha||d.src;d.fa&&vn(d),d=v.call(I,y)}return d}function nr(d){return d=d[ce],d instanceof ge?d:null}var Dr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Pr(d){return typeof d=="function"?d:(d[Dr]||(d[Dr]=function(y){return d.handleEvent(y)}),d[Dr])}function kt(){j.call(this),this.i=new ge(this),this.M=this,this.G=null}w(kt,j),kt.prototype[Ae]=!0,kt.prototype.removeEventListener=function(d,y,v,I){nn(this,d,y,v,I)};function Et(d,y){var v,I=d.G;if(I)for(v=[];I;I=I.G)v.push(I);if(d=d.M,I=y.type||y,typeof y=="string")y=new E(y,d);else if(y instanceof E)y.target=y.target||d;else{var H=y;y=new E(I,d),he(y,H)}H=!0;let J,xe;if(v)for(xe=v.length-1;xe>=0;xe--)J=y.g=v[xe],H=rr(J,I,!0,y)&&H;if(J=y.g=d,H=rr(J,I,!0,y)&&H,H=rr(J,I,!1,y)&&H,v)for(xe=0;xe<v.length;xe++)J=y.g=v[xe],H=rr(J,I,!1,y)&&H}kt.prototype.N=function(){if(kt.Z.N.call(this),this.i){var d=this.i;for(const y in d.g){const v=d.g[y];for(let I=0;I<v.length;I++)ye(v[I]);delete d.g[y],d.h--}}this.G=null},kt.prototype.J=function(d,y,v,I){return this.i.add(String(d),y,!1,v,I)},kt.prototype.K=function(d,y,v,I){return this.i.add(String(d),y,!0,v,I)};function rr(d,y,v,I){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let J=0;J<y.length;++J){const xe=y[J];if(xe&&!xe.da&&xe.capture==v){const He=xe.listener,Rt=xe.ha||xe.src;xe.fa&&we(d.i,xe),H=He.call(Rt,I)!==!1&&H}}return H&&!I.defaultPrevented}function Fi(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=x(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:p.setTimeout(d,y||0)}function Rr(d){d.g=Fi(()=>{d.g=null,d.i&&(d.i=!1,Rr(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class Y extends j{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Rr(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fe(d){j.call(this),this.h=d,this.g={}}w(Fe,j);var rt=[];function _t(d){Ee(d.g,function(y,v){this.g.hasOwnProperty(v)&&vn(y)},d),d.g={}}Fe.prototype.N=function(){Fe.Z.N.call(this),_t(this)},Fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var En=p.JSON.stringify,Mr=p.JSON.parse,_n=class{stringify(d){return p.JSON.stringify(d,void 0)}parse(d){return p.JSON.parse(d,void 0)}};function Ea(){}function _a(){}var $n={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yt(){E.call(this,"d")}w(Yt,E);function Rn(){E.call(this,"c")}w(Rn,E);var Tt={},Ta=null;function Fs(){return Ta=Ta||new kt}Tt.Ia="serverreachability";function Ia(d){E.call(this,Tt.Ia,d)}w(Ia,E);function sr(d){const y=Fs();Et(y,new Ia(y))}Tt.STAT_EVENT="statevent";function Lr(d,y){E.call(this,Tt.STAT_EVENT,d),this.stat=y}w(Lr,E);function jt(d){const y=Fs();Et(y,new Lr(y,d))}Tt.Ja="timingevent";function ne(d,y){E.call(this,Tt.Ja,d),this.size=y}w(ne,E);function fe(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){d()},y)}function pe(){this.g=!0}pe.prototype.ua=function(){this.g=!1};function _e(d,y,v,I,H,J){d.info(function(){if(d.g)if(J){var xe="",He=J.split("&");for(let dt=0;dt<He.length;dt++){var Rt=He[dt].split("=");if(Rt.length>1){const St=Rt[0];Rt=Rt[1];const ur=St.split("_");xe=ur.length>=2&&ur[1]=="type"?xe+(St+"="+Rt+"&"):xe+(St+"=redacted&")}}}else xe=null;else xe=J;return"XMLHTTP REQ ("+I+") [attempt "+H+"]: "+y+`
`+v+`
`+xe})}function Be(d,y,v,I,H,J,xe){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+H+"]: "+y+`
`+v+`
`+J+" "+xe})}function Pe(d,y,v,I){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+rn(d,v)+(I?" "+I:"")})}function cn(d,y){d.info(function(){return"TIMEOUT: "+y})}pe.prototype.info=function(){};function rn(d,y){if(!d.g)return y;if(!y)return null;try{const J=JSON.parse(y);if(J){for(d=0;d<J.length;d++)if(Array.isArray(J[d])){var v=J[d];if(!(v.length<2)){var I=v[1];if(Array.isArray(I)&&!(I.length<1)){var H=I[0];if(H!="noop"&&H!="stop"&&H!="close")for(let xe=1;xe<I.length;xe++)I[xe]=""}}}}return En(J)}catch{return y}}var Xt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Or={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ui;function Fr(){}w(Fr,Ea),Fr.prototype.g=function(){return new XMLHttpRequest},Ui=new Fr;function ir(d){return encodeURIComponent(String(d))}function qe(d){var y=1;d=d.split(":");const v=[];for(;y>0&&d.length;)v.push(d.shift()),y--;return d.length&&v.push(d.join(":")),v}function De(d,y,v,I){this.j=d,this.i=y,this.l=v,this.S=I||1,this.V=new Fe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new wn}function wn(){this.i=null,this.g="",this.h=!1}var At={},sn={};function Ur(d,y,v){d.M=1,d.A=Vi(zt(y)),d.u=v,d.R=!0,Aa(d,null)}function Aa(d,y){d.F=Date.now(),Vr(d),d.B=zt(d.A);var v=d.B,I=d.S;Array.isArray(I)||(I=[String(I)]),Ma(v.i,"t",I),d.C=0,v=d.j.L,d.h=new wn,d.g=Zu(d.j,v?y:null,!d.u),d.P>0&&(d.O=new Y(x(d.Y,d,d.g),d.P)),y=d.V,v=d.g,I=d.ba;var H="readystatechange";Array.isArray(H)||(H&&(rt[0]=H.toString()),H=rt);for(let J=0;J<H.length;J++){const xe=Ce(v,H[J],I||y.handleEvent,!1,y.h||y);if(!xe)break;y.g[xe.key]=xe}y=d.J?L(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),sr(),_e(d.i,d.v,d.B,d.l,d.S,d.u)}De.prototype.ba=function(d){d=d.target;const y=this.O;y&&wr(d)==3?y.j():this.Y(d)},De.prototype.Y=function(d){try{if(d==this.g)e:{const He=wr(this.g),Rt=this.g.ya(),dt=this.g.ca();if(!(He<3)&&(He!=3||this.g&&(this.h.h||this.g.la()||dn(this.g)))){this.K||He!=4||Rt==7||(Rt==8||dt<=0?sr(3):sr(2)),zr(this);var y=this.g.ca();this.X=y;var v=yh(this);if(this.o=y==200,Be(this.i,this.v,this.B,this.l,this.S,He,y),this.o){if(this.U&&!this.L){t:{if(this.g){var I,H=this.g;if((I=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(I)){var J=I;break t}}J=null}if(d=J)Pe(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qr(this,d);else{this.o=!1,this.m=3,jt(12),Bn(this),ar(this);break e}}if(this.R){d=!0;let St;for(;!this.K&&this.C<v.length;)if(St=Vu(this,v),St==sn){He==4&&(this.m=4,jt(14),d=!1),Pe(this.i,this.l,null,"[Incomplete Response]");break}else if(St==At){this.m=4,jt(15),Pe(this.i,this.l,v,"[Invalid Chunk]"),d=!1;break}else Pe(this.i,this.l,St,null),qr(this,St);if(Uu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||v.length!=0||this.h.h||(this.m=1,jt(16),d=!1),this.o=this.o&&d,!d)Pe(this.i,this.l,v,"[Invalid Chunked Response]"),Bn(this),ar(this);else if(v.length>0&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.aa&&!xe.P&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),ol(xe),xe.P=!0,jt(11))}}else Pe(this.i,this.l,v,null),qr(this,v);He==4&&Bn(this),this.o&&!this.K&&(He==4?Qu(this.j,this):(this.o=!1,Vr(this)))}else ds(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,jt(12)):(this.m=0,jt(13)),Bn(this),ar(this)}}}catch{}finally{}};function yh(d){if(!Uu(d))return d.g.la();const y=dn(d.g);if(y==="")return"";let v="";const I=y.length,H=wr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Bn(d),ar(d),"";d.h.i=new p.TextDecoder}for(let J=0;J<I;J++)d.h.h=!0,v+=d.h.i.decode(y[J],{stream:!(H&&J==I-1)});return y.length=0,d.h.g+=v,d.C=0,d.h.g}function Uu(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Vu(d,y){var v=d.C,I=y.indexOf(`
`,v);return I==-1?sn:(v=Number(y.substring(v,I)),isNaN(v)?At:(I+=1,I+v>y.length?sn:(y=y.slice(I,I+v),d.C=I+v,y)))}De.prototype.cancel=function(){this.K=!0,Bn(this)};function Vr(d){d.T=Date.now()+d.H,Da(d,d.H)}function Da(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=fe(x(d.aa,d),y)}function zr(d){d.D&&(p.clearTimeout(d.D),d.D=null)}De.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(cn(this.i,this.B),this.M!=2&&(sr(),jt(17)),Bn(this),this.m=2,ar(this)):Da(this,this.T-d)};function ar(d){d.j.I==0||d.K||Qu(d.j,d)}function Bn(d){zr(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,_t(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function qr(d,y){try{var v=d.j;if(v.I!=0&&(v.g==d||Br(v.h,d))){if(!d.L&&Br(v.h,d)&&v.I==3){try{var I=v.Ba.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var H=I;if(H[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<d.F)Va(v),Ws(v);else break e;Gi(v),jt(18)}}else v.xa=H[1],0<v.xa-v.K&&H[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=fe(x(v.Va,v),6e3));$r(v.h)<=1&&v.ta&&(v.ta=void 0)}else Yr(v,11)}else if((d.L||v.g==d)&&Va(v),!_(y))for(H=v.Ba.g.parse(y),y=0;y<H.length;y++){let dt=H[y];const St=dt[0];if(!(St<=v.K))if(v.K=St,dt=dt[1],v.I==2)if(dt[0]=="c"){v.M=dt[1],v.ba=dt[2];const ur=dt[3];ur!=null&&(v.ka=ur,v.j.info("VER="+v.ka));const ps=dt[4];ps!=null&&(v.za=ps,v.j.info("SVER="+v.za));const Nr=dt[5];Nr!=null&&typeof Nr=="number"&&Nr>0&&(I=1.5*Nr,v.O=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const kr=d.g;if(kr){const Ki=kr.g?kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ki){var J=I.h;J.g||Ki.indexOf("spdy")==-1&&Ki.indexOf("quic")==-1&&Ki.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Qo(J,J.h),J.h=null))}if(I.G){const za=kr.g?kr.g.getResponseHeader("X-HTTP-Session-Id"):null;za&&(I.wa=za,ct(I.J,I.G,za))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-d.F,v.j.info("Handshake RTT: "+v.T+"ms")),I=v;var xe=d;if(I.na=Ju(I,I.L?I.ba:null,I.W),xe.L){Yo(I.h,xe);var He=xe,Rt=I.O;Rt&&(He.H=Rt),He.D&&(zr(He),Vr(He)),I.g=xe}else Gu(I);v.i.length>0&&Qr(v)}else dt[0]!="stop"&&dt[0]!="close"||Yr(v,7);else v.I==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?Yr(v,7):il(v):dt[0]!="noop"&&v.l&&v.l.qa(dt),v.A=0)}}sr(4)}catch{}}var Vt=class{constructor(d,y){this.g=d,this.map=y}};function Go(d){this.l=d||10,p.PerformanceNavigationTiming?(d=p.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ko(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function $r(d){return d.h?1:d.g?d.g.size:0}function Br(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function Qo(d,y){d.g?d.g.add(y):d.h=y}function Yo(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Go.prototype.cancel=function(){if(this.i=Xo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Xo(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const v of d.g.values())y=y.concat(v.G);return y}return P(d.i)}var zu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pa(d,y){if(d){d=d.split("&");for(let v=0;v<d.length;v++){const I=d[v].indexOf("=");let H,J=null;I>=0?(H=d[v].substring(0,I),J=d[v].substring(I+1)):H=d[v],y(H,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Hn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof Hn?(this.l=d.l,an(this,d.j),this.o=d.o,this.g=d.g,Us(this,d.u),this.h=d.h,Jo(this,Hu(d.i)),this.m=d.m):d&&(y=String(d).match(zu))?(this.l=!1,an(this,y[1]||"",!0),this.o=Hr(y[2]||""),this.g=Hr(y[3]||"",!0),Us(this,y[4]),this.h=Hr(y[5]||"",!0),Jo(this,y[6]||"",!0),this.m=Hr(y[7]||"")):(this.l=!1,this.i=new zs(null,this.l))}Hn.prototype.toString=function(){const d=[];var y=this.j;y&&d.push(zi(y,Ra,!0),":");var v=this.g;return(v||y=="file")&&(d.push("//"),(y=this.o)&&d.push(zi(y,Ra,!0),"@"),d.push(ir(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&d.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&d.push("/"),d.push(zi(v,v.charAt(0)=="/"?Zo:qu,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",zi(v,$u)),d.join("")},Hn.prototype.resolve=function(d){const y=zt(this);let v=!!d.j;v?an(y,d.j):v=!!d.o,v?y.o=d.o:v=!!d.g,v?y.g=d.g:v=d.u!=null;var I=d.h;if(v)Us(y,d.u);else if(v=!!d.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var H=y.h.lastIndexOf("/");H!=-1&&(I=y.h.slice(0,H+1)+I)}if(H=I,H==".."||H==".")I="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){I=H.lastIndexOf("/",0)==0,H=H.split("/");const J=[];for(let xe=0;xe<H.length;){const He=H[xe++];He=="."?I&&xe==H.length&&J.push(""):He==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),I&&xe==H.length&&J.push("")):(J.push(He),I=!0)}I=J.join("/")}else I=H}return v?y.h=I:v=d.i.toString()!=="",v?Jo(y,Hu(d.i)):v=!!d.m,v&&(y.m=d.m),y};function zt(d){return new Hn(d)}function an(d,y,v){d.j=v?Hr(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Us(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function Jo(d,y,v){y instanceof zs?(d.i=y,La(d.i,d.l)):(v||(y=zi(y,Vs)),d.i=new zs(y,d.l))}function ct(d,y,v){d.i.set(y,v)}function Vi(d){return ct(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Hr(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function zi(d,y,v){return typeof d=="string"?(d=encodeURI(d).replace(y,Wn),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Wn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Ra=/[#\/\?@]/g,qu=/[#\?:]/g,Zo=/[#\?]/g,Vs=/[#\?@]/g,$u=/#/g;function zs(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Mn(d){d.g||(d.g=new Map,d.h=0,d.i&&Pa(d.i,function(y,v){d.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=zs.prototype,s.add=function(d,y){Mn(this),this.i=null,d=qs(this,d);let v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(y),this.h+=1,this};function Bu(d,y){Mn(d),y=qs(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function el(d,y){return Mn(d),y=qs(d,y),d.g.has(y)}s.forEach=function(d,y){Mn(this),this.g.forEach(function(v,I){v.forEach(function(H){d.call(y,H,I,this)},this)},this)};function tl(d,y){Mn(d);let v=[];if(typeof y=="string")el(d,y)&&(v=v.concat(d.g.get(qs(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)v=v.concat(d[y]);return v}s.set=function(d,y){return Mn(this),this.i=null,d=qs(this,d),el(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},s.get=function(d,y){return d?(d=tl(this,d),d.length>0?String(d[0]):y):y};function Ma(d,y,v){Bu(d,y),v.length>0&&(d.i=null,d.g.set(qs(d,y),P(v)),d.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(let I=0;I<y.length;I++){var v=y[I];const H=ir(v);v=tl(this,v);for(let J=0;J<v.length;J++){let xe=H;v[J]!==""&&(xe+="="+ir(v[J])),d.push(xe)}}return this.i=d.join("&")};function Hu(d){const y=new zs;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function qs(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function La(d,y){y&&!d.j&&(Mn(d),d.i=null,d.g.forEach(function(v,I){const H=I.toLowerCase();I!=H&&(Bu(this,I),Ma(this,H,v))},d)),d.j=y}function br(d,y){const v=new pe;if(p.Image){const I=new Image;I.onload=N(or,v,"TestLoadImage: loaded",!0,y,I),I.onerror=N(or,v,"TestLoadImage: error",!1,y,I),I.onabort=N(or,v,"TestLoadImage: abort",!1,y,I),I.ontimeout=N(or,v,"TestLoadImage: timeout",!1,y,I),p.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else y(!1)}function nl(d,y){const v=new pe,I=new AbortController,H=setTimeout(()=>{I.abort(),or(v,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:I.signal}).then(J=>{clearTimeout(H),J.ok?or(v,"TestPingServer: ok",!0,y):or(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),or(v,"TestPingServer: error",!1,y)})}function or(d,y,v,I,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),I(v)}catch{}}function $s(){this.g=new _n}function Wr(d){this.i=d.Sb||null,this.h=d.ab||!1}w(Wr,Ea),Wr.prototype.g=function(){return new qi(this.i,this.h)};function qi(d,y){kt.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(qi,kt),s=qi.prototype,s.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,vr(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||p).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Bs(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,vr(this)),this.g&&(this.readyState=3,vr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Oa(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Oa(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Bs(this):vr(this),this.readyState==3&&Oa(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,Bs(this))},s.Na=function(d){this.g&&(this.response=d,Bs(this))},s.ga=function(){this.g&&Bs(this)};function Bs(d){d.readyState=4,d.l=null,d.j=null,d.B=null,vr(d)}s.setRequestHeader=function(d,y){this.A.append(d,y)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,d.push(v[0]+": "+v[1]),v=y.next();return d.join(`\r
`)};function vr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function lr(d){let y="";return Ee(d,function(v,I){y+=I,y+=":",y+=v,y+=`\r
`}),y}function $i(d,y,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=lr(v),typeof d=="string"?v!=null&&ir(v):ct(d,y,v))}function mt(d){kt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(mt,kt);var Gr=/^https?$/i,rl=["POST","PUT"];s=mt.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,y,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ui.g(),this.g.onreadystatechange=D(x(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(J){Bi(this,J);return}if(d=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var H in I)v.set(H,I[H]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const J of I.keys())v.set(J,I.get(J));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(J=>J.toLowerCase()=="content-type"),H=p.FormData&&d instanceof p.FormData,!(Array.prototype.indexOf.call(rl,y,void 0)>=0)||I||H||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,xe]of v)this.g.setRequestHeader(J,xe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(J){Bi(this,J)}};function Bi(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,sl(d),cs(d)}function sl(d){d.A||(d.A=!0,Et(d,"complete"),Et(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Et(this,"complete"),Et(this,"abort"),cs(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cs(this,!0)),mt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Hi(this):this.Xa())},s.Xa=function(){Hi(this)};function Hi(d){if(d.h&&typeof c<"u"){if(d.v&&wr(d)==4)setTimeout(d.Ca.bind(d),0);else if(Et(d,"readystatechange"),wr(d)==4){d.h=!1;try{const J=d.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var I;if(I=J===0){let xe=String(d.D).match(zu)[1]||null;!xe&&p.self&&p.self.location&&(xe=p.self.location.protocol.slice(0,-1)),I=!Gr.test(xe?xe.toLowerCase():"")}v=I}if(v)Et(d,"complete"),Et(d,"success");else{d.o=6;try{var H=wr(d)>2?d.g.statusText:""}catch{H=""}d.l=H+" ["+d.ca()+"]",sl(d)}}finally{cs(d)}}}}function cs(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const v=d.g;d.g=null,y||Et(d,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function wr(d){return d.g?d.g.readyState:0}s.ca=function(){try{return wr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),Mr(y)}};function dn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ds(d){const y={};d=(d.g&&wr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(_(d[I]))continue;var v=qe(d[I]);const H=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const J=y[H]||[];y[H]=J,J.push(v)}Oe(y,function(I){return I.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Kr(d,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||y}function Hs(d){this.za=0,this.i=[],this.j=new pe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Kr("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Kr("baseRetryDelayMs",5e3,d),this.Za=Kr("retryDelaySeedMs",1e4,d),this.Ta=Kr("forwardChannelMaxRetries",2,d),this.va=Kr("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Go(d&&d.concurrentRequestLimit),this.Ba=new $s,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Hs.prototype,s.ka=8,s.I=1,s.connect=function(d,y,v,I){jt(0),this.W=d,this.H=y||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.J=Ju(this,null,this.W),Qr(this)};function il(d){if(Fa(d),d.I==3){var y=d.V++,v=zt(d.J);if(ct(v,"SID",d.M),ct(v,"RID",y),ct(v,"TYPE","terminate"),Wi(d,v),y=new De(d,d.j,y),y.M=2,y.A=Vi(zt(v)),v=!1,p.navigator&&p.navigator.sendBeacon)try{v=p.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&p.Image&&(new Image().src=y.A,v=!0),v||(y.g=Zu(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Vr(y)}Xu(d)}function Ws(d){d.g&&(ol(d),d.g.cancel(),d.g=null)}function Fa(d){Ws(d),d.v&&(p.clearTimeout(d.v),d.v=null),Va(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&p.clearTimeout(d.m),d.m=null)}function Qr(d){if(!Ko(d.h)&&!d.m){d.m=!0;var y=d.Ea;$||k(),X||($(),X=!0),T.add(y,d),d.D=0}}function Ua(d,y){return $r(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=fe(x(d.Ea,d,y),Yu(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const H=new De(this,this.j,d);let J=this.o;if(this.U&&(J?(J=L(J),he(J,this.U)):J=this.U),this.u!==null||this.R||(H.J=J,J=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Wu(this,H,y),v=zt(this.J),ct(v,"RID",d),ct(v,"CVER",22),this.G&&ct(v,"X-HTTP-Session-Id",this.G),Wi(this,v),J&&(this.R?y="headers="+ir(lr(J))+"&"+y:this.u&&$i(v,this.u,J)),Qo(this.h,H),this.Ra&&ct(v,"TYPE","init"),this.S?(ct(v,"$req",y),ct(v,"SID","null"),H.U=!0,Ur(H,v,null)):Ur(H,v,y),this.I=2}}else this.I==3&&(d?al(this,d):this.i.length==0||Ko(this.h)||al(this))};function al(d,y){var v;y?v=y.l:v=d.V++;const I=zt(d.J);ct(I,"SID",d.M),ct(I,"RID",v),ct(I,"AID",d.K),Wi(d,I),d.u&&d.o&&$i(I,d.u,d.o),v=new De(d,d.j,v,d.D+1),d.u===null&&(v.J=d.o),y&&(d.i=y.G.concat(d.i)),y=Wu(d,v,1e3),v.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Qo(d.h,v),Ur(v,I,y)}function Wi(d,y){d.H&&Ee(d.H,function(v,I){ct(y,I,v)}),d.l&&Ee({},function(v,I){ct(y,I,v)})}function Wu(d,y,v){v=Math.min(d.i.length,v);const I=d.l?x(d.l.Ka,d.l,d):null;e:{var H=d.i;let He=-1;for(;;){const Rt=["count="+v];He==-1?v>0?(He=H[0].g,Rt.push("ofs="+He)):He=0:Rt.push("ofs="+He);let dt=!0;for(let St=0;St<v;St++){var J=H[St].g;const ur=H[St].map;if(J-=He,J<0)He=Math.max(0,H[St].g-100),dt=!1;else try{J="req"+J+"_"||"";try{var xe=ur instanceof Map?ur:Object.entries(ur);for(const[ps,Nr]of xe){let kr=Nr;g(Nr)&&(kr=En(Nr)),Rt.push(J+ps+"="+encodeURIComponent(kr))}}catch(ps){throw Rt.push(J+"type="+encodeURIComponent("_badmap")),ps}}catch{I&&I(ur)}}if(dt){xe=Rt.join("&");break e}}xe=void 0}return d=d.i.splice(0,v),y.G=d,xe}function Gu(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;$||k(),X||($(),X=!0),T.add(y,d),d.A=0}}function Gi(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=fe(x(d.Da,d),Yu(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,Ku(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=fe(x(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,jt(10),Ws(this),Ku(this))};function ol(d){d.B!=null&&(p.clearTimeout(d.B),d.B=null)}function Ku(d){d.g=new De(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=zt(d.na);ct(y,"RID","rpc"),ct(y,"SID",d.M),ct(y,"AID",d.K),ct(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&ct(y,"TO",d.ia),ct(y,"TYPE","xmlhttp"),Wi(d,y),d.u&&d.o&&$i(y,d.u,d.o),d.O&&(d.g.H=d.O);var v=d.g;d=d.ba,v.M=1,v.A=Vi(zt(y)),v.u=null,v.R=!0,Aa(v,d)}s.Va=function(){this.C!=null&&(this.C=null,Ws(this),Gi(this),jt(19))};function Va(d){d.C!=null&&(p.clearTimeout(d.C),d.C=null)}function Qu(d,y){var v=null;if(d.g==y){Va(d),ol(d),d.g=null;var I=2}else if(Br(d.h,y))v=y.G,Yo(d.h,y),I=1;else return;if(d.I!=0){if(y.o)if(I==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var H=d.D;I=Fs(),Et(I,new ne(I,v)),Qr(d)}else Gu(d);else if(H=y.m,H==3||H==0&&y.X>0||!(I==1&&Ua(d,y)||I==2&&Gi(d)))switch(v&&v.length>0&&(y=d.h,y.i=y.i.concat(v)),H){case 1:Yr(d,5);break;case 4:Yr(d,10);break;case 3:Yr(d,6);break;default:Yr(d,2)}}}function Yu(d,y){let v=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(v*=2),v*y}function Yr(d,y){if(d.j.info("Error code "+y),y==2){var v=x(d.bb,d),I=d.Ua;const H=!I;I=new Hn(I||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||an(I,"https"),Vi(I),H?br(I.toString(),v):nl(I.toString(),v)}else jt(2);d.I=0,d.l&&d.l.pa(y),Xu(d),Fa(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function Xu(d){if(d.I=0,d.ja=[],d.l){const y=Xo(d.h);(y.length!=0||d.i.length!=0)&&(z(d.ja,y),z(d.ja,d.i),d.h.i.length=0,P(d.i),d.i.length=0),d.l.oa()}}function Ju(d,y,v){var I=v instanceof Hn?zt(v):new Hn(v);if(I.g!="")y&&(I.g=y+"."+I.g),Us(I,I.u);else{var H=p.location;I=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const J=new Hn(null);I&&an(J,I),y&&(J.g=y),H&&Us(J,H),v&&(J.h=v),I=J}return v=d.G,y=d.wa,v&&y&&ct(I,v,y),ct(I,"VER",d.ka),Wi(d,I),I}function Zu(d,y,v){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new mt(new Wr({ab:v})):new mt(d.ma),y.Fa(d.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function ec(){}s=ec.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Gs(){}Gs.prototype.g=function(d,y){return new Tn(d,y)};function Tn(d,y){kt.call(this),this.g=new Hs(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!_(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!_(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new hs(this)}w(Tn,kt),Tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){il(this.g)},Tn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var v={};v.__data__=d,d=v}else this.v&&(v={},v.__data__=En(d),d=v);y.i.push(new Vt(y.Ya++,d)),y.I==3&&Qr(y)},Tn.prototype.N=function(){this.g.l=null,delete this.j,il(this.g),delete this.g,Tn.Z.N.call(this)};function tc(d){Yt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const v in y){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}w(tc,Yt);function nc(){Rn.call(this),this.status=1}w(nc,Rn);function hs(d){this.g=d}w(hs,ec),hs.prototype.ra=function(){Et(this.g,"a")},hs.prototype.qa=function(d){Et(this.g,new tc(d))},hs.prototype.pa=function(d){Et(this.g,new nc)},hs.prototype.oa=function(){Et(this.g,"b")},Gs.prototype.createWebChannel=Gs.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,tw=function(){return new Gs},ew=function(){return Fs()},Zv=Tt,Lm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xt.NO_ERROR=0,Xt.TIMEOUT=8,Xt.HTTP_ERROR=6,fd=Xt,Or.COMPLETE="complete",Jv=Or,_a.EventType=$n,$n.OPEN="a",$n.CLOSE="b",$n.ERROR="c",$n.MESSAGE="d",kt.prototype.listen=kt.prototype.J,Xl=_a,mt.prototype.listenOnce=mt.prototype.K,mt.prototype.getLastError=mt.prototype.Ha,mt.prototype.getLastErrorCode=mt.prototype.ya,mt.prototype.getStatus=mt.prototype.ca,mt.prototype.getResponseJson=mt.prototype.La,mt.prototype.getResponseText=mt.prototype.la,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Fa,Xv=mt}).apply(typeof ld<"u"?ld:typeof self<"u"?self:typeof window<"u"?window:{});const lb="@firebase/firestore",ub="4.9.2";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jn.UNAUTHENTICATED=new jn(null),jn.GOOGLE_CREDENTIALS=new jn("google-credentials-uid"),jn.FIRST_PARTY=new jn("first-party-uid"),jn.MOCK_USER=new jn("mock-user");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let qo="12.3.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ba=new ff("@firebase/firestore");function wo(){return ba.logLevel}function ke(s,...e){if(ba.logLevel<=Xe.DEBUG){const n=e.map(yf);ba.debug(`Firestore (${qo}): ${s}`,...n)}}function Ps(s,...e){if(ba.logLevel<=Xe.ERROR){const n=e.map(yf);ba.error(`Firestore (${qo}): ${s}`,...n)}}function Do(s,...e){if(ba.logLevel<=Xe.WARN){const n=e.map(yf);ba.warn(`Firestore (${qo}): ${s}`,...n)}}function yf(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(s)}catch{return s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Le(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,nw(s,i,n)}function nw(s,e,n){let i=`FIRESTORE (${qo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ps(i),new Error(i)}function lt(s,e,n,i){let l="Unexpected state";typeof n=="string"?l=n:i=n,s||nw(e,l,i)}function ze(s,e){return s}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Os{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ci{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(jn.UNAUTHENTICATED)))}shutdown(){}}class GS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class KS{constructor(e){this.t=e,this.currentUser=jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){lt(this.o===void 0,42304);let i=this.i;const l=f=>this.i!==i?(i=this.i,n(f)):Promise.resolve();let c=new Ci;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ci,e.enqueueRetryable((()=>l(this.currentUser)))};const p=()=>{const f=c;e.enqueueRetryable((async()=>{await f.promise,await l(this.currentUser)}))},g=f=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit((f=>g(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?g(f):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ci)}}),0),p()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(lt(typeof i.accessToken=="string",31837,{l:i}),new rw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string",2055,{h:e}),new jn(e)}}class QS{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=jn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YS{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new QS(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(jn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class cb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){lt(this.o===void 0,3512);const i=c=>{c.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const p=c.token!==this.m;return this.m=c.token,ke("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const l=c=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new cb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(lt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new cb(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JS(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=JS(40);for(let c=0;c<l.length;++c)i.length<20&&l[c]<n&&(i+=e.charAt(l[c]%62))}return i}}function Je(s,e){return s<e?-1:s>e?1:0}function Om(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const l=s.charAt(i),c=e.charAt(i);if(l!==c)return vm(l)===vm(c)?Je(l,c):vm(l)?1:-1}return Je(s.length,e.length)}const ZS=55296,e5=57343;function vm(s){const e=s.charCodeAt(0);return e>=ZS&&e<=e5}function Po(s,e,n){return s.length===e.length&&s.every(((i,l)=>n(i,e[l])))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const db="__name__";class ts{constructor(e,n,i){n===void 0?n=0:n>e.length&&Le(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Le(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ts.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ts?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let l=0;l<i;l++){const c=ts.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return Je(e.length,n.length)}static compareSegments(e,n){const i=ts.isNumericId(e),l=ts.isNumericId(n);return i&&!l?-1:!i&&l?1:i&&l?ts.extractNumericId(e).compare(ts.extractNumericId(n)):Om(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Si.fromString(e.substring(4,e.length-2))}}class bt extends ts{construct(e,n,i){return new bt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ve(ae.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((l=>l.length>0)))}return new bt(n)}static emptyPath(){return new bt([])}}const t5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yn extends ts{construct(e,n,i){return new yn(e,n,i)}static isValidIdentifier(e){return t5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===db}static keyField(){return new yn([db])}static fromServerFormat(e){const n=[];let i="",l=0;const c=()=>{if(i.length===0)throw new ve(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let p=!1;for(;l<e.length;){const g=e[l];if(g==="\\"){if(l+1===e.length)throw new ve(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[l+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ve(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,l+=2}else g==="`"?(p=!p,l++):g!=="."||p?(i+=g,l++):(c(),l++)}if(c(),p)throw new ve(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yn(n)}static emptyPath(){return new yn([])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(bt.fromString(e))}static fromName(e){return new Ie(bt.fromString(e).popFirst(5))}static empty(){return new Ie(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return bt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new bt(e.slice()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sw(s,e,n){if(!n)throw new ve(ae.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function n5(s,e,n,i){if(e===!0&&i===!0)throw new ve(ae.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function hb(s){if(!Ie.isDocumentKey(s))throw new ve(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function pb(s){if(Ie.isDocumentKey(s))throw new ve(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function iw(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Xd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Le(12329,{type:typeof s})}function tr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ve(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xd(s);throw new ve(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Kt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Su(s,e){if(!iw(s))throw new ve(ae.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const l=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const p=s[i];if(l&&typeof p!==l){n=`JSON field '${i}' must be a ${l}.`;break}if(c!==void 0&&p!==c.value){n=`Expected '${i}' field to equal '${c.value}'`;break}}if(n)throw new ve(ae.INVALID_ARGUMENT,n);return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const mb=-62135596800,fb=1e6;class Nt{static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*fb);return new Nt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ve(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ve(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<mb)throw new ve(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fb}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Su(e,Nt._jsonSchema))return new Nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-mb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nt._jsonSchemaVersion="firestore/timestamp/1.0",Nt._jsonSchema={type:Kt("string",Nt._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new Nt(0,0))}static max(){return new Ue(new Nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const hu=-1;function r5(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,l=Ue.fromTimestamp(i===1e9?new Nt(n+1,0):new Nt(n,i));return new _i(l,Ie.empty(),e)}function s5(s){return new _i(s.readTime,s.key,hu)}class _i{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new _i(Ue.min(),Ie.empty(),hu)}static max(){return new _i(Ue.max(),Ie.empty(),hu)}}function i5(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Ie.comparator(s.documentKey,e.documentKey),n!==0?n:Je(s.largestBatchId,e.largestBatchId))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const a5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class o5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function $o(s){if(s.code!==ae.FAILED_PRECONDITION||s.message!==a5)throw s;ke("LocalStore","Unexpectedly lost primary lease")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le(((i,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):le.reject(n)}static resolve(e){return new le(((n,i)=>{n(e)}))}static reject(e){return new le(((n,i)=>{i(e)}))}static waitFor(e){return new le(((n,i)=>{let l=0,c=0,p=!1;e.forEach((g=>{++l,g.next((()=>{++c,p&&c===l&&n()}),(f=>i(f)))})),p=!0,c===l&&n()}))}static or(e){let n=le.resolve(!1);for(const i of e)n=n.next((l=>l?le.resolve(l):i()));return n}static forEach(e,n){const i=[];return e.forEach(((l,c)=>{i.push(n.call(this,l,c))})),this.waitFor(i)}static mapArray(e,n){return new le(((i,l)=>{const c=e.length,p=new Array(c);let g=0;for(let f=0;f<c;f++){const x=f;n(e[x]).next((N=>{p[x]=N,++g,g===c&&i(p)}),(N=>l(N)))}}))}static doWhile(e,n){return new le(((i,l)=>{const c=()=>{e()===!0?n().next((()=>{c()}),l):i()};c()}))}}function l5(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Bo(s){return s.name==="IndexedDbTransactionError"}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Jd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Jd.ce=-1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const vf=-1;function Zd(s){return s==null}function Id(s){return s===0&&1/s==-1/0}function u5(s){return typeof s=="number"&&Number.isInteger(s)&&!Id(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const aw="";function c5(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=gb(e)),e=d5(s.get(n),e);return gb(e)}function d5(s,e){let n=e;const i=s.length;for(let l=0;l<i;l++){const c=s.charAt(l);switch(c){case"\0":n+="";break;case aw:n+="";break;default:n+=c}}return n}function gb(s){return s+aw+""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xb(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Ri(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function ow(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class It{constructor(e,n){this.comparator=e,this.root=n||xn.EMPTY}insert(e,n){return new It(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xn.BLACK,null,null))}remove(e){return new It(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return n+i.left.size;l<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ud(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ud(this.root,e,this.comparator,!1)}getReverseIterator(){return new ud(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ud(this.root,e,this.comparator,!0)}}class ud{constructor(e,n,i,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xn{constructor(e,n,i,l,c){this.key=e,this.value=n,this.color=i??xn.RED,this.left=l??xn.EMPTY,this.right=c??xn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,l,c){return new xn(e??this.key,n??this.value,i??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let l=this;const c=i(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,i),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return xn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return xn.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}}xn.EMPTY=null,xn.RED=!0,xn.BLACK=!1;xn.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(s,e,n,i,l){return this}insert(s,e,n){return new xn(s,e)}remove(s,e){return this}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class en{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yb(this.data.getIterator())}getIteratorFrom(e){return new yb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=i.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new en(this.comparator);return n.data=e,n}}class yb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class er{constructor(e){this.fields=e,e.sort(yn.comparator)}static empty(){return new er([])}unionWith(e){let n=new en(yn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new er(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Po(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new lw("Invalid base64 string: "+l):l}})(e);return new bn(n)}static fromUint8Array(e){const n=(function(i){let l="";for(let c=0;c<i.length;++c)l+=String.fromCharCode(i[c]);return l})(e);return new bn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bn.EMPTY_BYTE_STRING=new bn("");const h5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ti(s){if(lt(!!s,39018),typeof s=="string"){let e=0;const n=h5.exec(s);if(lt(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ot(s.seconds),nanos:Ot(s.nanos)}}function Ot(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ii(s){return typeof s=="string"?bn.fromBase64String(s):bn.fromUint8Array(s)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const uw="server_timestamp",cw="__type__",dw="__previous_value__",hw="__local_write_time__";function wf(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)==null?void 0:e.fields)||{})[cw])==null?void 0:n.stringValue)===uw}function eh(s){const e=s.mapValue.fields[dw];return wf(e)?eh(e):e}function pu(s){const e=Ti(s.mapValue.fields[hw].timestampValue);return new Nt(e.seconds,e.nanos)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class p5{constructor(e,n,i,l,c,p,g,f,x,N){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=l,this.ssl=c,this.forceLongPolling=p,this.autoDetectLongPolling=g,this.longPollingOptions=f,this.useFetchStreams=x,this.isUsingEmulator=N}}const Ad="(default)";class mu{constructor(e,n){this.projectId=e,this.database=n||Ad}static empty(){return new mu("","")}get isDefaultDatabase(){return this.database===Ad}isEqual(e){return e instanceof mu&&e.projectId===this.projectId&&e.database===this.database}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pw="__type__",m5="__max__",cd={mapValue:{}},mw="__vector__",Dd="value";function Ai(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?wf(s)?4:g5(s)?9007199254740991:f5(s)?10:11:Le(28295,{value:s})}function ls(s,e){if(s===e)return!0;const n=Ai(s);if(n!==Ai(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return pu(s).isEqual(pu(e));case 3:return(function(i,l){if(typeof i.timestampValue=="string"&&typeof l.timestampValue=="string"&&i.timestampValue.length===l.timestampValue.length)return i.timestampValue===l.timestampValue;const c=Ti(i.timestampValue),p=Ti(l.timestampValue);return c.seconds===p.seconds&&c.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(i,l){return Ii(i.bytesValue).isEqual(Ii(l.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(i,l){return Ot(i.geoPointValue.latitude)===Ot(l.geoPointValue.latitude)&&Ot(i.geoPointValue.longitude)===Ot(l.geoPointValue.longitude)})(s,e);case 2:return(function(i,l){if("integerValue"in i&&"integerValue"in l)return Ot(i.integerValue)===Ot(l.integerValue);if("doubleValue"in i&&"doubleValue"in l){const c=Ot(i.doubleValue),p=Ot(l.doubleValue);return c===p?Id(c)===Id(p):isNaN(c)&&isNaN(p)}return!1})(s,e);case 9:return Po(s.arrayValue.values||[],e.arrayValue.values||[],ls);case 10:case 11:return(function(i,l){const c=i.mapValue.fields||{},p=l.mapValue.fields||{};if(xb(c)!==xb(p))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(p[g]===void 0||!ls(c[g],p[g])))return!1;return!0})(s,e);default:return Le(52216,{left:s})}}function fu(s,e){return(s.values||[]).find((n=>ls(n,e)))!==void 0}function Ro(s,e){if(s===e)return 0;const n=Ai(s),i=Ai(e);if(n!==i)return Je(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Je(s.booleanValue,e.booleanValue);case 2:return(function(l,c){const p=Ot(l.integerValue||l.doubleValue),g=Ot(c.integerValue||c.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return bb(s.timestampValue,e.timestampValue);case 4:return bb(pu(s),pu(e));case 5:return Om(s.stringValue,e.stringValue);case 6:return(function(l,c){const p=Ii(l),g=Ii(c);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(l,c){const p=l.split("/"),g=c.split("/");for(let f=0;f<p.length&&f<g.length;f++){const x=Je(p[f],g[f]);if(x!==0)return x}return Je(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(l,c){const p=Je(Ot(l.latitude),Ot(c.latitude));return p!==0?p:Je(Ot(l.longitude),Ot(c.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return vb(s.arrayValue,e.arrayValue);case 10:return(function(l,c){var p,g,f,x;const N=l.fields||{},w=c.fields||{},D=(p=N[Dd])==null?void 0:p.arrayValue,P=(g=w[Dd])==null?void 0:g.arrayValue,z=Je(((f=D==null?void 0:D.values)==null?void 0:f.length)||0,((x=P==null?void 0:P.values)==null?void 0:x.length)||0);return z!==0?z:vb(D,P)})(s.mapValue,e.mapValue);case 11:return(function(l,c){if(l===cd.mapValue&&c===cd.mapValue)return 0;if(l===cd.mapValue)return 1;if(c===cd.mapValue)return-1;const p=l.fields||{},g=Object.keys(p),f=c.fields||{},x=Object.keys(f);g.sort(),x.sort();for(let N=0;N<g.length&&N<x.length;++N){const w=Om(g[N],x[N]);if(w!==0)return w;const D=Ro(p[g[N]],f[x[N]]);if(D!==0)return D}return Je(g.length,x.length)})(s.mapValue,e.mapValue);default:throw Le(23264,{he:n})}}function bb(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Je(s,e);const n=Ti(s),i=Ti(e),l=Je(n.seconds,i.seconds);return l!==0?l:Je(n.nanos,i.nanos)}function vb(s,e){const n=s.values||[],i=e.values||[];for(let l=0;l<n.length&&l<i.length;++l){const c=Ro(n[l],i[l]);if(c)return c}return Je(n.length,i.length)}function Mo(s){return Fm(s)}function Fm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(e){const n=Ti(e);return`time(${n.seconds},${n.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(e){return Ii(e).toBase64()})(s.bytesValue):"referenceValue"in s?(function(e){return Ie.fromName(e).toString()})(s.referenceValue):"geoPointValue"in s?(function(e){return`geo(${e.latitude},${e.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(e){let n="[",i=!0;for(const l of e.values||[])i?i=!1:n+=",",n+=Fm(l);return n+"]"})(s.arrayValue):"mapValue"in s?(function(e){const n=Object.keys(e.fields||{}).sort();let i="{",l=!0;for(const c of n)l?l=!1:i+=",",i+=`${c}:${Fm(e.fields[c])}`;return i+"}"})(s.mapValue):Le(61005,{value:s})}function gd(s){switch(Ai(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=eh(s);return e?16+gd(e):16;case 5:return 2*s.stringValue.length;case 6:return Ii(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((i,l)=>i+gd(l)),0)})(s.arrayValue);case 10:case 11:return(function(n){let i=0;return Ri(n.fields,((l,c)=>{i+=l.length+gd(c)})),i})(s.mapValue);default:throw Le(13486,{value:s})}}function wb(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Um(s){return!!s&&"integerValue"in s}function Nf(s){return!!s&&"arrayValue"in s}function Nb(s){return!!s&&"nullValue"in s}function kb(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function xd(s){return!!s&&"mapValue"in s}function f5(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)==null?void 0:e.fields)||{})[pw])==null?void 0:n.stringValue)===mw}function nu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Ri(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=nu(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nu(s.arrayValue.values[n]);return e}return{...s}}function g5(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===m5}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qn{constructor(e){this.value=e}static empty(){return new qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!xd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nu(n)}setAll(e){let n=yn.emptyPath(),i={},l=[];e.forEach(((p,g)=>{if(!n.isImmediateParentOf(g)){const f=this.getFieldsMap(n);this.applyChanges(f,i,l),i={},l=[],n=g.popLast()}p?i[g.lastSegment()]=nu(p):l.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,i,l)}delete(e){const n=this.field(e.popLast());xd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ls(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=n.mapValue.fields[e.get(i)];xd(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,i){Ri(n,((l,c)=>e[l]=c));for(const l of i)delete e[l]}clone(){return new qn(nu(this.value))}}function fw(s){const e=[];return Ri(s.fields,((n,i)=>{const l=new yn([n]);if(xd(i)){const c=fw(i.mapValue).fields;if(c.length===0)e.push(l);else for(const p of c)e.push(l.child(p))}else e.push(l)})),new er(e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Sn{constructor(e,n,i,l,c,p,g){this.key=e,this.documentType=n,this.version=i,this.readTime=l,this.createTime=c,this.data=p,this.documentState=g}static newInvalidDocument(e){return new Sn(e,0,Ue.min(),Ue.min(),Ue.min(),qn.empty(),0)}static newFoundDocument(e,n,i,l){return new Sn(e,1,n,Ue.min(),i,l,0)}static newNoDocument(e,n){return new Sn(e,2,n,Ue.min(),Ue.min(),qn.empty(),0)}static newUnknownDocument(e,n){return new Sn(e,3,n,Ue.min(),Ue.min(),qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Pd{constructor(e,n){this.position=e,this.inclusive=n}}function jb(s,e,n){let i=0;for(let l=0;l<s.position.length;l++){const c=e[l],p=s.position[l];if(c.field.isKeyField()?i=Ie.comparator(Ie.fromName(p.referenceValue),n.key):i=Ro(p,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function Sb(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!ls(s.position[n],e.position[n]))return!1;return!0}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Rd{constructor(e,n="asc"){this.field=e,this.dir=n}}function x5(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gw{}class Gt extends gw{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new b5(e,n,i):n==="array-contains"?new N5(e,i):n==="in"?new k5(e,i):n==="not-in"?new j5(e,i):n==="array-contains-any"?new S5(e,i):new Gt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new v5(e,i):new w5(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ro(n,this.value)):n!==null&&Ai(this.value)===Ai(n)&&this.matchesComparison(Ro(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ir extends gw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ir(e,n)}matches(e){return xw(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xw(s){return s.op==="and"}function yw(s){return y5(s)&&xw(s)}function y5(s){for(const e of s.filters)if(e instanceof Ir)return!1;return!0}function Vm(s){if(s instanceof Gt)return s.field.canonicalString()+s.op.toString()+Mo(s.value);if(yw(s))return s.filters.map((e=>Vm(e))).join(",");{const e=s.filters.map((n=>Vm(n))).join(",");return`${s.op}(${e})`}}function bw(s,e){return s instanceof Gt?(function(n,i){return i instanceof Gt&&n.op===i.op&&n.field.isEqual(i.field)&&ls(n.value,i.value)})(s,e):s instanceof Ir?(function(n,i){return i instanceof Ir&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((l,c,p)=>l&&bw(c,i.filters[p])),!0):!1})(s,e):void Le(19439)}function vw(s){return s instanceof Gt?(function(e){return`${e.field.canonicalString()} ${e.op} ${Mo(e.value)}`})(s):s instanceof Ir?(function(e){return e.op.toString()+" {"+e.getFilters().map(vw).join(" ,")+"}"})(s):"Filter"}class b5 extends Gt{constructor(e,n,i){super(e,n,i),this.key=Ie.fromName(i.referenceValue)}matches(e){const n=Ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class v5 extends Gt{constructor(e,n){super(e,"in",n),this.keys=ww("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class w5 extends Gt{constructor(e,n){super(e,"not-in",n),this.keys=ww("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function ww(s,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((i=>Ie.fromName(i.referenceValue)))}class N5 extends Gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Nf(n)&&fu(n.arrayValue,this.value)}}class k5 extends Gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&fu(this.value.arrayValue,n)}}class j5 extends Gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!fu(this.value.arrayValue,n)}}class S5 extends Gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Nf(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>fu(this.value.arrayValue,i)))}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class C5{constructor(e,n=null,i=[],l=[],c=null,p=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=l,this.limit=c,this.startAt=p,this.endAt=g,this.Te=null}}function Cb(s,e=null,n=[],i=[],l=null,c=null,p=null){return new C5(s,e,n,i,l,c,p)}function kf(s){const e=ze(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Vm(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Zd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Mo(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Mo(i))).join(",")),e.Te=n}return e.Te}function jf(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!x5(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!bw(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Sb(s.startAt,e.startAt)&&Sb(s.endAt,e.endAt)}function zm(s){return Ie.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Cu{constructor(e,n=null,i=[],l=[],c=null,p="F",g=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=l,this.limit=c,this.limitType=p,this.startAt=g,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function E5(s,e,n,i,l,c,p,g){return new Cu(s,e,n,i,l,c,p,g)}function Sf(s){return new Cu(s)}function Eb(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Nw(s){return s.collectionGroup!==null}function ru(s){const e=ze(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),n.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new en(yn.comparator);return l.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(c=c.add(g.field))}))})),c})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Rd(l,i))})),n.has(yn.keyField().canonicalString())||e.Ie.push(new Rd(yn.keyField(),i))}return e.Ie}function ns(s){const e=ze(s);return e.Ee||(e.Ee=_5(e,ru(s))),e.Ee}function _5(s,e){if(s.limitType==="F")return Cb(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new Rd(l.field,c)}));const n=s.endAt?new Pd(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Pd(s.startAt.position,s.startAt.inclusive):null;return Cb(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function qm(s,e){const n=s.filters.concat([e]);return new Cu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function $m(s,e,n){return new Cu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function th(s,e){return jf(ns(s),ns(e))&&s.limitType===e.limitType}function kw(s){return`${kf(ns(s))}|lt:${s.limitType}`}function No(s){return`Query(target=${(function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map((i=>vw(i))).join(", ")}]`),Zd(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Mo(i))).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Mo(i))).join(",")),`Target(${n})`})(ns(s))}; limitType=${s.limitType})`}function nh(s,e){return e.isFoundDocument()&&(function(n,i){const l=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(l):Ie.isDocumentKey(n.path)?n.path.isEqual(l):n.path.isImmediateParentOf(l)})(s,e)&&(function(n,i){for(const l of ru(n))if(!l.field.isKeyField()&&i.data.field(l.field)===null)return!1;return!0})(s,e)&&(function(n,i){for(const l of n.filters)if(!l.matches(i))return!1;return!0})(s,e)&&(function(n,i){return!(n.startAt&&!(function(l,c,p){const g=jb(l,c,p);return l.inclusive?g<=0:g<0})(n.startAt,ru(n),i)||n.endAt&&!(function(l,c,p){const g=jb(l,c,p);return l.inclusive?g>=0:g>0})(n.endAt,ru(n),i))})(s,e)}function T5(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function jw(s){return(e,n)=>{let i=!1;for(const l of ru(s)){const c=I5(l,e,n);if(c!==0)return c;i=i||l.field.isKeyField()}return 0}}function I5(s,e,n){const i=s.field.isKeyField()?Ie.comparator(e.key,n.key):(function(l,c,p){const g=c.data.field(l),f=p.data.field(l);return g!==null&&f!==null?Ro(g,f):Le(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Le(19790,{direction:s.dir})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ka{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[l,c]of i)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[n]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Ri(this.inner,((n,i)=>{for(const[l,c]of i)e(l,c)}))}isEmpty(){return ow(this.inner)}size(){return this.innerSize}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const A5=new It(Ie.comparator);function Rs(){return A5}const Sw=new It(Ie.comparator);function Jl(...s){let e=Sw;for(const n of s)e=e.insert(n.key,n);return e}function Cw(s){let e=Sw;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function ma(){return su()}function Ew(){return su()}function su(){return new ka((s=>s.toString()),((s,e)=>s.isEqual(e)))}const D5=new It(Ie.comparator),P5=new en(Ie.comparator);function Ze(...s){let e=P5;for(const n of s)e=e.add(n);return e}const R5=new en(Je);function M5(){return R5}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Cf(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Id(e)?"-0":e}}function _w(s){return{integerValue:""+s}}function Tw(s,e){return u5(e)?_w(e):Cf(s,e)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rh{constructor(){this._=void 0}}function L5(s,e,n){return s instanceof Md?(function(i,l){const c={fields:{[cw]:{stringValue:uw},[hw]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return l&&wf(l)&&(l=eh(l)),l&&(c.fields[dw]=l),{mapValue:c}})(n,e):s instanceof gu?Aw(s,e):s instanceof xu?Dw(s,e):(function(i,l){const c=Iw(i,l),p=_b(c)+_b(i.Ae);return Um(c)&&Um(i.Ae)?_w(p):Cf(i.serializer,p)})(s,e)}function O5(s,e,n){return s instanceof gu?Aw(s,e):s instanceof xu?Dw(s,e):n}function Iw(s,e){return s instanceof yu?(function(n){return Um(n)||(function(i){return!!i&&"doubleValue"in i})(n)})(e)?e:{integerValue:0}:null}class Md extends rh{}class gu extends rh{constructor(e){super(),this.elements=e}}function Aw(s,e){const n=Pw(e);for(const i of s.elements)n.some((l=>ls(l,i)))||n.push(i);return{arrayValue:{values:n}}}class xu extends rh{constructor(e){super(),this.elements=e}}function Dw(s,e){let n=Pw(e);for(const i of s.elements)n=n.filter((l=>!ls(l,i)));return{arrayValue:{values:n}}}class yu extends rh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function _b(s){return Ot(s.integerValue||s.doubleValue)}function Pw(s){return Nf(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class F5{constructor(e,n){this.field=e,this.transform=n}}function U5(s,e){return s.field.isEqual(e.field)&&(function(n,i){return n instanceof gu&&i instanceof gu||n instanceof xu&&i instanceof xu?Po(n.elements,i.elements,ls):n instanceof yu&&i instanceof yu?ls(n.Ae,i.Ae):n instanceof Md&&i instanceof Md})(s.transform,e.transform)}class V5{constructor(e,n){this.version=e,this.transformResults=n}}class Pn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yd(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class sh{}function Rw(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new ih(s.key,Pn.none()):new Eu(s.key,s.data,Pn.none());{const n=s.data,i=qn.empty();let l=new en(yn.comparator);for(let c of e.fields)if(!l.has(c)){let p=n.field(c);p===null&&c.length>1&&(c=c.popLast(),p=n.field(c)),p===null?i.delete(c):i.set(c,p),l=l.add(c)}return new Mi(s.key,i,new er(l.toArray()),Pn.none())}}function z5(s,e,n){s instanceof Eu?(function(i,l,c){const p=i.value.clone(),g=Ib(i.fieldTransforms,l,c.transformResults);p.setAll(g),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(s,e,n):s instanceof Mi?(function(i,l,c){if(!yd(i.precondition,l))return void l.convertToUnknownDocument(c.version);const p=Ib(i.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(Mw(i)),g.setAll(p),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(s,e,n):(function(i,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function iu(s,e,n,i){return s instanceof Eu?(function(l,c,p,g){if(!yd(l.precondition,c))return p;const f=l.value.clone(),x=Ab(l.fieldTransforms,g,c);return f.setAll(x),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(s,e,n,i):s instanceof Mi?(function(l,c,p,g){if(!yd(l.precondition,c))return p;const f=Ab(l.fieldTransforms,g,c),x=c.data;return x.setAll(Mw(l)),x.setAll(f),c.convertToFoundDocument(c.version,x).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((N=>N.field)))})(s,e,n,i):(function(l,c,p){return yd(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):p})(s,e,n)}function q5(s,e){let n=null;for(const i of s.fieldTransforms){const l=e.data.field(i.field),c=Iw(i.transform,l||null);c!=null&&(n===null&&(n=qn.empty()),n.set(i.field,c))}return n||null}function Tb(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Po(n,i,((l,c)=>U5(l,c)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Eu extends sh{constructor(e,n,i,l=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Mi extends sh{constructor(e,n,i,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Mw(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function Ib(s,e,n){const i=new Map;lt(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let l=0;l<n.length;l++){const c=s[l],p=c.transform,g=e.data.field(c.field);i.set(c.field,O5(p,g,n[l]))}return i}function Ab(s,e,n){const i=new Map;for(const l of s){const c=l.transform,p=n.data.field(l.field);i.set(l.field,L5(c,p,e))}return i}class ih extends sh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $5 extends sh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class B5{constructor(e,n,i,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&z5(c,e,i[l])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=iu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=iu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Ew();return this.mutations.forEach((l=>{const c=e.get(l.key),p=c.overlayedDocument;let g=this.applyToLocalView(p,c.mutatedFields);g=n.has(l.key)?null:g;const f=Rw(p,g);f!==null&&i.set(l.key,f),p.isValidDocument()||p.convertToNoDocument(Ue.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&Po(this.mutations,e.mutations,((n,i)=>Tb(n,i)))&&Po(this.baseMutations,e.baseMutations,((n,i)=>Tb(n,i)))}}class Ef{constructor(e,n,i,l){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=l}static from(e,n,i){lt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return D5})();const c=e.mutations;for(let p=0;p<c.length;p++)l=l.insert(c[p].key,i[p].version);return new Ef(e,n,i,l)}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class H5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class W5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Wt,tt;function G5(s){switch(s){case ae.OK:return Le(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Le(15467,{code:s})}}function Lw(s){if(s===void 0)return Ps("GRPC error has no .code"),ae.UNKNOWN;switch(s){case Wt.OK:return ae.OK;case Wt.CANCELLED:return ae.CANCELLED;case Wt.UNKNOWN:return ae.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return ae.INTERNAL;case Wt.UNAVAILABLE:return ae.UNAVAILABLE;case Wt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Wt.NOT_FOUND:return ae.NOT_FOUND;case Wt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Wt.ABORTED:return ae.ABORTED;case Wt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Wt.DATA_LOSS:return ae.DATA_LOSS;default:return Le(39323,{code:s})}}(tt=Wt||(Wt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function K5(){return new TextEncoder}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Q5=new Si([4294967295,4294967295],0);function Db(s){const e=K5().encode(s),n=new Yv;return n.update(e),new Uint8Array(n.digest())}function Pb(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Si([n,i],0),new Si([l,c],0)]}class _f{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Zl(`Invalid padding: ${n}`);if(i<0)throw new Zl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Zl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Zl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Si.fromNumber(this.ge)}ye(e,n,i){let l=e.add(n.multiply(Si.fromNumber(i)));return l.compare(Q5)===1&&(l=new Si([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Db(e),[i,l]=Pb(n);for(let c=0;c<this.hashCount;c++){const p=this.ye(i,l,c);if(!this.we(p))return!1}return!0}static create(e,n,i){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),p=new _f(c,l,n);return i.forEach((g=>p.insert(g))),p}insert(e){if(this.ge===0)return;const n=Db(e),[i,l]=Pb(n);for(let c=0;c<this.hashCount;c++){const p=this.ye(i,l,c);this.Se(p)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ah{constructor(e,n,i,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const l=new Map;return l.set(e,_u.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new ah(Ue.min(),l,new It(Je),Rs(),Ze())}}class _u{constructor(e,n,i,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new _u(i,n,Ze(),Ze(),Ze())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bd{constructor(e,n,i,l){this.be=e,this.removedTargetIds=n,this.key=i,this.De=l}}class Ow{constructor(e,n){this.targetId=e,this.Ce=n}}class Fw{constructor(e,n,i=bn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=l}}class Rb{constructor(){this.ve=0,this.Fe=Mb(),this.Me=bn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),n=Ze(),i=Ze();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:i=i.add(l);break;default:Le(38017,{changeType:c})}})),new _u(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=Mb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,lt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Y5{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rs(),this.Je=dd(),this.He=dd(),this.Ye=new It(Je)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Le(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,i=e.Ce.count,l=this.ot(n);if(l){const c=l.target;if(zm(c))if(i===0){const p=new Ie(c.path);this.et(n,p,Sn.newNoDocument(p,Ue.min()))}else lt(i===1,20013,{expectedCount:i});else{const p=this._t(n);if(p!==i){const g=this.ut(e),f=g?this.ct(g,e,p):1;if(f!==0){this.it(n);const x=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,x)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:c=0}=n;let p,g;try{p=Ii(i).toUint8Array()}catch(f){if(f instanceof lw)return Do("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{g=new _f(p,l,c)}catch(f){return Do(f instanceof Zl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return g.ge===0?null:g}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let l=0;return i.forEach((c=>{const p=this.Ge.ht(),g=`projects/${p.projectId}/databases/${p.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.et(n,c,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((c,p)=>{const g=this.ot(p);if(g){if(c.current&&zm(g.target)){const f=new Ie(g.target.path);this.It(f).has(p)||this.Et(p,f)||this.et(p,f,Sn.newNoDocument(f,e))}c.Be&&(n.set(p,c.ke()),c.qe())}}));let i=Ze();this.He.forEach(((c,p)=>{let g=!0;p.forEachWhile((f=>{const x=this.ot(f);return!x||x.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(i=i.add(c))})),this.je.forEach(((c,p)=>p.setReadTime(e)));const l=new ah(e,n,this.Ye,this.je,i);return this.je=Rs(),this.Je=dd(),this.He=dd(),this.Ye=new It(Je),l}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Rb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new en(Je),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new en(Je),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ke("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Rb),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function dd(){return new It(Ie.comparator)}function Mb(){return new It(Ie.comparator)}const X5={asc:"ASCENDING",desc:"DESCENDING"},J5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Z5={and:"AND",or:"OR"};class e4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bm(s,e){return s.useProto3Json||Zd(e)?e:{value:e}}function Ld(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uw(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function t4(s,e){return Ld(s,e.toTimestamp())}function rs(s){return lt(!!s,49232),Ue.fromTimestamp((function(e){const n=Ti(e);return new Nt(n.seconds,n.nanos)})(s))}function Tf(s,e){return Hm(s,e).canonicalString()}function Hm(s,e){const n=(function(i){return new bt(["projects",i.projectId,"databases",i.database])})(s).child("documents");return e===void 0?n:n.child(e)}function Vw(s){const e=bt.fromString(s);return lt(Hw(e),10190,{key:e.toString()}),e}function Wm(s,e){return Tf(s.databaseId,e.path)}function wm(s,e){const n=Vw(e);if(n.get(1)!==s.databaseId.projectId)throw new ve(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ve(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Ie(qw(n))}function zw(s,e){return Tf(s.databaseId,e)}function n4(s){const e=Vw(s);return e.length===4?bt.emptyPath():qw(e)}function Gm(s){return new bt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function qw(s){return lt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Lb(s,e,n){return{name:Wm(s,e),fields:n.value.mapValue.fields}}function r4(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Le(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(f,x){return f.useProto3Json?(lt(x===void 0||typeof x=="string",58123),bn.fromBase64String(x||"")):(lt(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),bn.fromUint8Array(x||new Uint8Array))})(s,e.targetChange.resumeToken),p=e.targetChange.cause,g=p&&(function(f){const x=f.code===void 0?ae.UNKNOWN:Lw(f.code);return new ve(x,f.message||"")})(p);n=new Fw(i,l,c,g||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=wm(s,i.document.name),c=rs(i.document.updateTime),p=i.document.createTime?rs(i.document.createTime):Ue.min(),g=new qn({mapValue:{fields:i.document.fields}}),f=Sn.newFoundDocument(l,c,p,g),x=i.targetIds||[],N=i.removedTargetIds||[];n=new bd(x,N,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=wm(s,i.document),c=i.readTime?rs(i.readTime):Ue.min(),p=Sn.newNoDocument(l,c),g=i.removedTargetIds||[];n=new bd([],g,p.key,p)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=wm(s,i.document),c=i.removedTargetIds||[];n=new bd([],c,l,null)}else{if(!("filter"in e))return Le(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:c}=i,p=new W5(l,c),g=i.targetId;n=new Ow(g,p)}}return n}function s4(s,e){let n;if(e instanceof Eu)n={update:Lb(s,e.key,e.value)};else if(e instanceof ih)n={delete:Wm(s,e.key)};else if(e instanceof Mi)n={update:Lb(s,e.key,e.data),updateMask:p4(e.fieldMask)};else{if(!(e instanceof $5))return Le(16599,{Vt:e.type});n={verify:Wm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const p=c.transform;if(p instanceof Md)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof gu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof xu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof yu)return{fieldPath:c.field.canonicalString(),increment:p.Ae};throw Le(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(i,l){return l.updateTime!==void 0?{updateTime:t4(i,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Le(27497)})(s,e.precondition)),n}function i4(s,e){return s&&s.length>0?(lt(e!==void 0,14353),s.map((n=>(function(i,l){let c=i.updateTime?rs(i.updateTime):rs(l);return c.isEqual(Ue.min())&&(c=rs(l)),new V5(c,i.transformResults||[])})(n,e)))):[]}function a4(s,e){return{documents:[zw(s,e.path)]}}function o4(s,e){const n={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=zw(s,l);const c=(function(f){if(f.length!==0)return Bw(Ir.create(f,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const p=(function(f){if(f.length!==0)return f.map((x=>(function(N){return{field:ko(N.field),direction:c4(N.dir)}})(x)))})(e.orderBy);p&&(n.structuredQuery.orderBy=p);const g=Bm(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:n,parent:l}}function l4(s){let e=n4(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let l=null;if(i>0){lt(i===1,65062);const N=n.from[0];N.allDescendants?l=N.collectionId:e=e.child(N.collectionId)}let c=[];n.where&&(c=(function(N){const w=$w(N);return w instanceof Ir&&yw(w)?w.getFilters():[w]})(n.where));let p=[];n.orderBy&&(p=(function(N){return N.map((w=>(function(D){return new Rd(jo(D.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(w)))})(n.orderBy));let g=null;n.limit&&(g=(function(N){let w;return w=typeof N=="object"?N.value:N,Zd(w)?null:w})(n.limit));let f=null;n.startAt&&(f=(function(N){const w=!!N.before,D=N.values||[];return new Pd(D,w)})(n.startAt));let x=null;return n.endAt&&(x=(function(N){const w=!N.before,D=N.values||[];return new Pd(D,w)})(n.endAt)),E5(e,l,p,c,g,"F",f,x)}function u4(s,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $w(s){return s.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=jo(e.unaryFilter.field);return Gt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=jo(e.unaryFilter.field);return Gt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=jo(e.unaryFilter.field);return Gt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=jo(e.unaryFilter.field);return Gt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(s):s.fieldFilter!==void 0?(function(e){return Gt.create(jo(e.fieldFilter.field),(function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(e){return Ir.create(e.compositeFilter.filters.map((n=>$w(n))),(function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(e.compositeFilter.op))})(s):Le(30097,{filter:s})}function c4(s){return X5[s]}function d4(s){return J5[s]}function h4(s){return Z5[s]}function ko(s){return{fieldPath:s.canonicalString()}}function jo(s){return yn.fromServerFormat(s.fieldPath)}function Bw(s){return s instanceof Gt?(function(e){if(e.op==="=="){if(kb(e.value))return{unaryFilter:{field:ko(e.field),op:"IS_NAN"}};if(Nb(e.value))return{unaryFilter:{field:ko(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(kb(e.value))return{unaryFilter:{field:ko(e.field),op:"IS_NOT_NAN"}};if(Nb(e.value))return{unaryFilter:{field:ko(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ko(e.field),op:d4(e.op),value:e.value}}})(s):s instanceof Ir?(function(e){const n=e.getFilters().map((i=>Bw(i)));return n.length===1?n[0]:{compositeFilter:{op:h4(e.op),filters:n}}})(s):Le(54877,{filter:s})}function p4(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Hw(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wi{constructor(e,n,i,l,c=Ue.min(),p=Ue.min(),g=bn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=g,this.expectedCount=f}withSequenceNumber(e){return new wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class m4{constructor(e){this.yt=e}}function f4(s){const e=l4({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?$m(e,e.limit,"L"):e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class g4{constructor(){this.Cn=new x4}addToCollectionParentIndex(e,n){return this.Cn.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(_i.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(_i.min())}updateCollectionGroup(e,n,i){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class x4{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n]||new en(bt.comparator),c=!l.has(i);return this.index[n]=l.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n];return l&&l.has(i)}getEntries(e){return(this.index[e]||new en(bt.comparator)).toArray()}}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ob={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ww=41943040;class zn{static withCacheSize(e){return new zn(e,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(Ww,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Lo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Lo(0)}static cr(){return new Lo(-1)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Fb="LruGarbageCollector",y4=1048576;function Ub([s,e],[n,i]){const l=Je(s,n);return l===0?Je(e,i):l}class b4{constructor(e){this.Ir=e,this.buffer=new en(Ub),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Ub(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class v4{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ke(Fb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Bo(n)?ke(Fb,"Ignoring IndexedDB error during garbage collection: ",n):await $o(n)}await this.Vr(3e5)}))}}class w4{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return le.resolve(Jd.ce);const i=new b4(n);return this.mr.forEachTarget(e,(l=>i.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>i.Ar(l))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(Ob)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ob):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,l,c,p,g,f,x;const N=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,p=Date.now(),this.nthSequenceNumber(e,l)))).next((w=>(i=w,g=Date.now(),this.removeTargets(e,i,n)))).next((w=>(c=w,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((w=>(x=Date.now(),wo()<=Xe.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-N}ms
	Determined least recently used ${l} in `+(g-p)+`ms
	Removed ${c} targets in `+(f-g)+`ms
	Removed ${w} documents in `+(x-f)+`ms
Total Duration: ${x-N}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:w}))))}}function N4(s,e){return new w4(s,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class k4{constructor(){this.changes=new ka((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?le.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class j4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class S4{constructor(e,n,i,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(i!==null&&iu(i.mutation,l,er.empty(),Nt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Ze()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Ze()){const l=ma();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,i).next((c=>{let p=Jl();return c.forEach(((g,f)=>{p=p.insert(g,f.overlayedDocument)})),p}))))}getOverlayedDocuments(e,n){const i=ma();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Ze())))}populateOverlays(e,n,i){const l=[];return i.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((p,g)=>{n.set(p,g)}))}))}computeViews(e,n,i,l){let c=Rs();const p=su(),g=(function(){return su()})();return n.forEach(((f,x)=>{const N=i.get(x.key);l.has(x.key)&&(N===void 0||N.mutation instanceof Mi)?c=c.insert(x.key,x):N!==void 0?(p.set(x.key,N.mutation.getFieldMask()),iu(N.mutation,x,N.mutation.getFieldMask(),Nt.now())):p.set(x.key,er.empty())})),this.recalculateAndSaveOverlays(e,c).next((f=>(f.forEach(((x,N)=>p.set(x,N))),n.forEach(((x,N)=>g.set(x,new j4(N,p.get(x)??null)))),g)))}recalculateAndSaveOverlays(e,n){const i=su();let l=new It(((p,g)=>p-g)),c=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((p=>{for(const g of p)g.keys().forEach((f=>{const x=n.get(f);if(x===null)return;let N=i.get(f)||er.empty();N=g.applyToLocalView(x,N),i.set(f,N);const w=(l.get(g.batchId)||Ze()).add(f);l=l.insert(g.batchId,w)}))})).next((()=>{const p=[],g=l.getReverseIterator();for(;g.hasNext();){const f=g.getNext(),x=f.key,N=f.value,w=Ew();N.forEach((D=>{if(!c.has(D)){const P=Rw(n.get(D),i.get(D));P!==null&&w.set(D,P),c=c.add(D)}})),p.push(this.documentOverlayCache.saveOverlays(e,x,w))}return le.waitFor(p)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,l){return(function(c){return Ie.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Nw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,l):this.getDocumentsMatchingCollectionQuery(e,n,i,l)}getNextDocuments(e,n,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,l).next((c=>{const p=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,l-c.size):le.resolve(ma());let g=hu,f=c;return p.next((x=>le.forEach(x,((N,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),c.get(N)?le.resolve():this.remoteDocumentCache.getEntry(e,N).next((D=>{f=f.insert(N,D)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,f,x,Ze()))).next((N=>({batchId:g,changes:Cw(N)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ie(n)).next((i=>{let l=Jl();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,l){const c=n.collectionGroup;let p=Jl();return this.indexManager.getCollectionParents(e,c).next((g=>le.forEach(g,(f=>{const x=(function(N,w){return new Cu(w,null,N.explicitOrderBy.slice(),N.filters.slice(),N.limit,N.limitType,N.startAt,N.endAt)})(n,f.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,i,l).next((N=>{N.forEach(((w,D)=>{p=p.insert(w,D)}))}))})).next((()=>p))))}getDocumentsMatchingCollectionQuery(e,n,i,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((p=>(c=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,l)))).next((p=>{c.forEach(((f,x)=>{const N=x.getKey();p.get(N)===null&&(p=p.insert(N,Sn.newInvalidDocument(N)))}));let g=Jl();return p.forEach(((f,x)=>{const N=c.get(f);N!==void 0&&iu(N.mutation,x,er.empty(),Nt.now()),nh(n,x)&&(g=g.insert(f,x))})),g}))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class C4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return le.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:rs(i.createTime)}})(n)),le.resolve()}getNamedQuery(e,n){return le.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:f4(i.bundledQuery),readTime:rs(i.readTime)}})(n)),le.resolve()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class E4{constructor(){this.overlays=new It(Ie.comparator),this.qr=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ma();return le.forEach(n,(l=>this.getOverlay(e,l).next((c=>{c!==null&&i.set(l,c)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((l,c)=>{this.St(e,n,c)})),le.resolve()}removeOverlaysForBatchId(e,n,i){const l=this.qr.get(i);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(i)),le.resolve()}getOverlaysForCollection(e,n,i){const l=ma(),c=n.length+1,p=new Ie(n.child("")),g=this.overlays.getIteratorFrom(p);for(;g.hasNext();){const f=g.getNext().value,x=f.getKey();if(!n.isPrefixOf(x.path))break;x.path.length===c&&f.largestBatchId>i&&l.set(f.getKey(),f)}return le.resolve(l)}getOverlaysForCollectionGroup(e,n,i,l){let c=new It(((x,N)=>x-N));const p=this.overlays.getIterator();for(;p.hasNext();){const x=p.getNext().value;if(x.getKey().getCollectionGroup()===n&&x.largestBatchId>i){let N=c.get(x.largestBatchId);N===null&&(N=ma(),c=c.insert(x.largestBatchId,N)),N.set(x.getKey(),x)}}const g=ma(),f=c.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((x,N)=>g.set(x,N))),!(g.size()>=l)););return le.resolve(g)}St(e,n,i){const l=this.overlays.get(i.key);if(l!==null){const p=this.qr.get(l.largestBatchId).delete(i.key);this.qr.set(l.largestBatchId,p)}this.overlays=this.overlays.insert(i.key,new H5(n,i));let c=this.qr.get(n);c===void 0&&(c=Ze(),this.qr.set(n,c)),this.qr.set(n,c.add(i.key))}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _4{constructor(){this.sessionToken=bn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,le.resolve()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class If{constructor(){this.Qr=new en(un.$r),this.Ur=new en(un.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new un(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new un(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new Ie(new bt([])),i=new un(n,e),l=new un(n,e+1),c=[];return this.Ur.forEachInRange([i,l],(p=>{this.Gr(p),c.push(p.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ie(new bt([])),i=new un(n,e),l=new un(n,e+1);let c=Ze();return this.Ur.forEachInRange([i,l],(p=>{c=c.add(p.key)})),c}containsKey(e){const n=new un(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class un{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ie.comparator(e.key,n.key)||Je(e.Yr,n.Yr)}static Kr(e,n){return Je(e.Yr,n.Yr)||Ie.comparator(e.key,n.key)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class T4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new en(un.$r)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new B5(c,n,i,l);this.mutationQueue.push(p);for(const g of l)this.Zr=this.Zr.add(new un(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return le.resolve(p)}lookupMutationBatch(e,n){return le.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,l=this.ei(i),c=l<0?0:l;return le.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?vf:this.tr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new un(n,0),l=new un(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([i,l],(p=>{const g=this.Xr(p.Yr);c.push(g)})),le.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new en(Je);return n.forEach((l=>{const c=new un(l,0),p=new un(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,p],(g=>{i=i.add(g.Yr)}))})),le.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,l=i.length+1;let c=i;Ie.isDocumentKey(c)||(c=c.child(""));const p=new un(new Ie(c),0);let g=new en(Je);return this.Zr.forEachWhile((f=>{const x=f.key.path;return!!i.isPrefixOf(x)&&(x.length===l&&(g=g.add(f.Yr)),!0)}),p),le.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((i=>{const l=this.Xr(i);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){lt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return le.forEach(n.mutations,(l=>{const c=new un(l.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new un(n,0),l=this.Zr.firstAfterOrEqual(i);return le.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class I4{constructor(e){this.ri=e,this.docs=(function(){return new It(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,l=this.docs.get(i),c=l?l.size:0,p=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:p}),this.size+=p-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return le.resolve(i?i.document.mutableCopy():Sn.newInvalidDocument(n))}getEntries(e,n){let i=Rs();return n.forEach((l=>{const c=this.docs.get(l);i=i.insert(l,c?c.document.mutableCopy():Sn.newInvalidDocument(l))})),le.resolve(i)}getDocumentsMatchingQuery(e,n,i,l){let c=Rs();const p=n.path,g=new Ie(p.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(g);for(;f.hasNext();){const{key:x,value:{document:N}}=f.getNext();if(!p.isPrefixOf(x.path))break;x.path.length>p.length+1||i5(s5(N),i)<=0||(l.has(N.key)||nh(n,N))&&(c=c.insert(N.key,N.mutableCopy()))}return le.resolve(c)}getAllFromCollectionGroup(e,n,i,l){Le(9500)}ii(e,n){return le.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new A4(this)}getSize(e){return le.resolve(this.size)}}class A4 extends k4{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(i)})),le.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class D4{constructor(e){this.persistence=e,this.si=new ka((n=>kf(n)),jf),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.oi=0,this._i=new If,this.targetCount=0,this.ai=Lo.ur()}forEachTarget(e,n){return this.si.forEach(((i,l)=>n(l))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),le.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Lo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.Pr(n),le.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,i){let l=0;const c=[];return this.si.forEach(((p,g)=>{g.sequenceNumber<=n&&i.get(g.targetId)===null&&(this.si.delete(p),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),l++)})),le.waitFor(c).next((()=>l))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return le.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),le.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((p=>{c.push(l.markPotentiallyOrphaned(e,p))})),le.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),le.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return le.resolve(i)}containsKey(e,n){return le.resolve(this._i.containsKey(n))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Gw{constructor(e,n){this.ui={},this.overlays={},this.ci=new Jd(0),this.li=!1,this.li=!0,this.hi=new _4,this.referenceDelegate=e(this),this.Pi=new D4(this),this.indexManager=new g4,this.remoteDocumentCache=(function(i){return new I4(i)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new m4(n),this.Ii=new C4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new E4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new T4(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ke("MemoryPersistence","Starting transaction:",e);const l=new P4(this.ci.next());return this.referenceDelegate.Ei(),i(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,n){return le.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class P4 extends o5{constructor(e){super(),this.currentSequenceNumber=e}}class Af{constructor(e){this.persistence=e,this.Ri=new If,this.Vi=null}static mi(e){return new Af(e)}get fi(){if(this.Vi)return this.Vi;throw Le(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),le.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),le.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.fi,(i=>{const l=Ie.fromPath(i);return this.gi(e,l).next((c=>{c||n.removeEntry(l,Ue.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return le.or([()=>le.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Od{constructor(e,n){this.persistence=e,this.pi=new ka((i=>c5(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=N4(this,n)}static mi(e,n){return new Od(e,n)}Ei(){}di(e){return le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((l=>i+l))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return le.forEach(this.pi,((i,l)=>this.br(e,i,l).next((c=>c?le.resolve():n(l)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(p=>this.br(e,p,n).next((g=>{g||(i++,c.removeEntry(p,Ue.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),le.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=gd(e.data.value)),n}br(e,n,i){return le.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return le.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Df{constructor(e,n,i,l){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=l}static As(e,n){let i=Ze(),l=Ze();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Df(e,n.fromCache,i,l)}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class R4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class M4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Cj()?8:l5(Cn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,l){const c={result:null};return this.ys(e,n).next((p=>{c.result=p})).next((()=>{if(!c.result)return this.ws(e,n,l,i).next((p=>{c.result=p}))})).next((()=>{if(c.result)return;const p=new R4;return this.Ss(e,n,p).next((g=>{if(c.result=g,this.Vs)return this.bs(e,n,p,g.size)}))})).next((()=>c.result))}bs(e,n,i,l){return i.documentReadCount<this.fs?(wo()<=Xe.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",No(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),le.resolve()):(wo()<=Xe.DEBUG&&ke("QueryEngine","Query:",No(n),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.gs*l?(wo()<=Xe.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",No(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ns(n))):le.resolve())}ys(e,n){if(Eb(n))return le.resolve(null);let i=ns(n);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=$m(n,null,"F"),i=ns(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const p=Ze(...c);return this.ps.getDocuments(e,p).next((g=>this.indexManager.getMinOffset(e,i).next((f=>{const x=this.Ds(n,g);return this.Cs(n,x,p,f.readTime)?this.ys(e,$m(n,null,"F")):this.vs(e,x,n,f)}))))})))))}ws(e,n,i,l){return Eb(n)||l.isEqual(Ue.min())?le.resolve(null):this.ps.getDocuments(e,i).next((c=>{const p=this.Ds(n,c);return this.Cs(n,p,i,l)?le.resolve(null):(wo()<=Xe.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),No(n)),this.vs(e,p,n,r5(l,hu)).next((g=>g)))}))}Ds(e,n){let i=new en(jw(e));return n.forEach(((l,c)=>{nh(e,c)&&(i=i.add(c))})),i}Cs(e,n,i,l){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,n,i){return wo()<=Xe.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",No(n)),this.ps.getDocumentsMatchingQuery(e,n,_i.min(),i)}vs(e,n,i,l){return this.ps.getDocumentsMatchingQuery(e,i,l).next((c=>(n.forEach((p=>{c=c.insert(p.key,p)})),c)))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Pf="LocalStore",L4=3e8;class O4{constructor(e,n,i,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new It(Je),this.xs=new ka((c=>kf(c)),jf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new S4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function F4(s,e,n,i){return new O4(s,e,n,i)}async function Kw(s,e){const n=ze(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return n.mutationQueue.getAllMutationBatches(i).next((c=>(l=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((c=>{const p=[],g=[];let f=Ze();for(const x of l){p.push(x.batchId);for(const N of x.mutations)f=f.add(N.key)}for(const x of c){g.push(x.batchId);for(const N of x.mutations)f=f.add(N.key)}return n.localDocuments.getDocuments(i,f).next((x=>({Ls:x,removedBatchIds:p,addedBatchIds:g})))}))}))}function U4(s,e){const n=ze(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,f,x){const N=f.batch,w=N.keys();let D=le.resolve();return w.forEach((P=>{D=D.next((()=>x.getEntry(g,P))).next((z=>{const R=f.docVersions.get(P);lt(R!==null,48541),z.version.compareTo(R)<0&&(N.applyToRemoteDocument(z,f),z.isValidDocument()&&(z.setReadTime(f.commitVersion),x.addEntry(z)))}))})),D.next((()=>p.mutationQueue.removeMutationBatch(g,N)))})(n,i,e,c).next((()=>c.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=Ze();for(let f=0;f<p.mutationResults.length;++f)p.mutationResults[f].transformResults.length>0&&(g=g.add(p.batch.mutations[f].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,l)))}))}function Qw(s){const e=ze(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function V4(s,e){const n=ze(s),i=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const p=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const g=[];e.targetChanges.forEach(((N,w)=>{const D=l.get(w);if(!D)return;g.push(n.Pi.removeMatchingKeys(c,N.removedDocuments,w).next((()=>n.Pi.addMatchingKeys(c,N.addedDocuments,w))));let P=D.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(w)!==null?P=P.withResumeToken(bn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):N.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(N.resumeToken,i)),l=l.insert(w,P),(function(z,R,O){return z.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=L4?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(D,P,N)&&g.push(n.Pi.updateTargetData(c,P))}));let f=Rs(),x=Ze();if(e.documentUpdates.forEach((N=>{e.resolvedLimboDocuments.has(N)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,N))})),g.push(z4(c,p,e.documentUpdates).next((N=>{f=N.ks,x=N.qs}))),!i.isEqual(Ue.min())){const N=n.Pi.getLastRemoteSnapshotVersion(c).next((w=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,i)));g.push(N)}return le.waitFor(g).next((()=>p.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,f,x))).next((()=>f))})).then((c=>(n.Ms=l,c)))}function z4(s,e,n){let i=Ze(),l=Ze();return n.forEach((c=>i=i.add(c))),e.getEntries(s,i).next((c=>{let p=Rs();return n.forEach(((g,f)=>{const x=c.get(g);f.isFoundDocument()!==x.isFoundDocument()&&(l=l.add(g)),f.isNoDocument()&&f.version.isEqual(Ue.min())?(e.removeEntry(g,f.readTime),p=p.insert(g,f)):!x.isValidDocument()||f.version.compareTo(x.version)>0||f.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(f),p=p.insert(g,f)):ke(Pf,"Ignoring outdated watch update for ",g,". Current version:",x.version," Watch version:",f.version)})),{ks:p,qs:l}}))}function q4(s,e){const n=ze(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=vf),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function $4(s,e){const n=ze(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return n.Pi.getTargetData(i,e).next((c=>c?(l=c,le.resolve(l)):n.Pi.allocateTargetId(i).next((p=>(l=new wi(e,p,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=n.Ms.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function Km(s,e,n){const i=ze(s),l=i.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,(p=>i.persistence.referenceDelegate.removeTarget(p,l)))}catch(p){if(!Bo(p))throw p;ke(Pf,`Failed to update sequence numbers for target ${e}: ${p}`)}i.Ms=i.Ms.remove(e),i.xs.delete(l.target)}function Vb(s,e,n){const i=ze(s);let l=Ue.min(),c=Ze();return i.persistence.runTransaction("Execute query","readwrite",(p=>(function(g,f,x){const N=ze(g),w=N.xs.get(x);return w!==void 0?le.resolve(N.Ms.get(w)):N.Pi.getTargetData(f,x)})(i,p,ns(e)).next((g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(p,g.targetId).next((f=>{c=f}))})).next((()=>i.Fs.getDocumentsMatchingQuery(p,e,n?l:Ue.min(),n?c:Ze()))).next((g=>(B4(i,T5(e),g),{documents:g,Qs:c})))))}function B4(s,e,n){let i=s.Os.get(e)||Ue.min();n.forEach(((l,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),s.Os.set(e,i)}class zb{constructor(){this.activeTargetIds=M5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class H4{constructor(){this.Mo=new zb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new zb,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class W4{Oo(e){}shutdown(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const qb="ConnectivityMonitor";class $b{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ke(qb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ke(qb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let hd=null;function Qm(){return hd===null?hd=(function(){return 268435456+Math.round(2147483648*Math.random())})():hd++,"0x"+hd.toString(16)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Nm="RestConnection",G4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class K4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${l}`,this.Wo=this.databaseId.database===Ad?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Go(e,n,i,l,c){const p=Qm(),g=this.zo(e,n.toUriEncodedString());ke(Nm,`Sending RPC '${e}' ${p}:`,g,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,l,c);const{host:x}=new URL(g),N=Vo(x);return this.Jo(e,g,f,i,N).then((w=>(ke(Nm,`Received RPC '${e}' ${p}: `,w),w)),(w=>{throw Do(Nm,`RPC '${e}' ${p} failed with error: `,w,"url: ",g,"request:",i),w}))}Ho(e,n,i,l,c,p){return this.Go(e,n,i,l,c)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+qo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>e[c]=l)),i&&i.headers.forEach(((l,c)=>e[c]=l))}zo(e,n){const i=G4[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Q4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const kn="WebChannelConnection";class Y4 extends K4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,l,c){const p=Qm();return new Promise(((g,f)=>{const x=new Xv;x.setWithCredentials(!0),x.listenOnce(Jv.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case fd.NO_ERROR:const w=x.getResponseJson();ke(kn,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(w)),g(w);break;case fd.TIMEOUT:ke(kn,`RPC '${e}' ${p} timed out`),f(new ve(ae.DEADLINE_EXCEEDED,"Request time out"));break;case fd.HTTP_ERROR:const D=x.getStatus();if(ke(kn,`RPC '${e}' ${p} failed with status:`,D,"response text:",x.getResponseText()),D>0){let P=x.getResponseJson();Array.isArray(P)&&(P=P[0]);const z=P==null?void 0:P.error;if(z&&z.status&&z.message){const R=(function(O){const te=O.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(te)>=0?te:ae.UNKNOWN})(z.status);f(new ve(R,z.message))}else f(new ve(ae.UNKNOWN,"Server responded with status "+x.getStatus()))}else f(new ve(ae.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{l_:e,streamId:p,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{ke(kn,`RPC '${e}' ${p} completed.`)}}));const N=JSON.stringify(l);ke(kn,`RPC '${e}' ${p} sending request:`,l),x.send(n,"POST",N,i,15)}))}T_(e,n,i){const l=Qm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=tw(),g=ew(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(f.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,n,i),f.encodeInitMessageHeaders=!0;const N=c.join("");ke(kn,`Creating RPC '${e}' stream ${l}: ${N}`,f);const w=p.createWebChannel(N,f);this.I_(w);let D=!1,P=!1;const z=new Q4({Yo:O=>{P?ke(kn,`Not sending because RPC '${e}' stream ${l} is closed:`,O):(D||(ke(kn,`Opening RPC '${e}' stream ${l} transport.`),w.open(),D=!0),ke(kn,`RPC '${e}' stream ${l} sending:`,O),w.send(O))},Zo:()=>w.close()}),R=(O,te,ee)=>{O.listen(te,(ue=>{try{ee(ue)}catch(re){setTimeout((()=>{throw re}),0)}}))};return R(w,Xl.EventType.OPEN,(()=>{P||(ke(kn,`RPC '${e}' stream ${l} transport opened.`),z.o_())})),R(w,Xl.EventType.CLOSE,(()=>{P||(P=!0,ke(kn,`RPC '${e}' stream ${l} transport closed`),z.a_(),this.E_(w))})),R(w,Xl.EventType.ERROR,(O=>{P||(P=!0,Do(kn,`RPC '${e}' stream ${l} transport errored. Name:`,O.name,"Message:",O.message),z.a_(new ve(ae.UNAVAILABLE,"The operation could not be completed")))})),R(w,Xl.EventType.MESSAGE,(O=>{var te;if(!P){const ee=O.data[0];lt(!!ee,16349);const ue=ee,re=(ue==null?void 0:ue.error)||((te=ue[0])==null?void 0:te.error);if(re){ke(kn,`RPC '${e}' stream ${l} received error:`,re);const $=re.status;let X=(function(k){const S=Wt[k];if(S!==void 0)return Lw(S)})($),T=re.message;X===void 0&&(X=ae.INTERNAL,T="Unknown error status: "+$+" with message "+re.message),P=!0,z.a_(new ve(X,T)),w.close()}else ke(kn,`RPC '${e}' stream ${l} received:`,ee),z.u_(ee)}})),R(g,Zv.STAT_EVENT,(O=>{O.stat===Lm.PROXY?ke(kn,`RPC '${e}' stream ${l} detected buffering proxy`):O.stat===Lm.NOPROXY&&ke(kn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{z.__()}),0),z}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function km(){return typeof document<"u"?document:null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oh(s){return new e4(s,!0)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yw{constructor(e,n,i=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-i);l>0&&ke("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Bb="PersistentStream";class Xw{constructor(e,n,i,l,c,p,g,f){this.Mi=e,this.S_=i,this.b_=l,this.connection=c,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=g,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Yw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?(Ps(n.toString()),Ps("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===n&&this.G_(i,l)}),(i=>{e((()=>{const l=new ve(ae.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ke(Bb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ke(Bb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class X4 extends Xw{constructor(e,n,i,l,c,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,l,p),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=r4(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ue.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ue.min():c.readTime?rs(c.readTime):Ue.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Gm(this.serializer),n.addTarget=(function(l,c){let p;const g=c.target;if(p=zm(g)?{documents:a4(l,g)}:{query:o4(l,g).ft},p.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){p.resumeToken=Uw(l,c.resumeToken);const f=Bm(l,c.expectedCount);f!==null&&(p.expectedCount=f)}else if(c.snapshotVersion.compareTo(Ue.min())>0){p.readTime=Ld(l,c.snapshotVersion.toTimestamp());const f=Bm(l,c.expectedCount);f!==null&&(p.expectedCount=f)}return p})(this.serializer,e);const i=u4(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Gm(this.serializer),n.removeTarget=e,this.q_(n)}}class J4 extends Xw{constructor(e,n,i,l,c,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,l,p),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=i4(e.writeResults,e.commitTime),i=rs(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Gm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>s4(this.serializer,i)))};this.q_(n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Z4{}class eC extends Z4{constructor(e,n,i,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ve(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,p])=>this.connection.Go(e,Hm(n,i),l,c,p))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(ae.UNKNOWN,c.toString())}))}Ho(e,n,i,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([p,g])=>this.connection.Ho(e,Hm(n,i),l,p,g,c))).catch((p=>{throw p.name==="FirebaseError"?(p.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new ve(ae.UNKNOWN,p.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class tC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ps(n),this.aa=!1):ke("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const va="RemoteStore";class nC{constructor(e,n,i,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((p=>{i.enqueueAndForget((async()=>{ja(this)&&(ke(va,"Restarting streams for network reachability change."),await(async function(g){const f=ze(g);f.Ea.add(4),await Tu(f),f.Ra.set("Unknown"),f.Ea.delete(4),await lh(f)})(this))}))})),this.Ra=new tC(i,l)}}async function lh(s){if(ja(s))for(const e of s.da)await e(!0)}async function Tu(s){for(const e of s.da)await e(!1)}function Jw(s,e){const n=ze(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Of(n)?Lf(n):Ho(n).O_()&&Mf(n,e))}function Rf(s,e){const n=ze(s),i=Ho(n);n.Ia.delete(e),i.O_()&&Zw(n,e),n.Ia.size===0&&(i.O_()?i.L_():ja(n)&&n.Ra.set("Unknown"))}function Mf(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ho(s).Y_(e)}function Zw(s,e){s.Va.Ue(e),Ho(s).Z_(e)}function Lf(s){s.Va=new Y5({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Ho(s).start(),s.Ra.ua()}function Of(s){return ja(s)&&!Ho(s).x_()&&s.Ia.size>0}function ja(s){return ze(s).Ea.size===0}function e1(s){s.Va=void 0}async function rC(s){s.Ra.set("Online")}async function sC(s){s.Ia.forEach(((e,n)=>{Mf(s,e)}))}async function iC(s,e){e1(s),Of(s)?(s.Ra.ha(e),Lf(s)):s.Ra.set("Unknown")}async function aC(s,e,n){if(s.Ra.set("Online"),e instanceof Fw&&e.state===2&&e.cause)try{await(async function(i,l){const c=l.cause;for(const p of l.targetIds)i.Ia.has(p)&&(await i.remoteSyncer.rejectListen(p,c),i.Ia.delete(p),i.Va.removeTarget(p))})(s,e)}catch(i){ke(va,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Fd(s,i)}else if(e instanceof bd?s.Va.Ze(e):e instanceof Ow?s.Va.st(e):s.Va.tt(e),!n.isEqual(Ue.min()))try{const i=await Qw(s.localStore);n.compareTo(i)>=0&&await(function(l,c){const p=l.Va.Tt(c);return p.targetChanges.forEach(((g,f)=>{if(g.resumeToken.approximateByteSize()>0){const x=l.Ia.get(f);x&&l.Ia.set(f,x.withResumeToken(g.resumeToken,c))}})),p.targetMismatches.forEach(((g,f)=>{const x=l.Ia.get(g);if(!x)return;l.Ia.set(g,x.withResumeToken(bn.EMPTY_BYTE_STRING,x.snapshotVersion)),Zw(l,g);const N=new wi(x.target,g,f,x.sequenceNumber);Mf(l,N)})),l.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(i){ke(va,"Failed to raise snapshot:",i),await Fd(s,i)}}async function Fd(s,e,n){if(!Bo(e))throw e;s.Ea.add(1),await Tu(s),s.Ra.set("Offline"),n||(n=()=>Qw(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ke(va,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await lh(s)}))}function t1(s,e){return e().catch((n=>Fd(s,n,e)))}async function uh(s){const e=ze(s),n=Di(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vf;for(;oC(e);)try{const l=await q4(e.localStore,i);if(l===null){e.Ta.length===0&&n.L_();break}i=l.batchId,lC(e,l)}catch(l){await Fd(e,l)}n1(e)&&r1(e)}function oC(s){return ja(s)&&s.Ta.length<10}function lC(s,e){s.Ta.push(e);const n=Di(s);n.O_()&&n.X_&&n.ea(e.mutations)}function n1(s){return ja(s)&&!Di(s).x_()&&s.Ta.length>0}function r1(s){Di(s).start()}async function uC(s){Di(s).ra()}async function cC(s){const e=Di(s);for(const n of s.Ta)e.ea(n.mutations)}async function dC(s,e,n){const i=s.Ta.shift(),l=Ef.from(i,e,n);await t1(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await uh(s)}async function hC(s,e){e&&Di(s).X_&&await(async function(n,i){if((function(l){return G5(l)&&l!==ae.ABORTED})(i.code)){const l=n.Ta.shift();Di(n).B_(),await t1(n,(()=>n.remoteSyncer.rejectFailedWrite(l.batchId,i))),await uh(n)}})(s,e),n1(s)&&r1(s)}async function Hb(s,e){const n=ze(s);n.asyncQueue.verifyOperationInProgress(),ke(va,"RemoteStore received new credentials");const i=ja(n);n.Ea.add(3),await Tu(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await lh(n)}async function pC(s,e){const n=ze(s);e?(n.Ea.delete(2),await lh(n)):e||(n.Ea.add(2),await Tu(n),n.Ra.set("Unknown"))}function Ho(s){return s.ma||(s.ma=(function(e,n,i){const l=ze(e);return l.sa(),new X4(n,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)})(s.datastore,s.asyncQueue,{Xo:rC.bind(null,s),t_:sC.bind(null,s),r_:iC.bind(null,s),H_:aC.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Of(s)?Lf(s):s.Ra.set("Unknown")):(await s.ma.stop(),e1(s))}))),s.ma}function Di(s){return s.fa||(s.fa=(function(e,n,i){const l=ze(e);return l.sa(),new J4(n,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:uC.bind(null,s),r_:hC.bind(null,s),ta:cC.bind(null,s),na:dC.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await uh(s)):(await s.fa.stop(),s.Ta.length>0&&(ke(va,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ff{constructor(e,n,i,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=l,this.removalCallback=c,this.deferred=new Ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((p=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,l,c){const p=Date.now()+i,g=new Ff(e,n,p,l,c);return g.start(i),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uf(s,e){if(Ps("AsyncQueue",`${e}: ${s}`),Bo(s))return new ve(ae.UNAVAILABLE,`${e}: ${s}`);throw s}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Co{static emptySet(e){return new Co(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ie.comparator(n.key,i.key):(n,i)=>Ie.comparator(n.key,i.key),this.keyedMap=Jl(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=i.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Co;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Wb{constructor(){this.ga=new It(Ie.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Le(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Oo{constructor(e,n,i,l,c,p,g,f,x){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=c,this.fromCache=p,this.syncStateChanged=g,this.excludesMetadataChanges=f,this.hasCachedResults=x}static fromInitialDocuments(e,n,i,l,c){const p=[];return n.forEach((g=>{p.push({type:0,doc:g})})),new Oo(e,n,Co.emptySet(n),p,i,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&th(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==i[l].type||!n[l].doc.isEqual(i[l].doc))return!1;return!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class fC{constructor(){this.queries=Gb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,n){const i=ze(e),l=i.queries;i.queries=Gb(),l.forEach(((c,p)=>{for(const g of p.Sa)g.onError(n)}))})(this,new ve(ae.ABORTED,"Firestore shutting down"))}}function Gb(){return new ka((s=>kw(s)),th)}async function s1(s,e){const n=ze(s);let i=3;const l=e.query;let c=n.queries.get(l);c?!c.ba()&&e.Da()&&(i=2):(c=new mC,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(p){const g=Uf(p,`Initialization of query '${No(e.query)}' failed`);return void e.onError(g)}n.queries.set(l,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Vf(n)}async function i1(s,e){const n=ze(s),i=e.query;let l=3;const c=n.queries.get(i);if(c){const p=c.Sa.indexOf(e);p>=0&&(c.Sa.splice(p,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function gC(s,e){const n=ze(s);let i=!1;for(const l of e){const c=l.query,p=n.queries.get(c);if(p){for(const g of p.Sa)g.Fa(l)&&(i=!0);p.wa=l}}i&&Vf(n)}function xC(s,e,n){const i=ze(s),l=i.queries.get(e);if(l)for(const c of l.Sa)c.onError(n);i.queries.delete(e)}function Vf(s){s.Ca.forEach((e=>{e.next()}))}var Ym,Kb;(Kb=Ym||(Ym={})).Ma="default",Kb.Cache="cache";class a1{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new Oo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ym.Cache}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class o1{constructor(e){this.key=e}}class l1{constructor(e){this.key=e}}class yC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=jw(e),this.tu=new Co(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Wb,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,p=l,g=!1;const f=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,x=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((N,w)=>{const D=l.get(N),P=nh(this.query,w)?w:null,z=!!D&&this.mutatedKeys.has(D.key),R=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let O=!1;D&&P?D.data.isEqual(P.data)?z!==R&&(i.track({type:3,doc:P}),O=!0):this.su(D,P)||(i.track({type:2,doc:P}),O=!0,(f&&this.eu(P,f)>0||x&&this.eu(P,x)<0)&&(g=!0)):!D&&P?(i.track({type:0,doc:P}),O=!0):D&&!P&&(i.track({type:1,doc:D}),O=!0,(f||x)&&(g=!0)),O&&(P?(p=p.add(P),c=R?c.add(N):c.delete(N)):(p=p.delete(N),c=c.delete(N)))})),this.query.limit!==null)for(;p.size>this.query.limit;){const N=this.query.limitType==="F"?p.last():p.first();p=p.delete(N.key),c=c.delete(N.key),i.track({type:1,doc:N})}return{tu:p,iu:i,Cs:g,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const p=e.iu.ya();p.sort(((N,w)=>(function(D,P){const z=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{Rt:R})}};return z(D)-z(P)})(N.type,w.type)||this.eu(N.doc,w.doc))),this.ou(i),l=l??!1;const g=n&&!l?this._u():[],f=this.Xa.size===0&&this.current&&!l?1:0,x=f!==this.Za;return this.Za=f,p.length!==0||x?{snapshot:new Oo(this.query,e.tu,c,p,e.mutatedKeys,f===0,x,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Wb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new l1(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new o1(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Oo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const zf="SyncEngine";class bC{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class vC{constructor(e){this.key=e,this.hu=!1}}class wC{constructor(e,n,i,l,c,p){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=p,this.Pu={},this.Tu=new ka((g=>kw(g)),th),this.Iu=new Map,this.Eu=new Set,this.du=new It(Ie.comparator),this.Au=new Map,this.Ru=new If,this.Vu={},this.mu=new Map,this.fu=Lo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function NC(s,e,n=!0){const i=m1(s);let l;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await u1(i,e,n,!0),l}async function kC(s,e){const n=m1(s);await u1(n,e,!0,!1)}async function u1(s,e,n,i){const l=await $4(s.localStore,ns(e)),c=l.targetId,p=s.sharedClientState.addLocalQueryTarget(c,n);let g;return i&&(g=await jC(s,e,c,p==="current",l.resumeToken)),s.isPrimaryClient&&n&&Jw(s.remoteStore,l),g}async function jC(s,e,n,i,l){s.pu=(w,D,P)=>(async function(z,R,O,te){let ee=R.view.ru(O);ee.Cs&&(ee=await Vb(z.localStore,R.query,!1).then((({documents:X})=>R.view.ru(X,ee))));const ue=te&&te.targetChanges.get(R.targetId),re=te&&te.targetMismatches.get(R.targetId)!=null,$=R.view.applyChanges(ee,z.isPrimaryClient,ue,re);return Yb(z,R.targetId,$.au),$.snapshot})(s,w,D,P);const c=await Vb(s.localStore,e,!0),p=new yC(e,c.Qs),g=p.ru(c.documents),f=_u.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",l),x=p.applyChanges(g,s.isPrimaryClient,f);Yb(s,n,x.au);const N=new bC(e,n,p);return s.Tu.set(e,N),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),x.snapshot}async function SC(s,e,n){const i=ze(s),l=i.Tu.get(e),c=i.Iu.get(l.targetId);if(c.length>1)return i.Iu.set(l.targetId,c.filter((p=>!th(p,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await Km(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),n&&Rf(i.remoteStore,l.targetId),Xm(i,l.targetId)})).catch($o)):(Xm(i,l.targetId),await Km(i.localStore,l.targetId,!0))}async function CC(s,e){const n=ze(s),i=n.Tu.get(e),l=n.Iu.get(i.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Rf(n.remoteStore,i.targetId))}async function EC(s,e,n){const i=RC(s);try{const l=await(function(c,p){const g=ze(c),f=Nt.now(),x=p.reduce(((D,P)=>D.add(P.key)),Ze());let N,w;return g.persistence.runTransaction("Locally write mutations","readwrite",(D=>{let P=Rs(),z=Ze();return g.Ns.getEntries(D,x).next((R=>{P=R,P.forEach(((O,te)=>{te.isValidDocument()||(z=z.add(O))}))})).next((()=>g.localDocuments.getOverlayedDocuments(D,P))).next((R=>{N=R;const O=[];for(const te of p){const ee=q5(te,N.get(te.key).overlayedDocument);ee!=null&&O.push(new Mi(te.key,ee,fw(ee.value.mapValue),Pn.exists(!0)))}return g.mutationQueue.addMutationBatch(D,f,O,p)})).next((R=>{w=R;const O=R.applyToLocalDocumentSet(N,z);return g.documentOverlayCache.saveOverlays(D,R.batchId,O)}))})).then((()=>({batchId:w.batchId,changes:Cw(N)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(c,p,g){let f=c.Vu[c.currentUser.toKey()];f||(f=new It(Je)),f=f.insert(p,g),c.Vu[c.currentUser.toKey()]=f})(i,l.batchId,n),await Iu(i,l.changes),await uh(i.remoteStore)}catch(l){const c=Uf(l,"Failed to persist write");n.reject(c)}}async function c1(s,e){const n=ze(s);try{const i=await V4(n.localStore,e);e.targetChanges.forEach(((l,c)=>{const p=n.Au.get(c);p&&(lt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?p.hu=!0:l.modifiedDocuments.size>0?lt(p.hu,14607):l.removedDocuments.size>0&&(lt(p.hu,42227),p.hu=!1))})),await Iu(n,i,e)}catch(i){await $o(i)}}function Qb(s,e,n){const i=ze(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const l=[];i.Tu.forEach(((c,p)=>{const g=p.view.va(e);g.snapshot&&l.push(g.snapshot)})),(function(c,p){const g=ze(c);g.onlineState=p;let f=!1;g.queries.forEach(((x,N)=>{for(const w of N.Sa)w.va(p)&&(f=!0)})),f&&Vf(g)})(i.eventManager,e),l.length&&i.Pu.H_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function _C(s,e,n){const i=ze(s);i.sharedClientState.updateQueryState(e,"rejected",n);const l=i.Au.get(e),c=l&&l.key;if(c){let p=new It(Ie.comparator);p=p.insert(c,Sn.newNoDocument(c,Ue.min()));const g=Ze().add(c),f=new ah(Ue.min(),new Map,new It(Je),p,g);await c1(i,f),i.du=i.du.remove(c),i.Au.delete(e),qf(i)}else await Km(i.localStore,e,!1).then((()=>Xm(i,e,n))).catch($o)}async function TC(s,e){const n=ze(s),i=e.batch.batchId;try{const l=await U4(n.localStore,e);h1(n,i,null),d1(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Iu(n,l)}catch(l){await $o(l)}}async function IC(s,e,n){const i=ze(s);try{const l=await(function(c,p){const g=ze(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let x;return g.mutationQueue.lookupMutationBatch(f,p).next((N=>(lt(N!==null,37113),x=N.keys(),g.mutationQueue.removeMutationBatch(f,N)))).next((()=>g.mutationQueue.performConsistencyCheck(f))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(f,x,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,x))).next((()=>g.localDocuments.getDocuments(f,x)))}))})(i.localStore,e);h1(i,e,n),d1(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Iu(i,l)}catch(l){await $o(l)}}function d1(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function h1(s,e,n){const i=ze(s);let l=i.Vu[i.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),i.Vu[i.currentUser.toKey()]=l}}function Xm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((i=>{s.Ru.containsKey(i)||p1(s,i)}))}function p1(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(Rf(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),qf(s))}function Yb(s,e,n){for(const i of n)i instanceof o1?(s.Ru.addReference(i.key,e),AC(s,i)):i instanceof l1?(ke(zf,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||p1(s,i.key)):Le(19791,{wu:i})}function AC(s,e){const n=e.key,i=n.path.canonicalString();s.du.get(n)||s.Eu.has(i)||(ke(zf,"New document in limbo: "+n),s.Eu.add(i),qf(s))}function qf(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Ie(bt.fromString(e)),i=s.fu.next();s.Au.set(i,new vC(n)),s.du=s.du.insert(n,i),Jw(s.remoteStore,new wi(ns(Sf(n.path)),i,"TargetPurposeLimboResolution",Jd.ce))}}async function Iu(s,e,n){const i=ze(s),l=[],c=[],p=[];i.Tu.isEmpty()||(i.Tu.forEach(((g,f)=>{p.push(i.pu(f,e,n).then((x=>{var N;if((x||n)&&i.isPrimaryClient){const w=x?!x.fromCache:(N=n==null?void 0:n.targetChanges.get(f.targetId))==null?void 0:N.current;i.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(x){l.push(x);const w=Df.As(f.targetId,x);c.push(w)}})))})),await Promise.all(p),i.Pu.H_(l),await(async function(g,f){const x=ze(g);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(N=>le.forEach(f,(w=>le.forEach(w.Es,(D=>x.persistence.referenceDelegate.addReference(N,w.targetId,D))).next((()=>le.forEach(w.ds,(D=>x.persistence.referenceDelegate.removeReference(N,w.targetId,D)))))))))}catch(N){if(!Bo(N))throw N;ke(Pf,"Failed to update sequence numbers: "+N)}for(const N of f){const w=N.targetId;if(!N.fromCache){const D=x.Ms.get(w),P=D.snapshotVersion,z=D.withLastLimboFreeSnapshotVersion(P);x.Ms=x.Ms.insert(w,z)}}})(i.localStore,c))}async function DC(s,e){const n=ze(s);if(!n.currentUser.isEqual(e)){ke(zf,"User change. New user:",e.toKey());const i=await Kw(n.localStore,e);n.currentUser=e,(function(l,c){l.mu.forEach((p=>{p.forEach((g=>{g.reject(new ve(ae.CANCELLED,c))}))})),l.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Iu(n,i.Ls)}}function PC(s,e){const n=ze(s),i=n.Au.get(e);if(i&&i.hu)return Ze().add(i.key);{let l=Ze();const c=n.Iu.get(e);if(!c)return l;for(const p of c){const g=n.Tu.get(p);l=l.unionWith(g.view.nu)}return l}}function m1(s){const e=ze(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=c1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_C.bind(null,e),e.Pu.H_=gC.bind(null,e.eventManager),e.Pu.yu=xC.bind(null,e.eventManager),e}function RC(s){const e=ze(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IC.bind(null,e),e}class Ud{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=oh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return F4(this.persistence,new M4,e.initialUser,this.serializer)}Cu(e){return new Gw(Af.mi,this.serializer)}Du(e){return new H4}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ud.provider={build:()=>new Ud};class MC extends Ud{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){lt(this.persistence.referenceDelegate instanceof Od,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new v4(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new Gw((i=>Od.mi(i,n)),this.serializer)}}class Jm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Qb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=DC.bind(null,this.syncEngine),await pC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new fC})()}createDatastore(e){const n=oh(e.databaseInfo.databaseId),i=(function(l){return new Y4(l)})(e.databaseInfo);return(function(l,c,p,g){return new eC(l,c,p,g)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(n,i,l,c,p){return new nC(n,i,l,c,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>Qb(this.syncEngine,n,0)),(function(){return $b.v()?new $b:new W4})())}createSyncEngine(e,n){return(function(i,l,c,p,g,f,x){const N=new wC(i,l,c,p,g,f);return x&&(N.gu=!0),N})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const l=ze(i);ke(va,"RemoteStore shutting down."),l.Ea.add(5),await Tu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Jm.provider={build:()=>new Jm};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class f1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ps("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Pi="FirestoreClient";class LC{constructor(e,n,i,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=l,this.user=jn.UNAUTHENTICATED,this.clientId=bf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async p=>{ke(Pi,"Received user=",p.uid),await this.authCredentialListener(p),this.user=p})),this.appCheckCredentials.start(i,(p=>(ke(Pi,"Received new app check token=",p),this.appCheckCredentialListener(p,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Uf(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function jm(s,e){s.asyncQueue.verifyOperationInProgress(),ke(Pi,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async l=>{i.isEqual(l)||(await Kw(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Xb(s,e){s.asyncQueue.verifyOperationInProgress();const n=await OC(s);ke(Pi,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>Hb(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,l)=>Hb(e.remoteStore,l))),s._onlineComponents=e}async function OC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ke(Pi,"Using user provided OfflineComponentProvider");try{await jm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ae.FAILED_PRECONDITION||i.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Do("Error using user provided cache. Falling back to memory cache: "+n),await jm(s,new Ud)}}else ke(Pi,"Using default OfflineComponentProvider"),await jm(s,new MC(void 0));return s._offlineComponents}async function g1(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ke(Pi,"Using user provided OnlineComponentProvider"),await Xb(s,s._uninitializedComponentsProvider._online)):(ke(Pi,"Using default OnlineComponentProvider"),await Xb(s,new Jm))),s._onlineComponents}function FC(s){return g1(s).then((e=>e.syncEngine))}async function Zm(s){const e=await g1(s),n=e.eventManager;return n.onListen=NC.bind(null,e.syncEngine),n.onUnlisten=SC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=CC.bind(null,e.syncEngine),n}function UC(s,e,n={}){const i=new Ci;return s.asyncQueue.enqueueAndForget((async()=>(function(l,c,p,g,f){const x=new f1({next:w=>{x.Nu(),c.enqueueAndForget((()=>i1(l,N))),w.fromCache&&g.source==="server"?f.reject(new ve(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(w)},error:w=>f.reject(w)}),N=new a1(p,x,{includeMetadataChanges:!0,qa:!0});return s1(l,N)})(await Zm(s),s.asyncQueue,e,n,i))),i.promise}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function x1(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Jb=new Map;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const y1="firestore.googleapis.com",Zb=!0;class ev{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=y1,this.ssl=Zb}else this.host=e.host,this.ssl=e.ssl??Zb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ww;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<y4)throw new ve(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}n5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x1(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ve(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ve(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ve(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ch{constructor(e,n,i,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ev({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ev(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new WS;switch(n.type){case"firstParty":return new YS(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ve(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const n=Jb.get(e);n&&(ke("ComponentProvider","Removing Datastore"),Jb.delete(e),n.terminate())})(this),Promise.resolve()}}function VC(s,e,n,i={}){var l;s=tr(s,ch);const c=Vo(e),p=s._getSettings(),g={...p,emulatorOptions:s._getEmulatorOptions()},f=`${e}:${n}`;c&&(qv(`https://${f}`),$v("Firestore",!0)),p.host!==y1&&p.host!==f&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const x={...p,host:f,ssl:c,emulatorOptions:i};if(!xa(x,g)&&(s._setSettings(x),i.mockUserToken)){let N,w;if(typeof i.mockUserToken=="string")N=i.mockUserToken,w=jn.MOCK_USER;else{N=xj(i.mockUserToken,(l=s._app)==null?void 0:l.options.projectId);const D=i.mockUserToken.sub||i.mockUserToken.user_id;if(!D)throw new ve(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new jn(D)}s._authCredentials=new GS(new rw(N,w))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Sa{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Sa(this.firestore,e,this._query)}}class Ft{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ft(this.firestore,e,this._key)}toJSON(){return{type:Ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Su(n,Ft._jsonSchema))return new Ft(e,i||null,new Ie(bt.fromString(n.referencePath)))}}Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:Kt("string",Ft._jsonSchemaVersion),referencePath:Kt("string")};class Ei extends Sa{constructor(e,n,i){super(e,n,Sf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new Ie(e))}withConverter(e){return new Ei(this.firestore,e,this._path)}}function nt(s,e,...n){if(s=Ut(s),sw("collection","path",e),s instanceof ch){const i=bt.fromString(e,...n);return pb(i),new Ei(s,null,i)}{if(!(s instanceof Ft||s instanceof Ei))throw new ve(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(bt.fromString(e,...n));return pb(i),new Ei(s.firestore,null,i)}}function ot(s,e,...n){if(s=Ut(s),arguments.length===1&&(e=bf.newId()),sw("doc","path",e),s instanceof ch){const i=bt.fromString(e,...n);return hb(i),new Ft(s,null,new Ie(i))}{if(!(s instanceof Ft||s instanceof Ei))throw new ve(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(bt.fromString(e,...n));return hb(i),new Ft(s.firestore,s instanceof Ei?s.converter:null,new Ie(i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const tv="AsyncQueue";class nv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Yw(this,"async_queue_retry"),this._c=()=>{const i=km();i&&ke(tv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=km();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=km();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ci;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Bo(e))throw e;ke(tv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ps("INTERNAL UNHANDLED ERROR: ",rv(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=Ff.createAndSchedule(this,e,n,i,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Le(47125,{Pc:rv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function rv(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sv(s){return(function(e,n){if(typeof e!="object"||e===null)return!1;const i=e;for(const l of n)if(l in i&&typeof i[l]=="function")return!0;return!1})(s,["next","error","complete"])}class Ms extends ch{constructor(e,n,i,l){super(e,n,i,l),this.type="firestore",this._queue=new nv,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nv(e),this._firestoreClient=void 0,await e}}}function zC(s,e){const n=typeof s=="object"?s:Gv(),i=typeof s=="string"?s:Ad,l=xf(n,"firestore").getImmediate({identifier:i});if(!l._initialized){const c=fj("firestore");c&&VC(l,...c)}return l}function dh(s){if(s._terminated)throw new ve(ae.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||qC(s),s._firestoreClient}function qC(s){var e,n,i;const l=s._freezeSettings(),c=(function(p,g,f,x){return new p5(p,g,f,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,x1(x.experimentalLongPollingOptions),x.useFetchStreams,x.isUsingEmulator)})(s._databaseId,((e=s._app)==null?void 0:e.options.appId)||"",s._persistenceKey,l);s._componentsProvider||(n=l.localCache)!=null&&n._offlineComponentProvider&&(i=l.localCache)!=null&&i._onlineComponentProvider&&(s._componentsProvider={_offline:l.localCache._offlineComponentProvider,_online:l.localCache._onlineComponentProvider}),s._firestoreClient=new LC(s._authCredentials,s._appCheckCredentials,s._queue,c,s._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(s._componentsProvider))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yr(bn.fromBase64String(e))}catch(n){throw new ve(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yr(bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:yr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Su(e,yr._jsonSchema))return yr.fromBase64String(e.bytes)}}yr._jsonSchemaVersion="firestore/bytes/1.0",yr._jsonSchema={type:Kt("string",yr._jsonSchemaVersion),bytes:Kt("string")};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Au{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ve(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hh{constructor(e){this._methodName=e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ss{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ve(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ve(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ss._jsonSchemaVersion}}static fromJSON(e){if(Su(e,ss._jsonSchema))return new ss(e.latitude,e.longitude)}}ss._jsonSchemaVersion="firestore/geoPoint/1.0",ss._jsonSchema={type:Kt("string",ss._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class is{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let l=0;l<n.length;++l)if(n[l]!==i[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:is._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Su(e,is._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new is(e.vectorValues);throw new ve(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}is._jsonSchemaVersion="firestore/vectorValue/1.0",is._jsonSchema={type:Kt("string",is._jsonSchemaVersion),vectorValues:Kt("object")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $C=/^__.*__$/;class BC{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Mi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Eu(e,this.data,n,this.fieldTransforms)}}class b1{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Mi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function v1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{Ac:s})}}class $f{constructor(e,n,i,l,c,p){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new $f({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var n;const i=(n=this.path)==null?void 0:n.child(e),l=this.Vc({path:i,fc:!1});return l.gc(e),l}yc(e){var n;const i=(n=this.path)==null?void 0:n.child(e),l=this.Vc({path:i,fc:!1});return l.Rc(),l}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(v1(this.Ac)&&$C.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class HC{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||oh(e)}Cc(e,n,i,l=!1){return new $f({Ac:e,methodName:n,Dc:i,path:yn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Du(s){const e=s._freezeSettings(),n=oh(s._databaseId);return new HC(s._databaseId,!!e.ignoreUndefinedProperties,n)}function Bf(s,e,n,i,l,c={}){const p=s.Cc(c.merge||c.mergeFields?2:0,e,n,l);Wf("Data must be an object, but it was:",p,i);const g=k1(i,p);let f,x;if(c.merge)f=new er(p.fieldMask),x=p.fieldTransforms;else if(c.mergeFields){const N=[];for(const w of c.mergeFields){const D=ef(e,w,n);if(!p.contains(D))throw new ve(ae.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);S1(N,D)||N.push(D)}f=new er(N),x=p.fieldTransforms.filter((w=>f.covers(w.field)))}else f=null,x=p.fieldTransforms;return new BC(new qn(g),f,x)}class ph extends hh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ph}}class Hf extends hh{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new yu(e.serializer,Tw(e.serializer,this.Fc));return new F5(e.path,n)}isEqual(e){return e instanceof Hf&&this.Fc===e.Fc}}function w1(s,e,n,i){const l=s.Cc(1,e,n);Wf("Data must be an object, but it was:",l,i);const c=[],p=qn.empty();Ri(i,((f,x)=>{const N=Gf(e,f,n);x=Ut(x);const w=l.yc(N);if(x instanceof ph)c.push(N);else{const D=Pu(x,w);D!=null&&(c.push(N),p.set(N,D))}}));const g=new er(c);return new b1(p,g,l.fieldTransforms)}function N1(s,e,n,i,l,c){const p=s.Cc(1,e,n),g=[ef(e,i,n)],f=[l];if(c.length%2!=0)throw new ve(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<c.length;D+=2)g.push(ef(e,c[D])),f.push(c[D+1]);const x=[],N=qn.empty();for(let D=g.length-1;D>=0;--D)if(!S1(x,g[D])){const P=g[D];let z=f[D];z=Ut(z);const R=p.yc(P);if(z instanceof ph)x.push(P);else{const O=Pu(z,R);O!=null&&(x.push(P),N.set(P,O))}}const w=new er(x);return new b1(N,w,p.fieldTransforms)}function WC(s,e,n,i=!1){return Pu(n,s.Cc(i?4:3,e))}function Pu(s,e){if(j1(s=Ut(s)))return Wf("Unsupported field value:",e,s),k1(s,e);if(s instanceof hh)return(function(n,i){if(!v1(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const l=n._toFieldTransform(i);l&&i.fieldTransforms.push(l)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,i){const l=[];let c=0;for(const p of n){let g=Pu(p,i.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}})(s,e)}return(function(n,i){if((n=Ut(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Tw(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const l=Nt.fromDate(n);return{timestampValue:Ld(i.serializer,l)}}if(n instanceof Nt){const l=new Nt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ld(i.serializer,l)}}if(n instanceof ss)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof yr)return{bytesValue:Uw(i.serializer,n._byteString)};if(n instanceof Ft){const l=i.databaseId,c=n.firestore._databaseId;if(!c.isEqual(l))throw i.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Tf(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof is)return(function(l,c){return{mapValue:{fields:{[pw]:{stringValue:mw},[Dd]:{arrayValue:{values:l.toArray().map((p=>{if(typeof p!="number")throw c.Sc("VectorValues must only contain numeric values.");return Cf(c.serializer,p)}))}}}}}})(n,i);throw i.Sc(`Unsupported field value: ${Xd(n)}`)})(s,e)}function k1(s,e){const n={};return ow(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ri(s,((i,l)=>{const c=Pu(l,e.mc(i));c!=null&&(n[i]=c)})),{mapValue:{fields:n}}}function j1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Nt||s instanceof ss||s instanceof yr||s instanceof Ft||s instanceof hh||s instanceof is)}function Wf(s,e,n){if(!j1(n)||!iw(n)){const i=Xd(n);throw i==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+i)}}function ef(s,e,n){if((e=Ut(e))instanceof Au)return e._internalPath;if(typeof e=="string")return Gf(s,e);throw Vd("Field path arguments must be of type string or ",s,!1,void 0,n)}const GC=new RegExp("[~\\*/\\[\\]]");function Gf(s,e,n){if(e.search(GC)>=0)throw Vd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Au(...e.split("."))._internalPath}catch{throw Vd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Vd(s,e,n,i,l){const c=i&&!i.isEmpty(),p=l!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let f="";return(c||p)&&(f+=" (found",c&&(f+=` in field ${i}`),p&&(f+=` in document ${l}`),f+=")"),new ve(ae.INVALID_ARGUMENT,g+s+f)}function S1(s,e){return s.some((n=>n.isEqual(e)))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class C1{constructor(e,n,i,l,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Kf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class KC extends C1{data(){return super.data()}}function Kf(s,e){return typeof e=="string"?Gf(s,e):e instanceof Au?e._internalPath:e._delegate._internalPath}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function E1(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ve(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qf{}class QC extends Qf{}function Gl(s,e,...n){let i=[];e instanceof Qf&&i.push(e),i=i.concat(n),(function(l){const c=l.filter((g=>g instanceof Yf)).length,p=l.filter((g=>g instanceof mh)).length;if(c>1||c>0&&p>0)throw new ve(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)s=l._apply(s);return s}class mh extends QC{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new mh(e,n,i)}_apply(e){const n=this._parse(e);return _1(e._query,n),new Sa(e.firestore,e.converter,qm(e._query,n))}_parse(e){const n=Du(e.firestore);return(function(i,l,c,p,g,f,x){let N;if(g.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new ve(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){av(x,f);const w=[];for(const D of x)w.push(iv(p,i,D));N={arrayValue:{values:w}}}else N=iv(p,i,x)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||av(x,f),N=WC(c,l,x,f==="in"||f==="not-in");return Gt.create(g,f,N)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Kl(s,e,n){const i=e,l=Kf("where",s);return mh._create(l,i,n)}class Yf extends Qf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Yf(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Ir.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,l){let c=i;const p=l.getFlattenedFilters();for(const g of p)_1(c,g),c=qm(c,g)})(e._query,n),new Sa(e.firestore,e.converter,qm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function iv(s,e,n){if(typeof(n=Ut(n))=="string"){if(n==="")throw new ve(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nw(e)&&n.indexOf("/")!==-1)throw new ve(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(bt.fromString(n));if(!Ie.isDocumentKey(i))throw new ve(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return wb(s,new Ie(i))}if(n instanceof Ft)return wb(s,n._key);throw new ve(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xd(n)}.`)}function av(s,e){if(!Array.isArray(s)||s.length===0)throw new ve(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _1(s,e){const n=(function(i,l){for(const c of i)for(const p of c.getFlattenedFilters())if(l.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ve(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class YC{convertValue(e,n="none"){switch(Ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Le(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ri(e,((l,c)=>{i[l]=this.convertValue(c,n)})),i}convertVectorValue(e){var n,i,l;const c=(l=(i=(n=e.fields)==null?void 0:n[Dd].arrayValue)==null?void 0:i.values)==null?void 0:l.map((p=>Ot(p.doubleValue)));return new is(c)}convertGeoPoint(e){return new ss(Ot(e.latitude),Ot(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=eh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(pu(e));default:return null}}convertTimestamp(e){const n=Ti(e);return new Nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=bt.fromString(e);lt(Hw(i),9688,{name:e});const l=new mu(i.get(1),i.get(3)),c=new Ie(i.popFirst(5));return l.isEqual(n)||Ps(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Xf(s,e,n){let i;return i=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,i}class eu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fa extends C1{constructor(e,n,i,l,c,p){super(e,n,i,l,p),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Kf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=fa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()||(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED")),n}}fa._jsonSchemaVersion="firestore/documentSnapshot/1.0",fa._jsonSchema={type:Kt("string",fa._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class vd extends fa{data(e={}){return super.data(e)}}class ga{constructor(e,n,i,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new eu(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new vd(this._firestore,this._userDataWriter,i.key,i,new eu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ve(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,l){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((p=>{const g=new vd(i._firestore,i._userDataWriter,p.doc.key,p.doc,new eu(i._snapshot.mutatedKeys.has(p.doc.key),i._snapshot.fromCache),i.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const g=new vd(i._firestore,i._userDataWriter,p.doc.key,p.doc,new eu(i._snapshot.mutatedKeys.has(p.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,x=-1;return p.type!==0&&(f=c.indexOf(p.doc.key),c=c.delete(p.doc.key)),p.type!==1&&(c=c.add(p.doc),x=c.indexOf(p.doc.key)),{type:XC(p.type),doc:g,oldIndex:f,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ga._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function XC(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:s})}}ga._jsonSchemaVersion="firestore/querySnapshot/1.0",ga._jsonSchema={type:Kt("string",ga._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class Jf extends YC{constructor(e){super(),this.firestore=e}convertBytes(e){return new yr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}function ha(s){s=tr(s,Sa);const e=tr(s.firestore,Ms),n=dh(e),i=new Jf(e);return E1(s._query),UC(n,s._query).then((l=>new ga(e,i,s,l)))}function ov(s,e,n){s=tr(s,Ft);const i=tr(s.firestore,Ms),l=Xf(s.converter,e,n);return Ru(i,[Bf(Du(i),"setDoc",s._key,l,s.converter!==null,n).toMutation(s._key,Pn.none())])}function ln(s,e,n,...i){s=tr(s,Ft);const l=tr(s.firestore,Ms),c=Du(l);let p;return p=typeof(e=Ut(e))=="string"||e instanceof Au?N1(c,"updateDoc",s._key,e,n,i):w1(c,"updateDoc",s._key,e),Ru(l,[p.toMutation(s._key,Pn.exists(!0))])}function Sm(s){return Ru(tr(s.firestore,Ms),[new ih(s._key,Pn.none())])}function An(s,e){const n=tr(s.firestore,Ms),i=ot(s),l=Xf(s.converter,e);return Ru(n,[Bf(Du(s.firestore),"addDoc",i._key,l,s.converter!==null,{}).toMutation(i._key,Pn.exists(!1))]).then((()=>i))}function Dn(s,...e){var n,i,l;s=Ut(s);let c={includeMetadataChanges:!1,source:"default"},p=0;typeof e[p]!="object"||sv(e[p])||(c=e[p++]);const g={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(sv(e[p])){const w=e[p];e[p]=(n=w.next)==null?void 0:n.bind(w),e[p+1]=(i=w.error)==null?void 0:i.bind(w),e[p+2]=(l=w.complete)==null?void 0:l.bind(w)}let f,x,N;if(s instanceof Ft)x=tr(s.firestore,Ms),N=Sf(s._key.path),f={next:w=>{e[p]&&e[p](JC(x,s,w))},error:e[p+1],complete:e[p+2]};else{const w=tr(s,Sa);x=tr(w.firestore,Ms),N=w._query;const D=new Jf(x);f={next:P=>{e[p]&&e[p](new ga(x,D,w,P))},error:e[p+1],complete:e[p+2]},E1(s._query)}return(function(w,D,P,z){const R=new f1(z),O=new a1(D,R,P);return w.asyncQueue.enqueueAndForget((async()=>s1(await Zm(w),O))),()=>{R.Nu(),w.asyncQueue.enqueueAndForget((async()=>i1(await Zm(w),O)))}})(dh(x),N,g,f)}function Ru(s,e){return(function(n,i){const l=new Ci;return n.asyncQueue.enqueueAndForget((async()=>EC(await FC(n),i,l))),l.promise})(dh(s),e)}function JC(s,e,n){const i=n.docs.get(e._key),l=new Jf(s);return new fa(s,l,e._key,i,new eu(n.hasPendingWrites,n.fromCache),e.converter)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ZC{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Du(e)}set(e,n,i){this._verifyNotCommitted();const l=Cm(e,this._firestore),c=Xf(l.converter,n,i),p=Bf(this._dataReader,"WriteBatch.set",l._key,c,l.converter!==null,i);return this._mutations.push(p.toMutation(l._key,Pn.none())),this}update(e,n,i,...l){this._verifyNotCommitted();const c=Cm(e,this._firestore);let p;return p=typeof(n=Ut(n))=="string"||n instanceof Au?N1(this._dataReader,"WriteBatch.update",c._key,n,i,l):w1(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(p.toMutation(c._key,Pn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Cm(e,this._firestore);return this._mutations=this._mutations.concat(new ih(n._key,Pn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ve(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cm(s,e){if((s=Ut(s)).firestore!==e)throw new ve(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function Em(s){return new Hf("increment",s)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vo(s){return dh(s=tr(s,Ms)),new ZC(s,(e=>Ru(s,e)))}(function(s,e=!0){(function(n){qo=n})(zo),Ao(new ya("firestore",((n,{instanceIdentifier:i,options:l})=>{const c=n.getProvider("app").getImmediate(),p=new Ms(new KS(n.getProvider("auth-internal")),new XS(c,n.getProvider("app-check-internal")),(function(g,f){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ve(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mu(g.options.projectId,f)})(c,i),c);return l={useFetchStreams:e,...l},p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),ji(lb,ub,s),ji(lb,ub,"esm2020")})();function T1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eE=T1,I1=new ku("auth","Firebase",T1());/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const zd=new ff("@firebase/auth");function tE(s,...e){zd.logLevel<=Xe.WARN&&zd.warn(`Auth (${zo}): ${s}`,...e)}function wd(s,...e){zd.logLevel<=Xe.ERROR&&zd.error(`Auth (${zo}): ${s}`,...e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ar(s,...e){throw Zf(s,...e)}function as(s,...e){return Zf(s,...e)}function A1(s,e,n){const i={...eE(),[e]:n};return new ku("auth","Firebase",i).create(e,{appName:s.name})}function As(s){return A1(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zf(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return I1.create(s,...e)}function Me(s,e,...n){if(!s)throw Zf(e,...n)}function Ts(s){const e="INTERNAL ASSERTION FAILED: "+s;throw wd(e),new Error(e)}function Ls(s,e){s||Ts(e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tf(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function nE(){return lv()==="http:"||lv()==="https:"}function lv(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nE()||kj()||"connection"in navigator)?navigator.onLine:!0}function sE(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ls(n>e,"Short delay should be less than long delay!"),this.isMobile=vj()||jj()}get(){return rE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function e0(s,e){Ls(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class D1{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const iE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const aE=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oE=new Mu(3e4,6e4);function Li(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Oi(s,e,n,i,l={}){return P1(s,l,async()=>{let c={},p={};i&&(e==="GET"?p=i:c={body:JSON.stringify(i)});const g=ju({key:s.config.apiKey,...p}).slice(1),f=await s._getAdditionalHeaders();f["Content-Type"]="application/json",s.languageCode&&(f["X-Firebase-Locale"]=s.languageCode);const x={method:e,headers:f,...c};return Nj()||(x.referrerPolicy="no-referrer"),s.emulatorConfig&&Vo(s.emulatorConfig.host)&&(x.credentials="include"),D1.fetch()(await R1(s,s.config.apiHost,n,g),x)})}async function P1(s,e,n){s._canInitEmulator=!1;const i={...iE,...e};try{const l=new uE(s),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const p=await c.json();if("needConfirmation"in p)throw pd(s,"account-exists-with-different-credential",p);if(c.ok&&!("errorMessage"in p))return p;{const g=c.ok?p.errorMessage:p.error.message,[f,x]=g.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw pd(s,"credential-already-in-use",p);if(f==="EMAIL_EXISTS")throw pd(s,"email-already-in-use",p);if(f==="USER_DISABLED")throw pd(s,"user-disabled",p);const N=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw A1(s,N,x);Ar(s,N)}}catch(l){if(l instanceof Os)throw l;Ar(s,"network-request-failed",{message:String(l)})}}async function Lu(s,e,n,i,l={}){const c=await Oi(s,e,n,i,l);return"mfaPendingCredential"in c&&Ar(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function R1(s,e,n,i){const l=`${e}${n}?${i}`,c=s,p=c.config.emulator?e0(s.config,l):`${s.config.apiScheme}://${l}`;return aE.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(p).toString():p}function lE(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uE{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(as(this.auth,"network-request-failed")),oE.get())})}}function pd(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const l=as(s,e,i);return l.customData._tokenResponse=n,l}function uv(s){return s!==void 0&&s.enterprise!==void 0}class cE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return lE(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dE(s,e){return Oi(s,"GET","/v2/recaptchaConfig",Li(s,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function hE(s,e){return Oi(s,"POST","/v1/accounts:delete",e)}async function qd(s,e){return Oi(s,"POST","/v1/accounts:lookup",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function au(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pE(s,e=!1){const n=Ut(s),i=await n.getIdToken(e),l=t0(i);Me(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,p=c==null?void 0:c.sign_in_provider;return{claims:l,token:i,authTime:au(_m(l.auth_time)),issuedAtTime:au(_m(l.iat)),expirationTime:au(_m(l.exp)),signInProvider:p||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function _m(s){return Number(s)*1e3}function t0(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return wd("JWT malformed, contained fewer than 3 sections"),null;try{const l=Fv(n);return l?JSON.parse(l):(wd("Failed to decode base64 JWT payload"),null)}catch(l){return wd("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function cv(s){const e=t0(s);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function bu(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Os&&mE(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function mE({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function $d(s){var e;const n=s.auth,i=await s.getIdToken(),l=await bu(s,qd(n,{idToken:i}));Me(l==null?void 0:l.users.length,n,"internal-error");const c=l.users[0];s._notifyReloadListener(c);const p=(e=c.providerUserInfo)!=null&&e.length?M1(c.providerUserInfo):[],g=xE(s.providerData,p),f=s.isAnonymous,x=!(s.email&&c.passwordHash)&&!(g!=null&&g.length),N=f?x:!1,w={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:g,metadata:new nf(c.createdAt,c.lastLoginAt),isAnonymous:N};Object.assign(s,w)}async function gE(s){const e=Ut(s);await $d(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xE(s,e){return[...s.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function M1(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function yE(s,e){const n=await P1(s,{},async()=>{const i=ju({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=s.config,p=await R1(s,l,"/v1/token",`key=${c}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:g,body:i};return s.emulatorConfig&&Vo(s.emulatorConfig.host)&&(f.credentials="include"),D1.fetch()(p,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function bE(s,e){return Oi(s,"POST","/v2/accounts:revokeToken",Li(s,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const n=cv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:l,expiresIn:c}=await yE(e,n);this.updateTokensAndExpiration(i,l,Number(c))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:l,expirationTime:c}=n,p=new Eo;return i&&(Me(typeof i=="string","internal-error",{appName:e}),p.refreshToken=i),l&&(Me(typeof l=="string","internal-error",{appName:e}),p.accessToken=l),c&&(Me(typeof c=="number","internal-error",{appName:e}),p.expirationTime=c),p}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eo,this.toJSON())}_performRefresh(){return Ts("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gi(s,e){Me(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Tr{constructor({uid:e,auth:n,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new fE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new nf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await bu(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return pE(this,e)}reload(){return gE(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Tr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await $d(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xr(this.auth.app))return Promise.reject(As(this.auth));const e=await this.getIdToken();return await bu(this,hE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,p=n.photoURL??void 0,g=n.tenantId??void 0,f=n._redirectEventId??void 0,x=n.createdAt??void 0,N=n.lastLoginAt??void 0,{uid:w,emailVerified:D,isAnonymous:P,providerData:z,stsTokenManager:R}=n;Me(w&&R,e,"internal-error");const O=Eo.fromJSON(this.name,R);Me(typeof w=="string",e,"internal-error"),gi(i,e.name),gi(l,e.name),Me(typeof D=="boolean",e,"internal-error"),Me(typeof P=="boolean",e,"internal-error"),gi(c,e.name),gi(p,e.name),gi(g,e.name),gi(f,e.name),gi(x,e.name),gi(N,e.name);const te=new Tr({uid:w,auth:e,email:l,emailVerified:D,displayName:i,isAnonymous:P,photoURL:p,phoneNumber:c,tenantId:g,stsTokenManager:O,createdAt:x,lastLoginAt:N});return z&&Array.isArray(z)&&(te.providerData=z.map(ee=>({...ee}))),f&&(te._redirectEventId=f),te}static async _fromIdTokenResponse(e,n,i=!1){const l=new Eo;l.updateFromServerResponse(n);const c=new Tr({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await $d(c),c}static async _fromGetAccountInfoResponse(e,n,i){const l=n.users[0];Me(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?M1(l.providerUserInfo):[],p=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),g=new Eo;g.updateFromIdToken(i);const f=new Tr({uid:l.localId,auth:e,stsTokenManager:g,isAnonymous:p}),x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new nf(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(f,x),f}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dv=new Map;function Is(s){Ls(s instanceof Function,"Expected a class definition");let e=dv.get(s);return e?(Ls(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,dv.set(s,e),e)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class L1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}L1.type="NONE";const hv=L1;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Nd(s,e,n){return`firebase:${s}:${e}:${n}`}class _o{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:l,name:c}=this.auth;this.fullUserKey=Nd(this.userKey,l.apiKey,c),this.fullPersistenceKey=Nd("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await qd(this.auth,{idToken:e}).catch(()=>{});return n?Tr._fromGetAccountInfoResponse(this.auth,n,e):null}return Tr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new _o(Is(hv),e,i);const l=(await Promise.all(n.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let c=l[0]||Is(hv);const p=Nd(i,e.config.apiKey,e.name);let g=null;for(const x of n)try{const N=await x._get(p);if(N){let w;if(typeof N=="string"){const D=await qd(e,{idToken:N}).catch(()=>{});if(!D)break;w=await Tr._fromGetAccountInfoResponse(e,D,N)}else w=Tr._fromJSON(e,N);x!==c&&(g=w),c=x;break}}catch{}const f=l.filter(x=>x._shouldAllowMigration);return!c._shouldAllowMigration||!f.length?new _o(c,e,i):(c=f[0],g&&await c._set(p,g.toJSON()),await Promise.all(n.map(async x=>{if(x!==c)try{await x._remove(p)}catch{}})),new _o(c,e,i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pv(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(V1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(O1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(q1(e))return"Blackberry";if($1(e))return"Webos";if(F1(e))return"Safari";if((e.includes("chrome/")||U1(e))&&!e.includes("edge/"))return"Chrome";if(z1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function O1(s=Cn()){return/firefox\//i.test(s)}function F1(s=Cn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function U1(s=Cn()){return/crios\//i.test(s)}function V1(s=Cn()){return/iemobile/i.test(s)}function z1(s=Cn()){return/android/i.test(s)}function q1(s=Cn()){return/blackberry/i.test(s)}function $1(s=Cn()){return/webos/i.test(s)}function n0(s=Cn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function vE(s=Cn()){var e;return n0(s)&&!!((e=window.navigator)!=null&&e.standalone)}function wE(){return Sj()&&document.documentMode===10}function B1(s=Cn()){return n0(s)||z1(s)||$1(s)||q1(s)||/windows phone/i.test(s)||V1(s)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function H1(s,e=[]){let n;switch(s){case"Browser":n=pv(Cn());break;case"Worker":n=`${pv(Cn())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zo}/${i}`}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class NE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=c=>new Promise((p,g)=>{try{const f=e(c);p(f)}catch(f){g(f)}});i.onAbort=n,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function kE(s,e={}){return Oi(s,"GET","/v2/passwordPolicy",Li(s,e))}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const jE=6;class SE{constructor(e){var n;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??jE,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class CE{constructor(e,n,i,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mv(this),this.idTokenSubscription=new mv(this),this.beforeStateQueue=new NE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=I1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Is(n)),this._initializationPromise=this.queue(async()=>{var i,l,c;if(!this._deleted&&(this.persistenceManager=await _o.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qd(this,{idToken:e}),i=await Tr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(xr(this.app)){const p=this.app.settings.authIdToken;return p?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(p).then(g,g))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let l=i,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const p=(n=this.redirectUser)==null?void 0:n._redirectEventId,g=l==null?void 0:l._redirectEventId,f=await this.tryRedirectSignIn(e);(!p||p===g)&&f!=null&&f.user&&(l=f.user,c=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(l)}catch(p){l=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(p))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $d(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xr(this.app))return Promise.reject(As(this));const n=e?Ut(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xr(this.app)?Promise.reject(As(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xr(this.app)?Promise.reject(As(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Is(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kE(this),n=new SE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ku("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await bE(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Is(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await _o.create(this,[Is(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let p=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(g,this,"internal-error"),g.then(()=>{p||c(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,i,l);return()=>{p=!0,f()}}else{const f=e.addObserver(n);return()=>{p=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=H1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const l=await this._getAppCheckToken();return l&&(n["X-Firebase-AppCheck"]=l),n}async _getAppCheckToken(){var e;if(xr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return n!=null&&n.error&&tE(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ca(s){return Ut(s)}class mv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Pj(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let fh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EE(s){fh=s}function W1(s){return fh.loadJS(s)}function _E(){return fh.recaptchaEnterpriseScript}function TE(){return fh.gapiScript}function IE(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class AE{constructor(){this.enterprise=new DE}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class DE{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const PE="recaptcha-enterprise",G1="NO_RECAPTCHA";class RE{constructor(e){this.type=PE,this.auth=Ca(e)}async verify(e="verify",n=!1){async function i(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(p,g)=>{dE(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const x=new cE(f);return c.tenantId==null?c._agentRecaptchaConfig=x:c._tenantRecaptchaConfigs[c.tenantId]=x,p(x.siteKey)}}).catch(f=>{g(f)})})}function l(c,p,g){const f=window.grecaptcha;uv(f)?f.enterprise.ready(()=>{f.enterprise.execute(c,{action:e}).then(x=>{p(x)}).catch(()=>{p(G1)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new AE().execute("siteKey",{action:"verify"}):new Promise((c,p)=>{i(this.auth).then(g=>{if(!n&&uv(window.grecaptcha))l(g,c,p);else{if(typeof window>"u"){p(new Error("RecaptchaVerifier is only supported in browser"));return}let f=_E();f.length!==0&&(f+=g),W1(f).then(()=>{l(g,c,p)}).catch(x=>{p(x)})}}).catch(g=>{p(g)})})}}async function fv(s,e,n,i=!1,l=!1){const c=new RE(s);let p;if(l)p=G1;else try{p=await c.verify(n)}catch{p=await c.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const f=g.phoneEnrollmentInfo.phoneNumber,x=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:x,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const f=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return i?Object.assign(g,{captchaResp:p}):Object.assign(g,{captchaResponse:p}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function rf(s,e,n,i,l){var c;if((c=s._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const p=await fv(s,e,n,n==="getOobCode");return i(s,p)}else return i(s,e).catch(async p=>{if(p.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await fv(s,e,n,n==="getOobCode");return i(s,g)}else return Promise.reject(p)})}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ME(s,e){const n=xf(s,"auth");if(n.isInitialized()){const i=n.getImmediate(),l=n.getOptions();if(xa(l,e??{}))return i;Ar(i,"already-initialized")}return n.initialize({options:e})}function LE(s,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Is);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function OE(s,e,n){const i=Ca(s);Me(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,c=K1(e),{host:p,port:g}=FE(e),f=g===null?"":`:${g}`,x={url:`${c}//${p}${f}/`},N=Object.freeze({host:p,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){Me(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Me(xa(x,i.config.emulator)&&xa(N,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=x,i.emulatorConfig=N,i.settings.appVerificationDisabledForTesting=!0,Vo(p)?(qv(`${c}//${p}${f}`),$v("Auth",!0)):UE()}function K1(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function FE(s){const e=K1(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const c=l[1];return{host:c,port:gv(i.substr(c.length+1))}}else{const[c,p]=i.split(":");return{host:c,port:gv(p)}}}function gv(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function UE(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class r0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ts("not implemented")}_getIdTokenResponse(e){return Ts("not implemented")}_linkToIdToken(e,n){return Ts("not implemented")}_getReauthenticationResolver(e){return Ts("not implemented")}}async function VE(s,e){return Oi(s,"POST","/v1/accounts:signUp",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function zE(s,e){return Lu(s,"POST","/v1/accounts:signInWithPassword",Li(s,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function qE(s,e){return Lu(s,"POST","/v1/accounts:signInWithEmailLink",Li(s,e))}async function $E(s,e){return Lu(s,"POST","/v1/accounts:signInWithEmailLink",Li(s,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vu extends r0{constructor(e,n,i,l=null){super("password",i),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new vu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new vu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&n!=null&&n.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rf(e,n,"signInWithPassword",zE);case"emailLink":return qE(e,{email:this._email,oobCode:this._password});default:Ar(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rf(e,i,"signUpPassword",VE);case"emailLink":return $E(e,{idToken:n,email:this._email,oobCode:this._password});default:Ar(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function To(s,e){return Lu(s,"POST","/v1/accounts:signInWithIdp",Li(s,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const BE="http://localhost";class wa extends r0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new wa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ar("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...c}=n;if(!i||!l)return null;const p=new wa(i,l);return p.idToken=c.idToken||void 0,p.accessToken=c.accessToken||void 0,p.secret=c.secret,p.nonce=c.nonce,p.pendingToken=c.pendingToken||null,p}_getIdTokenResponse(e){const n=this.buildRequest();return To(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,To(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,To(e,n)}buildRequest(){const e={requestUri:BE,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ju(n)}return e}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function HE(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WE(s){const e=Ql(Yl(s)).link,n=e?Ql(Yl(e)).deep_link_id:null,i=Ql(Yl(s)).deep_link_id;return(i?Ql(Yl(i)).link:null)||i||n||e||s}class s0{constructor(e){const n=Ql(Yl(e)),i=n.apiKey??null,l=n.oobCode??null,c=HE(n.mode??null);Me(i&&l&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=WE(e);try{return new s0(n)}catch{return null}}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Wo{constructor(){this.providerId=Wo.PROVIDER_ID}static credential(e,n){return vu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=s0.parseLink(n);return Me(i,"argument-error"),vu._fromEmailAndCode(e,i.code,i.tenantId)}}Wo.PROVIDER_ID="password";Wo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Q1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ou extends Q1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xi extends Ou{constructor(){super("facebook.com")}static credential(e){return wa._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xi.credential(e.oauthAccessToken)}catch{return null}}}xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";xi.PROVIDER_ID="facebook.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yi extends Ou{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return wa._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return yi.credential(n,i)}catch{return null}}}yi.GOOGLE_SIGN_IN_METHOD="google.com";yi.PROVIDER_ID="google.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bi extends Ou{constructor(){super("github.com")}static credential(e){return wa._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bi.credential(e.oauthAccessToken)}catch{return null}}}bi.GITHUB_SIGN_IN_METHOD="github.com";bi.PROVIDER_ID="github.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vi extends Ou{constructor(){super("twitter.com")}static credential(e,n){return wa._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return vi.credential(n,i)}catch{return null}}}vi.TWITTER_SIGN_IN_METHOD="twitter.com";vi.PROVIDER_ID="twitter.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function GE(s,e){return Lu(s,"POST","/v1/accounts:signUp",Li(s,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Na{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,l=!1){const c=await Tr._fromIdTokenResponse(e,i,l),p=xv(i);return new Na({user:c,providerId:p,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const l=xv(i);return new Na({user:e,providerId:l,_tokenResponse:i,operationType:n})}}function xv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Bd extends Os{constructor(e,n,i,l){super(n.code,n.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,Bd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,l){return new Bd(e,n,i,l)}}function Y1(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Bd._fromErrorAndOperation(s,l,e,i):l})}async function KE(s,e,n=!1){const i=await bu(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return Na._forOperation(s,"link",i)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function QE(s,e,n=!1){const{auth:i}=s;if(xr(i.app))return Promise.reject(As(i));const l="reauthenticate";try{const c=await bu(s,Y1(i,l,e,s),n);Me(c.idToken,i,"internal-error");const p=t0(c.idToken);Me(p,i,"internal-error");const{sub:g}=p;return Me(s.uid===g,i,"user-mismatch"),Na._forOperation(s,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Ar(i,"user-mismatch"),c}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function X1(s,e,n=!1){if(xr(s.app))return Promise.reject(As(s));const i="signIn",l=await Y1(s,i,e),c=await Na._fromIdTokenResponse(s,i,l);return n||await s._updateCurrentUser(c.user),c}async function YE(s,e){return X1(Ca(s),e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function J1(s){const e=Ca(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XE(s,e,n){if(xr(s.app))return Promise.reject(As(s));const i=Ca(s),l=await rf(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",GE).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&J1(s),p}),c=await Na._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function JE(s,e,n){return xr(s.app)?Promise.reject(As(s)):YE(Ut(s),Wo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&J1(s),i})}function ZE(s,e,n,i){return Ut(s).onIdTokenChanged(e,n,i)}function e3(s,e,n){return Ut(s).beforeAuthStateChanged(e,n)}function t3(s,e,n,i){return Ut(s).onAuthStateChanged(e,n,i)}function n3(s){return Ut(s).signOut()}const Hd="__sak";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Z1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hd,"1"),this.storage.removeItem(Hd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const r3=1e3,s3=10;class e2 extends Z1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=B1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),l=this.localCache[n];i!==l&&e(n,l,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((p,g,f)=>{this.notifyListeners(p,f)});return}const i=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const p=this.storage.getItem(i);!n&&this.localCache[i]===p||this.notifyListeners(i,p)},c=this.storage.getItem(i);wE()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,s3):l()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},r3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}e2.type="LOCAL";const i3=e2;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class t2 extends Z1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}t2.type="SESSION";const n2=t2;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function a3(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const i=new gh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:l,data:c}=n.data,p=this.handlersMap[l];if(!(p!=null&&p.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const g=Array.from(p).map(async x=>x(n.origin,c)),f=await a3(g);n.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gh.receivers=[];/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function i0(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class o3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,p;return new Promise((g,f)=>{const x=i0("",20);l.port1.start();const N=setTimeout(()=>{f(new Error("unsupported_event"))},i);p={messageChannel:l,onMessage(w){const D=w;if(D.data.eventId===x)switch(D.data.status){case"ack":clearTimeout(N),c=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(D.data.response);break;default:clearTimeout(N),clearTimeout(c),f(new Error("invalid_response"));break}}},this.handlers.add(p),l.port1.addEventListener("message",p.onMessage),this.target.postMessage({eventType:e,eventId:x,data:n},[l.port2])}).finally(()=>{p&&this.removeMessageHandler(p)})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function os(){return window}function l3(s){os().location.href=s}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function r2(){return typeof os().WorkerGlobalScope<"u"&&typeof os().importScripts=="function"}async function u3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function c3(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function d3(){return r2()?self:null}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const s2="firebaseLocalStorageDb",h3=1,Wd="firebaseLocalStorage",i2="fbase_key";class Fu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function xh(s,e){return s.transaction([Wd],e?"readwrite":"readonly").objectStore(Wd)}function p3(){const s=indexedDB.deleteDatabase(s2);return new Fu(s).toPromise()}function sf(){const s=indexedDB.open(s2,h3);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Wd,{keyPath:i2})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Wd)?e(i):(i.close(),await p3(),e(await sf()))})})}async function yv(s,e,n){const i=xh(s,!0).put({[i2]:e,value:n});return new Fu(i).toPromise()}async function m3(s,e){const n=xh(s,!1).get(e),i=await new Fu(n).toPromise();return i===void 0?null:i.value}function bv(s,e){const n=xh(s,!0).delete(e);return new Fu(n).toPromise()}const f3=800,g3=3;class a2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>g3)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return r2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gh._getInstance(d3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await u3(),!this.activeServiceWorker)return;this.sender=new o3(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&(e=i[0])!=null&&e.fulfilled&&(n=i[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||c3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sf();return await yv(e,Hd,"1"),await bv(e,Hd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>yv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>m3(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>bv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=xh(l,!1).getAll();return new Fu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),f3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}a2.type="LOCAL";const x3=a2;new Mu(3e4,6e4);/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function y3(s,e){return e?Is(e):(Me(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class a0 extends r0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return To(e,this._buildIdpRequest())}_linkToIdToken(e,n){return To(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return To(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function b3(s){return X1(s.auth,new a0(s),s.bypassAuthState)}function v3(s){const{auth:e,user:n}=s;return Me(n,e,"internal-error"),QE(n,new a0(s),s.bypassAuthState)}async function w3(s){const{auth:e,user:n}=s;return Me(n,e,"internal-error"),KE(n,new a0(s),s.bypassAuthState)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class o2{constructor(e,n,i,l,c=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:l,tenantId:c,error:p,type:g}=e;if(p){this.reject(p);return}const f={auth:this.auth,requestUri:n,sessionId:i,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(f))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return b3;case"linkViaPopup":case"linkViaRedirect":return w3;case"reauthViaPopup":case"reauthViaRedirect":return v3;default:Ar(this.auth,"internal-error")}}resolve(e){Ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const N3=new Mu(2e3,1e4);class So extends o2{constructor(e,n,i,l,c){super(e,n,l,c),this.provider=i,this.authWindow=null,this.pollId=null,So.currentPopupAction&&So.currentPopupAction.cancel(),So.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Ls(this.filter.length===1,"Popup operations only handle one event");const e=i0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(as(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(as(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,So.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(as(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,N3.get())};e()}}So.currentPopupAction=null;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const k3="pendingRedirect",kd=new Map;class j3 extends o2{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=kd.get(this.auth._key());if(!e){try{const n=await S3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(n){e=()=>Promise.reject(n)}kd.set(this.auth._key(),e)}return this.bypassAuthState||kd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function S3(s,e){const n=_3(e),i=E3(s);if(!await i._isAvailable())return!1;const l=await i._get(n)==="true";return await i._remove(n),l}function C3(s,e){kd.set(s._key(),e)}function E3(s){return Is(s._redirectPersistence)}function _3(s){return Nd(k3,s.config.apiKey,s.name)}async function T3(s,e,n=!1){if(xr(s.app))return Promise.reject(As(s));const i=Ca(s),l=y3(i,e),c=await new j3(i,l,n).execute();return c&&!n&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const I3=600*1e3;class A3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!D3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!l2(e)){const l=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(as(this.auth,l))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=I3&&this.cachedEventUids.clear(),this.cachedEventUids.has(vv(e))}saveEventToCache(e){this.cachedEventUids.add(vv(e)),this.lastProcessedEventTime=Date.now()}}function vv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function l2({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function D3(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return l2(s);default:return!1}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function P3(s,e={}){return Oi(s,"GET","/v1/projects",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const R3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,M3=/^https?/;async function L3(s){if(s.config.emulator)return;const{authorizedDomains:e}=await P3(s);for(const n of e)try{if(O3(n))return}catch{}Ar(s,"unauthorized-domain")}function O3(s){const e=tf(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===i}if(!M3.test(n))return!1;if(R3.test(s))return i===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const F3=new Mu(3e4,6e4);function wv(){const s=os().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function U3(s){return new Promise((e,n)=>{var i,l,c;function p(){wv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wv(),n(as(s,"network-request-failed"))},timeout:F3.get()})}if((l=(i=os().gapi)==null?void 0:i.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=os().gapi)!=null&&c.load)p();else{const g=IE("iframefcb");return os()[g]=()=>{gapi.load?p():n(as(s,"network-request-failed"))},W1(`${TE()}?onload=${g}`).catch(f=>n(f))}}).catch(e=>{throw jd=null,e})}let jd=null;function V3(s){return jd=jd||U3(s),jd}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const z3=new Mu(5e3,15e3),q3="__/auth/iframe",$3="emulator/auth/iframe",B3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},H3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function W3(s){const e=s.config;Me(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?e0(e,$3):`https://${s.config.authDomain}/${q3}`,i={apiKey:e.apiKey,appName:s.name,v:zo},l=H3.get(s.config.apiHost);l&&(i.eid=l);const c=s._getFrameworks();return c.length&&(i.fw=c.join(",")),`${n}?${ju(i).slice(1)}`}async function G3(s){const e=await V3(s),n=os().gapi;return Me(n,s,"internal-error"),e.open({where:document.body,url:W3(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B3,dontclear:!0},i=>new Promise(async(l,c)=>{await i.restyle({setHideOnLeave:!1});const p=as(s,"network-request-failed"),g=os().setTimeout(()=>{c(p)},z3.get());function f(){os().clearTimeout(g),l(i)}i.ping(f).then(f,()=>{c(p)})}))}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const K3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Q3=500,Y3=600,X3="_blank",J3="http://localhost";class Nv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Z3(s,e,n,i=Q3,l=Y3){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),p=Math.max((window.screen.availWidth-i)/2,0).toString();let g="";const f={...K3,width:i.toString(),height:l.toString(),top:c,left:p},x=Cn().toLowerCase();n&&(g=U1(x)?X3:n),O1(x)&&(e=e||J3,f.scrollbars="yes");const N=Object.entries(f).reduce((D,[P,z])=>`${D}${P}=${z},`,"");if(vE(x)&&g!=="_self")return e_(e||"",g),new Nv(null);const w=window.open(e||"",g,N);Me(w,s,"popup-blocked");try{w.focus()}catch{}return new Nv(w)}function e_(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const t_="__/auth/handler",n_="emulator/auth/handler",r_=encodeURIComponent("fac");async function kv(s,e,n,i,l,c){Me(s.config.authDomain,s,"auth-domain-config-required"),Me(s.config.apiKey,s,"invalid-api-key");const p={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:zo,eventId:l};if(e instanceof Q1){e.setDefaultLanguage(s.languageCode),p.providerId=e.providerId||"",Dj(e.getCustomParameters())||(p.customParameters=JSON.stringify(e.getCustomParameters()));for(const[N,w]of Object.entries({}))p[N]=w}if(e instanceof Ou){const N=e.getScopes().filter(w=>w!=="");N.length>0&&(p.scopes=N.join(","))}s.tenantId&&(p.tid=s.tenantId);const g=p;for(const N of Object.keys(g))g[N]===void 0&&delete g[N];const f=await s._getAppCheckToken(),x=f?`#${r_}=${encodeURIComponent(f)}`:"";return`${s_(s)}?${ju(g).slice(1)}${x}`}function s_({config:s}){return s.emulator?e0(s,n_):`https://${s.authDomain}/${t_}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Tm="webStorageSupport";class i_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=n2,this._completeRedirectFn=T3,this._overrideRedirectResult=C3}async _openPopup(e,n,i,l){var c;Ls((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const p=await kv(e,n,i,tf(),l);return Z3(e,p,i0())}async _openRedirect(e,n,i,l){await this._originValidation(e);const c=await kv(e,n,i,tf(),l);return l3(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Ls(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await G3(e),i=new A3(e);return n.register("authEvent",l=>(Me(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Tm,{type:Tm},i=>{var l;const c=(l=i==null?void 0:i[0])==null?void 0:l[Tm];c!==void 0&&n(!!c),Ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=L3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return B1()||F1()||n0()}}const a_=i_;var jv="@firebase/auth",Sv="1.11.1";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class o_{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function l_(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function u_(s){Ao(new ya("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:p,authDomain:g}=i.options;Me(p&&!p.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:p,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:H1(s)},x=new CE(i,l,c,f);return LE(x,n),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ao(new ya("auth-internal",e=>{const n=Ca(e.getProvider("auth").getImmediate());return(i=>new o_(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ji(jv,Sv,l_(s)),ji(jv,Sv,"esm2020")}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const c_=300,d_=zv("authIdTokenMaxAge")||c_;let Cv=null;const h_=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>d_)return;const l=n==null?void 0:n.token;Cv!==l&&(Cv=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function p_(s=Gv()){const e=xf(s,"auth");if(e.isInitialized())return e.getImmediate();const n=ME(s,{popupRedirectResolver:a_,persistence:[x3,i3,n2]}),i=zv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const p=h_(c.toString());e3(n,p,()=>p(n.currentUser)),ZE(n,g=>p(g))}}const l=Uv("auth");return l&&OE(n,`http://${l}`),n}function m_(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}EE({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=l=>{const c=as("internal-error");c.customData=l,n(c)},i.type="text/javascript",i.charset="UTF-8",m_().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});u_("Browser");const f_={apiKey:"AIzaSyDHQFIcPtd97RAPiT41EyQXaCflHga4jXI",authDomain:"masbotinventory.firebaseapp.com",projectId:"masbotinventory",storageBucket:"masbotinventory.firebasestorage.app",messagingSenderId:"1040093470535",appId:"1:1040093470535:web:dc9ec5b6da52e37aa83662",measurementId:"G-FV1T8VHT5Z"},u2=Wv(f_),Ne=zC(u2),md=p_(u2),g_=()=>{var s;const[e,n]=V.useState(!1),[i,l]=V.useState(!1),[c,p]=V.useState(null),[g,f]=V.useState(null),[x,N]=V.useState(!0),[w,D]=V.useState([]),[P,z]=V.useState([]),[R,O]=V.useState({}),[te,ee]=V.useState([]),[ue,re]=V.useState([]),[$,X]=V.useState([]),[T,k]=V.useState([]),[S,j]=V.useState([]),[E,A]=V.useState([]),[_,be]=V.useState([]),[Ae,B]=V.useState([]),[de,ye]=V.useState([]),[Ee,Oe]=V.useState([]),[L,Q]=V.useState([]),[he,ge]=V.useState([]);V.useEffect(()=>t3(md,ne=>{ne?(n(!0),ne.email==="admin@masbot.erp"?f("admin"):f(ne.email)):g||(n(!1),f(null),p(null)),N(!1)}),[]),V.useEffect(()=>{if(!g){D([]),z([]);return}let ne=[],fe=!0;return(async()=>{const pe=[{employeeId:"EMP-001",firstName:"Ali",lastName:"Raza",fatherName:"Raza Khan",email:"ali.raza@example.com",phone:"0300-1234567",cnic:"35202-1234567-1",department:"IT",designation:"Developer",joiningDate:"2023-01-15",salary:"120000",role:"Employee",status:"Active",employmentType:"Permanent",leaveBalance:{annual:{total:14,used:0},sick:{total:7,used:0},casual:{total:6,used:0},maternity:{total:90,used:0},paternity:{total:7,used:0},alternateDayOff:{total:50,used:0},others:{total:0,used:0}}},{employeeId:"EMP-002",firstName:"Sara",lastName:"Khan",fatherName:"Ahmed Khan",email:"sara.khan@example.com",phone:"0301-7654321",cnic:"35202-2345678-2",department:"HR",designation:"HR Manager",joiningDate:"2022-05-20",salary:"150000",role:"HR",status:"Active",employmentType:"Permanent",leaveBalance:{annual:{total:14,used:0},sick:{total:7,used:0},casual:{total:6,used:0},maternity:{total:90,used:0},paternity:{total:7,used:0},alternateDayOff:{total:50,used:0},others:{total:0,used:0}}},{employeeId:"EMP-003",firstName:"Ahmed",lastName:"Ali",fatherName:"Bashir Ali",email:"ahmed.ali@example.com",phone:"0302-1122334",cnic:"35202-3456789-3",department:"Finance",designation:"Accountant",joiningDate:"2023-03-10",salary:"100000",role:"HOD",status:"Active",employmentType:"Permanent",leaveBalance:{annual:{total:14,used:0},sick:{total:7,used:0},casual:{total:6,used:0},maternity:{total:90,used:0},paternity:{total:7,used:0},alternateDayOff:{total:50,used:0},others:{total:0,used:0}}}],_e=[{type:"Kitchen",model:"Flour",quantity:25,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-001"},{type:"Kitchen",model:"Sugar",quantity:25,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-002"},{type:"Kitchen",model:"Salt",quantity:10,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-003"},{type:"Kitchen",model:"Butter",quantity:10,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-004"},{type:"Kitchen",model:"Milk",quantity:20,unit:"liters",status:"In Stock",assignedTo:"",itemCode:"KIT-005"},{type:"Kitchen",model:"Eggs",quantity:100,unit:"pieces",status:"In Stock",assignedTo:"",itemCode:"KIT-006"},{type:"Kitchen",model:"Coffee Beans",quantity:5,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-007"},{type:"Kitchen",model:"Yeast",quantity:2,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-008"},{type:"Kitchen",model:"Olive Oil",quantity:5,unit:"liters",status:"In Stock",assignedTo:"",itemCode:"KIT-009"},{type:"Kitchen",model:"Vinegar",quantity:5,unit:"liters",status:"In Stock",assignedTo:"",itemCode:"KIT-010"},{type:"Kitchen",model:"Onion",quantity:50,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-011"},{type:"Kitchen",model:"Chicken (with bone)",quantity:20,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-020"},{type:"Kitchen",model:"Chicken (boneless)",quantity:20,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-021"},{type:"Kitchen",model:"Tomatoes",quantity:30,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-022"},{type:"Kitchen",model:"Garlic paste",quantity:5,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-023"},{type:"Kitchen",model:"Ginger paste",quantity:5,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-024"},{type:"Kitchen",model:"Green chilies",quantity:5,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-025"},{type:"Kitchen",model:"Yogurt",quantity:15,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-026"},{type:"Kitchen",model:"Cooking oil",quantity:50,unit:"liters",status:"In Stock",assignedTo:"",itemCode:"KIT-027"},{type:"Kitchen",model:"Red chili powder",quantity:5,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-028"},{type:"Kitchen",model:"Garam masala",quantity:5,unit:"kg",status:"In Stock",assignedTo:"",itemCode:"KIT-029"}],Be=[{name:"Chicken Karahi",ingredients:[{name:"Chicken (with bone)",quantity:1,unit:"kg"},{name:"Tomatoes",quantity:.5,unit:"kg"},{name:"Onion",quantity:.2,unit:"kg"},{name:"Garlic paste",quantity:.02,unit:"kg"},{name:"Ginger paste",quantity:.015,unit:"kg"},{name:"Green chilies",quantity:.01,unit:"kg"},{name:"Yogurt",quantity:.1,unit:"kg"},{name:"Cooking oil",quantity:.05,unit:"liters"},{name:"Salt",quantity:.01,unit:"kg"},{name:"Red chili powder",quantity:.005,unit:"kg"},{name:"Garam masala",quantity:.003,unit:"kg"}]},{name:"Boneless Karahi",ingredients:[{name:"Chicken (boneless)",quantity:1,unit:"kg"},{name:"Tomatoes",quantity:.5,unit:"kg"},{name:"Onion",quantity:.2,unit:"kg"},{name:"Garlic paste",quantity:.02,unit:"kg"},{name:"Ginger paste",quantity:.015,unit:"kg"},{name:"Green chilies",quantity:.01,unit:"kg"},{name:"Yogurt",quantity:.1,unit:"kg"},{name:"Cooking oil",quantity:.05,unit:"liters"},{name:"Salt",quantity:.01,unit:"kg"},{name:"Red chili powder",quantity:.005,unit:"kg"},{name:"Garam masala",quantity:.003,unit:"kg"}]}],Pe=[{name:"Metro Cash & Carry",contactPerson:"Asif Khan",phone:"042-111-222-333",address:"Thokar Niaz Baig, Lahore"},{name:"Al-Fatah Electronics",contactPerson:"Bilal Ahmed",phone:"042-35756666",address:"Gulberg III, Lahore"},{name:"Hafeez Center Suppliers",contactPerson:"Chaudhry Sabir",phone:"0300-9876543",address:"Gulberg, Lahore"},{name:"Grain Market Wholesalers",contactPerson:"Mian Tariq",phone:"0321-5554443",address:"Akbari Mandi, Lahore"}],cn=()=>{fe&&(console.warn("Using Offline Demo Data (Firebase Access Denied or Config Missing)"),D(pe.map((rn,Xt)=>({...rn,id:`local-emp-${Xt}`}))),X(_e.map((rn,Xt)=>({...rn,id:`local-inv-${Xt}`}))),Oe(Be.map((rn,Xt)=>({...rn,id:`local-rec-${Xt}`}))),Q(Pe.map((rn,Xt)=>({...rn,id:`local-ven-${Xt}`}))),k([{id:"local-lab-1",name:"SIR Lab",systems:[]},{id:"local-lab-2",name:"SADU Lab",systems:[]}]),z([{id:"u1",email:"admin",password:"123",passwordChangeRequired:!0},{id:"u2",email:"ali.raza@example.com",password:"password",passwordChangeRequired:!0}]),ee([]),be([]),B([]),ye([]),ge([]),re([]),j([]),A([]))};try{const rn=nt(Ne,"employees"),Xt=await ha(rn);if(!fe)return;if(Xt.empty)for(const qe of pe)await An(rn,qe);const Or=nt(Ne,"inventory"),Ui=Gl(Or,Kl("type","==","Kitchen"));if((await ha(Ui)).empty)for(const qe of _e)await An(Or,qe);const Fr=nt(Ne,"recipes");if((await ha(Fr)).empty)for(const qe of Be)await An(Fr,qe);const ir=nt(Ne,"vendors");if((await ha(ir)).empty)for(const qe of Pe)await An(ir,qe);ne.push(Dn(nt(Ne,"employees"),qe=>D(qe.docs.map(De=>({...De.data(),id:De.id}))))),ne.push(Dn(nt(Ne,"users"),qe=>z(qe.docs.map(De=>({...De.data(),id:De.id}))))),ne.push(Dn(ot(Ne,"app_data","permissions"),qe=>{qe.exists()?O(qe.data()):ov(ot(Ne,"app_data","permissions"),{})})),ne.push(Dn(nt(Ne,"leaveRequests"),qe=>ee(qe.docs.map(De=>({...De.data(),id:De.id}))))),ne.push(Dn(Gl(nt(Ne,"payrollHistory"),Kl("date","!=",null)),qe=>{const De=qe.docs.map(wn=>({...wn.data(),id:wn.id}));De.sort((wn,At)=>new Date(At.date).getTime()-new Date(wn.date).getTime()),re(De)})),ne.push(Dn(nt(Ne,"inventory"),qe=>X(qe.docs.map(De=>({...De.data(),id:De.id}))))),ne.push(Dn(nt(Ne,"labs"),qe=>k(qe.docs.map(De=>({...De.data(),id:De.id}))))),ne.push(Dn(nt(Ne,"toners"),qe=>j(qe.docs.map(De=>({...De.data(),id:De.id}))))),ne.push(Dn(nt(Ne,"mrfs"),qe=>A(qe.docs.map(De=>({...De.data(),id:De.id}))))),ne.push(Dn(nt(Ne,"attendanceRecords"),qe=>be(qe.docs.map(De=>({...De.data(),id:De.id}))))),ne.push(Dn(nt(Ne,"supplyChainRequests"),qe=>B(qe.docs.map(De=>({...De.data(),id:De.id}))))),ne.push(Dn(nt(Ne,"purchaseRequests"),qe=>ye(qe.docs.map(De=>({...De.data(),id:De.id}))))),ne.push(Dn(nt(Ne,"recipes"),qe=>Oe(qe.docs.map(De=>({...De.data(),id:De.id}))))),ne.push(Dn(nt(Ne,"vendors"),qe=>Q(qe.docs.map(De=>({...De.data(),id:De.id}))))),ne.push(Dn(nt(Ne,"purchaseOrders"),qe=>ge(qe.docs.map(De=>({...De.data(),id:De.id})))))}catch(rn){console.warn("Firebase Connection Failed (Switching to Offline Mode):",rn),cn()}})(),()=>{fe=!1,ne.forEach(pe=>pe())}},[g]);const we=async(ne,fe)=>{if(!fe)return!1;if(ne==="admin"&&fe==="123")return n(!0),f("admin"),!0;const pe=ne==="admin"?"admin@masbot.erp":ne,_e=ne==="admin"&&fe.length<6?"123456":fe;try{await JE(md,pe,_e);const Be=Gl(nt(Ne,"users"),Kl("email","==",ne)),Pe=await ha(Be);if(!Pe.empty){const cn=Pe.docs[0].data();l(!!cn.passwordChangeRequired)}return!0}catch(Be){if(Be.code==="auth/user-not-found"&&ne==="admin")try{await XE(md,pe,_e);const Pe=Gl(nt(Ne,"users"),Kl("email","==",ne));return(await ha(Pe)).empty&&await An(nt(Ne,"users"),{email:ne,password:_e,passwordChangeRequired:!0}),!0}catch(Pe){return console.error("Failed to auto-create admin:",Pe),ne==="admin"&&fe==="123"?(n(!0),f("admin"),!0):!1}throw console.error("Login error",Be),Be}},F=async()=>{await n3(md),n(!1),f(null),p(null)},ce=ne=>{const fe=new Date(ne),pe=new Date().getFullYear(),_e=fe.getFullYear(),Be={annual:{total:14,used:0},sick:{total:7,used:0},casual:{total:6,used:0},maternity:{total:90,used:0},paternity:{total:7,used:0},alternateDayOff:{total:50,used:0},others:{total:0,used:0}};if(_e<pe)return Be;const Pe=(12-fe.getMonth())/12;return{annual:{total:Math.round(14*Pe),used:0},sick:{total:Math.round(7*Pe),used:0},casual:{total:Math.round(6*Pe),used:0},maternity:{total:90,used:0},paternity:{total:7,used:0},alternateDayOff:{total:Math.round(50*Pe),used:0},others:{total:0,used:0}}},me=async(ne,fe)=>{let pe={annual:{total:0,used:0},sick:{total:0,used:0},casual:{total:0,used:0},maternity:{total:0,used:0},paternity:{total:0,used:0},alternateDayOff:{total:0,used:0},others:{total:0,used:0}};ne.employmentType==="Permanent"&&(pe=ce(ne.joiningDate));const _e={...ne,leaveBalance:pe};await An(nt(Ne,"employees"),_e),await An(nt(Ne,"users"),{email:ne.email,password:fe,passwordChangeRequired:!0})},Ce=async(ne,fe)=>{const pe=ot(Ne,"employees",ne);if(fe.employmentType==="Permanent"){const _e=new Date().toISOString().split("T")[0],Be=ce(_e);await ln(pe,{...fe,leaveBalance:Be})}else await ln(pe,fe);return{success:!0,message:"Employee updated successfully"}},ut=async ne=>(await ln(ot(Ne,"employees",ne),{status:"Resigned"}),{success:!0,message:"Employee marked as resigned."}),tn=async(ne,fe)=>{const pe={};Object.keys(fe).forEach(Be=>{pe[Be]={},Object.keys(fe[Be]).forEach(Pe=>{pe[Be][Pe]={...fe[Be][Pe]}})});const _e={...R,[ne]:pe};await ov(ot(Ne,"app_data","permissions"),_e)},nn=async ne=>{await An(nt(Ne,"leaveRequests"),ne)},vn=async(ne,fe)=>{const pe=ot(Ne,"leaveRequests",ne),_e=te.find(Be=>Be.id===ne);if(fe==="Approve"&&_e)if(_e.status==="Pending HOD")await ln(pe,{status:"Pending HR"});else{await ln(pe,{status:"Approved"});const Be=new Date(_e.fromDate),Pe=new Date(_e.toDate),cn=Math.abs(Pe.getTime()-Be.getTime()),rn=Math.ceil(cn/(1e3*60*60*24))+1,Xt={"Casual Leave":"casual","Sick Leave":"sick","Annual Leave":"annual","Maternity Leave":"maternity","Paternity Leave":"paternity","Alternate Day Off":"alternateDayOff",Others:"others"}[_e.leaveType],Or=ot(Ne,"employees",_e.employeeId);await ln(Or,{[`leaveBalance.${Xt}.used`]:Em(rn)})}else await ln(pe,{status:"Rejected"})},Qt=async()=>{const ne=new Date().toLocaleString("default",{month:"long",year:"numeric"}),fe={id:"",date:new Date().toISOString(),monthYear:ne,totalPayroll:0,totalDeductions:0,totalNetPay:0,employeeRecords:w.map(pe=>({employeeId:pe.id,employeeName:`${pe.firstName} ${pe.lastName}`,department:pe.department,baseSalary:parseFloat(pe.salary),deductions:0,netPay:parseFloat(pe.salary)}))};return fe.totalPayroll=fe.employeeRecords.reduce((pe,_e)=>pe+_e.baseSalary,0),fe.totalNetPay=fe.employeeRecords.reduce((pe,_e)=>pe+_e.netPay,0),await An(nt(Ne,"payrollHistory"),fe),{success:!0,message:"Payroll run successfully."}},us=async ne=>{const fe=vo(Ne);return ne.forEach(pe=>{const _e=`${pe.employeeId}_${pe.date}`,Be=ot(Ne,"attendanceRecords",_e);fe.set(Be,pe)}),await fe.commit(),{success:!0,message:"Attendance records uploaded."}},nr=async ne=>{const fe=vo(Ne);ne.forEach(pe=>{const _e=ot(nt(Ne,"inventory"));fe.set(_e,pe)}),await fe.commit()},Dr=async ne=>{const{id:fe,...pe}=ne;await ln(ot(Ne,"inventory",fe),pe)},Pr=async ne=>{await Sm(ot(Ne,"inventory",ne))},kt=async(ne,fe)=>{const pe=ot(Ne,"labs",ne),_e=T.find(cn=>cn.id===ne);if(!_e)return;const Be={...fe,id:`SYS-${Date.now()}`},Pe=[..._e.systems,Be];await ln(pe,{systems:Pe})},Et=async(ne,fe)=>{const pe=ot(Ne,"labs",ne),_e=T.find(Pe=>Pe.id===ne);if(!_e)return;const Be=_e.systems.map(Pe=>Pe.id===fe.id?fe:Pe);await ln(pe,{systems:Be})},rr=async(ne,fe)=>{const pe=ot(Ne,"labs",ne),_e=T.find(Pe=>Pe.id===ne);if(!_e)return;const Be=_e.systems.filter(Pe=>Pe.id!==fe);await ln(pe,{systems:Be})},Fi=async ne=>{const fe=S.find(pe=>pe.model===ne.model);fe?await ln(ot(Ne,"toners",fe.id),{quantity:ne.filledQuantity+ne.emptyQuantity,compatiblePrinters:ne.compatiblePrinters}):(ne.filledQuantity>0&&await An(nt(Ne,"toners"),{model:ne.model,compatiblePrinters:ne.compatiblePrinters,quantity:ne.filledQuantity,status:"Filled"}),ne.emptyQuantity>0&&await An(nt(Ne,"toners"),{model:ne.model,compatiblePrinters:ne.compatiblePrinters,quantity:ne.emptyQuantity,status:"Empty"}))},Rr=async ne=>{const fe=vo(Ne);S.filter(pe=>pe.model===ne).forEach(pe=>fe.delete(ot(Ne,"toners",pe.id))),await fe.commit()},Y=async ne=>{alert("Toner status update logic")},Fe=async ne=>{alert("Toner status update logic")},rt=async ne=>{await An(nt(Ne,"mrfs"),ne)},_t=async ne=>{const{id:fe,...pe}=ne;await ln(ot(Ne,"mrfs",fe),pe)},En=async ne=>{await Sm(ot(Ne,"mrfs",ne))},Mr=async ne=>{const fe=vo(Ne);ne.forEach(pe=>{const _e=ot(Ne,"inventory",pe.id);fe.update(_e,{quantity:pe.newQuantity})}),await fe.commit()},_n=async ne=>{const fe={...ne,status:"Pending Account Manager"};await An(nt(Ne,"supplyChainRequests"),fe)},Ea=async(ne,fe,pe)=>{const _e={status:fe==="Approve"?"Pending Store":"Rejected",approvalDate:new Date().toISOString()};pe&&(_e.rejectionReason=pe),await ln(ot(Ne,"supplyChainRequests",ne),_e)},_a=async ne=>{const fe=Ae.find(Be=>Be.id===ne);if(!fe)return;const pe=vo(Ne),_e=ot(Ne,"supplyChainRequests",ne);pe.update(_e,{status:"Issued",issuedDate:new Date().toISOString()}),fe.items.forEach(Be=>{const Pe=ot(Ne,"inventory",Be.inventoryId);pe.update(Pe,{quantity:Em(-Be.quantityRequested)})}),await pe.commit()},$n=async ne=>{await ln(ot(Ne,"supplyChainRequests",ne),{status:"Forwarded to Purchase"})},Yt=async ne=>{await An(nt(Ne,"purchaseRequests"),ne)},Rn=async ne=>{const fe={...ne,status:"Pending Account Manager"};await An(nt(Ne,"purchaseOrders"),fe)},Tt=async(ne,fe)=>{await ln(ot(Ne,"purchaseOrders",ne),fe)},Ta=async ne=>{await Sm(ot(Ne,"purchaseOrders",ne))},Fs=async(ne,fe)=>{await ln(ot(Ne,"purchaseOrders",ne),{status:fe==="Approve"?"Approved":"Rejected"})},Ia=async(ne,fe)=>{const pe=he.find(Pe=>Pe.id===ne);if(!pe)return;const _e=vo(Ne),Be=ot(Ne,"purchaseOrders",ne);if(_e.update(Be,{status:"Received",grnNumber:fe.grnNumber,grnRemarks:fe.remarks,grnDate:new Date().toISOString()}),pe.items.forEach(Pe=>{if(Pe.inventoryId){const cn=ot(Ne,"inventory",Pe.inventoryId);_e.update(cn,{quantity:Em(Pe.quantity)})}}),pe.originalRequestId){const Pe=ot(Ne,"supplyChainRequests",pe.originalRequestId);_e.update(Pe,{status:"Pending Store"})}await _e.commit()},sr=async ne=>{if(!g)return{success:!1,message:"No user"};const fe=Gl(nt(Ne,"users"),Kl("email","==",g==="admin"?"admin":g)),pe=await ha(fe);if(!pe.empty){const _e=pe.docs[0];return await ln(ot(Ne,"users",_e.id),{password:ne,passwordChangeRequired:!1}),l(!1),{success:!0,message:"Password updated"}}return{success:!1,message:"User record not found"}},Lr=wu.useMemo(()=>g==="admin"?["hr","inventory_management","supply_chain","finance","student","website"]:!g||!R[g]?[]:Object.keys(R[g]).filter(ne=>{const fe=R[g][ne];return Object.values(fe).some(pe=>pe.view)}),[g,R]);if(x)return a.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 text-slate-500",children:"Loading ERP System..."});if(!e)return a.jsx(JN,{onLogin:we});if(i)return a.jsx(aj,{onUpdatePassword:sr,onSkip:()=>l(!1)});if(c)switch(c){case"hr":return a.jsx(Pk,{onBack:()=>p(null),employees:w,users:P,onAddEmployee:me,onLogout:F,allPermissions:R,onUserPermissionsChange:tn,currentUserEmail:g||"",leaveRequests:te,onAddLeaveRequest:nn,onLeaveRequestAction:vn,onResignEmployee:ut,payrollHistory:ue,onRunPayroll:Qt,onUpdateEmployee:Ce,attendanceRecords:_,onUploadAttendance:us});case"inventory_management":return a.jsx(Xk,{onBack:()=>p(null),onLogout:F,currentUserEmail:g||"",permissions:(s=R[g||""])==null?void 0:s.inventory_management,inventory:$,employees:w,labs:T,toners:S,mrfs:E,recipes:Ee,onAddNewAsset:nr,onUpdateAsset:Dr,onDeleteAsset:Pr,onResignEmployee:()=>{},onAddSystem:kt,onUpdateSystem:Et,onDeleteSystem:rr,onSaveTonerModel:Fi,onDeleteTonerModel:Rr,onMarkTonerEmpty:Y,onMarkTonerFilled:Fe,onAddNewMRF:rt,onUpdateMRF:_t,onDeleteMRF:En,onUpdateKitchenStock:Mr,onCreateSCRequest:_n});case"supply_chain":return a.jsx(sj,{onBack:()=>p(null),onLogout:F,currentUserEmail:g||"",inventory:$,employees:w,requests:Ae,purchaseRequests:de,purchaseOrders:he,recipes:Ee,vendors:L,onCreateRequest:_n,onActionRequest:Ea,onIssueRequest:_a,onForwardToPurchase:$n,onCreatePurchaseRequest:Yt,onCreatePO:Rn,onUpdatePO:Tt,onDeletePO:Ta,onPOAction:Fs,onGRN:Ia,onAddNewAsset:nr,onUpdateAsset:Dr,onDeleteAsset:Pr});default:return a.jsxs("div",{className:"flex h-screen items-center justify-center flex-col gap-4",children:[a.jsx("p",{children:"Module under construction"}),a.jsx("button",{onClick:()=>p(null),className:"text-blue-500 underline",children:"Go Back"})]})}const jt=w.find(ne=>ne.email===g);return jt&&jt.role==="Employee"&&g!=="admin"?a.jsx(tk,{employee:jt,onModuleSelect:p,onLogout:F,accessibleModules:Lr}):a.jsx(ek,{onModuleSelect:p,onLogout:F,accessibleModules:g==="admin"?void 0:Lr})},c2=document.getElementById("root");if(!c2)throw new Error("Could not find root element to mount to");const x_=XN.createRoot(c2);x_.render(a.jsx(wu.StrictMode,{children:a.jsx(g_,{})}));
