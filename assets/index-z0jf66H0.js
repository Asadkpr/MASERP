(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();function tN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Dg={exports:{}},du={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function CA(){if(B_)return du;B_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,c){var u=null;if(c!==void 0&&(u=""+c),a.key!==void 0&&(u=""+a.key),"key"in a){c={};for(var f in a)f!=="key"&&(c[f]=a[f])}else c=a;return a=c.ref,{$$typeof:n,type:r,key:u,ref:a!==void 0?a:null,props:c}}return du.Fragment=e,du.jsx=t,du.jsxs=t,du}var z_;function kA(){return z_||(z_=1,Dg.exports=CA()),Dg.exports}var o=kA(),Mg={exports:{}},Be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function DA(){if(H_)return Be;H_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),E=Symbol.iterator;function A(P){return P===null||typeof P!="object"?null:(P=E&&P[E]||P["@@iterator"],typeof P=="function"?P:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,O={};function H(P,$,ce){this.props=P,this.context=$,this.refs=O,this.updater=ce||V}H.prototype.isReactComponent={},H.prototype.setState=function(P,$){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,$,"setState")},H.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function ae(){}ae.prototype=H.prototype;function ee(P,$,ce){this.props=P,this.context=$,this.refs=O,this.updater=ce||V}var z=ee.prototype=new ae;z.constructor=ee,R(z,H.prototype),z.isPureReactComponent=!0;var F=Array.isArray;function G(){}var C={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function S(P,$,ce){var ve=ce.ref;return{$$typeof:n,type:P,key:$,ref:ve!==void 0?ve:null,props:ce}}function N(P,$){return S(P.type,$,P.props)}function I(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function D(P){var $={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ce){return $[ce]})}var M=/\/+/g;function Te(P,$){return typeof P=="object"&&P!==null&&P.key!=null?D(""+P.key):$.toString(36)}function Fe(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(G,G):(P.status="pending",P.then(function($){P.status==="pending"&&(P.status="fulfilled",P.value=$)},function($){P.status==="pending"&&(P.status="rejected",P.reason=$)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function Y(P,$,ce,ve,we){var q=typeof P;(q==="undefined"||q==="boolean")&&(P=null);var me=!1;if(P===null)me=!0;else switch(q){case"bigint":case"string":case"number":me=!0;break;case"object":switch(P.$$typeof){case n:case e:me=!0;break;case y:return me=P._init,Y(me(P._payload),$,ce,ve,we)}}if(me)return we=we(P),me=ve===""?"."+Te(P,0):ve,F(we)?(ce="",me!=null&&(ce=me.replace(M,"$&/")+"/"),Y(we,$,ce,"",function($e){return $e})):we!=null&&(I(we)&&(we=N(we,ce+(we.key==null||P&&P.key===we.key?"":(""+we.key).replace(M,"$&/")+"/")+me)),$.push(we)),1;me=0;var Ee=ve===""?".":ve+":";if(F(P))for(var ke=0;ke<P.length;ke++)ve=P[ke],q=Ee+Te(ve,ke),me+=Y(ve,$,ce,q,we);else if(ke=A(P),typeof ke=="function")for(P=ke.call(P),ke=0;!(ve=P.next()).done;)ve=ve.value,q=Ee+Te(ve,ke++),me+=Y(ve,$,ce,q,we);else if(q==="object"){if(typeof P.then=="function")return Y(Fe(P),$,ce,ve,we);throw $=String(P),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return me}function le(P,$,ce){if(P==null)return P;var ve=[],we=0;return Y(P,ve,"","",function(q){return $.call(ce,q,we++)}),ve}function ye(P){if(P._status===-1){var $=P._result;$=$(),$.then(function(ce){(P._status===0||P._status===-1)&&(P._status=1,P._result=ce)},function(ce){(P._status===0||P._status===-1)&&(P._status=2,P._result=ce)}),P._status===-1&&(P._status=0,P._result=$)}if(P._status===1)return P._result.default;throw P._result}var Re=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},qe={map:le,forEach:function(P,$,ce){le(P,function(){$.apply(this,arguments)},ce)},count:function(P){var $=0;return le(P,function(){$++}),$},toArray:function(P){return le(P,function($){return $})||[]},only:function(P){if(!I(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Be.Activity=v,Be.Children=qe,Be.Component=H,Be.Fragment=t,Be.Profiler=a,Be.PureComponent=ee,Be.StrictMode=r,Be.Suspense=m,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Be.__COMPILER_RUNTIME={__proto__:null,c:function(P){return C.H.useMemoCache(P)}},Be.cache=function(P){return function(){return P.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(P,$,ce){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ve=R({},P.props),we=P.key;if($!=null)for(q in $.key!==void 0&&(we=""+$.key),$)!T.call($,q)||q==="key"||q==="__self"||q==="__source"||q==="ref"&&$.ref===void 0||(ve[q]=$[q]);var q=arguments.length-2;if(q===1)ve.children=ce;else if(1<q){for(var me=Array(q),Ee=0;Ee<q;Ee++)me[Ee]=arguments[Ee+2];ve.children=me}return S(P.type,we,ve)},Be.createContext=function(P){return P={$$typeof:u,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:c,_context:P},P},Be.createElement=function(P,$,ce){var ve,we={},q=null;if($!=null)for(ve in $.key!==void 0&&(q=""+$.key),$)T.call($,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(we[ve]=$[ve]);var me=arguments.length-2;if(me===1)we.children=ce;else if(1<me){for(var Ee=Array(me),ke=0;ke<me;ke++)Ee[ke]=arguments[ke+2];we.children=Ee}if(P&&P.defaultProps)for(ve in me=P.defaultProps,me)we[ve]===void 0&&(we[ve]=me[ve]);return S(P,q,we)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(P){return{$$typeof:f,render:P}},Be.isValidElement=I,Be.lazy=function(P){return{$$typeof:y,_payload:{_status:-1,_result:P},_init:ye}},Be.memo=function(P,$){return{$$typeof:x,type:P,compare:$===void 0?null:$}},Be.startTransition=function(P){var $=C.T,ce={};C.T=ce;try{var ve=P(),we=C.S;we!==null&&we(ce,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(G,Re)}catch(q){Re(q)}finally{$!==null&&ce.types!==null&&($.types=ce.types),C.T=$}},Be.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Be.use=function(P){return C.H.use(P)},Be.useActionState=function(P,$,ce){return C.H.useActionState(P,$,ce)},Be.useCallback=function(P,$){return C.H.useCallback(P,$)},Be.useContext=function(P){return C.H.useContext(P)},Be.useDebugValue=function(){},Be.useDeferredValue=function(P,$){return C.H.useDeferredValue(P,$)},Be.useEffect=function(P,$){return C.H.useEffect(P,$)},Be.useEffectEvent=function(P){return C.H.useEffectEvent(P)},Be.useId=function(){return C.H.useId()},Be.useImperativeHandle=function(P,$,ce){return C.H.useImperativeHandle(P,$,ce)},Be.useInsertionEffect=function(P,$){return C.H.useInsertionEffect(P,$)},Be.useLayoutEffect=function(P,$){return C.H.useLayoutEffect(P,$)},Be.useMemo=function(P,$){return C.H.useMemo(P,$)},Be.useOptimistic=function(P,$){return C.H.useOptimistic(P,$)},Be.useReducer=function(P,$,ce){return C.H.useReducer(P,$,ce)},Be.useRef=function(P){return C.H.useRef(P)},Be.useState=function(P){return C.H.useState(P)},Be.useSyncExternalStore=function(P,$,ce){return C.H.useSyncExternalStore(P,$,ce)},Be.useTransition=function(){return C.H.useTransition()},Be.version="19.2.3",Be}var G_;function L0(){return G_||(G_=1,Mg.exports=DA()),Mg.exports}var L=L0();const hd=tN(L);var Pg={exports:{}},hu={},Og={exports:{}},Vg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function MA(){return K_||(K_=1,(function(n){function e(Y,le){var ye=Y.length;Y.push(le);e:for(;0<ye;){var Re=ye-1>>>1,qe=Y[Re];if(0<a(qe,le))Y[Re]=le,Y[ye]=qe,ye=Re;else break e}}function t(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var le=Y[0],ye=Y.pop();if(ye!==le){Y[0]=ye;e:for(var Re=0,qe=Y.length,P=qe>>>1;Re<P;){var $=2*(Re+1)-1,ce=Y[$],ve=$+1,we=Y[ve];if(0>a(ce,ye))ve<qe&&0>a(we,ce)?(Y[Re]=we,Y[ve]=ye,Re=ve):(Y[Re]=ce,Y[$]=ye,Re=$);else if(ve<qe&&0>a(we,ye))Y[Re]=we,Y[ve]=ye,Re=ve;else break e}}return le}function a(Y,le){var ye=Y.sortIndex-le.sortIndex;return ye!==0?ye:Y.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var m=[],x=[],y=1,v=null,E=3,A=!1,V=!1,R=!1,O=!1,H=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function z(Y){for(var le=t(x);le!==null;){if(le.callback===null)r(x);else if(le.startTime<=Y)r(x),le.sortIndex=le.expirationTime,e(m,le);else break;le=t(x)}}function F(Y){if(R=!1,z(Y),!V)if(t(m)!==null)V=!0,G||(G=!0,D());else{var le=t(x);le!==null&&Fe(F,le.startTime-Y)}}var G=!1,C=-1,T=5,S=-1;function N(){return O?!0:!(n.unstable_now()-S<T)}function I(){if(O=!1,G){var Y=n.unstable_now();S=Y;var le=!0;try{e:{V=!1,R&&(R=!1,ae(C),C=-1),A=!0;var ye=E;try{t:{for(z(Y),v=t(m);v!==null&&!(v.expirationTime>Y&&N());){var Re=v.callback;if(typeof Re=="function"){v.callback=null,E=v.priorityLevel;var qe=Re(v.expirationTime<=Y);if(Y=n.unstable_now(),typeof qe=="function"){v.callback=qe,z(Y),le=!0;break t}v===t(m)&&r(m),z(Y)}else r(m);v=t(m)}if(v!==null)le=!0;else{var P=t(x);P!==null&&Fe(F,P.startTime-Y),le=!1}}break e}finally{v=null,E=ye,A=!1}le=void 0}}finally{le?D():G=!1}}}var D;if(typeof ee=="function")D=function(){ee(I)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,Te=M.port2;M.port1.onmessage=I,D=function(){Te.postMessage(null)}}else D=function(){H(I,0)};function Fe(Y,le){C=H(function(){Y(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(Y){switch(E){case 1:case 2:case 3:var le=3;break;default:le=E}var ye=E;E=le;try{return Y()}finally{E=ye}},n.unstable_requestPaint=function(){O=!0},n.unstable_runWithPriority=function(Y,le){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ye=E;E=Y;try{return le()}finally{E=ye}},n.unstable_scheduleCallback=function(Y,le,ye){var Re=n.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Re+ye:Re):ye=Re,Y){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=ye+qe,Y={id:y++,callback:le,priorityLevel:Y,startTime:ye,expirationTime:qe,sortIndex:-1},ye>Re?(Y.sortIndex=ye,e(x,Y),t(m)===null&&Y===t(x)&&(R?(ae(C),C=-1):R=!0,Fe(F,ye-Re))):(Y.sortIndex=qe,e(m,Y),V||A||(V=!0,G||(G=!0,D()))),Y},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(Y){var le=E;return function(){var ye=E;E=le;try{return Y.apply(this,arguments)}finally{E=ye}}}})(Vg)),Vg}var $_;function PA(){return $_||($_=1,Og.exports=MA()),Og.exports}var Lg={exports:{}},Cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function OA(){if(Q_)return Cn;Q_=1;var n=L0();function e(m){var x="https://react.dev/errors/"+m;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)x+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function c(m,x,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:m,containerInfo:x,implementation:y}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,x){if(m==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Cn.createPortal=function(m,x){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return c(m,x,null,y)},Cn.flushSync=function(m){var x=u.T,y=r.p;try{if(u.T=null,r.p=2,m)return m()}finally{u.T=x,r.p=y,r.d.f()}},Cn.preconnect=function(m,x){typeof m=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,r.d.C(m,x))},Cn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},Cn.preinit=function(m,x){if(typeof m=="string"&&x&&typeof x.as=="string"){var y=x.as,v=f(y,x.crossOrigin),E=typeof x.integrity=="string"?x.integrity:void 0,A=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;y==="style"?r.d.S(m,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:v,integrity:E,fetchPriority:A}):y==="script"&&r.d.X(m,{crossOrigin:v,integrity:E,fetchPriority:A,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Cn.preinitModule=function(m,x){if(typeof m=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var y=f(x.as,x.crossOrigin);r.d.M(m,{crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&r.d.M(m)},Cn.preload=function(m,x){if(typeof m=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var y=x.as,v=f(y,x.crossOrigin);r.d.L(m,y,{crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Cn.preloadModule=function(m,x){if(typeof m=="string")if(x){var y=f(x.as,x.crossOrigin);r.d.m(m,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else r.d.m(m)},Cn.requestFormReset=function(m){r.d.r(m)},Cn.unstable_batchedUpdates=function(m,x){return m(x)},Cn.useFormState=function(m,x,y){return u.H.useFormState(m,x,y)},Cn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Cn.version="19.2.3",Cn}var Y_;function VA(){if(Y_)return Lg.exports;Y_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Lg.exports=OA(),Lg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_;function LA(){if(W_)return hu;W_=1;var n=PA(),e=L0(),t=VA();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function c(s){var i=s,l=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(l=i.return),s=i.return;while(s)}return i.tag===3?l:null}function u(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function f(s){if(s.tag===31){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function m(s){if(c(s)!==s)throw Error(r(188))}function x(s){var i=s.alternate;if(!i){if(i=c(s),i===null)throw Error(r(188));return i!==s?null:s}for(var l=s,d=i;;){var p=l.return;if(p===null)break;var g=p.alternate;if(g===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===l)return m(p),s;if(g===d)return m(p),i;g=g.sibling}throw Error(r(188))}if(l.return!==d.return)l=p,d=g;else{for(var _=!1,j=p.child;j;){if(j===l){_=!0,l=p,d=g;break}if(j===d){_=!0,d=p,l=g;break}j=j.sibling}if(!_){for(j=g.child;j;){if(j===l){_=!0,l=g,d=p;break}if(j===d){_=!0,d=g,l=p;break}j=j.sibling}if(!_)throw Error(r(189))}}if(l.alternate!==d)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?s:i}function y(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=y(s),i!==null)return i;s=s.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function D(s){return s===null||typeof s!="object"?null:(s=I&&s[I]||s["@@iterator"],typeof s=="function"?s:null)}var M=Symbol.for("react.client.reference");function Te(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===M?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case H:return"Profiler";case O:return"StrictMode";case F:return"Suspense";case G:return"SuspenseList";case S:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case V:return"Portal";case ee:return s.displayName||"Context";case ae:return(s._context.displayName||"Context")+".Consumer";case z:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case C:return i=s.displayName||null,i!==null?i:Te(s.type)||"Memo";case T:i=s._payload,s=s._init;try{return Te(s(i))}catch{}}return null}var Fe=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Re=[],qe=-1;function P(s){return{current:s}}function $(s){0>qe||(s.current=Re[qe],Re[qe]=null,qe--)}function ce(s,i){qe++,Re[qe]=s.current,s.current=i}var ve=P(null),we=P(null),q=P(null),me=P(null);function Ee(s,i){switch(ce(q,i),ce(we,s),ce(ve,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?d_(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=d_(i),s=h_(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}$(ve),ce(ve,s)}function ke(){$(ve),$(we),$(q)}function $e(s){s.memoizedState!==null&&ce(me,s);var i=ve.current,l=h_(i,s.type);i!==l&&(ce(we,s),ce(ve,l))}function Xt(s){we.current===s&&($(ve),$(we)),me.current===s&&($(me),ou._currentValue=ye)}var ie,De;function Tt(s){if(ie===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);ie=i&&i[1]||"",De=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ie+s+De}var zt=!1;function Ws(s,i){if(!s||zt)return"";zt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(i){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ne){var Z=ne}Reflect.construct(s,[],fe)}else{try{fe.call()}catch(ne){Z=ne}s.call(fe.prototype)}}else{try{throw Error()}catch(ne){Z=ne}(fe=s())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ne){if(ne&&Z&&typeof ne.stack=="string")return[ne.stack,Z.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=d.DetermineComponentFrameRoot(),_=g[0],j=g[1];if(_&&j){var U=_.split(`
`),X=j.split(`
`);for(p=d=0;d<U.length&&!U[d].includes("DetermineComponentFrameRoot");)d++;for(;p<X.length&&!X[p].includes("DetermineComponentFrameRoot");)p++;if(d===U.length||p===X.length)for(d=U.length-1,p=X.length-1;1<=d&&0<=p&&U[d]!==X[p];)p--;for(;1<=d&&0<=p;d--,p--)if(U[d]!==X[p]){if(d!==1||p!==1)do if(d--,p--,0>p||U[d]!==X[p]){var oe=`
`+U[d].replace(" at new "," at ");return s.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",s.displayName)),oe}while(1<=d&&0<=p);break}}}finally{zt=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Tt(l):""}function li(s,i){switch(s.tag){case 26:case 27:case 5:return Tt(s.type);case 16:return Tt("Lazy");case 13:return s.child!==i&&i!==null?Tt("Suspense Fallback"):Tt("Suspense");case 19:return Tt("SuspenseList");case 0:case 15:return Ws(s.type,!1);case 11:return Ws(s.type.render,!1);case 1:return Ws(s.type,!0);case 31:return Tt("Activity");default:return""}}function Xs(s){try{var i="",l=null;do i+=li(s,l),l=s,s=s.return;while(s);return i}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Os=Object.prototype.hasOwnProperty,Vs=n.unstable_scheduleCallback,Ls=n.unstable_cancelCallback,_a=n.unstable_shouldYield,vs=n.unstable_requestPaint,Mt=n.unstable_now,Ht=n.unstable_getCurrentPriorityLevel,Rt=n.unstable_ImmediatePriority,Ct=n.unstable_UserBlockingPriority,is=n.unstable_NormalPriority,Mo=n.unstable_LowPriority,wa=n.unstable_IdlePriority,pc=n.log,Tr=n.unstable_setDisableYieldValue,Us=null,dn=null;function Gn(s){if(typeof pc=="function"&&Tr(s),dn&&typeof dn.setStrictMode=="function")try{dn.setStrictMode(Us,s)}catch{}}var bn=Math.clz32?Math.clz32:Po,gc=Math.log,Na=Math.LN2;function Po(s){return s>>>=0,s===0?32:31-(gc(s)/Na|0)|0}var Er=256,_s=262144,Js=4194304;function as(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Kn(s,i,l){var d=s.pendingLanes;if(d===0)return 0;var p=0,g=s.suspendedLanes,_=s.pingedLanes;s=s.warmLanes;var j=d&134217727;return j!==0?(d=j&~g,d!==0?p=as(d):(_&=j,_!==0?p=as(_):l||(l=j&~s,l!==0&&(p=as(l))))):(j=d&~g,j!==0?p=as(j):_!==0?p=as(_):l||(l=d&~s,l!==0&&(p=as(l)))),p===0?0:i!==0&&i!==p&&(i&g)===0&&(g=p&-p,l=i&-i,g>=l||g===32&&(l&4194048)!==0)?i:p}function Zs(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function ci(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ta(){var s=Js;return Js<<=1,(Js&62914560)===0&&(Js=4194304),s}function Fs(s){for(var i=[],l=0;31>l;l++)i.push(s);return i}function er(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function an(s,i,l,d,p,g){var _=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var j=s.entanglements,U=s.expirationTimes,X=s.hiddenUpdates;for(l=_&~l;0<l;){var oe=31-bn(l),fe=1<<oe;j[oe]=0,U[oe]=-1;var Z=X[oe];if(Z!==null)for(X[oe]=null,oe=0;oe<Z.length;oe++){var ne=Z[oe];ne!==null&&(ne.lane&=-536870913)}l&=~fe}d!==0&&Ea(s,d,0),g!==0&&p===0&&s.tag!==0&&(s.suspendedLanes|=g&~(_&~i))}function Ea(s,i,l){s.pendingLanes|=i,s.suspendedLanes&=~i;var d=31-bn(i);s.entangledLanes|=i,s.entanglements[d]=s.entanglements[d]|1073741824|l&261930}function qs(s,i){var l=s.entangledLanes|=i;for(s=s.entanglements;l;){var d=31-bn(l),p=1<<d;p&i|s[d]&i&&(s[d]|=i),l&=~p}}function ws(s,i){var l=i&-i;return l=(l&42)!==0?1:ui(l),(l&(s.suspendedLanes|i))!==0?0:l}function ui(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function te(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function xe(){var s=le.p;return s!==0?s:(s=window.event,s===void 0?32:P_(s.type))}function he(s,i){var l=le.p;try{return le.p=s,i()}finally{le.p=l}}var de=Math.random().toString(36).slice(2),Ve="__reactFiber$"+de,nt="__reactProps$"+de,vn="__reactContainer$"+de,di="__reactEvents$"+de,tr="__reactListeners$"+de,Md="__reactHandles$"+de,xc="__reactResources$"+de,Sr="__reactMarker$"+de;function Sa(s){delete s[Ve],delete s[nt],delete s[di],delete s[tr],delete s[Md]}function Ar(s){var i=s[Ve];if(i)return i;for(var l=s.parentNode;l;){if(i=l[vn]||l[Ve]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(s=b_(s);s!==null;){if(l=s[Ve])return l;s=b_(s)}return i}s=l,l=s.parentNode}return null}function jr(s){if(s=s[Ve]||s[vn]){var i=s.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return s}return null}function Aa(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function Bs(s){var i=s[xc];return i||(i=s[xc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Gt(s){s[Sr]=!0}var Oo=new Set,hi={};function Mn(s,i){nr(s,i),nr(s+"Capture",i)}function nr(s,i){for(hi[s]=i,s=0;s<i.length;s++)Oo.add(i[s])}var Mm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yc={},bc={};function Pd(s){return Os.call(bc,s)?!0:Os.call(yc,s)?!1:Mm.test(s)?bc[s]=!0:(yc[s]=!0,!1)}function fi(s,i,l){if(Pd(i))if(l===null)s.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var d=i.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+l)}}function mi(s,i,l){if(l===null)s.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+l)}}function Ns(s,i,l,d){if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(i,l,""+d)}}function Pn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Od(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Pm(s,i,l){var d=Object.getOwnPropertyDescriptor(s.constructor.prototype,i);if(!s.hasOwnProperty(i)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var p=d.get,g=d.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return p.call(this)},set:function(_){l=""+_,g.call(this,_)}}),Object.defineProperty(s,i,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function Vo(s){if(!s._valueTracker){var i=Od(s)?"checked":"value";s._valueTracker=Pm(s,i,""+s[i])}}function vc(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var l=i.getValue(),d="";return s&&(d=Od(s)?s.checked?"true":"false":s.value),s=d,s!==l?(i.setValue(s),!0):!1}function Lo(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ir=/[\n"\\]/g;function Pt(s){return s.replace(Ir,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function pi(s,i,l,d,p,g,_,j){s.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?s.type=_:s.removeAttribute("type"),i!=null?_==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+Pn(i)):s.value!==""+Pn(i)&&(s.value=""+Pn(i)):_!=="submit"&&_!=="reset"||s.removeAttribute("value"),i!=null?Uo(s,_,Pn(i)):l!=null?Uo(s,_,Pn(l)):d!=null&&s.removeAttribute("value"),p==null&&g!=null&&(s.defaultChecked=!!g),p!=null&&(s.checked=p&&typeof p!="function"&&typeof p!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?s.name=""+Pn(j):s.removeAttribute("name")}function ja(s,i,l,d,p,g,_,j){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(s.type=g),i!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){Vo(s);return}l=l!=null?""+Pn(l):"",i=i!=null?""+Pn(i):l,j||i===s.value||(s.value=i),s.defaultValue=i}d=d??p,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=j?s.checked:!!d,s.defaultChecked=!!d,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.name=_),Vo(s)}function Uo(s,i,l){i==="number"&&Lo(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function it(s,i,l,d){if(s=s.options,i){i={};for(var p=0;p<l.length;p++)i["$"+l[p]]=!0;for(l=0;l<s.length;l++)p=i.hasOwnProperty("$"+s[l].value),s[l].selected!==p&&(s[l].selected=p),p&&d&&(s[l].defaultSelected=!0)}else{for(l=""+Pn(l),i=null,p=0;p<s.length;p++){if(s[p].value===l){s[p].selected=!0,d&&(s[p].defaultSelected=!0);return}i!==null||s[p].disabled||(i=s[p])}i!==null&&(i.selected=!0)}}function Ia(s,i,l){if(i!=null&&(i=""+Pn(i),i!==s.value&&(s.value=i),l==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=l!=null?""+Pn(l):""}function gi(s,i,l,d){if(i==null){if(d!=null){if(l!=null)throw Error(r(92));if(Fe(d)){if(1<d.length)throw Error(r(93));d=d[0]}l=d}l==null&&(l=""),i=l}l=Pn(i),s.defaultValue=l,d=s.textContent,d===l&&d!==""&&d!==null&&(s.value=d),Vo(s)}function Ts(s,i){if(i){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=i;return}}s.textContent=i}var Om=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _c(s,i,l){var d=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":d?s.setProperty(i,l):typeof l!="number"||l===0||Om.has(i)?i==="float"?s.cssFloat=l:s[i]=(""+l).trim():s[i]=l+"px"}function Vd(s,i,l){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||i!=null&&i.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var p in i)d=i[p],i.hasOwnProperty(p)&&l[p]!==d&&_c(s,p,d)}else for(var g in i)i.hasOwnProperty(g)&&_c(s,g,i[g])}function wc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Lm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sr(s){return Lm.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function hn(){}var Fo=null;function qo(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Rr=null,os=null;function Ld(s){var i=jr(s);if(i&&(s=i.stateNode)){var l=s[nt]||null;e:switch(s=i.stateNode,i.type){case"input":if(pi(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Pt(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var d=l[i];if(d!==s&&d.form===s.form){var p=d[nt]||null;if(!p)throw Error(r(90));pi(d,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<l.length;i++)d=l[i],d.form===s.form&&vc(d)}break e;case"textarea":Ia(s,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&it(s,!!l.multiple,i,!1)}}}var Nc=!1;function Ud(s,i,l){if(Nc)return s(i,l);Nc=!0;try{var d=s(i);return d}finally{if(Nc=!1,(Rr!==null||os!==null)&&(Ph(),Rr&&(i=Rr,s=os,os=Rr=null,Ld(i),s)))for(i=0;i<s.length;i++)Ld(s[i])}}function $n(s,i){var l=s.stateNode;if(l===null)return null;var d=l[nt]||null;if(d===null)return null;l=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(r(231,i,typeof l));return l}var zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tc=!1;if(zs)try{var rr={};Object.defineProperty(rr,"passive",{get:function(){Tc=!0}}),window.addEventListener("test",rr,rr),window.removeEventListener("test",rr,rr)}catch{Tc=!1}var ls=null,Bo=null,ir=null;function xi(){if(ir)return ir;var s,i=Bo,l=i.length,d,p="value"in ls?ls.value:ls.textContent,g=p.length;for(s=0;s<l&&i[s]===p[s];s++);var _=l-s;for(d=1;d<=_&&i[l-d]===p[g-d];d++);return ir=p.slice(s,1<d?1-d:void 0)}function Ra(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function yi(){return!0}function vt(){return!1}function Rn(s){function i(l,d,p,g,_){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=g,this.target=_,this.currentTarget=null;for(var j in s)s.hasOwnProperty(j)&&(l=s[j],this[j]=l?l(g):g[j]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?yi:vt,this.isPropagationStopped=vt,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=yi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=yi)},persist:function(){},isPersistent:yi}),i}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ca=Rn(Cr),bi=v({},Cr,{view:0,detail:0}),Fd=Rn(bi),vi,zo,On,ka=v({},bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wi,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==On&&(On&&s.type==="mousemove"?(vi=s.screenX-On.screenX,zo=s.screenY-On.screenY):zo=vi=0,On=s),vi)},movementY:function(s){return"movementY"in s?s.movementY:zo}}),qd=Rn(ka),Da=v({},ka,{dataTransfer:0}),Bd=Rn(Da),Ec=v({},bi,{relatedTarget:0}),_i=Rn(Ec),zd=v({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ho=Rn(zd),Um=v({},Cr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Hd=Rn(Um),Ma=v({},Cr,{data:0}),Sc=Rn(Ma),Gd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ac={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kd(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=jc[s])?!!i[s]:!1}function wi(){return Kd}var $d=v({},bi,{key:function(s){if(s.key){var i=Gd[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Ra(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Ac[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wi,charCode:function(s){return s.type==="keypress"?Ra(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ra(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Qd=Rn($d),kr=v({},ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ic=Rn(kr),Yd=v({},bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wi}),Wd=Rn(Yd),Xd=v({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Go=Rn(Xd),Vn=v({},ka,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Jd=Rn(Vn),Zd=v({},Cr,{newState:0,oldState:0}),Ni=Rn(Zd),h=[9,13,27,32],b=zs&&"CompositionEvent"in window,w=null;zs&&"documentMode"in document&&(w=document.documentMode);var k=zs&&"TextEvent"in window&&!w,Q=zs&&(!b||w&&8<w&&11>=w),re=" ",_e=!1;function ut(s,i){switch(s){case"keyup":return h.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jt(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Qe=!1;function fn(s,i){switch(s){case"compositionend":return Jt(i);case"keypress":return i.which!==32?null:(_e=!0,re);case"textInput":return s=i.data,s===re&&_e?null:s;default:return null}}function mn(s,i){if(Qe)return s==="compositionend"||!b&&ut(s,i)?(s=xi(),ir=Bo=ls=null,Qe=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Q&&i.locale!=="ko"?null:i.data;default:return null}}var Ti={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qn(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!Ti[s.type]:i==="textarea"}function Pa(s,i,l,d){Rr?os?os.push(d):os=[d]:Rr=d,i=Bh(i,"onChange"),0<i.length&&(l=new Ca("onChange","change",null,l,d),s.push({event:l,listeners:i}))}var Dr=null,Rc=null;function rS(s){i_(s,0)}function eh(s){var i=Aa(s);if(vc(i))return s}function Ty(s,i){if(s==="change")return i}var Ey=!1;if(zs){var Fm;if(zs){var qm="oninput"in document;if(!qm){var Sy=document.createElement("div");Sy.setAttribute("oninput","return;"),qm=typeof Sy.oninput=="function"}Fm=qm}else Fm=!1;Ey=Fm&&(!document.documentMode||9<document.documentMode)}function Ay(){Dr&&(Dr.detachEvent("onpropertychange",jy),Rc=Dr=null)}function jy(s){if(s.propertyName==="value"&&eh(Rc)){var i=[];Pa(i,Rc,s,qo(s)),Ud(rS,i)}}function iS(s,i,l){s==="focusin"?(Ay(),Dr=i,Rc=l,Dr.attachEvent("onpropertychange",jy)):s==="focusout"&&Ay()}function aS(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return eh(Rc)}function oS(s,i){if(s==="click")return eh(i)}function lS(s,i){if(s==="input"||s==="change")return eh(i)}function cS(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var cs=typeof Object.is=="function"?Object.is:cS;function Cc(s,i){if(cs(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var l=Object.keys(s),d=Object.keys(i);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!Os.call(i,p)||!cs(s[p],i[p]))return!1}return!0}function Iy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ry(s,i){var l=Iy(s);s=0;for(var d;l;){if(l.nodeType===3){if(d=s+l.textContent.length,s<=i&&d>=i)return{node:l,offset:i-s};s=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Iy(l)}}function Cy(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?Cy(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function ky(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=Lo(s.document);i instanceof s.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)s=i.contentWindow;else break;i=Lo(s.document)}return i}function Bm(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var uS=zs&&"documentMode"in document&&11>=document.documentMode,Ko=null,zm=null,kc=null,Hm=!1;function Dy(s,i,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Hm||Ko==null||Ko!==Lo(d)||(d=Ko,"selectionStart"in d&&Bm(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),kc&&Cc(kc,d)||(kc=d,d=Bh(zm,"onSelect"),0<d.length&&(i=new Ca("onSelect","select",null,i,l),s.push({event:i,listeners:d}),i.target=Ko)))}function Oa(s,i){var l={};return l[s.toLowerCase()]=i.toLowerCase(),l["Webkit"+s]="webkit"+i,l["Moz"+s]="moz"+i,l}var $o={animationend:Oa("Animation","AnimationEnd"),animationiteration:Oa("Animation","AnimationIteration"),animationstart:Oa("Animation","AnimationStart"),transitionrun:Oa("Transition","TransitionRun"),transitionstart:Oa("Transition","TransitionStart"),transitioncancel:Oa("Transition","TransitionCancel"),transitionend:Oa("Transition","TransitionEnd")},Gm={},My={};zs&&(My=document.createElement("div").style,"AnimationEvent"in window||(delete $o.animationend.animation,delete $o.animationiteration.animation,delete $o.animationstart.animation),"TransitionEvent"in window||delete $o.transitionend.transition);function Va(s){if(Gm[s])return Gm[s];if(!$o[s])return s;var i=$o[s],l;for(l in i)if(i.hasOwnProperty(l)&&l in My)return Gm[s]=i[l];return s}var Py=Va("animationend"),Oy=Va("animationiteration"),Vy=Va("animationstart"),dS=Va("transitionrun"),hS=Va("transitionstart"),fS=Va("transitioncancel"),Ly=Va("transitionend"),Uy=new Map,Km="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Km.push("scrollEnd");function Hs(s,i){Uy.set(s,i),Mn(i,[s])}var th=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Es=[],Qo=0,$m=0;function nh(){for(var s=Qo,i=$m=Qo=0;i<s;){var l=Es[i];Es[i++]=null;var d=Es[i];Es[i++]=null;var p=Es[i];Es[i++]=null;var g=Es[i];if(Es[i++]=null,d!==null&&p!==null){var _=d.pending;_===null?p.next=p:(p.next=_.next,_.next=p),d.pending=p}g!==0&&Fy(l,p,g)}}function sh(s,i,l,d){Es[Qo++]=s,Es[Qo++]=i,Es[Qo++]=l,Es[Qo++]=d,$m|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function Qm(s,i,l,d){return sh(s,i,l,d),rh(s)}function La(s,i){return sh(s,null,null,i),rh(s)}function Fy(s,i,l){s.lanes|=l;var d=s.alternate;d!==null&&(d.lanes|=l);for(var p=!1,g=s.return;g!==null;)g.childLanes|=l,d=g.alternate,d!==null&&(d.childLanes|=l),g.tag===22&&(s=g.stateNode,s===null||s._visibility&1||(p=!0)),s=g,g=g.return;return s.tag===3?(g=s.stateNode,p&&i!==null&&(p=31-bn(l),s=g.hiddenUpdates,d=s[p],d===null?s[p]=[i]:d.push(i),i.lane=l|536870912),g):null}function rh(s){if(50<eu)throw eu=0,sg=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var Yo={};function mS(s,i,l,d){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function us(s,i,l,d){return new mS(s,i,l,d)}function Ym(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Mr(s,i){var l=s.alternate;return l===null?(l=us(s.tag,i,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=i,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,i=s.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function qy(s,i){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,i=l.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function ih(s,i,l,d,p,g){var _=0;if(d=s,typeof s=="function")Ym(s)&&(_=1);else if(typeof s=="string")_=bA(s,l,ve.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case S:return s=us(31,l,i,p),s.elementType=S,s.lanes=g,s;case R:return Ua(l.children,p,g,i);case O:_=8,p|=24;break;case H:return s=us(12,l,i,p|2),s.elementType=H,s.lanes=g,s;case F:return s=us(13,l,i,p),s.elementType=F,s.lanes=g,s;case G:return s=us(19,l,i,p),s.elementType=G,s.lanes=g,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case ee:_=10;break e;case ae:_=9;break e;case z:_=11;break e;case C:_=14;break e;case T:_=16,d=null;break e}_=29,l=Error(r(130,s===null?"null":typeof s,"")),d=null}return i=us(_,l,i,p),i.elementType=s,i.type=d,i.lanes=g,i}function Ua(s,i,l,d){return s=us(7,s,d,i),s.lanes=l,s}function Wm(s,i,l){return s=us(6,s,null,i),s.lanes=l,s}function By(s){var i=us(18,null,null,0);return i.stateNode=s,i}function Xm(s,i,l){return i=us(4,s.children!==null?s.children:[],s.key,i),i.lanes=l,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var zy=new WeakMap;function Ss(s,i){if(typeof s=="object"&&s!==null){var l=zy.get(s);return l!==void 0?l:(i={value:s,source:i,stack:Xs(i)},zy.set(s,i),i)}return{value:s,source:i,stack:Xs(i)}}var Wo=[],Xo=0,ah=null,Dc=0,As=[],js=0,Ei=null,ar=1,or="";function Pr(s,i){Wo[Xo++]=Dc,Wo[Xo++]=ah,ah=s,Dc=i}function Hy(s,i,l){As[js++]=ar,As[js++]=or,As[js++]=Ei,Ei=s;var d=ar;s=or;var p=32-bn(d)-1;d&=~(1<<p),l+=1;var g=32-bn(i)+p;if(30<g){var _=p-p%5;g=(d&(1<<_)-1).toString(32),d>>=_,p-=_,ar=1<<32-bn(i)+p|l<<p|d,or=g+s}else ar=1<<g|l<<p|d,or=s}function Jm(s){s.return!==null&&(Pr(s,1),Hy(s,1,0))}function Zm(s){for(;s===ah;)ah=Wo[--Xo],Wo[Xo]=null,Dc=Wo[--Xo],Wo[Xo]=null;for(;s===Ei;)Ei=As[--js],As[js]=null,or=As[--js],As[js]=null,ar=As[--js],As[js]=null}function Gy(s,i){As[js++]=ar,As[js++]=or,As[js++]=Ei,ar=i.id,or=i.overflow,Ei=s}var _n=null,_t=null,st=!1,Si=null,Is=!1,ep=Error(r(519));function Ai(s){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Mc(Ss(i,s)),ep}function Ky(s){var i=s.stateNode,l=s.type,d=s.memoizedProps;switch(i[Ve]=s,i[nt]=d,l){case"dialog":We("cancel",i),We("close",i);break;case"iframe":case"object":case"embed":We("load",i);break;case"video":case"audio":for(l=0;l<nu.length;l++)We(nu[l],i);break;case"source":We("error",i);break;case"img":case"image":case"link":We("error",i),We("load",i);break;case"details":We("toggle",i);break;case"input":We("invalid",i),ja(i,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":We("invalid",i);break;case"textarea":We("invalid",i),gi(i,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||d.suppressHydrationWarning===!0||c_(i.textContent,l)?(d.popover!=null&&(We("beforetoggle",i),We("toggle",i)),d.onScroll!=null&&We("scroll",i),d.onScrollEnd!=null&&We("scrollend",i),d.onClick!=null&&(i.onclick=hn),i=!0):i=!1,i||Ai(s,!0)}function $y(s){for(_n=s.return;_n;)switch(_n.tag){case 5:case 31:case 13:Is=!1;return;case 27:case 3:Is=!0;return;default:_n=_n.return}}function Jo(s){if(s!==_n)return!1;if(!st)return $y(s),st=!0,!1;var i=s.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||yg(s.type,s.memoizedProps)),l=!l),l&&_t&&Ai(s),$y(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));_t=y_(s)}else if(i===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));_t=y_(s)}else i===27?(i=_t,qi(s.type)?(s=Ng,Ng=null,_t=s):_t=i):_t=_n?Cs(s.stateNode.nextSibling):null;return!0}function Fa(){_t=_n=null,st=!1}function tp(){var s=Si;return s!==null&&(Jn===null?Jn=s:Jn.push.apply(Jn,s),Si=null),s}function Mc(s){Si===null?Si=[s]:Si.push(s)}var np=P(null),qa=null,Or=null;function ji(s,i,l){ce(np,i._currentValue),i._currentValue=l}function Vr(s){s._currentValue=np.current,$(np)}function sp(s,i,l){for(;s!==null;){var d=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),s===l)break;s=s.return}}function rp(s,i,l,d){var p=s.child;for(p!==null&&(p.return=s);p!==null;){var g=p.dependencies;if(g!==null){var _=p.child;g=g.firstContext;e:for(;g!==null;){var j=g;g=p;for(var U=0;U<i.length;U++)if(j.context===i[U]){g.lanes|=l,j=g.alternate,j!==null&&(j.lanes|=l),sp(g.return,l,s),d||(_=null);break e}g=j.next}}else if(p.tag===18){if(_=p.return,_===null)throw Error(r(341));_.lanes|=l,g=_.alternate,g!==null&&(g.lanes|=l),sp(_,l,s),_=null}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===s){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}}function Zo(s,i,l,d){s=null;for(var p=i,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var _=p.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var j=p.type;cs(p.pendingProps.value,_.value)||(s!==null?s.push(j):s=[j])}}else if(p===me.current){if(_=p.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(s!==null?s.push(ou):s=[ou])}p=p.return}s!==null&&rp(i,s,l,d),i.flags|=262144}function oh(s){for(s=s.firstContext;s!==null;){if(!cs(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ba(s){qa=s,Or=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function wn(s){return Qy(qa,s)}function lh(s,i){return qa===null&&Ba(s),Qy(s,i)}function Qy(s,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},Or===null){if(s===null)throw Error(r(308));Or=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else Or=Or.next=i;return l}var pS=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(l,d){s.push(d)}};this.abort=function(){i.aborted=!0,s.forEach(function(l){return l()})}},gS=n.unstable_scheduleCallback,xS=n.unstable_NormalPriority,Zt={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ip(){return{controller:new pS,data:new Map,refCount:0}}function Pc(s){s.refCount--,s.refCount===0&&gS(xS,function(){s.controller.abort()})}var Oc=null,ap=0,el=0,tl=null;function yS(s,i){if(Oc===null){var l=Oc=[];ap=0,el=cg(),tl={status:"pending",value:void 0,then:function(d){l.push(d)}}}return ap++,i.then(Yy,Yy),i}function Yy(){if(--ap===0&&Oc!==null){tl!==null&&(tl.status="fulfilled");var s=Oc;Oc=null,el=0,tl=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function bS(s,i){var l=[],d={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return s.then(function(){d.status="fulfilled",d.value=i;for(var p=0;p<l.length;p++)(0,l[p])(i)},function(p){for(d.status="rejected",d.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),d}var Wy=Y.S;Y.S=function(s,i){Dv=Mt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&yS(s,i),Wy!==null&&Wy(s,i)};var za=P(null);function op(){var s=za.current;return s!==null?s:yt.pooledCache}function ch(s,i){i===null?ce(za,za.current):ce(za,i.pool)}function Xy(){var s=op();return s===null?null:{parent:Zt._currentValue,pool:s}}var nl=Error(r(460)),lp=Error(r(474)),uh=Error(r(542)),dh={then:function(){}};function Jy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Zy(s,i,l){switch(l=s[l],l===void 0?s.push(i):l!==i&&(i.then(hn,hn),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,tb(s),s;default:if(typeof i.status=="string")i.then(hn,hn);else{if(s=yt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(d){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=d}},function(d){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=d}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,tb(s),s}throw Ga=i,nl}}function Ha(s){try{var i=s._init;return i(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ga=l,nl):l}}var Ga=null;function eb(){if(Ga===null)throw Error(r(459));var s=Ga;return Ga=null,s}function tb(s){if(s===nl||s===uh)throw Error(r(483))}var sl=null,Vc=0;function hh(s){var i=Vc;return Vc+=1,sl===null&&(sl=[]),Zy(sl,s,i)}function Lc(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function fh(s,i){throw i.$$typeof===E?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function nb(s){function i(K,B){if(s){var W=K.deletions;W===null?(K.deletions=[B],K.flags|=16):W.push(B)}}function l(K,B){if(!s)return null;for(;B!==null;)i(K,B),B=B.sibling;return null}function d(K){for(var B=new Map;K!==null;)K.key!==null?B.set(K.key,K):B.set(K.index,K),K=K.sibling;return B}function p(K,B){return K=Mr(K,B),K.index=0,K.sibling=null,K}function g(K,B,W){return K.index=W,s?(W=K.alternate,W!==null?(W=W.index,W<B?(K.flags|=67108866,B):W):(K.flags|=67108866,B)):(K.flags|=1048576,B)}function _(K){return s&&K.alternate===null&&(K.flags|=67108866),K}function j(K,B,W,ue){return B===null||B.tag!==6?(B=Wm(W,K.mode,ue),B.return=K,B):(B=p(B,W),B.return=K,B)}function U(K,B,W,ue){var Oe=W.type;return Oe===R?oe(K,B,W.props.children,ue,W.key):B!==null&&(B.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===T&&Ha(Oe)===B.type)?(B=p(B,W.props),Lc(B,W),B.return=K,B):(B=ih(W.type,W.key,W.props,null,K.mode,ue),Lc(B,W),B.return=K,B)}function X(K,B,W,ue){return B===null||B.tag!==4||B.stateNode.containerInfo!==W.containerInfo||B.stateNode.implementation!==W.implementation?(B=Xm(W,K.mode,ue),B.return=K,B):(B=p(B,W.children||[]),B.return=K,B)}function oe(K,B,W,ue,Oe){return B===null||B.tag!==7?(B=Ua(W,K.mode,ue,Oe),B.return=K,B):(B=p(B,W),B.return=K,B)}function fe(K,B,W){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Wm(""+B,K.mode,W),B.return=K,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case A:return W=ih(B.type,B.key,B.props,null,K.mode,W),Lc(W,B),W.return=K,W;case V:return B=Xm(B,K.mode,W),B.return=K,B;case T:return B=Ha(B),fe(K,B,W)}if(Fe(B)||D(B))return B=Ua(B,K.mode,W,null),B.return=K,B;if(typeof B.then=="function")return fe(K,hh(B),W);if(B.$$typeof===ee)return fe(K,lh(K,B),W);fh(K,B)}return null}function Z(K,B,W,ue){var Oe=B!==null?B.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Oe!==null?null:j(K,B,""+W,ue);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case A:return W.key===Oe?U(K,B,W,ue):null;case V:return W.key===Oe?X(K,B,W,ue):null;case T:return W=Ha(W),Z(K,B,W,ue)}if(Fe(W)||D(W))return Oe!==null?null:oe(K,B,W,ue,null);if(typeof W.then=="function")return Z(K,B,hh(W),ue);if(W.$$typeof===ee)return Z(K,B,lh(K,W),ue);fh(K,W)}return null}function ne(K,B,W,ue,Oe){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return K=K.get(W)||null,j(B,K,""+ue,Oe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case A:return K=K.get(ue.key===null?W:ue.key)||null,U(B,K,ue,Oe);case V:return K=K.get(ue.key===null?W:ue.key)||null,X(B,K,ue,Oe);case T:return ue=Ha(ue),ne(K,B,W,ue,Oe)}if(Fe(ue)||D(ue))return K=K.get(W)||null,oe(B,K,ue,Oe,null);if(typeof ue.then=="function")return ne(K,B,W,hh(ue),Oe);if(ue.$$typeof===ee)return ne(K,B,W,lh(B,ue),Oe);fh(B,ue)}return null}function Ie(K,B,W,ue){for(var Oe=null,at=null,Me=B,Ke=B=0,Ze=null;Me!==null&&Ke<W.length;Ke++){Me.index>Ke?(Ze=Me,Me=null):Ze=Me.sibling;var ot=Z(K,Me,W[Ke],ue);if(ot===null){Me===null&&(Me=Ze);break}s&&Me&&ot.alternate===null&&i(K,Me),B=g(ot,B,Ke),at===null?Oe=ot:at.sibling=ot,at=ot,Me=Ze}if(Ke===W.length)return l(K,Me),st&&Pr(K,Ke),Oe;if(Me===null){for(;Ke<W.length;Ke++)Me=fe(K,W[Ke],ue),Me!==null&&(B=g(Me,B,Ke),at===null?Oe=Me:at.sibling=Me,at=Me);return st&&Pr(K,Ke),Oe}for(Me=d(Me);Ke<W.length;Ke++)Ze=ne(Me,K,Ke,W[Ke],ue),Ze!==null&&(s&&Ze.alternate!==null&&Me.delete(Ze.key===null?Ke:Ze.key),B=g(Ze,B,Ke),at===null?Oe=Ze:at.sibling=Ze,at=Ze);return s&&Me.forEach(function(Ki){return i(K,Ki)}),st&&Pr(K,Ke),Oe}function Ue(K,B,W,ue){if(W==null)throw Error(r(151));for(var Oe=null,at=null,Me=B,Ke=B=0,Ze=null,ot=W.next();Me!==null&&!ot.done;Ke++,ot=W.next()){Me.index>Ke?(Ze=Me,Me=null):Ze=Me.sibling;var Ki=Z(K,Me,ot.value,ue);if(Ki===null){Me===null&&(Me=Ze);break}s&&Me&&Ki.alternate===null&&i(K,Me),B=g(Ki,B,Ke),at===null?Oe=Ki:at.sibling=Ki,at=Ki,Me=Ze}if(ot.done)return l(K,Me),st&&Pr(K,Ke),Oe;if(Me===null){for(;!ot.done;Ke++,ot=W.next())ot=fe(K,ot.value,ue),ot!==null&&(B=g(ot,B,Ke),at===null?Oe=ot:at.sibling=ot,at=ot);return st&&Pr(K,Ke),Oe}for(Me=d(Me);!ot.done;Ke++,ot=W.next())ot=ne(Me,K,Ke,ot.value,ue),ot!==null&&(s&&ot.alternate!==null&&Me.delete(ot.key===null?Ke:ot.key),B=g(ot,B,Ke),at===null?Oe=ot:at.sibling=ot,at=ot);return s&&Me.forEach(function(RA){return i(K,RA)}),st&&Pr(K,Ke),Oe}function gt(K,B,W,ue){if(typeof W=="object"&&W!==null&&W.type===R&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case A:e:{for(var Oe=W.key;B!==null;){if(B.key===Oe){if(Oe=W.type,Oe===R){if(B.tag===7){l(K,B.sibling),ue=p(B,W.props.children),ue.return=K,K=ue;break e}}else if(B.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===T&&Ha(Oe)===B.type){l(K,B.sibling),ue=p(B,W.props),Lc(ue,W),ue.return=K,K=ue;break e}l(K,B);break}else i(K,B);B=B.sibling}W.type===R?(ue=Ua(W.props.children,K.mode,ue,W.key),ue.return=K,K=ue):(ue=ih(W.type,W.key,W.props,null,K.mode,ue),Lc(ue,W),ue.return=K,K=ue)}return _(K);case V:e:{for(Oe=W.key;B!==null;){if(B.key===Oe)if(B.tag===4&&B.stateNode.containerInfo===W.containerInfo&&B.stateNode.implementation===W.implementation){l(K,B.sibling),ue=p(B,W.children||[]),ue.return=K,K=ue;break e}else{l(K,B);break}else i(K,B);B=B.sibling}ue=Xm(W,K.mode,ue),ue.return=K,K=ue}return _(K);case T:return W=Ha(W),gt(K,B,W,ue)}if(Fe(W))return Ie(K,B,W,ue);if(D(W)){if(Oe=D(W),typeof Oe!="function")throw Error(r(150));return W=Oe.call(W),Ue(K,B,W,ue)}if(typeof W.then=="function")return gt(K,B,hh(W),ue);if(W.$$typeof===ee)return gt(K,B,lh(K,W),ue);fh(K,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,B!==null&&B.tag===6?(l(K,B.sibling),ue=p(B,W),ue.return=K,K=ue):(l(K,B),ue=Wm(W,K.mode,ue),ue.return=K,K=ue),_(K)):l(K,B)}return function(K,B,W,ue){try{Vc=0;var Oe=gt(K,B,W,ue);return sl=null,Oe}catch(Me){if(Me===nl||Me===uh)throw Me;var at=us(29,Me,null,K.mode);return at.lanes=ue,at.return=K,at}finally{}}}var Ka=nb(!0),sb=nb(!1),Ii=!1;function cp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function up(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ri(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ci(s,i,l){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(ct&2)!==0){var p=d.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),d.pending=i,i=rh(s),Fy(s,null,l),i}return sh(s,d,i,l),rh(s)}function Uc(s,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var d=i.lanes;d&=s.pendingLanes,l|=d,i.lanes=l,qs(s,l)}}function dp(s,i){var l=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var _={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?p=g=_:g=g.next=_,l=l.next}while(l!==null);g===null?p=g=i:g=g.next=i}else p=g=i;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:d.shared,callbacks:d.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=i:s.next=i,l.lastBaseUpdate=i}var hp=!1;function Fc(){if(hp){var s=tl;if(s!==null)throw s}}function qc(s,i,l,d){hp=!1;var p=s.updateQueue;Ii=!1;var g=p.firstBaseUpdate,_=p.lastBaseUpdate,j=p.shared.pending;if(j!==null){p.shared.pending=null;var U=j,X=U.next;U.next=null,_===null?g=X:_.next=X,_=U;var oe=s.alternate;oe!==null&&(oe=oe.updateQueue,j=oe.lastBaseUpdate,j!==_&&(j===null?oe.firstBaseUpdate=X:j.next=X,oe.lastBaseUpdate=U))}if(g!==null){var fe=p.baseState;_=0,oe=X=U=null,j=g;do{var Z=j.lane&-536870913,ne=Z!==j.lane;if(ne?(Je&Z)===Z:(d&Z)===Z){Z!==0&&Z===el&&(hp=!0),oe!==null&&(oe=oe.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Ie=s,Ue=j;Z=i;var gt=l;switch(Ue.tag){case 1:if(Ie=Ue.payload,typeof Ie=="function"){fe=Ie.call(gt,fe,Z);break e}fe=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Ue.payload,Z=typeof Ie=="function"?Ie.call(gt,fe,Z):Ie,Z==null)break e;fe=v({},fe,Z);break e;case 2:Ii=!0}}Z=j.callback,Z!==null&&(s.flags|=64,ne&&(s.flags|=8192),ne=p.callbacks,ne===null?p.callbacks=[Z]:ne.push(Z))}else ne={lane:Z,tag:j.tag,payload:j.payload,callback:j.callback,next:null},oe===null?(X=oe=ne,U=fe):oe=oe.next=ne,_|=Z;if(j=j.next,j===null){if(j=p.shared.pending,j===null)break;ne=j,j=ne.next,ne.next=null,p.lastBaseUpdate=ne,p.shared.pending=null}}while(!0);oe===null&&(U=fe),p.baseState=U,p.firstBaseUpdate=X,p.lastBaseUpdate=oe,g===null&&(p.shared.lanes=0),Oi|=_,s.lanes=_,s.memoizedState=fe}}function rb(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function ib(s,i){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)rb(l[s],i)}var rl=P(null),mh=P(0);function ab(s,i){s=Kr,ce(mh,s),ce(rl,i),Kr=s|i.baseLanes}function fp(){ce(mh,Kr),ce(rl,rl.current)}function mp(){Kr=mh.current,$(rl),$(mh)}var ds=P(null),Rs=null;function ki(s){var i=s.alternate;ce(Kt,Kt.current&1),ce(ds,s),Rs===null&&(i===null||rl.current!==null||i.memoizedState!==null)&&(Rs=s)}function pp(s){ce(Kt,Kt.current),ce(ds,s),Rs===null&&(Rs=s)}function ob(s){s.tag===22?(ce(Kt,Kt.current),ce(ds,s),Rs===null&&(Rs=s)):Di()}function Di(){ce(Kt,Kt.current),ce(ds,ds.current)}function hs(s){$(ds),Rs===s&&(Rs=null),$(Kt)}var Kt=P(0);function ph(s){for(var i=s;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||_g(l)||wg(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Lr=0,He=null,mt=null,en=null,gh=!1,il=!1,$a=!1,xh=0,Bc=0,al=null,vS=0;function Ot(){throw Error(r(321))}function gp(s,i){if(i===null)return!1;for(var l=0;l<i.length&&l<s.length;l++)if(!cs(s[l],i[l]))return!1;return!0}function xp(s,i,l,d,p,g){return Lr=g,He=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=s===null||s.memoizedState===null?Hb:kp,$a=!1,g=l(d,p),$a=!1,il&&(g=cb(i,l,d,p)),lb(s),g}function lb(s){Y.H=Gc;var i=mt!==null&&mt.next!==null;if(Lr=0,en=mt=He=null,gh=!1,Bc=0,al=null,i)throw Error(r(300));s===null||tn||(s=s.dependencies,s!==null&&oh(s)&&(tn=!0))}function cb(s,i,l,d){He=s;var p=0;do{if(il&&(al=null),Bc=0,il=!1,25<=p)throw Error(r(301));if(p+=1,en=mt=null,s.updateQueue!=null){var g=s.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}Y.H=Gb,g=i(l,d)}while(il);return g}function _S(){var s=Y.H,i=s.useState()[0];return i=typeof i.then=="function"?zc(i):i,s=s.useState()[0],(mt!==null?mt.memoizedState:null)!==s&&(He.flags|=1024),i}function yp(){var s=xh!==0;return xh=0,s}function bp(s,i,l){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~l}function vp(s){if(gh){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}gh=!1}Lr=0,en=mt=He=null,il=!1,Bc=xh=0,al=null}function Ln(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?He.memoizedState=en=s:en=en.next=s,en}function $t(){if(mt===null){var s=He.alternate;s=s!==null?s.memoizedState:null}else s=mt.next;var i=en===null?He.memoizedState:en.next;if(i!==null)en=i,mt=s;else{if(s===null)throw He.alternate===null?Error(r(467)):Error(r(310));mt=s,s={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},en===null?He.memoizedState=en=s:en=en.next=s}return en}function yh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zc(s){var i=Bc;return Bc+=1,al===null&&(al=[]),s=Zy(al,s,i),i=He,(en===null?i.memoizedState:en.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?Hb:kp),s}function bh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return zc(s);if(s.$$typeof===ee)return wn(s)}throw Error(r(438,String(s)))}function _p(s){var i=null,l=He.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var d=He.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(i={data:d.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=yh(),He.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(s),d=0;d<s;d++)l[d]=N;return i.index++,l}function Ur(s,i){return typeof i=="function"?i(s):i}function vh(s){var i=$t();return wp(i,mt,s)}function wp(s,i,l){var d=s.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=l;var p=s.baseQueue,g=d.pending;if(g!==null){if(p!==null){var _=p.next;p.next=g.next,g.next=_}i.baseQueue=p=g,d.pending=null}if(g=s.baseState,p===null)s.memoizedState=g;else{i=p.next;var j=_=null,U=null,X=i,oe=!1;do{var fe=X.lane&-536870913;if(fe!==X.lane?(Je&fe)===fe:(Lr&fe)===fe){var Z=X.revertLane;if(Z===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),fe===el&&(oe=!0);else if((Lr&Z)===Z){X=X.next,Z===el&&(oe=!0);continue}else fe={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},U===null?(j=U=fe,_=g):U=U.next=fe,He.lanes|=Z,Oi|=Z;fe=X.action,$a&&l(g,fe),g=X.hasEagerState?X.eagerState:l(g,fe)}else Z={lane:fe,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},U===null?(j=U=Z,_=g):U=U.next=Z,He.lanes|=fe,Oi|=fe;X=X.next}while(X!==null&&X!==i);if(U===null?_=g:U.next=j,!cs(g,s.memoizedState)&&(tn=!0,oe&&(l=tl,l!==null)))throw l;s.memoizedState=g,s.baseState=_,s.baseQueue=U,d.lastRenderedState=g}return p===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function Np(s){var i=$t(),l=i.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=s;var d=l.dispatch,p=l.pending,g=i.memoizedState;if(p!==null){l.pending=null;var _=p=p.next;do g=s(g,_.action),_=_.next;while(_!==p);cs(g,i.memoizedState)||(tn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),l.lastRenderedState=g}return[g,d]}function ub(s,i,l){var d=He,p=$t(),g=st;if(g){if(l===void 0)throw Error(r(407));l=l()}else l=i();var _=!cs((mt||p).memoizedState,l);if(_&&(p.memoizedState=l,tn=!0),p=p.queue,Sp(fb.bind(null,d,p,s),[s]),p.getSnapshot!==i||_||en!==null&&en.memoizedState.tag&1){if(d.flags|=2048,ol(9,{destroy:void 0},hb.bind(null,d,p,l,i),null),yt===null)throw Error(r(349));g||(Lr&127)!==0||db(d,i,l)}return l}function db(s,i,l){s.flags|=16384,s={getSnapshot:i,value:l},i=He.updateQueue,i===null?(i=yh(),He.updateQueue=i,i.stores=[s]):(l=i.stores,l===null?i.stores=[s]:l.push(s))}function hb(s,i,l,d){i.value=l,i.getSnapshot=d,mb(i)&&pb(s)}function fb(s,i,l){return l(function(){mb(i)&&pb(s)})}function mb(s){var i=s.getSnapshot;s=s.value;try{var l=i();return!cs(s,l)}catch{return!0}}function pb(s){var i=La(s,2);i!==null&&Zn(i,s,2)}function Tp(s){var i=Ln();if(typeof s=="function"){var l=s;if(s=l(),$a){Gn(!0);try{l()}finally{Gn(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:s},i}function gb(s,i,l,d){return s.baseState=l,wp(s,mt,typeof d=="function"?d:Ur)}function wS(s,i,l,d,p){if(Nh(s))throw Error(r(485));if(s=i.action,s!==null){var g={payload:p,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){g.listeners.push(_)}};Y.T!==null?l(!0):g.isTransition=!1,d(g),l=i.pending,l===null?(g.next=i.pending=g,xb(i,g)):(g.next=l.next,i.pending=l.next=g)}}function xb(s,i){var l=i.action,d=i.payload,p=s.state;if(i.isTransition){var g=Y.T,_={};Y.T=_;try{var j=l(p,d),U=Y.S;U!==null&&U(_,j),yb(s,i,j)}catch(X){Ep(s,i,X)}finally{g!==null&&_.types!==null&&(g.types=_.types),Y.T=g}}else try{g=l(p,d),yb(s,i,g)}catch(X){Ep(s,i,X)}}function yb(s,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){bb(s,i,d)},function(d){return Ep(s,i,d)}):bb(s,i,l)}function bb(s,i,l){i.status="fulfilled",i.value=l,vb(i),s.state=l,i=s.pending,i!==null&&(l=i.next,l===i?s.pending=null:(l=l.next,i.next=l,xb(s,l)))}function Ep(s,i,l){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do i.status="rejected",i.reason=l,vb(i),i=i.next;while(i!==d)}s.action=null}function vb(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function _b(s,i){return i}function wb(s,i){if(st){var l=yt.formState;if(l!==null){e:{var d=He;if(st){if(_t){t:{for(var p=_t,g=Is;p.nodeType!==8;){if(!g){p=null;break t}if(p=Cs(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){_t=Cs(p.nextSibling),d=p.data==="F!";break e}}Ai(d)}d=!1}d&&(i=l[0])}}return l=Ln(),l.memoizedState=l.baseState=i,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_b,lastRenderedState:i},l.queue=d,l=qb.bind(null,He,d),d.dispatch=l,d=Tp(!1),g=Cp.bind(null,He,!1,d.queue),d=Ln(),p={state:i,dispatch:null,action:s,pending:null},d.queue=p,l=wS.bind(null,He,p,g,l),p.dispatch=l,d.memoizedState=s,[i,l,!1]}function Nb(s){var i=$t();return Tb(i,mt,s)}function Tb(s,i,l){if(i=wp(s,i,_b)[0],s=vh(Ur)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var d=zc(i)}catch(_){throw _===nl?uh:_}else d=i;i=$t();var p=i.queue,g=p.dispatch;return l!==i.memoizedState&&(He.flags|=2048,ol(9,{destroy:void 0},NS.bind(null,p,l),null)),[d,g,s]}function NS(s,i){s.action=i}function Eb(s){var i=$t(),l=mt;if(l!==null)return Tb(i,l,s);$t(),i=i.memoizedState,l=$t();var d=l.queue.dispatch;return l.memoizedState=s,[i,d,!1]}function ol(s,i,l,d){return s={tag:s,create:l,deps:d,inst:i,next:null},i=He.updateQueue,i===null&&(i=yh(),He.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=s.next=s:(d=l.next,l.next=s,s.next=d,i.lastEffect=s),s}function Sb(){return $t().memoizedState}function _h(s,i,l,d){var p=Ln();He.flags|=s,p.memoizedState=ol(1|i,{destroy:void 0},l,d===void 0?null:d)}function wh(s,i,l,d){var p=$t();d=d===void 0?null:d;var g=p.memoizedState.inst;mt!==null&&d!==null&&gp(d,mt.memoizedState.deps)?p.memoizedState=ol(i,g,l,d):(He.flags|=s,p.memoizedState=ol(1|i,g,l,d))}function Ab(s,i){_h(8390656,8,s,i)}function Sp(s,i){wh(2048,8,s,i)}function TS(s){He.flags|=4;var i=He.updateQueue;if(i===null)i=yh(),He.updateQueue=i,i.events=[s];else{var l=i.events;l===null?i.events=[s]:l.push(s)}}function jb(s){var i=$t().memoizedState;return TS({ref:i,nextImpl:s}),function(){if((ct&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function Ib(s,i){return wh(4,2,s,i)}function Rb(s,i){return wh(4,4,s,i)}function Cb(s,i){if(typeof i=="function"){s=s();var l=i(s);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function kb(s,i,l){l=l!=null?l.concat([s]):null,wh(4,4,Cb.bind(null,i,s),l)}function Ap(){}function Db(s,i){var l=$t();i=i===void 0?null:i;var d=l.memoizedState;return i!==null&&gp(i,d[1])?d[0]:(l.memoizedState=[s,i],s)}function Mb(s,i){var l=$t();i=i===void 0?null:i;var d=l.memoizedState;if(i!==null&&gp(i,d[1]))return d[0];if(d=s(),$a){Gn(!0);try{s()}finally{Gn(!1)}}return l.memoizedState=[d,i],d}function jp(s,i,l){return l===void 0||(Lr&1073741824)!==0&&(Je&261930)===0?s.memoizedState=i:(s.memoizedState=l,s=Pv(),He.lanes|=s,Oi|=s,l)}function Pb(s,i,l,d){return cs(l,i)?l:rl.current!==null?(s=jp(s,l,d),cs(s,i)||(tn=!0),s):(Lr&42)===0||(Lr&1073741824)!==0&&(Je&261930)===0?(tn=!0,s.memoizedState=l):(s=Pv(),He.lanes|=s,Oi|=s,i)}function Ob(s,i,l,d,p){var g=le.p;le.p=g!==0&&8>g?g:8;var _=Y.T,j={};Y.T=j,Cp(s,!1,i,l);try{var U=p(),X=Y.S;if(X!==null&&X(j,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var oe=bS(U,d);Hc(s,i,oe,ps(s))}else Hc(s,i,d,ps(s))}catch(fe){Hc(s,i,{then:function(){},status:"rejected",reason:fe},ps())}finally{le.p=g,_!==null&&j.types!==null&&(_.types=j.types),Y.T=_}}function ES(){}function Ip(s,i,l,d){if(s.tag!==5)throw Error(r(476));var p=Vb(s).queue;Ob(s,p,i,ye,l===null?ES:function(){return Lb(s),l(d)})}function Vb(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:ye},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:l},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function Lb(s){var i=Vb(s);i.next===null&&(i=s.alternate.memoizedState),Hc(s,i.next.queue,{},ps())}function Rp(){return wn(ou)}function Ub(){return $t().memoizedState}function Fb(){return $t().memoizedState}function SS(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var l=ps();s=Ri(l);var d=Ci(i,s,l);d!==null&&(Zn(d,i,l),Uc(d,i,l)),i={cache:ip()},s.payload=i;return}i=i.return}}function AS(s,i,l){var d=ps();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Nh(s)?Bb(i,l):(l=Qm(s,i,l,d),l!==null&&(Zn(l,s,d),zb(l,i,d)))}function qb(s,i,l){var d=ps();Hc(s,i,l,d)}function Hc(s,i,l,d){var p={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Nh(s))Bb(i,p);else{var g=s.alternate;if(s.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var _=i.lastRenderedState,j=g(_,l);if(p.hasEagerState=!0,p.eagerState=j,cs(j,_))return sh(s,i,p,0),yt===null&&nh(),!1}catch{}finally{}if(l=Qm(s,i,p,d),l!==null)return Zn(l,s,d),zb(l,i,d),!0}return!1}function Cp(s,i,l,d){if(d={lane:2,revertLane:cg(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Nh(s)){if(i)throw Error(r(479))}else i=Qm(s,l,d,2),i!==null&&Zn(i,s,2)}function Nh(s){var i=s.alternate;return s===He||i!==null&&i===He}function Bb(s,i){il=gh=!0;var l=s.pending;l===null?i.next=i:(i.next=l.next,l.next=i),s.pending=i}function zb(s,i,l){if((l&4194048)!==0){var d=i.lanes;d&=s.pendingLanes,l|=d,i.lanes=l,qs(s,l)}}var Gc={readContext:wn,use:bh,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot};Gc.useEffectEvent=Ot;var Hb={readContext:wn,use:bh,useCallback:function(s,i){return Ln().memoizedState=[s,i===void 0?null:i],s},useContext:wn,useEffect:Ab,useImperativeHandle:function(s,i,l){l=l!=null?l.concat([s]):null,_h(4194308,4,Cb.bind(null,i,s),l)},useLayoutEffect:function(s,i){return _h(4194308,4,s,i)},useInsertionEffect:function(s,i){_h(4,2,s,i)},useMemo:function(s,i){var l=Ln();i=i===void 0?null:i;var d=s();if($a){Gn(!0);try{s()}finally{Gn(!1)}}return l.memoizedState=[d,i],d},useReducer:function(s,i,l){var d=Ln();if(l!==void 0){var p=l(i);if($a){Gn(!0);try{l(i)}finally{Gn(!1)}}}else p=i;return d.memoizedState=d.baseState=p,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:p},d.queue=s,s=s.dispatch=AS.bind(null,He,s),[d.memoizedState,s]},useRef:function(s){var i=Ln();return s={current:s},i.memoizedState=s},useState:function(s){s=Tp(s);var i=s.queue,l=qb.bind(null,He,i);return i.dispatch=l,[s.memoizedState,l]},useDebugValue:Ap,useDeferredValue:function(s,i){var l=Ln();return jp(l,s,i)},useTransition:function(){var s=Tp(!1);return s=Ob.bind(null,He,s.queue,!0,!1),Ln().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,l){var d=He,p=Ln();if(st){if(l===void 0)throw Error(r(407));l=l()}else{if(l=i(),yt===null)throw Error(r(349));(Je&127)!==0||db(d,i,l)}p.memoizedState=l;var g={value:l,getSnapshot:i};return p.queue=g,Ab(fb.bind(null,d,g,s),[s]),d.flags|=2048,ol(9,{destroy:void 0},hb.bind(null,d,g,l,i),null),l},useId:function(){var s=Ln(),i=yt.identifierPrefix;if(st){var l=or,d=ar;l=(d&~(1<<32-bn(d)-1)).toString(32)+l,i="_"+i+"R_"+l,l=xh++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=vS++,i="_"+i+"r_"+l.toString(32)+"_";return s.memoizedState=i},useHostTransitionStatus:Rp,useFormState:wb,useActionState:wb,useOptimistic:function(s){var i=Ln();i.memoizedState=i.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=Cp.bind(null,He,!0,l),l.dispatch=i,[s,i]},useMemoCache:_p,useCacheRefresh:function(){return Ln().memoizedState=SS.bind(null,He)},useEffectEvent:function(s){var i=Ln(),l={impl:s};return i.memoizedState=l,function(){if((ct&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},kp={readContext:wn,use:bh,useCallback:Db,useContext:wn,useEffect:Sp,useImperativeHandle:kb,useInsertionEffect:Ib,useLayoutEffect:Rb,useMemo:Mb,useReducer:vh,useRef:Sb,useState:function(){return vh(Ur)},useDebugValue:Ap,useDeferredValue:function(s,i){var l=$t();return Pb(l,mt.memoizedState,s,i)},useTransition:function(){var s=vh(Ur)[0],i=$t().memoizedState;return[typeof s=="boolean"?s:zc(s),i]},useSyncExternalStore:ub,useId:Ub,useHostTransitionStatus:Rp,useFormState:Nb,useActionState:Nb,useOptimistic:function(s,i){var l=$t();return gb(l,mt,s,i)},useMemoCache:_p,useCacheRefresh:Fb};kp.useEffectEvent=jb;var Gb={readContext:wn,use:bh,useCallback:Db,useContext:wn,useEffect:Sp,useImperativeHandle:kb,useInsertionEffect:Ib,useLayoutEffect:Rb,useMemo:Mb,useReducer:Np,useRef:Sb,useState:function(){return Np(Ur)},useDebugValue:Ap,useDeferredValue:function(s,i){var l=$t();return mt===null?jp(l,s,i):Pb(l,mt.memoizedState,s,i)},useTransition:function(){var s=Np(Ur)[0],i=$t().memoizedState;return[typeof s=="boolean"?s:zc(s),i]},useSyncExternalStore:ub,useId:Ub,useHostTransitionStatus:Rp,useFormState:Eb,useActionState:Eb,useOptimistic:function(s,i){var l=$t();return mt!==null?gb(l,mt,s,i):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:_p,useCacheRefresh:Fb};Gb.useEffectEvent=jb;function Dp(s,i,l,d){i=s.memoizedState,l=l(d,i),l=l==null?i:v({},i,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Mp={enqueueSetState:function(s,i,l){s=s._reactInternals;var d=ps(),p=Ri(d);p.payload=i,l!=null&&(p.callback=l),i=Ci(s,p,d),i!==null&&(Zn(i,s,d),Uc(i,s,d))},enqueueReplaceState:function(s,i,l){s=s._reactInternals;var d=ps(),p=Ri(d);p.tag=1,p.payload=i,l!=null&&(p.callback=l),i=Ci(s,p,d),i!==null&&(Zn(i,s,d),Uc(i,s,d))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var l=ps(),d=Ri(l);d.tag=2,i!=null&&(d.callback=i),i=Ci(s,d,l),i!==null&&(Zn(i,s,l),Uc(i,s,l))}};function Kb(s,i,l,d,p,g,_){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,g,_):i.prototype&&i.prototype.isPureReactComponent?!Cc(l,d)||!Cc(p,g):!0}function $b(s,i,l,d){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,d),i.state!==s&&Mp.enqueueReplaceState(i,i.state,null)}function Qa(s,i){var l=i;if("ref"in i){l={};for(var d in i)d!=="ref"&&(l[d]=i[d])}if(s=s.defaultProps){l===i&&(l=v({},l));for(var p in s)l[p]===void 0&&(l[p]=s[p])}return l}function Qb(s){th(s)}function Yb(s){console.error(s)}function Wb(s){th(s)}function Th(s,i){try{var l=s.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(d){setTimeout(function(){throw d})}}function Xb(s,i,l){try{var d=s.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Pp(s,i,l){return l=Ri(l),l.tag=3,l.payload={element:null},l.callback=function(){Th(s,i)},l}function Jb(s){return s=Ri(s),s.tag=3,s}function Zb(s,i,l,d){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var g=d.value;s.payload=function(){return p(g)},s.callback=function(){Xb(i,l,d)}}var _=l.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(s.callback=function(){Xb(i,l,d),typeof p!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var j=d.stack;this.componentDidCatch(d.value,{componentStack:j!==null?j:""})})}function jS(s,i,l,d,p){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(i=l.alternate,i!==null&&Zo(i,l,p,!0),l=ds.current,l!==null){switch(l.tag){case 31:case 13:return Rs===null?Oh():l.alternate===null&&Vt===0&&(Vt=3),l.flags&=-257,l.flags|=65536,l.lanes=p,d===dh?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([d]):i.add(d),ag(s,d,p)),!1;case 22:return l.flags|=65536,d===dh?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([d]):l.add(d)),ag(s,d,p)),!1}throw Error(r(435,l.tag))}return ag(s,d,p),Oh(),!1}if(st)return i=ds.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,d!==ep&&(s=Error(r(422),{cause:d}),Mc(Ss(s,l)))):(d!==ep&&(i=Error(r(423),{cause:d}),Mc(Ss(i,l))),s=s.current.alternate,s.flags|=65536,p&=-p,s.lanes|=p,d=Ss(d,l),p=Pp(s.stateNode,d,p),dp(s,p),Vt!==4&&(Vt=2)),!1;var g=Error(r(520),{cause:d});if(g=Ss(g,l),Zc===null?Zc=[g]:Zc.push(g),Vt!==4&&(Vt=2),i===null)return!0;d=Ss(d,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,s=p&-p,l.lanes|=s,s=Pp(l.stateNode,d,s),dp(l,s),!1;case 1:if(i=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Vi===null||!Vi.has(g))))return l.flags|=65536,p&=-p,l.lanes|=p,p=Jb(p),Zb(p,s,l,d),dp(l,p),!1}l=l.return}while(l!==null);return!1}var Op=Error(r(461)),tn=!1;function Nn(s,i,l,d){i.child=s===null?sb(i,null,l,d):Ka(i,s.child,l,d)}function ev(s,i,l,d,p){l=l.render;var g=i.ref;if("ref"in d){var _={};for(var j in d)j!=="ref"&&(_[j]=d[j])}else _=d;return Ba(i),d=xp(s,i,l,_,g,p),j=yp(),s!==null&&!tn?(bp(s,i,p),Fr(s,i,p)):(st&&j&&Jm(i),i.flags|=1,Nn(s,i,d,p),i.child)}function tv(s,i,l,d,p){if(s===null){var g=l.type;return typeof g=="function"&&!Ym(g)&&g.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=g,nv(s,i,g,d,p)):(s=ih(l.type,null,d,i,i.mode,p),s.ref=i.ref,s.return=i,i.child=s)}if(g=s.child,!Hp(s,p)){var _=g.memoizedProps;if(l=l.compare,l=l!==null?l:Cc,l(_,d)&&s.ref===i.ref)return Fr(s,i,p)}return i.flags|=1,s=Mr(g,d),s.ref=i.ref,s.return=i,i.child=s}function nv(s,i,l,d,p){if(s!==null){var g=s.memoizedProps;if(Cc(g,d)&&s.ref===i.ref)if(tn=!1,i.pendingProps=d=g,Hp(s,p))(s.flags&131072)!==0&&(tn=!0);else return i.lanes=s.lanes,Fr(s,i,p)}return Vp(s,i,l,d,p)}function sv(s,i,l,d){var p=d.children,g=s!==null?s.memoizedState:null;if(s===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,s!==null){for(d=i.child=s.child,p=0;d!==null;)p=p|d.lanes|d.childLanes,d=d.sibling;d=p&~g}else d=0,i.child=null;return rv(s,i,g,l,d)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&ch(i,g!==null?g.cachePool:null),g!==null?ab(i,g):fp(),ob(i);else return d=i.lanes=536870912,rv(s,i,g!==null?g.baseLanes|l:l,l,d)}else g!==null?(ch(i,g.cachePool),ab(i,g),Di(),i.memoizedState=null):(s!==null&&ch(i,null),fp(),Di());return Nn(s,i,p,l),i.child}function Kc(s,i){return s!==null&&s.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function rv(s,i,l,d,p){var g=op();return g=g===null?null:{parent:Zt._currentValue,pool:g},i.memoizedState={baseLanes:l,cachePool:g},s!==null&&ch(i,null),fp(),ob(i),s!==null&&Zo(s,i,d,!0),i.childLanes=p,null}function Eh(s,i){return i=Ah({mode:i.mode,children:i.children},s.mode),i.ref=s.ref,s.child=i,i.return=s,i}function iv(s,i,l){return Ka(i,s.child,null,l),s=Eh(i,i.pendingProps),s.flags|=2,hs(i),i.memoizedState=null,s}function IS(s,i,l){var d=i.pendingProps,p=(i.flags&128)!==0;if(i.flags&=-129,s===null){if(st){if(d.mode==="hidden")return s=Eh(i,d),i.lanes=536870912,Kc(null,s);if(pp(i),(s=_t)?(s=x_(s,Is),s=s!==null&&s.data==="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Ei!==null?{id:ar,overflow:or}:null,retryLane:536870912,hydrationErrors:null},l=By(s),l.return=i,i.child=l,_n=i,_t=null)):s=null,s===null)throw Ai(i);return i.lanes=536870912,null}return Eh(i,d)}var g=s.memoizedState;if(g!==null){var _=g.dehydrated;if(pp(i),p)if(i.flags&256)i.flags&=-257,i=iv(s,i,l);else if(i.memoizedState!==null)i.child=s.child,i.flags|=128,i=null;else throw Error(r(558));else if(tn||Zo(s,i,l,!1),p=(l&s.childLanes)!==0,tn||p){if(d=yt,d!==null&&(_=ws(d,l),_!==0&&_!==g.retryLane))throw g.retryLane=_,La(s,_),Zn(d,s,_),Op;Oh(),i=iv(s,i,l)}else s=g.treeContext,_t=Cs(_.nextSibling),_n=i,st=!0,Si=null,Is=!1,s!==null&&Gy(i,s),i=Eh(i,d),i.flags|=4096;return i}return s=Mr(s.child,{mode:d.mode,children:d.children}),s.ref=i.ref,i.child=s,s.return=i,s}function Sh(s,i){var l=i.ref;if(l===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(s===null||s.ref!==l)&&(i.flags|=4194816)}}function Vp(s,i,l,d,p){return Ba(i),l=xp(s,i,l,d,void 0,p),d=yp(),s!==null&&!tn?(bp(s,i,p),Fr(s,i,p)):(st&&d&&Jm(i),i.flags|=1,Nn(s,i,l,p),i.child)}function av(s,i,l,d,p,g){return Ba(i),i.updateQueue=null,l=cb(i,d,l,p),lb(s),d=yp(),s!==null&&!tn?(bp(s,i,g),Fr(s,i,g)):(st&&d&&Jm(i),i.flags|=1,Nn(s,i,l,g),i.child)}function ov(s,i,l,d,p){if(Ba(i),i.stateNode===null){var g=Yo,_=l.contextType;typeof _=="object"&&_!==null&&(g=wn(_)),g=new l(d,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Mp,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=d,g.state=i.memoizedState,g.refs={},cp(i),_=l.contextType,g.context=typeof _=="object"&&_!==null?wn(_):Yo,g.state=i.memoizedState,_=l.getDerivedStateFromProps,typeof _=="function"&&(Dp(i,l,_,d),g.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(_=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),_!==g.state&&Mp.enqueueReplaceState(g,g.state,null),qc(i,d,g,p),Fc(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),d=!0}else if(s===null){g=i.stateNode;var j=i.memoizedProps,U=Qa(l,j);g.props=U;var X=g.context,oe=l.contextType;_=Yo,typeof oe=="object"&&oe!==null&&(_=wn(oe));var fe=l.getDerivedStateFromProps;oe=typeof fe=="function"||typeof g.getSnapshotBeforeUpdate=="function",j=i.pendingProps!==j,oe||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(j||X!==_)&&$b(i,g,d,_),Ii=!1;var Z=i.memoizedState;g.state=Z,qc(i,d,g,p),Fc(),X=i.memoizedState,j||Z!==X||Ii?(typeof fe=="function"&&(Dp(i,l,fe,d),X=i.memoizedState),(U=Ii||Kb(i,l,U,d,Z,X,_))?(oe||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=X),g.props=d,g.state=X,g.context=_,d=U):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{g=i.stateNode,up(s,i),_=i.memoizedProps,oe=Qa(l,_),g.props=oe,fe=i.pendingProps,Z=g.context,X=l.contextType,U=Yo,typeof X=="object"&&X!==null&&(U=wn(X)),j=l.getDerivedStateFromProps,(X=typeof j=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_!==fe||Z!==U)&&$b(i,g,d,U),Ii=!1,Z=i.memoizedState,g.state=Z,qc(i,d,g,p),Fc();var ne=i.memoizedState;_!==fe||Z!==ne||Ii||s!==null&&s.dependencies!==null&&oh(s.dependencies)?(typeof j=="function"&&(Dp(i,l,j,d),ne=i.memoizedState),(oe=Ii||Kb(i,l,oe,d,Z,ne,U)||s!==null&&s.dependencies!==null&&oh(s.dependencies))?(X||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(d,ne,U),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(d,ne,U)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||_===s.memoizedProps&&Z===s.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&Z===s.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=ne),g.props=d,g.state=ne,g.context=U,d=oe):(typeof g.componentDidUpdate!="function"||_===s.memoizedProps&&Z===s.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&Z===s.memoizedState||(i.flags|=1024),d=!1)}return g=d,Sh(s,i),d=(i.flags&128)!==0,g||d?(g=i.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,s!==null&&d?(i.child=Ka(i,s.child,null,p),i.child=Ka(i,null,l,p)):Nn(s,i,l,p),i.memoizedState=g.state,s=i.child):s=Fr(s,i,p),s}function lv(s,i,l,d){return Fa(),i.flags|=256,Nn(s,i,l,d),i.child}var Lp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Up(s){return{baseLanes:s,cachePool:Xy()}}function Fp(s,i,l){return s=s!==null?s.childLanes&~l:0,i&&(s|=ms),s}function cv(s,i,l){var d=i.pendingProps,p=!1,g=(i.flags&128)!==0,_;if((_=g)||(_=s!==null&&s.memoizedState===null?!1:(Kt.current&2)!==0),_&&(p=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,s===null){if(st){if(p?ki(i):Di(),(s=_t)?(s=x_(s,Is),s=s!==null&&s.data!=="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Ei!==null?{id:ar,overflow:or}:null,retryLane:536870912,hydrationErrors:null},l=By(s),l.return=i,i.child=l,_n=i,_t=null)):s=null,s===null)throw Ai(i);return wg(s)?i.lanes=32:i.lanes=536870912,null}var j=d.children;return d=d.fallback,p?(Di(),p=i.mode,j=Ah({mode:"hidden",children:j},p),d=Ua(d,p,l,null),j.return=i,d.return=i,j.sibling=d,i.child=j,d=i.child,d.memoizedState=Up(l),d.childLanes=Fp(s,_,l),i.memoizedState=Lp,Kc(null,d)):(ki(i),qp(i,j))}var U=s.memoizedState;if(U!==null&&(j=U.dehydrated,j!==null)){if(g)i.flags&256?(ki(i),i.flags&=-257,i=Bp(s,i,l)):i.memoizedState!==null?(Di(),i.child=s.child,i.flags|=128,i=null):(Di(),j=d.fallback,p=i.mode,d=Ah({mode:"visible",children:d.children},p),j=Ua(j,p,l,null),j.flags|=2,d.return=i,j.return=i,d.sibling=j,i.child=d,Ka(i,s.child,null,l),d=i.child,d.memoizedState=Up(l),d.childLanes=Fp(s,_,l),i.memoizedState=Lp,i=Kc(null,d));else if(ki(i),wg(j)){if(_=j.nextSibling&&j.nextSibling.dataset,_)var X=_.dgst;_=X,d=Error(r(419)),d.stack="",d.digest=_,Mc({value:d,source:null,stack:null}),i=Bp(s,i,l)}else if(tn||Zo(s,i,l,!1),_=(l&s.childLanes)!==0,tn||_){if(_=yt,_!==null&&(d=ws(_,l),d!==0&&d!==U.retryLane))throw U.retryLane=d,La(s,d),Zn(_,s,d),Op;_g(j)||Oh(),i=Bp(s,i,l)}else _g(j)?(i.flags|=192,i.child=s.child,i=null):(s=U.treeContext,_t=Cs(j.nextSibling),_n=i,st=!0,Si=null,Is=!1,s!==null&&Gy(i,s),i=qp(i,d.children),i.flags|=4096);return i}return p?(Di(),j=d.fallback,p=i.mode,U=s.child,X=U.sibling,d=Mr(U,{mode:"hidden",children:d.children}),d.subtreeFlags=U.subtreeFlags&65011712,X!==null?j=Mr(X,j):(j=Ua(j,p,l,null),j.flags|=2),j.return=i,d.return=i,d.sibling=j,i.child=d,Kc(null,d),d=i.child,j=s.child.memoizedState,j===null?j=Up(l):(p=j.cachePool,p!==null?(U=Zt._currentValue,p=p.parent!==U?{parent:U,pool:U}:p):p=Xy(),j={baseLanes:j.baseLanes|l,cachePool:p}),d.memoizedState=j,d.childLanes=Fp(s,_,l),i.memoizedState=Lp,Kc(s.child,d)):(ki(i),l=s.child,s=l.sibling,l=Mr(l,{mode:"visible",children:d.children}),l.return=i,l.sibling=null,s!==null&&(_=i.deletions,_===null?(i.deletions=[s],i.flags|=16):_.push(s)),i.child=l,i.memoizedState=null,l)}function qp(s,i){return i=Ah({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function Ah(s,i){return s=us(22,s,null,i),s.lanes=0,s}function Bp(s,i,l){return Ka(i,s.child,null,l),s=qp(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function uv(s,i,l){s.lanes|=i;var d=s.alternate;d!==null&&(d.lanes|=i),sp(s.return,i,l)}function zp(s,i,l,d,p,g){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p,treeForkCount:g}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=l,_.tailMode=p,_.treeForkCount=g)}function dv(s,i,l){var d=i.pendingProps,p=d.revealOrder,g=d.tail;d=d.children;var _=Kt.current,j=(_&2)!==0;if(j?(_=_&1|2,i.flags|=128):_&=1,ce(Kt,_),Nn(s,i,d,l),d=st?Dc:0,!j&&s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&uv(s,l,i);else if(s.tag===19)uv(s,l,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(p){case"forwards":for(l=i.child,p=null;l!==null;)s=l.alternate,s!==null&&ph(s)===null&&(p=l),l=l.sibling;l=p,l===null?(p=i.child,i.child=null):(p=l.sibling,l.sibling=null),zp(i,!1,p,l,g,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=i.child,i.child=null;p!==null;){if(s=p.alternate,s!==null&&ph(s)===null){i.child=p;break}s=p.sibling,p.sibling=l,l=p,p=s}zp(i,!0,l,null,g,d);break;case"together":zp(i,!1,null,null,void 0,d);break;default:i.memoizedState=null}return i.child}function Fr(s,i,l){if(s!==null&&(i.dependencies=s.dependencies),Oi|=i.lanes,(l&i.childLanes)===0)if(s!==null){if(Zo(s,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,l=Mr(s,s.pendingProps),i.child=l,l.return=i;s.sibling!==null;)s=s.sibling,l=l.sibling=Mr(s,s.pendingProps),l.return=i;l.sibling=null}return i.child}function Hp(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&oh(s)))}function RS(s,i,l){switch(i.tag){case 3:Ee(i,i.stateNode.containerInfo),ji(i,Zt,s.memoizedState.cache),Fa();break;case 27:case 5:$e(i);break;case 4:Ee(i,i.stateNode.containerInfo);break;case 10:ji(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,pp(i),null;break;case 13:var d=i.memoizedState;if(d!==null)return d.dehydrated!==null?(ki(i),i.flags|=128,null):(l&i.child.childLanes)!==0?cv(s,i,l):(ki(i),s=Fr(s,i,l),s!==null?s.sibling:null);ki(i);break;case 19:var p=(s.flags&128)!==0;if(d=(l&i.childLanes)!==0,d||(Zo(s,i,l,!1),d=(l&i.childLanes)!==0),p){if(d)return dv(s,i,l);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ce(Kt,Kt.current),d)break;return null;case 22:return i.lanes=0,sv(s,i,l,i.pendingProps);case 24:ji(i,Zt,s.memoizedState.cache)}return Fr(s,i,l)}function hv(s,i,l){if(s!==null)if(s.memoizedProps!==i.pendingProps)tn=!0;else{if(!Hp(s,l)&&(i.flags&128)===0)return tn=!1,RS(s,i,l);tn=(s.flags&131072)!==0}else tn=!1,st&&(i.flags&1048576)!==0&&Hy(i,Dc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var d=i.pendingProps;if(s=Ha(i.elementType),i.type=s,typeof s=="function")Ym(s)?(d=Qa(s,d),i.tag=1,i=ov(null,i,s,d,l)):(i.tag=0,i=Vp(null,i,s,d,l));else{if(s!=null){var p=s.$$typeof;if(p===z){i.tag=11,i=ev(null,i,s,d,l);break e}else if(p===C){i.tag=14,i=tv(null,i,s,d,l);break e}}throw i=Te(s)||s,Error(r(306,i,""))}}return i;case 0:return Vp(s,i,i.type,i.pendingProps,l);case 1:return d=i.type,p=Qa(d,i.pendingProps),ov(s,i,d,p,l);case 3:e:{if(Ee(i,i.stateNode.containerInfo),s===null)throw Error(r(387));d=i.pendingProps;var g=i.memoizedState;p=g.element,up(s,i),qc(i,d,null,l);var _=i.memoizedState;if(d=_.cache,ji(i,Zt,d),d!==g.cache&&rp(i,[Zt],l,!0),Fc(),d=_.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=lv(s,i,d,l);break e}else if(d!==p){p=Ss(Error(r(424)),i),Mc(p),i=lv(s,i,d,l);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(_t=Cs(s.firstChild),_n=i,st=!0,Si=null,Is=!0,l=sb(i,null,d,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Fa(),d===p){i=Fr(s,i,l);break e}Nn(s,i,d,l)}i=i.child}return i;case 26:return Sh(s,i),s===null?(l=N_(i.type,null,i.pendingProps,null))?i.memoizedState=l:st||(l=i.type,s=i.pendingProps,d=zh(q.current).createElement(l),d[Ve]=i,d[nt]=s,Tn(d,l,s),Gt(d),i.stateNode=d):i.memoizedState=N_(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return $e(i),s===null&&st&&(d=i.stateNode=v_(i.type,i.pendingProps,q.current),_n=i,Is=!0,p=_t,qi(i.type)?(Ng=p,_t=Cs(d.firstChild)):_t=p),Nn(s,i,i.pendingProps.children,l),Sh(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&st&&((p=d=_t)&&(d=aA(d,i.type,i.pendingProps,Is),d!==null?(i.stateNode=d,_n=i,_t=Cs(d.firstChild),Is=!1,p=!0):p=!1),p||Ai(i)),$e(i),p=i.type,g=i.pendingProps,_=s!==null?s.memoizedProps:null,d=g.children,yg(p,g)?d=null:_!==null&&yg(p,_)&&(i.flags|=32),i.memoizedState!==null&&(p=xp(s,i,_S,null,null,l),ou._currentValue=p),Sh(s,i),Nn(s,i,d,l),i.child;case 6:return s===null&&st&&((s=l=_t)&&(l=oA(l,i.pendingProps,Is),l!==null?(i.stateNode=l,_n=i,_t=null,s=!0):s=!1),s||Ai(i)),null;case 13:return cv(s,i,l);case 4:return Ee(i,i.stateNode.containerInfo),d=i.pendingProps,s===null?i.child=Ka(i,null,d,l):Nn(s,i,d,l),i.child;case 11:return ev(s,i,i.type,i.pendingProps,l);case 7:return Nn(s,i,i.pendingProps,l),i.child;case 8:return Nn(s,i,i.pendingProps.children,l),i.child;case 12:return Nn(s,i,i.pendingProps.children,l),i.child;case 10:return d=i.pendingProps,ji(i,i.type,d.value),Nn(s,i,d.children,l),i.child;case 9:return p=i.type._context,d=i.pendingProps.children,Ba(i),p=wn(p),d=d(p),i.flags|=1,Nn(s,i,d,l),i.child;case 14:return tv(s,i,i.type,i.pendingProps,l);case 15:return nv(s,i,i.type,i.pendingProps,l);case 19:return dv(s,i,l);case 31:return IS(s,i,l);case 22:return sv(s,i,l,i.pendingProps);case 24:return Ba(i),d=wn(Zt),s===null?(p=op(),p===null&&(p=yt,g=ip(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=l),p=g),i.memoizedState={parent:d,cache:p},cp(i),ji(i,Zt,p)):((s.lanes&l)!==0&&(up(s,i),qc(i,null,null,l),Fc()),p=s.memoizedState,g=i.memoizedState,p.parent!==d?(p={parent:d,cache:d},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),ji(i,Zt,d)):(d=g.cache,ji(i,Zt,d),d!==p.cache&&rp(i,[Zt],l,!0))),Nn(s,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function qr(s){s.flags|=4}function Gp(s,i,l,d,p){if((i=(s.mode&32)!==0)&&(i=!1),i){if(s.flags|=16777216,(p&335544128)===p)if(s.stateNode.complete)s.flags|=8192;else if(Uv())s.flags|=8192;else throw Ga=dh,lp}else s.flags&=-16777217}function fv(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!j_(i))if(Uv())s.flags|=8192;else throw Ga=dh,lp}function jh(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?Ta():536870912,s.lanes|=i,dl|=i)}function $c(s,i){if(!st)switch(s.tailMode){case"hidden":i=s.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function wt(s){var i=s.alternate!==null&&s.alternate.child===s.child,l=0,d=0;if(i)for(var p=s.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&65011712,d|=p.flags&65011712,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=d,s.childLanes=l,i}function CS(s,i,l){var d=i.pendingProps;switch(Zm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(i),null;case 1:return wt(i),null;case 3:return l=i.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),Vr(Zt),ke(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Jo(i)?qr(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,tp())),wt(i),null;case 26:var p=i.type,g=i.memoizedState;return s===null?(qr(i),g!==null?(wt(i),fv(i,g)):(wt(i),Gp(i,p,null,d,l))):g?g!==s.memoizedState?(qr(i),wt(i),fv(i,g)):(wt(i),i.flags&=-16777217):(s=s.memoizedProps,s!==d&&qr(i),wt(i),Gp(i,p,s,d,l)),null;case 27:if(Xt(i),l=q.current,p=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==d&&qr(i);else{if(!d){if(i.stateNode===null)throw Error(r(166));return wt(i),null}s=ve.current,Jo(i)?Ky(i):(s=v_(p,d,l),i.stateNode=s,qr(i))}return wt(i),null;case 5:if(Xt(i),p=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==d&&qr(i);else{if(!d){if(i.stateNode===null)throw Error(r(166));return wt(i),null}if(g=ve.current,Jo(i))Ky(i);else{var _=zh(q.current);switch(g){case 1:g=_.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:g=_.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":g=_.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":g=_.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":g=_.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof d.is=="string"?_.createElement("select",{is:d.is}):_.createElement("select"),d.multiple?g.multiple=!0:d.size&&(g.size=d.size);break;default:g=typeof d.is=="string"?_.createElement(p,{is:d.is}):_.createElement(p)}}g[Ve]=i,g[nt]=d;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)g.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=g;e:switch(Tn(g,p,d),p){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&qr(i)}}return wt(i),Gp(i,i.type,s===null?null:s.memoizedProps,i.pendingProps,l),null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==d&&qr(i);else{if(typeof d!="string"&&i.stateNode===null)throw Error(r(166));if(s=q.current,Jo(i)){if(s=i.stateNode,l=i.memoizedProps,d=null,p=_n,p!==null)switch(p.tag){case 27:case 5:d=p.memoizedProps}s[Ve]=i,s=!!(s.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||c_(s.nodeValue,l)),s||Ai(i,!0)}else s=zh(s).createTextNode(d),s[Ve]=i,i.stateNode=s}return wt(i),null;case 31:if(l=i.memoizedState,s===null||s.memoizedState!==null){if(d=Jo(i),l!==null){if(s===null){if(!d)throw Error(r(318));if(s=i.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Ve]=i}else Fa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;wt(i),s=!1}else l=tp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return i.flags&256?(hs(i),i):(hs(i),null);if((i.flags&128)!==0)throw Error(r(558))}return wt(i),null;case 13:if(d=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(p=Jo(i),d!==null&&d.dehydrated!==null){if(s===null){if(!p)throw Error(r(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[Ve]=i}else Fa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;wt(i),p=!1}else p=tp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),p=!0;if(!p)return i.flags&256?(hs(i),i):(hs(i),null)}return hs(i),(i.flags&128)!==0?(i.lanes=l,i):(l=d!==null,s=s!==null&&s.memoizedState!==null,l&&(d=i.child,p=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(p=d.alternate.memoizedState.cachePool.pool),g=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(g=d.memoizedState.cachePool.pool),g!==p&&(d.flags|=2048)),l!==s&&l&&(i.child.flags|=8192),jh(i,i.updateQueue),wt(i),null);case 4:return ke(),s===null&&fg(i.stateNode.containerInfo),wt(i),null;case 10:return Vr(i.type),wt(i),null;case 19:if($(Kt),d=i.memoizedState,d===null)return wt(i),null;if(p=(i.flags&128)!==0,g=d.rendering,g===null)if(p)$c(d,!1);else{if(Vt!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(g=ph(s),g!==null){for(i.flags|=128,$c(d,!1),s=g.updateQueue,i.updateQueue=s,jh(i,s),i.subtreeFlags=0,s=l,l=i.child;l!==null;)qy(l,s),l=l.sibling;return ce(Kt,Kt.current&1|2),st&&Pr(i,d.treeForkCount),i.child}s=s.sibling}d.tail!==null&&Mt()>Dh&&(i.flags|=128,p=!0,$c(d,!1),i.lanes=4194304)}else{if(!p)if(s=ph(g),s!==null){if(i.flags|=128,p=!0,s=s.updateQueue,i.updateQueue=s,jh(i,s),$c(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!st)return wt(i),null}else 2*Mt()-d.renderingStartTime>Dh&&l!==536870912&&(i.flags|=128,p=!0,$c(d,!1),i.lanes=4194304);d.isBackwards?(g.sibling=i.child,i.child=g):(s=d.last,s!==null?s.sibling=g:i.child=g,d.last=g)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=Mt(),s.sibling=null,l=Kt.current,ce(Kt,p?l&1|2:l&1),st&&Pr(i,d.treeForkCount),s):(wt(i),null);case 22:case 23:return hs(i),mp(),d=i.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(i.flags|=8192):d&&(i.flags|=8192),d?(l&536870912)!==0&&(i.flags&128)===0&&(wt(i),i.subtreeFlags&6&&(i.flags|=8192)):wt(i),l=i.updateQueue,l!==null&&jh(i,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),d=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==l&&(i.flags|=2048),s!==null&&$(za),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Vr(Zt),wt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function kS(s,i){switch(Zm(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return Vr(Zt),ke(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return Xt(i),null;case 31:if(i.memoizedState!==null){if(hs(i),i.alternate===null)throw Error(r(340));Fa()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 13:if(hs(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Fa()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return $(Kt),null;case 4:return ke(),null;case 10:return Vr(i.type),null;case 22:case 23:return hs(i),mp(),s!==null&&$(za),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return Vr(Zt),null;case 25:return null;default:return null}}function mv(s,i){switch(Zm(i),i.tag){case 3:Vr(Zt),ke();break;case 26:case 27:case 5:Xt(i);break;case 4:ke();break;case 31:i.memoizedState!==null&&hs(i);break;case 13:hs(i);break;case 19:$(Kt);break;case 10:Vr(i.type);break;case 22:case 23:hs(i),mp(),s!==null&&$(za);break;case 24:Vr(Zt)}}function Qc(s,i){try{var l=i.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var p=d.next;l=p;do{if((l.tag&s)===s){d=void 0;var g=l.create,_=l.inst;d=g(),_.destroy=d}l=l.next}while(l!==p)}}catch(j){ht(i,i.return,j)}}function Mi(s,i,l){try{var d=i.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var g=p.next;d=g;do{if((d.tag&s)===s){var _=d.inst,j=_.destroy;if(j!==void 0){_.destroy=void 0,p=i;var U=l,X=j;try{X()}catch(oe){ht(p,U,oe)}}}d=d.next}while(d!==g)}}catch(oe){ht(i,i.return,oe)}}function pv(s){var i=s.updateQueue;if(i!==null){var l=s.stateNode;try{ib(i,l)}catch(d){ht(s,s.return,d)}}}function gv(s,i,l){l.props=Qa(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(d){ht(s,i,d)}}function Yc(s,i){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof l=="function"?s.refCleanup=l(d):l.current=d}}catch(p){ht(s,i,p)}}function lr(s,i){var l=s.ref,d=s.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(p){ht(s,i,p)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){ht(s,i,p)}else l.current=null}function xv(s){var i=s.type,l=s.memoizedProps,d=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(p){ht(s,s.return,p)}}function Kp(s,i,l){try{var d=s.stateNode;eA(d,s.type,l,i),d[nt]=i}catch(p){ht(s,s.return,p)}}function yv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&qi(s.type)||s.tag===4}function $p(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||yv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&qi(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Qp(s,i,l){var d=s.tag;if(d===5||d===6)s=s.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(s),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=hn));else if(d!==4&&(d===27&&qi(s.type)&&(l=s.stateNode,i=null),s=s.child,s!==null))for(Qp(s,i,l),s=s.sibling;s!==null;)Qp(s,i,l),s=s.sibling}function Ih(s,i,l){var d=s.tag;if(d===5||d===6)s=s.stateNode,i?l.insertBefore(s,i):l.appendChild(s);else if(d!==4&&(d===27&&qi(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Ih(s,i,l),s=s.sibling;s!==null;)Ih(s,i,l),s=s.sibling}function bv(s){var i=s.stateNode,l=s.memoizedProps;try{for(var d=s.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);Tn(i,d,l),i[Ve]=s,i[nt]=l}catch(g){ht(s,s.return,g)}}var Br=!1,nn=!1,Yp=!1,vv=typeof WeakSet=="function"?WeakSet:Set,pn=null;function DS(s,i){if(s=s.containerInfo,gg=Wh,s=ky(s),Bm(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var _=0,j=-1,U=-1,X=0,oe=0,fe=s,Z=null;t:for(;;){for(var ne;fe!==l||p!==0&&fe.nodeType!==3||(j=_+p),fe!==g||d!==0&&fe.nodeType!==3||(U=_+d),fe.nodeType===3&&(_+=fe.nodeValue.length),(ne=fe.firstChild)!==null;)Z=fe,fe=ne;for(;;){if(fe===s)break t;if(Z===l&&++X===p&&(j=_),Z===g&&++oe===d&&(U=_),(ne=fe.nextSibling)!==null)break;fe=Z,Z=fe.parentNode}fe=ne}l=j===-1||U===-1?null:{start:j,end:U}}else l=null}l=l||{start:0,end:0}}else l=null;for(xg={focusedElem:s,selectionRange:l},Wh=!1,pn=i;pn!==null;)if(i=pn,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,pn=s;else for(;pn!==null;){switch(i=pn,g=i.alternate,s=i.flags,i.tag){case 0:if((s&4)!==0&&(s=i.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)p=s[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&g!==null){s=void 0,l=i,p=g.memoizedProps,g=g.memoizedState,d=l.stateNode;try{var Ie=Qa(l.type,p);s=d.getSnapshotBeforeUpdate(Ie,g),d.__reactInternalSnapshotBeforeUpdate=s}catch(Ue){ht(l,l.return,Ue)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,l=s.nodeType,l===9)vg(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":vg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,pn=s;break}pn=i.return}}function _v(s,i,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:Hr(s,l),d&4&&Qc(5,l);break;case 1:if(Hr(s,l),d&4)if(s=l.stateNode,i===null)try{s.componentDidMount()}catch(_){ht(l,l.return,_)}else{var p=Qa(l.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(p,i,s.__reactInternalSnapshotBeforeUpdate)}catch(_){ht(l,l.return,_)}}d&64&&pv(l),d&512&&Yc(l,l.return);break;case 3:if(Hr(s,l),d&64&&(s=l.updateQueue,s!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{ib(s,i)}catch(_){ht(l,l.return,_)}}break;case 27:i===null&&d&4&&bv(l);case 26:case 5:Hr(s,l),i===null&&d&4&&xv(l),d&512&&Yc(l,l.return);break;case 12:Hr(s,l);break;case 31:Hr(s,l),d&4&&Tv(s,l);break;case 13:Hr(s,l),d&4&&Ev(s,l),d&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=BS.bind(null,l),lA(s,l))));break;case 22:if(d=l.memoizedState!==null||Br,!d){i=i!==null&&i.memoizedState!==null||nn,p=Br;var g=nn;Br=d,(nn=i)&&!g?Gr(s,l,(l.subtreeFlags&8772)!==0):Hr(s,l),Br=p,nn=g}break;case 30:break;default:Hr(s,l)}}function wv(s){var i=s.alternate;i!==null&&(s.alternate=null,wv(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&Sa(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Et=null,Yn=!1;function zr(s,i,l){for(l=l.child;l!==null;)Nv(s,i,l),l=l.sibling}function Nv(s,i,l){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Us,l)}catch{}switch(l.tag){case 26:nn||lr(l,i),zr(s,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:nn||lr(l,i);var d=Et,p=Yn;qi(l.type)&&(Et=l.stateNode,Yn=!1),zr(s,i,l),ru(l.stateNode),Et=d,Yn=p;break;case 5:nn||lr(l,i);case 6:if(d=Et,p=Yn,Et=null,zr(s,i,l),Et=d,Yn=p,Et!==null)if(Yn)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(l.stateNode)}catch(g){ht(l,i,g)}else try{Et.removeChild(l.stateNode)}catch(g){ht(l,i,g)}break;case 18:Et!==null&&(Yn?(s=Et,p_(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),bl(s)):p_(Et,l.stateNode));break;case 4:d=Et,p=Yn,Et=l.stateNode.containerInfo,Yn=!0,zr(s,i,l),Et=d,Yn=p;break;case 0:case 11:case 14:case 15:Mi(2,l,i),nn||Mi(4,l,i),zr(s,i,l);break;case 1:nn||(lr(l,i),d=l.stateNode,typeof d.componentWillUnmount=="function"&&gv(l,i,d)),zr(s,i,l);break;case 21:zr(s,i,l);break;case 22:nn=(d=nn)||l.memoizedState!==null,zr(s,i,l),nn=d;break;default:zr(s,i,l)}}function Tv(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{bl(s)}catch(l){ht(i,i.return,l)}}}function Ev(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{bl(s)}catch(l){ht(i,i.return,l)}}function MS(s){switch(s.tag){case 31:case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new vv),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new vv),i;default:throw Error(r(435,s.tag))}}function Rh(s,i){var l=MS(s);i.forEach(function(d){if(!l.has(d)){l.add(d);var p=zS.bind(null,s,d);d.then(p,p)}})}function Wn(s,i){var l=i.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d],g=s,_=i,j=_;e:for(;j!==null;){switch(j.tag){case 27:if(qi(j.type)){Et=j.stateNode,Yn=!1;break e}break;case 5:Et=j.stateNode,Yn=!1;break e;case 3:case 4:Et=j.stateNode.containerInfo,Yn=!0;break e}j=j.return}if(Et===null)throw Error(r(160));Nv(g,_,p),Et=null,Yn=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Sv(i,s),i=i.sibling}var Gs=null;function Sv(s,i){var l=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Wn(i,s),Xn(s),d&4&&(Mi(3,s,s.return),Qc(3,s),Mi(5,s,s.return));break;case 1:Wn(i,s),Xn(s),d&512&&(nn||l===null||lr(l,l.return)),d&64&&Br&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var p=Gs;if(Wn(i,s),Xn(s),d&512&&(nn||l===null||lr(l,l.return)),d&4){var g=l!==null?l.memoizedState:null;if(d=s.memoizedState,l===null)if(d===null)if(s.stateNode===null){e:{d=s.type,l=s.memoizedProps,p=p.ownerDocument||p;t:switch(d){case"title":g=p.getElementsByTagName("title")[0],(!g||g[Sr]||g[Ve]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(d),p.head.insertBefore(g,p.querySelector("head > title"))),Tn(g,d,l),g[Ve]=s,Gt(g),d=g;break e;case"link":var _=S_("link","href",p).get(d+(l.href||""));if(_){for(var j=0;j<_.length;j++)if(g=_[j],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){_.splice(j,1);break t}}g=p.createElement(d),Tn(g,d,l),p.head.appendChild(g);break;case"meta":if(_=S_("meta","content",p).get(d+(l.content||""))){for(j=0;j<_.length;j++)if(g=_[j],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){_.splice(j,1);break t}}g=p.createElement(d),Tn(g,d,l),p.head.appendChild(g);break;default:throw Error(r(468,d))}g[Ve]=s,Gt(g),d=g}s.stateNode=d}else A_(p,s.type,s.stateNode);else s.stateNode=E_(p,d,s.memoizedProps);else g!==d?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,d===null?A_(p,s.type,s.stateNode):E_(p,d,s.memoizedProps)):d===null&&s.stateNode!==null&&Kp(s,s.memoizedProps,l.memoizedProps)}break;case 27:Wn(i,s),Xn(s),d&512&&(nn||l===null||lr(l,l.return)),l!==null&&d&4&&Kp(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Wn(i,s),Xn(s),d&512&&(nn||l===null||lr(l,l.return)),s.flags&32){p=s.stateNode;try{Ts(p,"")}catch(Ie){ht(s,s.return,Ie)}}d&4&&s.stateNode!=null&&(p=s.memoizedProps,Kp(s,p,l!==null?l.memoizedProps:p)),d&1024&&(Yp=!0);break;case 6:if(Wn(i,s),Xn(s),d&4){if(s.stateNode===null)throw Error(r(162));d=s.memoizedProps,l=s.stateNode;try{l.nodeValue=d}catch(Ie){ht(s,s.return,Ie)}}break;case 3:if(Kh=null,p=Gs,Gs=Hh(i.containerInfo),Wn(i,s),Gs=p,Xn(s),d&4&&l!==null&&l.memoizedState.isDehydrated)try{bl(i.containerInfo)}catch(Ie){ht(s,s.return,Ie)}Yp&&(Yp=!1,Av(s));break;case 4:d=Gs,Gs=Hh(s.stateNode.containerInfo),Wn(i,s),Xn(s),Gs=d;break;case 12:Wn(i,s),Xn(s);break;case 31:Wn(i,s),Xn(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Rh(s,d)));break;case 13:Wn(i,s),Xn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(kh=Mt()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Rh(s,d)));break;case 22:p=s.memoizedState!==null;var U=l!==null&&l.memoizedState!==null,X=Br,oe=nn;if(Br=X||p,nn=oe||U,Wn(i,s),nn=oe,Br=X,Xn(s),d&8192)e:for(i=s.stateNode,i._visibility=p?i._visibility&-2:i._visibility|1,p&&(l===null||U||Br||nn||Ya(s)),l=null,i=s;;){if(i.tag===5||i.tag===26){if(l===null){U=l=i;try{if(g=U.stateNode,p)_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{j=U.stateNode;var fe=U.memoizedProps.style,Z=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;j.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Ie){ht(U,U.return,Ie)}}}else if(i.tag===6){if(l===null){U=i;try{U.stateNode.nodeValue=p?"":U.memoizedProps}catch(Ie){ht(U,U.return,Ie)}}}else if(i.tag===18){if(l===null){U=i;try{var ne=U.stateNode;p?g_(ne,!0):g_(U.stateNode,!1)}catch(Ie){ht(U,U.return,Ie)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}d&4&&(d=s.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,Rh(s,l))));break;case 19:Wn(i,s),Xn(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Rh(s,d)));break;case 30:break;case 21:break;default:Wn(i,s),Xn(s)}}function Xn(s){var i=s.flags;if(i&2){try{for(var l,d=s.return;d!==null;){if(yv(d)){l=d;break}d=d.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var p=l.stateNode,g=$p(s);Ih(s,g,p);break;case 5:var _=l.stateNode;l.flags&32&&(Ts(_,""),l.flags&=-33);var j=$p(s);Ih(s,j,_);break;case 3:case 4:var U=l.stateNode.containerInfo,X=$p(s);Qp(s,X,U);break;default:throw Error(r(161))}}catch(oe){ht(s,s.return,oe)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function Av(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;Av(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function Hr(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)_v(s,i.alternate,i),i=i.sibling}function Ya(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:Mi(4,i,i.return),Ya(i);break;case 1:lr(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&gv(i,i.return,l),Ya(i);break;case 27:ru(i.stateNode);case 26:case 5:lr(i,i.return),Ya(i);break;case 22:i.memoizedState===null&&Ya(i);break;case 30:Ya(i);break;default:Ya(i)}s=s.sibling}}function Gr(s,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var d=i.alternate,p=s,g=i,_=g.flags;switch(g.tag){case 0:case 11:case 15:Gr(p,g,l),Qc(4,g);break;case 1:if(Gr(p,g,l),d=g,p=d.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(X){ht(d,d.return,X)}if(d=g,p=d.updateQueue,p!==null){var j=d.stateNode;try{var U=p.shared.hiddenCallbacks;if(U!==null)for(p.shared.hiddenCallbacks=null,p=0;p<U.length;p++)rb(U[p],j)}catch(X){ht(d,d.return,X)}}l&&_&64&&pv(g),Yc(g,g.return);break;case 27:bv(g);case 26:case 5:Gr(p,g,l),l&&d===null&&_&4&&xv(g),Yc(g,g.return);break;case 12:Gr(p,g,l);break;case 31:Gr(p,g,l),l&&_&4&&Tv(p,g);break;case 13:Gr(p,g,l),l&&_&4&&Ev(p,g);break;case 22:g.memoizedState===null&&Gr(p,g,l),Yc(g,g.return);break;case 30:break;default:Gr(p,g,l)}i=i.sibling}}function Wp(s,i){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Pc(l))}function Xp(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Pc(s))}function Ks(s,i,l,d){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)jv(s,i,l,d),i=i.sibling}function jv(s,i,l,d){var p=i.flags;switch(i.tag){case 0:case 11:case 15:Ks(s,i,l,d),p&2048&&Qc(9,i);break;case 1:Ks(s,i,l,d);break;case 3:Ks(s,i,l,d),p&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Pc(s)));break;case 12:if(p&2048){Ks(s,i,l,d),s=i.stateNode;try{var g=i.memoizedProps,_=g.id,j=g.onPostCommit;typeof j=="function"&&j(_,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(U){ht(i,i.return,U)}}else Ks(s,i,l,d);break;case 31:Ks(s,i,l,d);break;case 13:Ks(s,i,l,d);break;case 23:break;case 22:g=i.stateNode,_=i.alternate,i.memoizedState!==null?g._visibility&2?Ks(s,i,l,d):Wc(s,i):g._visibility&2?Ks(s,i,l,d):(g._visibility|=2,ll(s,i,l,d,(i.subtreeFlags&10256)!==0||!1)),p&2048&&Wp(_,i);break;case 24:Ks(s,i,l,d),p&2048&&Xp(i.alternate,i);break;default:Ks(s,i,l,d)}}function ll(s,i,l,d,p){for(p=p&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=s,_=i,j=l,U=d,X=_.flags;switch(_.tag){case 0:case 11:case 15:ll(g,_,j,U,p),Qc(8,_);break;case 23:break;case 22:var oe=_.stateNode;_.memoizedState!==null?oe._visibility&2?ll(g,_,j,U,p):Wc(g,_):(oe._visibility|=2,ll(g,_,j,U,p)),p&&X&2048&&Wp(_.alternate,_);break;case 24:ll(g,_,j,U,p),p&&X&2048&&Xp(_.alternate,_);break;default:ll(g,_,j,U,p)}i=i.sibling}}function Wc(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=s,d=i,p=d.flags;switch(d.tag){case 22:Wc(l,d),p&2048&&Wp(d.alternate,d);break;case 24:Wc(l,d),p&2048&&Xp(d.alternate,d);break;default:Wc(l,d)}i=i.sibling}}var Xc=8192;function cl(s,i,l){if(s.subtreeFlags&Xc)for(s=s.child;s!==null;)Iv(s,i,l),s=s.sibling}function Iv(s,i,l){switch(s.tag){case 26:cl(s,i,l),s.flags&Xc&&s.memoizedState!==null&&vA(l,Gs,s.memoizedState,s.memoizedProps);break;case 5:cl(s,i,l);break;case 3:case 4:var d=Gs;Gs=Hh(s.stateNode.containerInfo),cl(s,i,l),Gs=d;break;case 22:s.memoizedState===null&&(d=s.alternate,d!==null&&d.memoizedState!==null?(d=Xc,Xc=16777216,cl(s,i,l),Xc=d):cl(s,i,l));break;default:cl(s,i,l)}}function Rv(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function Jc(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var d=i[l];pn=d,kv(d,s)}Rv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Cv(s),s=s.sibling}function Cv(s){switch(s.tag){case 0:case 11:case 15:Jc(s),s.flags&2048&&Mi(9,s,s.return);break;case 3:Jc(s);break;case 12:Jc(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,Ch(s)):Jc(s);break;default:Jc(s)}}function Ch(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var d=i[l];pn=d,kv(d,s)}Rv(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:Mi(8,i,i.return),Ch(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,Ch(i));break;default:Ch(i)}s=s.sibling}}function kv(s,i){for(;pn!==null;){var l=pn;switch(l.tag){case 0:case 11:case 15:Mi(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Pc(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,pn=d;else e:for(l=s;pn!==null;){d=pn;var p=d.sibling,g=d.return;if(wv(d),d===l){pn=null;break e}if(p!==null){p.return=g,pn=p;break e}pn=g}}}var PS={getCacheForType:function(s){var i=wn(Zt),l=i.data.get(s);return l===void 0&&(l=s(),i.data.set(s,l)),l},cacheSignal:function(){return wn(Zt).controller.signal}},OS=typeof WeakMap=="function"?WeakMap:Map,ct=0,yt=null,Ye=null,Je=0,dt=0,fs=null,Pi=!1,ul=!1,Jp=!1,Kr=0,Vt=0,Oi=0,Wa=0,Zp=0,ms=0,dl=0,Zc=null,Jn=null,eg=!1,kh=0,Dv=0,Dh=1/0,Mh=null,Vi=null,on=0,Li=null,hl=null,$r=0,tg=0,ng=null,Mv=null,eu=0,sg=null;function ps(){return(ct&2)!==0&&Je!==0?Je&-Je:Y.T!==null?cg():xe()}function Pv(){if(ms===0)if((Je&536870912)===0||st){var s=_s;_s<<=1,(_s&3932160)===0&&(_s=262144),ms=s}else ms=536870912;return s=ds.current,s!==null&&(s.flags|=32),ms}function Zn(s,i,l){(s===yt&&(dt===2||dt===9)||s.cancelPendingCommit!==null)&&(fl(s,0),Ui(s,Je,ms,!1)),er(s,l),((ct&2)===0||s!==yt)&&(s===yt&&((ct&2)===0&&(Wa|=l),Vt===4&&Ui(s,Je,ms,!1)),cr(s))}function Ov(s,i,l){if((ct&6)!==0)throw Error(r(327));var d=!l&&(i&127)===0&&(i&s.expiredLanes)===0||Zs(s,i),p=d?US(s,i):ig(s,i,!0),g=d;do{if(p===0){ul&&!d&&Ui(s,i,0,!1);break}else{if(l=s.current.alternate,g&&!VS(l)){p=ig(s,i,!1),g=!1;continue}if(p===2){if(g=i,s.errorRecoveryDisabledLanes&g)var _=0;else _=s.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var j=s;p=Zc;var U=j.current.memoizedState.isDehydrated;if(U&&(fl(j,_).flags|=256),_=ig(j,_,!1),_!==2){if(Jp&&!U){j.errorRecoveryDisabledLanes|=g,Wa|=g,p=4;break e}g=Jn,Jn=p,g!==null&&(Jn===null?Jn=g:Jn.push.apply(Jn,g))}p=_}if(g=!1,p!==2)continue}}if(p===1){fl(s,0),Ui(s,i,0,!0);break}e:{switch(d=s,g=p,g){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Ui(d,i,ms,!Pi);break e;case 2:Jn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(p=kh+300-Mt(),10<p)){if(Ui(d,i,ms,!Pi),Kn(d,0,!0)!==0)break e;$r=i,d.timeoutHandle=f_(Vv.bind(null,d,l,Jn,Mh,eg,i,ms,Wa,dl,Pi,g,"Throttled",-0,0),p);break e}Vv(d,l,Jn,Mh,eg,i,ms,Wa,dl,Pi,g,null,-0,0)}}break}while(!0);cr(s)}function Vv(s,i,l,d,p,g,_,j,U,X,oe,fe,Z,ne){if(s.timeoutHandle=-1,fe=i.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hn},Iv(i,g,fe);var Ie=(g&62914560)===g?kh-Mt():(g&4194048)===g?Dv-Mt():0;if(Ie=_A(fe,Ie),Ie!==null){$r=g,s.cancelPendingCommit=Ie(Gv.bind(null,s,i,g,l,d,p,_,j,U,oe,fe,null,Z,ne)),Ui(s,g,_,!X);return}}Gv(s,i,g,l,d,p,_,j,U)}function VS(s){for(var i=s;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var p=l[d],g=p.getSnapshot;p=p.value;try{if(!cs(g(),p))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ui(s,i,l,d){i&=~Zp,i&=~Wa,s.suspendedLanes|=i,s.pingedLanes&=~i,d&&(s.warmLanes|=i),d=s.expirationTimes;for(var p=i;0<p;){var g=31-bn(p),_=1<<g;d[g]=-1,p&=~_}l!==0&&Ea(s,l,i)}function Ph(){return(ct&6)===0?(tu(0),!1):!0}function rg(){if(Ye!==null){if(dt===0)var s=Ye.return;else s=Ye,Or=qa=null,vp(s),sl=null,Vc=0,s=Ye;for(;s!==null;)mv(s.alternate,s),s=s.return;Ye=null}}function fl(s,i){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,sA(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),$r=0,rg(),yt=s,Ye=l=Mr(s.current,null),Je=i,dt=0,fs=null,Pi=!1,ul=Zs(s,i),Jp=!1,dl=ms=Zp=Wa=Oi=Vt=0,Jn=Zc=null,eg=!1,(i&8)!==0&&(i|=i&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=i;0<d;){var p=31-bn(d),g=1<<p;i|=s[p],d&=~g}return Kr=i,nh(),l}function Lv(s,i){He=null,Y.H=Gc,i===nl||i===uh?(i=eb(),dt=3):i===lp?(i=eb(),dt=4):dt=i===Op?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,fs=i,Ye===null&&(Vt=1,Th(s,Ss(i,s.current)))}function Uv(){var s=ds.current;return s===null?!0:(Je&4194048)===Je?Rs===null:(Je&62914560)===Je||(Je&536870912)!==0?s===Rs:!1}function Fv(){var s=Y.H;return Y.H=Gc,s===null?Gc:s}function qv(){var s=Y.A;return Y.A=PS,s}function Oh(){Vt=4,Pi||(Je&4194048)!==Je&&ds.current!==null||(ul=!0),(Oi&134217727)===0&&(Wa&134217727)===0||yt===null||Ui(yt,Je,ms,!1)}function ig(s,i,l){var d=ct;ct|=2;var p=Fv(),g=qv();(yt!==s||Je!==i)&&(Mh=null,fl(s,i)),i=!1;var _=Vt;e:do try{if(dt!==0&&Ye!==null){var j=Ye,U=fs;switch(dt){case 8:rg(),_=6;break e;case 3:case 2:case 9:case 6:ds.current===null&&(i=!0);var X=dt;if(dt=0,fs=null,ml(s,j,U,X),l&&ul){_=0;break e}break;default:X=dt,dt=0,fs=null,ml(s,j,U,X)}}LS(),_=Vt;break}catch(oe){Lv(s,oe)}while(!0);return i&&s.shellSuspendCounter++,Or=qa=null,ct=d,Y.H=p,Y.A=g,Ye===null&&(yt=null,Je=0,nh()),_}function LS(){for(;Ye!==null;)Bv(Ye)}function US(s,i){var l=ct;ct|=2;var d=Fv(),p=qv();yt!==s||Je!==i?(Mh=null,Dh=Mt()+500,fl(s,i)):ul=Zs(s,i);e:do try{if(dt!==0&&Ye!==null){i=Ye;var g=fs;t:switch(dt){case 1:dt=0,fs=null,ml(s,i,g,1);break;case 2:case 9:if(Jy(g)){dt=0,fs=null,zv(i);break}i=function(){dt!==2&&dt!==9||yt!==s||(dt=7),cr(s)},g.then(i,i);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:Jy(g)?(dt=0,fs=null,zv(i)):(dt=0,fs=null,ml(s,i,g,7));break;case 5:var _=null;switch(Ye.tag){case 26:_=Ye.memoizedState;case 5:case 27:var j=Ye;if(_?j_(_):j.stateNode.complete){dt=0,fs=null;var U=j.sibling;if(U!==null)Ye=U;else{var X=j.return;X!==null?(Ye=X,Vh(X)):Ye=null}break t}}dt=0,fs=null,ml(s,i,g,5);break;case 6:dt=0,fs=null,ml(s,i,g,6);break;case 8:rg(),Vt=6;break e;default:throw Error(r(462))}}FS();break}catch(oe){Lv(s,oe)}while(!0);return Or=qa=null,Y.H=d,Y.A=p,ct=l,Ye!==null?0:(yt=null,Je=0,nh(),Vt)}function FS(){for(;Ye!==null&&!_a();)Bv(Ye)}function Bv(s){var i=hv(s.alternate,s,Kr);s.memoizedProps=s.pendingProps,i===null?Vh(s):Ye=i}function zv(s){var i=s,l=i.alternate;switch(i.tag){case 15:case 0:i=av(l,i,i.pendingProps,i.type,void 0,Je);break;case 11:i=av(l,i,i.pendingProps,i.type.render,i.ref,Je);break;case 5:vp(i);default:mv(l,i),i=Ye=qy(i,Kr),i=hv(l,i,Kr)}s.memoizedProps=s.pendingProps,i===null?Vh(s):Ye=i}function ml(s,i,l,d){Or=qa=null,vp(i),sl=null,Vc=0;var p=i.return;try{if(jS(s,p,i,l,Je)){Vt=1,Th(s,Ss(l,s.current)),Ye=null;return}}catch(g){if(p!==null)throw Ye=p,g;Vt=1,Th(s,Ss(l,s.current)),Ye=null;return}i.flags&32768?(st||d===1?s=!0:ul||(Je&536870912)!==0?s=!1:(Pi=s=!0,(d===2||d===9||d===3||d===6)&&(d=ds.current,d!==null&&d.tag===13&&(d.flags|=16384))),Hv(i,s)):Vh(i)}function Vh(s){var i=s;do{if((i.flags&32768)!==0){Hv(i,Pi);return}s=i.return;var l=CS(i.alternate,i,Kr);if(l!==null){Ye=l;return}if(i=i.sibling,i!==null){Ye=i;return}Ye=i=s}while(i!==null);Vt===0&&(Vt=5)}function Hv(s,i){do{var l=kS(s.alternate,s);if(l!==null){l.flags&=32767,Ye=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(s=s.sibling,s!==null)){Ye=s;return}Ye=s=l}while(s!==null);Vt=6,Ye=null}function Gv(s,i,l,d,p,g,_,j,U){s.cancelPendingCommit=null;do Lh();while(on!==0);if((ct&6)!==0)throw Error(r(327));if(i!==null){if(i===s.current)throw Error(r(177));if(g=i.lanes|i.childLanes,g|=$m,an(s,l,g,_,j,U),s===yt&&(Ye=yt=null,Je=0),hl=i,Li=s,$r=l,tg=g,ng=p,Mv=d,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,HS(is,function(){return Wv(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||d){d=Y.T,Y.T=null,p=le.p,le.p=2,_=ct,ct|=4;try{DS(s,i,l)}finally{ct=_,le.p=p,Y.T=d}}on=1,Kv(),$v(),Qv()}}function Kv(){if(on===1){on=0;var s=Li,i=hl,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null;var d=le.p;le.p=2;var p=ct;ct|=4;try{Sv(i,s);var g=xg,_=ky(s.containerInfo),j=g.focusedElem,U=g.selectionRange;if(_!==j&&j&&j.ownerDocument&&Cy(j.ownerDocument.documentElement,j)){if(U!==null&&Bm(j)){var X=U.start,oe=U.end;if(oe===void 0&&(oe=X),"selectionStart"in j)j.selectionStart=X,j.selectionEnd=Math.min(oe,j.value.length);else{var fe=j.ownerDocument||document,Z=fe&&fe.defaultView||window;if(Z.getSelection){var ne=Z.getSelection(),Ie=j.textContent.length,Ue=Math.min(U.start,Ie),gt=U.end===void 0?Ue:Math.min(U.end,Ie);!ne.extend&&Ue>gt&&(_=gt,gt=Ue,Ue=_);var K=Ry(j,Ue),B=Ry(j,gt);if(K&&B&&(ne.rangeCount!==1||ne.anchorNode!==K.node||ne.anchorOffset!==K.offset||ne.focusNode!==B.node||ne.focusOffset!==B.offset)){var W=fe.createRange();W.setStart(K.node,K.offset),ne.removeAllRanges(),Ue>gt?(ne.addRange(W),ne.extend(B.node,B.offset)):(W.setEnd(B.node,B.offset),ne.addRange(W))}}}}for(fe=[],ne=j;ne=ne.parentNode;)ne.nodeType===1&&fe.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<fe.length;j++){var ue=fe[j];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Wh=!!gg,xg=gg=null}finally{ct=p,le.p=d,Y.T=l}}s.current=i,on=2}}function $v(){if(on===2){on=0;var s=Li,i=hl,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=Y.T,Y.T=null;var d=le.p;le.p=2;var p=ct;ct|=4;try{_v(s,i.alternate,i)}finally{ct=p,le.p=d,Y.T=l}}on=3}}function Qv(){if(on===4||on===3){on=0,vs();var s=Li,i=hl,l=$r,d=Mv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?on=5:(on=0,hl=Li=null,Yv(s,s.pendingLanes));var p=s.pendingLanes;if(p===0&&(Vi=null),te(l),i=i.stateNode,dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Us,i,void 0,(i.current.flags&128)===128)}catch{}if(d!==null){i=Y.T,p=le.p,le.p=2,Y.T=null;try{for(var g=s.onRecoverableError,_=0;_<d.length;_++){var j=d[_];g(j.value,{componentStack:j.stack})}}finally{Y.T=i,le.p=p}}($r&3)!==0&&Lh(),cr(s),p=s.pendingLanes,(l&261930)!==0&&(p&42)!==0?s===sg?eu++:(eu=0,sg=s):eu=0,tu(0)}}function Yv(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,Pc(i)))}function Lh(){return Kv(),$v(),Qv(),Wv()}function Wv(){if(on!==5)return!1;var s=Li,i=tg;tg=0;var l=te($r),d=Y.T,p=le.p;try{le.p=32>l?32:l,Y.T=null,l=ng,ng=null;var g=Li,_=$r;if(on=0,hl=Li=null,$r=0,(ct&6)!==0)throw Error(r(331));var j=ct;if(ct|=4,Cv(g.current),jv(g,g.current,_,l),ct=j,tu(0,!1),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Us,g)}catch{}return!0}finally{le.p=p,Y.T=d,Yv(s,i)}}function Xv(s,i,l){i=Ss(l,i),i=Pp(s.stateNode,i,2),s=Ci(s,i,2),s!==null&&(er(s,2),cr(s))}function ht(s,i,l){if(s.tag===3)Xv(s,s,l);else for(;i!==null;){if(i.tag===3){Xv(i,s,l);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Vi===null||!Vi.has(d))){s=Ss(l,s),l=Jb(2),d=Ci(i,l,2),d!==null&&(Zb(l,d,i,s),er(d,2),cr(d));break}}i=i.return}}function ag(s,i,l){var d=s.pingCache;if(d===null){d=s.pingCache=new OS;var p=new Set;d.set(i,p)}else p=d.get(i),p===void 0&&(p=new Set,d.set(i,p));p.has(l)||(Jp=!0,p.add(l),s=qS.bind(null,s,i,l),i.then(s,s))}function qS(s,i,l){var d=s.pingCache;d!==null&&d.delete(i),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,yt===s&&(Je&l)===l&&(Vt===4||Vt===3&&(Je&62914560)===Je&&300>Mt()-kh?(ct&2)===0&&fl(s,0):Zp|=l,dl===Je&&(dl=0)),cr(s)}function Jv(s,i){i===0&&(i=Ta()),s=La(s,i),s!==null&&(er(s,i),cr(s))}function BS(s){var i=s.memoizedState,l=0;i!==null&&(l=i.retryLane),Jv(s,l)}function zS(s,i){var l=0;switch(s.tag){case 31:case 13:var d=s.stateNode,p=s.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(i),Jv(s,l)}function HS(s,i){return Vs(s,i)}var Uh=null,pl=null,og=!1,Fh=!1,lg=!1,Fi=0;function cr(s){s!==pl&&s.next===null&&(pl===null?Uh=pl=s:pl=pl.next=s),Fh=!0,og||(og=!0,KS())}function tu(s,i){if(!lg&&Fh){lg=!0;do for(var l=!1,d=Uh;d!==null;){if(s!==0){var p=d.pendingLanes;if(p===0)var g=0;else{var _=d.suspendedLanes,j=d.pingedLanes;g=(1<<31-bn(42|s)+1)-1,g&=p&~(_&~j),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,n_(d,g))}else g=Je,g=Kn(d,d===yt?g:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(g&3)===0||Zs(d,g)||(l=!0,n_(d,g));d=d.next}while(l);lg=!1}}function GS(){Zv()}function Zv(){Fh=og=!1;var s=0;Fi!==0&&nA()&&(s=Fi);for(var i=Mt(),l=null,d=Uh;d!==null;){var p=d.next,g=e_(d,i);g===0?(d.next=null,l===null?Uh=p:l.next=p,p===null&&(pl=l)):(l=d,(s!==0||(g&3)!==0)&&(Fh=!0)),d=p}on!==0&&on!==5||tu(s),Fi!==0&&(Fi=0)}function e_(s,i){for(var l=s.suspendedLanes,d=s.pingedLanes,p=s.expirationTimes,g=s.pendingLanes&-62914561;0<g;){var _=31-bn(g),j=1<<_,U=p[_];U===-1?((j&l)===0||(j&d)!==0)&&(p[_]=ci(j,i)):U<=i&&(s.expiredLanes|=j),g&=~j}if(i=yt,l=Je,l=Kn(s,s===i?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,l===0||s===i&&(dt===2||dt===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&Ls(d),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Zs(s,l)){if(i=l&-l,i===s.callbackPriority)return i;switch(d!==null&&Ls(d),te(l)){case 2:case 8:l=Ct;break;case 32:l=is;break;case 268435456:l=wa;break;default:l=is}return d=t_.bind(null,s),l=Vs(l,d),s.callbackPriority=i,s.callbackNode=l,i}return d!==null&&d!==null&&Ls(d),s.callbackPriority=2,s.callbackNode=null,2}function t_(s,i){if(on!==0&&on!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Lh()&&s.callbackNode!==l)return null;var d=Je;return d=Kn(s,s===yt?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(Ov(s,d,i),e_(s,Mt()),s.callbackNode!=null&&s.callbackNode===l?t_.bind(null,s):null)}function n_(s,i){if(Lh())return null;Ov(s,i,!0)}function KS(){rA(function(){(ct&6)!==0?Vs(Rt,GS):Zv()})}function cg(){if(Fi===0){var s=el;s===0&&(s=Er,Er<<=1,(Er&261888)===0&&(Er=256)),Fi=s}return Fi}function s_(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:sr(""+s)}function r_(s,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,s.id&&l.setAttribute("form",s.id),i.parentNode.insertBefore(l,i),s=new FormData(s),l.parentNode.removeChild(l),s}function $S(s,i,l,d,p){if(i==="submit"&&l&&l.stateNode===p){var g=s_((p[nt]||null).action),_=d.submitter;_&&(i=(i=_[nt]||null)?s_(i.formAction):_.getAttribute("formAction"),i!==null&&(g=i,_=null));var j=new Ca("action","action",null,d,p);s.push({event:j,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Fi!==0){var U=_?r_(p,_):new FormData(p);Ip(l,{pending:!0,data:U,method:p.method,action:g},null,U)}}else typeof g=="function"&&(j.preventDefault(),U=_?r_(p,_):new FormData(p),Ip(l,{pending:!0,data:U,method:p.method,action:g},g,U))},currentTarget:p}]})}}for(var ug=0;ug<Km.length;ug++){var dg=Km[ug],QS=dg.toLowerCase(),YS=dg[0].toUpperCase()+dg.slice(1);Hs(QS,"on"+YS)}Hs(Py,"onAnimationEnd"),Hs(Oy,"onAnimationIteration"),Hs(Vy,"onAnimationStart"),Hs("dblclick","onDoubleClick"),Hs("focusin","onFocus"),Hs("focusout","onBlur"),Hs(dS,"onTransitionRun"),Hs(hS,"onTransitionStart"),Hs(fS,"onTransitionCancel"),Hs(Ly,"onTransitionEnd"),nr("onMouseEnter",["mouseout","mouseover"]),nr("onMouseLeave",["mouseout","mouseover"]),nr("onPointerEnter",["pointerout","pointerover"]),nr("onPointerLeave",["pointerout","pointerover"]),Mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nu));function i_(s,i){i=(i&4)!==0;for(var l=0;l<s.length;l++){var d=s[l],p=d.event;d=d.listeners;e:{var g=void 0;if(i)for(var _=d.length-1;0<=_;_--){var j=d[_],U=j.instance,X=j.currentTarget;if(j=j.listener,U!==g&&p.isPropagationStopped())break e;g=j,p.currentTarget=X;try{g(p)}catch(oe){th(oe)}p.currentTarget=null,g=U}else for(_=0;_<d.length;_++){if(j=d[_],U=j.instance,X=j.currentTarget,j=j.listener,U!==g&&p.isPropagationStopped())break e;g=j,p.currentTarget=X;try{g(p)}catch(oe){th(oe)}p.currentTarget=null,g=U}}}}function We(s,i){var l=i[di];l===void 0&&(l=i[di]=new Set);var d=s+"__bubble";l.has(d)||(a_(i,s,2,!1),l.add(d))}function hg(s,i,l){var d=0;i&&(d|=4),a_(l,s,d,i)}var qh="_reactListening"+Math.random().toString(36).slice(2);function fg(s){if(!s[qh]){s[qh]=!0,Oo.forEach(function(l){l!=="selectionchange"&&(WS.has(l)||hg(l,!1,s),hg(l,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[qh]||(i[qh]=!0,hg("selectionchange",!1,i))}}function a_(s,i,l,d){switch(P_(i)){case 2:var p=TA;break;case 8:p=EA;break;default:p=jg}l=p.bind(null,i,l,s),p=void 0,!Tc||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),d?p!==void 0?s.addEventListener(i,l,{capture:!0,passive:p}):s.addEventListener(i,l,!0):p!==void 0?s.addEventListener(i,l,{passive:p}):s.addEventListener(i,l,!1)}function mg(s,i,l,d,p){var g=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var _=d.tag;if(_===3||_===4){var j=d.stateNode.containerInfo;if(j===p)break;if(_===4)for(_=d.return;_!==null;){var U=_.tag;if((U===3||U===4)&&_.stateNode.containerInfo===p)return;_=_.return}for(;j!==null;){if(_=Ar(j),_===null)return;if(U=_.tag,U===5||U===6||U===26||U===27){d=g=_;continue e}j=j.parentNode}}d=d.return}Ud(function(){var X=g,oe=qo(l),fe=[];e:{var Z=Uy.get(s);if(Z!==void 0){var ne=Ca,Ie=s;switch(s){case"keypress":if(Ra(l)===0)break e;case"keydown":case"keyup":ne=Qd;break;case"focusin":Ie="focus",ne=_i;break;case"focusout":Ie="blur",ne=_i;break;case"beforeblur":case"afterblur":ne=_i;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=qd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Bd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Wd;break;case Py:case Oy:case Vy:ne=Ho;break;case Ly:ne=Go;break;case"scroll":case"scrollend":ne=Fd;break;case"wheel":ne=Jd;break;case"copy":case"cut":case"paste":ne=Hd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Ic;break;case"toggle":case"beforetoggle":ne=Ni}var Ue=(i&4)!==0,gt=!Ue&&(s==="scroll"||s==="scrollend"),K=Ue?Z!==null?Z+"Capture":null:Z;Ue=[];for(var B=X,W;B!==null;){var ue=B;if(W=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||W===null||K===null||(ue=$n(B,K),ue!=null&&Ue.push(su(B,ue,W))),gt)break;B=B.return}0<Ue.length&&(Z=new ne(Z,Ie,null,l,oe),fe.push({event:Z,listeners:Ue}))}}if((i&7)===0){e:{if(Z=s==="mouseover"||s==="pointerover",ne=s==="mouseout"||s==="pointerout",Z&&l!==Fo&&(Ie=l.relatedTarget||l.fromElement)&&(Ar(Ie)||Ie[vn]))break e;if((ne||Z)&&(Z=oe.window===oe?oe:(Z=oe.ownerDocument)?Z.defaultView||Z.parentWindow:window,ne?(Ie=l.relatedTarget||l.toElement,ne=X,Ie=Ie?Ar(Ie):null,Ie!==null&&(gt=c(Ie),Ue=Ie.tag,Ie!==gt||Ue!==5&&Ue!==27&&Ue!==6)&&(Ie=null)):(ne=null,Ie=X),ne!==Ie)){if(Ue=qd,ue="onMouseLeave",K="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(Ue=Ic,ue="onPointerLeave",K="onPointerEnter",B="pointer"),gt=ne==null?Z:Aa(ne),W=Ie==null?Z:Aa(Ie),Z=new Ue(ue,B+"leave",ne,l,oe),Z.target=gt,Z.relatedTarget=W,ue=null,Ar(oe)===X&&(Ue=new Ue(K,B+"enter",Ie,l,oe),Ue.target=W,Ue.relatedTarget=gt,ue=Ue),gt=ue,ne&&Ie)t:{for(Ue=XS,K=ne,B=Ie,W=0,ue=K;ue;ue=Ue(ue))W++;ue=0;for(var Oe=B;Oe;Oe=Ue(Oe))ue++;for(;0<W-ue;)K=Ue(K),W--;for(;0<ue-W;)B=Ue(B),ue--;for(;W--;){if(K===B||B!==null&&K===B.alternate){Ue=K;break t}K=Ue(K),B=Ue(B)}Ue=null}else Ue=null;ne!==null&&o_(fe,Z,ne,Ue,!1),Ie!==null&&gt!==null&&o_(fe,gt,Ie,Ue,!0)}}e:{if(Z=X?Aa(X):window,ne=Z.nodeName&&Z.nodeName.toLowerCase(),ne==="select"||ne==="input"&&Z.type==="file")var at=Ty;else if(Qn(Z))if(Ey)at=lS;else{at=aS;var Me=iS}else ne=Z.nodeName,!ne||ne.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?X&&wc(X.elementType)&&(at=Ty):at=oS;if(at&&(at=at(s,X))){Pa(fe,at,l,oe);break e}Me&&Me(s,Z,X),s==="focusout"&&X&&Z.type==="number"&&X.memoizedProps.value!=null&&Uo(Z,"number",Z.value)}switch(Me=X?Aa(X):window,s){case"focusin":(Qn(Me)||Me.contentEditable==="true")&&(Ko=Me,zm=X,kc=null);break;case"focusout":kc=zm=Ko=null;break;case"mousedown":Hm=!0;break;case"contextmenu":case"mouseup":case"dragend":Hm=!1,Dy(fe,l,oe);break;case"selectionchange":if(uS)break;case"keydown":case"keyup":Dy(fe,l,oe)}var Ke;if(b)e:{switch(s){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else Qe?ut(s,l)&&(Ze="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Ze="onCompositionStart");Ze&&(Q&&l.locale!=="ko"&&(Qe||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&Qe&&(Ke=xi()):(ls=oe,Bo="value"in ls?ls.value:ls.textContent,Qe=!0)),Me=Bh(X,Ze),0<Me.length&&(Ze=new Sc(Ze,s,null,l,oe),fe.push({event:Ze,listeners:Me}),Ke?Ze.data=Ke:(Ke=Jt(l),Ke!==null&&(Ze.data=Ke)))),(Ke=k?fn(s,l):mn(s,l))&&(Ze=Bh(X,"onBeforeInput"),0<Ze.length&&(Me=new Sc("onBeforeInput","beforeinput",null,l,oe),fe.push({event:Me,listeners:Ze}),Me.data=Ke)),$S(fe,s,X,l,oe)}i_(fe,i)})}function su(s,i,l){return{instance:s,listener:i,currentTarget:l}}function Bh(s,i){for(var l=i+"Capture",d=[];s!==null;){var p=s,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=$n(s,l),p!=null&&d.unshift(su(s,p,g)),p=$n(s,i),p!=null&&d.push(su(s,p,g))),s.tag===3)return d;s=s.return}return[]}function XS(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function o_(s,i,l,d,p){for(var g=i._reactName,_=[];l!==null&&l!==d;){var j=l,U=j.alternate,X=j.stateNode;if(j=j.tag,U!==null&&U===d)break;j!==5&&j!==26&&j!==27||X===null||(U=X,p?(X=$n(l,g),X!=null&&_.unshift(su(l,X,U))):p||(X=$n(l,g),X!=null&&_.push(su(l,X,U)))),l=l.return}_.length!==0&&s.push({event:i,listeners:_})}var JS=/\r\n?/g,ZS=/\u0000|\uFFFD/g;function l_(s){return(typeof s=="string"?s:""+s).replace(JS,`
`).replace(ZS,"")}function c_(s,i){return i=l_(i),l_(s)===i}function pt(s,i,l,d,p,g){switch(l){case"children":typeof d=="string"?i==="body"||i==="textarea"&&d===""||Ts(s,d):(typeof d=="number"||typeof d=="bigint")&&i!=="body"&&Ts(s,""+d);break;case"className":mi(s,"class",d);break;case"tabIndex":mi(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":mi(s,l,d);break;case"style":Vd(s,d,g);break;case"data":if(i!=="object"){mi(s,"data",d);break}case"src":case"href":if(d===""&&(i!=="a"||l!=="href")){s.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(l);break}d=sr(""+d),s.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(i!=="input"&&pt(s,i,"name",p.name,p,null),pt(s,i,"formEncType",p.formEncType,p,null),pt(s,i,"formMethod",p.formMethod,p,null),pt(s,i,"formTarget",p.formTarget,p,null)):(pt(s,i,"encType",p.encType,p,null),pt(s,i,"method",p.method,p,null),pt(s,i,"target",p.target,p,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(l);break}d=sr(""+d),s.setAttribute(l,d);break;case"onClick":d!=null&&(s.onclick=hn);break;case"onScroll":d!=null&&We("scroll",s);break;case"onScrollEnd":d!=null&&We("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(l=d.__html,l!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}l=sr(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(l,""+d):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":d===!0?s.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(l,d):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(l,d):s.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(l):s.setAttribute(l,d);break;case"popover":We("beforetoggle",s),We("toggle",s),fi(s,"popover",d);break;case"xlinkActuate":Ns(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Ns(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Ns(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Ns(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Ns(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Ns(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Ns(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Ns(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Ns(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":fi(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Vm.get(l)||l,fi(s,l,d))}}function pg(s,i,l,d,p,g){switch(l){case"style":Vd(s,d,g);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(l=d.__html,l!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"children":typeof d=="string"?Ts(s,d):(typeof d=="number"||typeof d=="bigint")&&Ts(s,""+d);break;case"onScroll":d!=null&&We("scroll",s);break;case"onScrollEnd":d!=null&&We("scrollend",s);break;case"onClick":d!=null&&(s.onclick=hn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hi.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),i=l.slice(2,p?l.length-7:void 0),g=s[nt]||null,g=g!=null?g[l]:null,typeof g=="function"&&s.removeEventListener(i,g,p),typeof d=="function")){typeof g!="function"&&g!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(i,d,p);break e}l in s?s[l]=d:d===!0?s.setAttribute(l,""):fi(s,l,d)}}}function Tn(s,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",s),We("load",s);var d=!1,p=!1,g;for(g in l)if(l.hasOwnProperty(g)){var _=l[g];if(_!=null)switch(g){case"src":d=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:pt(s,i,g,_,l,null)}}p&&pt(s,i,"srcSet",l.srcSet,l,null),d&&pt(s,i,"src",l.src,l,null);return;case"input":We("invalid",s);var j=g=_=p=null,U=null,X=null;for(d in l)if(l.hasOwnProperty(d)){var oe=l[d];if(oe!=null)switch(d){case"name":p=oe;break;case"type":_=oe;break;case"checked":U=oe;break;case"defaultChecked":X=oe;break;case"value":g=oe;break;case"defaultValue":j=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,i));break;default:pt(s,i,d,oe,l,null)}}ja(s,g,j,U,X,_,p,!1);return;case"select":We("invalid",s),d=_=g=null;for(p in l)if(l.hasOwnProperty(p)&&(j=l[p],j!=null))switch(p){case"value":g=j;break;case"defaultValue":_=j;break;case"multiple":d=j;default:pt(s,i,p,j,l,null)}i=g,l=_,s.multiple=!!d,i!=null?it(s,!!d,i,!1):l!=null&&it(s,!!d,l,!0);return;case"textarea":We("invalid",s),g=p=d=null;for(_ in l)if(l.hasOwnProperty(_)&&(j=l[_],j!=null))switch(_){case"value":d=j;break;case"defaultValue":p=j;break;case"children":g=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:pt(s,i,_,j,l,null)}gi(s,d,p,g);return;case"option":for(U in l)if(l.hasOwnProperty(U)&&(d=l[U],d!=null))switch(U){case"selected":s.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:pt(s,i,U,d,l,null)}return;case"dialog":We("beforetoggle",s),We("toggle",s),We("cancel",s),We("close",s);break;case"iframe":case"object":We("load",s);break;case"video":case"audio":for(d=0;d<nu.length;d++)We(nu[d],s);break;case"image":We("error",s),We("load",s);break;case"details":We("toggle",s);break;case"embed":case"source":case"link":We("error",s),We("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in l)if(l.hasOwnProperty(X)&&(d=l[X],d!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:pt(s,i,X,d,l,null)}return;default:if(wc(i)){for(oe in l)l.hasOwnProperty(oe)&&(d=l[oe],d!==void 0&&pg(s,i,oe,d,l,void 0));return}}for(j in l)l.hasOwnProperty(j)&&(d=l[j],d!=null&&pt(s,i,j,d,l,null))}function eA(s,i,l,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,_=null,j=null,U=null,X=null,oe=null;for(ne in l){var fe=l[ne];if(l.hasOwnProperty(ne)&&fe!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":U=fe;default:d.hasOwnProperty(ne)||pt(s,i,ne,null,d,fe)}}for(var Z in d){var ne=d[Z];if(fe=l[Z],d.hasOwnProperty(Z)&&(ne!=null||fe!=null))switch(Z){case"type":g=ne;break;case"name":p=ne;break;case"checked":X=ne;break;case"defaultChecked":oe=ne;break;case"value":_=ne;break;case"defaultValue":j=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,i));break;default:ne!==fe&&pt(s,i,Z,ne,d,fe)}}pi(s,_,j,U,X,oe,g,p);return;case"select":ne=_=j=Z=null;for(g in l)if(U=l[g],l.hasOwnProperty(g)&&U!=null)switch(g){case"value":break;case"multiple":ne=U;default:d.hasOwnProperty(g)||pt(s,i,g,null,d,U)}for(p in d)if(g=d[p],U=l[p],d.hasOwnProperty(p)&&(g!=null||U!=null))switch(p){case"value":Z=g;break;case"defaultValue":j=g;break;case"multiple":_=g;default:g!==U&&pt(s,i,p,g,d,U)}i=j,l=_,d=ne,Z!=null?it(s,!!l,Z,!1):!!d!=!!l&&(i!=null?it(s,!!l,i,!0):it(s,!!l,l?[]:"",!1));return;case"textarea":ne=Z=null;for(j in l)if(p=l[j],l.hasOwnProperty(j)&&p!=null&&!d.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:pt(s,i,j,null,d,p)}for(_ in d)if(p=d[_],g=l[_],d.hasOwnProperty(_)&&(p!=null||g!=null))switch(_){case"value":Z=p;break;case"defaultValue":ne=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==g&&pt(s,i,_,p,d,g)}Ia(s,Z,ne);return;case"option":for(var Ie in l)if(Z=l[Ie],l.hasOwnProperty(Ie)&&Z!=null&&!d.hasOwnProperty(Ie))switch(Ie){case"selected":s.selected=!1;break;default:pt(s,i,Ie,null,d,Z)}for(U in d)if(Z=d[U],ne=l[U],d.hasOwnProperty(U)&&Z!==ne&&(Z!=null||ne!=null))switch(U){case"selected":s.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:pt(s,i,U,Z,d,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in l)Z=l[Ue],l.hasOwnProperty(Ue)&&Z!=null&&!d.hasOwnProperty(Ue)&&pt(s,i,Ue,null,d,Z);for(X in d)if(Z=d[X],ne=l[X],d.hasOwnProperty(X)&&Z!==ne&&(Z!=null||ne!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,i));break;default:pt(s,i,X,Z,d,ne)}return;default:if(wc(i)){for(var gt in l)Z=l[gt],l.hasOwnProperty(gt)&&Z!==void 0&&!d.hasOwnProperty(gt)&&pg(s,i,gt,void 0,d,Z);for(oe in d)Z=d[oe],ne=l[oe],!d.hasOwnProperty(oe)||Z===ne||Z===void 0&&ne===void 0||pg(s,i,oe,Z,d,ne);return}}for(var K in l)Z=l[K],l.hasOwnProperty(K)&&Z!=null&&!d.hasOwnProperty(K)&&pt(s,i,K,null,d,Z);for(fe in d)Z=d[fe],ne=l[fe],!d.hasOwnProperty(fe)||Z===ne||Z==null&&ne==null||pt(s,i,fe,Z,d,ne)}function u_(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tA(){if(typeof performance.getEntriesByType=="function"){for(var s=0,i=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var p=l[d],g=p.transferSize,_=p.initiatorType,j=p.duration;if(g&&j&&u_(_)){for(_=0,j=p.responseEnd,d+=1;d<l.length;d++){var U=l[d],X=U.startTime;if(X>j)break;var oe=U.transferSize,fe=U.initiatorType;oe&&u_(fe)&&(U=U.responseEnd,_+=oe*(U<j?1:(j-X)/(U-X)))}if(--d,i+=8*(g+_)/(p.duration/1e3),s++,10<s)break}}if(0<s)return i/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var gg=null,xg=null;function zh(s){return s.nodeType===9?s:s.ownerDocument}function d_(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h_(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function yg(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var bg=null;function nA(){var s=window.event;return s&&s.type==="popstate"?s===bg?!1:(bg=s,!0):(bg=null,!1)}var f_=typeof setTimeout=="function"?setTimeout:void 0,sA=typeof clearTimeout=="function"?clearTimeout:void 0,m_=typeof Promise=="function"?Promise:void 0,rA=typeof queueMicrotask=="function"?queueMicrotask:typeof m_<"u"?function(s){return m_.resolve(null).then(s).catch(iA)}:f_;function iA(s){setTimeout(function(){throw s})}function qi(s){return s==="head"}function p_(s,i){var l=i,d=0;do{var p=l.nextSibling;if(s.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(d===0){s.removeChild(p),bl(i);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")ru(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,ru(l);for(var g=l.firstChild;g;){var _=g.nextSibling,j=g.nodeName;g[Sr]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=_}}else l==="body"&&ru(s.ownerDocument.body);l=p}while(l);bl(i)}function g_(s,i){var l=s;s=0;do{var d=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=d}while(l)}function vg(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":vg(l),Sa(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function aA(s,i,l,d){for(;s.nodeType===1;){var p=l;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[Sr])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(g=s.getAttribute("rel"),g==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(g!==p.rel||s.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||s.getAttribute("title")!==(p.title==null?null:p.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(g=s.getAttribute("src"),(g!==(p.src==null?null:p.src)||s.getAttribute("type")!==(p.type==null?null:p.type)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&s.getAttribute("name")===g)return s}else return s;if(s=Cs(s.nextSibling),s===null)break}return null}function oA(s,i,l){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Cs(s.nextSibling),s===null))return null;return s}function x_(s,i){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!i||(s=Cs(s.nextSibling),s===null))return null;return s}function _g(s){return s.data==="$?"||s.data==="$~"}function wg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function lA(s,i){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=i;else if(s.data!=="$?"||l.readyState!=="loading")i();else{var d=function(){i(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function Cs(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return s}var Ng=null;function y_(s){s=s.nextSibling;for(var i=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(i===0)return Cs(s.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}s=s.nextSibling}return null}function b_(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return s;i--}else l!=="/$"&&l!=="/&"||i++}s=s.previousSibling}return null}function v_(s,i,l){switch(i=zh(l),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function ru(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);Sa(s)}var ks=new Map,__=new Set;function Hh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Qr=le.d;le.d={f:cA,r:uA,D:dA,C:hA,L:fA,m:mA,X:gA,S:pA,M:xA};function cA(){var s=Qr.f(),i=Ph();return s||i}function uA(s){var i=jr(s);i!==null&&i.tag===5&&i.type==="form"?Lb(i):Qr.r(s)}var gl=typeof document>"u"?null:document;function w_(s,i,l){var d=gl;if(d&&typeof i=="string"&&i){var p=Pt(i);p='link[rel="'+s+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),__.has(p)||(__.add(p),s={rel:s,crossOrigin:l,href:i},d.querySelector(p)===null&&(i=d.createElement("link"),Tn(i,"link",s),Gt(i),d.head.appendChild(i)))}}function dA(s){Qr.D(s),w_("dns-prefetch",s,null)}function hA(s,i){Qr.C(s,i),w_("preconnect",s,i)}function fA(s,i,l){Qr.L(s,i,l);var d=gl;if(d&&s&&i){var p='link[rel="preload"][as="'+Pt(i)+'"]';i==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Pt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Pt(l.imageSizes)+'"]')):p+='[href="'+Pt(s)+'"]';var g=p;switch(i){case"style":g=xl(s);break;case"script":g=yl(s)}ks.has(g)||(s=v({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:s,as:i},l),ks.set(g,s),d.querySelector(p)!==null||i==="style"&&d.querySelector(iu(g))||i==="script"&&d.querySelector(au(g))||(i=d.createElement("link"),Tn(i,"link",s),Gt(i),d.head.appendChild(i)))}}function mA(s,i){Qr.m(s,i);var l=gl;if(l&&s){var d=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+Pt(d)+'"][href="'+Pt(s)+'"]',g=p;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=yl(s)}if(!ks.has(g)&&(s=v({rel:"modulepreload",href:s},i),ks.set(g,s),l.querySelector(p)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(au(g)))return}d=l.createElement("link"),Tn(d,"link",s),Gt(d),l.head.appendChild(d)}}}function pA(s,i,l){Qr.S(s,i,l);var d=gl;if(d&&s){var p=Bs(d).hoistableStyles,g=xl(s);i=i||"default";var _=p.get(g);if(!_){var j={loading:0,preload:null};if(_=d.querySelector(iu(g)))j.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":i},l),(l=ks.get(g))&&Tg(s,l);var U=_=d.createElement("link");Gt(U),Tn(U,"link",s),U._p=new Promise(function(X,oe){U.onload=X,U.onerror=oe}),U.addEventListener("load",function(){j.loading|=1}),U.addEventListener("error",function(){j.loading|=2}),j.loading|=4,Gh(_,i,d)}_={type:"stylesheet",instance:_,count:1,state:j},p.set(g,_)}}}function gA(s,i){Qr.X(s,i);var l=gl;if(l&&s){var d=Bs(l).hoistableScripts,p=yl(s),g=d.get(p);g||(g=l.querySelector(au(p)),g||(s=v({src:s,async:!0},i),(i=ks.get(p))&&Eg(s,i),g=l.createElement("script"),Gt(g),Tn(g,"link",s),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},d.set(p,g))}}function xA(s,i){Qr.M(s,i);var l=gl;if(l&&s){var d=Bs(l).hoistableScripts,p=yl(s),g=d.get(p);g||(g=l.querySelector(au(p)),g||(s=v({src:s,async:!0,type:"module"},i),(i=ks.get(p))&&Eg(s,i),g=l.createElement("script"),Gt(g),Tn(g,"link",s),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},d.set(p,g))}}function N_(s,i,l,d){var p=(p=q.current)?Hh(p):null;if(!p)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=xl(l.href),l=Bs(p).hoistableStyles,d=l.get(i),d||(d={type:"style",instance:null,count:0,state:null},l.set(i,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=xl(l.href);var g=Bs(p).hoistableStyles,_=g.get(s);if(_||(p=p.ownerDocument||p,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(s,_),(g=p.querySelector(iu(s)))&&!g._p&&(_.instance=g,_.state.loading=5),ks.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ks.set(s,l),g||yA(p,s,l,_.state))),i&&d===null)throw Error(r(528,""));return _}if(i&&d!==null)throw Error(r(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=yl(l),l=Bs(p).hoistableScripts,d=l.get(i),d||(d={type:"script",instance:null,count:0,state:null},l.set(i,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function xl(s){return'href="'+Pt(s)+'"'}function iu(s){return'link[rel="stylesheet"]['+s+"]"}function T_(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function yA(s,i,l,d){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?d.loading=1:(i=s.createElement("link"),d.preload=i,i.addEventListener("load",function(){return d.loading|=1}),i.addEventListener("error",function(){return d.loading|=2}),Tn(i,"link",l),Gt(i),s.head.appendChild(i))}function yl(s){return'[src="'+Pt(s)+'"]'}function au(s){return"script[async]"+s}function E_(s,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var d=s.querySelector('style[data-href~="'+Pt(l.href)+'"]');if(d)return i.instance=d,Gt(d),d;var p=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),Gt(d),Tn(d,"style",p),Gh(d,l.precedence,s),i.instance=d;case"stylesheet":p=xl(l.href);var g=s.querySelector(iu(p));if(g)return i.state.loading|=4,i.instance=g,Gt(g),g;d=T_(l),(p=ks.get(p))&&Tg(d,p),g=(s.ownerDocument||s).createElement("link"),Gt(g);var _=g;return _._p=new Promise(function(j,U){_.onload=j,_.onerror=U}),Tn(g,"link",d),i.state.loading|=4,Gh(g,l.precedence,s),i.instance=g;case"script":return g=yl(l.src),(p=s.querySelector(au(g)))?(i.instance=p,Gt(p),p):(d=l,(p=ks.get(g))&&(d=v({},l),Eg(d,p)),s=s.ownerDocument||s,p=s.createElement("script"),Gt(p),Tn(p,"link",d),s.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(d=i.instance,i.state.loading|=4,Gh(d,l.precedence,s));return i.instance}function Gh(s,i,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=d.length?d[d.length-1]:null,g=p,_=0;_<d.length;_++){var j=d[_];if(j.dataset.precedence===i)g=j;else if(g!==p)break}g?g.parentNode.insertBefore(s,g.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(s,i.firstChild))}function Tg(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function Eg(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var Kh=null;function S_(s,i,l){if(Kh===null){var d=new Map,p=Kh=new Map;p.set(l,d)}else p=Kh,d=p.get(l),d||(d=new Map,p.set(l,d));if(d.has(s))return d;for(d.set(s,null),l=l.getElementsByTagName(s),p=0;p<l.length;p++){var g=l[p];if(!(g[Sr]||g[Ve]||s==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var _=g.getAttribute(i)||"";_=s+_;var j=d.get(_);j?j.push(g):d.set(_,[g])}}return d}function A_(s,i,l){s=s.ownerDocument||s,s.head.insertBefore(l,i==="title"?s.querySelector("head > title"):null)}function bA(s,i,l){if(l===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function j_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function vA(s,i,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=xl(d.href),g=i.querySelector(iu(p));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(s.count++,s=$h.bind(s),i.then(s,s)),l.state.loading|=4,l.instance=g,Gt(g);return}g=i.ownerDocument||i,d=T_(d),(p=ks.get(p))&&Tg(d,p),g=g.createElement("link"),Gt(g);var _=g;_._p=new Promise(function(j,U){_.onload=j,_.onerror=U}),Tn(g,"link",d),l.instance=g}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=$h.bind(s),i.addEventListener("load",l),i.addEventListener("error",l))}}var Sg=0;function _A(s,i){return s.stylesheets&&s.count===0&&Yh(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var d=setTimeout(function(){if(s.stylesheets&&Yh(s,s.stylesheets),s.unsuspend){var g=s.unsuspend;s.unsuspend=null,g()}},6e4+i);0<s.imgBytes&&Sg===0&&(Sg=62500*tA());var p=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Yh(s,s.stylesheets),s.unsuspend)){var g=s.unsuspend;s.unsuspend=null,g()}},(s.imgBytes>Sg?50:800)+i);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(d),clearTimeout(p)}}:null}function $h(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Qh=null;function Yh(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Qh=new Map,i.forEach(wA,s),Qh=null,$h.call(s))}function wA(s,i){if(!(i.state.loading&4)){var l=Qh.get(s);if(l)var d=l.get(null);else{l=new Map,Qh.set(s,l);for(var p=s.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var _=p[g];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(l.set(_.dataset.precedence,_),d=_)}d&&l.set(null,d)}p=i.instance,_=p.getAttribute("data-precedence"),g=l.get(_)||d,g===d&&l.set(null,p),l.set(_,p),this.count++,d=$h.bind(this),p.addEventListener("load",d),p.addEventListener("error",d),g?g.parentNode.insertBefore(p,g.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(p,s.firstChild)),i.state.loading|=4}}var ou={$$typeof:ee,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function NA(s,i,l,d,p,g,_,j,U){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fs(0),this.hiddenUpdates=Fs(null),this.identifierPrefix=d,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function I_(s,i,l,d,p,g,_,j,U,X,oe,fe){return s=new NA(s,i,l,_,U,X,oe,fe,j),i=1,g===!0&&(i|=24),g=us(3,null,null,i),s.current=g,g.stateNode=s,i=ip(),i.refCount++,s.pooledCache=i,i.refCount++,g.memoizedState={element:d,isDehydrated:l,cache:i},cp(g),s}function R_(s){return s?(s=Yo,s):Yo}function C_(s,i,l,d,p,g){p=R_(p),d.context===null?d.context=p:d.pendingContext=p,d=Ri(i),d.payload={element:l},g=g===void 0?null:g,g!==null&&(d.callback=g),l=Ci(s,d,i),l!==null&&(Zn(l,s,i),Uc(l,s,i))}function k_(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<i?l:i}}function Ag(s,i){k_(s,i),(s=s.alternate)&&k_(s,i)}function D_(s){if(s.tag===13||s.tag===31){var i=La(s,67108864);i!==null&&Zn(i,s,67108864),Ag(s,67108864)}}function M_(s){if(s.tag===13||s.tag===31){var i=ps();i=ui(i);var l=La(s,i);l!==null&&Zn(l,s,i),Ag(s,i)}}var Wh=!0;function TA(s,i,l,d){var p=Y.T;Y.T=null;var g=le.p;try{le.p=2,jg(s,i,l,d)}finally{le.p=g,Y.T=p}}function EA(s,i,l,d){var p=Y.T;Y.T=null;var g=le.p;try{le.p=8,jg(s,i,l,d)}finally{le.p=g,Y.T=p}}function jg(s,i,l,d){if(Wh){var p=Ig(d);if(p===null)mg(s,i,d,Xh,l),O_(s,d);else if(AA(p,s,i,l,d))d.stopPropagation();else if(O_(s,d),i&4&&-1<SA.indexOf(s)){for(;p!==null;){var g=jr(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var _=as(g.pendingLanes);if(_!==0){var j=g;for(j.pendingLanes|=2,j.entangledLanes|=2;_;){var U=1<<31-bn(_);j.entanglements[1]|=U,_&=~U}cr(g),(ct&6)===0&&(Dh=Mt()+500,tu(0))}}break;case 31:case 13:j=La(g,2),j!==null&&Zn(j,g,2),Ph(),Ag(g,2)}if(g=Ig(d),g===null&&mg(s,i,d,Xh,l),g===p)break;p=g}p!==null&&d.stopPropagation()}else mg(s,i,d,null,l)}}function Ig(s){return s=qo(s),Rg(s)}var Xh=null;function Rg(s){if(Xh=null,s=Ar(s),s!==null){var i=c(s);if(i===null)s=null;else{var l=i.tag;if(l===13){if(s=u(i),s!==null)return s;s=null}else if(l===31){if(s=f(i),s!==null)return s;s=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return Xh=s,null}function P_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ht()){case Rt:return 2;case Ct:return 8;case is:case Mo:return 32;case wa:return 268435456;default:return 32}default:return 32}}var Cg=!1,Bi=null,zi=null,Hi=null,lu=new Map,cu=new Map,Gi=[],SA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O_(s,i){switch(s){case"focusin":case"focusout":Bi=null;break;case"dragenter":case"dragleave":zi=null;break;case"mouseover":case"mouseout":Hi=null;break;case"pointerover":case"pointerout":lu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":cu.delete(i.pointerId)}}function uu(s,i,l,d,p,g){return s===null||s.nativeEvent!==g?(s={blockedOn:i,domEventName:l,eventSystemFlags:d,nativeEvent:g,targetContainers:[p]},i!==null&&(i=jr(i),i!==null&&D_(i)),s):(s.eventSystemFlags|=d,i=s.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),s)}function AA(s,i,l,d,p){switch(i){case"focusin":return Bi=uu(Bi,s,i,l,d,p),!0;case"dragenter":return zi=uu(zi,s,i,l,d,p),!0;case"mouseover":return Hi=uu(Hi,s,i,l,d,p),!0;case"pointerover":var g=p.pointerId;return lu.set(g,uu(lu.get(g)||null,s,i,l,d,p)),!0;case"gotpointercapture":return g=p.pointerId,cu.set(g,uu(cu.get(g)||null,s,i,l,d,p)),!0}return!1}function V_(s){var i=Ar(s.target);if(i!==null){var l=c(i);if(l!==null){if(i=l.tag,i===13){if(i=u(l),i!==null){s.blockedOn=i,he(s.priority,function(){M_(l)});return}}else if(i===31){if(i=f(l),i!==null){s.blockedOn=i,he(s.priority,function(){M_(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Jh(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var l=Ig(s.nativeEvent);if(l===null){l=s.nativeEvent;var d=new l.constructor(l.type,l);Fo=d,l.target.dispatchEvent(d),Fo=null}else return i=jr(l),i!==null&&D_(i),s.blockedOn=l,!1;i.shift()}return!0}function L_(s,i,l){Jh(s)&&l.delete(i)}function jA(){Cg=!1,Bi!==null&&Jh(Bi)&&(Bi=null),zi!==null&&Jh(zi)&&(zi=null),Hi!==null&&Jh(Hi)&&(Hi=null),lu.forEach(L_),cu.forEach(L_)}function Zh(s,i){s.blockedOn===i&&(s.blockedOn=null,Cg||(Cg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,jA)))}var ef=null;function U_(s){ef!==s&&(ef=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ef===s&&(ef=null);for(var i=0;i<s.length;i+=3){var l=s[i],d=s[i+1],p=s[i+2];if(typeof d!="function"){if(Rg(d||l)===null)continue;break}var g=jr(l);g!==null&&(s.splice(i,3),i-=3,Ip(g,{pending:!0,data:p,method:l.method,action:d},d,p))}}))}function bl(s){function i(U){return Zh(U,s)}Bi!==null&&Zh(Bi,s),zi!==null&&Zh(zi,s),Hi!==null&&Zh(Hi,s),lu.forEach(i),cu.forEach(i);for(var l=0;l<Gi.length;l++){var d=Gi[l];d.blockedOn===s&&(d.blockedOn=null)}for(;0<Gi.length&&(l=Gi[0],l.blockedOn===null);)V_(l),l.blockedOn===null&&Gi.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var p=l[d],g=l[d+1],_=p[nt]||null;if(typeof g=="function")_||U_(l);else if(_){var j=null;if(g&&g.hasAttribute("formAction")){if(p=g,_=g[nt]||null)j=_.formAction;else if(Rg(p)!==null)continue}else j=_.action;typeof j=="function"?l[d+1]=j:(l.splice(d,3),d-=3),U_(l)}}}function F_(){function s(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(_){return p=_})},focusReset:"manual",scroll:"manual"})}function i(){p!==null&&(p(),p=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,p=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),p!==null&&(p(),p=null)}}}function kg(s){this._internalRoot=s}tf.prototype.render=kg.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var l=i.current,d=ps();C_(l,d,s,i,null,null)},tf.prototype.unmount=kg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;C_(s.current,2,null,s,null,null),Ph(),i[vn]=null}};function tf(s){this._internalRoot=s}tf.prototype.unstable_scheduleHydration=function(s){if(s){var i=xe();s={blockedOn:null,target:s,priority:i};for(var l=0;l<Gi.length&&i!==0&&i<Gi[l].priority;l++);Gi.splice(l,0,s),l===0&&V_(s)}};var q_=e.version;if(q_!=="19.2.3")throw Error(r(527,q_,"19.2.3"));le.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=x(i),s=s!==null?y(s):null,s=s===null?null:s.stateNode,s};var IA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nf.isDisabled&&nf.supportsFiber)try{Us=nf.inject(IA),dn=nf}catch{}}return hu.createRoot=function(s,i){if(!a(s))throw Error(r(299));var l=!1,d="",p=Qb,g=Yb,_=Wb;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=I_(s,1,!1,null,null,l,d,null,p,g,_,F_),s[vn]=i.current,fg(s),new kg(i)},hu.hydrateRoot=function(s,i,l){if(!a(s))throw Error(r(299));var d=!1,p="",g=Qb,_=Yb,j=Wb,U=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(j=l.onRecoverableError),l.formState!==void 0&&(U=l.formState)),i=I_(s,1,!0,i,l??null,d,p,U,g,_,j,F_),i.context=R_(null),l=i.current,d=ps(),d=ui(d),p=Ri(d),p.callback=null,Ci(l,p,d),l=d,i.current.lanes=l,er(i,l),cr(i),s[vn]=i.current,fg(s),new tf(i)},hu.version="19.2.3",hu}var X_;function UA(){if(X_)return Pg.exports;X_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Pg.exports=LA(),Pg.exports}var FA=UA();const qA=tN(FA),ma=({className:n,onClick:e,style:t,title:r})=>{const[a,c]=L.useState(!1);return a?o.jsxs("svg",{viewBox:"0 0 300 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n,"aria-label":"MASERP",onClick:e,style:t,role:"img",children:[r&&o.jsx("title",{children:r}),o.jsxs("g",{children:[o.jsx("path",{d:"M42 12L70 28V60L42 76L14 60V28L42 12Z",fill:"#1E3A8A"}),o.jsx("path",{d:"M42 30L54 38V50L42 58L30 50V38L42 30Z",fill:"#FFFFFF"})]}),o.jsx("text",{x:"90",y:"55",fill:"#1E3A8A",fontFamily:"sans-serif",fontWeight:"bold",fontSize:"42",children:"MASERP"})]}):o.jsx("img",{src:"/logo.png",alt:"MASERP",className:`object-contain ${n||""}`,onError:()=>c(!0),onClick:e,style:t,title:r})};var J_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},BA=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const c=n[t++];e[r++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=n[t++],u=n[t++],f=n[t++],m=((a&7)<<18|(c&63)<<12|(u&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const c=n[t++],u=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(c&63)<<6|u&63)}}return e.join("")},sN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const c=n[a],u=a+1<n.length,f=u?n[a+1]:0,m=a+2<n.length,x=m?n[a+2]:0,y=c>>2,v=(c&3)<<4|f>>4;let E=(f&15)<<2|x>>6,A=x&63;m||(A=64,u||(E=64)),r.push(t[y],t[v],t[E],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(nN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BA(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const c=t[n.charAt(a++)],f=a<n.length?t[n.charAt(a)]:0;++a;const x=a<n.length?t[n.charAt(a)]:64;++a;const v=a<n.length?t[n.charAt(a)]:64;if(++a,c==null||f==null||x==null||v==null)throw new zA;const E=c<<2|f>>4;if(r.push(E),x!==64){const A=f<<4&240|x>>2;if(r.push(A),v!==64){const V=x<<6&192|v;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class zA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HA=function(n){const e=nN(n);return sN.encodeByteArray(e,!0)},Sf=function(n){return HA(n).replace(/\./g,"")},rN=function(n){try{return sN.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Af(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!GA(t)||(n[t]=Af(n[t],e[t]));return n}function GA(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=()=>iN().__FIREBASE_DEFAULTS__,$A=()=>{if(typeof process>"u"||typeof J_>"u")return;const n=J_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},QA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&rN(n[1]);return e&&JSON.parse(e)},U0=()=>{try{return KA()||$A()||QA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},aN=()=>{var n;return(n=U0())===null||n===void 0?void 0:n.config},YA=n=>{var e;return(e=U0())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,c=n.sub||n.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Sf(JSON.stringify(t)),Sf(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function F0(){var n;const e=(n=U0())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZA(){return typeof window<"u"||oN()}function oN(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ej(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function q0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cN(){const n=Dt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function uN(){return!F0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lu(){try{return typeof indexedDB=="object"}catch{return!1}}function tj(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj="FirebaseError";class qn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=nj,Object.setPrototypeOf(this,qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,So.prototype.create)}}class So{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,c=this.errors[e],u=c?sj(c,r):"Error",f=`${this.serviceName}: ${u} (${a}).`;return new qn(a,f,r)}}function sj(n,e){return n.replace(rj,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const rj=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function ij(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Uu(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const c=n[a],u=e[a];if(ew(c)&&ew(u)){if(!Uu(c,u))return!1}else if(c!==u)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function ew(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function kl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,c]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(c)}}),e}function wu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function dN(n,e){const t=new aj(n,e);return t.subscribe.bind(t)}class aj{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");oj(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Ug),a.error===void 0&&(a.error=Ug),a.complete===void 0&&(a.complete=Ug);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oj(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ug(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(n){return n&&n._delegate?n._delegate:n}class br{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new WA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uj(e))try{this.getOrInitializeService({instanceIdentifier:eo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:a});r.resolve(c)}catch{}}}}clearInstance(e=eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=eo){return this.instances.has(e)}getOptions(e=eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[c,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);r===f&&u.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),c=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;c.add(e),this.onInitCallbacks.set(a,c);const u=this.instances.get(a);return u&&e(u,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cj(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=eo){return this.component?this.component.multipleInstances?e:eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cj(n){return n===eo?void 0:n}function uj(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lj(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=[];var Xe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Xe||(Xe={}));const fN={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},dj=Xe.INFO,hj={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},fj=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=hj[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wf{constructor(e){this.name=e,this._logLevel=dj,this._logHandler=fj,this._userLogHandler=null,B0.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}function mj(n){B0.forEach(e=>{e.setLogLevel(n)})}function pj(n,e){for(const t of B0){let r=null;e&&e.level&&(r=fN[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(a,c,...u)=>{const f=u.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");c>=(r??a.logLevel)&&n({level:Xe[c].toLowerCase(),message:f,args:u,type:a.name})}}}const gj=(n,e)=>e.some(t=>n instanceof t);let tw,nw;function xj(){return tw||(tw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yj(){return nw||(nw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mN=new WeakMap,n0=new WeakMap,pN=new WeakMap,Fg=new WeakMap,z0=new WeakMap;function bj(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",c),n.removeEventListener("error",u)},c=()=>{t(ta(n.result)),a()},u=()=>{r(n.error),a()};n.addEventListener("success",c),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&mN.set(t,n)}).catch(()=>{}),z0.set(e,n),e}function vj(n){if(n0.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",u),n.removeEventListener("abort",u)},c=()=>{t(),a()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",c),n.addEventListener("error",u),n.addEventListener("abort",u)});n0.set(n,e)}let s0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return n0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||pN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ta(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _j(n){s0=n(s0)}function wj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(qg(this),e,...t);return pN.set(r,e.sort?e.sort():[e]),ta(r)}:yj().includes(n)?function(...e){return n.apply(qg(this),e),ta(mN.get(this))}:function(...e){return ta(n.apply(qg(this),e))}}function Nj(n){return typeof n=="function"?wj(n):(n instanceof IDBTransaction&&vj(n),gj(n,xj())?new Proxy(n,s0):n)}function ta(n){if(n instanceof IDBRequest)return bj(n);if(Fg.has(n))return Fg.get(n);const e=Nj(n);return e!==n&&(Fg.set(n,e),z0.set(e,n)),e}const qg=n=>z0.get(n);function Tj(n,e,{blocked:t,upgrade:r,blocking:a,terminated:c}={}){const u=indexedDB.open(n,e),f=ta(u);return r&&u.addEventListener("upgradeneeded",m=>{r(ta(u.result),m.oldVersion,m.newVersion,ta(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{c&&m.addEventListener("close",()=>c()),a&&m.addEventListener("versionchange",x=>a(x.oldVersion,x.newVersion,x))}).catch(()=>{}),f}const Ej=["get","getKey","getAll","getAllKeys","count"],Sj=["put","add","delete","clear"],Bg=new Map;function sw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Bg.get(e))return Bg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=Sj.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||Ej.includes(t)))return;const c=async function(u,...f){const m=this.transaction(u,a?"readwrite":"readonly");let x=m.store;return r&&(x=x.index(f.shift())),(await Promise.all([x[t](...f),a&&m.done]))[0]};return Bg.set(e,c),c}_j(n=>({...n,get:(e,t,r)=>sw(e,t)||n.get(e,t,r),has:(e,t)=>!!sw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(jj(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function jj(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jf="@firebase/app",r0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new Wf("@firebase/app"),Ij="@firebase/app-compat",Rj="@firebase/analytics-compat",Cj="@firebase/analytics",kj="@firebase/app-check-compat",Dj="@firebase/app-check",Mj="@firebase/auth",Pj="@firebase/auth-compat",Oj="@firebase/database",Vj="@firebase/data-connect",Lj="@firebase/database-compat",Uj="@firebase/functions",Fj="@firebase/functions-compat",qj="@firebase/installations",Bj="@firebase/installations-compat",zj="@firebase/messaging",Hj="@firebase/messaging-compat",Gj="@firebase/performance",Kj="@firebase/performance-compat",$j="@firebase/remote-config",Qj="@firebase/remote-config-compat",Yj="@firebase/storage",Wj="@firebase/storage-compat",Xj="@firebase/firestore",Jj="@firebase/vertexai-preview",Zj="@firebase/firestore-compat",eI="firebase",tI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="[DEFAULT]",nI={[jf]:"fire-core",[Ij]:"fire-core-compat",[Cj]:"fire-analytics",[Rj]:"fire-analytics-compat",[Dj]:"fire-app-check",[kj]:"fire-app-check-compat",[Mj]:"fire-auth",[Pj]:"fire-auth-compat",[Oj]:"fire-rtdb",[Vj]:"fire-data-connect",[Lj]:"fire-rtdb-compat",[Uj]:"fire-fn",[Fj]:"fire-fn-compat",[qj]:"fire-iid",[Bj]:"fire-iid-compat",[zj]:"fire-fcm",[Hj]:"fire-fcm-compat",[Gj]:"fire-perf",[Kj]:"fire-perf-compat",[$j]:"fire-rc",[Qj]:"fire-rc-compat",[Yj]:"fire-gcs",[Wj]:"fire-gcs-compat",[Xj]:"fire-fst",[Zj]:"fire-fst-compat",[Jj]:"fire-vertex","fire-js":"fire-js",[eI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=new Map,Ul=new Map,Fl=new Map;function Fu(n,e){try{n.container.addComponent(e)}catch(t){Zr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function gN(n,e){n.container.addOrOverwriteComponent(e)}function ia(n){const e=n.name;if(Fl.has(e))return Zr.debug(`There were multiple attempts to register component ${e}.`),!1;Fl.set(e,n);for(const t of ra.values())Fu(t,n);for(const t of Ul.values())Fu(t,n);return!0}function xN(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function sI(n,e,t=sa){xN(n,e).clearInstance(t)}function yN(n){return n.options!==void 0}function Lt(n){return n.settings!==void 0}function rI(){Fl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ms=new So("app","Firebase",iI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bN=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new br("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ms.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI extends bN{constructor(e,t,r,a){const c=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,u={name:r,automaticDataCollectionEnabled:c};if(e.apiKey!==void 0)super(e,u,a);else{const f=e;super(f.options,u,a)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:c},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Qs(jf,r0,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){G0(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ms.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=tI;function H0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:sa,automaticDataCollectionEnabled:!1},e),a=r.name;if(typeof a!="string"||!a)throw Ms.create("bad-app-name",{appName:String(a)});if(t||(t=aN()),!t)throw Ms.create("no-options");const c=ra.get(a);if(c){if(Uu(t,c.options)&&Uu(r,c.config))return c;throw Ms.create("duplicate-app",{appName:a})}const u=new hN(a);for(const m of Fl.values())u.addComponent(m);const f=new bN(t,r,u);return ra.set(a,f),f}function oI(n,e){if(ZA()&&!oN())throw Ms.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;yN(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const a=x=>[...x].reduce((y,v)=>Math.imul(31,y)+v.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Ms.create("finalization-registry-not-supported",{});const c=""+a(JSON.stringify(r)),u=Ul.get(c);if(u)return u.incRefCount(e.releaseOnDeref),u;const f=new hN(c);for(const x of Fl.values())f.addComponent(x);const m=new aI(t,e,c,f);return Ul.set(c,m),m}function lI(n=sa){const e=ra.get(n);if(!e&&n===sa&&aN())return H0();if(!e)throw Ms.create("no-app",{appName:n});return e}function cI(){return Array.from(ra.values())}async function G0(n){let e=!1;const t=n.name;ra.has(t)?(e=!0,ra.delete(t)):Ul.has(t)&&n.decRefCount()<=0&&(Ul.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function Qs(n,e,t){var r;let a=(r=nI[n])!==null&&r!==void 0?r:n;t&&(a+=`-${t}`);const c=a.match(/\s|\//),u=e.match(/\s|\//);if(c||u){const f=[`Unable to register library "${a}" with version "${e}":`];c&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zr.warn(f.join(" "));return}ia(new br(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}function vN(n,e){if(n!==null&&typeof n!="function")throw Ms.create("invalid-log-argument");pj(n,e)}function _N(n){mj(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="firebase-heartbeat-database",dI=1,qu="firebase-heartbeat-store";let zg=null;function wN(){return zg||(zg=Tj(uI,dI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(qu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ms.create("idb-open",{originalErrorMessage:n.message})})),zg}async function hI(n){try{const t=(await wN()).transaction(qu),r=await t.objectStore(qu).get(NN(n));return await t.done,r}catch(e){if(e instanceof qn)Zr.warn(e.message);else{const t=Ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zr.warn(t.message)}}}async function rw(n,e){try{const r=(await wN()).transaction(qu,"readwrite");await r.objectStore(qu).put(e,NN(n)),await r.done}catch(t){if(t instanceof qn)Zr.warn(t.message);else{const r=Ms.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Zr.warn(r.message)}}}function NN(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=1024,mI=720*60*60*1e3;class pI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=iw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(u=>u.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const f=new Date(u.date).valueOf();return Date.now()-f<=mI}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Zr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=iw(),{heartbeatsToSend:r,unsentEntries:a}=gI(this._heartbeatsCache.heartbeats),c=Sf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Zr.warn(t),""}}}function iw(){return new Date().toISOString().substring(0,10)}function gI(n,e=fI){const t=[];let r=n.slice();for(const a of n){const c=t.find(u=>u.agent===a.agent);if(c){if(c.dates.push(a.date),aw(t)>e){c.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),aw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class xI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lu()?tj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await hI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return rw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return rw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function aw(n){return Sf(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(n){ia(new br("platform-logger",e=>new Aj(e),"PRIVATE")),ia(new br("heartbeat",e=>new pI(e),"PRIVATE")),Qs(jf,r0,n),Qs(jf,r0,"esm2017"),Qs("fire-js","")}yI("");const bI=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:qn,SDK_VERSION:pa,_DEFAULT_ENTRY_NAME:sa,_addComponent:Fu,_addOrOverwriteComponent:gN,_apps:ra,_clearComponents:rI,_components:Fl,_getProvider:xN,_isFirebaseApp:yN,_isFirebaseServerApp:Lt,_registerComponent:ia,_removeServiceInstance:sI,_serverApps:Ul,deleteApp:G0,getApp:lI,getApps:cI,initializeApp:H0,initializeServerApp:oI,onLog:vN,registerVersion:Qs,setLogLevel:_N},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,t){this._delegate=e,this.firebase=t,Fu(e,new br("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),G0(this._delegate)))}_getService(e,t=sa){var r;this._delegate.checkDestroyed();const a=this._delegate.container.getProvider(e);return!a.isInitialized()&&((r=a.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&a.initialize(),a.getImmediate({identifier:t})}_removeServiceInstance(e,t=sa){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Fu(this._delegate,e)}_addOrOverwriteComponent(e){gN(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},ow=new So("app-compat","Firebase",_I);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(n){const e={},t={__esModule:!0,initializeApp:c,app:a,registerVersion:Qs,setLogLevel:_N,onLog:vN,apps:null,SDK_VERSION:pa,INTERNAL:{registerComponent:f,removeApp:r,useAsService:m,modularAPIs:bI}};t.default=t,Object.defineProperty(t,"apps",{get:u});function r(x){delete e[x]}function a(x){if(x=x||sa,!Z_(e,x))throw ow.create("no-app",{appName:x});return e[x]}a.App=n;function c(x,y={}){const v=H0(x,y);if(Z_(e,v.name))return e[v.name];const E=new n(v,t);return e[v.name]=E,E}function u(){return Object.keys(e).map(x=>e[x])}function f(x){const y=x.name,v=y.replace("-compat","");if(ia(x)&&x.type==="PUBLIC"){const E=(A=a())=>{if(typeof A[v]!="function")throw ow.create("invalid-app-argument",{appName:y});return A[v]()};x.serviceProps!==void 0&&Af(E,x.serviceProps),t[v]=E,n.prototype[v]=function(...A){return this._getService.bind(this,y).apply(this,x.multipleInstances?A:[])}}return x.type==="PUBLIC"?t[v]:null}function m(x,y){return y==="serverAuth"?null:y}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(){const n=wI(vI);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:TN,extendNamespace:e,createSubscribe:dN,ErrorFactory:So,deepExtend:Af});function e(t){Af(n,t)}return n}const NI=TN();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=new Wf("@firebase/app-compat"),TI="@firebase/app-compat",EI="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(n){Qs(TI,EI,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=iN();if(n.firebase!==void 0){lw.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&lw.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const xs=NI;SI();var AI="firebase",jI="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xs.registerVersion(AI,jI,"app-compat");function K0(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(t[r[a]]=n[r[a]]);return t}const fu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},vl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function EN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RI=II,CI=EN,SN=new So("auth","Firebase",EN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If=new Wf("@firebase/auth");function kI(n,...e){If.logLevel<=Xe.WARN&&If.warn(`Auth (${pa}): ${n}`,...e)}function mf(n,...e){If.logLevel<=Xe.ERROR&&If.error(`Auth (${pa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(n,...e){throw Q0(n,...e)}function cn(n,...e){return Q0(n,...e)}function $0(n,e,t){const r=Object.assign(Object.assign({},CI()),{[e]:t});return new So("auth","Firebase",r).create(e,{appName:n.name})}function yn(n){return $0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rc(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&In(n,"argument-error"),$0(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Q0(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return SN.create(n,...e)}function be(n,e,...t){if(!n)throw Q0(e,...t)}function mr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw mf(e),new Error(e)}function Ys(n,e){n||mr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Y0(){return cw()==="http:"||cw()==="https:"}function cw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Y0()||lN()||"connection"in navigator)?navigator.onLine:!0}function MI(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ys(t>e,"Short delay should be less than long delay!"),this.isMobile=JA()||q0()}get(){return DI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(n,e){Ys(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=new fd(3e4,6e4);function qt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Bt(n,e,t,r,a={}){return jN(n,a,async()=>{let c={},u={};r&&(e==="GET"?u=r:c={body:JSON.stringify(r)});const f=sc(Object.assign({key:n.config.apiKey},u)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const x=Object.assign({method:e,headers:m},c);return ej()||(x.referrerPolicy="no-referrer"),AN.fetch()(IN(n,n.config.apiHost,t,f),x)})}async function jN(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},PI),e);try{const a=new LI(n),c=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw Nu(n,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const f=c.ok?u.errorMessage:u.error.message,[m,x]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nu(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw Nu(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw Nu(n,"user-disabled",u);const y=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw $0(n,y,x);In(n,y)}}catch(a){if(a instanceof qn)throw a;In(n,"network-request-failed",{message:String(a)})}}async function si(n,e,t,r,a={}){const c=await Bt(n,e,t,r,a);return"mfaPendingCredential"in c&&In(n,"multi-factor-auth-required",{_serverResponse:c}),c}function IN(n,e,t,r){const a=`${e}${t}?${r}`;return n.config.emulator?W0(n.config,a):`${n.config.apiScheme}://${a}`}function VI(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LI{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(cn(this.auth,"network-request-failed")),OI.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nu(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=cn(n,e,r);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(n){return n!==void 0&&n.getResponse!==void 0}function dw(n){return n!==void 0&&n.enterprise!==void 0}class UI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return VI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FI(n){return(await Bt(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function qI(n,e){return Bt(n,"GET","/v2/recaptchaConfig",qt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BI(n,e){return Bt(n,"POST","/v1/accounts:delete",e)}async function zI(n,e){return Bt(n,"POST","/v1/accounts:update",e)}async function RN(n,e){return Bt(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HI(n,e=!1){const t=Le(n),r=await t.getIdToken(e),a=Xf(r);be(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const c=typeof a.firebase=="object"?a.firebase:void 0,u=c==null?void 0:c.sign_in_provider;return{claims:a,token:r,authTime:Iu(Hg(a.auth_time)),issuedAtTime:Iu(Hg(a.iat)),expirationTime:Iu(Hg(a.exp)),signInProvider:u||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Hg(n){return Number(n)*1e3}function Xf(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return mf("JWT malformed, contained fewer than 3 sections"),null;try{const a=rN(t);return a?JSON.parse(a):(mf("Failed to decode base64 JWT payload"),null)}catch(a){return mf("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function hw(n){const e=Xf(n);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ei(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof qn&&GI(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function GI({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Iu(this.lastLoginAt),this.creationTime=Iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zu(n){var e;const t=n.auth,r=await n.getIdToken(),a=await ei(n,RN(t,{idToken:r}));be(a==null?void 0:a.users.length,t,"internal-error");const c=a.users[0];n._notifyReloadListener(c);const u=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?CN(c.providerUserInfo):[],f=QI(n.providerData,u),m=n.isAnonymous,x=!(n.email&&c.passwordHash)&&!(f!=null&&f.length),y=m?x:!1,v={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:f,metadata:new i0(c.createdAt,c.lastLoginAt),isAnonymous:y};Object.assign(n,v)}async function $I(n){const e=Le(n);await zu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QI(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function CN(n){return n.map(e=>{var{providerId:t}=e,r=K0(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YI(n,e){const t=await jN(n,{},async()=>{const r=sc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=n.config,u=IN(n,a,"/v1/token",`key=${c}`),f=await n._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",AN.fetch()(u,{method:"POST",headers:f,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function WI(n,e){return Bt(n,"POST","/v2/accounts:revokeToken",qt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=hw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:c}=await YI(e,t);this.updateTokensAndExpiration(r,a,Number(c))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:c}=t,u=new Dl;return r&&(be(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),a&&(be(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),c&&(be(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dl,this.toJSON())}_performRefresh(){return mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(n,e){be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Yr{constructor(e){var{uid:t,auth:r,stsTokenManager:a}=e,c=K0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new i0(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const t=await ei(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return HI(this,e)}reload(){return $I(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Yr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await zu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Lt(this.auth.app))return Promise.reject(yn(this.auth));const e=await this.getIdToken();return await ei(this,BI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,a,c,u,f,m,x,y;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(a=t.email)!==null&&a!==void 0?a:void 0,A=(c=t.phoneNumber)!==null&&c!==void 0?c:void 0,V=(u=t.photoURL)!==null&&u!==void 0?u:void 0,R=(f=t.tenantId)!==null&&f!==void 0?f:void 0,O=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,H=(x=t.createdAt)!==null&&x!==void 0?x:void 0,ae=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:ee,emailVerified:z,isAnonymous:F,providerData:G,stsTokenManager:C}=t;be(ee&&C,e,"internal-error");const T=Dl.fromJSON(this.name,C);be(typeof ee=="string",e,"internal-error"),$i(v,e.name),$i(E,e.name),be(typeof z=="boolean",e,"internal-error"),be(typeof F=="boolean",e,"internal-error"),$i(A,e.name),$i(V,e.name),$i(R,e.name),$i(O,e.name),$i(H,e.name),$i(ae,e.name);const S=new Yr({uid:ee,auth:e,email:E,emailVerified:z,displayName:v,isAnonymous:F,photoURL:V,phoneNumber:A,tenantId:R,stsTokenManager:T,createdAt:H,lastLoginAt:ae});return G&&Array.isArray(G)&&(S.providerData=G.map(N=>Object.assign({},N))),O&&(S._redirectEventId=O),S}static async _fromIdTokenResponse(e,t,r=!1){const a=new Dl;a.updateFromServerResponse(t);const c=new Yr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await zu(c),c}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];be(a.localId!==void 0,"internal-error");const c=a.providerUserInfo!==void 0?CN(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(c!=null&&c.length),f=new Dl;f.updateFromIdToken(r);const m=new Yr({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:u}),x={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new i0(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(c!=null&&c.length)};return Object.assign(m,x),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw=new Map;function ys(n){Ys(n instanceof Function,"Expected a class definition");let e=fw.get(n);return e?(Ys(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,fw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}kN.type="NONE";const ql=kN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(n,e,t){return`firebase:${n}:${e}:${t}`}class Ml{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:c}=this.auth;this.fullUserKey=uo(this.userKey,a.apiKey,c),this.fullPersistenceKey=uo("persistence",a.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Yr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ml(ys(ql),e,r);const a=(await Promise.all(t.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let c=a[0]||ys(ql);const u=uo(r,e.config.apiKey,e.name);let f=null;for(const x of t)try{const y=await x._get(u);if(y){const v=Yr._fromJSON(e,y);x!==c&&(f=v),c=x;break}}catch{}const m=a.filter(x=>x._shouldAllowMigration);return!c._shouldAllowMigration||!m.length?new Ml(c,e,r):(c=m[0],f&&await c._set(u,f.toJSON()),await Promise.all(t.map(async x=>{if(x!==c)try{await x._remove(u)}catch{}})),new Ml(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ON(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VN(e))return"Blackberry";if(LN(e))return"Webos";if(MN(e))return"Safari";if((e.includes("chrome/")||PN(e))&&!e.includes("edge/"))return"Chrome";if(md(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function DN(n=Dt()){return/firefox\//i.test(n)}function MN(n=Dt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PN(n=Dt()){return/crios\//i.test(n)}function ON(n=Dt()){return/iemobile/i.test(n)}function md(n=Dt()){return/android/i.test(n)}function VN(n=Dt()){return/blackberry/i.test(n)}function LN(n=Dt()){return/webos/i.test(n)}function pd(n=Dt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function XI(n=Dt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function JI(n=Dt()){var e;return pd(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ZI(){return cN()&&document.documentMode===10}function UN(n=Dt()){return pd(n)||md(n)||LN(n)||VN(n)||/windows phone/i.test(n)||ON(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(n,e=[]){let t;switch(n){case"Browser":t=mw(Dt());break;case"Worker":t=`${mw(Dt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${pa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=c=>new Promise((u,f)=>{try{const m=e(c);u(m)}catch(m){f(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(n,e={}){return Bt(n,"GET","/v2/passwordPolicy",qt(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=6;class sR{constructor(e){var t,r,a,c;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:nR,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,a,c,u,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(r=m.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(c=m.containsUppercaseLetter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(u=m.containsNumericCharacter)!==null&&u!==void 0?u:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pw(this),this.idTokenSubscription=new pw(this),this.beforeStateQueue=new eR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ys(t)),this._initializationPromise=this.queue(async()=>{var r,a;if(!this._deleted&&(this.persistenceManager=await Ml.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await RN(this,{idToken:e}),r=await Yr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Lt(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&(m!=null&&m.user)&&(a=m.user,c=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await zu(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Lt(this.app))return Promise.reject(yn(this));const t=e?Le(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Lt(this.app)?Promise.reject(yn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Lt(this.app)?Promise.reject(yn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ys(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tR(this),t=new sR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new So("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await WI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ys(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await Ml.create(this,[ys(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(f,this,"internal-error"),f.then(()=>{u||c(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&kI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ut(n){return Le(n)}class pw{constructor(e){this.auth=e,this.observer=null,this.addObserver=dN(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iR(n){gd=n}function X0(n){return gd.loadJS(n)}function aR(){return gd.recaptchaV2Script}function oR(){return gd.recaptchaEnterpriseScript}function lR(){return gd.gapiScript}function qN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const cR="recaptcha-enterprise",uR="NO_RECAPTCHA";class dR{constructor(e){this.type=cR,this.auth=Ut(e)}async verify(e="verify",t=!1){async function r(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(u,f)=>{qI(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const x=new UI(m);return c.tenantId==null?c._agentRecaptchaConfig=x:c._tenantRecaptchaConfigs[c.tenantId]=x,u(x.siteKey)}}).catch(m=>{f(m)})})}function a(c,u,f){const m=window.grecaptcha;dw(m)?m.enterprise.ready(()=>{m.enterprise.execute(c,{action:e}).then(x=>{u(x)}).catch(()=>{u(uR)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((c,u)=>{r(this.auth).then(f=>{if(!t&&dw(window.grecaptcha))a(f,c,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=oR();m.length!==0&&(m+=f),X0(m).then(()=>{a(f,c,u)}).catch(x=>{u(x)})}}).catch(f=>{u(f)})})}}async function gw(n,e,t,r=!1){const a=new dR(n);let c;try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const u=Object.assign({},e);return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Hu(n,e,t,r){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await gw(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await gw(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(c)})}function hR(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ys);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function fR(n,e,t){const r=Ut(n);be(r._canInitEmulator,r,"emulator-config-failed"),be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!!(t!=null&&t.disableWarnings),c=BN(e),{host:u,port:f}=mR(e),m=f===null?"":`:${f}`;r.config.emulator={url:`${c}//${u}${m}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||pR()}function BN(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function mR(n){const e=BN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const c=a[1];return{host:c,port:xw(r.substr(c.length+1))}}else{const[c,u]=r.split(":");return{host:c,port:xw(u)}}}function xw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function pR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return mr("not implemented")}_getIdTokenResponse(e){return mr("not implemented")}_linkToIdToken(e,t){return mr("not implemented")}_getReauthenticationResolver(e){return mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(n,e){return Bt(n,"POST","/v1/accounts:resetPassword",qt(n,e))}async function gR(n,e){return Bt(n,"POST","/v1/accounts:update",e)}async function xR(n,e){return Bt(n,"POST","/v1/accounts:signUp",e)}async function yR(n,e){return Bt(n,"POST","/v1/accounts:update",qt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bR(n,e){return si(n,"POST","/v1/accounts:signInWithPassword",qt(n,e))}async function Jf(n,e){return Bt(n,"POST","/v1/accounts:sendOobCode",qt(n,e))}async function vR(n,e){return Jf(n,e)}async function _R(n,e){return Jf(n,e)}async function wR(n,e){return Jf(n,e)}async function NR(n,e){return Jf(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(n,e){return si(n,"POST","/v1/accounts:signInWithEmailLink",qt(n,e))}async function ER(n,e){return si(n,"POST","/v1/accounts:signInWithEmailLink",qt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends ic{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Gu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Gu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hu(e,t,"signInWithPassword",bR);case"emailLink":return TR(e,{email:this._email,oobCode:this._password});default:In(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hu(e,r,"signUpPassword",xR);case"emailLink":return ER(e,{idToken:t,email:this._email,oobCode:this._password});default:In(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jr(n,e){return si(n,"POST","/v1/accounts:signInWithIdp",qt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="http://localhost";class vr extends ic{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):In("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a}=t,c=K0(t,["providerId","signInMethod"]);if(!r||!a)return null;const u=new vr(r,a);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Jr(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Jr(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jr(e,t)}buildRequest(){const e={requestUri:SR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=sc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(n,e){return Bt(n,"POST","/v1/accounts:sendVerificationCode",qt(n,e))}async function jR(n,e){return si(n,"POST","/v1/accounts:signInWithPhoneNumber",qt(n,e))}async function IR(n,e){const t=await si(n,"POST","/v1/accounts:signInWithPhoneNumber",qt(n,e));if(t.temporaryProof)throw Nu(n,"account-exists-with-different-credential",t);return t}const RR={USER_NOT_FOUND:"user-not-found"};async function CR(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return si(n,"POST","/v1/accounts:signInWithPhoneNumber",qt(n,t),RR)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho extends ic{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ho({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ho({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return jR(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return IR(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return CR(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:a}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:c}=e;return!r&&!t&&!a&&!c?null:new ho({verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DR(n){const e=kl(wu(n)).link,t=e?kl(wu(e)).deep_link_id:null,r=kl(wu(n)).deep_link_id;return(r?kl(wu(r)).link:null)||r||t||e||n}class Zf{constructor(e){var t,r,a,c,u,f;const m=kl(wu(e)),x=(t=m.apiKey)!==null&&t!==void 0?t:null,y=(r=m.oobCode)!==null&&r!==void 0?r:null,v=kR((a=m.mode)!==null&&a!==void 0?a:null);be(x&&y&&v,"argument-error"),this.apiKey=x,this.operation=v,this.code=y,this.continueUrl=(c=m.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(u=m.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(f=m.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=DR(e);try{return new Zf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){this.providerId=ga.PROVIDER_ID}static credential(e,t){return Gu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Zf.parseLink(t);return be(r,"argument-error"),Gu._fromEmailAndCode(e,r.code,r.tenantId)}}ga.PROVIDER_ID="password";ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends ri{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Pl extends ac{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return be("providerId"in t&&"signInMethod"in t,"argument-error"),vr._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return be(e.idToken||e.accessToken,"argument-error"),vr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Pl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Pl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:a,pendingToken:c,nonce:u,providerId:f}=e;if(!r&&!a&&!t&&!c||!f)return null;try{return new Pl(f)._credential({idToken:t,accessToken:r,nonce:u,pendingToken:c})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends ac{constructor(){super("facebook.com")}static credential(e){return vr._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.FACEBOOK_SIGN_IN_METHOD="facebook.com";ur.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends ac{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vr._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return dr.credential(t,r)}catch{return null}}}dr.GOOGLE_SIGN_IN_METHOD="google.com";dr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends ac{constructor(){super("github.com")}static credential(e){return vr._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.GITHUB_SIGN_IN_METHOD="github.com";hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="http://localhost";class Bl extends ic{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Jr(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Jr(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jr(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,pendingToken:c}=t;return!r||!a||!c||r!==a?null:new Bl(r,c)}static _create(e,t){return new Bl(e,t)}buildRequest(){return{requestUri:MR,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="saml.";class Rf extends ri{constructor(e){be(e.startsWith(PR),"argument-error"),super(e)}static credentialFromResult(e){return Rf.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Rf.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Bl.fromJSON(e);return be(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return Bl._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends ac{constructor(){super("twitter.com")}static credential(e,t){return vr._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return fr.credential(t,r)}catch{return null}}}fr.TWITTER_SIGN_IN_METHOD="twitter.com";fr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(n,e){return si(n,"POST","/v1/accounts:signUp",qt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const c=await Yr._fromIdTokenResponse(e,r,a),u=yw(r);return new Ps({user:c,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=yw(r);return new Ps({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function yw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(n){var e;if(Lt(n.app))return Promise.reject(yn(n));const t=Ut(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Ps({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await HN(t,{returnSecureToken:!0}),a=await Ps._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf extends qn{constructor(e,t,r,a){var c;super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Cf.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Cf(e,t,r,a)}}function GN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Cf._fromErrorAndOperation(n,c,e,r):c})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(n,e){const t=Le(n);await em(!0,t,e);const{providerUserInfo:r}=await zI(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),a=KN(r||[]);return t.providerData=t.providerData.filter(c=>a.has(c.providerId)),a.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function J0(n,e,t=!1){const r=await ei(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ps._forOperation(n,"link",r)}async function em(n,e,t){await zu(e);const r=KN(e.providerData),a=n===!1?"provider-already-linked":"no-such-provider";be(r.has(t)===n,e.auth,a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(n,e,t=!1){const{auth:r}=n;if(Lt(r.app))return Promise.reject(yn(r));const a="reauthenticate";try{const c=await ei(n,GN(r,a,e,n),t);be(c.idToken,r,"internal-error");const u=Xf(c.idToken);be(u,r,"internal-error");const{sub:f}=u;return be(n.uid===f,r,"user-mismatch"),Ps._forOperation(n,a,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&In(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(n,e,t=!1){if(Lt(n.app))return Promise.reject(yn(n));const r="signIn",a=await GN(n,r,e),c=await Ps._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(c.user),c}async function tm(n,e){return QN(Ut(n),e)}async function YN(n,e){const t=Le(n);return await em(!1,t,e.providerId),J0(t,e)}async function WN(n,e){return $N(Le(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LR(n,e){return si(n,"POST","/v1/accounts:signInWithCustomToken",qt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UR(n,e){if(Lt(n.app))return Promise.reject(yn(n));const t=Ut(n),r=await LR(t,{token:e,returnSecureToken:!0}),a=await Ps._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Z0._fromServerResponse(e,t):"totpInfo"in t?ex._fromServerResponse(e,t):In(e,"internal-error")}}class Z0 extends xd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Z0(t)}}class ex extends xd{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new ex(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(n,e,t){var r;be(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),be(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(be(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(be(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tx(n){const e=Ut(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function FR(n,e,t){const r=Ut(n),a={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&nm(r,a,t),await Hu(r,a,"getOobCode",_R)}async function qR(n,e,t){await zN(Le(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tx(n),r})}async function BR(n,e){await yR(Le(n),{oobCode:e})}async function XN(n,e){const t=Le(n),r=await zN(t,{oobCode:e}),a=r.requestType;switch(be(a,t,"internal-error"),a){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":be(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":be(r.mfaInfo,t,"internal-error");default:be(r.email,t,"internal-error")}let c=null;return r.mfaInfo&&(c=xd._fromServerResponse(Ut(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:c},operation:a}}async function zR(n,e){const{data:t}=await XN(Le(n),e);return t.email}async function HR(n,e,t){if(Lt(n.app))return Promise.reject(yn(n));const r=Ut(n),u=await Hu(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HN).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&tx(n),m}),f=await Ps._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(f.user),f}function GR(n,e,t){return Lt(n.app)?Promise.reject(yn(n)):tm(Le(n),ga.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tx(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(n,e,t){const r=Ut(n),a={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function c(u,f){be(f.handleCodeInApp,r,"argument-error"),f&&nm(r,u,f)}c(a,t),await Hu(r,a,"getOobCode",wR)}function $R(n,e){const t=Zf.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function QR(n,e,t){if(Lt(n.app))return Promise.reject(yn(n));const r=Le(n),a=ga.credentialWithLink(e,t||Bu());return be(a._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),tm(r,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(n,e){return Bt(n,"POST","/v1/accounts:createAuthUri",qt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WR(n,e){const t=Y0()?Bu():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:a}=await YR(Le(n),r);return a||[]}async function XR(n,e){const t=Le(n),a={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&nm(t.auth,a,e);const{email:c}=await vR(t.auth,a);c!==n.email&&await n.reload()}async function JR(n,e,t){const r=Le(n),c={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&nm(r.auth,c,t);const{email:u}=await NR(r.auth,c);u!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(n,e){return Bt(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eC(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Le(n),c={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await ei(r,ZR(r.auth,c));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const f=r.providerData.find(({providerId:m})=>m==="password");f&&(f.displayName=r.displayName,f.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function tC(n,e){const t=Le(n);return Lt(t.auth.app)?Promise.reject(yn(t.auth)):JN(t,e,null)}function nC(n,e){return JN(Le(n),null,e)}async function JN(n,e,t){const{auth:r}=n,c={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(c.email=e),t&&(c.password=t);const u=await ei(n,gR(r,c));await n._updateTokensIfNecessary(u,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(n){var e,t;if(!n)return null;const{providerId:r}=n,a=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},c=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const u=(t=(e=Xf(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(u){const f=u!=="anonymous"&&u!=="custom"?u:null;return new Ol(c,f)}}if(!r)return null;switch(r){case"facebook.com":return new rC(c,a);case"github.com":return new iC(c,a);case"google.com":return new aC(c,a);case"twitter.com":return new oC(c,a,n.screenName||null);case"custom":case"anonymous":return new Ol(c,null);default:return new Ol(c,r,a)}}class Ol{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class ZN extends Ol{constructor(e,t,r,a){super(e,t,r),this.username=a}}class rC extends Ol{constructor(e,t){super(e,"facebook.com",t)}}class iC extends ZN{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class aC extends Ol{constructor(e,t){super(e,"google.com",t)}}class oC extends ZN{constructor(e,t,r){super(e,"twitter.com",t,r)}}function lC(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:sC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new oo("enroll",e,t)}static _fromMfaPendingCredential(e){return new oo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return oo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return oo._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=Ut(e),a=t.customData._serverResponse,c=(a.mfaInfo||[]).map(f=>xd._fromServerResponse(r,f));be(a.mfaPendingCredential,r,"internal-error");const u=oo._fromMfaPendingCredential(a.mfaPendingCredential);return new nx(u,c,async f=>{const m=await f._process(r,u);delete a.mfaInfo,delete a.mfaPendingCredential;const x=Object.assign(Object.assign({},a),{idToken:m.idToken,refreshToken:m.refreshToken});switch(t.operationType){case"signIn":const y=await Ps._fromIdTokenResponse(r,t.operationType,x);return await r._updateCurrentUser(y.user),y;case"reauthenticate":return be(t.user,r,"internal-error"),Ps._forOperation(t.user,t.operationType,x);default:In(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function cC(n,e){var t;const r=Le(n),a=e;return be(e.customData.operationType,r,"argument-error"),be((t=a.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),nx._fromError(r,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(n,e){return Bt(n,"POST","/v2/accounts/mfaEnrollment:start",qt(n,e))}function dC(n,e){return Bt(n,"POST","/v2/accounts/mfaEnrollment:finalize",qt(n,e))}function hC(n,e){return Bt(n,"POST","/v2/accounts/mfaEnrollment:withdraw",qt(n,e))}class sx{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>xd._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new sx(e)}async getSession(){return oo._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,a=await this.getSession(),c=await ei(this.user,r._process(this.user.auth,a,t));return await this.user._updateTokensIfNecessary(c),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const a=await ei(this.user,hC(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:c})=>c!==t),await this.user._updateTokensIfNecessary(a),await this.user.reload()}catch(a){throw a}}}const Gg=new WeakMap;function fC(n){const e=Le(n);return Gg.has(e)||Gg.set(e,sx._fromUser(e)),Gg.get(e)}const kf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kf,"1"),this.storage.removeItem(kf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=1e3,pC=10;class t2 extends e2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,m)=>{this.notifyListeners(u,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},c=this.storage.getItem(r);ZI()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,pC):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},mC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}t2.type="LOCAL";const rx=t2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2 extends e2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}n2.type="SESSION";const mo=n2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new sm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:c}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const f=Array.from(u).map(async x=>x(t.origin,c)),m=await gC(f);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,u;return new Promise((f,m)=>{const x=yd("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},r);u={messageChannel:a,onMessage(v){const E=v;if(E.data.eventId===x)switch(E.data.status){case"ack":clearTimeout(y),c=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(E.data.response);break;default:clearTimeout(y),clearTimeout(c),m(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:x,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return window}function yC(n){rn().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(){return typeof rn().WorkerGlobalScope<"u"&&typeof rn().importScripts=="function"}async function bC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vC(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function _C(){return ix()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2="firebaseLocalStorageDb",wC=1,Df="firebaseLocalStorage",r2="fbase_key";class bd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function rm(n,e){return n.transaction([Df],e?"readwrite":"readonly").objectStore(Df)}function NC(){const n=indexedDB.deleteDatabase(s2);return new bd(n).toPromise()}function a0(){const n=indexedDB.open(s2,wC);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Df,{keyPath:r2})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Df)?e(r):(r.close(),await NC(),e(await a0()))})})}async function bw(n,e,t){const r=rm(n,!0).put({[r2]:e,value:t});return new bd(r).toPromise()}async function TC(n,e){const t=rm(n,!1).get(e),r=await new bd(t).toPromise();return r===void 0?null:r.value}function vw(n,e){const t=rm(n,!0).delete(e);return new bd(t).toPromise()}const EC=800,SC=3;class i2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await a0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>SC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ix()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sm._getInstance(_C()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await bC(),!this.activeServiceWorker)return;this.sender=new xC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await a0();return await bw(e,kf,"1"),await vw(e,kf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>bw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>TC(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>vw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const c=rm(a,!1).getAll();return new bd(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:c}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(c)&&(this.notifyListeners(a,c),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),EC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}i2.type="LOCAL";const Ku=i2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(n,e){return Bt(n,"POST","/v2/accounts/mfaSignIn:start",qt(n,e))}function jC(n,e){return Bt(n,"POST","/v2/accounts/mfaSignIn:finalize",qt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=500,RC=6e4,sf=1e12;class CC{constructor(e){this.auth=e,this.counter=sf,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new kC(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||sf;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||sf;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||sf;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class kC{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const a=typeof e=="string"?document.getElementById(e):e;be(a,"argument-error",{appName:t}),this.container=a,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=DC(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},RC)},IC))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function DC(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg=qN("rcb"),MC=new fd(3e4,6e4);class PC{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=rn().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return be(OC(t),e,"argument-error"),this.shouldResolveImmediately(t)&&uw(rn().grecaptcha)?Promise.resolve(rn().grecaptcha):new Promise((r,a)=>{const c=rn().setTimeout(()=>{a(cn(e,"network-request-failed"))},MC.get());rn()[Kg]=()=>{rn().clearTimeout(c),delete rn()[Kg];const f=rn().grecaptcha;if(!f||!uw(f)){a(cn(e,"internal-error"));return}const m=f.render;f.render=(x,y)=>{const v=m(x,y);return this.counter++,v},this.hostLanguage=t,r(f)};const u=`${aR()}?${sc({onload:Kg,render:"explicit",hl:t})}`;X0(u).catch(()=>{clearTimeout(c),a(cn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=rn().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function OC(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class VC{async load(e){return new CC(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="recaptcha",LC={theme:"light",type:"image"};let UC=class{constructor(e,t,r=Object.assign({},LC)){this.parameters=r,this.type=a2,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ut(e),this.isInvisible=this.parameters.size==="invisible",be(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const a=typeof t=="string"?document.getElementById(t):t;be(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new VC:new PC,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(a=>{const c=u=>{u&&(this.tokenChangeListeners.delete(c),a(u))};this.tokenChangeListeners.add(c),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){be(!this.parameters.sitekey,this.auth,"argument-error"),be(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),be(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=rn()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){be(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){be(Y0()&&!ix(),this.auth,"internal-error"),await FC(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await FI(this.auth);be(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return be(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function FC(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=ho._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function qC(n,e,t){if(Lt(n.app))return Promise.reject(yn(n));const r=Ut(n),a=await im(r,e,Le(t));return new ax(a,c=>tm(r,c))}async function BC(n,e,t){const r=Le(n);await em(!1,r,"phone");const a=await im(r.auth,e,Le(t));return new ax(a,c=>YN(r,c))}async function zC(n,e,t){const r=Le(n);if(Lt(r.auth.app))return Promise.reject(yn(r.auth));const a=await im(r.auth,e,Le(t));return new ax(a,c=>WN(r,c))}async function im(n,e,t){var r;const a=await t.verify();try{be(typeof a=="string",n,"argument-error"),be(t.type===a2,n,"argument-error");let c;if(typeof e=="string"?c={phoneNumber:e}:c=e,"session"in c){const u=c.session;if("phoneNumber"in c)return be(u.type==="enroll",n,"internal-error"),(await uC(n,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:c.phoneNumber,recaptchaToken:a}})).phoneSessionInfo.sessionInfo;{be(u.type==="signin",n,"internal-error");const f=((r=c.multiFactorHint)===null||r===void 0?void 0:r.uid)||c.multiFactorUid;return be(f,n,"missing-multi-factor-info"),(await AC(n,{mfaPendingCredential:u.credential,mfaEnrollmentId:f,phoneSignInInfo:{recaptchaToken:a}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:u}=await AR(n,{phoneNumber:c.phoneNumber,recaptchaToken:a});return u}}finally{t._reset()}}async function HC(n,e){const t=Le(n);if(Lt(t.auth.app))return Promise.reject(yn(t.auth));await J0(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let po=class pf{constructor(e){this.providerId=pf.PROVIDER_ID,this.auth=Ut(e)}verifyPhoneNumber(e,t){return im(this.auth,e,Le(t))}static credential(e,t){return ho._fromVerification(e,t)}static credentialFromResult(e){const t=e;return pf.credentialFromTaggedObject(t)}static credentialFromError(e){return pf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?ho._fromTokenResponse(t,r):null}};po.PROVIDER_ID="phone";po.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(n,e){return e?ys(e):(be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox extends ic{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function GC(n){return QN(n.auth,new ox(n),n.bypassAuthState)}function KC(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),$N(t,new ox(n),n.bypassAuthState)}async function $C(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),J0(t,new ox(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,t,r,a,c=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:c,error:u,type:f}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:c||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GC;case"linkViaPopup":case"linkViaRedirect":return $C;case"reauthViaPopup":case"reauthViaRedirect":return KC;default:In(this.auth,"internal-error")}}resolve(e){Ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=new fd(2e3,1e4);async function YC(n,e,t){if(Lt(n.app))return Promise.reject(cn(n,"operation-not-supported-in-this-environment"));const r=Ut(n);rc(n,e,ri);const a=Ao(r,t);return new Wr(r,"signInViaPopup",e,a).executeNotNull()}async function WC(n,e,t){const r=Le(n);if(Lt(r.auth.app))return Promise.reject(cn(r.auth,"operation-not-supported-in-this-environment"));rc(r.auth,e,ri);const a=Ao(r.auth,t);return new Wr(r.auth,"reauthViaPopup",e,a,r).executeNotNull()}async function XC(n,e,t){const r=Le(n);rc(r.auth,e,ri);const a=Ao(r.auth,t);return new Wr(r.auth,"linkViaPopup",e,a,r).executeNotNull()}class Wr extends o2{constructor(e,t,r,a,c){super(e,t,a,c),this.provider=r,this.authWindow=null,this.pollId=null,Wr.currentPopupAction&&Wr.currentPopupAction.cancel(),Wr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Ys(this.filter.length===1,"Popup operations only handle one event");const e=yd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QC.get())};e()}}Wr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC="pendingRedirect",Ru=new Map;class ZC extends o2{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ru.get(this.auth._key());if(!e){try{const r=await ek(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ru.set(this.auth._key(),e)}return this.bypassAuthState||Ru.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ek(n,e){const t=c2(e),r=l2(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}async function lx(n,e){return l2(n)._set(c2(e),"true")}function tk(){Ru.clear()}function cx(n,e){Ru.set(n._key(),e)}function l2(n){return ys(n._redirectPersistence)}function c2(n){return uo(JC,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(n,e,t){return sk(n,e,t)}async function sk(n,e,t){if(Lt(n.app))return Promise.reject(yn(n));const r=Ut(n);rc(n,e,ri),await r._initializationPromise;const a=Ao(r,t);return await lx(a,r),a._openRedirect(r,e,"signInViaRedirect")}function rk(n,e,t){return ik(n,e,t)}async function ik(n,e,t){const r=Le(n);if(rc(r.auth,e,ri),Lt(r.auth.app))return Promise.reject(yn(r.auth));await r.auth._initializationPromise;const a=Ao(r.auth,t);await lx(a,r.auth);const c=await u2(r);return a._openRedirect(r.auth,e,"reauthViaRedirect",c)}function ak(n,e,t){return ok(n,e,t)}async function ok(n,e,t){const r=Le(n);rc(r.auth,e,ri),await r.auth._initializationPromise;const a=Ao(r.auth,t);await em(!1,r,e.providerId),await lx(a,r.auth);const c=await u2(r);return a._openRedirect(r.auth,e,"linkViaRedirect",c)}async function lk(n,e){return await Ut(n)._initializationPromise,am(n,e,!1)}async function am(n,e,t=!1){if(Lt(n.app))return Promise.reject(yn(n));const r=Ut(n),a=Ao(r,e),u=await new ZC(r,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}async function u2(n){const e=yd(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck=600*1e3;class d2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!h2(e)){const a=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(cn(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ck&&this.cachedEventUids.clear(),this.cachedEventUids.has(_w(e))}saveEventToCache(e){this.cachedEventUids.add(_w(e)),this.lastProcessedEventTime=Date.now()}}function _w(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function h2({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function uk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return h2(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f2(n,e={}){return Bt(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hk=/^https?/;async function fk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await f2(n);for(const t of e)try{if(mk(t))return}catch{}In(n,"unauthorized-domain")}function mk(n){const e=Bu(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!hk.test(t))return!1;if(dk.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=new fd(3e4,6e4);function ww(){const n=rn().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function gk(n){return new Promise((e,t)=>{var r,a,c;function u(){ww(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ww(),t(cn(n,"network-request-failed"))},timeout:pk.get()})}if(!((a=(r=rn().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((c=rn().gapi)===null||c===void 0)&&c.load)u();else{const f=qN("iframefcb");return rn()[f]=()=>{gapi.load?u():t(cn(n,"network-request-failed"))},X0(`${lR()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw gf=null,e})}let gf=null;function xk(n){return gf=gf||gk(n),gf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=new fd(5e3,15e3),bk="__/auth/iframe",vk="emulator/auth/iframe",_k={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nk(n){const e=n.config;be(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?W0(e,vk):`https://${n.config.authDomain}/${bk}`,r={apiKey:e.apiKey,appName:n.name,v:pa},a=wk.get(n.config.apiHost);a&&(r.eid=a);const c=n._getFrameworks();return c.length&&(r.fw=c.join(",")),`${t}?${sc(r).slice(1)}`}async function Tk(n){const e=await xk(n),t=rn().gapi;return be(t,n,"internal-error"),e.open({where:document.body,url:Nk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_k,dontclear:!0},r=>new Promise(async(a,c)=>{await r.restyle({setHideOnLeave:!1});const u=cn(n,"network-request-failed"),f=rn().setTimeout(()=>{c(u)},yk.get());function m(){rn().clearTimeout(f),a(r)}r.ping(m).then(m,()=>{c(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Sk=500,Ak=600,jk="_blank",Ik="http://localhost";class Nw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Rk(n,e,t,r=Sk,a=Ak){const c=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const m=Object.assign(Object.assign({},Ek),{width:r.toString(),height:a.toString(),top:c,left:u}),x=Dt().toLowerCase();t&&(f=PN(x)?jk:t),DN(x)&&(e=e||Ik,m.scrollbars="yes");const y=Object.entries(m).reduce((E,[A,V])=>`${E}${A}=${V},`,"");if(JI(x)&&f!=="_self")return Ck(e||"",f),new Nw(null);const v=window.open(e||"",f,y);be(v,n,"popup-blocked");try{v.focus()}catch{}return new Nw(v)}function Ck(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk="__/auth/handler",Dk="emulator/auth/handler",Mk=encodeURIComponent("fac");async function o0(n,e,t,r,a,c){be(n.config.authDomain,n,"auth-domain-config-required"),be(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:pa,eventId:a};if(e instanceof ri){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",ij(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries(c||{}))u[y]=v}if(e instanceof ac){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(u.scopes=y.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const y of Object.keys(f))f[y]===void 0&&delete f[y];const m=await n._getAppCheckToken(),x=m?`#${Mk}=${encodeURIComponent(m)}`:"";return`${Pk(n)}?${sc(f).slice(1)}${x}`}function Pk({config:n}){return n.emulator?W0(n,Dk):`https://${n.authDomain}/${kk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="webStorageSupport";class Ok{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mo,this._completeRedirectFn=am,this._overrideRedirectResult=cx}async _openPopup(e,t,r,a){var c;Ys((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const u=await o0(e,t,r,Bu(),a);return Rk(e,u,yd())}async _openRedirect(e,t,r,a){await this._originValidation(e);const c=await o0(e,t,r,Bu(),a);return yC(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:c}=this.eventManagers[t];return a?Promise.resolve(a):(Ys(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Tk(e),r=new d2(e);return t.register("authEvent",a=>(be(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($g,{type:$g},a=>{var c;const u=(c=a==null?void 0:a[0])===null||c===void 0?void 0:c[$g];u!==void 0&&t(!!u),In(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return UN()||MN()||pd()}}const Vk=Ok;class Lk{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return mr("unexpected MultiFactorSessionType")}}}class ux extends Lk{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new ux(e)}_finalizeEnroll(e,t,r){return dC(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return jC(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class m2{constructor(){}static assertion(e){return ux._fromCredential(e)}}m2.FACTOR_ID="phone";var Tw="@firebase/auth",Ew="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qk(n){ia(new br("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=r.options;be(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FN(n)},x=new rR(r,a,c,m);return hR(x,t),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ia(new br("auth-internal",e=>{const t=Ut(e.getProvider("auth").getImmediate());return(r=>new Uk(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qs(Tw,Ew,Fk(n)),Qs(Tw,Ew,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=300;YA("authIdTokenMaxAge");function zk(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}iR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const c=cn("internal-error");c.customData=a,t(c)},r.type="text/javascript",r.charset="UTF-8",zk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qk("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=2e3;async function Gk(n,e,t){var r;const{BuildInfo:a}=go();Ys(e.sessionId,"AuthEvent did not contain a session ID");const c=await Wk(e.sessionId),u={};return pd()?u.ibi=a.packageName:md()?u.apn=a.packageName:In(n,"operation-not-supported-in-this-environment"),a.displayName&&(u.appDisplayName=a.displayName),u.sessionId=c,o0(n,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,u)}async function Kk(n){const{BuildInfo:e}=go(),t={};pd()?t.iosBundleId=e.packageName:md()?t.androidPackageName=e.packageName:In(n,"operation-not-supported-in-this-environment"),await f2(n,t)}function $k(n){const{cordova:e}=go();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let a=null;r?e.plugins.browsertab.openUrl(n):a=e.InAppBrowser.open(n,XI()?"_blank":"_system","location=yes"),t(a)})})}async function Qk(n,e,t){const{cordova:r}=go();let a=()=>{};try{await new Promise((c,u)=>{let f=null;function m(){var v;c();const E=(v=r.plugins.browsertab)===null||v===void 0?void 0:v.close;typeof E=="function"&&E(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function x(){f||(f=window.setTimeout(()=>{u(cn(n,"redirect-cancelled-by-user"))},Hk))}function y(){(document==null?void 0:document.visibilityState)==="visible"&&x()}e.addPassiveListener(m),document.addEventListener("resume",x,!1),md()&&document.addEventListener("visibilitychange",y,!1),a=()=>{e.removePassiveListener(m),document.removeEventListener("resume",x,!1),document.removeEventListener("visibilitychange",y,!1),f&&window.clearTimeout(f)}})}finally{a()}}function Yk(n){var e,t,r,a,c,u,f,m,x,y;const v=go();be(typeof((e=v==null?void 0:v.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),be(typeof((t=v==null?void 0:v.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),be(typeof((c=(a=(r=v==null?void 0:v.cordova)===null||r===void 0?void 0:r.plugins)===null||a===void 0?void 0:a.browsertab)===null||c===void 0?void 0:c.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),be(typeof((m=(f=(u=v==null?void 0:v.cordova)===null||u===void 0?void 0:u.plugins)===null||f===void 0?void 0:f.browsertab)===null||m===void 0?void 0:m.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),be(typeof((y=(x=v==null?void 0:v.cordova)===null||x===void 0?void 0:x.InAppBrowser)===null||y===void 0?void 0:y.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Wk(n){const e=Xk(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(a=>a.toString(16).padStart(2,"0")).join("")}function Xk(n){if(Ys(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk=20;class Zk extends d2{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function e5(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:s5(),postBody:null,tenantId:n.tenantId,error:cn(n,"no-auth-event")}}function t5(n,e){return l0()._set(c0(n),e)}async function Sw(n){const e=await l0()._get(c0(n));return e&&await l0()._remove(c0(n)),e}function n5(n,e){var t,r;const a=i5(e);if(a.includes("/__/auth/callback")){const c=xf(a),u=c.firebaseError?r5(decodeURIComponent(c.firebaseError)):null,f=(r=(t=u==null?void 0:u.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],m=f?cn(f):null;return m?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:m,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:a,postBody:null}}return null}function s5(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<Jk;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function l0(){return ys(rx)}function c0(n){return uo("authEvent",n.config.apiKey,n.name)}function r5(n){try{return JSON.parse(n)}catch{return null}}function i5(n){const e=xf(n),t=e.link?decodeURIComponent(e.link):void 0,r=xf(t).link,a=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return xf(a).link||a||r||t||n}function xf(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return kl(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5=500;class o5{constructor(){this._redirectPersistence=mo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=am,this._overrideRedirectResult=cx}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new Zk(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){In(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,a){Yk(e);const c=await this._initialize(e);await c.initialized(),c.resetRedirect(),tk(),await this._originValidation(e);const u=e5(e,r,a);await t5(e,u);const f=await Gk(e,u,t),m=await $k(f);return Qk(e,c,m)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Kk(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:a,BuildInfo:c}=go(),u=setTimeout(async()=>{await Sw(e),t.onEvent(Aw())},a5),f=async y=>{clearTimeout(u);const v=await Sw(e);let E=null;v&&(y!=null&&y.url)&&(E=n5(v,y.url)),t.onEvent(E||Aw())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,f);const m=a,x=`${c.packageName.toLowerCase()}://`;go().handleOpenURL=async y=>{if(y.toLowerCase().startsWith(x)&&f({url:y}),typeof m=="function")try{m(y)}catch(v){console.error(v)}}}}const l5=o5;function Aw(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:cn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(n,e){Ut(n)._logFramework(e)}var u5="@firebase/auth-compat",d5="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5=1e3;function Cu(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function f5(){return Cu()==="http:"||Cu()==="https:"}function p2(n=Dt()){return!!((Cu()==="file:"||Cu()==="ionic:"||Cu()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function m5(){return q0()||F0()}function p5(){return cN()&&(document==null?void 0:document.documentMode)===11}function g5(n=Dt()){return/Edge\/\d+/.test(n)}function x5(n=Dt()){return p5()||g5(n)}function g2(){try{const n=self.localStorage,e=yd();if(n)return n.setItem(e,"1"),n.removeItem(e),x5()?Lu():!0}catch{return dx()&&Lu()}return!1}function dx(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Qg(){return(f5()||lN()||p2())&&!m5()&&g2()&&!dx()}function x2(){return p2()&&typeof document<"u"}async function y5(){return x2()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},h5);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function b5(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs={LOCAL:"local",NONE:"none",SESSION:"session"},mu=be,y2="persistence";function v5(n,e){if(mu(Object.values(gs).includes(e),n,"invalid-persistence-type"),q0()){mu(e!==gs.SESSION,n,"unsupported-persistence-type");return}if(F0()){mu(e===gs.NONE,n,"unsupported-persistence-type");return}if(dx()){mu(e===gs.NONE||e===gs.LOCAL&&Lu(),n,"unsupported-persistence-type");return}mu(e===gs.NONE||g2(),n,"unsupported-persistence-type")}async function u0(n){await n._initializationPromise;const e=b2(),t=uo(y2,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function _5(n,e){const t=b2();if(!t)return[];const r=uo(y2,n,e);switch(t.getItem(r)){case gs.NONE:return[ql];case gs.LOCAL:return[Ku,mo];case gs.SESSION:return[mo];default:return[]}}function b2(){var n;try{return((n=b5())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5=be;class Zi{constructor(){this.browserResolver=ys(Vk),this.cordovaResolver=ys(l5),this.underlyingResolver=null,this._redirectPersistence=mo,this._completeRedirectFn=am,this._overrideRedirectResult=cx}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,a)}async _openRedirect(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,a)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return x2()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return w5(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await y5();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(n){return n.unwrap()}function N5(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(n){return _2(n)}function E5(n,e){var t;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const a=e;a.resolver=new S5(n,cC(n,e))}else if(r){const a=_2(e),c=e;a&&(c.credential=a,c.tenantId=r.tenantId||void 0,c.email=r.email||void 0,c.phoneNumber=r.phoneNumber||void 0)}}function _2(n){const{_tokenResponse:e}=n instanceof qn?n.customData:n;if(!e)return null;if(!(n instanceof qn)&&"temporaryProof"in e&&"phoneNumber"in e)return po.credentialFromResult(n);const t=e.providerId;if(!t||t===fu.PASSWORD)return null;let r;switch(t){case fu.GOOGLE:r=dr;break;case fu.FACEBOOK:r=ur;break;case fu.GITHUB:r=hr;break;case fu.TWITTER:r=fr;break;default:const{oauthIdToken:a,oauthAccessToken:c,oauthTokenSecret:u,pendingToken:f,nonce:m}=e;return!c&&!u&&!a&&!f?null:f?t.startsWith("saml.")?Bl._create(t,f):vr._fromParams({providerId:t,signInMethod:t,pendingToken:f,idToken:a,accessToken:c}):new Pl(t).credential({idToken:a,accessToken:c,rawNonce:m})}return n instanceof qn?r.credentialFromError(n):r.credentialFromResult(n)}function es(n,e){return e.catch(t=>{throw t instanceof qn&&E5(n,t),t}).then(t=>{const r=t.operationType,a=t.user;return{operationType:r,credential:T5(t),additionalUserInfo:lC(t),user:om.getOrCreate(a)}})}async function d0(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>es(n,t.confirm(r))}}class S5{constructor(e,t){this.resolver=t,this.auth=N5(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return es(v2(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let om=class Tu{constructor(e){this._delegate=e,this.multiFactor=fC(e)}static getOrCreate(e){return Tu.USER_MAP.has(e)||Tu.USER_MAP.set(e,new Tu(e)),Tu.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return es(this.auth,YN(this._delegate,e))}async linkWithPhoneNumber(e,t){return d0(this.auth,BC(this._delegate,e,t))}async linkWithPopup(e){return es(this.auth,XC(this._delegate,e,Zi))}async linkWithRedirect(e){return await u0(Ut(this.auth)),ak(this._delegate,e,Zi)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return es(this.auth,WN(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return d0(this.auth,zC(this._delegate,e,t))}reauthenticateWithPopup(e){return es(this.auth,WC(this._delegate,e,Zi))}async reauthenticateWithRedirect(e){return await u0(Ut(this.auth)),rk(this._delegate,e,Zi)}sendEmailVerification(e){return XR(this._delegate,e)}async unlink(e){return await VR(this._delegate,e),this}updateEmail(e){return tC(this._delegate,e)}updatePassword(e){return nC(this._delegate,e)}updatePhoneNumber(e){return HC(this._delegate,e)}updateProfile(e){return eC(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return JR(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};om.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=be;class h0{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;pu(r,"invalid-api-key",{appName:e.name}),pu(r,"invalid-api-key",{appName:e.name});const a=typeof window<"u"?Zi:void 0;this._delegate=t.initialize({options:{persistence:A5(r,e.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(RI),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?om.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){fR(this._delegate,e,t)}applyActionCode(e){return BR(this._delegate,e)}checkActionCode(e){return XN(this._delegate,e)}confirmPasswordReset(e,t){return qR(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return es(this._delegate,HR(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return WR(this._delegate,e)}isSignInWithEmailLink(e){return $R(this._delegate,e)}async getRedirectResult(){pu(Qg(),this._delegate,"operation-not-supported-in-this-environment");const e=await lk(this._delegate,Zi);return e?es(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){c5(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:a,error:c,complete:u}=jw(e,t,r);return this._delegate.onAuthStateChanged(a,c,u)}onIdTokenChanged(e,t,r){const{next:a,error:c,complete:u}=jw(e,t,r);return this._delegate.onIdTokenChanged(a,c,u)}sendSignInLinkToEmail(e,t){return KR(this._delegate,e,t)}sendPasswordResetEmail(e,t){return FR(this._delegate,e,t||void 0)}async setPersistence(e){v5(this._delegate,e);let t;switch(e){case gs.SESSION:t=mo;break;case gs.LOCAL:t=await ys(Ku)._isAvailable()?Ku:rx;break;case gs.NONE:t=ql;break;default:return In("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return es(this._delegate,OR(this._delegate))}signInWithCredential(e){return es(this._delegate,tm(this._delegate,e))}signInWithCustomToken(e){return es(this._delegate,UR(this._delegate,e))}signInWithEmailAndPassword(e,t){return es(this._delegate,GR(this._delegate,e,t))}signInWithEmailLink(e,t){return es(this._delegate,QR(this._delegate,e,t))}signInWithPhoneNumber(e,t){return d0(this._delegate,qC(this._delegate,e,t))}async signInWithPopup(e){return pu(Qg(),this._delegate,"operation-not-supported-in-this-environment"),es(this._delegate,YC(this._delegate,e,Zi))}async signInWithRedirect(e){return pu(Qg(),this._delegate,"operation-not-supported-in-this-environment"),await u0(this._delegate),nk(this._delegate,e,Zi)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return zR(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}h0.Persistence=gs;function jw(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const a=r;return{next:u=>a(u&&om.getOrCreate(u)),error:e,complete:t}}function A5(n,e){const t=_5(n,e);if(typeof self<"u"&&!t.includes(Ku)&&t.push(Ku),typeof window<"u")for(const r of[rx,mo])t.includes(r)||t.push(r);return t.includes(ql)||t.push(ql),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(){this.providerId="phone",this._delegate=new po(v2(xs.auth()))}static credential(e,t){return po.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}hx.PHONE_SIGN_IN_METHOD=po.PHONE_SIGN_IN_METHOD;hx.PROVIDER_ID=po.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=be;class I5{constructor(e,t,r=xs.app()){var a;j5((a=r.options)===null||a===void 0?void 0:a.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new UC(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5="auth-compat";function C5(n){n.INTERNAL.registerComponent(new br(R5,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new h0(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:vl.EMAIL_SIGNIN,PASSWORD_RESET:vl.PASSWORD_RESET,RECOVER_EMAIL:vl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:vl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:vl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:vl.VERIFY_EMAIL}},EmailAuthProvider:ga,FacebookAuthProvider:ur,GithubAuthProvider:hr,GoogleAuthProvider:dr,OAuthProvider:Pl,SAMLAuthProvider:Rf,PhoneAuthProvider:hx,PhoneMultiFactorGenerator:m2,RecaptchaVerifier:I5,TwitterAuthProvider:fr,Auth:h0,AuthCredential:ic,Error:qn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(u5,d5)}C5(xs);var Iw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fo,w2;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,T){function S(){}S.prototype=T.prototype,C.D=T.prototype,C.prototype=new S,C.prototype.constructor=C,C.C=function(N,I,D){for(var M=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)M[Te-2]=arguments[Te];return T.prototype[I].apply(N,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,T,S){S||(S=0);var N=Array(16);if(typeof T=="string")for(var I=0;16>I;++I)N[I]=T.charCodeAt(S++)|T.charCodeAt(S++)<<8|T.charCodeAt(S++)<<16|T.charCodeAt(S++)<<24;else for(I=0;16>I;++I)N[I]=T[S++]|T[S++]<<8|T[S++]<<16|T[S++]<<24;T=C.g[0],S=C.g[1],I=C.g[2];var D=C.g[3],M=T+(D^S&(I^D))+N[0]+3614090360&4294967295;T=S+(M<<7&4294967295|M>>>25),M=D+(I^T&(S^I))+N[1]+3905402710&4294967295,D=T+(M<<12&4294967295|M>>>20),M=I+(S^D&(T^S))+N[2]+606105819&4294967295,I=D+(M<<17&4294967295|M>>>15),M=S+(T^I&(D^T))+N[3]+3250441966&4294967295,S=I+(M<<22&4294967295|M>>>10),M=T+(D^S&(I^D))+N[4]+4118548399&4294967295,T=S+(M<<7&4294967295|M>>>25),M=D+(I^T&(S^I))+N[5]+1200080426&4294967295,D=T+(M<<12&4294967295|M>>>20),M=I+(S^D&(T^S))+N[6]+2821735955&4294967295,I=D+(M<<17&4294967295|M>>>15),M=S+(T^I&(D^T))+N[7]+4249261313&4294967295,S=I+(M<<22&4294967295|M>>>10),M=T+(D^S&(I^D))+N[8]+1770035416&4294967295,T=S+(M<<7&4294967295|M>>>25),M=D+(I^T&(S^I))+N[9]+2336552879&4294967295,D=T+(M<<12&4294967295|M>>>20),M=I+(S^D&(T^S))+N[10]+4294925233&4294967295,I=D+(M<<17&4294967295|M>>>15),M=S+(T^I&(D^T))+N[11]+2304563134&4294967295,S=I+(M<<22&4294967295|M>>>10),M=T+(D^S&(I^D))+N[12]+1804603682&4294967295,T=S+(M<<7&4294967295|M>>>25),M=D+(I^T&(S^I))+N[13]+4254626195&4294967295,D=T+(M<<12&4294967295|M>>>20),M=I+(S^D&(T^S))+N[14]+2792965006&4294967295,I=D+(M<<17&4294967295|M>>>15),M=S+(T^I&(D^T))+N[15]+1236535329&4294967295,S=I+(M<<22&4294967295|M>>>10),M=T+(I^D&(S^I))+N[1]+4129170786&4294967295,T=S+(M<<5&4294967295|M>>>27),M=D+(S^I&(T^S))+N[6]+3225465664&4294967295,D=T+(M<<9&4294967295|M>>>23),M=I+(T^S&(D^T))+N[11]+643717713&4294967295,I=D+(M<<14&4294967295|M>>>18),M=S+(D^T&(I^D))+N[0]+3921069994&4294967295,S=I+(M<<20&4294967295|M>>>12),M=T+(I^D&(S^I))+N[5]+3593408605&4294967295,T=S+(M<<5&4294967295|M>>>27),M=D+(S^I&(T^S))+N[10]+38016083&4294967295,D=T+(M<<9&4294967295|M>>>23),M=I+(T^S&(D^T))+N[15]+3634488961&4294967295,I=D+(M<<14&4294967295|M>>>18),M=S+(D^T&(I^D))+N[4]+3889429448&4294967295,S=I+(M<<20&4294967295|M>>>12),M=T+(I^D&(S^I))+N[9]+568446438&4294967295,T=S+(M<<5&4294967295|M>>>27),M=D+(S^I&(T^S))+N[14]+3275163606&4294967295,D=T+(M<<9&4294967295|M>>>23),M=I+(T^S&(D^T))+N[3]+4107603335&4294967295,I=D+(M<<14&4294967295|M>>>18),M=S+(D^T&(I^D))+N[8]+1163531501&4294967295,S=I+(M<<20&4294967295|M>>>12),M=T+(I^D&(S^I))+N[13]+2850285829&4294967295,T=S+(M<<5&4294967295|M>>>27),M=D+(S^I&(T^S))+N[2]+4243563512&4294967295,D=T+(M<<9&4294967295|M>>>23),M=I+(T^S&(D^T))+N[7]+1735328473&4294967295,I=D+(M<<14&4294967295|M>>>18),M=S+(D^T&(I^D))+N[12]+2368359562&4294967295,S=I+(M<<20&4294967295|M>>>12),M=T+(S^I^D)+N[5]+4294588738&4294967295,T=S+(M<<4&4294967295|M>>>28),M=D+(T^S^I)+N[8]+2272392833&4294967295,D=T+(M<<11&4294967295|M>>>21),M=I+(D^T^S)+N[11]+1839030562&4294967295,I=D+(M<<16&4294967295|M>>>16),M=S+(I^D^T)+N[14]+4259657740&4294967295,S=I+(M<<23&4294967295|M>>>9),M=T+(S^I^D)+N[1]+2763975236&4294967295,T=S+(M<<4&4294967295|M>>>28),M=D+(T^S^I)+N[4]+1272893353&4294967295,D=T+(M<<11&4294967295|M>>>21),M=I+(D^T^S)+N[7]+4139469664&4294967295,I=D+(M<<16&4294967295|M>>>16),M=S+(I^D^T)+N[10]+3200236656&4294967295,S=I+(M<<23&4294967295|M>>>9),M=T+(S^I^D)+N[13]+681279174&4294967295,T=S+(M<<4&4294967295|M>>>28),M=D+(T^S^I)+N[0]+3936430074&4294967295,D=T+(M<<11&4294967295|M>>>21),M=I+(D^T^S)+N[3]+3572445317&4294967295,I=D+(M<<16&4294967295|M>>>16),M=S+(I^D^T)+N[6]+76029189&4294967295,S=I+(M<<23&4294967295|M>>>9),M=T+(S^I^D)+N[9]+3654602809&4294967295,T=S+(M<<4&4294967295|M>>>28),M=D+(T^S^I)+N[12]+3873151461&4294967295,D=T+(M<<11&4294967295|M>>>21),M=I+(D^T^S)+N[15]+530742520&4294967295,I=D+(M<<16&4294967295|M>>>16),M=S+(I^D^T)+N[2]+3299628645&4294967295,S=I+(M<<23&4294967295|M>>>9),M=T+(I^(S|~D))+N[0]+4096336452&4294967295,T=S+(M<<6&4294967295|M>>>26),M=D+(S^(T|~I))+N[7]+1126891415&4294967295,D=T+(M<<10&4294967295|M>>>22),M=I+(T^(D|~S))+N[14]+2878612391&4294967295,I=D+(M<<15&4294967295|M>>>17),M=S+(D^(I|~T))+N[5]+4237533241&4294967295,S=I+(M<<21&4294967295|M>>>11),M=T+(I^(S|~D))+N[12]+1700485571&4294967295,T=S+(M<<6&4294967295|M>>>26),M=D+(S^(T|~I))+N[3]+2399980690&4294967295,D=T+(M<<10&4294967295|M>>>22),M=I+(T^(D|~S))+N[10]+4293915773&4294967295,I=D+(M<<15&4294967295|M>>>17),M=S+(D^(I|~T))+N[1]+2240044497&4294967295,S=I+(M<<21&4294967295|M>>>11),M=T+(I^(S|~D))+N[8]+1873313359&4294967295,T=S+(M<<6&4294967295|M>>>26),M=D+(S^(T|~I))+N[15]+4264355552&4294967295,D=T+(M<<10&4294967295|M>>>22),M=I+(T^(D|~S))+N[6]+2734768916&4294967295,I=D+(M<<15&4294967295|M>>>17),M=S+(D^(I|~T))+N[13]+1309151649&4294967295,S=I+(M<<21&4294967295|M>>>11),M=T+(I^(S|~D))+N[4]+4149444226&4294967295,T=S+(M<<6&4294967295|M>>>26),M=D+(S^(T|~I))+N[11]+3174756917&4294967295,D=T+(M<<10&4294967295|M>>>22),M=I+(T^(D|~S))+N[2]+718787259&4294967295,I=D+(M<<15&4294967295|M>>>17),M=S+(D^(I|~T))+N[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(I+(M<<21&4294967295|M>>>11))&4294967295,C.g[2]=C.g[2]+I&4294967295,C.g[3]=C.g[3]+D&4294967295}r.prototype.u=function(C,T){T===void 0&&(T=C.length);for(var S=T-this.blockSize,N=this.B,I=this.h,D=0;D<T;){if(I==0)for(;D<=S;)a(this,C,D),D+=this.blockSize;if(typeof C=="string"){for(;D<T;)if(N[I++]=C.charCodeAt(D++),I==this.blockSize){a(this,N),I=0;break}}else for(;D<T;)if(N[I++]=C[D++],I==this.blockSize){a(this,N),I=0;break}}this.h=I,this.o+=T},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;var S=8*this.o;for(T=C.length-8;T<C.length;++T)C[T]=S&255,S/=256;for(this.u(C),C=Array(16),T=S=0;4>T;++T)for(var N=0;32>N;N+=8)C[S++]=this.g[T]>>>N&255;return C};function c(C,T){var S=f;return Object.prototype.hasOwnProperty.call(S,C)?S[C]:S[C]=T(C)}function u(C,T){this.h=T;for(var S=[],N=!0,I=C.length-1;0<=I;I--){var D=C[I]|0;N&&D==T||(S[I]=D,N=!1)}this.g=S}var f={};function m(C){return-128<=C&&128>C?c(C,function(T){return new u([T|0],0>T?-1:0)}):new u([C|0],0>C?-1:0)}function x(C){if(isNaN(C)||!isFinite(C))return v;if(0>C)return O(x(-C));for(var T=[],S=1,N=0;C>=S;N++)T[N]=C/S|0,S*=4294967296;return new u(T,0)}function y(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return O(y(C.substring(1),T));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=x(Math.pow(T,8)),N=v,I=0;I<C.length;I+=8){var D=Math.min(8,C.length-I),M=parseInt(C.substring(I,I+D),T);8>D?(D=x(Math.pow(T,D)),N=N.j(D).add(x(M))):(N=N.j(S),N=N.add(x(M)))}return N}var v=m(0),E=m(1),A=m(16777216);n=u.prototype,n.m=function(){if(R(this))return-O(this).m();for(var C=0,T=1,S=0;S<this.g.length;S++){var N=this.i(S);C+=(0<=N?N:4294967296+N)*T,T*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(V(this))return"0";if(R(this))return"-"+O(this).toString(C);for(var T=x(Math.pow(C,6)),S=this,N="";;){var I=z(S,T).g;S=H(S,I.j(T));var D=((0<S.g.length?S.g[0]:S.h)>>>0).toString(C);if(S=I,V(S))return D+N;for(;6>D.length;)D="0"+D;N=D+N}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function V(C){if(C.h!=0)return!1;for(var T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function R(C){return C.h==-1}n.l=function(C){return C=H(this,C),R(C)?-1:V(C)?0:1};function O(C){for(var T=C.g.length,S=[],N=0;N<T;N++)S[N]=~C.g[N];return new u(S,~C.h).add(E)}n.abs=function(){return R(this)?O(this):this},n.add=function(C){for(var T=Math.max(this.g.length,C.g.length),S=[],N=0,I=0;I<=T;I++){var D=N+(this.i(I)&65535)+(C.i(I)&65535),M=(D>>>16)+(this.i(I)>>>16)+(C.i(I)>>>16);N=M>>>16,D&=65535,M&=65535,S[I]=M<<16|D}return new u(S,S[S.length-1]&-2147483648?-1:0)};function H(C,T){return C.add(O(T))}n.j=function(C){if(V(this)||V(C))return v;if(R(this))return R(C)?O(this).j(O(C)):O(O(this).j(C));if(R(C))return O(this.j(O(C)));if(0>this.l(A)&&0>C.l(A))return x(this.m()*C.m());for(var T=this.g.length+C.g.length,S=[],N=0;N<2*T;N++)S[N]=0;for(N=0;N<this.g.length;N++)for(var I=0;I<C.g.length;I++){var D=this.i(N)>>>16,M=this.i(N)&65535,Te=C.i(I)>>>16,Fe=C.i(I)&65535;S[2*N+2*I]+=M*Fe,ae(S,2*N+2*I),S[2*N+2*I+1]+=D*Fe,ae(S,2*N+2*I+1),S[2*N+2*I+1]+=M*Te,ae(S,2*N+2*I+1),S[2*N+2*I+2]+=D*Te,ae(S,2*N+2*I+2)}for(N=0;N<T;N++)S[N]=S[2*N+1]<<16|S[2*N];for(N=T;N<2*T;N++)S[N]=0;return new u(S,0)};function ae(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function ee(C,T){this.g=C,this.h=T}function z(C,T){if(V(T))throw Error("division by zero");if(V(C))return new ee(v,v);if(R(C))return T=z(O(C),T),new ee(O(T.g),O(T.h));if(R(T))return T=z(C,O(T)),new ee(O(T.g),T.h);if(30<C.g.length){if(R(C)||R(T))throw Error("slowDivide_ only works with positive integers.");for(var S=E,N=T;0>=N.l(C);)S=F(S),N=F(N);var I=G(S,1),D=G(N,1);for(N=G(N,2),S=G(S,2);!V(N);){var M=D.add(N);0>=M.l(C)&&(I=I.add(S),D=M),N=G(N,1),S=G(S,1)}return T=H(C,I.j(T)),new ee(I,T)}for(I=v;0<=C.l(T);){for(S=Math.max(1,Math.floor(C.m()/T.m())),N=Math.ceil(Math.log(S)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),D=x(S),M=D.j(T);R(M)||0<M.l(C);)S-=N,D=x(S),M=D.j(T);V(D)&&(D=E),I=I.add(D),C=H(C,M)}return new ee(I,C)}n.A=function(C){return z(this,C).h},n.and=function(C){for(var T=Math.max(this.g.length,C.g.length),S=[],N=0;N<T;N++)S[N]=this.i(N)&C.i(N);return new u(S,this.h&C.h)},n.or=function(C){for(var T=Math.max(this.g.length,C.g.length),S=[],N=0;N<T;N++)S[N]=this.i(N)|C.i(N);return new u(S,this.h|C.h)},n.xor=function(C){for(var T=Math.max(this.g.length,C.g.length),S=[],N=0;N<T;N++)S[N]=this.i(N)^C.i(N);return new u(S,this.h^C.h)};function F(C){for(var T=C.g.length+1,S=[],N=0;N<T;N++)S[N]=C.i(N)<<1|C.i(N-1)>>>31;return new u(S,C.h)}function G(C,T){var S=T>>5;T%=32;for(var N=C.g.length-S,I=[],D=0;D<N;D++)I[D]=0<T?C.i(D+S)>>>T|C.i(D+S+1)<<32-T:C.i(D+S);return new u(I,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,w2=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=x,u.fromString=y,fo=u}).apply(typeof Iw<"u"?Iw:typeof self<"u"?self:typeof window<"u"?window:{});var rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var N2,Eu,T2,yf,f0,E2,S2,A2;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,b,w){return h==Array.prototype||h==Object.prototype||(h[b]=w.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof rf=="object"&&rf];for(var b=0;b<h.length;++b){var w=h[b];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function a(h,b){if(b)e:{var w=r;h=h.split(".");for(var k=0;k<h.length-1;k++){var Q=h[k];if(!(Q in w))break e;w=w[Q]}h=h[h.length-1],k=w[h],b=b(k),b!=k&&b!=null&&e(w,h,{configurable:!0,writable:!0,value:b})}}function c(h,b){h instanceof String&&(h+="");var w=0,k=!1,Q={next:function(){if(!k&&w<h.length){var re=w++;return{value:b(re,h[re]),done:!1}}return k=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}a("Array.prototype.values",function(h){return h||function(){return c(this,function(b,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function m(h){var b=typeof h;return b=b!="object"?b:h?Array.isArray(h)?"array":b:"null",b=="array"||b=="object"&&typeof h.length=="number"}function x(h){var b=typeof h;return b=="object"&&h!=null||b=="function"}function y(h,b,w){return h.call.apply(h.bind,arguments)}function v(h,b,w){if(!h)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,k),h.apply(b,Q)}}return function(){return h.apply(b,arguments)}}function E(h,b,w){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,E.apply(null,arguments)}function A(h,b){var w=Array.prototype.slice.call(arguments,1);return function(){var k=w.slice();return k.push.apply(k,arguments),h.apply(this,k)}}function V(h,b){function w(){}w.prototype=b.prototype,h.aa=b.prototype,h.prototype=new w,h.prototype.constructor=h,h.Qb=function(k,Q,re){for(var _e=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)_e[ut-2]=arguments[ut];return b.prototype[Q].apply(k,_e)}}function R(h){const b=h.length;if(0<b){const w=Array(b);for(let k=0;k<b;k++)w[k]=h[k];return w}return[]}function O(h,b){for(let w=1;w<arguments.length;w++){const k=arguments[w];if(m(k)){const Q=h.length||0,re=k.length||0;h.length=Q+re;for(let _e=0;_e<re;_e++)h[Q+_e]=k[_e]}else h.push(k)}}class H{constructor(b,w){this.i=b,this.j=w,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function ae(h){return/^[\s\xa0]*$/.test(h)}function ee(){var h=f.navigator;return h&&(h=h.userAgent)?h:""}function z(h){return z[" "](h),h}z[" "]=function(){};var F=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function G(h,b,w){for(const k in h)b.call(w,h[k],k,h)}function C(h,b){for(const w in h)b.call(void 0,h[w],w,h)}function T(h){const b={};for(const w in h)b[w]=h[w];return b}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(h,b){let w,k;for(let Q=1;Q<arguments.length;Q++){k=arguments[Q];for(w in k)h[w]=k[w];for(let re=0;re<S.length;re++)w=S[re],Object.prototype.hasOwnProperty.call(k,w)&&(h[w]=k[w])}}function I(h){var b=1;h=h.split(":");const w=[];for(;0<b&&h.length;)w.push(h.shift()),b--;return h.length&&w.push(h.join(":")),w}function D(h){f.setTimeout(()=>{throw h},0)}function M(){var h=Re;let b=null;return h.g&&(b=h.g,h.g=h.g.next,h.g||(h.h=null),b.next=null),b}class Te{constructor(){this.h=this.g=null}add(b,w){const k=Fe.get();k.set(b,w),this.h?this.h.next=k:this.g=k,this.h=k}}var Fe=new H(()=>new Y,h=>h.reset());class Y{constructor(){this.next=this.g=this.h=null}set(b,w){this.h=b,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let le,ye=!1,Re=new Te,qe=()=>{const h=f.Promise.resolve(void 0);le=()=>{h.then(P)}};var P=()=>{for(var h;h=M();){try{h.h.call(h.g)}catch(w){D(w)}var b=Fe;b.j(h),100>b.h&&(b.h++,h.next=b.g,b.g=h)}ye=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(h,b){this.type=h,this.g=this.target=b,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var ve=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var h=!1,b=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};f.addEventListener("test",w,b),f.removeEventListener("test",w,b)}catch{}return h})();function we(h,b){if(ce.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var w=this.type=h.type,k=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=b,b=h.relatedTarget){if(F){e:{try{z(b.nodeName);var Q=!0;break e}catch{}Q=!1}Q||(b=null)}}else w=="mouseover"?b=h.fromElement:w=="mouseout"&&(b=h.toElement);this.relatedTarget=b,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:q[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&we.aa.h.call(this)}}V(we,ce);var q={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var me="closure_listenable_"+(1e6*Math.random()|0),Ee=0;function ke(h,b,w,k,Q){this.listener=h,this.proxy=null,this.src=b,this.type=w,this.capture=!!k,this.ha=Q,this.key=++Ee,this.da=this.fa=!1}function $e(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Xt(h){this.src=h,this.g={},this.h=0}Xt.prototype.add=function(h,b,w,k,Q){var re=h.toString();h=this.g[re],h||(h=this.g[re]=[],this.h++);var _e=De(h,b,k,Q);return-1<_e?(b=h[_e],w||(b.fa=!1)):(b=new ke(b,this.src,re,!!k,Q),b.fa=w,h.push(b)),b};function ie(h,b){var w=b.type;if(w in h.g){var k=h.g[w],Q=Array.prototype.indexOf.call(k,b,void 0),re;(re=0<=Q)&&Array.prototype.splice.call(k,Q,1),re&&($e(b),h.g[w].length==0&&(delete h.g[w],h.h--))}}function De(h,b,w,k){for(var Q=0;Q<h.length;++Q){var re=h[Q];if(!re.da&&re.listener==b&&re.capture==!!w&&re.ha==k)return Q}return-1}var Tt="closure_lm_"+(1e6*Math.random()|0),zt={};function Ws(h,b,w,k,Q){if(Array.isArray(b)){for(var re=0;re<b.length;re++)Ws(h,b[re],w,k,Q);return null}return w=Ht(w),h&&h[me]?h.K(b,w,x(k)?!!k.capture:!1,Q):li(h,b,w,!1,k,Q)}function li(h,b,w,k,Q,re){if(!b)throw Error("Invalid event type");var _e=x(Q)?!!Q.capture:!!Q,ut=vs(h);if(ut||(h[Tt]=ut=new Xt(h)),w=ut.add(b,w,k,_e,re),w.proxy)return w;if(k=Xs(),w.proxy=k,k.src=h,k.listener=w,h.addEventListener)ve||(Q=_e),Q===void 0&&(Q=!1),h.addEventListener(b.toString(),k,Q);else if(h.attachEvent)h.attachEvent(Ls(b.toString()),k);else if(h.addListener&&h.removeListener)h.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Xs(){function h(w){return b.call(h.src,h.listener,w)}const b=_a;return h}function Os(h,b,w,k,Q){if(Array.isArray(b))for(var re=0;re<b.length;re++)Os(h,b[re],w,k,Q);else k=x(k)?!!k.capture:!!k,w=Ht(w),h&&h[me]?(h=h.i,b=String(b).toString(),b in h.g&&(re=h.g[b],w=De(re,w,k,Q),-1<w&&($e(re[w]),Array.prototype.splice.call(re,w,1),re.length==0&&(delete h.g[b],h.h--)))):h&&(h=vs(h))&&(b=h.g[b.toString()],h=-1,b&&(h=De(b,w,k,Q)),(w=-1<h?b[h]:null)&&Vs(w))}function Vs(h){if(typeof h!="number"&&h&&!h.da){var b=h.src;if(b&&b[me])ie(b.i,h);else{var w=h.type,k=h.proxy;b.removeEventListener?b.removeEventListener(w,k,h.capture):b.detachEvent?b.detachEvent(Ls(w),k):b.addListener&&b.removeListener&&b.removeListener(k),(w=vs(b))?(ie(w,h),w.h==0&&(w.src=null,b[Tt]=null)):$e(h)}}}function Ls(h){return h in zt?zt[h]:zt[h]="on"+h}function _a(h,b){if(h.da)h=!0;else{b=new we(b,this);var w=h.listener,k=h.ha||h.src;h.fa&&Vs(h),h=w.call(k,b)}return h}function vs(h){return h=h[Tt],h instanceof Xt?h:null}var Mt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ht(h){return typeof h=="function"?h:(h[Mt]||(h[Mt]=function(b){return h.handleEvent(b)}),h[Mt])}function Rt(){$.call(this),this.i=new Xt(this),this.M=this,this.F=null}V(Rt,$),Rt.prototype[me]=!0,Rt.prototype.removeEventListener=function(h,b,w,k){Os(this,h,b,w,k)};function Ct(h,b){var w,k=h.F;if(k)for(w=[];k;k=k.F)w.push(k);if(h=h.M,k=b.type||b,typeof b=="string")b=new ce(b,h);else if(b instanceof ce)b.target=b.target||h;else{var Q=b;b=new ce(k,h),N(b,Q)}if(Q=!0,w)for(var re=w.length-1;0<=re;re--){var _e=b.g=w[re];Q=is(_e,k,!0,b)&&Q}if(_e=b.g=h,Q=is(_e,k,!0,b)&&Q,Q=is(_e,k,!1,b)&&Q,w)for(re=0;re<w.length;re++)_e=b.g=w[re],Q=is(_e,k,!1,b)&&Q}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var h=this.i,b;for(b in h.g){for(var w=h.g[b],k=0;k<w.length;k++)$e(w[k]);delete h.g[b],h.h--}}this.F=null},Rt.prototype.K=function(h,b,w,k){return this.i.add(String(h),b,!1,w,k)},Rt.prototype.L=function(h,b,w,k){return this.i.add(String(h),b,!0,w,k)};function is(h,b,w,k){if(b=h.i.g[String(b)],!b)return!0;b=b.concat();for(var Q=!0,re=0;re<b.length;++re){var _e=b[re];if(_e&&!_e.da&&_e.capture==w){var ut=_e.listener,Jt=_e.ha||_e.src;_e.fa&&ie(h.i,_e),Q=ut.call(Jt,k)!==!1&&Q}}return Q&&!k.defaultPrevented}function Mo(h,b,w){if(typeof h=="function")w&&(h=E(h,w));else if(h&&typeof h.handleEvent=="function")h=E(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:f.setTimeout(h,b||0)}function wa(h){h.g=Mo(()=>{h.g=null,h.i&&(h.i=!1,wa(h))},h.l);const b=h.h;h.h=null,h.m.apply(null,b)}class pc extends ${constructor(b,w){super(),this.m=b,this.l=w,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:wa(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tr(h){$.call(this),this.h=h,this.g={}}V(Tr,$);var Us=[];function dn(h){G(h.g,function(b,w){this.g.hasOwnProperty(w)&&Vs(b)},h),h.g={}}Tr.prototype.N=function(){Tr.aa.N.call(this),dn(this)},Tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gn=f.JSON.stringify,bn=f.JSON.parse,gc=class{stringify(h){return f.JSON.stringify(h,void 0)}parse(h){return f.JSON.parse(h,void 0)}};function Na(){}Na.prototype.h=null;function Po(h){return h.h||(h.h=h.i())}function Er(){}var _s={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Js(){ce.call(this,"d")}V(Js,ce);function as(){ce.call(this,"c")}V(as,ce);var Kn={},Zs=null;function ci(){return Zs=Zs||new Rt}Kn.La="serverreachability";function Ta(h){ce.call(this,Kn.La,h)}V(Ta,ce);function Fs(h){const b=ci();Ct(b,new Ta(b))}Kn.STAT_EVENT="statevent";function er(h,b){ce.call(this,Kn.STAT_EVENT,h),this.stat=b}V(er,ce);function an(h){const b=ci();Ct(b,new er(b,h))}Kn.Ma="timingevent";function Ea(h,b){ce.call(this,Kn.Ma,h),this.size=b}V(Ea,ce);function qs(h,b){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){h()},b)}function ws(){this.g=!0}ws.prototype.xa=function(){this.g=!1};function ui(h,b,w,k,Q,re){h.info(function(){if(h.g)if(re)for(var _e="",ut=re.split("&"),Jt=0;Jt<ut.length;Jt++){var Qe=ut[Jt].split("=");if(1<Qe.length){var fn=Qe[0];Qe=Qe[1];var mn=fn.split("_");_e=2<=mn.length&&mn[1]=="type"?_e+(fn+"="+Qe+"&"):_e+(fn+"=redacted&")}}else _e=null;else _e=re;return"XMLHTTP REQ ("+k+") [attempt "+Q+"]: "+b+`
`+w+`
`+_e})}function te(h,b,w,k,Q,re,_e){h.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+Q+"]: "+b+`
`+w+`
`+re+" "+_e})}function xe(h,b,w,k){h.info(function(){return"XMLHTTP TEXT ("+b+"): "+de(h,w)+(k?" "+k:"")})}function he(h,b){h.info(function(){return"TIMEOUT: "+b})}ws.prototype.info=function(){};function de(h,b){if(!h.g)return b;if(!b)return null;try{var w=JSON.parse(b);if(w){for(h=0;h<w.length;h++)if(Array.isArray(w[h])){var k=w[h];if(!(2>k.length)){var Q=k[1];if(Array.isArray(Q)&&!(1>Q.length)){var re=Q[0];if(re!="noop"&&re!="stop"&&re!="close")for(var _e=1;_e<Q.length;_e++)Q[_e]=""}}}}return Gn(w)}catch{return b}}var Ve={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vn;function di(){}V(di,Na),di.prototype.g=function(){return new XMLHttpRequest},di.prototype.i=function(){return{}},vn=new di;function tr(h,b,w,k){this.j=h,this.i=b,this.l=w,this.R=k||1,this.U=new Tr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Md}function Md(){this.i=null,this.g="",this.h=!1}var xc={},Sr={};function Sa(h,b,w){h.L=1,h.v=Ia(Pt(b)),h.m=w,h.P=!0,Ar(h,null)}function Ar(h,b){h.F=Date.now(),Bs(h),h.A=Pt(h.v);var w=h.A,k=h.R;Array.isArray(k)||(k=[String(k)]),Rr(w.i,"t",k),h.C=0,w=h.j.J,h.h=new Md,h.g=Wd(h.j,w?b:null,!h.m),0<h.O&&(h.M=new pc(E(h.Y,h,h.g),h.O)),b=h.U,w=h.g,k=h.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(Us[0]=Q.toString()),Q=Us);for(var re=0;re<Q.length;re++){var _e=Ws(w,Q[re],k||b.handleEvent,!1,b.h||b);if(!_e)break;b.g[_e.key]=_e}b=h.H?T(h.H):{},h.m?(h.u||(h.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,b)):(h.u="GET",h.g.ea(h.A,h.u,null,b)),Fs(),ui(h.i,h.u,h.A,h.l,h.R,h.m)}tr.prototype.ca=function(h){h=h.target;const b=this.M;b&&On(h)==3?b.j():this.Y(h)},tr.prototype.Y=function(h){try{if(h==this.g)e:{const mn=On(this.g);var b=this.g.Ba();const Ti=this.g.Z();if(!(3>mn)&&(mn!=3||this.g&&(this.h.h||this.g.oa()||ka(this.g)))){this.J||mn!=4||b==7||(b==8||0>=Ti?Fs(3):Fs(2)),Oo(this);var w=this.g.Z();this.X=w;t:if(jr(this)){var k=ka(this.g);h="";var Q=k.length,re=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mn(this),hi(this);var _e="";break t}this.h.i=new f.TextDecoder}for(b=0;b<Q;b++)this.h.h=!0,h+=this.h.i.decode(k[b],{stream:!(re&&b==Q-1)});k.length=0,this.h.g+=h,this.C=0,_e=this.h.g}else _e=this.g.oa();if(this.o=w==200,te(this.i,this.u,this.A,this.l,this.R,mn,w),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,Jt=this.g;if((ut=Jt.g?Jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ae(ut)){var Qe=ut;break t}}Qe=null}if(w=Qe)xe(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nr(this,w);else{this.o=!1,this.s=3,an(12),Mn(this),hi(this);break e}}if(this.P){w=!0;let Qn;for(;!this.J&&this.C<_e.length;)if(Qn=Aa(this,_e),Qn==Sr){mn==4&&(this.s=4,an(14),w=!1),xe(this.i,this.l,null,"[Incomplete Response]");break}else if(Qn==xc){this.s=4,an(15),xe(this.i,this.l,_e,"[Invalid Chunk]"),w=!1;break}else xe(this.i,this.l,Qn,null),nr(this,Qn);if(jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mn!=4||_e.length!=0||this.h.h||(this.s=1,an(16),w=!1),this.o=this.o&&w,!w)xe(this.i,this.l,_e,"[Invalid Chunked Response]"),Mn(this),hi(this);else if(0<_e.length&&!this.W){this.W=!0;var fn=this.j;fn.g==this&&fn.ba&&!fn.M&&(fn.j.info("Great, no buffering proxy detected. Bytes received: "+_e.length),jc(fn),fn.M=!0,an(11))}}else xe(this.i,this.l,_e,null),nr(this,_e);mn==4&&Mn(this),this.o&&!this.J&&(mn==4?$d(this.j,this):(this.o=!1,Bs(this)))}else qd(this.g),w==400&&0<_e.indexOf("Unknown SID")?(this.s=3,an(12)):(this.s=0,an(13)),Mn(this),hi(this)}}}catch{}finally{}};function jr(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Aa(h,b){var w=h.C,k=b.indexOf(`
`,w);return k==-1?Sr:(w=Number(b.substring(w,k)),isNaN(w)?xc:(k+=1,k+w>b.length?Sr:(b=b.slice(k,k+w),h.C=k+w,b)))}tr.prototype.cancel=function(){this.J=!0,Mn(this)};function Bs(h){h.S=Date.now()+h.I,Gt(h,h.I)}function Gt(h,b){if(h.B!=null)throw Error("WatchDog timer not null");h.B=qs(E(h.ba,h),b)}function Oo(h){h.B&&(f.clearTimeout(h.B),h.B=null)}tr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(he(this.i,this.A),this.L!=2&&(Fs(),an(17)),Mn(this),this.s=2,hi(this)):Gt(this,this.S-h)};function hi(h){h.j.G==0||h.J||$d(h.j,h)}function Mn(h){Oo(h);var b=h.M;b&&typeof b.ma=="function"&&b.ma(),h.M=null,dn(h.U),h.g&&(b=h.g,h.g=null,b.abort(),b.ma())}function nr(h,b){try{var w=h.j;if(w.G!=0&&(w.g==h||fi(w.h,h))){if(!h.K&&fi(w.h,h)&&w.G==3){try{var k=w.Da.g.parse(b)}catch{k=null}if(Array.isArray(k)&&k.length==3){var Q=k;if(Q[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<h.F)wi(w),_i(w);else break e;Ac(w),an(18)}}else w.za=Q[1],0<w.za-w.T&&37500>Q[2]&&w.F&&w.v==0&&!w.C&&(w.C=qs(E(w.Za,w),6e3));if(1>=Pd(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else kr(w,11)}else if((h.K||w.g==h)&&wi(w),!ae(b))for(Q=w.Da.g.parse(b),b=0;b<Q.length;b++){let Qe=Q[b];if(w.T=Qe[0],Qe=Qe[1],w.G==2)if(Qe[0]=="c"){w.K=Qe[1],w.ia=Qe[2];const fn=Qe[3];fn!=null&&(w.la=fn,w.j.info("VER="+w.la));const mn=Qe[4];mn!=null&&(w.Aa=mn,w.j.info("SVER="+w.Aa));const Ti=Qe[5];Ti!=null&&typeof Ti=="number"&&0<Ti&&(k=1.5*Ti,w.L=k,w.j.info("backChannelRequestTimeoutMs_="+k)),k=w;const Qn=h.g;if(Qn){const Pa=Qn.g?Qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pa){var re=k.h;re.g||Pa.indexOf("spdy")==-1&&Pa.indexOf("quic")==-1&&Pa.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(mi(re,re.h),re.h=null))}if(k.D){const Dr=Qn.g?Qn.g.getResponseHeader("X-HTTP-Session-Id"):null;Dr&&(k.ya=Dr,it(k.I,k.D,Dr))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-h.F,w.j.info("Handshake RTT: "+w.R+"ms")),k=w;var _e=h;if(k.qa=Yd(k,k.J?k.ia:null,k.W),_e.K){Ns(k.h,_e);var ut=_e,Jt=k.L;Jt&&(ut.I=Jt),ut.B&&(Oo(ut),Bs(ut)),k.g=_e}else Gd(k);0<w.i.length&&Ho(w)}else Qe[0]!="stop"&&Qe[0]!="close"||kr(w,7);else w.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?kr(w,7):Ec(w):Qe[0]!="noop"&&w.l&&w.l.ta(Qe),w.v=0)}}Fs(4)}catch{}}var Mm=class{constructor(h,b){this.g=h,this.map=b}};function yc(h){this.l=h||10,f.PerformanceNavigationTiming?(h=f.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Pd(h){return h.h?1:h.g?h.g.size:0}function fi(h,b){return h.h?h.h==b:h.g?h.g.has(b):!1}function mi(h,b){h.g?h.g.add(b):h.h=b}function Ns(h,b){h.h&&h.h==b?h.h=null:h.g&&h.g.has(b)&&h.g.delete(b)}yc.prototype.cancel=function(){if(this.i=Pn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Pn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let b=h.i;for(const w of h.g.values())b=b.concat(w.D);return b}return R(h.i)}function Od(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var b=[],w=h.length,k=0;k<w;k++)b.push(h[k]);return b}b=[],w=0;for(k in h)b[w++]=h[k];return b}function Pm(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var b=[];h=h.length;for(var w=0;w<h;w++)b.push(w);return b}b=[],w=0;for(const k in h)b[w++]=k;return b}}}function Vo(h,b){if(h.forEach&&typeof h.forEach=="function")h.forEach(b,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,b,void 0);else for(var w=Pm(h),k=Od(h),Q=k.length,re=0;re<Q;re++)b.call(void 0,k[re],w&&w[re],h)}var vc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lo(h,b){if(h){h=h.split("&");for(var w=0;w<h.length;w++){var k=h[w].indexOf("="),Q=null;if(0<=k){var re=h[w].substring(0,k);Q=h[w].substring(k+1)}else re=h[w];b(re,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Ir(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ir){this.h=h.h,pi(this,h.j),this.o=h.o,this.g=h.g,ja(this,h.s),this.l=h.l;var b=h.i,w=new sr;w.i=b.i,b.g&&(w.g=new Map(b.g),w.h=b.h),Uo(this,w),this.m=h.m}else h&&(b=String(h).match(vc))?(this.h=!1,pi(this,b[1]||"",!0),this.o=gi(b[2]||""),this.g=gi(b[3]||"",!0),ja(this,b[4]),this.l=gi(b[5]||"",!0),Uo(this,b[6]||"",!0),this.m=gi(b[7]||"")):(this.h=!1,this.i=new sr(null,this.h))}Ir.prototype.toString=function(){var h=[],b=this.j;b&&h.push(Ts(b,_c,!0),":");var w=this.g;return(w||b=="file")&&(h.push("//"),(b=this.o)&&h.push(Ts(b,_c,!0),"@"),h.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&h.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Ts(w,w.charAt(0)=="/"?wc:Vd,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Ts(w,Lm)),h.join("")};function Pt(h){return new Ir(h)}function pi(h,b,w){h.j=w?gi(b,!0):b,h.j&&(h.j=h.j.replace(/:$/,""))}function ja(h,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);h.s=b}else h.s=null}function Uo(h,b,w){b instanceof sr?(h.i=b,Ld(h.i,h.h)):(w||(b=Ts(b,Vm)),h.i=new sr(b,h.h))}function it(h,b,w){h.i.set(b,w)}function Ia(h){return it(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function gi(h,b){return h?b?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ts(h,b,w){return typeof h=="string"?(h=encodeURI(h).replace(b,Om),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Om(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var _c=/[#\/\?@]/g,Vd=/[#\?:]/g,wc=/[#\?]/g,Vm=/[#\?@]/g,Lm=/#/g;function sr(h,b){this.h=this.g=null,this.i=h||null,this.j=!!b}function hn(h){h.g||(h.g=new Map,h.h=0,h.i&&Lo(h.i,function(b,w){h.add(decodeURIComponent(b.replace(/\+/g," ")),w)}))}n=sr.prototype,n.add=function(h,b){hn(this),this.i=null,h=os(this,h);var w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(b),this.h+=1,this};function Fo(h,b){hn(h),b=os(h,b),h.g.has(b)&&(h.i=null,h.h-=h.g.get(b).length,h.g.delete(b))}function qo(h,b){return hn(h),b=os(h,b),h.g.has(b)}n.forEach=function(h,b){hn(this),this.g.forEach(function(w,k){w.forEach(function(Q){h.call(b,Q,k,this)},this)},this)},n.na=function(){hn(this);const h=Array.from(this.g.values()),b=Array.from(this.g.keys()),w=[];for(let k=0;k<b.length;k++){const Q=h[k];for(let re=0;re<Q.length;re++)w.push(b[k])}return w},n.V=function(h){hn(this);let b=[];if(typeof h=="string")qo(this,h)&&(b=b.concat(this.g.get(os(this,h))));else{h=Array.from(this.g.values());for(let w=0;w<h.length;w++)b=b.concat(h[w])}return b},n.set=function(h,b){return hn(this),this.i=null,h=os(this,h),qo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[b]),this.h+=1,this},n.get=function(h,b){return h?(h=this.V(h),0<h.length?String(h[0]):b):b};function Rr(h,b,w){Fo(h,b),0<w.length&&(h.i=null,h.g.set(os(h,b),R(w)),h.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],b=Array.from(this.g.keys());for(var w=0;w<b.length;w++){var k=b[w];const re=encodeURIComponent(String(k)),_e=this.V(k);for(k=0;k<_e.length;k++){var Q=re;_e[k]!==""&&(Q+="="+encodeURIComponent(String(_e[k]))),h.push(Q)}}return this.i=h.join("&")};function os(h,b){return b=String(b),h.j&&(b=b.toLowerCase()),b}function Ld(h,b){b&&!h.j&&(hn(h),h.i=null,h.g.forEach(function(w,k){var Q=k.toLowerCase();k!=Q&&(Fo(this,k),Rr(this,Q,w))},h)),h.j=b}function Nc(h,b){const w=new ws;if(f.Image){const k=new Image;k.onload=A($n,w,"TestLoadImage: loaded",!0,b,k),k.onerror=A($n,w,"TestLoadImage: error",!1,b,k),k.onabort=A($n,w,"TestLoadImage: abort",!1,b,k),k.ontimeout=A($n,w,"TestLoadImage: timeout",!1,b,k),f.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=h}else b(!1)}function Ud(h,b){const w=new ws,k=new AbortController,Q=setTimeout(()=>{k.abort(),$n(w,"TestPingServer: timeout",!1,b)},1e4);fetch(h,{signal:k.signal}).then(re=>{clearTimeout(Q),re.ok?$n(w,"TestPingServer: ok",!0,b):$n(w,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(Q),$n(w,"TestPingServer: error",!1,b)})}function $n(h,b,w,k,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),k(w)}catch{}}function zs(){this.g=new gc}function Tc(h,b,w){const k=w||"";try{Vo(h,function(Q,re){let _e=Q;x(Q)&&(_e=Gn(Q)),b.push(k+re+"="+encodeURIComponent(_e))})}catch(Q){throw b.push(k+"type="+encodeURIComponent("_badmap")),Q}}function rr(h){this.l=h.Ub||null,this.j=h.eb||!1}V(rr,Na),rr.prototype.g=function(){return new ls(this.l,this.j)},rr.prototype.i=(function(h){return function(){return h}})({});function ls(h,b){Rt.call(this),this.D=h,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(ls,Rt),n=ls.prototype,n.open=function(h,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=b,this.readyState=1,xi(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(b.body=h),(this.D||f).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ir(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,xi(this)),this.g&&(this.readyState=3,xi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bo(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bo(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var b=h.value?h.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!h.done}))&&(this.response=this.responseText+=b)}h.done?ir(this):xi(this),this.readyState==3&&Bo(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,ir(this))},n.Qa=function(h){this.g&&(this.response=h,ir(this))},n.ga=function(){this.g&&ir(this)};function ir(h){h.readyState=4,h.l=null,h.j=null,h.v=null,xi(h)}n.setRequestHeader=function(h,b){this.u.append(h,b)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],b=this.h.entries();for(var w=b.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=b.next();return h.join(`\r
`)};function xi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ls.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ra(h){let b="";return G(h,function(w,k){b+=k,b+=":",b+=w,b+=`\r
`}),b}function yi(h,b,w){e:{for(k in w){var k=!1;break e}k=!0}k||(w=Ra(w),typeof h=="string"?w!=null&&encodeURIComponent(String(w)):it(h,b,w))}function vt(h){Rt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(vt,Rt);var Rn=/^https?$/i,Cr=["POST","PUT"];n=vt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,b,w,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);b=b?b.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vn.g(),this.v=this.o?Po(this.o):Po(vn),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(b,String(h),!0),this.B=!1}catch(re){Ca(this,re);return}if(h=w||"",w=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var Q in k)w.set(Q,k[Q]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const re of k.keys())w.set(re,k.get(re));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(w.keys()).find(re=>re.toLowerCase()=="content-type"),Q=f.FormData&&h instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Cr,b,void 0))||k||Q||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,_e]of w)this.g.setRequestHeader(re,_e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zo(this),this.u=!0,this.g.send(h),this.u=!1}catch(re){Ca(this,re)}};function Ca(h,b){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=b,h.m=5,bi(h),vi(h)}function bi(h){h.A||(h.A=!0,Ct(h,"complete"),Ct(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ct(this,"complete"),Ct(this,"abort"),vi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vi(this,!0)),vt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Fd(this):this.bb())},n.bb=function(){Fd(this)};function Fd(h){if(h.h&&typeof u<"u"&&(!h.v[1]||On(h)!=4||h.Z()!=2)){if(h.u&&On(h)==4)Mo(h.Ea,0,h);else if(Ct(h,"readystatechange"),On(h)==4){h.h=!1;try{const _e=h.Z();e:switch(_e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var w;if(!(w=b)){var k;if(k=_e===0){var Q=String(h.D).match(vc)[1]||null;!Q&&f.self&&f.self.location&&(Q=f.self.location.protocol.slice(0,-1)),k=!Rn.test(Q?Q.toLowerCase():"")}w=k}if(w)Ct(h,"complete"),Ct(h,"success");else{h.m=6;try{var re=2<On(h)?h.g.statusText:""}catch{re=""}h.l=re+" ["+h.Z()+"]",bi(h)}}finally{vi(h)}}}}function vi(h,b){if(h.g){zo(h);const w=h.g,k=h.v[0]?()=>{}:null;h.g=null,h.v=null,b||Ct(h,"ready");try{w.onreadystatechange=k}catch{}}}function zo(h){h.I&&(f.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function On(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var b=this.g.responseText;return h&&b.indexOf(h)==0&&(b=b.substring(h.length)),bn(b)}};function ka(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function qd(h){const b={};h=(h.g&&2<=On(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<h.length;k++){if(ae(h[k]))continue;var w=I(h[k]);const Q=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const re=b[Q]||[];b[Q]=re,re.push(w)}C(b,function(k){return k.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Da(h,b,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||b}function Bd(h){this.Aa=0,this.i=[],this.j=new ws,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Da("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Da("baseRetryDelayMs",5e3,h),this.cb=Da("retryDelaySeedMs",1e4,h),this.Wa=Da("forwardChannelMaxRetries",2,h),this.wa=Da("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new yc(h&&h.concurrentRequestLimit),this.Da=new zs,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Bd.prototype,n.la=8,n.G=1,n.connect=function(h,b,w,k){an(0),this.W=h,this.H=b||{},w&&k!==void 0&&(this.H.OSID=w,this.H.OAID=k),this.F=this.X,this.I=Yd(this,null,this.W),Ho(this)};function Ec(h){if(zd(h),h.G==3){var b=h.U++,w=Pt(h.I);if(it(w,"SID",h.K),it(w,"RID",b),it(w,"TYPE","terminate"),Ma(h,w),b=new tr(h,h.j,b),b.L=2,b.v=Ia(Pt(w)),w=!1,f.navigator&&f.navigator.sendBeacon)try{w=f.navigator.sendBeacon(b.v.toString(),"")}catch{}!w&&f.Image&&(new Image().src=b.v,w=!0),w||(b.g=Wd(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Bs(b)}Ic(h)}function _i(h){h.g&&(jc(h),h.g.cancel(),h.g=null)}function zd(h){_i(h),h.u&&(f.clearTimeout(h.u),h.u=null),wi(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&f.clearTimeout(h.s),h.s=null)}function Ho(h){if(!bc(h.h)&&!h.s){h.s=!0;var b=h.Ga;le||qe(),ye||(le(),ye=!0),Re.add(b,h),h.B=0}}function Um(h,b){return Pd(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=b.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=qs(E(h.Ga,h,b),Qd(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const Q=new tr(this,this.j,h);let re=this.o;if(this.S&&(re?(re=T(re),N(re,this.S)):re=this.S),this.m!==null||this.O||(Q.H=re,re=null),this.P)e:{for(var b=0,w=0;w<this.i.length;w++){t:{var k=this.i[w];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(b+=k,4096<b){b=w;break e}if(b===4096||w===this.i.length-1){b=w+1;break e}}b=1e3}else b=1e3;b=Sc(this,Q,b),w=Pt(this.I),it(w,"RID",h),it(w,"CVER",22),this.D&&it(w,"X-HTTP-Session-Id",this.D),Ma(this,w),re&&(this.O?b="headers="+encodeURIComponent(String(Ra(re)))+"&"+b:this.m&&yi(w,this.m,re)),mi(this.h,Q),this.Ua&&it(w,"TYPE","init"),this.P?(it(w,"$req",b),it(w,"SID","null"),Q.T=!0,Sa(Q,w,null)):Sa(Q,w,b),this.G=2}}else this.G==3&&(h?Hd(this,h):this.i.length==0||bc(this.h)||Hd(this))};function Hd(h,b){var w;b?w=b.l:w=h.U++;const k=Pt(h.I);it(k,"SID",h.K),it(k,"RID",w),it(k,"AID",h.T),Ma(h,k),h.m&&h.o&&yi(k,h.m,h.o),w=new tr(h,h.j,w,h.B+1),h.m===null&&(w.H=h.o),b&&(h.i=b.D.concat(h.i)),b=Sc(h,w,1e3),w.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),mi(h.h,w),Sa(w,k,b)}function Ma(h,b){h.H&&G(h.H,function(w,k){it(b,k,w)}),h.l&&Vo({},function(w,k){it(b,k,w)})}function Sc(h,b,w){w=Math.min(h.i.length,w);var k=h.l?E(h.l.Na,h.l,h):null;e:{var Q=h.i;let re=-1;for(;;){const _e=["count="+w];re==-1?0<w?(re=Q[0].g,_e.push("ofs="+re)):re=0:_e.push("ofs="+re);let ut=!0;for(let Jt=0;Jt<w;Jt++){let Qe=Q[Jt].g;const fn=Q[Jt].map;if(Qe-=re,0>Qe)re=Math.max(0,Q[Jt].g-100),ut=!1;else try{Tc(fn,_e,"req"+Qe+"_")}catch{k&&k(fn)}}if(ut){k=_e.join("&");break e}}}return h=h.i.splice(0,w),b.D=h,k}function Gd(h){if(!h.g&&!h.u){h.Y=1;var b=h.Fa;le||qe(),ye||(le(),ye=!0),Re.add(b,h),h.v=0}}function Ac(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=qs(E(h.Fa,h),Qd(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Kd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=qs(E(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,an(10),_i(this),Kd(this))};function jc(h){h.A!=null&&(f.clearTimeout(h.A),h.A=null)}function Kd(h){h.g=new tr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var b=Pt(h.qa);it(b,"RID","rpc"),it(b,"SID",h.K),it(b,"AID",h.T),it(b,"CI",h.F?"0":"1"),!h.F&&h.ja&&it(b,"TO",h.ja),it(b,"TYPE","xmlhttp"),Ma(h,b),h.m&&h.o&&yi(b,h.m,h.o),h.L&&(h.g.I=h.L);var w=h.g;h=h.ia,w.L=1,w.v=Ia(Pt(b)),w.m=null,w.P=!0,Ar(w,h)}n.Za=function(){this.C!=null&&(this.C=null,_i(this),Ac(this),an(19))};function wi(h){h.C!=null&&(f.clearTimeout(h.C),h.C=null)}function $d(h,b){var w=null;if(h.g==b){wi(h),jc(h),h.g=null;var k=2}else if(fi(h.h,b))w=b.D,Ns(h.h,b),k=1;else return;if(h.G!=0){if(b.o)if(k==1){w=b.m?b.m.length:0,b=Date.now()-b.F;var Q=h.B;k=ci(),Ct(k,new Ea(k,w)),Ho(h)}else Gd(h);else if(Q=b.s,Q==3||Q==0&&0<b.X||!(k==1&&Um(h,b)||k==2&&Ac(h)))switch(w&&0<w.length&&(b=h.h,b.i=b.i.concat(w)),Q){case 1:kr(h,5);break;case 4:kr(h,10);break;case 3:kr(h,6);break;default:kr(h,2)}}}function Qd(h,b){let w=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(w*=2),w*b}function kr(h,b){if(h.j.info("Error code "+b),b==2){var w=E(h.fb,h),k=h.Xa;const Q=!k;k=new Ir(k||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||pi(k,"https"),Ia(k),Q?Nc(k.toString(),w):Ud(k.toString(),w)}else an(2);h.G=0,h.l&&h.l.sa(b),Ic(h),zd(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),an(2)):(this.j.info("Failed to ping google.com"),an(1))};function Ic(h){if(h.G=0,h.ka=[],h.l){const b=Pn(h.h);(b.length!=0||h.i.length!=0)&&(O(h.ka,b),O(h.ka,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.ra()}}function Yd(h,b,w){var k=w instanceof Ir?Pt(w):new Ir(w);if(k.g!="")b&&(k.g=b+"."+k.g),ja(k,k.s);else{var Q=f.location;k=Q.protocol,b=b?b+"."+Q.hostname:Q.hostname,Q=+Q.port;var re=new Ir(null);k&&pi(re,k),b&&(re.g=b),Q&&ja(re,Q),w&&(re.l=w),k=re}return w=h.D,b=h.ya,w&&b&&it(k,w,b),it(k,"VER",h.la),Ma(h,k),k}function Wd(h,b,w){if(b&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=h.Ca&&!h.pa?new vt(new rr({eb:w})):new vt(h.pa),b.Ha(h.J),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xd(){}n=Xd.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Go(){}Go.prototype.g=function(h,b){return new Vn(h,b)};function Vn(h,b){Rt.call(this),this.g=new Bd(b),this.l=h,this.h=b&&b.messageUrlParams||null,h=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(h?h["X-WebChannel-Content-Type"]=b.messageContentType:h={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(h?h["X-WebChannel-Client-Profile"]=b.va:h={"X-WebChannel-Client-Profile":b.va}),this.g.S=h,(h=b&&b.Sb)&&!ae(h)&&(this.g.m=h),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!ae(b)&&(this.g.D=b,h=this.h,h!==null&&b in h&&(h=this.h,b in h&&delete h[b])),this.j=new Ni(this)}V(Vn,Rt),Vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vn.prototype.close=function(){Ec(this.g)},Vn.prototype.o=function(h){var b=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.u&&(w={},w.__data__=Gn(h),h=w);b.i.push(new Mm(b.Ya++,h)),b.G==3&&Ho(b)},Vn.prototype.N=function(){this.g.l=null,delete this.j,Ec(this.g),delete this.g,Vn.aa.N.call(this)};function Jd(h){Js.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var b=h.__sm__;if(b){e:{for(const w in b){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,b=b!==null&&h in b?b[h]:void 0),this.data=b}else this.data=h}V(Jd,Js);function Zd(){as.call(this),this.status=1}V(Zd,as);function Ni(h){this.g=h}V(Ni,Xd),Ni.prototype.ua=function(){Ct(this.g,"a")},Ni.prototype.ta=function(h){Ct(this.g,new Jd(h))},Ni.prototype.sa=function(h){Ct(this.g,new Zd)},Ni.prototype.ra=function(){Ct(this.g,"b")},Go.prototype.createWebChannel=Go.prototype.g,Vn.prototype.send=Vn.prototype.o,Vn.prototype.open=Vn.prototype.m,Vn.prototype.close=Vn.prototype.close,A2=function(){return new Go},S2=function(){return ci()},E2=Kn,f0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ve.NO_ERROR=0,Ve.TIMEOUT=8,Ve.HTTP_ERROR=6,yf=Ve,nt.COMPLETE="complete",T2=nt,Er.EventType=_s,_s.OPEN="a",_s.CLOSE="b",_s.ERROR="c",_s.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,Eu=Er,vt.prototype.listenOnce=vt.prototype.L,vt.prototype.getLastError=vt.prototype.Ka,vt.prototype.getLastErrorCode=vt.prototype.Ba,vt.prototype.getStatus=vt.prototype.Z,vt.prototype.getResponseJson=vt.prototype.Oa,vt.prototype.getResponseText=vt.prototype.oa,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Ha,N2=vt}).apply(typeof rf<"u"?rf:typeof self<"u"?self:typeof window<"u"?window:{});const Rw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xn.UNAUTHENTICATED=new xn(null),xn.GOOGLE_CREDENTIALS=new xn("google-credentials-uid"),xn.FIRST_PARTY=new xn("first-party-uid"),xn.MOCK_USER=new xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new Wf("@firebase/firestore");function Al(){return aa.logLevel}function k5(n){aa.setLogLevel(n)}function ge(n,...e){if(aa.logLevel<=Xe.DEBUG){const t=e.map(fx);aa.debug(`Firestore (${oc}): ${n}`,...t)}}function Qt(n,...e){if(aa.logLevel<=Xe.ERROR){const t=e.map(fx);aa.error(`Firestore (${oc}): ${n}`,...t)}}function _r(n,...e){if(aa.logLevel<=Xe.WARN){const t=e.map(fx);aa.warn(`Firestore (${oc}): ${n}`,...t)}}function fx(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(n="Unexpected state"){const e=`FIRESTORE (${oc}) INTERNAL ASSERTION FAILED: `+n;throw Qt(e),new Error(e)}function Ce(n,e){n||je()}function D5(n,e){n||je()}function Ae(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends qn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class M5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(xn.UNAUTHENTICATED)))}shutdown(){}}class P5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class O5{constructor(e){this.t=e,this.currentUser=xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ce(this.o===void 0);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let c=new jn;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new jn,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const m=c;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},f=m=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new jn)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string"),new j2(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string"),new xn(e)}}class V5{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=xn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class L5{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new V5(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(xn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class U5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F5{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ce(this.o===void 0);const r=c=>{c.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.R;return this.R=c.token,ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const a=c=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?a(c):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ce(typeof t.token=="string"),this.R=t.token,new U5(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q5(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const a=q5(40);for(let c=0;c<a.length;++c)r.length<20&&a[c]<t&&(r+=e.charAt(a[c]%e.length))}return r}}function ze(n,e){return n<e?-1:n>e?1:0}function zl(n,e,t){return n.length===e.length&&n.every(((r,a)=>t(r,e[a])))}function R2(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new pe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new It(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new It(0,0))}static max(){return new Pe(new It(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,t,r){t===void 0?t=0:t>e.length&&je(),r===void 0?r=e.length-t:r>e.length-t&&je(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return $u.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $u?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const c=e.get(a),u=t.get(a);if(c<u)return-1;if(c>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class et extends $u{construct(e,t,r){return new et(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new et(t)}static emptyPath(){return new et([])}}const B5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends $u{construct(e,t,r){return new At(e,t,r)}static isValidIdentifier(e){return B5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new At(["__name__"])}static fromServerFormat(e){const t=[];let r="",a=0;const c=()=>{if(r.length===0)throw new pe(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new pe(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new pe(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else f==="`"?(u=!u,a++):f!=="."||u?(r+=f,a++):(c(),a++)}if(c(),u)throw new pe(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(t)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(et.fromString(e))}static fromName(e){return new Se(et.fromString(e).popFirst(5))}static empty(){return new Se(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new et(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function m0(n){return n.fields.find((e=>e.kind===2))}function to(n){return n.fields.filter((e=>e.kind!==2))}Mf.UNKNOWN_ID=-1;class bf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Qu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Qu(0,bs.min())}}function C2(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=Pe.fromTimestamp(r===1e9?new It(t+1,0):new It(t,r));return new bs(a,Se.empty(),e)}function k2(n){return new bs(n.readTime,n.key,-1)}class bs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new bs(Pe.min(),Se.empty(),-1)}static max(){return new bs(Pe.max(),Se.empty(),-1)}}function mx(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==D2)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J(((r,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):J.reject(t)}static resolve(e){return new J(((t,r)=>{t(e)}))}static reject(e){return new J(((t,r)=>{r(e)}))}static waitFor(e){return new J(((t,r)=>{let a=0,c=0,u=!1;e.forEach((f=>{++a,f.next((()=>{++c,u&&c===a&&t()}),(m=>r(m)))})),u=!0,c===a&&t()}))}static or(e){let t=J.resolve(!1);for(const r of e)t=t.next((a=>a?J.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,c)=>{r.push(t.call(this,a,c))})),this.waitFor(r)}static mapArray(e,t){return new J(((r,a)=>{const c=e.length,u=new Array(c);let f=0;for(let m=0;m<c;m++){const x=m;t(e[x]).next((y=>{u[x]=y,++f,f===c&&r(u)}),(y=>a(y)))}}))}static doWhile(e,t){return new J(((r,a)=>{const c=()=>{e()===!0?t().next((()=>{c()}),a):r()};c()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new jn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ku(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const a=px(r.target.error);this.V.reject(new ku(e,a))}}static open(e,t,r,a){try{return new lm(t,e.transaction(a,r))}catch(c){throw new ku(t,c)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ge("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new H5(t)}}class xr{constructor(e,t,r){this.name=e,this.version=t,this.p=r,xr.S(Dt())===12.2&&Qt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ge("SimpleDb","Removing database:",e),no(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Lu())return!1;if(xr.v())return!0;const e=Dt(),t=xr.S(e),r=0<t&&t<10,a=P2(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(ge("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=c=>{const u=c.target.result;t(u)},a.onblocked=()=>{r(new ku(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const u=c.target.error;u.name==="VersionError"?r(new pe(se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new pe(se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new ku(e,u))},a.onupgradeneeded=c=>{ge("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',c.oldVersion);const u=c.target.result;this.p.O(u,a.transaction,c.oldVersion,this.version).next((()=>{ge("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const c=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.M(e);const f=lm.open(this.db,e,c?"readonly":"readwrite",r),m=a(f).next((x=>(f.g(),x))).catch((x=>(f.abort(x),J.reject(x)))).toPromise();return m.catch((()=>{})),await f.m,m}catch(f){const m=f,x=m.name!=="FirebaseError"&&u<3;if(ge("SimpleDb","Transaction failed with error:",m.message,"Retrying:",x),this.close(),!x)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function P2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class z5{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return no(this.B.delete())}}class ku extends pe{constructor(e,t){super(se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ya(n){return n.name==="IndexedDbTransactionError"}class H5{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ge("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ge("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),no(r)}add(e){return ge("SimpleDb","ADD",this.store.name,e,e),no(this.store.add(e))}get(e){return no(this.store.get(e)).next((t=>(t===void 0&&(t=null),ge("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return ge("SimpleDb","DELETE",this.store.name,e),no(this.store.delete(e))}count(){return ge("SimpleDb","COUNT",this.store.name),no(this.store.count())}U(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const c=a.getAll(r.range);return new J(((u,f)=>{c.onerror=m=>{f(m.target.error)},c.onsuccess=m=>{u(m.target.result)}}))}{const c=this.cursor(r),u=[];return this.W(c,((f,m)=>{u.push(m)})).next((()=>u))}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new J(((a,c)=>{r.onerror=u=>{c(u.target.error)},r.onsuccess=u=>{a(u.target.result)}}))}j(e,t){ge("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const a=this.cursor(r);return this.W(a,((c,u,f)=>f.delete()))}J(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.W(a,t)}Y(e){const t=this.cursor({});return new J(((r,a)=>{t.onerror=c=>{const u=px(c.target.error);a(u)},t.onsuccess=c=>{const u=c.target.result;u?e(u.primaryKey,u.value).next((f=>{f?u.continue():r()})):r()}}))}W(e,t){const r=[];return new J(((a,c)=>{e.onerror=u=>{c(u.target.error)},e.onsuccess=u=>{const f=u.target.result;if(!f)return void a();const m=new z5(f),x=t(f.primaryKey,f.value,m);if(x instanceof J){const y=x.catch((v=>(m.done(),J.reject(v))));r.push(y)}m.isDone?a():m.K===null?f.continue():f.continue(m.K)}})).next((()=>J.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function no(n){return new J(((e,t)=>{n.onsuccess=r=>{const a=r.target.result;e(a)},n.onerror=r=>{const a=px(r.target.error);t(a)}}))}let Cw=!1;function px(n){const e=xr.S(Dt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Cw||(Cw=!0,setTimeout((()=>{throw r}),0)),r}}return n}class G5{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ge("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{ge("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){ya(t)?ge("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await xa(t)}await this.X(6e4)}))}}class K5{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const r=new Set;let a=t,c=!0;return J.doWhile((()=>c===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!r.has(u))return ge("IndexBackfiller",`Processing collection: ${u}`),this.ne(e,u,a).next((f=>{a-=f,r.add(u)}));c=!1})))).next((()=>t-a))}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((c=>{const u=c.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this.re(a,c))).next((f=>(ge("IndexBackfiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>u.size))}))))}re(e,t){let r=e;return t.changes.forEach(((a,c)=>{const u=k2(c);mx(u,r)>0&&(r=u)})),new bs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ns.oe=-1;function vd(n){return n==null}function Yu(n){return n===0&&1/n==-1/0}function O2(n){return typeof n=="number"&&Number.isInteger(n)&&!Yu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kw(e)),e=$5(n.get(t),e);return kw(e)}function $5(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const c=n.charAt(a);switch(c){case"\0":t+="";break;case"":t+="";break;default:t+=c}}return t}function kw(n){return n+""}function pr(n){const e=n.length;if(Ce(e>=2),e===2)return Ce(n.charAt(0)===""&&n.charAt(1)===""),et.emptyPath();const t=e-2,r=[];let a="";for(let c=0;c<e;){const u=n.indexOf("",c);switch((u<0||u>t)&&je(),n.charAt(u+1)){case"":const f=n.substring(c,u);let m;a.length===0?m=f:(a+=f,m=a,a=""),r.push(m);break;case"":a+=n.substring(c,u),a+="\0";break;case"":a+=n.substring(c,u+1);break;default:je()}c=u+2}return new et(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(n,e){return[n,Bn(e)]}function V2(n,e,t){return[n,Bn(e),t]}const Q5={},Y5=["prefixPath","collectionGroup","readTime","documentId"],W5=["prefixPath","collectionGroup","documentId"],X5=["collectionGroup","readTime","prefixPath","documentId"],J5=["canonicalId","targetId"],Z5=["targetId","path"],eD=["path","targetId"],tD=["collectionId","parent"],nD=["indexId","uid"],sD=["uid","sequenceNumber"],rD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],iD=["indexId","uid","orderedDocumentKey"],aD=["userId","collectionPath","documentId"],oD=["userId","collectionPath","largestBatchId"],lD=["userId","collectionGroup","largestBatchId"],L2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],cD=[...L2,"documentOverlays"],U2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],F2=U2,gx=[...F2,"indexConfiguration","indexState","indexEntries"],uD=gx,dD=[...gx,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0 extends M2{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function un(n,e){const t=Ae(n);return xr.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function jo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function q2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,t){this.comparator=e,this.root=t||Sn.EMPTY}insert(e,t){return new bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new af(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new af(this.root,e,this.comparator,!1)}getReverseIterator(){return new af(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new af(this.root,e,this.comparator,!0)}}class af{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sn{constructor(e,t,r,a,c){this.key=e,this.value=t,this.color=r??Sn.RED,this.left=a??Sn.EMPTY,this.right=c??Sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,c){return new Sn(e??this.key,t??this.value,r??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const c=r(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,r),null):c===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Sn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw je();const e=this.left.check();if(e!==this.right.check())throw je();return e+(this.isRed()?0:1)}}Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw je()}get value(){throw je()}get color(){throw je()}get left(){throw je()}get right(){throw je()}copy(e,t,r,a,c){return this}insert(e,t,r){return new Sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Pw(this.data.getIterator())}getIteratorFrom(e){return new Pw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new xt(this.comparator);return t.data=e,t}}class Pw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _l(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new ss([])}unionWith(e){let t=new xt(At.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ss(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new B2("Invalid base64 string: "+c):c}})(e);return new Ft(t)}static fromUint8Array(e){const t=(function(a){let c="";for(let u=0;u<a.length;++u)c+=String.fromCharCode(a[u]);return c})(e);return new Ft(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ft.EMPTY_BYTE_STRING=new Ft("");const fD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ti(n){if(Ce(!!n),typeof n=="string"){let e=0;const t=fD.exec(n);if(Ce(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function oa(n){return typeof n=="string"?Ft.fromBase64String(n):Ft.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function xx(n){const e=n.mapValue.fields.__previous_value__;return cm(e)?xx(e):e}function Wu(n){const e=ti(n.mapValue.fields.__local_write_time__.timestampValue);return new It(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,t,r,a,c,u,f,m,x){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=x}}class la{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new la("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof la&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_f={nullValue:"NULL_VALUE"};function xo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cm(n)?4:z2(n)?9007199254740991:um(n)?10:11:je()}function wr(n,e){if(n===e)return!0;const t=xo(n);if(t!==xo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wu(n).isEqual(Wu(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const u=ti(a.timestampValue),f=ti(c.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,c){return oa(a.bytesValue).isEqual(oa(c.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,c){return St(a.geoPointValue.latitude)===St(c.geoPointValue.latitude)&&St(a.geoPointValue.longitude)===St(c.geoPointValue.longitude)})(n,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return St(a.integerValue)===St(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const u=St(a.doubleValue),f=St(c.doubleValue);return u===f?Yu(u)===Yu(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return zl(n.arrayValue.values||[],e.arrayValue.values||[],wr);case 10:case 11:return(function(a,c){const u=a.mapValue.fields||{},f=c.mapValue.fields||{};if(Mw(u)!==Mw(f))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(f[m]===void 0||!wr(u[m],f[m])))return!1;return!0})(n,e);default:return je()}}function Xu(n,e){return(n.values||[]).find((t=>wr(t,e)))!==void 0}function ca(n,e){if(n===e)return 0;const t=xo(n),r=xo(e);if(t!==r)return ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return(function(c,u){const f=St(c.integerValue||c.doubleValue),m=St(u.integerValue||u.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,e);case 3:return Ow(n.timestampValue,e.timestampValue);case 4:return Ow(Wu(n),Wu(e));case 5:return ze(n.stringValue,e.stringValue);case 6:return(function(c,u){const f=oa(c),m=oa(u);return f.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(c,u){const f=c.split("/"),m=u.split("/");for(let x=0;x<f.length&&x<m.length;x++){const y=ze(f[x],m[x]);if(y!==0)return y}return ze(f.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(c,u){const f=ze(St(c.latitude),St(u.latitude));return f!==0?f:ze(St(c.longitude),St(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Vw(n.arrayValue,e.arrayValue);case 10:return(function(c,u){var f,m,x,y;const v=c.fields||{},E=u.fields||{},A=(f=v.value)===null||f===void 0?void 0:f.arrayValue,V=(m=E.value)===null||m===void 0?void 0:m.arrayValue,R=ze(((x=A==null?void 0:A.values)===null||x===void 0?void 0:x.length)||0,((y=V==null?void 0:V.values)===null||y===void 0?void 0:y.length)||0);return R!==0?R:Vw(A,V)})(n.mapValue,e.mapValue);case 11:return(function(c,u){if(c===ea.mapValue&&u===ea.mapValue)return 0;if(c===ea.mapValue)return 1;if(u===ea.mapValue)return-1;const f=c.fields||{},m=Object.keys(f),x=u.fields||{},y=Object.keys(x);m.sort(),y.sort();for(let v=0;v<m.length&&v<y.length;++v){const E=ze(m[v],y[v]);if(E!==0)return E;const A=ca(f[m[v]],x[y[v]]);if(A!==0)return A}return ze(m.length,y.length)})(n.mapValue,e.mapValue);default:throw je()}}function Ow(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=ti(n),r=ti(e),a=ze(t.seconds,r.seconds);return a!==0?a:ze(t.nanos,r.nanos)}function Vw(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const c=ca(t[a],r[a]);if(c)return c}return ze(t.length,r.length)}function Hl(n){return g0(n)}function g0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=ti(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return oa(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Se.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",a=!0;for(const c of t.values||[])a?a=!1:r+=",",r+=g0(c);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const u of r)c?c=!1:a+=",",a+=`${u}:${g0(t.fields[u])}`;return a+"}"})(n.mapValue):je()}function yo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function x0(n){return!!n&&"integerValue"in n}function Ju(n){return!!n&&"arrayValue"in n}function Lw(n){return!!n&&"nullValue"in n}function Uw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wf(n){return!!n&&"mapValue"in n}function um(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Du(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return jo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Du(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Du(n.arrayValue.values[t]);return e}return Object.assign({},n)}function z2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const H2={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function pD(n){return"nullValue"in n?_f:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?yo(la.empty(),Se.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?um(n)?H2:{mapValue:{}}:je()}function gD(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?yo(la.empty(),Se.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?H2:"mapValue"in n?um(n)?{mapValue:{}}:ea:je()}function Fw(n,e){const t=ca(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function qw(n,e){const t=ca(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Du(t)}setAll(e){let t=At.emptyPath(),r={},a=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=f.popLast()}u?r[f.lastSegment()]=Du(u):a.push(f.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,r,a)}delete(e){const t=this.field(e.popLast());wf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];wf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){jo(t,((a,c)=>e[a]=c));for(const a of r)delete e[a]}clone(){return new An(Du(this.value))}}function G2(n){const e=[];return jo(n.fields,((t,r)=>{const a=new At([t]);if(wf(r)){const c=G2(r.mapValue).fields;if(c.length===0)e.push(a);else for(const u of c)e.push(a.child(u))}else e.push(a)})),new ss(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,t,r,a,c,u,f){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=c,this.data=u,this.documentState=f}static newInvalidDocument(e){return new Nt(e,0,Pe.min(),Pe.min(),Pe.min(),An.empty(),0)}static newFoundDocument(e,t,r,a){return new Nt(e,1,t,Pe.min(),r,a,0)}static newNoDocument(e,t){return new Nt(e,2,t,Pe.min(),Pe.min(),An.empty(),0)}static newUnknownDocument(e,t){return new Nt(e,3,t,Pe.min(),Pe.min(),An.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,t){this.position=e,this.inclusive=t}}function Bw(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const c=e[a],u=n.position[a];if(c.field.isKeyField()?r=Se.comparator(Se.fromName(u.referenceValue),t.key):r=ca(u,t.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function zw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t="asc"){this.field=e,this.dir=t}}function xD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{}class tt extends K2{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new yD(e,t,r):t==="array-contains"?new _D(e,r):t==="in"?new J2(e,r):t==="not-in"?new wD(e,r):t==="array-contains-any"?new ND(e,r):new tt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new bD(e,r):new vD(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ca(t,this.value)):t!==null&&xo(this.value)===xo(t)&&this.matchesComparison(ca(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ft extends K2{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ft(e,t)}matches(e){return Gl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Gl(n){return n.op==="and"}function y0(n){return n.op==="or"}function yx(n){return $2(n)&&Gl(n)}function $2(n){for(const e of n.filters)if(e instanceof ft)return!1;return!0}function b0(n){if(n instanceof tt)return n.field.canonicalString()+n.op.toString()+Hl(n.value);if(yx(n))return n.filters.map((e=>b0(e))).join(",");{const e=n.filters.map((t=>b0(t))).join(",");return`${n.op}(${e})`}}function Q2(n,e){return n instanceof tt?(function(r,a){return a instanceof tt&&r.op===a.op&&r.field.isEqual(a.field)&&wr(r.value,a.value)})(n,e):n instanceof ft?(function(r,a){return a instanceof ft&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((c,u,f)=>c&&Q2(u,a.filters[f])),!0):!1})(n,e):void je()}function Y2(n,e){const t=n.filters.concat(e);return ft.create(t,n.op)}function W2(n){return n instanceof tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Hl(t.value)}`})(n):n instanceof ft?(function(t){return t.op.toString()+" {"+t.getFilters().map(W2).join(" ,")+"}"})(n):"Filter"}class yD extends tt{constructor(e,t,r){super(e,t,r),this.key=Se.fromName(r.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class bD extends tt{constructor(e,t){super(e,"in",t),this.keys=X2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class vD extends tt{constructor(e,t){super(e,"not-in",t),this.keys=X2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function X2(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>Se.fromName(r.referenceValue)))}class _D extends tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ju(t)&&Xu(t.arrayValue,this.value)}}class J2 extends tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Xu(this.value.arrayValue,t)}}class wD extends tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Xu(this.value.arrayValue,t)}}class ND extends tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ju(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Xu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,t=null,r=[],a=[],c=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=c,this.startAt=u,this.endAt=f,this.ue=null}}function v0(n,e=null,t=[],r=[],a=null,c=null,u=null){return new TD(n,e,t,r,a,c,u)}function bo(n){const e=Ae(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>b0(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),vd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Hl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Hl(r))).join(",")),e.ue=t}return e.ue}function _d(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!xD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Q2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!zw(n.startAt,e.startAt)&&zw(n.endAt,e.endAt)}function Pf(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Of(n,e){return n.filters.filter((t=>t instanceof tt&&t.field.isEqual(e)))}function Hw(n,e,t){let r=_f,a=!0;for(const c of Of(n,e)){let u=_f,f=!0;switch(c.op){case"<":case"<=":u=pD(c.value);break;case"==":case"in":case">=":u=c.value;break;case">":u=c.value,f=!1;break;case"!=":case"not-in":u=_f}Fw({value:r,inclusive:a},{value:u,inclusive:f})<0&&(r=u,a=f)}if(t!==null){for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const u=t.position[c];Fw({value:r,inclusive:a},{value:u,inclusive:t.inclusive})<0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}function Gw(n,e,t){let r=ea,a=!0;for(const c of Of(n,e)){let u=ea,f=!0;switch(c.op){case">=":case">":u=gD(c.value),f=!1;break;case"==":case"in":case"<=":u=c.value;break;case"<":u=c.value,f=!1;break;case"!=":case"not-in":u=ea}qw({value:r,inclusive:a},{value:u,inclusive:f})>0&&(r=u,a=f)}if(t!==null){for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const u=t.position[c];qw({value:r,inclusive:a},{value:u,inclusive:t.inclusive})>0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,t=null,r=[],a=[],c=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=c,this.limitType=u,this.startAt=f,this.endAt=m,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Z2(n,e,t,r,a,c,u,f){return new ii(n,e,t,r,a,c,u,f)}function lc(n){return new ii(n)}function Kw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function bx(n){return n.collectionGroup!==null}function Vl(n){const e=Ae(n);if(e.ce===null){e.ce=[];const t=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),t.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new xt(At.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((x=>{x.isInequality()&&(f=f.add(x.field))}))})),f})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.ce.push(new Zu(c,r))})),t.has(At.keyField().canonicalString())||e.ce.push(new Zu(At.keyField(),r))}return e.ce}function zn(n){const e=Ae(n);return e.le||(e.le=ED(e,Vl(n))),e.le}function ED(n,e){if(n.limitType==="F")return v0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new Zu(a.field,c)}));const t=n.endAt?new ua(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ua(n.startAt.position,n.startAt.inclusive):null;return v0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function _0(n,e){const t=n.filters.concat([e]);return new ii(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Vf(n,e,t){return new ii(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wd(n,e){return _d(zn(n),zn(e))&&n.limitType===e.limitType}function eT(n){return`${bo(zn(n))}|lt:${n.limitType}`}function jl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>W2(a))).join(", ")}]`),vd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>Hl(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>Hl(a))).join(",")),`Target(${r})`})(zn(n))}; limitType=${n.limitType})`}function Nd(n,e){return e.isFoundDocument()&&(function(r,a){const c=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Se.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(n,e)&&(function(r,a){for(const c of Vl(r))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(n,e)&&(function(r,a){for(const c of r.filters)if(!c.matches(a))return!1;return!0})(n,e)&&(function(r,a){return!(r.startAt&&!(function(u,f,m){const x=Bw(u,f,m);return u.inclusive?x<=0:x<0})(r.startAt,Vl(r),a)||r.endAt&&!(function(u,f,m){const x=Bw(u,f,m);return u.inclusive?x>=0:x>0})(r.endAt,Vl(r),a))})(n,e)}function tT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function nT(n){return(e,t)=>{let r=!1;for(const a of Vl(n)){const c=SD(a,e,t);if(c!==0)return c;r=r||a.field.isKeyField()}return 0}}function SD(n,e,t){const r=n.field.isKeyField()?Se.comparator(e.key,t.key):(function(c,u,f){const m=u.data.field(c),x=f.data.field(c);return m!==null&&x!==null?ca(m,x):je()})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return je()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,c]of r)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){jo(this.inner,((t,r)=>{for(const[a,c]of r)e(a,c)}))}isEmpty(){return q2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=new bt(Se.comparator);function rs(){return AD}const sT=new bt(Se.comparator);function Su(...n){let e=sT;for(const t of n)e=e.insert(t.key,t);return e}function rT(n){let e=sT;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function gr(){return Mu()}function iT(){return Mu()}function Mu(){return new ba((n=>n.toString()),((n,e)=>n.isEqual(e)))}const jD=new bt(Se.comparator),ID=new xt(Se.comparator);function Ge(...n){let e=ID;for(const t of n)e=e.add(t);return e}const RD=new xt(ze);function vx(){return RD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yu(e)?"-0":e}}function aT(n){return{integerValue:""+n}}function oT(n,e){return O2(e)?aT(e):_x(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(){this._=void 0}}function CD(n,e,t){return n instanceof Kl?(function(a,c){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&cm(c)&&(c=xx(c)),c&&(u.fields.__previous_value__=c),{mapValue:u}})(t,e):n instanceof vo?cT(n,e):n instanceof _o?uT(n,e):(function(a,c){const u=lT(a,c),f=$w(u)+$w(a.Pe);return x0(u)&&x0(a.Pe)?aT(f):_x(a.serializer,f)})(n,e)}function kD(n,e,t){return n instanceof vo?cT(n,e):n instanceof _o?uT(n,e):t}function lT(n,e){return n instanceof $l?(function(r){return x0(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class Kl extends dm{}class vo extends dm{constructor(e){super(),this.elements=e}}function cT(n,e){const t=dT(e);for(const r of n.elements)t.some((a=>wr(a,r)))||t.push(r);return{arrayValue:{values:t}}}class _o extends dm{constructor(e){super(),this.elements=e}}function uT(n,e){let t=dT(e);for(const r of n.elements)t=t.filter((a=>!wr(a,r)));return{arrayValue:{values:t}}}class $l extends dm{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function $w(n){return St(n.integerValue||n.doubleValue)}function dT(n){return Ju(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t){this.field=e,this.transform=t}}function DD(n,e){return n.field.isEqual(e.field)&&(function(r,a){return r instanceof vo&&a instanceof vo||r instanceof _o&&a instanceof _o?zl(r.elements,a.elements,wr):r instanceof $l&&a instanceof $l?wr(r.Pe,a.Pe):r instanceof Kl&&a instanceof Kl})(n.transform,e.transform)}class MD{constructor(e,t){this.version=e,this.transformResults=t}}class jt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jt}static exists(e){return new jt(void 0,e)}static updateTime(e){return new jt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class hm{}function hT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new uc(n.key,jt.none()):new cc(n.key,n.data,jt.none());{const t=n.data,r=An.empty();let a=new xt(At.comparator);for(let c of e.fields)if(!a.has(c)){let u=t.field(c);u===null&&c.length>1&&(c=c.popLast(),u=t.field(c)),u===null?r.delete(c):r.set(c,u),a=a.add(c)}return new ai(n.key,r,new ss(a.toArray()),jt.none())}}function PD(n,e,t){n instanceof cc?(function(a,c,u){const f=a.value.clone(),m=Yw(a.fieldTransforms,c,u.transformResults);f.setAll(m),c.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof ai?(function(a,c,u){if(!Nf(a.precondition,c))return void c.convertToUnknownDocument(u.version);const f=Yw(a.fieldTransforms,c,u.transformResults),m=c.data;m.setAll(fT(a)),m.setAll(f),c.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,t):(function(a,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Pu(n,e,t,r){return n instanceof cc?(function(c,u,f,m){if(!Nf(c.precondition,u))return f;const x=c.value.clone(),y=Ww(c.fieldTransforms,m,u);return x.setAll(y),u.convertToFoundDocument(u.version,x).setHasLocalMutations(),null})(n,e,t,r):n instanceof ai?(function(c,u,f,m){if(!Nf(c.precondition,u))return f;const x=Ww(c.fieldTransforms,m,u),y=u.data;return y.setAll(fT(c)),y.setAll(x),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),f===null?null:f.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((v=>v.field)))})(n,e,t,r):(function(c,u,f){return Nf(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function OD(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),c=lT(r.transform,a||null);c!=null&&(t===null&&(t=An.empty()),t.set(r.field,c))}return t||null}function Qw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&zl(r,a,((c,u)=>DD(c,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class cc extends hm{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ai extends hm{constructor(e,t,r,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function fT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Yw(n,e,t){const r=new Map;Ce(n.length===t.length);for(let a=0;a<t.length;a++){const c=n[a],u=c.transform,f=e.data.field(c.field);r.set(c.field,kD(u,f,t[a]))}return r}function Ww(n,e,t){const r=new Map;for(const a of n){const c=a.transform,u=t.data.field(a.field);r.set(a.field,CD(c,u,e))}return r}class uc extends hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wx extends hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&PD(c,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Pu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Pu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=iT();return this.mutations.forEach((a=>{const c=e.get(a.key),u=c.overlayedDocument;let f=this.applyToLocalView(u,c.mutatedFields);f=t.has(a.key)?null:f;const m=hT(u,f);m!==null&&r.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(Pe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&zl(this.mutations,e.mutations,((t,r)=>Qw(t,r)))&&zl(this.baseMutations,e.baseMutations,((t,r)=>Qw(t,r)))}}class Tx{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Ce(e.mutations.length===r.length);let a=(function(){return jD})();const c=e.mutations;for(let u=0;u<c.length;u++)a=a.insert(c[u].key,r[u].version);return new Tx(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sn,rt;function mT(n){switch(n){default:return je();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function pT(n){if(n===void 0)return Qt("GRPC error has no .code"),se.UNKNOWN;switch(n){case sn.OK:return se.OK;case sn.CANCELLED:return se.CANCELLED;case sn.UNKNOWN:return se.UNKNOWN;case sn.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case sn.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case sn.INTERNAL:return se.INTERNAL;case sn.UNAVAILABLE:return se.UNAVAILABLE;case sn.UNAUTHENTICATED:return se.UNAUTHENTICATED;case sn.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case sn.NOT_FOUND:return se.NOT_FOUND;case sn.ALREADY_EXISTS:return se.ALREADY_EXISTS;case sn.PERMISSION_DENIED:return se.PERMISSION_DENIED;case sn.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case sn.ABORTED:return se.ABORTED;case sn.OUT_OF_RANGE:return se.OUT_OF_RANGE;case sn.UNIMPLEMENTED:return se.UNIMPLEMENTED;case sn.DATA_LOSS:return se.DATA_LOSS;default:return je()}}(rt=sn||(sn={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=new fo([4294967295,4294967295],0);function Xw(n){const e=gT().encode(n),t=new w2;return t.update(e),new Uint8Array(t.digest())}function Jw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new fo([t,r],0),new fo([a,c],0)]}class Sx{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Au(`Invalid padding: ${t}`);if(r<0)throw new Au(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Au(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Au(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=fo.fromNumber(this.Ie)}Ee(e,t,r){let a=e.add(t.multiply(fo.fromNumber(r)));return a.compare(LD)===1&&(a=new fo([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Xw(e),[r,a]=Jw(t);for(let c=0;c<this.hashCount;c++){const u=this.Ee(r,a,c);if(!this.de(u))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new Sx(c,a,t);return r.forEach((f=>u.insert(f))),u}insert(e){if(this.Ie===0)return;const t=Xw(e),[r,a]=Jw(t);for(let c=0;c<this.hashCount;c++){const u=this.Ee(r,a,c);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,t,r,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Sd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ed(Pe.min(),a,new bt(ze),rs(),Ge())}}class Sd{constructor(e,t,r,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Sd(r,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,t,r,a){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=a}}class xT{constructor(e,t){this.targetId=e,this.me=t}}class yT{constructor(e,t,r=Ft.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class Zw{constructor(){this.fe=0,this.ge=t1(),this.pe=Ft.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ge(),t=Ge(),r=Ge();return this.ge.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:je()}})),new Sd(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=t1()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class UD{constructor(e){this.Le=e,this.Be=new Map,this.ke=rs(),this.qe=e1(),this.Qe=new bt(ze)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:je()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((r,a)=>{this.ze(a)&&t(a)}))}He(e){const t=e.targetId,r=e.me.count,a=this.Je(t);if(a){const c=a.target;if(Pf(c))if(r===0){const u=new Se(c.path);this.Ue(t,u,Nt.newNoDocument(u,Pe.min()))}else Ce(r===1);else{const u=this.Ye(t);if(u!==r){const f=this.Ze(e),m=f?this.Xe(f,e,u):1;if(m!==0){this.je(t);const x=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,x)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:c=0}=t;let u,f;try{u=oa(r).toUint8Array()}catch(m){if(m instanceof B2)return _r("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new Sx(u,a,c)}catch(m){return _r(m instanceof Au?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.Ie===0?null:f}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let a=0;return r.forEach((c=>{const u=this.Le.tt(),f=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(f)||(this.Ue(t,c,null),a++)})),a}rt(e){const t=new Map;this.Be.forEach(((c,u)=>{const f=this.Je(u);if(f){if(c.current&&Pf(f.target)){const m=new Se(f.target.path);this.ke.get(m)!==null||this.it(u,m)||this.Ue(u,m,Nt.newNoDocument(m,e))}c.be&&(t.set(u,c.ve()),c.Ce())}}));let r=Ge();this.qe.forEach(((c,u)=>{let f=!0;u.forEachWhile((m=>{const x=this.Je(m);return!x||x.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(c))})),this.ke.forEach(((c,u)=>u.setReadTime(e)));const a=new Ed(e,t,this.Qe,this.ke,r);return this.ke=rs(),this.qe=e1(),this.Qe=new bt(ze),a}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,t)?a.Fe(t,1):a.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Zw,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new xt(ze),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Zw),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function e1(){return new bt(Se.comparator)}function t1(){return new bt(Se.comparator)}const FD={asc:"ASCENDING",desc:"DESCENDING"},qD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BD={and:"AND",or:"OR"};class zD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function w0(n,e){return n.useProto3Json||vd(e)?e:{value:e}}function Ql(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function HD(n,e){return Ql(n,e.toTimestamp())}function Yt(n){return Ce(!!n),Pe.fromTimestamp((function(t){const r=ti(t);return new It(r.seconds,r.nanos)})(n))}function Ax(n,e){return N0(n,e).canonicalString()}function N0(n,e){const t=(function(a){return new et(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function vT(n){const e=et.fromString(n);return Ce(RT(e)),e}function ed(n,e){return Ax(n.databaseId,e.path)}function yr(n,e){const t=vT(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(NT(t))}function _T(n,e){return Ax(n.databaseId,e)}function wT(n){const e=vT(n);return e.length===4?et.emptyPath():NT(e)}function T0(n){return new et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function NT(n){return Ce(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function n1(n,e,t){return{name:ed(n,e),fields:t.value.mapValue.fields}}function TT(n,e,t){const r=yr(n,e.name),a=Yt(e.updateTime),c=e.createTime?Yt(e.createTime):Pe.min(),u=new An({mapValue:{fields:e.fields}}),f=Nt.newFoundDocument(r,a,c,u);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function GD(n,e){return"found"in e?(function(r,a){Ce(!!a.found),a.found.name,a.found.updateTime;const c=yr(r,a.found.name),u=Yt(a.found.updateTime),f=a.found.createTime?Yt(a.found.createTime):Pe.min(),m=new An({mapValue:{fields:a.found.fields}});return Nt.newFoundDocument(c,u,f,m)})(n,e):"missing"in e?(function(r,a){Ce(!!a.missing),Ce(!!a.readTime);const c=yr(r,a.missing),u=Yt(a.readTime);return Nt.newNoDocument(c,u)})(n,e):je()}function KD(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:je()})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(x,y){return x.useProto3Json?(Ce(y===void 0||typeof y=="string"),Ft.fromBase64String(y||"")):(Ce(y===void 0||y instanceof Buffer||y instanceof Uint8Array),Ft.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(x){const y=x.code===void 0?se.UNKNOWN:pT(x.code);return new pe(y,x.message||"")})(u);t=new yT(r,a,c,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=yr(n,r.document.name),c=Yt(r.document.updateTime),u=r.document.createTime?Yt(r.document.createTime):Pe.min(),f=new An({mapValue:{fields:r.document.fields}}),m=Nt.newFoundDocument(a,c,u,f),x=r.targetIds||[],y=r.removedTargetIds||[];t=new Tf(x,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=yr(n,r.document),c=r.readTime?Yt(r.readTime):Pe.min(),u=Nt.newNoDocument(a,c),f=r.removedTargetIds||[];t=new Tf([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=yr(n,r.document),c=r.removedTargetIds||[];t=new Tf([],c,a,null)}else{if(!("filter"in e))return je();{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:c}=r,u=new VD(a,c),f=r.targetId;t=new xT(f,u)}}return t}function td(n,e){let t;if(e instanceof cc)t={update:n1(n,e.key,e.value)};else if(e instanceof uc)t={delete:ed(n,e.key)};else if(e instanceof ai)t={update:n1(n,e.key,e.data),updateMask:JD(e.fieldMask)};else{if(!(e instanceof wx))return je();t={verify:ed(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(c,u){const f=u.transform;if(f instanceof Kl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof vo)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof _o)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof $l)return{fieldPath:u.field.canonicalString(),increment:f.Pe};throw je()})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:HD(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:je()})(n,e.precondition)),t}function E0(n,e){const t=e.currentDocument?(function(c){return c.updateTime!==void 0?jt.updateTime(Yt(c.updateTime)):c.exists!==void 0?jt.exists(c.exists):jt.none()})(e.currentDocument):jt.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(u,f){let m=null;if("setToServerValue"in f)Ce(f.setToServerValue==="REQUEST_TIME"),m=new Kl;else if("appendMissingElements"in f){const y=f.appendMissingElements.values||[];m=new vo(y)}else if("removeAllFromArray"in f){const y=f.removeAllFromArray.values||[];m=new _o(y)}else"increment"in f?m=new $l(u,f.increment):je();const x=At.fromServerFormat(f.fieldPath);return new Td(x,m)})(n,a))):[];if(e.update){e.update.name;const a=yr(n,e.update.name),c=new An({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(m){const x=m.fieldPaths||[];return new ss(x.map((y=>At.fromServerFormat(y))))})(e.updateMask);return new ai(a,c,u,t,r)}return new cc(a,c,t,r)}if(e.delete){const a=yr(n,e.delete);return new uc(a,t)}if(e.verify){const a=yr(n,e.verify);return new wx(a,t)}return je()}function $D(n,e){return n&&n.length>0?(Ce(e!==void 0),n.map((t=>(function(a,c){let u=a.updateTime?Yt(a.updateTime):Yt(c);return u.isEqual(Pe.min())&&(u=Yt(c)),new MD(u,a.transformResults||[])})(t,e)))):[]}function ET(n,e){return{documents:[_T(n,e.path)]}}function ST(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=_T(n,a);const c=(function(x){if(x.length!==0)return IT(ft.create(x,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const u=(function(x){if(x.length!==0)return x.map((y=>(function(E){return{field:Il(E.field),direction:YD(E.dir)}})(y)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=w0(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{_t:t,parent:a}}function AT(n){let e=wT(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Ce(r===1);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let c=[];t.where&&(c=(function(v){const E=jT(v);return E instanceof ft&&yx(E)?E.getFilters():[E]})(t.where));let u=[];t.orderBy&&(u=(function(v){return v.map((E=>(function(V){return new Zu(Rl(V.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(E)))})(t.orderBy));let f=null;t.limit&&(f=(function(v){let E;return E=typeof v=="object"?v.value:v,vd(E)?null:E})(t.limit));let m=null;t.startAt&&(m=(function(v){const E=!!v.before,A=v.values||[];return new ua(A,E)})(t.startAt));let x=null;return t.endAt&&(x=(function(v){const E=!v.before,A=v.values||[];return new ua(A,E)})(t.endAt)),Z2(e,a,u,c,f,"F",m,x)}function QD(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function jT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Rl(t.unaryFilter.field);return tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Rl(t.unaryFilter.field);return tt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Rl(t.unaryFilter.field);return tt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Rl(t.unaryFilter.field);return tt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return je()}})(n):n.fieldFilter!==void 0?(function(t){return tt.create(Rl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return je()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ft.create(t.compositeFilter.filters.map((r=>jT(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return je()}})(t.compositeFilter.op))})(n):je()}function YD(n){return FD[n]}function WD(n){return qD[n]}function XD(n){return BD[n]}function Il(n){return{fieldPath:n.canonicalString()}}function Rl(n){return At.fromServerFormat(n.fieldPath)}function IT(n){return n instanceof tt?(function(t){if(t.op==="=="){if(Uw(t.value))return{unaryFilter:{field:Il(t.field),op:"IS_NAN"}};if(Lw(t.value))return{unaryFilter:{field:Il(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Uw(t.value))return{unaryFilter:{field:Il(t.field),op:"IS_NOT_NAN"}};if(Lw(t.value))return{unaryFilter:{field:Il(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Il(t.field),op:WD(t.op),value:t.value}}})(n):n instanceof ft?(function(t){const r=t.getFilters().map((a=>IT(a)));return r.length===1?r[0]:{compositeFilter:{op:XD(t.op),filters:r}}})(n):je()}function JD(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function RT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,t,r,a,c=Pe.min(),u=Pe.min(),f=Ft.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e){this.ct=e}}function ZD(n,e){let t;if(e.document)t=TT(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Se.fromSegments(e.noDocument.path),a=No(e.noDocument.readTime);t=Nt.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return je();{const r=Se.fromSegments(e.unknownDocument.path),a=No(e.unknownDocument.version);t=Nt.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const c=new It(a[0],a[1]);return Pe.fromTimestamp(c)})(e.readTime)),t}function s1(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Lf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(c,u){return{name:ed(c,u.key),fields:u.data.value.mapValue.fields,updateTime:Ql(c,u.version.toTimestamp()),createTime:Ql(c,u.createTime.toTimestamp())}})(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:wo(e.version)};else{if(!e.isUnknownDocument())return je();r.unknownDocument={path:t.path.toArray(),version:wo(e.version)}}return r}function Lf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function wo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function No(n){const e=new It(n.seconds,n.nanoseconds);return Pe.fromTimestamp(e)}function so(n,e){const t=(e.baseMutations||[]).map((c=>E0(n.ct,c)));for(let c=0;c<e.mutations.length-1;++c){const u=e.mutations[c];if(c+1<e.mutations.length&&e.mutations[c+1].transform!==void 0){const f=e.mutations[c+1];u.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(c+1,1),++c}}const r=e.mutations.map((c=>E0(n.ct,c))),a=It.fromMillis(e.localWriteTimeMs);return new Nx(e.batchId,a,t,r)}function ju(n){const e=No(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?No(n.lastLimboFreeSnapshotVersion):Pe.min();let r;return r=(function(c){return c.documents!==void 0})(n.query)?(function(c){return Ce(c.documents.length===1),zn(lc(wT(c.documents[0])))})(n.query):(function(c){return zn(AT(c))})(n.query),new Xr(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ft.fromBase64String(n.resumeToken))}function kT(n,e){const t=wo(e.snapshotVersion),r=wo(e.lastLimboFreeSnapshotVersion);let a;a=Pf(e.target)?ET(n.ct,e.target):ST(n.ct,e.target)._t;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:bo(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function jx(n){const e=AT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Vf(e,e.limit,"L"):e}function Yg(n,e){return new Ex(e.largestBatchId,E0(n.ct,e.overlayMutation))}function r1(n,e){const t=e.path.lastSegment();return[n,Bn(e.path.popLast()),t]}function i1(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:wo(r.readTime),documentKey:Bn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{getBundleMetadata(e,t){return a1(e).get(t).next((r=>{if(r)return(function(c){return{id:c.bundleId,createTime:No(c.createTime),version:c.version}})(r)}))}saveBundleMetadata(e,t){return a1(e).put((function(a){return{bundleId:a.id,createTime:wo(Yt(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return o1(e).get(t).next((r=>{if(r)return(function(c){return{name:c.name,query:jx(c.bundledQuery),readTime:No(c.readTime)}})(r)}))}saveNamedQuery(e,t){return o1(e).put((function(a){return{name:a.name,readTime:wo(Yt(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function a1(n){return un(n,"bundles")}function o1(n){return un(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new fm(e,r)}getOverlay(e,t){return gu(e).get(r1(this.userId,t)).next((r=>r?Yg(this.serializer,r):null))}getOverlays(e,t){const r=gr();return J.forEach(t,(a=>this.getOverlay(e,a).next((c=>{c!==null&&r.set(a,c)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((c,u)=>{const f=new Ex(t,u);a.push(this.ht(e,f))})),J.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((u=>a.add(Bn(u.getCollectionPath()))));const c=[];return a.forEach((u=>{const f=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);c.push(gu(e).j("collectionPathOverlayIndex",f))})),J.waitFor(c)}getOverlaysForCollection(e,t,r){const a=gr(),c=Bn(t),u=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,Number.POSITIVE_INFINITY],!0);return gu(e).U("collectionPathOverlayIndex",u).next((f=>{for(const m of f){const x=Yg(this.serializer,m);a.set(x.getKey(),x)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const c=gr();let u;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return gu(e).J({index:"collectionGroupOverlayIndex",range:f},((m,x,y)=>{const v=Yg(this.serializer,x);c.size()<a||v.largestBatchId===u?(c.set(v.getKey(),v),u=v.largestBatchId):y.done()})).next((()=>c))}ht(e,t){return gu(e).put((function(a,c,u){const[f,m,x]=r1(c,u.mutation.key);return{userId:c,collectionPath:m,documentId:x,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:td(a.ct,u.mutation)}})(this.serializer,this.userId,t))}}function gu(n){return un(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{Pt(e){return un(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?Ft.fromUint8Array(r):Ft.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(St(e.integerValue));else if("doubleValue"in e){const r=St(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Yu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=ti(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(oa(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?z2(e)?this.dt(t,Number.MAX_SAFE_INTEGER):um(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):je()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const a of Object.keys(r))this.Vt(a,t),this.Tt(r[a],t)}wt(e,t){var r,a;const c=e.fields||{};this.dt(t,53);const u="value",f=((a=(r=c[u].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.length)||0;this.dt(t,15),t.At(St(f)),this.Vt(u,t),this.Tt(c[u],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const a of r)this.Tt(a,t)}yt(e,t){this.dt(t,37),Se.fromName(e).path.forEach((r=>{this.dt(t,60),this.Dt(r,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}ro.vt=new ro;function n4(n){if(n===0)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function l1(n){const e=64-(function(r){let a=0;for(let c=0;c<8;++c){const u=n4(255&r[c]);if(a+=u,u!==8)break}return a})(n);return Math.ceil(e/8)}class s4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const a=t.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const a=t.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const t=this.qt(e),r=l1(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Kt(e){const t=this.qt(e),r=l1(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=(function(c){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,c,!1),new Uint8Array(u.buffer)})(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class r4{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class i4{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class xu{constructor(){this.jt=new s4,this.Ht=new r4(this.jt),this.Jt=new i4(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new io(this.indexId,this.documentKey,this.arrayValue,r)}}function Qi(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=c1(n.arrayValue,e.arrayValue),t!==0?t:(t=c1(n.directionalValue,e.directionalValue),t!==0?t:Se.comparator(n.documentKey,e.documentKey)))}function c1(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.Xt=new xt(((t,r)=>At.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Ce(e.collectionGroup===this.collectionId),this.nn)return!1;const t=m0(e);if(t!==void 0&&!this.sn(t))return!1;const r=to(e);let a=new Set,c=0,u=0;for(;c<r.length&&this.sn(r[c]);++c)a=a.add(r[c].fieldPath.canonicalString());if(c===r.length)return!0;if(this.Xt.size>0){const f=this.Xt.getIterator().getNext();if(!a.has(f.field.canonicalString())){const m=r[c];if(!this.on(f,m)||!this._n(this.en[u++],m))return!1}++c}for(;c<r.length;++c){const f=r[c];if(u>=this.en.length||!this._n(this.en[u++],f))return!1}return!0}an(){if(this.nn)return null;let e=new xt(At.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new bf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new bf(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new bf(r.field,r.dir==="asc"?0:1)));return new Mf(Mf.UNKNOWN_ID,this.collectionId,t,Qu.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(n){var e,t;if(Ce(n instanceof tt||n instanceof ft),n instanceof tt){if(n instanceof J2){const a=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((c=>tt.create(n.field,"==",c))))||[];return ft.create(a,"or")}return n}const r=n.filters.map((a=>DT(a)));return ft.create(r,n.op)}function a4(n){if(n.getFilters().length===0)return[];const e=j0(DT(n));return Ce(MT(e)),S0(e)||A0(e)?[e]:e.getFilters()}function S0(n){return n instanceof tt}function A0(n){return n instanceof ft&&yx(n)}function MT(n){return S0(n)||A0(n)||(function(t){if(t instanceof ft&&y0(t)){for(const r of t.getFilters())if(!S0(r)&&!A0(r))return!1;return!0}return!1})(n)}function j0(n){if(Ce(n instanceof tt||n instanceof ft),n instanceof tt)return n;if(n.filters.length===1)return j0(n.filters[0]);const e=n.filters.map((r=>j0(r)));let t=ft.create(e,n.op);return t=Uf(t),MT(t)?t:(Ce(t instanceof ft),Ce(Gl(t)),Ce(t.filters.length>1),t.filters.reduce(((r,a)=>Ix(r,a))))}function Ix(n,e){let t;return Ce(n instanceof tt||n instanceof ft),Ce(e instanceof tt||e instanceof ft),t=n instanceof tt?e instanceof tt?(function(a,c){return ft.create([a,c],"and")})(n,e):d1(n,e):e instanceof tt?d1(e,n):(function(a,c){if(Ce(a.filters.length>0&&c.filters.length>0),Gl(a)&&Gl(c))return Y2(a,c.getFilters());const u=y0(a)?a:c,f=y0(a)?c:a,m=u.filters.map((x=>Ix(x,f)));return ft.create(m,"or")})(n,e),Uf(t)}function d1(n,e){if(Gl(e))return Y2(e,n.getFilters());{const t=e.filters.map((r=>Ix(n,r)));return ft.create(t,"or")}}function Uf(n){if(Ce(n instanceof tt||n instanceof ft),n instanceof tt)return n;const e=n.getFilters();if(e.length===1)return Uf(e[0]);if($2(n))return n;const t=e.map((a=>Uf(a))),r=[];return t.forEach((a=>{a instanceof tt?r.push(a):a instanceof ft&&(a.op===n.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:ft.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(){this.un=new Rx}addToCollectionParentIndex(e,t){return this.un.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(bs.min())}updateCollectionGroup(e,t,r){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class Rx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new xt(et.comparator),c=!a.has(r);return this.index[t]=a.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new xt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of=new Uint8Array(0);class l4{constructor(e,t){this.databaseId=t,this.cn=new Rx,this.ln=new ba((r=>bo(r)),((r,a)=>_d(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.cn.add(t)}));const c={collectionId:r,parent:Bn(a)};return h1(e).put(c)}return J.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[R2(t),""],!1,!0);return h1(e).U(a).next((c=>{for(const u of c){if(u.collectionId!==t)break;r.push(pr(u.parent))}return r}))}addFieldIndex(e,t){const r=yu(e),a=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(t);delete a.indexId;const c=r.add(a);if(t.indexState){const u=Nl(e);return c.next((f=>{u.put(i1(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return c.next()}deleteFieldIndex(e,t){const r=yu(e),a=Nl(e),c=wl(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=yu(e),r=wl(e),a=Nl(e);return t.j().next((()=>r.j())).next((()=>a.j()))}createTargetIndexes(e,t){return J.forEach(this.hn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const c=new u1(r).an();if(c!=null)return this.addFieldIndex(e,c)}}))))}getDocumentsMatchingTarget(e,t){const r=wl(e);let a=!0;const c=new Map;return J.forEach(this.hn(t),(u=>this.Pn(e,u).next((f=>{a&&(a=!!f),c.set(u,f)})))).next((()=>{if(a){let u=Ge();const f=[];return J.forEach(c,((m,x)=>{ge("IndexedDbIndexManager",`Using index ${(function(ee){return`id=${ee.indexId}|cg=${ee.collectionGroup}|f=${ee.fields.map((z=>`${z.fieldPath}:${z.kind}`)).join(",")}`})(m)} to execute ${bo(t)}`);const y=(function(ee,z){const F=m0(z);if(F===void 0)return null;for(const G of Of(ee,F.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null})(x,m),v=(function(ee,z){const F=new Map;for(const G of to(z))for(const C of Of(ee,G.fieldPath))switch(C.op){case"==":case"in":F.set(G.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return F.set(G.fieldPath.canonicalString(),C.value),Array.from(F.values())}return null})(x,m),E=(function(ee,z){const F=[];let G=!0;for(const C of to(z)){const T=C.kind===0?Hw(ee,C.fieldPath,ee.startAt):Gw(ee,C.fieldPath,ee.startAt);F.push(T.value),G&&(G=T.inclusive)}return new ua(F,G)})(x,m),A=(function(ee,z){const F=[];let G=!0;for(const C of to(z)){const T=C.kind===0?Gw(ee,C.fieldPath,ee.endAt):Hw(ee,C.fieldPath,ee.endAt);F.push(T.value),G&&(G=T.inclusive)}return new ua(F,G)})(x,m),V=this.In(m,x,E),R=this.In(m,x,A),O=this.Tn(m,x,v),H=this.En(m.indexId,y,V,E.inclusive,R,A.inclusive,O);return J.forEach(H,(ae=>r.G(ae,t.limit).next((ee=>{ee.forEach((z=>{const F=Se.fromSegments(z.documentKey);u.has(F)||(u=u.add(F),f.push(F))}))}))))})).next((()=>f))}return J.resolve(null)}))}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=a4(ft.create(e.filters,"and")).map((r=>v0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,t),t)}En(e,t,r,a,c,u,f){const m=(t!=null?t.length:1)*Math.max(r.length,c.length),x=m/(t!=null?t.length:1),y=[];for(let v=0;v<m;++v){const E=t?this.dn(t[v/x]):of,A=this.An(e,E,r[v%x],a),V=this.Rn(e,E,c[v%x],u),R=f.map((O=>this.An(e,E,O,!0)));y.push(...this.createRange(A,V,R))}return y}An(e,t,r,a){const c=new io(e,Se.empty(),t,r);return a?c:c.Zt()}Rn(e,t,r,a){const c=new io(e,Se.empty(),t,r);return a?c.Zt():c}Pn(e,t){const r=new u1(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((c=>{let u=null;for(const f of c)r.rn(f)&&(!u||f.fields.length>u.fields.length)&&(u=f);return u}))}getIndexType(e,t){let r=2;const a=this.hn(t);return J.forEach(a,(c=>this.Pn(e,c).next((u=>{u?r!==0&&u.fields.length<(function(m){let x=new xt(At.comparator),y=!1;for(const v of m.filters)for(const E of v.getFlattenedFilters())E.field.isKeyField()||(E.op==="array-contains"||E.op==="array-contains-any"?y=!0:x=x.add(E.field));for(const v of m.orderBy)v.field.isKeyField()||(x=x.add(v.field));return x.size+(y?1:0)})(c)&&(r=1):r=0})))).next((()=>(function(u){return u.limit!==null})(t)&&a.length>1&&r===2?1:r))}Vn(e,t){const r=new xu;for(const a of to(e)){const c=t.data.field(a.fieldPath);if(c==null)return null;const u=r.Yt(a.kind);ro.vt.It(c,u)}return r.zt()}dn(e){const t=new xu;return ro.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new xu;return ro.vt.It(yo(this.databaseId,t),r.Yt((function(c){const u=to(c);return u.length===0?0:u[u.length-1].kind})(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let a=[];a.push(new xu);let c=0;for(const u of to(e)){const f=r[c++];for(const m of a)if(this.fn(t,u.fieldPath)&&Ju(f))a=this.gn(a,u,f);else{const x=m.Yt(u.kind);ro.vt.It(f,x)}}return this.pn(a)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const a=[...e],c=[];for(const u of r.arrayValue.values||[])for(const f of a){const m=new xu;m.seed(f.zt()),ro.vt.It(u,m.Yt(t.kind)),c.push(m)}return c}fn(e,t){return!!e.filters.find((r=>r instanceof tt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=yu(e),a=Nl(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next((c=>{const u=[];return J.forEach(c,(f=>a.get([f.indexId,this.uid]).next((m=>{u.push((function(y,v){const E=v?new Qu(v.sequenceNumber,new bs(No(v.readTime),new Se(pr(v.documentKey)),v.largestBatchId)):Qu.empty(),A=y.fields.map((([V,R])=>new bf(At.fromServerFormat(V),R)));return new Mf(y.indexId,y.collectionGroup,A,E)})(f,m))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const c=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return c!==0?c:ze(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=yu(e),c=Nl(e);return this.yn(e).next((u=>a.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((f=>J.forEach(f,(m=>c.put(i1(m.indexId,this.uid,u,r))))))))}updateIndexEntries(e,t){const r=new Map;return J.forEach(t,((a,c)=>{const u=r.get(a.collectionGroup);return(u?J.resolve(u):this.getFieldIndexes(e,a.collectionGroup)).next((f=>(r.set(a.collectionGroup,f),J.forEach(f,(m=>this.wn(e,a,m).next((x=>{const y=this.Sn(c,m);return x.isEqual(y)?J.resolve():this.bn(e,c,m,x,y)})))))))}))}Dn(e,t,r,a){return wl(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,a){return wl(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const a=wl(e);let c=new xt(Qi);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},((u,f)=>{c=c.add(new io(r.indexId,t,f.arrayValue,f.directionalValue))})).next((()=>c))}Sn(e,t){let r=new xt(Qi);const a=this.Vn(t,e);if(a==null)return r;const c=m0(t);if(c!=null){const u=e.data.field(c.fieldPath);if(Ju(u))for(const f of u.arrayValue.values||[])r=r.add(new io(t.indexId,e.key,this.dn(f),a))}else r=r.add(new io(t.indexId,e.key,of,a));return r}bn(e,t,r,a,c){ge("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return(function(m,x,y,v,E){const A=m.getIterator(),V=x.getIterator();let R=_l(A),O=_l(V);for(;R||O;){let H=!1,ae=!1;if(R&&O){const ee=y(R,O);ee<0?ae=!0:ee>0&&(H=!0)}else R!=null?ae=!0:H=!0;H?(v(O),O=_l(V)):ae?(E(R),R=_l(A)):(R=_l(A),O=_l(V))}})(a,c,Qi,(f=>{u.push(this.Dn(e,t,r,f))}),(f=>{u.push(this.vn(e,t,r,f))})),J.waitFor(u)}yn(e){let t=1;return Nl(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,c)=>{c.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((u,f)=>Qi(u,f))).filter(((u,f,m)=>!f||Qi(u,m[f-1])!==0));const a=[];a.push(e);for(const u of r){const f=Qi(u,e),m=Qi(u,t);if(f===0)a[0]=e.Zt();else if(f>0&&m<0)a.push(u),a.push(u.Zt());else if(m>0)break}a.push(t);const c=[];for(let u=0;u<a.length;u+=2){if(this.Cn(a[u],a[u+1]))return[];const f=[a[u].indexId,this.uid,a[u].arrayValue,a[u].directionalValue,of,[]],m=[a[u+1].indexId,this.uid,a[u+1].arrayValue,a[u+1].directionalValue,of,[]];c.push(IDBKeyRange.bound(f,m))}return c}Cn(e,t){return Qi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(f1)}getMinOffset(e,t){return J.mapArray(this.hn(t),(r=>this.Pn(e,r).next((a=>a||je())))).next(f1)}}function h1(n){return un(n,"collectionParents")}function wl(n){return un(n,"indexEntries")}function yu(n){return un(n,"indexConfiguration")}function Nl(n){return un(n,"indexState")}function f1(n){Ce(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;mx(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new bs(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ts{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ts(e,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(n,e,t){const r=n.store("mutations"),a=n.store("documentMutations"),c=[],u=IDBKeyRange.only(t.batchId);let f=0;const m=r.J({range:u},((y,v,E)=>(f++,E.delete())));c.push(m.next((()=>{Ce(f===1)})));const x=[];for(const y of t.mutations){const v=V2(e,y.key.path,t.batchId);c.push(a.delete(v)),x.push(y.key)}return J.waitFor(c).next((()=>x))}function Ff(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw je();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ts.DEFAULT_COLLECTION_PERCENTILE=10,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ts.DEFAULT=new ts(41943040,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ts.DISABLED=new ts(-1,0,0);class mm{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Fn={}}static lt(e,t,r,a){Ce(e.uid!=="");const c=e.isAuthenticated()?e.uid:"";return new mm(c,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yi(e).J({index:"userMutationsIndex",range:r},((a,c,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const c=Cl(e),u=Yi(e);return u.add({}).next((f=>{Ce(typeof f=="number");const m=new Nx(f,t,r,a),x=(function(A,V,R){const O=R.baseMutations.map((ae=>td(A.ct,ae))),H=R.mutations.map((ae=>td(A.ct,ae)));return{userId:V,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:O,mutations:H}})(this.serializer,this.userId,m),y=[];let v=new xt(((E,A)=>ze(E.canonicalString(),A.canonicalString())));for(const E of a){const A=V2(this.userId,E.key.path,f);v=v.add(E.key.path.popLast()),y.push(u.put(x)),y.push(c.put(A,Q5))}return v.forEach((E=>{y.push(this.indexManager.addToCollectionParentIndex(e,E))})),e.addOnCommittedListener((()=>{this.Fn[f]=m.keys()})),J.waitFor(y).next((()=>m))}))}lookupMutationBatch(e,t){return Yi(e).get(t).next((r=>r?(Ce(r.userId===this.userId),so(this.serializer,r)):null))}Mn(e,t){return this.Fn[t]?J.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Fn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return Yi(e).J({index:"userMutationsIndex",range:a},((u,f,m)=>{f.userId===this.userId&&(Ce(f.batchId>=r),c=so(this.serializer,f)),m.done()})).next((()=>c))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Yi(e).J({index:"userMutationsIndex",range:t,reverse:!0},((a,c,u)=>{r=c.batchId,u.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Yi(e).U("userMutationsIndex",t).next((r=>r.map((a=>so(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=vf(this.userId,t.path),a=IDBKeyRange.lowerBound(r),c=[];return Cl(e).J({range:a},((u,f,m)=>{const[x,y,v]=u,E=pr(y);if(x===this.userId&&t.path.isEqual(E))return Yi(e).get(v).next((A=>{if(!A)throw je();Ce(A.userId===this.userId),c.push(so(this.serializer,A))}));m.done()})).next((()=>c))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xt(ze);const a=[];return t.forEach((c=>{const u=vf(this.userId,c.path),f=IDBKeyRange.lowerBound(u),m=Cl(e).J({range:f},((x,y,v)=>{const[E,A,V]=x,R=pr(A);E===this.userId&&c.path.isEqual(R)?r=r.add(V):v.done()}));a.push(m)})),J.waitFor(a).next((()=>this.xn(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,c=vf(this.userId,r),u=IDBKeyRange.lowerBound(c);let f=new xt(ze);return Cl(e).J({range:u},((m,x,y)=>{const[v,E,A]=m,V=pr(E);v===this.userId&&r.isPrefixOf(V)?V.length===a&&(f=f.add(A)):y.done()})).next((()=>this.xn(e,f)))}xn(e,t){const r=[],a=[];return t.forEach((c=>{a.push(Yi(e).get(c).next((u=>{if(u===null)throw je();Ce(u.userId===this.userId),r.push(so(this.serializer,u))})))})),J.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return PT(e._e,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.On(t.batchId)})),J.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return J.resolve();const r=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),a=[];return Cl(e).J({range:r},((c,u,f)=>{if(c[0]===this.userId){const m=pr(c[1]);a.push(m)}else f.done()})).next((()=>{Ce(a.length===0)}))}))}containsKey(e,t){return OT(e,this.userId,t)}Nn(e){return VT(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function OT(n,e,t){const r=vf(e,t.path),a=r[1],c=IDBKeyRange.lowerBound(r);let u=!1;return Cl(n).J({range:c,H:!0},((f,m,x)=>{const[y,v,E]=f;y===e&&v===a&&(u=!0),x.done()})).next((()=>u))}function Yi(n){return un(n,"mutations")}function Cl(n){return un(n,"documentMutations")}function VT(n){return un(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new To(0)}static kn(){return new To(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next((t=>{const r=new To(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((t=>Pe.fromTimestamp(new It(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.qn(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Qn(e,a))))}addTargetData(e,t){return this.Kn(e,t).next((()=>this.qn(e).next((r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Tl(e).delete(t.targetId))).next((()=>this.qn(e))).next((r=>(Ce(r.targetCount>0),r.targetCount-=1,this.Qn(e,r))))}removeTargets(e,t,r){let a=0;const c=[];return Tl(e).J(((u,f)=>{const m=ju(f);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(a++,c.push(this.removeTargetData(e,m)))})).next((()=>J.waitFor(c))).next((()=>a))}forEachTarget(e,t){return Tl(e).J(((r,a)=>{const c=ju(a);t(c)}))}qn(e){return p1(e).get("targetGlobalKey").next((t=>(Ce(t!==null),t)))}Qn(e,t){return p1(e).put("targetGlobalKey",t)}Kn(e,t){return Tl(e).put(kT(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next((t=>t.targetCount))}getTargetData(e,t){const r=bo(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return Tl(e).J({range:a,index:"queryTargetsIndex"},((u,f,m)=>{const x=ju(f);_d(t,x.target)&&(c=x,m.done())})).next((()=>c))}addMatchingKeys(e,t,r){const a=[],c=Xi(e);return t.forEach((u=>{const f=Bn(u.path);a.push(c.put({targetId:r,path:f})),a.push(this.referenceDelegate.addReference(e,r,u))})),J.waitFor(a)}removeMatchingKeys(e,t,r){const a=Xi(e);return J.forEach(t,(c=>{const u=Bn(c.path);return J.waitFor([a.delete([r,u]),this.referenceDelegate.removeReference(e,r,c)])}))}removeMatchingKeysForTargetId(e,t){const r=Xi(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Xi(e);let c=Ge();return a.J({range:r,H:!0},((u,f,m)=>{const x=pr(u[1]),y=new Se(x);c=c.add(y)})).next((()=>c))}containsKey(e,t){const r=Bn(t.path),a=IDBKeyRange.bound([r],[R2(r)],!1,!0);let c=0;return Xi(e).J({index:"documentTargetsIndex",H:!0,range:a},(([u,f],m,x)=>{u!==0&&(c++,x.done())})).next((()=>c>0))}ot(e,t){return Tl(e).get(t).next((r=>r?ju(r):null))}}function Tl(n){return un(n,"targets")}function p1(n){return un(n,"targetGlobal")}function Xi(n){return un(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1([n,e],[t,r]){const a=ze(n,t);return a===0?ze(e,r):a}class u4{constructor(e){this.Un=e,this.buffer=new xt(g1),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();g1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class d4{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){ge("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ya(t)?ge("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await xa(t)}await this.Hn(3e5)}))}}class h4{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return J.resolve(ns.oe);const r=new u4(t);return this.Jn.forEachTarget(e,(a=>r.zn(a.sequenceNumber))).next((()=>this.Jn.Zn(e,(a=>r.zn(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(m1)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),m1):this.Xn(e,t)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,a,c,u,f,m,x;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,u=Date.now(),this.nthSequenceNumber(e,a)))).next((v=>(r=v,f=Date.now(),this.removeTargets(e,r,t)))).next((v=>(c=v,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((v=>(x=Date.now(),Al()<=Xe.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${a} in `+(f-u)+`ms
	Removed ${c} targets in `+(m-f)+`ms
	Removed ${v} documents in `+(x-m)+`ms
Total Duration: ${x-y}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:v}))))}}function f4(n,e){return new h4(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,t){this.db=e,this.garbageCollector=f4(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}er(e){let t=0;return this.Zn(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,((r,a)=>t(a)))}addReference(e,t,r){return lf(e,r)}removeReference(e,t,r){return lf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lf(e,t)}nr(e,t){return(function(a,c){let u=!1;return VT(a).Y((f=>OT(a,f,c).next((m=>(m&&(u=!0),J.resolve(!m)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.tr(e,((u,f)=>{if(f<=t){const m=this.nr(e,u).next((x=>{if(!x)return c++,r.getEntry(e,u).next((()=>(r.removeEntry(u,Pe.min()),Xi(e).delete((function(v){return[0,Bn(v.path)]})(u)))))}));a.push(m)}})).next((()=>J.waitFor(a))).next((()=>r.apply(e))).next((()=>c))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lf(e,t)}tr(e,t){const r=Xi(e);let a,c=ns.oe;return r.J({index:"documentTargetsIndex"},(([u,f],{path:m,sequenceNumber:x})=>{u===0?(c!==ns.oe&&t(new Se(pr(a)),c),c=x,a=m):c=ns.oe})).next((()=>{c!==ns.oe&&t(new Se(pr(a)),c)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lf(n,e){return Xi(n).put((function(r,a){return{targetId:0,path:Bn(r.path),sequenceNumber:a}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(){this.changes=new ba((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?J.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Xa(e).put(r)}removeEntry(e,t,r){return Xa(e).delete((function(c,u){const f=c.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Lf(u),f[f.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.rr(e,r))))}getEntry(e,t){let r=Nt.newInvalidDocument(t);return Xa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bu(t))},((a,c)=>{r=this.ir(t,c)})).next((()=>r))}sr(e,t){let r={size:0,document:Nt.newInvalidDocument(t)};return Xa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bu(t))},((a,c)=>{r={document:this.ir(t,c),size:Ff(c)}})).next((()=>r))}getEntries(e,t){let r=rs();return this._r(e,t,((a,c)=>{const u=this.ir(a,c);r=r.insert(a,u)})).next((()=>r))}ar(e,t){let r=rs(),a=new bt(Se.comparator);return this._r(e,t,((c,u)=>{const f=this.ir(c,u);r=r.insert(c,f),a=a.insert(c,Ff(u))})).next((()=>({documents:r,ur:a})))}_r(e,t,r){if(t.isEmpty())return J.resolve();let a=new xt(b1);t.forEach((m=>a=a.add(m)));const c=IDBKeyRange.bound(bu(a.first()),bu(a.last())),u=a.getIterator();let f=u.getNext();return Xa(e).J({index:"documentKeyIndex",range:c},((m,x,y)=>{const v=Se.fromSegments([...x.prefixPath,x.collectionGroup,x.documentId]);for(;f&&b1(f,v)<0;)r(f,null),f=u.getNext();f&&f.isEqual(v)&&(r(f,x),f=u.hasNext()?u.getNext():null),f?y.$(bu(f)):y.done()})).next((()=>{for(;f;)r(f,null),f=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,c){const u=t.path,f=[u.popLast().toArray(),u.lastSegment(),Lf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xa(e).U(IDBKeyRange.bound(f,m,!0)).next((x=>{c==null||c.incrementDocumentReadCount(x.length);let y=rs();for(const v of x){const E=this.ir(Se.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);E.isFoundDocument()&&(Nd(t,E)||a.has(E.key))&&(y=y.insert(E.key,E))}return y}))}getAllFromCollectionGroup(e,t,r,a){let c=rs();const u=y1(t,r),f=y1(t,bs.max());return Xa(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,f,!0)},((m,x,y)=>{const v=this.ir(Se.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);c=c.insert(v.key,v),c.size===a&&y.done()})).next((()=>c))}newChangeBuffer(e){return new g4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return x1(e).get("remoteDocumentGlobalKey").next((t=>(Ce(!!t),t)))}rr(e,t){return x1(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=ZD(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Pe.min())))return r}return Nt.newInvalidDocument(e)}}function UT(n){return new p4(n)}class g4 extends LT{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new ba((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new xt(((c,u)=>ze(c.canonicalString(),u.canonicalString())));return this.changes.forEach(((c,u)=>{const f=this.lr.get(c);if(t.push(this.cr.removeEntry(e,c,f.readTime)),u.isValidDocument()){const m=s1(this.cr.serializer,u);a=a.add(c.path.popLast());const x=Ff(m);r+=x-f.size,t.push(this.cr.addEntry(e,c,m))}else if(r-=f.size,this.trackRemovals){const m=s1(this.cr.serializer,u.convertToNoDocument(Pe.min()));t.push(this.cr.addEntry(e,c,m))}})),a.forEach((c=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,c))})),t.push(this.cr.updateMetadata(e,r)),J.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next((r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.cr.ar(e,t).next((({documents:r,ur:a})=>(a.forEach(((c,u)=>{this.lr.set(c,{size:u,readTime:r.get(c).readTime})})),r)))}}function x1(n){return un(n,"remoteDocumentGlobal")}function Xa(n){return un(n,"remoteDocumentsV14")}function bu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function y1(n,e){const t=e.documentKey.path.toArray();return[n,Lf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function b1(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<r.length-2;++c)if(a=ze(t[c],r[c]),a)return a;return a=ze(t.length,r.length),a||(a=ze(t[t.length-2],r[r.length-2]),a||ze(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Pu(r.mutation,a,ss.empty(),It.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ge()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ge()){const a=gr();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((c=>{let u=Su();return c.forEach(((f,m)=>{u=u.insert(f,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=gr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ge())))}populateOverlays(e,t,r){const a=[];return r.forEach((c=>{t.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,r,a){let c=rs();const u=Mu(),f=(function(){return Mu()})();return t.forEach(((m,x)=>{const y=r.get(x.key);a.has(x.key)&&(y===void 0||y.mutation instanceof ai)?c=c.insert(x.key,x):y!==void 0?(u.set(x.key,y.mutation.getFieldMask()),Pu(y.mutation,x,y.mutation.getFieldMask(),It.now())):u.set(x.key,ss.empty())})),this.recalculateAndSaveOverlays(e,c).next((m=>(m.forEach(((x,y)=>u.set(x,y))),t.forEach(((x,y)=>{var v;return f.set(x,new x4(y,(v=u.get(x))!==null&&v!==void 0?v:null))})),f)))}recalculateAndSaveOverlays(e,t){const r=Mu();let a=new bt(((u,f)=>u-f)),c=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((m=>{const x=t.get(m);if(x===null)return;let y=r.get(m)||ss.empty();y=f.applyToLocalView(x,y),r.set(m,y);const v=(a.get(f.batchId)||Ge()).add(m);a=a.insert(f.batchId,v)}))})).next((()=>{const u=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),x=m.key,y=m.value,v=iT();y.forEach((E=>{if(!c.has(E)){const A=hT(t.get(E),r.get(E));A!==null&&v.set(E,A),c=c.add(E)}})),u.push(this.documentOverlayCache.saveOverlays(e,x,v))}return J.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(u){return Se.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((c=>{const u=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-c.size):J.resolve(gr());let f=-1,m=c;return u.next((x=>J.forEach(x,((y,v)=>(f<v.largestBatchId&&(f=v.largestBatchId),c.get(y)?J.resolve():this.remoteDocumentCache.getEntry(e,y).next((E=>{m=m.insert(y,E)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,m,x,Ge()))).next((y=>({batchId:f,changes:rT(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next((r=>{let a=Su();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const c=t.collectionGroup;let u=Su();return this.indexManager.getCollectionParents(e,c).next((f=>J.forEach(f,(m=>{const x=(function(v,E){return new ii(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,m.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,r,a).next((y=>{y.forEach(((v,E)=>{u=u.insert(v,E)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,c,a)))).next((u=>{c.forEach(((m,x)=>{const y=x.getKey();u.get(y)===null&&(u=u.insert(y,Nt.newInvalidDocument(y)))}));let f=Su();return u.forEach(((m,x)=>{const y=c.get(m);y!==void 0&&Pu(y.mutation,x,ss.empty(),It.now()),Nd(t,x)&&(f=f.insert(m,x))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return J.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Yt(a.createTime)}})(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(a){return{name:a.name,query:jx(a.bundledQuery),readTime:Yt(a.readTime)}})(t)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(){this.overlays=new bt(Se.comparator),this.Ir=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const r=gr();return J.forEach(t,(a=>this.getOverlay(e,a).next((c=>{c!==null&&r.set(a,c)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,c)=>{this.ht(e,t,c)})),J.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Ir.get(r);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.Ir.delete(r)),J.resolve()}getOverlaysForCollection(e,t,r){const a=gr(),c=t.length+1,u=new Se(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const m=f.getNext().value,x=m.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===c&&m.largestBatchId>r&&a.set(m.getKey(),m)}return J.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let c=new bt(((x,y)=>x-y));const u=this.overlays.getIterator();for(;u.hasNext();){const x=u.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>r){let y=c.get(x.largestBatchId);y===null&&(y=gr(),c=c.insert(x.largestBatchId,y)),y.set(x.getKey(),x)}}const f=gr(),m=c.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((x,y)=>f.set(x,y))),!(f.size()>=a)););return J.resolve(f)}ht(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const u=this.Ir.get(a.largestBatchId).delete(r.key);this.Ir.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Ex(t,r));let c=this.Ir.get(t);c===void 0&&(c=Ge(),this.Ir.set(t,c)),this.Ir.set(t,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this.Tr=new xt(gn.Er),this.dr=new xt(gn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new gn(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Vr(new gn(e,t))}mr(e,t){e.forEach((r=>this.removeReference(r,t)))}gr(e){const t=new Se(new et([])),r=new gn(t,e),a=new gn(t,e+1),c=[];return this.dr.forEachInRange([r,a],(u=>{this.Vr(u),c.push(u.key)})),c}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Se(new et([])),r=new gn(t,e),a=new gn(t,e+1);let c=Ge();return this.dr.forEachInRange([r,a],(u=>{c=c.add(u.key)})),c}containsKey(e){const t=new gn(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class gn{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Se.comparator(e.key,t.key)||ze(e.wr,t.wr)}static Ar(e,t){return ze(e.wr,t.wr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new xt(gn.Er)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const c=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Nx(c,t,r,a);this.mutationQueue.push(u);for(const f of a)this.br=this.br.add(new gn(f.key,c)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return J.resolve(u)}lookupMutationBatch(e,t){return J.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.vr(r),c=a<0?0:a;return J.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new gn(t,0),a=new gn(t,Number.POSITIVE_INFINITY),c=[];return this.br.forEachInRange([r,a],(u=>{const f=this.Dr(u.wr);c.push(f)})),J.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xt(ze);return t.forEach((a=>{const c=new gn(a,0),u=new gn(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([c,u],(f=>{r=r.add(f.wr)}))})),J.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let c=r;Se.isDocumentKey(c)||(c=c.child(""));const u=new gn(new Se(c),0);let f=new xt(ze);return this.br.forEachWhile((m=>{const x=m.key.path;return!!r.isPrefixOf(x)&&(x.length===a&&(f=f.add(m.wr)),!0)}),u),J.resolve(this.Cr(f))}Cr(e){const t=[];return e.forEach((r=>{const a=this.Dr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Ce(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return J.forEach(t.mutations,(a=>{const c=new gn(a.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,t){const r=new gn(t,0),a=this.br.firstAfterOrEqual(r);return J.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e){this.Mr=e,this.docs=(function(){return new bt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),c=a?a.size:0,u=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return J.resolve(r?r.document.mutableCopy():Nt.newInvalidDocument(t))}getEntries(e,t){let r=rs();return t.forEach((a=>{const c=this.docs.get(a);r=r.insert(a,c?c.document.mutableCopy():Nt.newInvalidDocument(a))})),J.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let c=rs();const u=t.path,f=new Se(u.child("")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:x,value:{document:y}}=m.getNext();if(!u.isPrefixOf(x.path))break;x.path.length>u.length+1||mx(k2(y),r)<=0||(a.has(y.key)||Nd(t,y))&&(c=c.insert(y.key,y.mutableCopy()))}return J.resolve(c)}getAllFromCollectionGroup(e,t,r,a){je()}Or(e,t){return J.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new N4(this)}getSize(e){return J.resolve(this.size)}}class N4 extends LT{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.cr.addEntry(e,a)):this.cr.removeEntry(r)})),J.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e){this.persistence=e,this.Nr=new ba((t=>bo(t)),_d),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Cx,this.targetCount=0,this.kr=To.Bn()}forEachTarget(e,t){return this.Nr.forEach(((r,a)=>t(a))),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),J.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new To(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.Kn(t),J.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,r){let a=0;const c=[];return this.Nr.forEach(((u,f)=>{f.sequenceNumber<=t&&r.get(f.targetId)===null&&(this.Nr.delete(u),c.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),J.waitFor(c).next((()=>a))}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return J.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),J.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach((u=>{c.push(a.markPotentiallyOrphaned(e,u))})),J.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return J.resolve(r)}containsKey(e,t){return J.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ns(0),this.Kr=!1,this.Kr=!0,this.$r=new v4,this.referenceDelegate=e(this),this.Ur=new T4(this),this.indexManager=new o4,this.remoteDocumentCache=(function(a){return new w4(a)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new CT(t),this.Gr=new y4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new b4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new _4(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ge("MemoryPersistence","Starting transaction:",e);const a=new E4(this.Qr.next());return this.referenceDelegate.zr(),r(a).next((c=>this.referenceDelegate.jr(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Hr(e,t){return J.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,t))))}}class E4 extends M2{constructor(e){super(),this.currentSequenceNumber=e}}class pm{constructor(e){this.persistence=e,this.Jr=new Cx,this.Yr=null}static Zr(e){return new pm(e)}get Xr(){if(this.Yr)return this.Yr;throw je()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),J.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),J.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((a=>this.Xr.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((c=>this.Xr.add(c.toString())))})).next((()=>r.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Xr,(r=>{const a=Se.fromPath(r);return this.ei(e,a).next((c=>{c||t.removeEntry(a,Pe.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return J.or([()=>J.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e){this.serializer=e}O(e,t,r,a){const c=new lm("createOrUpgrade",t);r<1&&a>=1&&((function(m){m.createObjectStore("owner")})(e),(function(m){m.createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Dw,{unique:!0}),m.createObjectStore("documentMutations")})(e),v1(e),(function(m){m.createObjectStore("remoteDocuments")})(e));let u=J.resolve();return r<3&&a>=3&&(r!==0&&((function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")})(e),v1(e)),u=u.next((()=>(function(m){const x=m.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pe.min().toTimestamp(),targetCount:0};return x.put("targetGlobalKey",y)})(c)))),r<4&&a>=4&&(r!==0&&(u=u.next((()=>(function(m,x){return x.store("mutations").U().next((y=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Dw,{unique:!0});const v=x.store("mutations"),E=y.map((A=>v.put(A)));return J.waitFor(E)}))})(e,c)))),u=u.next((()=>{(function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),r<5&&a>=5&&(u=u.next((()=>this.ni(c)))),r<6&&a>=6&&(u=u.next((()=>((function(m){m.createObjectStore("remoteDocumentGlobal")})(e),this.ri(c))))),r<7&&a>=7&&(u=u.next((()=>this.ii(c)))),r<8&&a>=8&&(u=u.next((()=>this.si(e,c)))),r<9&&a>=9&&(u=u.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(u=u.next((()=>this.oi(c)))),r<11&&a>=11&&(u=u.next((()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(m){m.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),r<12&&a>=12&&(u=u.next((()=>{(function(m){const x=m.createObjectStore("documentOverlays",{keyPath:aD});x.createIndex("collectionPathOverlayIndex",oD,{unique:!1}),x.createIndex("collectionGroupOverlayIndex",lD,{unique:!1})})(e)}))),r<13&&a>=13&&(u=u.next((()=>(function(m){const x=m.createObjectStore("remoteDocumentsV14",{keyPath:Y5});x.createIndex("documentKeyIndex",W5),x.createIndex("collectionGroupIndex",X5)})(e))).next((()=>this._i(e,c))).next((()=>e.deleteObjectStore("remoteDocuments")))),r<14&&a>=14&&(u=u.next((()=>this.ai(e,c)))),r<15&&a>=15&&(u=u.next((()=>(function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:nD}).createIndex("sequenceNumberIndex",sD,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:rD}).createIndex("documentKeyIndex",iD,{unique:!1})})(e)))),r<16&&a>=16&&(u=u.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),r<17&&a>=17&&(u=u.next((()=>{(function(m){m.createObjectStore("globals",{keyPath:"name"})})(e)}))),u}ri(e){let t=0;return e.store("remoteDocuments").J(((r,a)=>{t+=Ff(a)})).next((()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)}))}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next((a=>J.forEach(a,(c=>{const u=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",u).next((f=>J.forEach(f,(m=>{Ce(m.userId===c.userId);const x=so(this.serializer,m);return PT(e,c.userId,x).next((()=>{}))}))))}))))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((a=>{const c=[];return r.J(((u,f)=>{const m=new et(u),x=(function(v){return[0,Bn(v)]})(m);c.push(t.get(x).next((y=>y?J.resolve():(v=>t.put({targetId:0,path:Bn(v),sequenceNumber:a.highestListenSequenceNumber}))(m))))})).next((()=>J.waitFor(c)))}))}si(e,t){e.createObjectStore("collectionParents",{keyPath:tD});const r=t.store("collectionParents"),a=new Rx,c=u=>{if(a.add(u)){const f=u.lastSegment(),m=u.popLast();return r.put({collectionId:f,parent:Bn(m)})}};return t.store("remoteDocuments").J({H:!0},((u,f)=>{const m=new et(u);return c(m.popLast())})).next((()=>t.store("documentMutations").J({H:!0},(([u,f,m],x)=>{const y=pr(f);return c(y.popLast())}))))}oi(e){const t=e.store("targets");return t.J(((r,a)=>{const c=ju(a),u=kT(this.serializer,c);return t.put(u)}))}_i(e,t){const r=t.store("remoteDocuments"),a=[];return r.J(((c,u)=>{const f=t.store("remoteDocumentsV14"),m=(function(v){return v.document?new Se(et.fromString(v.document.name).popFirst(5)):v.noDocument?Se.fromSegments(v.noDocument.path):v.unknownDocument?Se.fromSegments(v.unknownDocument.path):je()})(u).path.toArray(),x={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};a.push(f.put(x))})).next((()=>J.waitFor(a)))}ai(e,t){const r=t.store("mutations"),a=UT(this.serializer),c=new qT(pm.Zr,this.serializer.ct);return r.U().next((u=>{const f=new Map;return u.forEach((m=>{var x;let y=(x=f.get(m.userId))!==null&&x!==void 0?x:Ge();so(this.serializer,m).keys().forEach((v=>y=y.add(v))),f.set(m.userId,y)})),J.forEach(f,((m,x)=>{const y=new xn(x),v=fm.lt(this.serializer,y),E=c.getIndexManager(y),A=mm.lt(y,this.serializer,E,c.referenceDelegate);return new FT(a,A,v,E).recalculateAndSaveOverlaysForDocumentKeys(new p0(t,ns.oe),m).next()}))}))}}function v1(n){n.createObjectStore("targetDocuments",{keyPath:Z5}).createIndex("documentTargetsIndex",eD,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",J5,{unique:!0}),n.createObjectStore("targetGlobal")}const Wg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class kx{constructor(e,t,r,a,c,u,f,m,x,y,v=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=c,this.window=u,this.document=f,this.ci=x,this.li=y,this.hi=v,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=E=>Promise.resolve(),!kx.D())throw new pe(se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new m4(this,a),this.Ai=t+"main",this.serializer=new CT(m),this.Ri=new xr(this.Ai,this.hi,new S4(this.serializer)),this.$r=new t4,this.Ur=new c4(this.referenceDelegate,this.serializer),this.remoteDocumentCache=UT(this.serializer),this.Gr=new e4,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,y===!1&&Qt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new pe(se.FAILED_PRECONDITION,Wg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new ns(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>cf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((t=>this.isPrimary&&!t?this.bi(e).next((()=>!1)):!!t&&this.Di(e).next((()=>!0)))))).catch((e=>{if(ya(e))return ge("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ge("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return vu(e).get("owner").next((t=>J.resolve(this.vi(t))))}Ci(e){return cf(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=un(t,"clientMetadata");return r.U().next((a=>{const c=this.xi(a,18e5),u=a.filter((f=>c.indexOf(f)===-1));return J.forEach(u,(f=>r.delete(f.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?J.resolve(!0):vu(e).get("owner").next((t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new pe(se.FAILED_PRECONDITION,Wg);return!1}}return!(!this.networkEnabled||!this.inForeground)||cf(e).U().next((r=>this.xi(r,5e3).find((a=>{if(this.clientId!==a.clientId){const c=!this.networkEnabled&&a.networkEnabled,u=!this.inForeground&&a.inForeground,f=this.networkEnabled===a.networkEnabled;if(c||u&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ge("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new p0(e,ns.oe);return this.bi(t).next((()=>this.Ci(t)))})),this.Ri.close(),this.qi()}xi(e,t){return e.filter((r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>cf(e).U().next((t=>this.xi(t,18e5).map((r=>r.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return mm.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new l4(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return fm.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){ge("IndexedDbPersistence","Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",c=(function(m){return m===17?dD:m===16?uD:m===15?gx:m===14?F2:m===13?U2:m===12?cD:m===11?L2:void je()})(this.hi);let u;return this.Ri.runTransaction(e,a,c,(f=>(u=new p0(f,this.Qr?this.Qr.next():ns.oe),t==="readwrite-primary"?this.wi(u).next((m=>!!m||this.Si(u))).next((m=>{if(!m)throw Qt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new pe(se.FAILED_PRECONDITION,D2);return r(u)})).next((m=>this.Di(u).next((()=>m)))):this.Ki(u).next((()=>r(u)))))).then((f=>(u.raiseOnCommittedEvent(),f)))}Ki(e){return vu(e).get("owner").next((t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new pe(se.FAILED_PRECONDITION,Wg)}))}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vu(e).put("owner",t)}static D(){return xr.D()}bi(e){const t=vu(e);return t.get("owner").next((r=>this.vi(r)?(ge("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):J.resolve()))}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Qt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;uN()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return ge("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Qt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Qt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vu(n){return un(n,"owner")}function cf(n){return un(n,"clientMetadata")}function Dx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=a}static Wi(e,t){let r=Ge(),a=Ge();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Mx(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return uN()?8:P2(Dt())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,a){const c={result:null};return this.Yi(e,t).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.Zi(e,t,a,r).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new A4;return this.Xi(e,t,u).next((f=>{if(c.result=f,this.zi)return this.es(e,t,u,f.size)}))})).next((()=>c.result))}es(e,t,r,a){return r.documentReadCount<this.ji?(Al()<=Xe.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",jl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),J.resolve()):(Al()<=Xe.DEBUG&&ge("QueryEngine","Query:",jl(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.Hi*a?(Al()<=Xe.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",jl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zn(t))):J.resolve())}Yi(e,t){if(Kw(t))return J.resolve(null);let r=zn(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Vf(t,null,"F"),r=zn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const u=Ge(...c);return this.Ji.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,r).next((m=>{const x=this.ts(t,f);return this.ns(t,x,u,m.readTime)?this.Yi(e,Vf(t,null,"F")):this.rs(e,x,t,m)}))))})))))}Zi(e,t,r,a){return Kw(t)||a.isEqual(Pe.min())?J.resolve(null):this.Ji.getDocuments(e,r).next((c=>{const u=this.ts(t,c);return this.ns(t,u,r,a)?J.resolve(null):(Al()<=Xe.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),jl(t)),this.rs(e,u,t,C2(a,-1)).next((f=>f)))}))}ts(e,t){let r=new xt(nT(e));return t.forEach(((a,c)=>{Nd(e,c)&&(r=r.add(c))})),r}ns(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Xi(e,t,r){return Al()<=Xe.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",jl(t)),this.Ji.getDocumentsMatchingQuery(e,t,bs.min(),r)}rs(e,t,r,a){return this.Ji.getDocumentsMatchingQuery(e,r,a).next((c=>(t.forEach((u=>{c=c.insert(u.key,u)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,t,r,a){this.persistence=e,this.ss=t,this.serializer=a,this.os=new bt(ze),this._s=new ba((c=>bo(c)),_d),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function zT(n,e,t,r){return new j4(n,e,t,r)}async function HT(n,e){const t=Ae(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((c=>(a=c,t.ls(e),t.mutationQueue.getAllMutationBatches(r)))).next((c=>{const u=[],f=[];let m=Ge();for(const x of a){u.push(x.batchId);for(const y of x.mutations)m=m.add(y.key)}for(const x of c){f.push(x.batchId);for(const y of x.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(r,m).next((x=>({hs:x,removedBatchIds:u,addedBatchIds:f})))}))}))}function I4(n,e){const t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),c=t.cs.newChangeBuffer({trackRemovals:!0});return(function(f,m,x,y){const v=x.batch,E=v.keys();let A=J.resolve();return E.forEach((V=>{A=A.next((()=>y.getEntry(m,V))).next((R=>{const O=x.docVersions.get(V);Ce(O!==null),R.version.compareTo(O)<0&&(v.applyToRemoteDocument(R,x),R.isValidDocument()&&(R.setReadTime(x.commitVersion),y.addEntry(R)))}))})),A.next((()=>f.mutationQueue.removeMutationBatch(m,v)))})(t,r,e,c).next((()=>c.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let m=Ge();for(let x=0;x<f.mutationResults.length;++x)f.mutationResults[x].transformResults.length>0&&(m=m.add(f.batch.mutations[x].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function GT(n){const e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function R4(n,e){const t=Ae(n),r=e.snapshotVersion;let a=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=t.cs.newChangeBuffer({trackRemovals:!0});a=t.os;const f=[];e.targetChanges.forEach(((y,v)=>{const E=a.get(v);if(!E)return;f.push(t.Ur.removeMatchingKeys(c,y.removedDocuments,v).next((()=>t.Ur.addMatchingKeys(c,y.addedDocuments,v))));let A=E.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(v)!==null?A=A.withResumeToken(Ft.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,r)),a=a.insert(v,A),(function(R,O,H){return R.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(E,A,y)&&f.push(t.Ur.updateTargetData(c,A))}));let m=rs(),x=Ge();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(c,y))})),f.push(KT(c,u,e.documentUpdates).next((y=>{m=y.Ps,x=y.Is}))),!r.isEqual(Pe.min())){const y=t.Ur.getLastRemoteSnapshotVersion(c).next((v=>t.Ur.setTargetsMetadata(c,c.currentSequenceNumber,r)));f.push(y)}return J.waitFor(f).next((()=>u.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,m,x))).next((()=>m))})).then((c=>(t.os=a,c)))}function KT(n,e,t){let r=Ge(),a=Ge();return t.forEach((c=>r=r.add(c))),e.getEntries(n,r).next((c=>{let u=rs();return t.forEach(((f,m)=>{const x=c.get(f);m.isFoundDocument()!==x.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(Pe.min())?(e.removeEntry(f,m.readTime),u=u.insert(f,m)):!x.isValidDocument()||m.version.compareTo(x.version)>0||m.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(m),u=u.insert(f,m)):ge("LocalStore","Ignoring outdated watch update for ",f,". Current version:",x.version," Watch version:",m.version)})),{Ps:u,Is:a}}))}function C4(n,e){const t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Yl(n,e){const t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.Ur.getTargetData(r,e).next((c=>c?(a=c,J.resolve(a)):t.Ur.allocateTargetId(r).next((u=>(a=new Xr(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.os.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r}))}async function Wl(n,e,t){const r=Ae(n),a=r.os.get(e),c=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",c,(u=>r.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!ya(u))throw u;ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.os=r.os.remove(e),r._s.delete(a.target)}function qf(n,e,t){const r=Ae(n);let a=Pe.min(),c=Ge();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,x,y){const v=Ae(m),E=v._s.get(y);return E!==void 0?J.resolve(v.os.get(E)):v.Ur.getTargetData(x,y)})(r,u,zn(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(u,f.targetId).next((m=>{c=m}))})).next((()=>r.ss.getDocumentsMatchingQuery(u,e,t?a:Pe.min(),t?c:Ge()))).next((f=>(YT(r,tT(e),f),{documents:f,Ts:c})))))}function $T(n,e){const t=Ae(n),r=Ae(t.Ur),a=t.os.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(c=>r.ot(c,e).next((u=>u?u.target:null))))}function QT(n,e){const t=Ae(n),r=t.us.get(e)||Pe.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.cs.getAllFromCollectionGroup(a,e,C2(r,-1),Number.MAX_SAFE_INTEGER))).then((a=>(YT(t,e,a),a)))}function YT(n,e,t){let r=n.us.get(e)||Pe.min();t.forEach(((a,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),n.us.set(e,r)}async function k4(n,e,t,r){const a=Ae(n);let c=Ge(),u=rs();for(const x of t){const y=e.Es(x.metadata.name);x.document&&(c=c.add(y));const v=e.ds(x);v.setReadTime(e.As(x.metadata.readTime)),u=u.insert(y,v)}const f=a.cs.newChangeBuffer({trackRemovals:!0}),m=await Yl(a,(function(y){return zn(lc(et.fromString(`__bundle__/docs/${y}`)))})(r));return a.persistence.runTransaction("Apply bundle documents","readwrite",(x=>KT(x,f,u).next((y=>(f.apply(x),y))).next((y=>a.Ur.removeMatchingKeysForTargetId(x,m.targetId).next((()=>a.Ur.addMatchingKeys(x,c,m.targetId))).next((()=>a.localDocuments.getLocalViewOfDocuments(x,y.Ps,y.Is))).next((()=>y.Ps))))))}async function D4(n,e,t=Ge()){const r=await Yl(n,zn(jx(e.bundledQuery))),a=Ae(n);return a.persistence.runTransaction("Save named query","readwrite",(c=>{const u=Yt(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return a.Gr.saveNamedQuery(c,e);const f=r.withResumeToken(Ft.EMPTY_BYTE_STRING,u);return a.os=a.os.insert(f.targetId,f),a.Ur.updateTargetData(c,f).next((()=>a.Ur.removeMatchingKeysForTargetId(c,r.targetId))).next((()=>a.Ur.addMatchingKeys(c,t,r.targetId))).next((()=>a.Gr.saveNamedQuery(c,e)))}))}function _1(n,e){return`firestore_clients_${n}_${e}`}function w1(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Xg(n,e){return`firestore_targets_${n}_${e}`}class Bf{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Rs(e,t,r){const a=JSON.parse(r);let c,u=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return u&&a.error&&(u=typeof a.error.message=="string"&&typeof a.error.code=="string",u&&(c=new pe(a.error.code,a.error.message))),u?new Bf(e,t,a.state,c):(Qt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ou{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let a,c=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return c&&r.error&&(c=typeof r.error.message=="string"&&typeof r.error.code=="string",c&&(a=new pe(r.error.code,r.error.message))),c?new Ou(e,r.state,a):(Qt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,c=vx();for(let u=0;a&&u<r.activeTargetIds.length;++u)a=O2(r.activeTargetIds[u]),c=c.add(r.activeTargetIds[u]);return a?new zf(e,c):(Qt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Px{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Px(t.clientId,t.onlineState):(Qt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class I0{constructor(){this.activeTargetIds=vx()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jg{constructor(e,t,r,a,c){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new bt(ze),this.started=!1,this.bs=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.Ds=_1(this.persistenceKey,this.ps),this.vs=(function(m){return`firestore_sequence_number_${m}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new I0),this.Cs=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.xs=(function(m){return`firestore_online_state_${m}`})(this.persistenceKey),this.Os=(function(m){return`firestore_bundle_loaded_v2_${m}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const a=this.getItem(_1(this.persistenceKey,r));if(a){const c=zf.Rs(r,a);c&&(this.Ss=this.Ss.insert(c.clientId,c))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const r=this.Ls(t);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Xg(this.persistenceKey,e));if(a){const c=Ou.Rs(e,a);c&&(r=c.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xg(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.Qs(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ge("SharedClientState","READ",e,t),t}setItem(e,t){ge("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ge("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(ge("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Qt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const r=this.Gs(t.key);return this.zs(r,null)}{const r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){const r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){const r=(function(c){let u=ns.oe;if(c!=null)try{const f=JSON.parse(c);Ce(typeof f=="number"),u=f}catch(f){Qt("SharedClientState","Failed to read sequence number from WebStorage",f)}return u})(t.newValue);r!==ns.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){const r=this.Xs(t.newValue);await Promise.all(r.map((a=>this.syncEngine.eo(a))))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const a=new Bf(this.currentUser,e,t,r),c=w1(this.persistenceKey,this.currentUser,e);this.setItem(c,a.Vs())}Qs(e){const t=w1(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){const a=Xg(this.persistenceKey,e),c=new Ou(e,t,r);this.setItem(a,c.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return zf.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),a=Number(r[1]),c=r[2]!==void 0?r[2]:null;return Bf.Rs(new xn(c),a,t)}Ys(e,t){const r=this.Ms.exec(e),a=Number(r[1]);return Ou.Rs(a,t)}Ls(e){return Px.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);ge("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),a=this.ks(this.Ss),c=this.ks(r),u=[],f=[];return c.forEach((m=>{a.has(m)||u.push(m)})),a.forEach((m=>{c.has(m)||f.push(m)})),this.syncEngine.io(u,f).then((()=>{this.Ss=r}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=vx();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class WT{constructor(){this.so=new I0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new I0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf=null;function Zg(){return uf===null?uf=(function(){return 268435456+Math.round(2147483648*Math.random())})():uf++,"0x"+uf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn="WebChannelConnection";class V4 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${a}/databases/${c}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${c}`}get Fo(){return!1}Mo(t,r,a,c,u){const f=Zg(),m=this.xo(t,r.toUriEncodedString());ge("RestConnection",`Sending RPC '${t}' ${f}:`,m,a);const x={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(x,c,u),this.No(t,m,x,a).then((y=>(ge("RestConnection",`Received RPC '${t}' ${f}: `,y),y)),(y=>{throw _r("RestConnection",`RPC '${t}' ${f} failed with error: `,y,"url: ",m,"request:",a),y}))}Lo(t,r,a,c,u,f){return this.Mo(t,r,a,c,u)}Oo(t,r,a){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+oc})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((c,u)=>t[u]=c)),a&&a.headers.forEach(((c,u)=>t[u]=c))}xo(t,r){const a=P4[t];return`${this.Do}/v1/${r}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,a){const c=Zg();return new Promise(((u,f)=>{const m=new N2;m.setWithCredentials(!0),m.listenOnce(T2.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case yf.NO_ERROR:const y=m.getResponseJson();ge(kn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case yf.TIMEOUT:ge(kn,`RPC '${e}' ${c} timed out`),f(new pe(se.DEADLINE_EXCEEDED,"Request time out"));break;case yf.HTTP_ERROR:const v=m.getStatus();if(ge(kn,`RPC '${e}' ${c} failed with status:`,v,"response text:",m.getResponseText()),v>0){let E=m.getResponseJson();Array.isArray(E)&&(E=E[0]);const A=E==null?void 0:E.error;if(A&&A.status&&A.message){const V=(function(O){const H=O.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(H)>=0?H:se.UNKNOWN})(A.status);f(new pe(V,A.message))}else f(new pe(se.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new pe(se.UNAVAILABLE,"Connection failed."));break;default:je()}}finally{ge(kn,`RPC '${e}' ${c} completed.`)}}));const x=JSON.stringify(a);ge(kn,`RPC '${e}' ${c} sending request:`,a),m.send(t,"POST",x,r,15)}))}Bo(e,t,r){const a=Zg(),c=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=A2(),f=S2(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(m.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Oo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const y=c.join("");ge(kn,`Creating RPC '${e}' stream ${a}: ${y}`,m);const v=u.createWebChannel(y,m);let E=!1,A=!1;const V=new O4({Io:O=>{A?ge(kn,`Not sending because RPC '${e}' stream ${a} is closed:`,O):(E||(ge(kn,`Opening RPC '${e}' stream ${a} transport.`),v.open(),E=!0),ge(kn,`RPC '${e}' stream ${a} sending:`,O),v.send(O))},To:()=>v.close()}),R=(O,H,ae)=>{O.listen(H,(ee=>{try{ae(ee)}catch(z){setTimeout((()=>{throw z}),0)}}))};return R(v,Eu.EventType.OPEN,(()=>{A||(ge(kn,`RPC '${e}' stream ${a} transport opened.`),V.yo())})),R(v,Eu.EventType.CLOSE,(()=>{A||(A=!0,ge(kn,`RPC '${e}' stream ${a} transport closed`),V.So())})),R(v,Eu.EventType.ERROR,(O=>{A||(A=!0,_r(kn,`RPC '${e}' stream ${a} transport errored:`,O),V.So(new pe(se.UNAVAILABLE,"The operation could not be completed")))})),R(v,Eu.EventType.MESSAGE,(O=>{var H;if(!A){const ae=O.data[0];Ce(!!ae);const ee=ae,z=ee.error||((H=ee[0])===null||H===void 0?void 0:H.error);if(z){ge(kn,`RPC '${e}' stream ${a} received error:`,z);const F=z.status;let G=(function(S){const N=sn[S];if(N!==void 0)return pT(N)})(F),C=z.message;G===void 0&&(G=se.INTERNAL,C="Unknown error status: "+F+" with message "+z.message),A=!0,V.So(new pe(G,C)),v.close()}else ge(kn,`RPC '${e}' stream ${a} received:`,ae),V.bo(ae)}})),R(f,E2.STAT_EVENT,(O=>{O.stat===f0.PROXY?ge(kn,`RPC '${e}' stream ${a} detected buffering proxy`):O.stat===f0.NOPROXY&&ge(kn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{V.wo()}),0),V}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(){return typeof window<"u"?window:null}function Ef(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(n){return new zD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,t,r=1e3,a=1.5,c=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=a,this.Qo=c,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),a=Math.max(0,t-r);a>0&&ge("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,t,r,a,c,u,f,m){this.ui=e,this.Ho=r,this.Jo=a,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ox(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(Qt(t.toString()),Qt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.Yo===t&&this.P_(r,a)}),(r=>{e((()=>{const a=new pe(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(a)}))}))}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((a=>{r((()=>this.I_(a)))})),this.stream.onMessage((a=>{r((()=>++this.e_==1?this.E_(a):this.onNext(a)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class L4 extends JT{constructor(e,t,r,a,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,u),this.serializer=c}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=KD(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Pe.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?Pe.min():u.readTime?Yt(u.readTime):Pe.min()})(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=T0(this.serializer),t.addTarget=(function(c,u){let f;const m=u.target;if(f=Pf(m)?{documents:ET(c,m)}:{query:ST(c,m)._t},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=bT(c,u.resumeToken);const x=w0(c,u.expectedCount);x!==null&&(f.expectedCount=x)}else if(u.snapshotVersion.compareTo(Pe.min())>0){f.readTime=Ql(c,u.snapshotVersion.toTimestamp());const x=w0(c,u.expectedCount);x!==null&&(f.expectedCount=x)}return f})(this.serializer,e);const r=QD(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=T0(this.serializer),t.removeTarget=e,this.a_(t)}}class U4 extends JT{constructor(e,t,r,a,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,u),this.serializer=c}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=$D(e.writeResults,e.commitTime),r=Yt(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=T0(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>td(this.serializer,r)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4 extends class{}{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new pe(se.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Mo(e,N0(t,r),a,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(se.UNKNOWN,c.toString())}))}Lo(e,t,r,a,c){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Lo(e,N0(t,r),a,u,f,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(se.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class q4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Qt(t),this.D_=!1):ge("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,t,r,a,c){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=c,this.k_._o((u=>{r.enqueueAndForget((async()=>{va(this)&&(ge("RemoteStore","Restarting streams for network reachability change."),await(async function(m){const x=Ae(m);x.L_.add(4),await dc(x),x.q_.set("Unknown"),x.L_.delete(4),await jd(x)})(this))}))})),this.q_=new q4(r,a)}}async function jd(n){if(va(n))for(const e of n.B_)await e(!0)}async function dc(n){for(const e of n.B_)await e(!1)}function gm(n,e){const t=Ae(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Ux(t)?Lx(t):fc(t).r_()&&Vx(t,e))}function Xl(n,e){const t=Ae(n),r=fc(t);t.N_.delete(e),r.r_()&&ZT(t,e),t.N_.size===0&&(r.r_()?r.o_():va(t)&&t.q_.set("Unknown"))}function Vx(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fc(n).A_(e)}function ZT(n,e){n.Q_.xe(e),fc(n).R_(e)}function Lx(n){n.Q_=new UD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),fc(n).start(),n.q_.v_()}function Ux(n){return va(n)&&!fc(n).n_()&&n.N_.size>0}function va(n){return Ae(n).L_.size===0}function eE(n){n.Q_=void 0}async function z4(n){n.q_.set("Online")}async function H4(n){n.N_.forEach(((e,t)=>{Vx(n,e)}))}async function G4(n,e){eE(n),Ux(n)?(n.q_.M_(e),Lx(n)):n.q_.set("Unknown")}async function K4(n,e,t){if(n.q_.set("Online"),e instanceof yT&&e.state===2&&e.cause)try{await(async function(a,c){const u=c.cause;for(const f of c.targetIds)a.N_.has(f)&&(await a.remoteSyncer.rejectListen(f,u),a.N_.delete(f),a.Q_.removeTarget(f))})(n,e)}catch(r){ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hf(n,r)}else if(e instanceof Tf?n.Q_.Ke(e):e instanceof xT?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Pe.min()))try{const r=await GT(n.localStore);t.compareTo(r)>=0&&await(function(c,u){const f=c.Q_.rt(u);return f.targetChanges.forEach(((m,x)=>{if(m.resumeToken.approximateByteSize()>0){const y=c.N_.get(x);y&&c.N_.set(x,y.withResumeToken(m.resumeToken,u))}})),f.targetMismatches.forEach(((m,x)=>{const y=c.N_.get(m);if(!y)return;c.N_.set(m,y.withResumeToken(Ft.EMPTY_BYTE_STRING,y.snapshotVersion)),ZT(c,m);const v=new Xr(y.target,m,x,y.sequenceNumber);Vx(c,v)})),c.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(r){ge("RemoteStore","Failed to raise snapshot:",r),await Hf(n,r)}}async function Hf(n,e,t){if(!ya(e))throw e;n.L_.add(1),await dc(n),n.q_.set("Offline"),t||(t=()=>GT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ge("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await jd(n)}))}function tE(n,e){return e().catch((t=>Hf(n,t,e)))}async function hc(n){const e=Ae(n),t=da(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$4(e);)try{const a=await C4(e.localStore,r);if(a===null){e.O_.length===0&&t.o_();break}r=a.batchId,Q4(e,a)}catch(a){await Hf(e,a)}nE(e)&&sE(e)}function $4(n){return va(n)&&n.O_.length<10}function Q4(n,e){n.O_.push(e);const t=da(n);t.r_()&&t.V_&&t.m_(e.mutations)}function nE(n){return va(n)&&!da(n).n_()&&n.O_.length>0}function sE(n){da(n).start()}async function Y4(n){da(n).p_()}async function W4(n){const e=da(n);for(const t of n.O_)e.m_(t.mutations)}async function X4(n,e,t){const r=n.O_.shift(),a=Tx.from(r,e,t);await tE(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await hc(n)}async function J4(n,e){e&&da(n).V_&&await(async function(r,a){if((function(u){return mT(u)&&u!==se.ABORTED})(a.code)){const c=r.O_.shift();da(r).s_(),await tE(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,a))),await hc(r)}})(n,e),nE(n)&&sE(n)}async function T1(n,e){const t=Ae(n);t.asyncQueue.verifyOperationInProgress(),ge("RemoteStore","RemoteStore received new credentials");const r=va(t);t.L_.add(3),await dc(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await jd(t)}async function R0(n,e){const t=Ae(n);e?(t.L_.delete(2),await jd(t)):e||(t.L_.add(2),await dc(t),t.q_.set("Unknown"))}function fc(n){return n.K_||(n.K_=(function(t,r,a){const c=Ae(t);return c.w_(),new L4(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(n.datastore,n.asyncQueue,{Eo:z4.bind(null,n),Ro:H4.bind(null,n),mo:G4.bind(null,n),d_:K4.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),Ux(n)?Lx(n):n.q_.set("Unknown")):(await n.K_.stop(),eE(n))}))),n.K_}function da(n){return n.U_||(n.U_=(function(t,r,a){const c=Ae(t);return c.w_(),new U4(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Y4.bind(null,n),mo:J4.bind(null,n),f_:W4.bind(null,n),g_:X4.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await hc(n)):(await n.U_.stop(),n.O_.length>0&&(ge("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,t,r,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=c,this.deferred=new jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,c){const u=Date.now()+r,f=new Fx(e,t,u,a,c);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mc(n,e){if(Qt("AsyncQueue",`${e}: ${n}`),ya(n))return new pe(se.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Se.comparator(t.key,r.key):(t,r)=>Se.comparator(t.key,r.key),this.keyedMap=Su(),this.sortedSet=new bt(this.comparator)}static emptySet(e){return new Ll(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ll)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ll;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(){this.W_=new bt(Se.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):je():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Jl{constructor(e,t,r,a,c,u,f,m,x){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=x}static fromInitialDocuments(e,t,r,a,c){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new Jl(e,t,Ll.emptySet(t),u,r,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class e3{constructor(){this.queries=S1(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const a=Ae(t),c=a.queries;a.queries=S1(),c.forEach(((u,f)=>{for(const m of f.j_)m.onError(r)}))})(this,new pe(se.ABORTED,"Firestore shutting down"))}}function S1(){return new ba((n=>eT(n)),wd)}async function qx(n,e){const t=Ae(n);let r=3;const a=e.query;let c=t.queries.get(a);c?!c.H_()&&e.J_()&&(r=2):(c=new Z4,r=e.J_()?0:1);try{switch(r){case 0:c.z_=await t.onListen(a,!0);break;case 1:c.z_=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const f=mc(u,`Initialization of query '${jl(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,c),c.j_.push(e),e.Z_(t.onlineState),c.z_&&e.X_(c.z_)&&zx(t)}async function Bx(n,e){const t=Ae(n),r=e.query;let a=3;const c=t.queries.get(r);if(c){const u=c.j_.indexOf(e);u>=0&&(c.j_.splice(u,1),c.j_.length===0?a=e.J_()?0:1:!c.H_()&&e.J_()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function t3(n,e){const t=Ae(n);let r=!1;for(const a of e){const c=a.query,u=t.queries.get(c);if(u){for(const f of u.j_)f.X_(a)&&(r=!0);u.z_=a}}r&&zx(t)}function n3(n,e,t){const r=Ae(n),a=r.queries.get(e);if(a)for(const c of a.j_)c.onError(t);r.queries.delete(e)}function zx(n){n.Y_.forEach((e=>{e.next()}))}var C0,A1;(A1=C0||(C0={})).ea="default",A1.Cache="cache";class Hx{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Jl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Jl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==C0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e){this.serializer=e}Es(e){return yr(this.serializer,e)}ds(e){return e.metadata.exists?TT(this.serializer,e.document,!1):Nt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Yt(e)}}class r3{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=rE(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=et.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new j1(this.serializer);for(const a of e)if(a.metadata.queries){const c=r.Es(a.metadata.name);for(const u of a.metadata.queries){const f=(t.get(u)||Ge()).add(c);t.set(u,f)}}return t}async complete(){const e=await k4(this.localStore,new j1(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(const r of this.queries)await D4(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function rE(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e){this.key=e}}class aE{constructor(e){this.key=e}}class oE{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ge(),this.mutatedKeys=Ge(),this.Aa=nT(e),this.Ra=new Ll(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new E1,a=t?t.Ra:this.Ra;let c=t?t.mutatedKeys:this.mutatedKeys,u=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,x=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,v)=>{const E=a.get(y),A=Nd(this.query,v)?v:null,V=!!E&&this.mutatedKeys.has(E.key),R=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let O=!1;E&&A?E.data.isEqual(A.data)?V!==R&&(r.track({type:3,doc:A}),O=!0):this.ga(E,A)||(r.track({type:2,doc:A}),O=!0,(m&&this.Aa(A,m)>0||x&&this.Aa(A,x)<0)&&(f=!0)):!E&&A?(r.track({type:0,doc:A}),O=!0):E&&!A&&(r.track({type:1,doc:E}),O=!0,(m||x)&&(f=!0)),O&&(A?(u=u.add(A),c=R?c.add(y):c.delete(y)):(u=u.delete(y),c=c.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),c=c.delete(y.key),r.track({type:1,doc:y})}return{Ra:u,fa:r,ns:f,mutatedKeys:c}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const c=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((y,v)=>(function(A,V){const R=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je()}};return R(A)-R(V)})(y.type,v.type)||this.Aa(y.doc,v.doc))),this.pa(r),a=a!=null&&a;const f=t&&!a?this.ya():[],m=this.da.size===0&&this.current&&!a?1:0,x=m!==this.Ea;return this.Ea=m,u.length!==0||x?{snapshot:new Jl(this.query,e.Ra,c,u,e.mutatedKeys,m===0,x,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:f}:{wa:f}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new E1,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ge(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const t=[];return e.forEach((r=>{this.da.has(r)||t.push(new aE(r))})),this.da.forEach((r=>{e.has(r)||t.push(new iE(r))})),t}ba(e){this.Ta=e.Ts,this.da=Ge();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Jl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class i3{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class a3{constructor(e){this.key=e,this.va=!1}}class o3{constructor(e,t,r,a,c,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new ba((f=>eT(f)),wd),this.Ma=new Map,this.xa=new Set,this.Oa=new bt(Se.comparator),this.Na=new Map,this.La=new Cx,this.Ba={},this.ka=new Map,this.qa=To.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function l3(n,e,t=!0){const r=xm(n);let a;const c=r.Fa.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.Da()):a=await lE(r,e,t,!0),a}async function c3(n,e){const t=xm(n);await lE(t,e,!0,!1)}async function lE(n,e,t,r){const a=await Yl(n.localStore,zn(e)),c=a.targetId,u=n.sharedClientState.addLocalQueryTarget(c,t);let f;return r&&(f=await Gx(n,e,c,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&gm(n.remoteStore,a),f}async function Gx(n,e,t,r,a){n.Ka=(v,E,A)=>(async function(R,O,H,ae){let ee=O.view.ma(H);ee.ns&&(ee=await qf(R.localStore,O.query,!1).then((({documents:C})=>O.view.ma(C,ee))));const z=ae&&ae.targetChanges.get(O.targetId),F=ae&&ae.targetMismatches.get(O.targetId)!=null,G=O.view.applyChanges(ee,R.isPrimaryClient,z,F);return k0(R,O.targetId,G.wa),G.snapshot})(n,v,E,A);const c=await qf(n.localStore,e,!0),u=new oE(e,c.Ts),f=u.ma(c.documents),m=Sd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),x=u.applyChanges(f,n.isPrimaryClient,m);k0(n,t,x.wa);const y=new i3(e,t,u);return n.Fa.set(e,y),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),x.snapshot}async function u3(n,e,t){const r=Ae(n),a=r.Fa.get(e),c=r.Ma.get(a.targetId);if(c.length>1)return r.Ma.set(a.targetId,c.filter((u=>!wd(u,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Wl(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Xl(r.remoteStore,a.targetId),Zl(r,a.targetId)})).catch(xa)):(Zl(r,a.targetId),await Wl(r.localStore,a.targetId,!0))}async function d3(n,e){const t=Ae(n),r=t.Fa.get(e),a=t.Ma.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Xl(t.remoteStore,r.targetId))}async function h3(n,e,t){const r=Yx(n);try{const a=await(function(u,f){const m=Ae(u),x=It.now(),y=f.reduce(((A,V)=>A.add(V.key)),Ge());let v,E;return m.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let V=rs(),R=Ge();return m.cs.getEntries(A,y).next((O=>{V=O,V.forEach(((H,ae)=>{ae.isValidDocument()||(R=R.add(H))}))})).next((()=>m.localDocuments.getOverlayedDocuments(A,V))).next((O=>{v=O;const H=[];for(const ae of f){const ee=OD(ae,v.get(ae.key).overlayedDocument);ee!=null&&H.push(new ai(ae.key,ee,G2(ee.value.mapValue),jt.exists(!0)))}return m.mutationQueue.addMutationBatch(A,x,H,f)})).next((O=>{E=O;const H=O.applyToLocalDocumentSet(v,R);return m.documentOverlayCache.saveOverlays(A,O.batchId,H)}))})).then((()=>({batchId:E.batchId,changes:rT(v)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(u,f,m){let x=u.Ba[u.currentUser.toKey()];x||(x=new bt(ze)),x=x.insert(f,m),u.Ba[u.currentUser.toKey()]=x})(r,a.batchId,t),await oi(r,a.changes),await hc(r.remoteStore)}catch(a){const c=mc(a,"Failed to persist write");t.reject(c)}}async function cE(n,e){const t=Ae(n);try{const r=await R4(t.localStore,e);e.targetChanges.forEach(((a,c)=>{const u=t.Na.get(c);u&&(Ce(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?u.va=!0:a.modifiedDocuments.size>0?Ce(u.va):a.removedDocuments.size>0&&(Ce(u.va),u.va=!1))})),await oi(t,r,e)}catch(r){await xa(r)}}function I1(n,e,t){const r=Ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Fa.forEach(((c,u)=>{const f=u.view.Z_(e);f.snapshot&&a.push(f.snapshot)})),(function(u,f){const m=Ae(u);m.onlineState=f;let x=!1;m.queries.forEach(((y,v)=>{for(const E of v.j_)E.Z_(f)&&(x=!0)})),x&&zx(m)})(r.eventManager,e),a.length&&r.Ca.d_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function f3(n,e,t){const r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Na.get(e),c=a&&a.key;if(c){let u=new bt(Se.comparator);u=u.insert(c,Nt.newNoDocument(c,Pe.min()));const f=Ge().add(c),m=new Ed(Pe.min(),new Map,new bt(ze),u,f);await cE(r,m),r.Oa=r.Oa.remove(c),r.Na.delete(e),Qx(r)}else await Wl(r.localStore,e,!1).then((()=>Zl(r,e,t))).catch(xa)}async function m3(n,e){const t=Ae(n),r=e.batch.batchId;try{const a=await I4(t.localStore,e);$x(t,r,null),Kx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await oi(t,a)}catch(a){await xa(a)}}async function p3(n,e,t){const r=Ae(n);try{const a=await(function(u,f){const m=Ae(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let y;return m.mutationQueue.lookupMutationBatch(x,f).next((v=>(Ce(v!==null),y=v.keys(),m.mutationQueue.removeMutationBatch(x,v)))).next((()=>m.mutationQueue.performConsistencyCheck(x))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(x,y,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,y))).next((()=>m.localDocuments.getDocuments(x,y)))}))})(r.localStore,e);$x(r,e,t),Kx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await oi(r,a)}catch(a){await xa(a)}}async function g3(n,e){const t=Ae(n);va(t.remoteStore)||ge("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(u){const f=Ae(u);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(m=>f.mutationQueue.getHighestUnacknowledgedBatchId(m)))})(t.localStore);if(r===-1)return void e.resolve();const a=t.ka.get(r)||[];a.push(e),t.ka.set(r,a)}catch(r){const a=mc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function Kx(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function $x(n,e,t){const r=Ae(n);let a=r.Ba[r.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),r.Ba[r.currentUser.toKey()]=a}}function Zl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((r=>{n.La.containsKey(r)||uE(n,r)}))}function uE(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Xl(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Qx(n))}function k0(n,e,t){for(const r of t)r instanceof iE?(n.La.addReference(r.key,e),x3(n,r)):r instanceof aE?(ge("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||uE(n,r.key)):je()}function x3(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ge("SyncEngine","New document in limbo: "+t),n.xa.add(r),Qx(n))}function Qx(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Se(et.fromString(e)),r=n.qa.next();n.Na.set(r,new a3(t)),n.Oa=n.Oa.insert(t,r),gm(n.remoteStore,new Xr(zn(lc(t.path)),r,"TargetPurposeLimboResolution",ns.oe))}}async function oi(n,e,t){const r=Ae(n),a=[],c=[],u=[];r.Fa.isEmpty()||(r.Fa.forEach(((f,m)=>{u.push(r.Ka(m,e,t).then((x=>{var y;if((x||t)&&r.isPrimaryClient){const v=x?!x.fromCache:(y=t==null?void 0:t.targetChanges.get(m.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(x){a.push(x);const v=Mx.Wi(m.targetId,x);c.push(v)}})))})),await Promise.all(u),r.Ca.d_(a),await(async function(m,x){const y=Ae(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>J.forEach(x,(E=>J.forEach(E.$i,(A=>y.persistence.referenceDelegate.addReference(v,E.targetId,A))).next((()=>J.forEach(E.Ui,(A=>y.persistence.referenceDelegate.removeReference(v,E.targetId,A)))))))))}catch(v){if(!ya(v))throw v;ge("LocalStore","Failed to update sequence numbers: "+v)}for(const v of x){const E=v.targetId;if(!v.fromCache){const A=y.os.get(E),V=A.snapshotVersion,R=A.withLastLimboFreeSnapshotVersion(V);y.os=y.os.insert(E,R)}}})(r.localStore,c))}async function y3(n,e){const t=Ae(n);if(!t.currentUser.isEqual(e)){ge("SyncEngine","User change. New user:",e.toKey());const r=await HT(t.localStore,e);t.currentUser=e,(function(c,u){c.ka.forEach((f=>{f.forEach((m=>{m.reject(new pe(se.CANCELLED,u))}))})),c.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await oi(t,r.hs)}}function b3(n,e){const t=Ae(n),r=t.Na.get(e);if(r&&r.va)return Ge().add(r.key);{let a=Ge();const c=t.Ma.get(e);if(!c)return a;for(const u of c){const f=t.Fa.get(u);a=a.unionWith(f.view.Va)}return a}}async function v3(n,e){const t=Ae(n),r=await qf(t.localStore,e.query,!0),a=e.view.ba(r);return t.isPrimaryClient&&k0(t,e.targetId,a.wa),a}async function _3(n,e){const t=Ae(n);return QT(t.localStore,e).then((r=>oi(t,r)))}async function w3(n,e,t,r){const a=Ae(n),c=await(function(f,m){const x=Ae(f),y=Ae(x.mutationQueue);return x.persistence.runTransaction("Lookup mutation documents","readonly",(v=>y.Mn(v,m).next((E=>E?x.localDocuments.getDocuments(v,E):J.resolve(null)))))})(a.localStore,e);c!==null?(t==="pending"?await hc(a.remoteStore):t==="acknowledged"||t==="rejected"?($x(a,e,r||null),Kx(a,e),(function(f,m){Ae(Ae(f).mutationQueue).On(m)})(a.localStore,e)):je(),await oi(a,c)):ge("SyncEngine","Cannot apply mutation batch with id: "+e)}async function N3(n,e){const t=Ae(n);if(xm(t),Yx(t),e===!0&&t.Qa!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await R1(t,r.toArray());t.Qa=!0,await R0(t.remoteStore,!0);for(const c of a)gm(t.remoteStore,c)}else if(e===!1&&t.Qa!==!1){const r=[];let a=Promise.resolve();t.Ma.forEach(((c,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):a=a.then((()=>(Zl(t,u),Wl(t.localStore,u,!0)))),Xl(t.remoteStore,u)})),await a,await R1(t,r),(function(u){const f=Ae(u);f.Na.forEach(((m,x)=>{Xl(f.remoteStore,x)})),f.La.pr(),f.Na=new Map,f.Oa=new bt(Se.comparator)})(t),t.Qa=!1,await R0(t.remoteStore,!1)}}async function R1(n,e,t){const r=Ae(n),a=[],c=[];for(const u of e){let f;const m=r.Ma.get(u);if(m&&m.length!==0){f=await Yl(r.localStore,zn(m[0]));for(const x of m){const y=r.Fa.get(x),v=await v3(r,y);v.snapshot&&c.push(v.snapshot)}}else{const x=await $T(r.localStore,u);f=await Yl(r.localStore,x),await Gx(r,dE(x),u,!1,f.resumeToken)}a.push(f)}return r.Ca.d_(c),a}function dE(n){return Z2(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function T3(n){return(function(t){return Ae(Ae(t).persistence).Qi()})(Ae(n).localStore)}async function E3(n,e,t,r){const a=Ae(n);if(a.Qa)return void ge("SyncEngine","Ignoring unexpected query state notification.");const c=a.Ma.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const u=await QT(a.localStore,tT(c[0])),f=Ed.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ft.EMPTY_BYTE_STRING);await oi(a,u,f);break}case"rejected":await Wl(a.localStore,e,!0),Zl(a,e,r);break;default:je()}}async function S3(n,e,t){const r=xm(n);if(r.Qa){for(const a of e){if(r.Ma.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){ge("SyncEngine","Adding an already active target "+a);continue}const c=await $T(r.localStore,a),u=await Yl(r.localStore,c);await Gx(r,dE(c),u.targetId,!1,u.resumeToken),gm(r.remoteStore,u)}for(const a of t)r.Ma.has(a)&&await Wl(r.localStore,a,!1).then((()=>{Xl(r.remoteStore,a),Zl(r,a)})).catch(xa)}}function xm(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=cE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=b3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=f3.bind(null,e),e.Ca.d_=t3.bind(null,e.eventManager),e.Ca.$a=n3.bind(null,e.eventManager),e}function Yx(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=p3.bind(null,e),e}function A3(n,e,t){const r=Ae(n);(async function(c,u,f){try{const m=await u.getMetadata();if(await(function(A,V){const R=Ae(A),O=Yt(V.createTime);return R.persistence.runTransaction("hasNewerBundle","readonly",(H=>R.Gr.getBundleMetadata(H,V.id))).then((H=>!!H&&H.createTime.compareTo(O)>=0))})(c.localStore,m))return await u.close(),f._completeWith((function(A){return{taskState:"Success",documentsLoaded:A.totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}})(m)),Promise.resolve(new Set);f._updateProgress(rE(m));const x=new r3(m,c.localStore,u.serializer);let y=await u.Ua();for(;y;){const E=await x.la(y);E&&f._updateProgress(E),y=await u.Ua()}const v=await x.complete();return await oi(c,v.Ia,void 0),await(function(A,V){const R=Ae(A);return R.persistence.runTransaction("Save bundle","readwrite",(O=>R.Gr.saveBundleMetadata(O,V)))})(c.localStore,m),f._completeWith(v.progress),Promise.resolve(v.Pa)}catch(m){return _r("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}})(r,e,t).then((a=>{r.sharedClientState.notifyBundleLoaded(a)}))}class nd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ad(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return zT(this.persistence,new BT,e.initialUser,this.serializer)}Ga(e){return new qT(pm.Zr,this.serializer)}Wa(e){return new WT}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nd.provider={build:()=>new nd};class hE extends nd{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await Yx(this.Ja.syncEngine),await hc(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return zT(this.persistence,new BT,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new d4(r,e.asyncQueue,t)}Ha(e,t){const r=new K5(t,this.persistence);return new G5(e.asyncQueue,r)}Ga(e){const t=Dx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ts.withCacheSize(this.cacheSizeBytes):ts.DEFAULT;return new kx(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,XT(),Ef(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new WT}}class j3 extends hE{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof Jg&&(this.sharedClientState.syncEngine={no:w3.bind(null,t),ro:E3.bind(null,t),io:S3.bind(null,t),Qi:T3.bind(null,t),eo:_3.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi((async r=>{await N3(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Wa(e){const t=XT();if(!Jg.D(t))throw new pe(se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Dx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Jg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class sd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>I1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=y3.bind(null,this.syncEngine),await R0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new e3})()}createDatastore(e){const t=Ad(e.databaseInfo.databaseId),r=(function(c){return new V4(c)})(e.databaseInfo);return(function(c,u,f,m){return new F4(c,u,f,m)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,c,u,f){return new B4(r,a,c,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>I1(this.syncEngine,t,0)),(function(){return N1.D()?new N1:new M4})())}createSyncEngine(e,t){return(function(a,c,u,f,m,x,y){const v=new o3(a,c,u,f,m,x);return y&&(v.Qa=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const c=Ae(a);ge("RemoteStore","RemoteStore shutting down."),c.L_.add(5),await dc(c),c.k_.shutdown(),c.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}sd.provider={build:()=>new sd};function C1(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Qt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new jn,this.buffer=new Uint8Array,this.eu=(function(){return new TextDecoder("utf-8")})(),this.tu().then((r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);const a=await this.iu(r);return new s3(JSON.parse(a),e.length+r)}su(){return this.buffer.findIndex((e=>e===123))}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new pe(se.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(a,c){const u=Ae(a),f={documents:c.map((v=>ed(u.serializer,v)))},m=await u.Lo("BatchGetDocuments",u.serializer.databaseId,et.emptyPath(),f,c.length),x=new Map;m.forEach((v=>{const E=GD(u.serializer,v);x.set(E.key.toString(),E)}));const y=[];return c.forEach((v=>{const E=x.get(v.toString());Ce(!!E),y.push(E)})),y})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new uc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const a=Se.fromPath(r);this.mutations.push(new wx(a,this.precondition(a)))})),await(async function(r,a){const c=Ae(r),u={writes:a.map((f=>td(c.serializer,f)))};await c.Mo("Commit",c.serializer.databaseId,et.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw je();t=Pe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new pe(se.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Pe.min())?jt.exists(!1):jt.updateTime(t):jt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Pe.min()))throw new pe(se.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jt.updateTime(t)}return jt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e,t,r,a,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=c,this._u=r.maxAttempts,this.t_=new Ox(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new R3(this.datastore),t=this.cu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((a=>{this.lu(a)}))))})).catch((r=>{this.lu(r)}))}))}cu(e){try{const t=this.updateFunction(e);return!vd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!mT(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e,t,r,a,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=xn.UNAUTHENTICATED,this.clientId=I2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async u=>{ge("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(ge("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=mc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function e0(n,e){n.asyncQueue.verifyOperationInProgress(),ge("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await HT(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function k1(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Wx(n);ge("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>T1(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>T1(e.remoteStore,a))),n._onlineComponents=e}async function Wx(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge("FirestoreClient","Using user provided OfflineComponentProvider");try{await e0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===se.FAILED_PRECONDITION||a.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;_r("Error using user provided cache. Falling back to memory cache: "+t),await e0(n,new nd)}}else ge("FirestoreClient","Using default OfflineComponentProvider"),await e0(n,new nd);return n._offlineComponents}async function bm(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge("FirestoreClient","Using user provided OnlineComponentProvider"),await k1(n,n._uninitializedComponentsProvider._online)):(ge("FirestoreClient","Using default OnlineComponentProvider"),await k1(n,new sd))),n._onlineComponents}function fE(n){return Wx(n).then((e=>e.persistence))}function Xx(n){return Wx(n).then((e=>e.localStore))}function mE(n){return bm(n).then((e=>e.remoteStore))}function Jx(n){return bm(n).then((e=>e.syncEngine))}function D3(n){return bm(n).then((e=>e.datastore))}async function ec(n){const e=await bm(n),t=e.eventManager;return t.onListen=l3.bind(null,e.syncEngine),t.onUnlisten=u3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=c3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=d3.bind(null,e.syncEngine),t}function M3(n){return n.asyncQueue.enqueue((async()=>{const e=await fE(n),t=await mE(n);return e.setNetworkEnabled(!0),(function(a){const c=Ae(a);return c.L_.delete(0),jd(c)})(t)}))}function P3(n){return n.asyncQueue.enqueue((async()=>{const e=await fE(n),t=await mE(n);return e.setNetworkEnabled(!1),(async function(a){const c=Ae(a);c.L_.add(0),await dc(c),c.q_.set("Offline")})(t)}))}function O3(n,e){const t=new jn;return n.asyncQueue.enqueueAndForget((async()=>(async function(a,c,u){try{const f=await(function(x,y){const v=Ae(x);return v.persistence.runTransaction("read document","readonly",(E=>v.localDocuments.getDocument(E,y)))})(a,c);f.isFoundDocument()?u.resolve(f):f.isNoDocument()?u.resolve(null):u.reject(new pe(se.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=mc(f,`Failed to get document '${c} from cache`);u.reject(m)}})(await Xx(n),e,t))),t.promise}function pE(n,e,t={}){const r=new jn;return n.asyncQueue.enqueueAndForget((async()=>(function(c,u,f,m,x){const y=new ym({next:E=>{y.Za(),u.enqueueAndForget((()=>Bx(c,v)));const A=E.docs.has(f);!A&&E.fromCache?x.reject(new pe(se.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&m&&m.source==="server"?x.reject(new pe(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(E)},error:E=>x.reject(E)}),v=new Hx(lc(f.path),y,{includeMetadataChanges:!0,_a:!0});return qx(c,v)})(await ec(n),n.asyncQueue,e,t,r))),r.promise}function V3(n,e){const t=new jn;return n.asyncQueue.enqueueAndForget((async()=>(async function(a,c,u){try{const f=await qf(a,c,!0),m=new oE(c,f.Ts),x=m.ma(f.documents),y=m.applyChanges(x,!1);u.resolve(y.snapshot)}catch(f){const m=mc(f,`Failed to execute query '${c} against cache`);u.reject(m)}})(await Xx(n),e,t))),t.promise}function gE(n,e,t={}){const r=new jn;return n.asyncQueue.enqueueAndForget((async()=>(function(c,u,f,m,x){const y=new ym({next:E=>{y.Za(),u.enqueueAndForget((()=>Bx(c,v))),E.fromCache&&m.source==="server"?x.reject(new pe(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(E)},error:E=>x.reject(E)}),v=new Hx(f,y,{includeMetadataChanges:!0,_a:!0});return qx(c,v)})(await ec(n),n.asyncQueue,e,t,r))),r.promise}function L3(n,e){const t=new ym(e);return n.asyncQueue.enqueueAndForget((async()=>(function(a,c){Ae(a).Y_.add(c),c.next()})(await ec(n),t))),()=>{t.Za(),n.asyncQueue.enqueueAndForget((async()=>(function(a,c){Ae(a).Y_.delete(c)})(await ec(n),t)))}}function U3(n,e,t,r){const a=(function(u,f){let m;return m=typeof u=="string"?gT().encode(u):u,(function(y,v){return new I3(y,v)})((function(y,v){if(y instanceof Uint8Array)return C1(y,v);if(y instanceof ArrayBuffer)return C1(new Uint8Array(y),v);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(m),f)})(t,Ad(e));n.asyncQueue.enqueueAndForget((async()=>{A3(await Jx(n),a,r)}))}function F3(n,e){return n.asyncQueue.enqueue((async()=>(function(r,a){const c=Ae(r);return c.persistence.runTransaction("Get named query","readonly",(u=>c.Gr.getNamedQuery(u,a)))})(await Xx(n),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(n,e,t){if(!t)throw new pe(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yE(n,e,t,r){if(e===!0&&r===!0)throw new pe(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function M1(n){if(!Se.isDocumentKey(n))throw new pe(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function P1(n){if(Se.isDocumentKey(n))throw new pe(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":je()}function lt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vm(n);throw new pe(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function bE(n,e){if(e<=0)throw new pe(se.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new pe(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Id{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new O1({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new O1(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new M5;switch(r.type){case"firstParty":return new L5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=D1.get(t);r&&(ge("ComponentProvider","Removing Datastore"),D1.delete(t),r.terminate())})(this),Promise.resolve()}}function q3(n,e,t,r={}){var a;const c=(n=lt(n,Id))._getSettings(),u=`${e}:${t}`;if(c.host!=="firestore.googleapis.com"&&c.host!==u&&_r("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},c),{host:u,ssl:!1})),r.mockUserToken){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=xn.MOCK_USER;else{f=XA(r.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new pe(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new xn(x)}n._authCredentials=new P5(new j2(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hn=class vE{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vE(this.firestore,e,this._query)}},kt=class _E{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _E(this.firestore,e,this._key)}},na=class wE extends Hn{constructor(e,t,r){super(e,t,lc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new Se(e))}withConverter(e){return new wE(this.firestore,e,this._path)}};function NE(n,e,...t){if(n=Le(n),Zx("collection","path",e),n instanceof Id){const r=et.fromString(e,...t);return P1(r),new na(n,null,r)}{if(!(n instanceof kt||n instanceof na))throw new pe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(et.fromString(e,...t));return P1(r),new na(n.firestore,null,r)}}function B3(n,e){if(n=lt(n,Id),Zx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new pe(se.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hn(n,null,(function(r){return new ii(et.emptyPath(),r)})(e))}function Gf(n,e,...t){if(n=Le(n),arguments.length===1&&(e=I2.newId()),Zx("doc","path",e),n instanceof Id){const r=et.fromString(e,...t);return M1(r),new kt(n,null,new Se(r))}{if(!(n instanceof kt||n instanceof na))throw new pe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(et.fromString(e,...t));return M1(r),new kt(n.firestore,n instanceof na?n.converter:null,new Se(r))}}function TE(n,e){return n=Le(n),e=Le(e),(n instanceof kt||n instanceof na)&&(e instanceof kt||e instanceof na)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function EE(n,e){return n=Le(n),e=Le(e),n instanceof Hn&&e instanceof Hn&&n.firestore===e.firestore&&wd(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ox(this,"async_queue_retry"),this.Vu=()=>{const r=Ef();r&&ge("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Ef();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Ef();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new jn;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ya(e))throw e;ge("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const a=(function(u){let f=u.message||"";return u.stack&&(f=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),f})(r);throw Qt("INTERNAL UNHANDLED ERROR: ",a),r})).then((r=>(this.du=!1,r))))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const a=Fx.createAndSchedule(this,e,t,r,(c=>this.yu(c)));return this.Tu.push(a),a}fu(){this.Eu&&je()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function D0(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const c of r)if(c in a&&typeof a[c]=="function")return!0;return!1})(n,["next","error","complete"])}class z3{constructor(){this._progressObserver={},this._taskCompletionResolver=new jn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3=-1;let Wt=class extends Id{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new V1,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new V1(e),this._firestoreClient=void 0,await e}}};function Dn(n){if(n._terminated)throw new pe(se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||SE(n),n._firestoreClient}function SE(n){var e,t,r;const a=n._freezeSettings(),c=(function(f,m,x,y){return new mD(f,m,x,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,xE(y.experimentalLongPollingOptions),y.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new k3(n._authCredentials,n._appCheckCredentials,n._queue,c,n._componentsProvider&&(function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}})(n._componentsProvider))}function G3(n,e){_r("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return AE(n,sd.provider,{build:r=>new hE(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function K3(n){_r("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();AE(n,sd.provider,{build:t=>new j3(t,e.cacheSizeBytes)})}function AE(n,e,t){if((n=lt(n,Wt))._firestoreClient||n._terminated)throw new pe(se.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new pe(se.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},SE(n)}function $3(n){if(n._initialized&&!n._terminated)throw new pe(se.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new jn;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!xr.D())return Promise.resolve();const a=r+"main";await xr.delete(a)})(Dx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function Q3(n){return(function(t){const r=new jn;return t.asyncQueue.enqueueAndForget((async()=>g3(await Jx(t),r))),r.promise})(Dn(n=lt(n,Wt)))}function Y3(n){return M3(Dn(n=lt(n,Wt)))}function W3(n){return P3(Dn(n=lt(n,Wt)))}function X3(n,e){const t=Dn(n=lt(n,Wt)),r=new z3;return U3(t,n._databaseId,e,r),r}function J3(n,e){return F3(Dn(n=lt(n,Wt)),e).then((t=>t?new Hn(n,null,t.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nr(Ft.fromBase64String(e))}catch(t){throw new pe(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Nr(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ha=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Io=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==a[c])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=/^__.*__$/;class eM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ai(e,this.data,this.fieldMask,t,this.fieldTransforms):new cc(e,this.data,t,this.fieldTransforms)}}class jE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ai(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function IE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je()}}class wm{constructor(e,t,r,a,c,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,c===void 0&&this.vu(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new wm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Fu({path:r,xu:!1});return a.Ou(e),a}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Fu({path:r,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Kf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(IE(this.Cu)&&Z3.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class tM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ad(e)}Qu(e,t,r,a=!1){return new wm({Cu:e,methodName:t,qu:r,path:At.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ro(n){const e=n._freezeSettings(),t=Ad(n._databaseId);return new tM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Nm(n,e,t,r,a,c={}){const u=n.Qu(c.merge||c.mergeFields?2:0,e,t,a);oy("Data must be an object, but it was:",u,r);const f=kE(r,u);let m,x;if(c.merge)m=new ss(u.fieldMask),x=u.fieldTransforms;else if(c.mergeFields){const y=[];for(const v of c.mergeFields){const E=M0(e,v,t);if(!u.contains(E))throw new pe(se.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);ME(y,E)||y.push(E)}m=new ss(y),x=u.fieldTransforms.filter((v=>m.covers(v.field)))}else m=null,x=u.fieldTransforms;return new eM(new An(f),m,x)}class Rd extends Io{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rd}}function RE(n,e,t){return new wm({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ty extends Io{_toFieldTransform(e){return new Td(e.path,new Kl)}isEqual(e){return e instanceof ty}}class ny extends Io{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=RE(this,e,!0),r=this.Ku.map((c=>Co(c,t))),a=new vo(r);return new Td(e.path,a)}isEqual(e){return e instanceof ny&&Uu(this.Ku,e.Ku)}}class sy extends Io{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=RE(this,e,!0),r=this.Ku.map((c=>Co(c,t))),a=new _o(r);return new Td(e.path,a)}isEqual(e){return e instanceof sy&&Uu(this.Ku,e.Ku)}}class ry extends Io{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new $l(e.serializer,oT(e.serializer,this.$u));return new Td(e.path,t)}isEqual(e){return e instanceof ry&&this.$u===e.$u}}function iy(n,e,t,r){const a=n.Qu(1,e,t);oy("Data must be an object, but it was:",a,r);const c=[],u=An.empty();jo(r,((m,x)=>{const y=ly(e,m,t);x=Le(x);const v=a.Nu(y);if(x instanceof Rd)c.push(y);else{const E=Co(x,v);E!=null&&(c.push(y),u.set(y,E))}}));const f=new ss(c);return new jE(u,f,a.fieldTransforms)}function ay(n,e,t,r,a,c){const u=n.Qu(1,e,t),f=[M0(e,r,t)],m=[a];if(c.length%2!=0)throw new pe(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<c.length;E+=2)f.push(M0(e,c[E])),m.push(c[E+1]);const x=[],y=An.empty();for(let E=f.length-1;E>=0;--E)if(!ME(x,f[E])){const A=f[E];let V=m[E];V=Le(V);const R=u.Nu(A);if(V instanceof Rd)x.push(A);else{const O=Co(V,R);O!=null&&(x.push(A),y.set(A,O))}}const v=new ss(x);return new jE(y,v,u.fieldTransforms)}function CE(n,e,t,r=!1){return Co(t,n.Qu(r?4:3,e))}function Co(n,e){if(DE(n=Le(n)))return oy("Unsupported field value:",e,n),kE(n,e);if(n instanceof Io)return(function(r,a){if(!IE(a.Cu))throw a.Bu(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,a){const c=[];let u=0;for(const f of r){let m=Co(f,a.Lu(u));m==null&&(m={nullValue:"NULL_VALUE"}),c.push(m),u++}return{arrayValue:{values:c}}})(n,e)}return(function(r,a){if((r=Le(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oT(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=It.fromDate(r);return{timestampValue:Ql(a.serializer,c)}}if(r instanceof It){const c=new It(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ql(a.serializer,c)}}if(r instanceof _m)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nr)return{bytesValue:bT(a.serializer,r._byteString)};if(r instanceof kt){const c=a.databaseId,u=r.firestore._databaseId;if(!u.isEqual(c))throw a.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Ax(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof ey)return(function(u,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw f.Bu("VectorValues must only contain numeric values.");return _x(f.serializer,m)}))}}}}}})(r,a);throw a.Bu(`Unsupported field value: ${vm(r)}`)})(n,e)}function kE(n,e){const t={};return q2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jo(n,((r,a)=>{const c=Co(a,e.Mu(r));c!=null&&(t[r]=c)})),{mapValue:{fields:t}}}function DE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof It||n instanceof _m||n instanceof Nr||n instanceof kt||n instanceof Io||n instanceof ey)}function oy(n,e,t){if(!DE(t)||!(function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)})(t)){const r=vm(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function M0(n,e,t){if((e=Le(e))instanceof ha)return e._internalPath;if(typeof e=="string")return ly(n,e);throw Kf("Field path arguments must be of type string or ",n,!1,void 0,t)}const nM=new RegExp("[~\\*/\\[\\]]");function ly(n,e,t){if(e.search(nM)>=0)throw Kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ha(...e.split("."))._internalPath}catch{throw Kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Kf(n,e,t,r,a){const c=r&&!r.isEmpty(),u=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(c||u)&&(m+=" (found",c&&(m+=` in field ${r}`),u&&(m+=` in document ${a}`),m+=")"),new pe(se.INVALID_ARGUMENT,f+n+m)}function ME(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t,r,a,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Tm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class sM extends rd{data(){return super.data()}}function Tm(n,e){return typeof e=="string"?ly(n,e):e instanceof ha?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cy{}class Cd extends cy{}function Wi(n,e,...t){let r=[];e instanceof cy&&r.push(e),r=r.concat(t),(function(c){const u=c.filter((m=>m instanceof uy)).length,f=c.filter((m=>m instanceof Em)).length;if(u>1||u>0&&f>0)throw new pe(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}class Em extends Cd{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Em(e,t,r)}_apply(e){const t=this._parse(e);return VE(e._query,t),new Hn(e.firestore,e.converter,_0(e._query,t))}_parse(e){const t=Ro(e.firestore);return(function(c,u,f,m,x,y,v){let E;if(x.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new pe(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){U1(v,y);const A=[];for(const V of v)A.push(L1(m,c,V));E={arrayValue:{values:A}}}else E=L1(m,c,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||U1(v,y),E=CE(f,u,v,y==="in"||y==="not-in");return tt.create(x,y,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function rM(n,e,t){const r=e,a=Tm("where",n);return Em._create(a,r,t)}class uy extends cy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new uy(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ft.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,c){let u=a;const f=c.getFlattenedFilters();for(const m of f)VE(u,m),u=_0(u,m)})(e._query,t),new Hn(e.firestore,e.converter,_0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dy extends Cd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new dy(e,t)}_apply(e){const t=(function(a,c,u){if(a.startAt!==null)throw new pe(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new pe(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zu(c,u)})(e._query,this._field,this._direction);return new Hn(e.firestore,e.converter,(function(a,c){const u=a.explicitOrderBy.concat([c]);return new ii(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function iM(n,e="asc"){const t=e,r=Tm("orderBy",n);return dy._create(r,t)}class Sm extends Cd{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Sm(e,t,r)}_apply(e){return new Hn(e.firestore,e.converter,Vf(e._query,this._limit,this._limitType))}}function aM(n){return bE("limit",n),Sm._create("limit",n,"F")}function oM(n){return bE("limitToLast",n),Sm._create("limitToLast",n,"L")}class Am extends Cd{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Am(e,t,r)}_apply(e){const t=OE(e,this.type,this._docOrFields,this._inclusive);return new Hn(e.firestore,e.converter,(function(a,c){return new ii(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,c,a.endAt)})(e._query,t))}}function lM(...n){return Am._create("startAt",n,!0)}function cM(...n){return Am._create("startAfter",n,!1)}class jm extends Cd{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new jm(e,t,r)}_apply(e){const t=OE(e,this.type,this._docOrFields,this._inclusive);return new Hn(e.firestore,e.converter,(function(a,c){return new ii(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,c)})(e._query,t))}}function uM(...n){return jm._create("endBefore",n,!1)}function dM(...n){return jm._create("endAt",n,!0)}function OE(n,e,t,r){if(t[0]=Le(t[0]),t[0]instanceof rd)return(function(c,u,f,m,x){if(!m)throw new pe(se.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const y=[];for(const v of Vl(c))if(v.field.isKeyField())y.push(yo(u,m.key));else{const E=m.data.field(v.field);if(cm(E))throw new pe(se.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(E===null){const A=v.field.canonicalString();throw new pe(se.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}y.push(E)}return new ua(y,x)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=Ro(n.firestore);return(function(u,f,m,x,y,v){const E=u.explicitOrderBy;if(y.length>E.length)throw new pe(se.INVALID_ARGUMENT,`Too many arguments provided to ${x}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let V=0;V<y.length;V++){const R=y[V];if(E[V].field.isKeyField()){if(typeof R!="string")throw new pe(se.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${x}(), but got a ${typeof R}`);if(!bx(u)&&R.indexOf("/")!==-1)throw new pe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${x}() must be a plain document ID, but '${R}' contains a slash.`);const O=u.path.child(et.fromString(R));if(!Se.isDocumentKey(O))throw new pe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${x}() must result in a valid document path, but '${O}' is not because it contains an odd number of segments.`);const H=new Se(O);A.push(yo(f,H))}else{const O=CE(m,x,R);A.push(O)}}return new ua(A,v)})(n._query,n.firestore._databaseId,a,e,t,r)}}function L1(n,e,t){if(typeof(t=Le(t))=="string"){if(t==="")throw new pe(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bx(e)&&t.indexOf("/")!==-1)throw new pe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(et.fromString(t));if(!Se.isDocumentKey(r))throw new pe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yo(n,new Se(r))}if(t instanceof kt)return yo(n,t._key);throw new pe(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vm(t)}.`)}function U1(n,e){if(!Array.isArray(n)||n.length===0)throw new pe(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VE(n,e){const t=(function(a,c){for(const u of a)for(const f of u.getFlattenedFilters())if(c.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class hy{convertValue(e,t="none"){switch(xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return jo(e,((a,c)=>{r[a]=this.convertValue(c,t)})),r}convertVectorValue(e){var t,r,a;const c=(a=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map((u=>St(u.doubleValue)));return new ey(c)}convertGeoPoint(e){return new _m(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=xx(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){const t=ti(e);return new It(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=et.fromString(e);Ce(RT(r));const a=new la(r.get(1),r.get(3)),c=new Se(r.popFirst(5));return a.isEqual(t)||Qt(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class hM extends hy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ni=class extends rd{constructor(e,t,r,a,c,u){super(e,t,r,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Tm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Vu=class extends ni{data(e={}){return super.data(e)}},fa=class{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new lo(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Vu(this._firestore,this._userDataWriter,r.key,r,new lo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((f=>{const m=new Vu(a._firestore,a._userDataWriter,f.doc.key,f.doc,new lo(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>c||f.type!==3)).map((f=>{const m=new Vu(a._firestore,a._userDataWriter,f.doc.key,f.doc,new lo(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let x=-1,y=-1;return f.type!==0&&(x=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),y=u.indexOf(f.doc.key)),{type:fM(f.type),doc:m,oldIndex:x,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function fM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je()}}function LE(n,e){return n instanceof ni&&e instanceof ni?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof fa&&e instanceof fa&&n._firestore===e._firestore&&EE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(n){n=lt(n,kt);const e=lt(n.firestore,Wt);return pE(Dn(e),n._key).then((t=>fy(e,n,t)))}class ko extends hy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,t)}}function pM(n){n=lt(n,kt);const e=lt(n.firestore,Wt),t=Dn(e),r=new ko(e);return O3(t,n._key).then((a=>new ni(e,r,n._key,a,new lo(a!==null&&a.hasLocalMutations,!0),n.converter)))}function gM(n){n=lt(n,kt);const e=lt(n.firestore,Wt);return pE(Dn(e),n._key,{source:"server"}).then((t=>fy(e,n,t)))}function xM(n){n=lt(n,Hn);const e=lt(n.firestore,Wt),t=Dn(e),r=new ko(e);return PE(n._query),gE(t,n._query).then((a=>new fa(e,r,n,a)))}function yM(n){n=lt(n,Hn);const e=lt(n.firestore,Wt),t=Dn(e),r=new ko(e);return V3(t,n._query).then((a=>new fa(e,r,n,a)))}function bM(n){n=lt(n,Hn);const e=lt(n.firestore,Wt),t=Dn(e),r=new ko(e);return gE(t,n._query,{source:"server"}).then((a=>new fa(e,r,n,a)))}function F1(n,e,t){n=lt(n,kt);const r=lt(n.firestore,Wt),a=Im(n.converter,e,t);return kd(r,[Nm(Ro(r),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,jt.none())])}function q1(n,e,t,...r){n=lt(n,kt);const a=lt(n.firestore,Wt),c=Ro(a);let u;return u=typeof(e=Le(e))=="string"||e instanceof ha?ay(c,"updateDoc",n._key,e,t,r):iy(c,"updateDoc",n._key,e),kd(a,[u.toMutation(n._key,jt.exists(!0))])}function vM(n){return kd(lt(n.firestore,Wt),[new uc(n._key,jt.none())])}function _M(n,e){const t=lt(n.firestore,Wt),r=Gf(n),a=Im(n.converter,e);return kd(t,[Nm(Ro(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,jt.exists(!1))]).then((()=>r))}function UE(n,...e){var t,r,a;n=Le(n);let c={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||D0(e[u])||(c=e[u],u++);const f={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(D0(e[u])){const v=e[u];e[u]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[u+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[u+2]=(a=v.complete)===null||a===void 0?void 0:a.bind(v)}let m,x,y;if(n instanceof kt)x=lt(n.firestore,Wt),y=lc(n._key.path),m={next:v=>{e[u]&&e[u](fy(x,n,v))},error:e[u+1],complete:e[u+2]};else{const v=lt(n,Hn);x=lt(v.firestore,Wt),y=v._query;const E=new ko(x);m={next:A=>{e[u]&&e[u](new fa(x,E,v,A))},error:e[u+1],complete:e[u+2]},PE(n._query)}return(function(E,A,V,R){const O=new ym(R),H=new Hx(A,O,V);return E.asyncQueue.enqueueAndForget((async()=>qx(await ec(E),H))),()=>{O.Za(),E.asyncQueue.enqueueAndForget((async()=>Bx(await ec(E),H)))}})(Dn(x),y,f,m)}function wM(n,e){return L3(Dn(n=lt(n,Wt)),D0(e)?e:{next:e})}function kd(n,e){return(function(r,a){const c=new jn;return r.asyncQueue.enqueueAndForget((async()=>h3(await Jx(r),a,c))),c.promise})(Dn(n),e)}function fy(n,e,t){const r=t.docs.get(e._key),a=new ko(n);return new ni(n,a,e._key,r,new lo(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TM=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ro(e)}set(e,t,r){this._verifyNotCommitted();const a=Ji(e,this._firestore),c=Im(a.converter,t,r),u=Nm(this._dataReader,"WriteBatch.set",a._key,c,a.converter!==null,r);return this._mutations.push(u.toMutation(a._key,jt.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const c=Ji(e,this._firestore);let u;return u=typeof(t=Le(t))=="string"||t instanceof ha?ay(this._dataReader,"WriteBatch.update",c._key,t,r,a):iy(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(u.toMutation(c._key,jt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ji(e,this._firestore);return this._mutations=this._mutations.concat(new uc(t._key,jt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new pe(se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ji(n,e){if((n=Le(n)).firestore!==e)throw new pe(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EM=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Ro(t)}get(t){const r=Ji(t,this._firestore),a=new hM(this._firestore);return this._transaction.lookup([r._key]).then((c=>{if(!c||c.length!==1)return je();const u=c[0];if(u.isFoundDocument())return new rd(this._firestore,a,u.key,u,r.converter);if(u.isNoDocument())return new rd(this._firestore,a,r._key,null,r.converter);throw je()}))}set(t,r,a){const c=Ji(t,this._firestore),u=Im(c.converter,r,a),f=Nm(this._dataReader,"Transaction.set",c._key,u,c.converter!==null,a);return this._transaction.set(c._key,f),this}update(t,r,a,...c){const u=Ji(t,this._firestore);let f;return f=typeof(r=Le(r))=="string"||r instanceof ha?ay(this._dataReader,"Transaction.update",u._key,r,a,c):iy(this._dataReader,"Transaction.update",u._key,r),this._transaction.update(u._key,f),this}delete(t){const r=Ji(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ji(e,this._firestore),r=new ko(this._firestore);return super.get(e).then((a=>new ni(this._firestore,r,t._key,a._document,new lo(!1,!1),t.converter)))}};function SM(n,e,t){n=lt(n,Wt);const r=Object.assign(Object.assign({},NM),t);return(function(c){if(c.maxAttempts<1)throw new pe(se.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(c,u,f){const m=new jn;return c.asyncQueue.enqueueAndForget((async()=>{const x=await D3(c);new C3(c.asyncQueue,x,f,u,m).au()})),m.promise})(Dn(n),(a=>e(new EM(n,a))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AM(){return new Rd("deleteField")}function jM(){return new ty("serverTimestamp")}function IM(...n){return new ny("arrayUnion",n)}function RM(...n){return new sy("arrayRemove",n)}function CM(n){return new ry("increment",n)}(function(e,t=!0){(function(a){oc=a})(pa),ia(new br("firestore",((r,{instanceIdentifier:a,options:c})=>{const u=r.getProvider("app").getImmediate(),f=new Wt(new O5(r.getProvider("auth-internal")),new F5(r.getProvider("app-check-internal")),(function(x,y){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new pe(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new la(x.options.projectId,y)})(u,a),u);return c=Object.assign({useFetchStreams:t},c),f._setSettings(c),f}),"PUBLIC").setMultipleInstances(!0)),Qs(Rw,"4.7.3",e),Qs(Rw,"4.7.3","esm2017")})();const kM="@firebase/firestore-compat",DM="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(){if(typeof Uint8Array>"u")throw new pe("unimplemented","Uint8Arrays are not available in this environment.")}function z1(){if(!hD())throw new pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}class id{constructor(e){this._delegate=e}static fromBase64String(e){return z1(),new id(Nr.fromBase64String(e))}static fromUint8Array(e){return B1(),new id(Nr.fromUint8Array(e))}toBase64(){return z1(),this._delegate.toBase64()}toUint8Array(){return B1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(n){return MM(n,["next","error","complete"])}function MM(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{enableIndexedDbPersistence(e,t){return G3(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return K3(e._delegate)}clearIndexedDbPersistence(e){return $3(e._delegate)}}class FE{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof la||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&_r("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){q3(this._delegate,e,t,r)}enableNetwork(){return Y3(this._delegate)}disableNetwork(){return W3(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,yE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Q3(this._delegate)}onSnapshotsInSync(e){return wM(this._delegate,e)}get app(){if(!this._appCompat)throw new pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new tc(this,NE(this._delegate,e))}catch(t){throw Fn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ds(this,Gf(this._delegate,e))}catch(t){throw Fn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Un(this,B3(this._delegate,e))}catch(t){throw Fn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return SM(this._delegate,t=>e(new qE(this,t)))}batch(){return Dn(this._delegate),new BE(new TM(this._delegate,e=>kd(this._delegate,e)))}loadBundle(e){return X3(this._delegate,e)}namedQuery(e){return J3(this._delegate,e).then(t=>t?new Un(this,t):null)}}class Rm extends hy{constructor(e){super(),this.firestore=e}convertBytes(e){return new id(new Nr(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ds.forKey(t,this.firestore,null)}}function OM(n){k5(n)}class qE{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Rm(e)}get(e){const t=co(e);return this._delegate.get(t).then(r=>new ad(this._firestore,new ni(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=co(e);return r?(my("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const c=co(e);return arguments.length===2?this._delegate.update(c,t):this._delegate.update(c,t,r,...a),this}delete(e){const t=co(e);return this._delegate.delete(t),this}}class BE{constructor(e){this._delegate=e}set(e,t,r){const a=co(e);return r?(my("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const c=co(e);return arguments.length===2?this._delegate.update(c,t):this._delegate.update(c,t,r,...a),this}delete(e){const t=co(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Eo{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Vu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new od(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Eo.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let c=a.get(t);return c||(c=new Eo(e,new Rm(e),t),a.set(t,c)),c}}Eo.INSTANCES=new WeakMap;class Ds{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rm(e)}static forPath(e,t,r){if(e.length%2!==0)throw new pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ds(t,new kt(t._delegate,r,new Se(e)))}static forKey(e,t,r){return new Ds(t,new kt(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new tc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new tc(this.firestore,NE(this._delegate,e))}catch(t){throw Fn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Le(e),e instanceof kt?TE(this._delegate,e):!1}set(e,t){t=my("DocumentReference.set",t);try{return t?F1(this._delegate,e,t):F1(this._delegate,e)}catch(r){throw Fn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?q1(this._delegate,e):q1(this._delegate,e,t,...r)}catch(a){throw Fn(a,"updateDoc()","DocumentReference.update()")}}delete(){return vM(this._delegate)}onSnapshot(...e){const t=zE(e),r=HE(e,a=>new ad(this.firestore,new ni(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return UE(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=pM(this._delegate):(e==null?void 0:e.source)==="server"?t=gM(this._delegate):t=mM(this._delegate),t.then(r=>new ad(this.firestore,new ni(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ds(this.firestore,e?this._delegate.withConverter(Eo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Fn(n,e,t){return n.message=n.message.replace(e,t),n}function zE(n){for(const e of n)if(typeof e=="object"&&!P0(e))return e;return{}}function HE(n,e){var t,r;let a;return P0(n[0])?a=n[0]:P0(n[1])?a=n[1]:typeof n[0]=="function"?a={next:n[0],error:n[1],complete:n[2]}:a={next:n[1],error:n[2],complete:n[3]},{next:c=>{a.next&&a.next(e(c))},error:(t=a.error)===null||t===void 0?void 0:t.bind(a),complete:(r=a.complete)===null||r===void 0?void 0:r.bind(a)}}class ad{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ds(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return LE(this._delegate,e._delegate)}}class od extends ad{data(e){const t=this._delegate.data(e);return this._delegate._converter||D5(t!==void 0),t}}class Un{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rm(e)}where(e,t,r){try{return new Un(this.firestore,Wi(this._delegate,rM(e,t,r)))}catch(a){throw Fn(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Un(this.firestore,Wi(this._delegate,iM(e,t)))}catch(r){throw Fn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Un(this.firestore,Wi(this._delegate,aM(e)))}catch(t){throw Fn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Un(this.firestore,Wi(this._delegate,oM(e)))}catch(t){throw Fn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Un(this.firestore,Wi(this._delegate,lM(...e)))}catch(t){throw Fn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Un(this.firestore,Wi(this._delegate,cM(...e)))}catch(t){throw Fn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Un(this.firestore,Wi(this._delegate,uM(...e)))}catch(t){throw Fn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Un(this.firestore,Wi(this._delegate,dM(...e)))}catch(t){throw Fn(t,"endAt()","Query.endAt()")}}isEqual(e){return EE(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=yM(this._delegate):(e==null?void 0:e.source)==="server"?t=bM(this._delegate):t=xM(this._delegate),t.then(r=>new O0(this.firestore,new fa(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=zE(e),r=HE(e,a=>new O0(this.firestore,new fa(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return UE(this._delegate,t,r)}withConverter(e){return new Un(this.firestore,e?this._delegate.withConverter(Eo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class VM{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new od(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class O0{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Un(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new od(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new VM(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new od(this._firestore,r))})}isEqual(e){return LE(this._delegate,e._delegate)}}class tc extends Un{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ds(this.firestore,e):null}doc(e){try{return e===void 0?new Ds(this.firestore,Gf(this._delegate)):new Ds(this.firestore,Gf(this._delegate,e))}catch(t){throw Fn(t,"doc()","CollectionReference.doc()")}}add(e){return _M(this._delegate,e).then(t=>new Ds(this.firestore,t))}isEqual(e){return TE(this._delegate,e._delegate)}withConverter(e){return new tc(this.firestore,e?this._delegate.withConverter(Eo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function co(n){return lt(n,kt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(...e){this._delegate=new ha(...e)}static documentId(){return new py(At.keyField().canonicalString())}isEqual(e){return e=Le(e),e instanceof ha?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this._delegate=e}static serverTimestamp(){const e=jM();return e._methodName="FieldValue.serverTimestamp",new ao(e)}static delete(){const e=AM();return e._methodName="FieldValue.delete",new ao(e)}static arrayUnion(...e){const t=IM(...e);return t._methodName="FieldValue.arrayUnion",new ao(t)}static arrayRemove(...e){const t=RM(...e);return t._methodName="FieldValue.arrayRemove",new ao(t)}static increment(e){const t=CM(e);return t._methodName="FieldValue.increment",new ao(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM={Firestore:FE,GeoPoint:_m,Timestamp:It,Blob:id,Transaction:qE,WriteBatch:BE,DocumentReference:Ds,DocumentSnapshot:ad,Query:Un,QueryDocumentSnapshot:od,QuerySnapshot:O0,CollectionReference:tc,FieldPath:py,FieldValue:ao,setLogLevel:OM,CACHE_SIZE_UNLIMITED:H3};function UM(n,e){n.INTERNAL.registerComponent(new br("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps(Object.assign({},LM)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(n){UM(n,(e,t)=>new FE(e,t,new PM)),n.registerVersion(kM,DM)}FM(xs);const qM={apiKey:"AIzaSyDHQFIcPtd97RAPiT41EyQXaCflHga4jXI",authDomain:"masbotinventory.firebaseapp.com",projectId:"masbotinventory",storageBucket:"masbotinventory.firebasestorage.app",messagingSenderId:"1040093470535",appId:"1:1040093470535:web:dc9ec5b6da52e37aa83662",measurementId:"G-FV1T8VHT5Z"};xs.apps.length||xs.initializeApp(qM);const Ne=xs.firestore(),H1=xs.auth();Ne.enablePersistence({synchronizeTabs:!0}).catch(n=>{n.code=="failed-precondition"?console.warn("Firestore persistence failed: Multiple tabs open"):n.code=="unimplemented"&&console.warn("Firestore persistence failed: Browser not supported")});const BM=({onLogin:n})=>{const[e,t]=L.useState(""),[r,a]=L.useState(""),[c,u]=L.useState(""),[f,m]=L.useState(!1),[x,y]=L.useState(!1),v=async A=>{if(A.preventDefault(),e&&r){m(!0),u("");try{await n(e,r)||u("Invalid email or password.")}catch(V){console.error("Login error",V),u(V.message||"Login failed")}finally{m(!1)}}else u("Please enter both email and password.")},E=async()=>{if(!(!window.confirm(`WARNING: This will PERMANENTLY DELETE ALL DATA (Employees, Inventory, Orders, etc.).

Are you sure you want to completely wipe the system to start fresh?`)||prompt("Type 'DELETE' to confirm wiping the database:")!=="DELETE")){y(!0);try{const V=["employees","users","inventory","leaveRequests","payrollHistory","labs","toners","mrfs","attendanceRecords","supplyChainRequests","purchaseRequests","purchaseOrders","recipes","vendors"];for(const R of V){const H=await Ne.collection(R).get();if(H.empty)continue;const ae=Ne.batch();let ee=0;for(const z of H.docs)ae.delete(Ne.collection(R).doc(z.id)),ee++;await ae.commit(),console.log(`Deleted collection: ${R}`)}alert(`System Reset Successful. All data has been deleted.
You can now login as 'admin' / '123' to start fresh.`),window.location.reload()}catch(V){console.error(V),alert("Error resetting database: "+V.message)}finally{y(!1)}}};return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 p-4 relative",children:[o.jsxs("div",{className:"bg-white p-8 md:p-12 rounded-2xl shadow-lg w-full max-w-md transform transition-all duration-300 border-t-4 border-purple-900",children:[o.jsxs("div",{className:"flex flex-col items-center mb-8",children:[o.jsx(ma,{className:"h-20 w-auto mb-4"}),o.jsx("p",{className:"text-blue-900 font-medium",children:"Admin Login"})]}),o.jsxs("form",{onSubmit:v,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-blue-900",children:"Email"}),o.jsx("input",{id:"email",type:"text",value:e,onChange:A=>t(A.target.value),className:"mt-1 block w-full px-4 py-3 bg-slate-50 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-purple-900 focus:border-purple-900 sm:text-sm text-blue-900",placeholder:"admin or user@example.com"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-blue-900",children:"Password"}),o.jsx("input",{id:"password",type:"password",value:r,onChange:A=>a(A.target.value),className:"mt-1 block w-full px-4 py-3 bg-slate-50 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-purple-900 focus:border-purple-900 sm:text-sm text-blue-900",placeholder:""})]}),c&&o.jsx("p",{className:"text-sm text-red-600",children:c}),o.jsx("button",{type:"submit",disabled:f,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-900 hover:bg-purple-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-900 transition-colors duration-200 disabled:bg-purple-400",children:f?"Logging in...":"Login"})]})]}),o.jsx("div",{className:"absolute bottom-4 right-4",children:o.jsx("button",{onClick:E,disabled:x,className:"text-xs text-red-300 hover:text-red-600 underline transition-colors",children:x?"Wiping Data...":"Reset System Data (Danger)"})})]})},zM=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.68c.11-.32.223-.65.334-.982l.012-.035a6.375 6.375 0 01-2.924-4.982 6.375 6.375 0 0111.085-3.834c.11.32.223.65.334.982l.012-.035a6.375 6.375 0 01-2.924 4.982 6.375 6.375 0 01-11.085 3.834 6.375 6.375 0 012.924 4.982z"})}),ld=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h6M9 11.25h6m-6 4.5h6M21 21V3M3 21V3"})}),gy=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"})}),xy=n=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:[o.jsx("path",{d:"M12 14.25c-3.75 0-7.5-1.34-7.5-3v-4.5c0-1.66 3.35-3 7.5-3s7.5 1.34 7.5 3v4.5c0 1.65-3.75 3-7.5 3z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5v6.75c0 1.65 3.75 3 7.5 3s7.5-1.35 7.5-3V10.5M4.5 10.5L12 15l7.5-4.5"})]}),GE=n=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 100-18 9 9 0 000 18z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 9h16.5M3.75 15h16.5M12 3v18"})]}),KE=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),$E=({module:n,onSelect:e})=>o.jsxs("div",{onClick:e,className:"bg-white p-8 rounded-2xl shadow-md hover:shadow-xl hover:-translate-y-2 transition-all duration-300 cursor-pointer text-center flex flex-col items-center h-full border-t-4 border-transparent hover:border-purple-600",role:"button",tabIndex:0,onKeyDown:t=>t.key==="Enter"&&e(),children:[o.jsx("div",{className:"text-purple-800 mb-5",children:n.icon}),o.jsx("h2",{className:"font-bold text-xl text-blue-900 mb-2",children:n.title}),o.jsx("p",{className:"text-sm text-blue-900 flex-grow",children:n.description})]}),Do=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})}),V0=[{id:"hr",icon:o.jsx(zM,{className:"w-12 h-12"}),title:"HR Module",description:"Attendance, Shifts, CCTV snapshots, Employee management"},{id:"inventory_management",icon:o.jsx(ld,{className:"w-12 h-12"}),title:"Inventory Management",description:"Manage assets, labs, printers, and consumables."},{id:"supply_chain",icon:o.jsx(ld,{className:"w-12 h-12"}),title:"Supply Chain Module",description:"Manage procurement, logistics, and supplier relations."},{id:"task_manager",icon:o.jsx(KE,{className:"w-12 h-12"}),title:"Task Manager",description:"Assign, track, and complete tasks with automated workflows."},{id:"finance",icon:o.jsx(gy,{className:"w-12 h-12"}),title:"Finance Module",description:"Budgeting, Payments, Receipts, WhatsApp receipts"},{id:"student",icon:o.jsx(xy,{className:"w-12 h-12"}),title:"Student Module",description:"Applicants, Student Portal, Attendance, Course delivery"},{id:"website",icon:o.jsx(GE,{className:"w-12 h-12"}),title:"Website & Portals",description:"Applicant Portal, Student Portal, Teacher/Admin Dashboards"}],HM=({onModuleSelect:n,onLogout:e,accessibleModules:t})=>{const r=t?V0.filter(a=>t.includes(a.id)):V0;return o.jsxs("div",{className:"relative w-full max-w-6xl mx-auto p-4 sm:p-8",children:[o.jsxs("header",{className:"text-center mb-10 flex flex-col items-center",children:[o.jsx(ma,{className:"h-20 w-auto mb-6"}),o.jsx("p",{className:"text-blue-900 text-lg",children:"Select a module to continue"})]}),o.jsx("main",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.length>0?r.map(a=>o.jsx($E,{module:a,onSelect:()=>n(a.id)},a.id)):o.jsxs("div",{className:"md:col-span-2 lg:col-span-3 text-center p-8 bg-white rounded-lg shadow-md",children:[o.jsx("h2",{className:"text-xl font-semibold text-blue-900",children:"No Modules Assigned"}),o.jsx("p",{className:"text-blue-900 mt-2",children:"You have not been assigned any modules. Please contact an administrator."})]})}),o.jsx("div",{className:"absolute top-4 right-4 sm:top-8 sm:right-8",children:o.jsxs("button",{onClick:e,className:"flex items-center gap-2 bg-white text-purple-900 px-4 py-2 rounded-lg shadow-md hover:bg-purple-50 transition-colors border border-purple-200","aria-label":"Logout",children:[o.jsx(Do,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:"Logout"})]})})]})},GM=({employee:n,onModuleSelect:e,onLogout:t,accessibleModules:r})=>{var x;const a=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),c=V0.filter(y=>r.includes(y.id)),f=n.employmentType==="Probation"?{total:0,used:0}:((x=n.leaveBalance)==null?void 0:x.annual)||{total:14,used:0},m=Math.max(0,f.total-f.used);return o.jsxs("div",{className:"min-h-screen bg-slate-50",children:[o.jsxs("header",{className:"bg-purple-900 shadow-sm border-b border-purple-800 px-6 py-4 flex justify-between items-center",children:[o.jsx(ma,{className:"h-8 w-auto brightness-0 invert"}),o.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-purple-100 hover:text-white transition-colors text-sm font-medium",children:[o.jsx(Do,{className:"w-5 h-5"}),"Logout"]})]}),o.jsxs("main",{className:"max-w-7xl mx-auto p-6 sm:p-8 space-y-8",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-blue-900",children:["Welcome back, ",n.firstName]}),o.jsx("p",{className:"text-blue-900 mt-1",children:a})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100 flex items-center gap-4",children:[o.jsx("div",{className:"h-16 w-16 rounded-full bg-purple-100 flex items-center justify-center text-purple-900 font-bold text-2xl",children:n.firstName.charAt(0)}),o.jsxs("div",{children:[o.jsxs("h2",{className:"font-bold text-blue-900",children:[n.firstName," ",n.lastName]}),o.jsx("p",{className:"text-sm text-blue-900",children:n.designation}),o.jsx("p",{className:"text-xs text-blue-800",children:n.department})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[o.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-1",children:"My Shift"}),o.jsx("p",{className:"text-lg font-semibold text-blue-900",children:n.shift||"Standard (9-6)"}),o.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[o.jsx("span",{className:"h-2 w-2 rounded-full bg-green-500"}),o.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Active"})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[o.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-1",children:"Annual Leave Balance"}),o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:"text-3xl font-bold text-blue-900",children:m}),o.jsxs("span",{className:"text-sm text-blue-800",children:["/ ",f.total," days"]})]}),o.jsx("div",{className:"w-full bg-slate-100 rounded-full h-1.5 mt-3",children:o.jsx("div",{className:"bg-purple-900 h-1.5 rounded-full",style:{width:f.total>0?`${m/f.total*100}%`:"0%"}})})]})]}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-6",children:"My Applications"}),c.length>0?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(y=>o.jsx($E,{module:y,onSelect:()=>e(y.id)},y.id))}):o.jsxs("div",{className:"bg-white rounded-xl p-8 text-center border border-dashed border-slate-300",children:[o.jsx("p",{className:"text-blue-900",children:"You do not have access to any modules yet."}),o.jsx("p",{className:"text-sm text-blue-800 mt-1",children:"Contact HR or IT administrator for access."})]})]})]})]})},Cm=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"})}),KM=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.68c.11-.32.223-.65.334-.982l.012-.035a6.375 6.375 0 01-2.924-4.982 6.375 6.375 0 0111.085-3.834c.11.32.223-.65.334.982l.012-.035a6.375 6.375 0 01-2.924 4.982 6.375 6.375 0 01-11.085 3.834 6.375 6.375 0 012.924 4.982z"})}),yy=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0h18M12 12.75h.008v.008H12v-.008z"})}),nc=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 14.25v2.25m3-4.5v4.5m3-6.75v6.75m3-9v9M6 20.25h12A2.25 2.25 0 0020.25 18V6A2.25 2.25 0 0018 3.75H6A2.25 2.25 0 003.75 6v12A2.25 2.25 0 006 20.25z"})}),$f=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m-7.5-2.962a3.75 3.75 0 015.25 0m-5.25 0a3.75 3.75 0 00-5.25 0M3 13.001v-5.25a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.75v5.25c0 .621-.504 1.125-1.125 1.125H4.125A1.125 1.125 0 013 13.001z"})}),$M=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286zm0 13.036h.008v.008h-.008v-.008z"})}),QM=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),YM=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),QE=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),YE=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"})}),WE=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),km=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zM12 2.25V4.5m5.834.166l-1.591 1.591M20.25 10.5H18M5.834 7.75l-1.591-1.591M4.5 10.5H2.25m11.106 4.75L9.13 18.218m-2.923-8.814l.159.098m3.523-2.226L9.13 5.782"})}),by=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-1.008 1.11-1.226l.45-1.691a1.125 1.125 0 012.15 0l.45 1.691c.55.218 1.02.684 1.11 1.226l1.691.45a1.125 1.125 0 010 2.15l-1.691.45c-.09.542-.56 1.008-1.11 1.226l-.45 1.691a1.125 1.125 0 01-2.15 0l-.45-1.691a1.722 1.722 0 01-1.11-1.226l-1.691-.45a1.125 1.125 0 010-2.15l1.691-.45zM12 12.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5zM3.94 14.406c-.542-.09-1.008-.56-1.226-1.11l-1.691-.45a1.125 1.125 0 010-2.15l1.691-.45c.218-.55.684-1.02 1.226-1.11l.45-1.691a1.125 1.125 0 012.15 0l.45 1.691c.55.218 1.02.684 1.11 1.226l1.691.45a1.125 1.125 0 010 2.15l-1.691.45c-.218.55-.684 1.02-1.226 1.11l-.45 1.691a1.125 1.125 0 01-2.15 0l-.45-1.691a1.722 1.722 0 01-1.11-1.226l-1.691-.45a1.125 1.125 0 010-2.15l1.691-.45c.09.542.56 1.008 1.11 1.226l.45 1.691a1.125 1.125 0 01-2.15 0l-.45-1.691a1.722 1.722 0 01-1.11-1.226zM14.406 20.06c-.09.542-.56 1.008-1.11 1.226l-.45 1.691a1.125 1.125 0 01-2.15 0l-.45-1.691c-.55-.218-1.02-.684-1.11-1.226l-1.691-.45a1.125 1.125 0 010-2.15l1.691-.45c.09-.542.56-1.008 1.11-1.226l.45-1.691a1.125 1.125 0 012.15 0l.45 1.691c.55.218 1.02.684 1.11 1.226l1.691.45a1.125 1.125 0 010 2.15l-1.691.45z"})}),cd=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-1.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25A2.25 2.25 0 015.25 3h9.75a2.25 2.25 0 012.25 2.25z"})}),XE=n=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 3.75H6A2.25 2.25 0 003.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0120.25 6v1.5m0 9V18A2.25 2.25 0 0118 20.25h-1.5m-9 0H6A2.25 2.25 0 013.75 18v-1.5M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v3m0 9v3m-4.5-4.5h-3m9 0h-3m-9-4.5h3m9 0h3"})]}),JE=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0110.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0l.229 2.523a1.125 1.125 0 01-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.061A2.25 2.25 0 0021 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 00-1.913-.247M6.34 18H5.279A2.25 2.25 0 013 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 011.913-.247m10.5 0a48.536 48.536 0 00-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5zm-3 0h.008v.008H15V10.5z"})}),WM=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),vy=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.75 3.03v.568c0 .334.148.65.405.864l1.068.89c.442.369.535 1.01.216 1.49l-.51.766a2.25 2.25 0 01-1.161.886l-.143.048a1.107 1.107 0 00-.57 1.664l.143.258a1.107 1.107 0 001.664.57l.143-.048a2.25 2.25 0 011.161.886l.51.766c.319.48.126 1.121-.216 1.49l-1.068.89a1.125 1.125 0 00-.405.864v.568m-6 0v-.568c0-.334-.148-.65-.405-.864l-1.068-.89a1.125 1.125 0 01-.216-1.49l.51-.766a2.25 2.25 0 001.161-.886l.143-.048a1.107 1.107 0 01.57-1.664l-.143-.258a1.107 1.107 0 01-1.664-.57l-.143.048a2.25 2.25 0 00-1.161-.886l-.51-.766a1.125 1.125 0 01.216-1.49l1.068-.89a1.125 1.125 0 00.405-.864v-.568a3 3 0 013-3h3.5a3 3 0 013 3v1.173c0 .521-.175 1.02-.49 1.432l-1.148 1.53c-.314.413-.77.68-1.256.75l-4.11.587c-.504.072-.994.27-1.432.559l-1.148.765a3 3 0 00-1.432 2.559V18a3 3 0 003 3h3.5a3 3 0 003-3v-1.173c0-.521.175-1.02.49-1.432l1.148-1.53c.314-.413.77-.68 1.256-.75l4.11-.587c.504-.072.994-.27 1.432-.559l1.148-.765a3 3 0 001.432-2.559V6a3 3 0 00-3-3h-3.5a3 3 0 00-3 3z"})}),XM=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"})}),JM=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0h18M12 12.75h.008v.008H12v-.008z"})}),ZM=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})}),e6=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),ud=[{id:"dashboard",label:"Dashboard",icon:Cm},{id:"employees",label:"Employees",icon:KM},{id:"attendance",label:"Attendance",icon:yy},{id:"reports",label:"Reports",icon:nc},{id:"users",label:"Users",icon:$f},{id:"user-access",label:"User Access Management",icon:$M}],dd=[{id:"departments",label:"Departments",icon:QM},{id:"leaves",label:"Leaves",icon:YM},{id:"payroll",label:"Payroll",icon:QE},{id:"performance",label:"Performance",icon:YE},{id:"training",label:"Training",icon:WE},{id:"recruitment",label:"Recruitment",icon:km}],t6=[...ud,...dd],_y=[{id:"master",label:"Master Inventory",icon:ld},{id:"laptops",label:"Laptops",icon:cd},{id:"desktops",label:"Desktops",icon:cd},{id:"printers",label:"Printers & Toners",icon:JE},{id:"labs",label:"Computer Labs",icon:XE},{id:"kitchen",label:"The Chef's Academy",icon:vy}],Qf=[{id:"assets",label:"Inventory",icon:cd},{id:"users",label:"Users",icon:$f},{id:"mrf",label:"MRF",icon:WM},{id:"reports",label:"Reports",icon:nc},{id:"settings",label:"Settings",icon:by}],n6=[..._y,...Qf.filter(n=>["users","mrf","reports","settings"].includes(n.id))],ZE=[{id:"sc_requests",label:"New Request",icon:ld},{id:"sc_my_requests",label:"My Requests",icon:nc},{id:"sc_approvals",label:"Account Manager",icon:km},{id:"sc_store",label:"Store Fulfillment",icon:vy},{id:"sc_purchase",label:"Purchase Department",icon:gy}],s6=[{id:"fin_dashboard",label:"Dashboard",icon:Cm},{id:"budgeting",label:"Budgeting",icon:gy},{id:"payments",label:"Payments",icon:QE},{id:"receipts",label:"Receipts",icon:YE},{id:"fin_reports",label:"Reports",icon:nc}],r6=[{id:"std_dashboard",label:"Dashboard",icon:Cm},{id:"applicants",label:"Applicants",icon:km},{id:"student_portal",label:"Student Portal",icon:xy},{id:"std_attendance",label:"Attendance",icon:yy},{id:"course_delivery",label:"Course Delivery",icon:WE}],i6=[{id:"web_dashboard",label:"Dashboard",icon:Cm},{id:"applicant_portal",label:"Applicant Portal",icon:km},{id:"student_portal_mgmt",label:"Student Portal",icon:xy},{id:"teacher_dash",label:"Teacher Dashboard",icon:GE},{id:"admin_dash",label:"Admin Dashboard",icon:by}],eS=[{id:"task_dashboard",label:"Task Board",icon:KE},{id:"task_calendar",label:"Calendar",icon:JM},{id:"task_chat",label:"Chat & Discussions",icon:XM},{id:"task_analytics",label:"Team Analytics",icon:ZM},{id:"task_notes",label:"My Notes",icon:e6}],G1={hr:t6,inventory_management:n6,supply_chain:ZE,finance:s6,student:r6,website:i6,task_manager:eS},K1=({link:n,activePage:e,setActivePage:t,isCollapsed:r})=>{const a=e===n.id;return o.jsxs("a",{href:"#",onClick:c=>{c.preventDefault(),t(n.id)},className:`flex items-center py-2.5 px-4 rounded-md transition-colors duration-200 ${a?"bg-purple-50 text-purple-900 font-bold border-r-4 border-purple-900":"text-blue-900 hover:bg-purple-50 hover:text-purple-900"} ${r?"justify-center":""}`,children:[o.jsx(n.icon,{className:`h-5 w-5 ${a?"text-purple-900":"text-purple-400"}`}),!r&&o.jsx("span",{className:"ml-3 text-sm",children:n.label})]})},a6=({activePage:n,setActivePage:e,isCollapsed:t,onLogout:r,permissions:a,currentUserEmail:c,employees:u})=>{const f=c==="admin",m=u.find(E=>E.email===c),x=f?"Administrator":m?`${m.firstName} ${m.lastName}`:c,y=(f?ud:ud.filter(E=>{var A;return(A=a[E.id])==null?void 0:A.view})).filter(E=>!((m==null?void 0:m.role)==="Employee"&&E.id==="dashboard")),v=f?dd:dd.filter(E=>{var A;return(A=a[E.id])==null?void 0:A.view});return o.jsxs("aside",{className:`bg-white flex flex-col transition-all duration-300 ease-in-out border-r border-slate-200 ${t?"w-20":"w-64"}`,children:[o.jsx("div",{className:`flex items-center border-b h-16 px-4 ${t?"justify-center":"justify-start"}`,children:t?o.jsx("div",{className:"bg-purple-900 text-white font-bold text-lg rounded-md p-2 w-9 h-9 flex items-center justify-center",children:"M"}):o.jsx(ma,{className:"h-8 w-auto"})}),o.jsxs("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:[y.map(E=>o.jsx(K1,{link:E,activePage:n,setActivePage:e,isCollapsed:t},E.id)),v.length>0&&o.jsxs("div",{className:"pt-4",children:[!t&&o.jsx("h3",{className:"px-4 text-xs font-semibold text-blue-900 uppercase tracking-wider mb-2",children:"HR Module"}),o.jsx("div",{className:"space-y-2",children:v.map(E=>o.jsx(K1,{link:E,activePage:n,setActivePage:e,isCollapsed:t},E.id))})]})]}),o.jsxs("div",{className:"mt-auto border-t border-slate-200",children:[o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:`flex items-center ${t?"justify-center":""}`,children:[o.jsx("div",{className:"h-9 w-9 rounded-full bg-purple-100 flex-shrink-0 flex items-center justify-center text-purple-900 font-bold","aria-label":"User avatar placeholder",children:x.charAt(0)}),!t&&o.jsxs("div",{className:"ml-3 overflow-hidden",children:[o.jsx("p",{className:"text-sm font-semibold text-blue-900 truncate",title:x,children:x}),o.jsx("p",{className:"text-xs text-blue-800 truncate",title:c,children:c})]})]})}),o.jsx("div",{className:"p-4 border-t border-slate-200",children:o.jsxs("button",{onClick:r,className:`flex items-center w-full py-2.5 px-4 rounded-md transition-colors duration-200 text-blue-900 hover:bg-red-50 hover:text-red-600 ${t?"justify-center":""}`,children:[o.jsx(Do,{className:"h-5 w-5"}),!t&&o.jsx("span",{className:"ml-3 text-sm font-medium",children:"Logout"})]})})]})]})},Yf=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),o6=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})}),tS=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),Dm=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5"})}),l6=({toggleSidebar:n,isSidebarCollapsed:e,onLogout:t,searchQuery:r,onSearchChange:a,onBack:c})=>o.jsxs("header",{className:"bg-purple-900 border-b border-purple-800 h-16 flex items-center justify-between px-6 flex-shrink-0",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("button",{onClick:n,className:"text-purple-200 hover:text-white mr-4",children:e?o.jsx(o6,{className:"w-5 h-5"}):o.jsx(Yf,{className:"w-5 h-5"})}),o.jsxs("button",{onClick:c,className:"flex items-center gap-2 text-sm font-medium text-purple-100 hover:text-white mr-4",children:[o.jsx(Dm,{className:"w-5 h-5"}),o.jsx("span",{children:"Home"})]}),o.jsx("div",{className:"flex items-center text-sm",children:o.jsx("span",{className:"font-semibold text-white text-lg tracking-wide",children:"MASERP"})})]}),o.jsx("div",{className:"flex-1 max-w-md mx-4",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(tS,{className:"h-5 w-5 text-purple-300"})}),o.jsx("input",{type:"text",placeholder:"Search employees, users...",value:r,onChange:u=>a(u.target.value),className:"block w-full bg-purple-800 border border-transparent rounded-md py-2 pl-10 pr-3 text-sm text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent focus:bg-purple-700"})]})}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{className:"text-sm font-medium text-purple-200 hover:text-white",children:"Invite"}),o.jsx("button",{className:"text-purple-200 hover:text-white","aria-label":"Settings",children:o.jsx(by,{className:"w-5 h-5"})}),o.jsx("button",{onClick:t,className:"text-purple-200 hover:text-red-300","aria-label":"Logout",children:o.jsx(Do,{className:"w-5 h-5"})}),o.jsx("div",{className:"h-8 w-8 rounded-full bg-purple-700 text-purple-200 flex items-center justify-center text-xs font-bold border border-purple-600","aria-label":"User avatar placeholder",children:"U"})]})]}),c6=({percentage:n,color:e,displayText:t})=>{const a=2*Math.PI*30,c=a-n/100*a;return o.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",children:[o.jsx("circle",{className:"text-blue-200",strokeWidth:"8",stroke:"currentColor",fill:"transparent",r:30,cx:"40",cy:"40"}),o.jsx("circle",{className:e,strokeWidth:"8",strokeDasharray:a,strokeDashoffset:c,strokeLinecap:"round",stroke:"currentColor",fill:"transparent",r:30,cx:"40",cy:"40"}),o.jsx("text",{x:"50%",y:"50%",textAnchor:"middle",dy:".3em",className:"text-lg font-bold text-blue-900 transform rotate-90 origin-center",children:t})]})},u6=({title:n,value:e,percentage:t,color:r})=>o.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(c6,{percentage:t,color:r,displayText:e})}),o.jsx("div",{className:"ml-4 text-left",children:o.jsx("p",{className:"text-sm text-blue-900",children:n})})]}),d6=({employees:n,leaveRequests:e,onLeaveRequestAction:t,onNavigate:r})=>{const[a,c]=L.useState([]),[u,f]=L.useState(!1);L.useEffect(()=>{const R=localStorage.getItem("hrQuickAccess");c(R?JSON.parse(R):["employees","attendance","leaves","payroll"])},[]);const m=n.length,x=m>0?Math.floor(m*(.85+Math.random()*.1)):0,y=[{title:"Present Employees",value:x.toString(),percentage:m>0?Math.round(x/m*100):0,color:"text-green-500"},{title:"Total Employees",value:m.toString(),percentage:100,color:"text-blue-900"}],v=L.useMemo(()=>e.filter(R=>R.status==="Pending HR"),[e]),E=R=>{const O=n.find(H=>H.id===R);return O?`${O.firstName} ${O.lastName}`:"Unknown Employee"},A=[...ud,...dd].filter(R=>R.id!=="dashboard"),V=R=>{c(O=>{let H;return O.includes(R)?H=O.filter(ae=>ae!==R):H=[...O,R],localStorage.setItem("hrQuickAccess",JSON.stringify(H)),H})};return o.jsxs("div",{children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"HR Dashboard"}),o.jsx("p",{className:"text-blue-900 mt-1",children:"Overview of personnel, attendance, and pending actions."})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:y.map(R=>o.jsx(u6,{...R},R.title))}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6",children:[o.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-lg shadow-sm border border-blue-100",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"font-bold text-blue-900 text-lg",children:"Pending Approvals"}),o.jsxs("span",{className:"text-xs font-medium bg-orange-100 text-orange-800 px-2 py-1 rounded-full",children:[v.length," Pending"]})]}),v.length>0?o.jsxs("div",{className:"space-y-4",children:[v.slice(0,5).map(R=>o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[o.jsxs("div",{className:"mb-3 sm:mb-0",children:[o.jsx("p",{className:"font-semibold text-blue-900",children:E(R.employeeId)}),o.jsxs("p",{className:"text-sm text-blue-900",children:[o.jsx("span",{className:"font-medium text-blue-900",children:R.leaveType}),"  ",R.fromDate," to ",R.toDate]}),o.jsxs("p",{className:"text-xs text-blue-900 mt-1 italic",children:['"',R.reason,'"']})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>t(R.id,"Approve"),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded hover:bg-green-700 transition-colors",children:"Approve"}),o.jsx("button",{onClick:()=>t(R.id,"Reject"),className:"px-3 py-1.5 bg-red-100 text-red-700 text-xs font-medium rounded hover:bg-red-200 transition-colors border border-red-200",children:"Reject"})]})]},R.id)),v.length>5&&o.jsxs("button",{onClick:()=>r("leaves"),className:"w-full text-center text-sm text-blue-900 hover:underline py-2",children:["View all ",v.length," requests"]})]}):o.jsxs("div",{className:"text-center py-10",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-green-100 text-green-600 mb-3",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),o.jsx("p",{className:"text-blue-900 font-medium",children:"All caught up!"}),o.jsx("p",{className:"text-blue-900 text-sm",children:"No pending leave requests."})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-blue-100 flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"font-bold text-blue-900 text-lg",children:"Create Shortcuts"}),o.jsx("button",{onClick:()=>f(!0),className:"text-blue-900 hover:text-blue-800 text-xs font-medium hover:underline",children:"Customize"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.map(R=>{const O=A.find(ae=>ae.id===R);if(!O)return null;const H=O.icon;return o.jsxs("button",{onClick:()=>r(R),className:"flex flex-col items-center justify-center p-4 bg-blue-50 hover:bg-blue-100 border border-blue-200 hover:border-blue-300 rounded-lg transition-all duration-200 group",children:[o.jsx(H,{className:"w-6 h-6 text-blue-900 group-hover:text-blue-900 mb-2"}),o.jsx("span",{className:"text-xs font-medium text-blue-900 group-hover:text-blue-900 text-center line-clamp-1",children:O.label})]},R)}),o.jsxs("button",{onClick:()=>f(!0),className:"flex flex-col items-center justify-center p-4 border-2 border-dashed border-blue-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-all text-blue-900 hover:text-blue-900",children:[o.jsx("span",{className:"text-2xl leading-none mb-1",children:"+"}),o.jsx("span",{className:"text-xs font-medium",children:"Add"})]})]})]})]}),u&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:()=>f(!1),children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",onClick:R=>R.stopPropagation(),children:[o.jsxs("div",{className:"p-5 border-b border-blue-100",children:[o.jsx("h3",{className:"font-bold text-lg text-blue-900",children:"Create Shortcuts"}),o.jsx("p",{className:"text-sm text-blue-900",children:"Select shortcuts to pin to your dashboard."})]}),o.jsx("div",{className:"p-5 max-h-[60vh] overflow-y-auto grid grid-cols-1 gap-2",children:A.map(R=>{const O=a.includes(R.id),H=R.icon;return o.jsxs("label",{className:`flex items-center p-3 rounded-lg border cursor-pointer transition-colors ${O?"bg-blue-50 border-blue-200":"bg-white border-blue-200 hover:bg-blue-50"}`,children:[o.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-blue-900 rounded focus:ring-blue-900 border-blue-300",checked:O,onChange:()=>V(R.id)}),o.jsxs("div",{className:"ml-3 flex items-center",children:[o.jsx(H,{className:"w-5 h-5 text-blue-900"}),o.jsx("span",{className:"ml-3 text-sm font-medium text-blue-900",children:R.label})]})]},R.id)})}),o.jsx("div",{className:"p-5 border-t border-blue-100 flex justify-end",children:o.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 bg-blue-900 text-white rounded-md text-sm font-medium hover:bg-blue-800",children:"Done"})})]})})]})},En=({id:n,label:e,type:t="text",value:r,onChange:a,required:c=!1,placeholder:u,disabled:f=!1})=>o.jsxs("div",{children:[o.jsx("label",{htmlFor:n,className:"block text-sm font-medium text-blue-900",children:e}),o.jsx("input",{type:t,id:n,name:n,value:r||"",onChange:a,required:c,placeholder:u,disabled:f,className:"mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm disabled:bg-slate-100 disabled:text-blue-900"})]}),Ja=({id:n,label:e,value:t,onChange:r,children:a,required:c=!1})=>o.jsxs("div",{children:[o.jsx("label",{htmlFor:n,className:"block text-sm font-medium text-blue-900",children:e}),o.jsx("select",{id:n,name:n,value:t||"",onChange:r,required:c,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md",children:a})]}),df=({title:n,children:e})=>o.jsxs("div",{className:"pt-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-4 border-b pb-2",children:n}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e})]}),h6=({isOpen:n,onClose:e,employee:t,onSave:r})=>{const[a,c]=L.useState({});if(L.useEffect(()=>{t&&c(t)},[t]),!n)return null;const u=m=>{const{id:x,value:y}=m.target;c(v=>({...v,[x]:y}))},f=m=>{m.preventDefault();const{id:x,...y}=a;t.id&&r(t.id,y)};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",onClick:e,children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] flex flex-col",onClick:m=>m.stopPropagation(),children:[o.jsx("div",{className:"sticky top-0 bg-white p-6 border-b z-10",children:o.jsxs("h2",{className:"text-xl font-bold text-blue-900",children:["Edit Employee: ",t.firstName," ",t.lastName]})}),o.jsxs("form",{onSubmit:f,className:"flex-1 overflow-y-auto",children:[o.jsx("div",{className:"p-8",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs(df,{title:"Personal Details",children:[o.jsx(En,{id:"employeeId",label:"Employee ID",value:a.employeeId,onChange:u,placeholder:"e.g., EMP-001"}),o.jsx(En,{id:"firstName",label:"First Name",value:a.firstName,onChange:u,required:!0}),o.jsx(En,{id:"lastName",label:"Last Name",value:a.lastName,onChange:u,required:!0}),o.jsx(En,{id:"fatherName",label:"Father's Name",value:a.fatherName,onChange:u,required:!0}),o.jsx(En,{id:"cnic",label:"CNIC",value:a.cnic,onChange:u,placeholder:"e.g., 35202-1234567-1"}),o.jsx(En,{id:"dob",label:"Date of Birth",type:"date",value:a.dob,onChange:u}),o.jsxs(Ja,{id:"gender",label:"Gender",value:a.gender,onChange:u,children:[o.jsx("option",{children:"Male"}),o.jsx("option",{children:"Female"}),o.jsx("option",{children:"Other"})]}),o.jsxs(Ja,{id:"maritalStatus",label:"Marital Status",value:a.maritalStatus,onChange:u,children:[o.jsx("option",{children:"Single"}),o.jsx("option",{children:"Married"})]})]}),o.jsxs(df,{title:"Contact & Address",children:[o.jsx(En,{id:"phone",label:"Phone Number",value:a.phone,onChange:u,placeholder:"e.g., 0300-1234567"}),o.jsx(En,{id:"email",label:"Official Email (Username)",type:"email",value:a.email,onChange:()=>{},required:!0,disabled:!0}),o.jsx(En,{id:"personalEmail",label:"Personal Email",type:"email",value:a.personalEmail,onChange:u}),o.jsx(En,{id:"currentAddress",label:"Current Address",value:a.currentAddress,onChange:u}),o.jsx(En,{id:"permanentAddress",label:"Permanent Address",value:a.permanentAddress,onChange:u})]}),o.jsxs(df,{title:"Employment Details",children:[o.jsxs(Ja,{id:"department",label:"Department",value:a.department,onChange:u,required:!0,children:[o.jsx("option",{children:"Human Resources"}),o.jsx("option",{children:"IT"}),o.jsx("option",{children:"Finance"}),o.jsx("option",{children:"Engineering"}),o.jsx("option",{children:"Marketing"}),o.jsx("option",{children:"Sales"})]}),o.jsx(En,{id:"designation",label:"Designation",value:a.designation,onChange:u,required:!0}),o.jsx(En,{id:"joiningDate",label:"Joining Date",type:"date",value:a.joiningDate,onChange:u,required:!0}),o.jsxs(Ja,{id:"shift",label:"Shift Timing",value:a.shift,onChange:u,required:!0,children:[o.jsx("option",{children:"Morning (09:00 AM - 06:00 PM)"}),o.jsx("option",{children:"Evening (02:00 PM - 11:00 PM)"}),o.jsx("option",{children:"Night (10:00 PM - 07:00 AM)"})]}),o.jsxs(Ja,{id:"employmentType",label:"Employment Type",value:a.employmentType,onChange:u,children:[o.jsx("option",{children:"Permanent"}),o.jsx("option",{children:"Probation"}),o.jsx("option",{children:"Intern"})]}),o.jsxs(Ja,{id:"status",label:"Status",value:a.status,onChange:u,children:[o.jsx("option",{children:"Active"}),o.jsx("option",{children:"Resigned"}),o.jsx("option",{children:"Terminated"})]})]}),o.jsxs(df,{title:"Financial & System Access",children:[o.jsx(En,{id:"salary",label:"Salary (PKR)",type:"number",value:a.salary,onChange:u,required:!0}),o.jsx(En,{id:"bankName",label:"Bank Name",value:a.bankName,onChange:u}),o.jsx(En,{id:"accountTitle",label:"Account Title",value:a.accountTitle,onChange:u}),o.jsx(En,{id:"accountNumber",label:"Account Number",value:a.accountNumber,onChange:u}),o.jsxs(Ja,{id:"role",label:"System Role",value:a.role,onChange:u,required:!0,children:[o.jsx("option",{value:"Employee",children:"Employee"}),o.jsx("option",{value:"HOD",children:"HOD"}),o.jsx("option",{value:"HR",children:"HR"})]})]})]})}),o.jsxs("div",{className:"sticky bottom-0 bg-slate-50 p-4 flex justify-end gap-4 border-t",children:[o.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 border border-slate-300 rounded-md shadow-sm text-sm font-medium text-blue-900 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",children:"Cancel"}),o.jsx("button",{type:"submit",className:"py-2 px-6 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500",children:"Save Changes"})]})]})]})})},$1={employeeId:"",firstName:"",lastName:"",fatherName:"",cnic:"",dob:"",gender:"Male",maritalStatus:"Single",currentAddress:"",permanentAddress:"",email:"",personalEmail:"",phone:"",emergencyContactName:"",emergencyContactPhone:"",department:"Human Resources",designation:"",joiningDate:"",employmentType:"Probation",status:"Active",salary:"",shift:"Morning (09:00 AM - 06:00 PM)",bankName:"",accountTitle:"",accountNumber:"",role:"Employee",password:"",confirmPassword:""},ln=({id:n,label:e,type:t="text",value:r,onChange:a,required:c=!1,placeholder:u})=>o.jsxs("div",{children:[o.jsx("label",{htmlFor:n,className:"block text-sm font-medium text-blue-900",children:e}),o.jsx("input",{type:t,id:n,name:n,value:r||"",onChange:a,required:c,placeholder:u,className:"mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 text-blue-900 focus:outline-none focus:ring-blue-900 focus:border-blue-900 sm:text-sm"})]}),El=({id:n,label:e,value:t,onChange:r,children:a,required:c=!1})=>o.jsxs("div",{children:[o.jsx("label",{htmlFor:n,className:"block text-sm font-medium text-blue-900",children:e}),o.jsx("select",{id:n,name:n,value:t||"",onChange:r,required:c,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 text-blue-900 focus:outline-none focus:ring-blue-900 focus:border-blue-900 sm:text-sm rounded-md",children:a})]}),_u=({title:n,children:e})=>o.jsxs("div",{className:"pt-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-4 border-b pb-2",children:n}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e})]}),f6=({onAddEmployee:n,employees:e,onResignEmployee:t,onUpdateEmployee:r})=>{const[a,c]=L.useState($1),[u,f]=L.useState(null),[m,x]=L.useState(null),[y,v]=L.useState(!1),[E,A]=L.useState(null),[V,R]=L.useState(!1);L.useEffect(()=>{if(u){const T=setTimeout(()=>f(null),5e3);return()=>clearTimeout(T)}},[u]),L.useEffect(()=>{if(m){const T=setTimeout(()=>x(null),5e3);return()=>clearTimeout(T)}},[m]);const O=T=>{const{id:S,value:N}=T.target;c(I=>({...I,[S]:N}))},H=T=>{c(S=>({...S,employmentType:T}))},ae=T=>{if(T.preventDefault(),a.password!==a.confirmPassword){f({type:"error",text:"Passwords do not match."});return}if(a.password.length<6){f({type:"error",text:"Password must be at least 6 characters long."});return}const{password:S,confirmPassword:N,...I}=a;n(I,S),x({type:"success",text:`Employee ${a.firstName} ${a.lastName} added successfully.`}),c($1),R(!1)},ee=T=>{A(T),v(!0)},z=()=>{A(null),v(!1)},F=async(T,S)=>{const N=await r(T,S);x({type:N.success?"success":"error",text:N.message}),N.success&&z()},G=async T=>{if(window.confirm(`Are you sure you want to mark ${T.firstName} ${T.lastName} as resigned?`)){const S=await t(T.id);x({type:S.success?"success":"error",text:S.message})}},C=L.useMemo(()=>[...e].sort((T,S)=>T.status==="Resigned"&&S.status!=="Resigned"?1:T.status!=="Resigned"&&S.status==="Resigned"?-1:0),[e]);return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Employee Management"}),o.jsx("button",{onClick:()=>R(!V),className:`py-2 px-4 rounded-md shadow-sm text-sm font-medium text-white transition-colors ${V?"bg-red-500 hover:bg-red-600":"bg-blue-900 hover:bg-blue-800"}`,children:V?"Cancel Adding":"Add New Employee"})]}),V&&o.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm max-w-6xl mx-auto border border-blue-100",children:[o.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-6",children:"Add New Employee"}),o.jsxs("form",{onSubmit:ae,className:"space-y-6",children:[o.jsxs(_u,{title:"Personal Details",children:[o.jsx(ln,{id:"employeeId",label:"Employee ID",value:a.employeeId,onChange:O,placeholder:"e.g., EMP-001"}),o.jsx(ln,{id:"firstName",label:"First Name",value:a.firstName,onChange:O,required:!0}),o.jsx(ln,{id:"lastName",label:"Last Name",value:a.lastName,onChange:O,required:!0}),o.jsx(ln,{id:"fatherName",label:"Father's Name",value:a.fatherName,onChange:O,required:!0}),o.jsx(ln,{id:"cnic",label:"CNIC",value:a.cnic,onChange:O,placeholder:"e.g., 35202-1234567-1"}),o.jsx(ln,{id:"dob",label:"Date of Birth",type:"date",value:a.dob,onChange:O}),o.jsxs(El,{id:"gender",label:"Gender",value:a.gender,onChange:O,children:[o.jsx("option",{children:"Male"}),o.jsx("option",{children:"Female"}),o.jsx("option",{children:"Other"})]}),o.jsxs(El,{id:"maritalStatus",label:"Marital Status",value:a.maritalStatus,onChange:O,children:[o.jsx("option",{children:"Single"}),o.jsx("option",{children:"Married"})]})]}),o.jsxs(_u,{title:"Contact & Address",children:[o.jsx(ln,{id:"phone",label:"Phone Number",value:a.phone,onChange:O,placeholder:"e.g., 0300-1234567"}),o.jsx(ln,{id:"email",label:"Official Email",type:"email",value:a.email,onChange:O,required:!0}),o.jsx(ln,{id:"personalEmail",label:"Personal Email",type:"email",value:a.personalEmail,onChange:O}),o.jsx(ln,{id:"currentAddress",label:"Current Address",value:a.currentAddress,onChange:O}),o.jsx(ln,{id:"permanentAddress",label:"Permanent Address",value:a.permanentAddress,onChange:O})]}),o.jsxs(_u,{title:"Employment Details",children:[o.jsxs(El,{id:"department",label:"Department",value:a.department,onChange:O,required:!0,children:[o.jsx("option",{children:"Human Resources"}),o.jsx("option",{children:"IT"}),o.jsx("option",{children:"Finance"}),o.jsx("option",{children:"Engineering"}),o.jsx("option",{children:"Marketing"}),o.jsx("option",{children:"Sales"})]}),o.jsx(ln,{id:"designation",label:"Designation",value:a.designation,onChange:O,required:!0}),o.jsx(ln,{id:"joiningDate",label:"Joining Date",type:"date",value:a.joiningDate,onChange:O,required:!0}),o.jsxs(El,{id:"shift",label:"Shift Timing",value:a.shift,onChange:O,required:!0,children:[o.jsx("option",{children:"Morning (09:00 AM - 06:00 PM)"}),o.jsx("option",{children:"Evening (02:00 PM - 11:00 PM)"}),o.jsx("option",{children:"Night (10:00 PM - 07:00 AM)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-2",children:"Employment Status"}),o.jsxs("div",{className:"flex space-x-6 mt-2",children:[o.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-blue-900 rounded focus:ring-blue-900 border-slate-300",checked:a.employmentType==="Probation",onChange:()=>H("Probation")}),o.jsx("span",{className:"ml-2 text-blue-900",children:"Probation"})]}),o.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-blue-900 rounded focus:ring-blue-900 border-slate-300",checked:a.employmentType==="Permanent",onChange:()=>H("Permanent")}),o.jsx("span",{className:"ml-2 text-blue-900",children:"Permanent"})]})]}),o.jsx("p",{className:"text-xs text-blue-900 mt-1",children:a.employmentType==="Probation"?"Leaves are not allocated during probation.":"Leaves will be allocated pro-rata based on joining date."})]}),o.jsxs(El,{id:"status",label:"Status",value:a.status,onChange:O,children:[o.jsx("option",{children:"Active"}),o.jsx("option",{children:"Resigned"}),o.jsx("option",{children:"Terminated"})]})]}),o.jsxs(_u,{title:"Financial & System Access",children:[o.jsx(ln,{id:"salary",label:"Salary (PKR)",type:"number",value:a.salary,onChange:O,required:!0}),o.jsx(ln,{id:"bankName",label:"Bank Name",value:a.bankName,onChange:O}),o.jsx(ln,{id:"accountTitle",label:"Account Title",value:a.accountTitle,onChange:O}),o.jsx(ln,{id:"accountNumber",label:"Account Number",value:a.accountNumber,onChange:O}),o.jsxs(El,{id:"role",label:"System Role",value:a.role,onChange:O,required:!0,children:[o.jsx("option",{value:"Employee",children:"Employee"}),o.jsx("option",{value:"HOD",children:"HOD"}),o.jsx("option",{value:"HR",children:"HR"})]})]}),o.jsxs(_u,{title:"Create User Account",children:[o.jsx(ln,{id:"password",label:"Password for User Account",type:"password",value:a.password,onChange:O,required:!0,placeholder:"Min. 6 characters"}),o.jsx(ln,{id:"confirmPassword",label:"Confirm Password",type:"password",value:a.confirmPassword,onChange:O,required:!0})]}),u&&o.jsx("div",{className:`mt-4 p-3 rounded-md text-sm ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text}),o.jsxs("div",{className:"flex justify-end pt-4 gap-4",children:[o.jsx("button",{type:"button",onClick:()=>R(!1),className:"py-2 px-6 border border-slate-300 rounded-md shadow-sm text-sm font-medium text-blue-900 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",children:"Cancel"}),o.jsx("button",{type:"submit",className:"py-2 px-6 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-900 hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900",children:"Add Employee"})]})]})]}),o.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm max-w-7xl mx-auto",children:[o.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-4",children:"Employee List"}),m&&o.jsx("div",{className:`mb-4 p-3 rounded-md text-sm ${m.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.text}),o.jsx("div",{className:"overflow-x-auto",children:e.length>0?o.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[o.jsx("thead",{className:"bg-slate-50",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Emp. ID"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Name"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Designation"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Department"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Shift"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Status"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Salary (PKR)"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-blue-900 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:C.map(T=>o.jsxs("tr",{className:`${T.status==="Resigned"?"bg-slate-50 opacity-60":""} hover:bg-purple-50 transition-colors`,children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-blue-900",children:T.employeeId||"N/A"}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:[T.firstName," ",T.lastName,o.jsx("div",{className:"text-xs text-blue-900 font-normal",children:T.email})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:T.designation}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:T.department}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:T.shift||"-"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:o.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${T.status==="Active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:T.status})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:T.salary}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-4",children:[o.jsx("button",{onClick:()=>ee(T),className:"text-blue-900 hover:text-blue-950",children:"Edit"}),o.jsx("button",{onClick:()=>G(T),disabled:T.status==="Resigned",className:"text-orange-600 hover:text-orange-900 disabled:text-blue-900 disabled:cursor-not-allowed disabled:no-underline",children:"Resign"})]})]},T.id))})]}):o.jsx("p",{className:"text-center text-blue-900 py-10",children:'There are no employees to display. Click "Add New Employee" to get started.'})})]}),y&&E&&o.jsx(h6,{isOpen:y,onClose:z,employee:E,onSave:F})]})},m6=({users:n,employees:e})=>o.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm border border-blue-100",children:[o.jsx("div",{className:"flex justify-between items-center mb-6",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"User Accounts"}),o.jsx("p",{className:"text-sm text-blue-800",children:"List of all system logins. Users are automatically created when an employee is added."})]})}),o.jsx("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[o.jsx("thead",{className:"bg-slate-50",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase tracking-wider border-r",children:"Name / Employee Link"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase tracking-wider border-r",children:"Email (Login ID)"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase tracking-wider",children:"Current Password"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:n.length>0?n.map(t=>{const r=e.find(c=>c.email===t.email),a=t.email==="admin"?"Administrator":r?`${r.firstName} ${r.lastName}`:"Unlinked User";return o.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap border-r",children:[o.jsx("div",{className:"text-sm font-bold text-blue-900",children:a}),r&&o.jsx("div",{className:"text-xs text-blue-800 italic",children:r.designation})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap border-r",children:o.jsx("span",{className:"text-sm text-blue-900 font-medium",children:t.email})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsx("code",{className:"text-sm px-2 py-1 bg-slate-100 rounded border border-slate-200 text-purple-900 font-mono",children:t.password||"********"}),t.passwordChangeRequired&&o.jsx("span",{className:"ml-2 text-[10px] font-bold bg-orange-100 text-orange-700 px-1.5 py-0.5 rounded uppercase",children:"Must Change"})]})]},t.id)}):o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"px-6 py-10 text-center",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("svg",{className:"w-12 h-12 text-slate-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),o.jsx("p",{className:"text-blue-900 font-medium",children:"No system users found."}),o.jsx("p",{className:"text-sm text-blue-800",children:"Add an employee in the HR section to see their login here."})]})})})})]})})]}),wy=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),p6=[{id:"hr",name:"HR Module",color:"bg-purple-600",icon:""},{id:"inventory_management",name:"Inventory Management",color:"bg-blue-600",icon:""},{id:"supply_chain",name:"Supply Chain",color:"bg-green-600",icon:""},{id:"task_manager",name:"Task Manager",color:"bg-indigo-600",icon:""},{id:"finance",name:"Finance Module",color:"bg-teal-600",icon:""},{id:"student",name:"Student Module",color:"bg-orange-600",icon:""},{id:"website",name:"Website & Portals",color:"bg-pink-600",icon:""}],Q1=[{id:"view",label:"View",icon:""},{id:"edit",label:"Edit",icon:""},{id:"update",label:"Update",icon:""},{id:"delete",label:"Delete",icon:""}],Y1=({checked:n,onChange:e,label:t,size:r="md"})=>o.jsxs("label",{className:"flex items-center cursor-pointer group",children:[o.jsxs("div",{className:"relative",onClick:a=>{a.stopPropagation(),e(!n)},children:[o.jsx("div",{className:`block rounded-full transition-all duration-300 ${r==="sm"?"w-11 h-6":"w-14 h-8"} ${n?"bg-purple-600 shadow-inner":"bg-slate-300"}`}),o.jsx("div",{className:`absolute left-1 top-1 bg-white rounded-full transition-transform duration-300 shadow-lg ${r==="sm"?"w-4 h-4":"w-6 h-6"} ${n?r==="sm"?"translate-x-5":"translate-x-6":"translate-x-0"}`})]}),t&&o.jsx("span",{className:`ml-3 text-xs font-black uppercase tracking-wider ${n?"text-purple-700":"text-slate-400"}`,children:t})]}),g6=({users:n,employees:e,allPermissions:t,onUserPermissionsChange:r})=>{const[a,c]=L.useState(null),[u,f]=L.useState(null),[m,x]=L.useState(new Set),[y,v]=L.useState(""),[E,A]=L.useState("idle"),V=L.useMemo(()=>{const z=n.filter(G=>G.email!=="admin");if(!y)return z;const F=y.toLowerCase();return z.filter(G=>{const C=e.find(T=>T.email===G.email);return G.email.toLowerCase().includes(F)||C&&`${C.firstName} ${C.lastName}`.toLowerCase().includes(F)})},[n,e,y]);L.useEffect(()=>{a?(f(t[a]||{}),x(new Set)):f(null)},[a,t]);const R=(z,F)=>{f(G=>{if(!G)return null;const C={...G};if(F){const T=G1[z]||[],S={};T.forEach(N=>{S[N.id]={view:!1,edit:!1,delete:!1,update:!1}}),C[z]=S,x(N=>new Set(N).add(z))}else delete C[z],x(T=>{const S=new Set(T);return S.delete(z),S});return C})},O=z=>{x(F=>{const G=new Set(F);return G.has(z)?G.delete(z):G.add(z),G})},H=(z,F,G,C)=>{f(T=>{if(!T)return null;const S=T[z]||{},N=S[F]||{view:!1,edit:!1,delete:!1,update:!1};return{...T,[z]:{...S,[F]:{...N,[G]:C}}}})},ae=async()=>{!a||u===null||(A("saving"),r(a,u),setTimeout(()=>{A("success"),setTimeout(()=>A("idle"),2e3)},800))},ee=L.useMemo(()=>{if(!a)return null;const z=e.find(F=>F.email===a);return{name:z?`${z.firstName} ${z.lastName}`:a,email:a,dept:(z==null?void 0:z.department)||"System User",role:(z==null?void 0:z.role)||"Staff",initials:(z?`${z.firstName[0]}${z.lastName[0]}`:a[0]).toUpperCase()}},[a,e]);return o.jsxs("div",{className:"flex flex-col lg:flex-row h-[calc(100vh-120px)] gap-6 animate-fade-in",children:[o.jsxs("div",{className:"lg:w-80 flex flex-col bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[o.jsxs("div",{className:"p-5 border-b border-slate-100 bg-slate-50/50",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"font-black text-blue-900 uppercase tracking-widest text-[10px]",children:"User Directory"}),o.jsx("span",{className:"bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full text-[10px] font-black",children:V.length})]}),o.jsxs("div",{className:"relative",children:[o.jsx(tS,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),o.jsx("input",{type:"text",placeholder:"Search for a user...",className:"w-full pl-10 pr-4 py-2.5 text-sm bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none transition-all shadow-sm",value:y,onChange:z=>v(z.target.value)})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:V.map(z=>{const F=e.find(C=>C.email===z.email),G=a===z.email;return o.jsxs("button",{onClick:()=>c(z.email),className:`w-full flex items-center gap-3 p-4 text-left transition-all border-b border-slate-50 last:border-0 ${G?"bg-purple-50 border-r-4 border-r-purple-600":"hover:bg-slate-50"}`,children:[o.jsx("div",{className:`h-11 w-11 rounded-xl flex items-center justify-center font-black text-sm shadow-sm transition-transform ${G?"bg-purple-600 text-white scale-105":"bg-blue-50 text-blue-900"}`,children:F?`${F.firstName[0]}${F.lastName[0]}`:z.email[0].toUpperCase()}),o.jsxs("div",{className:"overflow-hidden",children:[o.jsx("p",{className:`text-sm font-black truncate ${G?"text-purple-900":"text-blue-900"}`,children:F?`${F.firstName} ${F.lastName}`:z.email}),o.jsx("p",{className:"text-[10px] text-slate-500 truncate uppercase font-bold tracking-wider",children:(F==null?void 0:F.department)||"Operations"})]})]},z.email)})})]}),o.jsx("div",{className:"flex-1 bg-white rounded-2xl shadow-sm border border-slate-200 flex flex-col overflow-hidden",children:ee?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-6 border-b border-slate-100 bg-white sticky top-0 z-10 flex justify-between items-center shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:"h-14 w-14 rounded-2xl bg-gradient-to-br from-blue-900 to-purple-600 flex items-center justify-center text-white font-black text-xl shadow-lg rotate-3",children:ee.initials}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-black text-blue-900 leading-none",children:ee.name}),o.jsxs("p",{className:"text-sm text-slate-500 mt-1.5 font-bold",children:[o.jsx("span",{className:"text-purple-600",children:ee.role}),"  ",o.jsx("span",{children:ee.email})]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:()=>c(null),className:"px-5 py-2.5 text-sm font-black text-slate-400 hover:text-blue-900 transition-colors uppercase tracking-widest",children:"Cancel"}),o.jsxs("button",{onClick:ae,disabled:E==="saving",className:`px-8 py-2.5 rounded-xl text-sm font-black shadow-lg transition-all active:scale-95 flex items-center gap-3 ${E==="success"?"bg-green-500 text-white":E==="saving"?"bg-slate-400 text-white":"bg-purple-900 text-white hover:bg-purple-800"}`,children:[E==="saving"&&o.jsx("div",{className:"h-4 w-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),E==="success"?"ACCESS UPDATED":E==="saving"?"UPDATING...":"SAVE PERMISSIONS"]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-6 bg-slate-50/30 custom-scrollbar",children:o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[o.jsx("div",{className:"h-1 w-10 bg-purple-600 rounded-full"}),o.jsx("h3",{className:"text-xs font-black text-blue-900 uppercase tracking-[0.4em]",children:"Module Security Matrix"})]}),o.jsx("div",{className:"grid grid-cols-1 gap-5",children:p6.map(z=>{const F=!!(u!=null&&u[z.id]),G=m.has(z.id),C=G1[z.id]||[],T=F&&u&&u[z.id]?Object.values(u[z.id]).reduce((S,N)=>S+(N!=null&&N.view?1:0),0):0;return o.jsxs("div",{className:`bg-white rounded-3xl border transition-all duration-300 overflow-hidden ${F?"border-purple-200 shadow-xl ring-4 ring-purple-50/50":"border-slate-200 opacity-80"}`,children:[o.jsxs("div",{className:`p-6 flex items-center justify-between transition-colors ${F?"bg-white":"bg-slate-50/50"}`,children:[o.jsxs("div",{className:"flex items-center gap-5 flex-1",children:[o.jsx("div",{className:`h-14 w-14 rounded-2xl flex items-center justify-center text-2xl shadow-inner ${F?"bg-blue-900 text-white":"bg-slate-200 text-slate-400"}`,children:z.icon}),o.jsxs("div",{children:[o.jsx("h4",{className:`text-lg font-black ${F?"text-blue-900":"text-slate-500"}`,children:z.name}),F&&o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("span",{className:"h-2 w-2 rounded-full bg-green-500 animate-pulse"}),o.jsxs("p",{className:"text-[10px] text-purple-700 font-black uppercase tracking-widest",children:[T," of ",C.length," components enabled"]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-10",children:[o.jsx(Y1,{checked:F,onChange:S=>R(z.id,S),label:F?"Enabled":"Disabled"}),F&&o.jsx("button",{onClick:()=>O(z.id),className:`p-3 rounded-2xl transition-all ${G?"bg-purple-100 text-purple-700 rotate-180 shadow-inner":"bg-slate-100 text-slate-400 hover:text-blue-900"}`,children:o.jsx(wy,{className:"h-6 w-6"})})]})]}),F&&G&&o.jsxs("div",{className:"bg-slate-50 p-6 border-t border-slate-100 animate-slide-down",children:[o.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:o.jsxs("table",{className:"min-w-full text-left",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-blue-900 text-white",children:[o.jsx("th",{className:"px-8 py-5 text-[11px] font-black uppercase tracking-[0.2em]",children:"Application Component"}),Q1.map(S=>o.jsx("th",{className:"px-4 py-5 text-[11px] font-black uppercase tracking-widest text-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[o.jsx("span",{className:"text-base",children:S.icon}),o.jsx("span",{children:S.label})]})},S.id))]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:C.map(S=>o.jsxs("tr",{className:"hover:bg-purple-50/50 transition-colors group",children:[o.jsxs("td",{className:"px-8 py-5",children:[o.jsx("p",{className:"text-sm font-black text-blue-900 group-hover:text-purple-900",children:S.label}),o.jsxs("p",{className:"text-[10px] text-slate-400 font-mono mt-0.5 opacity-60",children:["REF: ",S.id]})]}),Q1.map(N=>o.jsx("td",{className:"px-4 py-5",children:o.jsx("div",{className:"flex justify-center transform scale-110",children:o.jsx(Y1,{size:"sm",checked:u&&u[z.id]&&u[z.id][S.id]&&u[z.id][S.id][N.id]||!1,onChange:I=>H(z.id,S.id,N.id,I)})})},N.id))]},S.id))})]})}),o.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-slate-400",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:"Toggle shifts are auto-saved to current draft session"})]})]})]},z.id)})})]})})]}):o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center p-12 bg-slate-50/20",children:[o.jsx("div",{className:"w-32 h-32 bg-white rounded-3xl shadow-2xl flex items-center justify-center mb-8 animate-bounce-slow border border-slate-100",children:o.jsx(ma,{className:"h-16 w-auto opacity-20 grayscale"})}),o.jsx("h2",{className:"text-3xl font-black text-blue-900 mb-3 tracking-tight",children:"Access Control Center"}),o.jsx("p",{className:"text-slate-500 max-w-sm font-medium leading-relaxed",children:"Please select a team member from the left directory to audit or adjust their application-wide access rights."})]})}),o.jsx("style",{children:`
            .animate-fade-in { animation: fadeIn 0.4s ease-out; }
            .animate-slide-down { animation: slideDown 0.3s cubic-bezier(0, 1, 0.5, 1); }
            .animate-bounce-slow { animation: bounceSlow 4s infinite ease-in-out; }
            .custom-scrollbar::-webkit-scrollbar { width: 6px; }
            .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
            .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
            .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
            @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
            @keyframes slideDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
            @keyframes bounceSlow { 0%, 100% { transform: translateY(0) rotate(2deg); } 50% { transform: translateY(-15px) rotate(-2deg); } }
        `})]})},x6=({employee:n,onApply:e,onCancel:t})=>{const[r,a]=L.useState({fromDate:"",toDate:"",leaveType:"Casual Leave",reason:""}),[c,u]=L.useState("");L.useEffect(()=>{if(c){const v=setTimeout(()=>u(""),5e3);return()=>clearTimeout(v)}},[c]);const f=L.useMemo(()=>{if(r.fromDate&&r.toDate){const v=new Date(r.fromDate),E=new Date(r.toDate);if(E<v)return 0;const A=Math.abs(E.getTime()-v.getTime());return Math.ceil(A/(1e3*60*60*24))+1}return 0},[r.fromDate,r.toDate]),m=L.useMemo(()=>{var V;const E={"Casual Leave":"casual","Sick Leave":"sick","Annual Leave":"annual","Maternity Leave":"maternity","Paternity Leave":"paternity","Alternate Day Off":"alternateDayOff",Others:"others"}[r.leaveType],A=((V=n.leaveBalance)==null?void 0:V[E])||{total:0,used:0};return{total:A.total,used:A.used,remaining:Math.max(0,A.total-A.used)}},[r.leaveType,n.leaveBalance]),x=v=>{const{id:E,value:A}=v.target;a(V=>({...V,[E]:A}))},y=v=>{if(v.preventDefault(),!r.fromDate||!r.toDate||!r.reason){u("Please fill in all required fields.");return}if(new Date(r.toDate)<new Date(r.fromDate)){u('"To Date" cannot be earlier than "From Date".');return}if(r.leaveType!=="Others"){if(m.remaining<=0){u(`Your ${r.leaveType} quota is exhausted. Please select a different leave type.`);return}if(f>m.remaining){u(`Insufficient balance for ${r.leaveType}. You have ${m.remaining} days remaining, but requested ${f}.`);return}}u("");const E={employeeId:n.id,...r,status:"Pending HOD"};e(E),t()};return o.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm max-w-4xl mx-auto",children:[o.jsx("h1",{className:"text-2xl font-bold text-blue-900 mb-6",children:"Apply for Leave"}),o.jsxs("form",{onSubmit:y,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 p-4 border rounded-md bg-slate-50",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Name:"})," ",o.jsxs("span",{className:"text-sm text-blue-900",children:[n.firstName," ",n.lastName]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Department:"})," ",o.jsx("span",{className:"text-sm text-blue-900",children:n.department})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"fromDate",className:"block text-sm font-medium text-blue-900",children:"From Date"}),o.jsx("input",{type:"date",id:"fromDate",value:r.fromDate,onChange:x,required:!0,className:"mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"toDate",className:"block text-sm font-medium text-blue-900",children:"To Date"}),o.jsx("input",{type:"date",id:"toDate",value:r.toDate,onChange:x,required:!0,className:"mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]})]}),o.jsxs("div",{className:"p-3 text-center bg-teal-50 border border-teal-200 rounded-md",children:[o.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Leave Days Requested:"}),o.jsx("span",{className:"ml-2 text-md font-bold text-teal-600",children:f>0?f:"--"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"leaveType",className:"block text-sm font-medium text-blue-900",children:"Leave Type"}),o.jsxs("select",{id:"leaveType",value:r.leaveType,onChange:x,required:!0,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md",children:[o.jsx("option",{children:"Casual Leave"}),o.jsx("option",{children:"Sick Leave"}),o.jsx("option",{children:"Annual Leave"}),o.jsx("option",{children:"Maternity Leave"}),o.jsx("option",{children:"Paternity Leave"}),o.jsx("option",{children:"Alternate Day Off"}),o.jsx("option",{children:"Others"})]}),r.leaveType!=="Others"&&o.jsxs("p",{className:`mt-1 text-xs ${m.remaining===0?"text-red-600 font-bold":"text-blue-900"}`,children:["Remaining Balance: ",m.remaining," days (Used: ",m.used,"/",m.total,")"]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"reason",className:"block text-sm font-medium text-blue-900",children:"Reason for Leave"}),o.jsx("textarea",{id:"reason",value:r.reason,onChange:x,rows:4,required:!0,className:"mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]}),c&&o.jsx("div",{className:"p-3 rounded-md text-sm bg-red-100 text-red-800 border border-red-200",children:c}),o.jsxs("div",{className:"flex justify-end pt-4 gap-3",children:[o.jsx("button",{type:"button",onClick:t,className:"py-2 px-4 border border-slate-300 rounded-md shadow-sm text-sm font-medium text-blue-900 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:r.leaveType!=="Others"&&m.remaining<=0,className:"py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 disabled:bg-slate-400 disabled:cursor-not-allowed",children:"Apply for Leave"})]})]})]})},y6=({employee:n})=>{var f,m,x,y,v,E,A;const[e,t]=L.useState(!1),r=n.employmentType==="Probation",a=r?{annual:{total:0,used:0},sick:{total:0,used:0},casual:{total:0,used:0},maternity:{total:0,used:0},paternity:{total:0,used:0},alternateDayOff:{total:0,used:0}}:{annual:((f=n.leaveBalance)==null?void 0:f.annual)||{total:14,used:0},sick:((m=n.leaveBalance)==null?void 0:m.sick)||{total:7,used:0},casual:((x=n.leaveBalance)==null?void 0:x.casual)||{total:6,used:0},maternity:((y=n.leaveBalance)==null?void 0:y.maternity)||{total:90,used:0},paternity:((v=n.leaveBalance)==null?void 0:v.paternity)||{total:7,used:0},alternateDayOff:((E=n.leaveBalance)==null?void 0:E.alternateDayOff)||{total:50,used:0},others:((A=n.leaveBalance)==null?void 0:A.others)||{}},c=(V,R)=>!R||R===0?0:Math.min(100,V/R*100),u=({label:V,data:R,colorClass:O})=>{const H=R||{total:0,used:0},ae=H.used||0,ee=H.total||0;return o.jsxs("div",{className:"mb-4 last:mb-0",children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1 font-medium text-blue-900",children:[o.jsx("span",{children:V}),o.jsxs("span",{children:[ae," / ",ee," Days Used"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:o.jsx("div",{className:`h-2.5 rounded-full ${O}`,style:{width:`${c(ae,ee)}%`}})}),o.jsxs("div",{className:"text-xs text-right text-blue-900 mt-1",children:[Math.max(0,ee-ae)," Remaining"]})]})};return o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 mb-6 overflow-hidden",children:[o.jsxs("button",{onClick:()=>t(!e),className:"w-full flex justify-between items-center p-4 bg-slate-50 hover:bg-slate-100 transition-colors",children:[o.jsxs("span",{className:"font-bold text-blue-900",children:["My Leave Balance ",r&&"(Probation - No Leaves Allocated)"]}),o.jsxs("div",{className:"flex items-center text-sm text-blue-900 font-medium",children:[e?"Hide Details":"Show Details",o.jsx(wy,{className:`ml-2 w-4 h-4 transition-transform ${e?"rotate-180":""}`})]})]}),e&&o.jsx("div",{className:"p-6 border-t border-slate-200",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100",children:o.jsx(u,{label:"Annual Leave",data:a.annual,colorClass:"bg-blue-900"})}),o.jsx("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-100",children:o.jsx(u,{label:"Sick Leave",data:a.sick,colorClass:"bg-purple-600"})}),o.jsx("div",{className:"p-4 bg-indigo-50 rounded-lg border border-indigo-100",children:o.jsx(u,{label:"Casual Leave",data:a.casual,colorClass:"bg-indigo-600"})}),o.jsx("div",{className:"p-4 bg-pink-50 rounded-lg border border-pink-100",children:o.jsx(u,{label:"Maternity Leave",data:a.maternity,colorClass:"bg-pink-500"})}),o.jsx("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:o.jsx(u,{label:"Paternity Leave",data:a.paternity,colorClass:"bg-slate-600"})}),o.jsx("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-100",children:o.jsx(u,{label:"Alternate Day Off",data:a.alternateDayOff,colorClass:"bg-purple-800"})})]})})]})},b6=({currentUserEmail:n,employees:e,leaveRequests:t,onAddLeaveRequest:r,onLeaveRequestAction:a})=>{const[c,u]=L.useState(!1),f=n==="admin",m=e.find(V=>V.email===n),x=L.useMemo(()=>{if(!m&&!f)return[];const V=f?"admin":m==null?void 0:m.role,R=m==null?void 0:m.department;return t.filter(O=>{const H=e.find(ae=>ae.id===O.employeeId);return H?O.status==="Pending HOD"&&(V==="admin"||V==="HOD"&&H.department===R)||O.status==="Pending HR"&&(V==="admin"||V==="HR"):!1})},[t,n,e,f,m]),y=m?t.filter(V=>V.employeeId===m.id).sort((V,R)=>new Date(R.fromDate).getTime()-new Date(V.fromDate).getTime()):[],v=V=>{const R=e.find(O=>O.id===V);return R?`${R.firstName} ${R.lastName}`:"Unknown Employee"},E=({status:V})=>{const R="px-2.5 py-0.5 text-xs font-medium rounded-full",O={"Pending HOD":"bg-yellow-100 text-yellow-800","Pending HR":"bg-orange-100 text-orange-800",Approved:"bg-green-100 text-green-800",Rejected:"bg-red-100 text-red-800"};return o.jsx("span",{className:`${R} ${O[V]}`,children:V})};if(c&&m)return o.jsx(x6,{employee:m,onApply:r,onCancel:()=>u(!1)});const A=(m==null?void 0:m.role)==="Employee"&&(m==null?void 0:m.employmentType)!=="Probation";return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Leave Management"}),A&&o.jsx("button",{onClick:()=>u(!0),className:"py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-700 hover:bg-purple-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",children:"Apply for Leave"})]}),m&&o.jsx(y6,{employee:m}),x.length>0&&o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[o.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-4",children:"Awaiting Your Approval"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[o.jsx("thead",{className:"bg-slate-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Employee"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Dates"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Type"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Reason"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:x.map(V=>o.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 text-sm font-medium text-blue-900",children:v(V.employeeId)}),o.jsxs("td",{className:"px-6 py-4 text-sm text-blue-900",children:[V.fromDate," to ",V.toDate]}),o.jsx("td",{className:"px-6 py-4 text-sm text-blue-900",children:V.leaveType}),o.jsx("td",{className:"px-6 py-4 text-sm text-blue-900 max-w-xs truncate",title:V.reason,children:V.reason}),o.jsx("td",{className:"px-6 py-4 text-sm",children:o.jsx(E,{status:V.status})}),o.jsxs("td",{className:"px-6 py-4 text-sm space-x-2",children:[o.jsx("button",{onClick:()=>a(V.id,"Approve"),className:"text-green-600 hover:text-green-900 font-medium",children:"Approve"}),o.jsx("button",{onClick:()=>a(V.id,"Reject"),className:"text-red-600 hover:text-red-900 font-medium",children:"Reject"})]})]},V.id))})]})})]}),y.length>0&&o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[o.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-4",children:"My Leave History"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[o.jsx("thead",{className:"bg-slate-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"From"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"To"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Type"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Reason"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Status"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:y.map(V=>o.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 text-sm text-blue-900",children:V.fromDate}),o.jsx("td",{className:"px-6 py-4 text-sm text-blue-900",children:V.toDate}),o.jsx("td",{className:"px-6 py-4 text-sm text-blue-900",children:V.leaveType}),o.jsx("td",{className:"px-6 py-4 text-sm text-blue-900 max-w-xs truncate",title:V.reason,children:V.reason}),o.jsx("td",{className:"px-6 py-4 text-sm",children:o.jsx(E,{status:V.status})})]},V.id))})]})})]})]})},v6=[{name:"School of Arts",departments:["Department of Fine Arts","Department of Music","Department of Performing Arts","Department of Visual Arts"]},{name:"School of SIR",departments:["Department of Information Technology","Department of Robotics","Department of Software Engineering","Department of Data Science"]},{name:"School of SADU",departments:["Department of Architecture & Design","Department of Urban & Regional Planning","Department of Interior Design"]},{name:"School of SDCA",departments:["Department of Digital Communication","Department of Animation & VFX","Department of Media & Cultural Studies","Department of Game Design"]}],_6=()=>{const[n,e]=L.useState(null),t=r=>{e(n===r?null:r)};return o.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm max-w-4xl mx-auto",children:[o.jsx("h1",{className:"text-2xl font-bold text-blue-900 mb-6",children:"Departments by School"}),o.jsx("div",{className:"space-y-4",children:v6.map(r=>{const a=n===r.name;return o.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden transition-all duration-300",children:[o.jsxs("button",{onClick:()=>t(r.name),className:"w-full flex justify-between items-center p-4 bg-slate-50 hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-inset","aria-expanded":a,"aria-controls":`departments-${r.name}`,children:[o.jsx("h2",{className:"text-lg font-semibold text-blue-900",children:r.name}),o.jsx(wy,{className:`w-5 h-5 text-blue-900 transition-transform duration-300 ${a?"rotate-180":""}`})]}),a&&o.jsx("div",{id:`departments-${r.name}`,className:"bg-white p-4 border-t border-slate-200",children:o.jsx("ul",{className:"space-y-2 pl-4 list-disc list-inside",children:r.departments.map(c=>o.jsx("li",{className:"text-blue-900 text-sm",children:c},c))})})]},r.name)})})]})},W1=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 11.21 12.75 11 12 11c-.75 0-1.536.21-2.121.659-1.172.879-1.172 2.303 0 3.182zM12 21a9 9 0 110-18 9 9 0 010 18z"})}),Za=({icon:n,title:e,value:t,bgColor:r})=>o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm flex items-center space-x-4",children:[o.jsx("div",{className:`p-3 rounded-full ${r}`,children:o.jsx(n,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-blue-900",children:e}),o.jsx("p",{className:"text-xl font-bold text-blue-900",children:t})]})]}),$s=n=>new Intl.NumberFormat("en-PK",{style:"currency",currency:"PKR",minimumFractionDigits:0,maximumFractionDigits:0}).format(n).replace("PKR","PKR "),w6=({employees:n,payrollHistory:e,attendanceRecords:t=[],leaveRequests:r=[],onRunPayroll:a})=>{const[c,u]=L.useState(!1),[f,m]=L.useState(null),[x,y]=L.useState(null),[v,E]=L.useState(()=>new Date().toISOString().slice(0,7));L.useEffect(()=>{if(x){const z=setTimeout(()=>y(null),5e3);return()=>clearTimeout(z)}},[x]);const A=n.reduce((z,F)=>z+parseFloat(F.salary||"0"),0),V=n.length>0?A/n.length:0,R=new Date;R.setMonth(R.getMonth()+1,0);const O=async()=>{if(window.confirm(`Are you sure you want to run payroll for ${v}? This calculates deductions based on attendance.`)){const z=await a();y({type:z.success?"success":"error",text:z.message})}},H=(z,F,G,C)=>{const T=t.filter(I=>{const D=new Date(I.date);return(I.employeeId===F||I.employeeId===z)&&D.getMonth()===C&&D.getFullYear()===G}).length;let S=0;return r.filter(I=>I.employeeId===z&&I.status==="Approved").forEach(I=>{const D=new Date(I.fromDate),M=new Date(I.toDate);for(let Te=new Date(D);Te<=M;Te.setDate(Te.getDate()+1))if(Te.getMonth()===C&&Te.getFullYear()===G){const Fe=Te.toISOString().split("T")[0];t.some(le=>(le.employeeId===F||le.employeeId===z)&&le.date===Fe)||S++}}),{daysPresent:T,approvedLeaveDays:S,totalPaidDays:T+S}},ae=z=>{const[F,G]=v.split("-").map(Number),C=G-1,{daysPresent:T,approvedLeaveDays:S,totalPaidDays:N}=H(z.id,z.employeeId,F,C),I=parseFloat(z.salary||"0");let D=I,M=0;if(t.some(qe=>{const P=new Date(qe.date);return P.getMonth()===C&&P.getFullYear()===F})){const qe=Math.min(30,N);D=I/30*qe,M=I-D,M<0&&(M=0)}else M=0;const Fe=D,Y=new Date(F,C).toLocaleString("default",{month:"long",year:"numeric"}),le=[["MASBOT ERP Payslip"],[`Report for: ${Y}`],[],["Employee Details"],["Employee ID",z.employeeId||z.id],["Name",`${z.firstName} ${z.lastName}`],["Department",z.department],["Designation",z.designation],[],["Attendance Summary"],["Days Present",T],["Approved Leave Days",S],["Total Paid Days",N],[],["Earnings","Amount (PKR)"],["Base Salary",I],[],["Deductions","Amount (PKR)"],["Absenteeism / Unpaid",M],[],["",""],["Net Salary",Fe]],ye=XLSX.utils.aoa_to_sheet(le);ye["!cols"]=[{wch:25},{wch:20}];const Re=XLSX.utils.book_new();XLSX.utils.book_append_sheet(Re,ye,"Payslip"),XLSX.writeFile(Re,`Payslip-${z.firstName}_${z.lastName}-${v}.xlsx`)},ee=()=>{const[z,F]=v.split("-").map(Number),G=F-1;return o.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[o.jsx("thead",{className:"bg-slate-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Employee"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Days Present"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Paid Leave"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Total Days"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Base Salary"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Deductions"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Net Pay"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:n.map(C=>{const T=parseFloat(C.salary||"0"),{daysPresent:S,approvedLeaveDays:N,totalPaidDays:I}=H(C.id,C.employeeId,z,G);let D=T,M=0;const Te=t.some(Fe=>{const Y=new Date(Fe.date);return Y.getMonth()===G&&Y.getFullYear()===z});if(Te){const Fe=Math.min(30,I);D=T/30*Fe,M=T-D,M<0&&(M=0)}return o.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsxs("div",{className:"text-sm font-medium text-blue-900",children:[C.firstName," ",C.lastName]}),o.jsx("div",{className:"text-xs text-blue-900",children:C.employeeId})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900 font-bold",children:Te?S:"-"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-bold",children:Te?N:"-"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:Te?I:"-"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:$s(T)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-500",children:M>0?`-${$s(M)}`:"-"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-green-600",children:$s(D)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsx("button",{onClick:()=>ae(C),className:"text-teal-600 hover:text-teal-900",children:"Payslip"})})]},C.id)})})]})};return c?f?o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center gap-4",children:o.jsxs("button",{onClick:()=>m(null),className:"flex items-center gap-2 text-sm font-medium text-blue-900 hover:text-teal-600",children:[o.jsx(Yf,{className:"w-5 h-5"}),o.jsx("span",{children:"Back to History"})]})}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-blue-900",children:["Payroll Details: ",f.monthYear]}),o.jsxs("p",{className:"text-blue-900 mt-1",children:["Processed on ",new Date(f.date).toLocaleDateString()]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx(Za,{icon:W1,title:"Total Payout",value:$s(f.totalNetPay),bgColor:"bg-green-500"}),o.jsx(Za,{icon:$f,title:"Employees Paid",value:f.employeeRecords.length.toString(),bgColor:"bg-blue-500"}),o.jsx(Za,{icon:nc,title:"Total Deductions",value:$s(f.totalDeductions),bgColor:"bg-red-500"})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[o.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-4",children:"Breakdown"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[o.jsx("thead",{className:"bg-slate-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Employee"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Department"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Base Salary"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Deductions"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 uppercase",children:"Net Pay"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:f.employeeRecords.map(z=>o.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:z.employeeName}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:z.department}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:$s(z.baseSalary)}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-500",children:["-",$s(z.deductions)]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-green-600",children:$s(z.netPay)})]},z.employeeId))})]})})]})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center gap-4",children:o.jsxs("button",{onClick:()=>u(!1),className:"flex items-center gap-2 text-sm font-medium text-blue-900 hover:text-teal-600",children:[o.jsx(Yf,{className:"w-5 h-5"}),o.jsx("span",{children:"Back to Payroll"})]})}),o.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Payroll History"}),e.length>0?o.jsx("div",{className:"space-y-4",children:e.map(z=>o.jsxs("div",{onClick:()=>m(z),className:"bg-white p-4 rounded-lg shadow-sm border border-transparent hover:border-teal-500 cursor-pointer transition-all flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-blue-900 text-lg",children:z.monthYear}),o.jsxs("p",{className:"text-xs text-blue-900",children:["Processed: ",new Date(z.date).toLocaleDateString()]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-blue-900",children:"Paid Out"}),o.jsx("p",{className:"font-bold text-green-600",children:$s(z.totalNetPay)})]})]},z.id))}):o.jsx("div",{className:"text-center py-10 bg-white rounded-lg",children:o.jsx("p",{className:"text-blue-900",children:"No payroll history found."})})]}):o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Payroll Management"}),o.jsx("p",{className:"text-blue-900 mt-1",children:"Salaries are automatically calculated based on attendance records and approved leaves."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(Za,{icon:W1,title:"Est. Monthly Payroll",value:$s(A),bgColor:"bg-teal-500"}),o.jsx(Za,{icon:$f,title:"Total Employees",value:n.length.toString(),bgColor:"bg-blue-500"}),o.jsx(Za,{icon:nc,title:"Avg. Salary",value:$s(V),bgColor:"bg-orange-500"}),o.jsx(Za,{icon:yy,title:"Next Payroll",value:R.toLocaleDateString(),bgColor:"bg-indigo-500"})]}),o.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center mb-6 gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("h2",{className:"text-xl font-bold text-blue-900",children:"Salaries"}),o.jsx("input",{type:"month",value:v,onChange:z=>E(z.target.value),className:"border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm text-blue-900"})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:()=>u(!0),className:"btn-secondary py-2 px-4 border rounded-md text-sm font-medium hover:bg-gray-50 text-blue-900",children:"View History"}),o.jsx("button",{onClick:O,className:"bg-teal-600 text-white py-2 px-4 rounded-md text-sm font-medium hover:bg-teal-700 shadow-sm",children:"Finalize & Run Payroll"})]})]}),x&&o.jsx("div",{className:`mb-4 p-3 rounded-md text-sm ${x.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.text}),o.jsx("div",{className:"overflow-x-auto",children:n.length>0?ee():o.jsx("p",{className:"text-center text-blue-900 py-4",children:"No employees found."})})]})]})},N6=({employees:n,attendanceRecords:e=[],leaveRequests:t=[]})=>{const[r,a]=L.useState("monthly"),[c,u]=L.useState("All"),[f,m]=L.useState(""),[x,y]=L.useState(()=>new Date().toISOString().slice(0,7)),[v,E]=L.useState(()=>new Date().toISOString().split("T")[0]),[A,V]=L.useState(()=>new Date().toISOString().split("T")[0]),R=L.useMemo(()=>{const F=n.map(G=>G.department);return["All",...Array.from(new Set(F))]},[n]),O=L.useMemo(()=>n.filter(F=>{const G=c==="All"||F.department===c,T=`${F.firstName} ${F.lastName}`.toLowerCase().includes(f.toLowerCase());return G&&T}),[n,c,f]),H=F=>{const[G,C]=x.split("-").map(Number),T=C-1,S=e.filter(D=>{const M=new Date(D.date);return(D.employeeId&&String(D.employeeId).trim()===String(F.employeeId||F.id).trim()||D.employeeId===F.id)&&M.getMonth()===T&&M.getFullYear()===G});let N=0;S.length>0&&(N=Math.round(S.length/30*100),N>100&&(N=100));const I=t.filter(D=>{const M=D.employeeId===F.id,Te=new Date(D.fromDate),Fe=Te.getMonth()===T&&Te.getFullYear()===G;return M&&D.status==="Approved"&&Fe}).length;return{attendancePct:N,approvedLeaves:I,daysPresent:S.length}},ae=L.useMemo(()=>e.filter(F=>{if(F.date<v||F.date>A)return!1;const G=n.find(T=>String(T.employeeId).trim()===String(F.employeeId).trim()||T.id===F.employeeId);if(!G||c!=="All"&&G.department!==c)return!1;const C=`${G.firstName} ${G.lastName}`.toLowerCase();return!(f&&!C.includes(f.toLowerCase()))}).map(F=>{const G=n.find(C=>String(C.employeeId).trim()===String(F.employeeId).trim()||C.id===F.employeeId);return{...F,empName:G?`${G.firstName} ${G.lastName}`:"Unknown",department:(G==null?void 0:G.department)||"-",designation:(G==null?void 0:G.designation)||"-"}}).sort((F,G)=>F.date.localeCompare(G.date)||F.empName.localeCompare(G.empName)),[e,v,A,c,n,f]),ee=L.useMemo(()=>{const F=[],G=new Date(v),C=new Date(A),T=n.filter(N=>{const I=c==="All"||N.department===c,M=`${N.firstName} ${N.lastName}`.toLowerCase().includes(f.toLowerCase());return I&&M}),S=new Set;e.forEach(N=>{N.date>=v&&N.date<=A&&S.add(`${String(N.employeeId).trim()}_${N.date}`)});for(let N=new Date(G);N<=C;N.setDate(N.getDate()+1)){const I=N.toISOString().split("T")[0];T.forEach(D=>{const M=String(D.employeeId||"").trim(),Te=D.id;if(!(S.has(`${M}_${I}`)||S.has(`${Te}_${I}`))){const Y=t.find(le=>le.employeeId===D.id&&le.status==="Approved"&&I>=le.fromDate&&I<=le.toDate);F.push({date:I,empId:D.employeeId||D.id,name:`${D.firstName} ${D.lastName}`,department:D.department,designation:D.designation,status:Y?"On Leave":"Absent",remarks:Y?Y.leaveType:"-"})}})}return F.sort((N,I)=>N.date.localeCompare(I.date)||N.name.localeCompare(I.name))},[v,A,c,n,e,t,f]),z=()=>{if(r==="monthly"){const F=O.map((T,S)=>{const{attendancePct:N,approvedLeaves:I,daysPresent:D}=H(T);return new Intl.NumberFormat("en-PK",{style:"currency",currency:"PKR",minimumFractionDigits:0}).format(parseFloat(T.salary||"0")),{"#":S+1,Name:`${T.firstName} ${T.lastName}`,Department:T.department,Designation:T.designation,Month:x,"Days Present":D,"Attendance (%)":`${N}%`,"Leaves Taken":I}}),G=XLSX.utils.json_to_sheet(F),C=XLSX.utils.book_new();XLSX.utils.book_append_sheet(C,G,"Monthly Report"),XLSX.writeFile(C,`HR_Monthly_Report_${x}.xlsx`)}else if(r==="attendance"){const F=ae.map(T=>({Date:T.date,"Employee ID":T.employeeId,Name:T.empName,Department:T.department,"Time In":T.timeIn,"Time Out":T.timeOut||"-",Status:T.status})),G=XLSX.utils.json_to_sheet(F),C=XLSX.utils.book_new();XLSX.utils.book_append_sheet(C,G,"Attendance"),XLSX.writeFile(C,`Attendance_Report_${v}_to_${A}.xlsx`)}else if(r==="absent"){const F=ee.map(T=>({Date:T.date,"Employee ID":T.empId,Name:T.name,Department:T.department,Status:T.status,Remarks:T.remarks})),G=XLSX.utils.json_to_sheet(F),C=XLSX.utils.book_new();XLSX.utils.book_append_sheet(C,G,"Absent"),XLSX.writeFile(C,`Absent_Report_${v}_to_${A}.xlsx`)}};return o.jsxs("div",{className:"bg-white p-6 sm:p-8 rounded-lg shadow-sm min-h-screen",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8 gap-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"HR Reports"}),o.jsx("p",{className:"text-sm text-blue-900",children:"Generate comprehensive reports for attendance and performance."})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 bg-slate-100 p-1 rounded-lg",children:[o.jsx("button",{onClick:()=>a("monthly"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${r==="monthly"?"bg-white text-teal-700 shadow-sm":"text-blue-900 hover:text-blue-950"}`,children:"Monthly Performance"}),o.jsx("button",{onClick:()=>a("attendance"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${r==="attendance"?"bg-white text-teal-700 shadow-sm":"text-blue-900 hover:text-blue-950"}`,children:"Attendance Report"}),o.jsx("button",{onClick:()=>a("absent"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${r==="absent"?"bg-white text-teal-700 shadow-sm":"text-blue-900 hover:text-blue-950"}`,children:"Absent Report"})]}),o.jsxs("button",{onClick:z,className:"bg-green-600 hover:bg-green-700 text-white text-sm font-medium py-2 px-4 rounded-md transition-colors shadow-sm flex items-center gap-2",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Excel"]})]}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6 bg-slate-50 p-4 rounded-lg border border-slate-200 items-end",children:[o.jsxs("div",{className:"w-full md:w-auto",children:[o.jsx("label",{htmlFor:"department-filter",className:"block text-xs font-medium text-blue-900 mb-1",children:"Department"}),o.jsx("select",{id:"department-filter",value:c,onChange:F=>u(F.target.value),className:"block w-full md:w-48 pl-3 pr-10 py-2 text-base border-slate-300 bg-white text-blue-900 focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md border",children:R.map(F=>o.jsx("option",{value:F,children:F},F))})]}),o.jsxs("div",{className:"w-full md:w-auto",children:[o.jsx("label",{htmlFor:"name-search",className:"block text-xs font-medium text-blue-900 mb-1",children:"Employee Name"}),o.jsx("input",{type:"text",id:"name-search",placeholder:"Search by name...",value:f,onChange:F=>m(F.target.value),className:"block w-full md:w-48 px-3 py-2 text-base border-slate-300 bg-white text-blue-900 focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md border"})]}),r==="monthly"?o.jsxs("div",{className:"w-full md:w-auto",children:[o.jsx("label",{htmlFor:"month-filter",className:"block text-xs font-medium text-blue-900 mb-1",children:"Select Month"}),o.jsx("input",{type:"month",id:"month-filter",value:x,onChange:F=>y(F.target.value),className:"block w-full md:w-48 px-3 py-2 text-base border-slate-300 bg-white text-blue-900 focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md border"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"w-full md:w-auto",children:[o.jsx("label",{htmlFor:"from-date",className:"block text-xs font-medium text-blue-900 mb-1",children:"From Date"}),o.jsx("input",{type:"date",id:"from-date",value:v,onChange:F=>E(F.target.value),className:"block w-full md:w-40 px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]}),o.jsxs("div",{className:"w-full md:w-auto",children:[o.jsx("label",{htmlFor:"to-date",className:"block text-xs font-medium text-blue-900 mb-1",children:"To Date"}),o.jsx("input",{type:"date",id:"to-date",value:A,onChange:F=>V(F.target.value),className:"block w-full md:w-40 px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]})]})]}),r==="monthly"&&o.jsxs("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:[o.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[o.jsx("thead",{className:"bg-slate-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"#"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Department"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Designation"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Attendance"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Leaves"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Salary"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:O.map((F,G)=>{const{attendancePct:C,approvedLeaves:T}=H(F),S=new Intl.NumberFormat("en-PK",{style:"currency",currency:"PKR",minimumFractionDigits:0}).format(parseFloat(F.salary||"0"));return o.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:G+1}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900 font-medium",children:[F.firstName," ",F.lastName]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:F.department}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:F.designation}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:o.jsxs("span",{className:`text-xs font-semibold inline-block py-1 px-2 rounded-full ${C>=90?"text-green-600 bg-green-100":C>=75?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100"}`,children:[C,"%"]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:T}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:S.replace("PKR","PKR ")})]},F.id)})})]}),O.length===0&&o.jsx("p",{className:"text-center py-8 text-blue-900",children:"No data found matching criteria."})]}),r==="attendance"&&o.jsxs("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:[o.jsxs("div",{className:"p-3 bg-green-50 border-b border-green-100 text-sm text-green-800 font-medium",children:["Showing ",ae.length," records from ",v," to ",A]}),o.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[o.jsx("thead",{className:"bg-slate-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Department"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Time In"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Time Out"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Status"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:ae.map((F,G)=>o.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:F.date}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:F.empName}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:F.department}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-blue-900",children:F.timeIn}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-blue-900",children:F.timeOut||"--"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:o.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${F.status==="Late"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:F.status})})]},G))})]}),ae.length===0&&o.jsx("p",{className:"text-center py-8 text-blue-900",children:"No attendance records found for this period."})]}),r==="absent"&&o.jsxs("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:[o.jsxs("div",{className:"p-3 bg-red-50 border-b border-red-100 text-sm text-red-800 font-medium",children:["Showing ",ee.length," absentee records from ",v," to ",A]}),o.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[o.jsx("thead",{className:"bg-slate-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Department"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Remarks"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:ee.map((F,G)=>o.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:F.date}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:F.name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:F.department}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:o.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${F.status==="On Leave"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:F.status})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:F.remarks})]},G))})]}),ee.length===0&&o.jsx("p",{className:"text-center py-8 text-blue-900",children:"No absences found! Everyone was present."})]})]})},T6=({employees:n,attendanceRecords:e,onUploadAttendance:t,currentUserEmail:r})=>{const[a,c]=L.useState(null),[u,f]=L.useState(!1),m=new Date().toISOString().split("T")[0],[x,y]=L.useState(m),[v,E]=L.useState(m),[A,V]=L.useState("All"),R=L.useRef(null),O=n.find(N=>N.email===r),H=r==="admin",ae=(O==null?void 0:O.role)==="HR",ee=H||ae;L.useEffect(()=>{if(a){const N=setTimeout(()=>c(null),5e3);return()=>clearTimeout(N)}},[a]);const z=L.useMemo(()=>{const N=n.map(I=>I.department).filter(Boolean);return["All",...Array.from(new Set(N))]},[n]),F=N=>{if(typeof N=="number"){const I=Math.round(N*86400),D=Math.floor(I/3600),M=Math.floor(I%3600/60);return`${String(D).padStart(2,"0")}:${String(M).padStart(2,"0")}`}if(typeof N=="string"){const I=N.split(":");if(I.length>=2){let D=parseInt(I[0]);const M=I[1];return N.toLowerCase().includes("pm")&&D<12&&(D+=12),N.toLowerCase().includes("am")&&D===12&&(D=0),`${String(D).padStart(2,"0")}:${M.substring(0,2)}`}}return String(N||"")},G=N=>{if(typeof N=="number"){const D=Math.floor(N-25569)*86400;return new Date(D*1e3).toISOString().split("T")[0]}try{const I=new Date(N);return isNaN(I.getTime())?String(N):I.toISOString().split("T")[0]}catch{return String(N)}},C=async N=>{var D;const I=(D=N.target.files)==null?void 0:D[0];if(I){f(!0),c(null);try{const M=await I.arrayBuffer(),Te=XLSX.read(M,{type:"array"}),Fe=Te.SheetNames[0],Y=Te.Sheets[Fe],le=XLSX.utils.sheet_to_json(Y),ye=new Map;le.forEach(P=>{const $={};Object.keys(P).forEach(Ee=>{const ke=Ee.replace(/[^a-zA-Z0-9]/g,"").toLowerCase();$[ke]=P[Ee]});const ce=$.employeeid||$.empid||$.id||$.userid||$.acno,ve=$.name||$.employeename||$.empname||$.employee,we=$.date||$.attendancedate||$.time,q=$.time||$.timein||$.checkin||$.datetime;if(!we)return;let me;if(ce){const Ee=String(ce).trim();me=n.find(ke=>ke.employeeId&&String(ke.employeeId).trim()===Ee||ke.id&&String(ke.id).trim()===Ee)}if(!me&&ve){const Ee=String(ve).trim().toLowerCase();me=n.find(ke=>`${ke.firstName} ${ke.lastName}`.toLowerCase()===Ee)}if(me){let Ee=G(we),ke=F(q);if(we.toString().includes("T")||typeof we=="string"&&we.length>15){const $e=new Date(we);if(!isNaN($e.getTime())){Ee=$e.toISOString().split("T")[0];const Xt=String($e.getHours()).padStart(2,"0"),ie=String($e.getMinutes()).padStart(2,"0");ke=`${Xt}:${ie}`}}if(Ee&&ke&&ke.includes(":")){const $e=`${me.id}_${Ee}`,[Xt,ie]=ke.split(":").map(Number),De=Xt*60+ie;ye.has($e)||ye.set($e,{employeeId:me.id,date:Ee,times:[],status:"Present"});const Tt=ye.get($e);Tt.times.includes(De)||Tt.times.push(De)}}});const Re=[];let qe=0;if(ye.forEach(P=>{if(P.times.sort(($,ce)=>$-ce),P.times.length>0){const $=P.times[0],ce=P.times[P.times.length-1],ve=`${String(Math.floor($/60)).padStart(2,"0")}:${String($%60).padStart(2,"0")}`;let we="";P.times.length>1&&(we=`${String(Math.floor(ce/60)).padStart(2,"0")}:${String(ce%60).padStart(2,"0")}`);let q="Present";const[me,Ee]=ve.split(":").map(Number);(me>9||me===9&&Ee>15)&&(q="Late"),Re.push({employeeId:P.employeeId,date:P.date,timeIn:ve,timeOut:we,status:q}),qe++}}),Re.length>0){const P=await t(Re);c({type:P.success?"success":"error",text:`${P.message} (${qe} daily records processed)`})}else c({type:"error",text:"No valid records matched. Ensure ID or Name columns match your employee data."})}catch(M){console.error("Error processing file:",M),c({type:"error",text:"Failed to process the uploaded file. Please ensure it is a valid Excel/CSV file."})}finally{f(!1),R.current&&(R.current.value="")}}},T=N=>{const I=n.find(D=>D.employeeId===N||D.id===N);return I?`${I.firstName} ${I.lastName}`:"Unknown"},S=L.useMemo(()=>e.filter(N=>{if(!ee&&O&&!(N.employeeId===O.id||N.employeeId===O.employeeId)||!(N.date>=x&&N.date<=v))return!1;if(ee&&A!=="All"){const D=n.find(M=>M.employeeId===N.employeeId||M.id===N.employeeId);if((D==null?void 0:D.department)!==A)return!1}return!0}).sort((N,I)=>{if(N.date!==I.date)return I.date.localeCompare(N.date);const D=T(N.employeeId),M=T(I.employeeId);return D.localeCompare(M)}),[e,x,v,A,n,ee,O]);return o.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Attendance Management"}),o.jsx("p",{className:"text-blue-900 mt-1",children:ee?"Upload biometric logs or view daily records.":"View your attendance history."})]}),ee&&o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"file",ref:R,onChange:C,accept:".xlsx, .xls, .csv",className:"hidden"}),o.jsxs("button",{onClick:()=>{var N;return(N=R.current)==null?void 0:N.click()},disabled:u,className:"flex items-center justify-center gap-2 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 disabled:bg-teal-400 disabled:cursor-not-allowed",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),u?"Processing...":"Upload Machine Data"]})]})]}),a&&o.jsx("div",{className:`p-3 rounded-md text-sm ${a.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.text}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-md border border-slate-200",children:[o.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-3",children:"Filters"}),o.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"from-date",className:"block text-xs font-medium text-blue-900 mb-1",children:"From Date"}),o.jsx("input",{type:"date",id:"from-date",value:x,onChange:N=>y(N.target.value),className:"block w-full sm:w-40 px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"to-date",className:"block text-xs font-medium text-blue-900 mb-1",children:"To Date"}),o.jsx("input",{type:"date",id:"to-date",value:v,onChange:N=>E(N.target.value),className:"block w-full sm:w-40 px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]}),ee&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"dept-select",className:"block text-xs font-medium text-blue-900 mb-1",children:"Department"}),o.jsx("select",{id:"dept-select",value:A,onChange:N=>V(N.target.value),className:"block w-full sm:w-48 px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm text-blue-900 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",children:z.map(N=>o.jsx("option",{value:N,children:N},N))})]})]})]}),o.jsx("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[o.jsx("thead",{className:"bg-slate-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Employee ID"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Employee Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Time In"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Time Out"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase",children:"Status"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:S.length>0?S.map(N=>{const I=N.status==="Late"?"bg-yellow-100 text-yellow-800":N.status==="Absent"?"bg-red-100 text-red-800":"bg-green-100 text-green-800";return o.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:N.date}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:N.employeeId}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-900",children:T(N.employeeId)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:N.timeIn}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-900",children:N.timeOut||"--"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:o.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${I}`,children:N.status})})]},N.id)}):o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"text-center py-10",children:o.jsx("p",{className:"text-blue-900",children:"No attendance records found for the selected criteria."})})})})]})})]})},E6=({onBack:n,employees:e,users:t,onAddEmployee:r,onLogout:a,allPermissions:c,onUserPermissionsChange:u,currentUserEmail:f,leaveRequests:m,onAddLeaveRequest:x,onLeaveRequestAction:y,onResignEmployee:v,payrollHistory:E,onRunPayroll:A,onUpdateEmployee:V,attendanceRecords:R,onUploadAttendance:O})=>{var Fe;const[H,ae]=L.useState(!1),ee=f==="admin",z=((Fe=c[f])==null?void 0:Fe.hr)||{},F=e.find(Y=>Y.email===f),G=L.useMemo(()=>{if(ee)return"dashboard";const le=[...ud,...dd].filter(ye=>{var Re;return(F==null?void 0:F.role)==="Employee"&&ye.id==="dashboard"?!1:(Re=z[ye.id])==null?void 0:Re.view});return le.length>0?le[0].id:null},[ee,z,F]),[C,T]=L.useState(G),[S,N]=L.useState("");L.useEffect(()=>{!C&&G&&T(G)},[G,C]);const I=()=>{ae(!H)},D=L.useMemo(()=>{if(!S)return e;const Y=S.toLowerCase();return e.filter(le=>`${le.firstName} ${le.lastName}`.toLowerCase().includes(Y)||le.email.toLowerCase().includes(Y)||le.department.toLowerCase().includes(Y)||le.designation.toLowerCase().includes(Y)||(le.employeeId||"").toLowerCase().includes(Y))},[e,S]),M=L.useMemo(()=>{if(!S)return t;const Y=S.toLowerCase();return t.filter(le=>{if(le.email.toLowerCase().includes(Y))return!0;const ye=e.find(Re=>Re.email===le.email);return!!(ye&&`${ye.firstName} ${ye.lastName}`.toLowerCase().includes(Y))})},[t,e,S]),Te=()=>{if(!C)return o.jsxs("div",{className:"p-6 text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Access Denied"}),o.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"You do not have permission to view any pages in this module. Please contact an administrator."}),o.jsx("button",{onClick:n,className:"mt-4 text-teal-600 hover:underline",children:"Go Back"})]});switch(C){case"dashboard":return o.jsx(d6,{employees:e,leaveRequests:m,onLeaveRequestAction:y,onNavigate:T});case"employees":return o.jsx(f6,{onAddEmployee:r,employees:D,onResignEmployee:v,onUpdateEmployee:V});case"attendance":return o.jsx(T6,{employees:e,attendanceRecords:R,onUploadAttendance:O,currentUserEmail:f});case"reports":return o.jsx(N6,{employees:e,attendanceRecords:R,leaveRequests:m});case"users":return o.jsx(m6,{users:M,employees:e});case"user-access":return o.jsx(g6,{users:t,employees:e,allPermissions:c,onUserPermissionsChange:u});case"leaves":return o.jsx(b6,{currentUserEmail:f,employees:e,leaveRequests:m,onAddLeaveRequest:x,onLeaveRequestAction:y});case"departments":return o.jsx(_6,{});case"payroll":return o.jsx(w6,{employees:e,payrollHistory:E,attendanceRecords:R,leaveRequests:m,onRunPayroll:A});default:return o.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm",children:["Content for ",C]})}};return o.jsxs("div",{className:"flex h-screen bg-slate-100",children:[o.jsx(a6,{activePage:C||"",setActivePage:T,isCollapsed:H,onLogout:a,permissions:z,currentUserEmail:f,employees:e}),o.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[o.jsx(l6,{toggleSidebar:I,isSidebarCollapsed:H,onLogout:a,searchQuery:S,onSearchChange:N,onBack:n}),o.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-slate-100",children:o.jsx("div",{className:"p-6",children:Te()})})]})]})},S6=({currentPage:n,onNavigate:e,permissions:t,currentUserEmail:r,employees:a})=>{const c=r==="admin",u=_y.map(v=>v.id),f=c?Qf:Qf.filter(v=>{var E;return v.id==="assets"?u.some(A=>{var V;return(V=t==null?void 0:t[A])==null?void 0:V.view}):(E=t==null?void 0:t[v.id])==null?void 0:E.view}),m=a.find(v=>v.email===r),x=c?"Administrator":m?`${m.firstName} ${m.lastName}`:r,y=x.charAt(0).toUpperCase();return o.jsxs("aside",{className:"w-64 flex-shrink-0 flex flex-col bg-white dark:bg-gray-800 border-r border-slate-200 dark:border-gray-700",children:[o.jsx("div",{className:"flex items-center justify-center h-20 border-b border-slate-200 dark:border-gray-700 flex-shrink-0 px-4",children:o.jsx(ma,{className:"w-full h-10"})}),o.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:f.map(v=>{const E=v.icon;return o.jsxs("button",{onClick:()=>e(v.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors text-left ${n===v.id?"bg-purple-50 text-purple-900 font-bold border-r-4 border-purple-900":"text-blue-900 dark:text-blue-300 hover:bg-purple-50 hover:text-purple-900 dark:hover:bg-gray-700"}`,children:[o.jsx(E,{className:`w-6 h-6 ${n===v.id?"text-purple-900":"text-purple-800"}`}),o.jsx("span",{className:"font-medium",children:v.label})]},v.id)})}),o.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900 flex items-center justify-center font-bold text-purple-900 dark:text-purple-300",children:y}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-sm text-blue-900 dark:text-white",title:x,children:x}),o.jsx("p",{className:"text-xs text-blue-800 dark:text-gray-400",title:r,children:r})]})]})})]})},A6=n=>{if(!n.specs)return"-";const{cpu:e,ram:t,storage:r,gpu:a,lcd:c}=n.specs;if(n.type==="Monitor"&&c)return c;const u=[e,t,r,a].filter(Boolean);return u.length===0?"-":u.join(" / ")},Ny=({inventory:n,onEdit:e,onResign:t,onDelete:r,view:a})=>{const c=f=>{switch(f){case"In Use":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"In Stock":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Maintenance":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},u=a==="All"||a==="In Use";return o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm text-left text-blue-600 dark:text-gray-400",children:[o.jsx("thead",{className:"text-xs text-blue-900 uppercase bg-blue-50 dark:bg-gray-700 dark:text-gray-400",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"px-6 py-3",children:"Type"}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:"Brand"}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:"Model"}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:"Specifications"}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:"Serial No."}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:"Assigned To"}),u&&o.jsx("th",{scope:"col",className:"px-6 py-3",children:"Department"}),u&&o.jsx("th",{scope:"col",className:"px-6 py-3",children:"Issue Date"}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:"Others"}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:o.jsx("span",{className:"sr-only",children:"Actions"})})]})}),o.jsx("tbody",{children:n.map(f=>o.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700 hover:bg-blue-50 dark:hover:bg-gray-600",children:[o.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-blue-900 dark:text-white whitespace-nowrap",children:f.type}),o.jsx("td",{className:"px-6 py-4 font-semibold text-blue-800",children:f.brand||"-"}),o.jsx("td",{className:"px-6 py-4 text-blue-800",children:f.model}),o.jsx("td",{className:"px-6 py-4 text-xs text-blue-600",children:A6(f)}),o.jsx("td",{className:"px-6 py-4 font-mono text-xs text-blue-600",children:f.serialNumber||"-"}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${c(f.status)}`,children:f.status})}),o.jsx("td",{className:"px-6 py-4 text-blue-800",children:f.assignedTo||"-"}),u&&o.jsx("td",{className:"px-6 py-4 text-blue-800",children:f.department||"-"}),u&&o.jsx("td",{className:"px-6 py-4 text-blue-800",children:f.issueDate||"-"}),o.jsx("td",{className:"px-6 py-4 text-blue-600",children:f.others||"-"}),o.jsx("td",{className:"px-6 py-4 text-right",children:o.jsxs("div",{className:"flex items-center justify-end space-x-4",children:[o.jsx("button",{onClick:()=>e(f),className:"font-medium text-blue-600 dark:text-blue-500 hover:underline",children:"Edit"}),f.status==="In Use"&&f.assignedTo&&o.jsx("button",{onClick:()=>t(f.assignedTo),className:"font-medium text-yellow-600 dark:text-yellow-500 hover:underline",children:"Resign"}),r&&o.jsx("button",{onClick:()=>r(f.id),className:"font-medium text-red-600 dark:text-red-500 hover:underline",children:"Delete"})]})})]},f.id))})]})})},hf={type:"Kitchen",model:"",brand:"",status:"In Stock",assignedTo:"",serialNumber:"",department:"",designation:"",issueDate:"",vendor:"",maintenanceDate:"",others:"",specs:{cpu:"",ram:"",storage:"",gpu:"",lcd:""},telephoneExt:"",quantity:1,unit:"",itemCode:"",itemName:"",subCategory:"",purchaseDate:"",cost:"",assetLife:"",location:"",condition:"",remarks:""},X1=({type:n,specs:e,brand:t,onChange:r})=>n!=="Laptop"&&n!=="Desktop"&&n!=="Monitor"&&n!=="Electronics"?null:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-3 pt-3 border-t border-blue-200 dark:border-gray-600",children:[o.jsx("input",{type:"text",name:"brand",value:t||"",onChange:r,placeholder:"Brand (e.g., Dell, HP)",className:"input-style mb-3"}),(n==="Laptop"||n==="Desktop")&&o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"text",name:"cpu",value:(e==null?void 0:e.cpu)||"",onChange:r,placeholder:"CPU (e.g., Core i7)",className:"input-style mb-3"}),o.jsx("input",{type:"text",name:"ram",value:(e==null?void 0:e.ram)||"",onChange:r,placeholder:"RAM (e.g., 16GB DDR4)",className:"input-style mb-3"}),o.jsx("input",{type:"text",name:"storage",value:(e==null?void 0:e.storage)||"",onChange:r,placeholder:"Storage (e.g., 512GB SSD)",className:"input-style mb-3"})]}),n==="Desktop"&&o.jsx("input",{type:"text",name:"gpu",value:(e==null?void 0:e.gpu)||"",onChange:r,placeholder:"GPU (e.g., NVIDIA RTX 3060)",className:"input-style mb-3"}),(n==="Laptop"||n==="Desktop"||n==="Monitor")&&o.jsx("input",{type:"text",name:"lcd",value:(e==null?void 0:e.lcd)||"",onChange:r,placeholder:"LCD / Display",className:"input-style mb-3"})]}),Dd=n=>{const{isOpen:e,onClose:t,onSave:r,editingAsset:a,initialStatus:c,initialType:u,isMultiAddMode:f,employees:m}=n,x=(T="In Stock")=>({...hf,specs:{...hf.specs},status:T}),[y,v]=L.useState(x()),[E,A]=L.useState({assignedTo:"",department:"",designation:"",issueDate:""}),[V,R]=L.useState([x("In Use")]),O=L.useCallback(()=>{v(x()),A({assignedTo:"",department:"",designation:"",issueDate:""}),R([x("In Use")])},[]);L.useEffect(()=>{if(e)if(a)v({...hf,...a,specs:{...hf.specs,...a.specs||{}}});else if(f)R([x("In Use")]),A({assignedTo:"",department:"",designation:"",issueDate:""});else{const T=x(c);u&&(T.type=u),v(T)}else setTimeout(O,300)},[e,a,f,c,u,O]);const H=T=>{const{name:S,value:N}=T.target;if(["cpu","ram","storage","gpu","lcd"].includes(S))v(I=>({...I,specs:{...I.specs||{},[S]:N}}));else if(S==="assignedTo"){const I=m.find(D=>`${D.firstName} ${D.lastName}`===N);v(I?D=>({...D,assignedTo:N,department:I.department,designation:I.designation}):D=>({...D,assignedTo:N}))}else v(I=>({...I,[S]:N}))},ae=T=>{const{name:S,value:N}=T.target;if(S==="assignedTo"){const I=m.find(D=>`${D.firstName} ${D.lastName}`===N);A(I?D=>({...D,assignedTo:N,department:I.department,designation:I.designation}):D=>({...D,[S]:N,department:"",designation:""}))}else A(I=>({...I,[S]:N}))},ee=(T,S)=>{const{name:N,value:I}=S.target;R(D=>{const M=[...D],Te={...M[T]};return Te.specs&&(Te.specs={...Te.specs}),["cpu","ram","storage","gpu","lcd"].includes(N)?Te.specs={...Te.specs||{},[N]:I}:N==="brand"?Te.brand=I:Te[N]=I,M[T]=Te,M})},z=()=>{R(T=>[...T,x("In Use")])},F=T=>{R(S=>S.filter((N,I)=>I!==T))},G=T=>{if(T.preventDefault(),f&&!a){const S=V.map(N=>({...N,...E,status:"In Use"}));r(S)}else r([y],a==null?void 0:a.id)};if(!e)return null;const C=o.jsx("datalist",{id:"employee-list",children:m.map(T=>o.jsx("option",{value:`${T.firstName} ${T.lastName}`},T.id))});return f&&!a?o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 p-4 overflow-y-auto flex justify-center items-start",onClick:t,children:[C,o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl",onClick:T=>T.stopPropagation(),children:[o.jsxs("form",{onSubmit:G,children:[o.jsxs("div",{className:"p-6 border-b border-blue-200 dark:border-gray-700",children:[o.jsx("h2",{className:"text-xl font-bold text-blue-900 dark:text-white",children:"Assign New Assets"}),o.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:"Bulk assign assets to an employee."})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"bg-blue-50 dark:bg-gray-700 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-medium text-blue-900 dark:text-white mb-3",children:"Employee Details"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx("input",{list:"employee-list",name:"assignedTo",value:E.assignedTo,onChange:ae,placeholder:"Search Employee",className:"input-style",required:!0}),o.jsx("input",{type:"text",name:"department",value:E.department,onChange:T=>{},placeholder:"Department",className:"input-style bg-gray-100",readOnly:!0}),o.jsx("input",{type:"text",name:"designation",value:E.designation,onChange:T=>{},placeholder:"Designation",className:"input-style bg-gray-100",readOnly:!0}),o.jsx("input",{type:"date",name:"issueDate",value:E.issueDate,onChange:ae,className:"input-style",required:!0})]})]}),o.jsxs("div",{className:"space-y-4",children:[V.map((T,S)=>o.jsxs("div",{className:"border border-blue-200 dark:border-gray-600 p-4 rounded-lg relative",children:[o.jsx("button",{type:"button",onClick:()=>F(S),className:"absolute top-2 right-2 text-red-500 hover:text-red-700",title:"Remove Asset",children:""}),o.jsxs("h4",{className:"text-sm font-medium text-blue-800 dark:text-gray-300 mb-2",children:["Asset #",S+1]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("select",{name:"type",value:T.type,onChange:N=>ee(S,N),className:"input-style",children:[o.jsx("option",{value:"Laptop",children:"Laptop"}),o.jsx("option",{value:"Desktop",children:"Desktop"}),o.jsx("option",{value:"Monitor",children:"Monitor"}),o.jsx("option",{value:"Electronics",children:"Electronics"}),o.jsx("option",{value:"Furniture",children:"Furniture"}),o.jsx("option",{value:"Accessory",children:"Accessory"})]}),o.jsx("input",{type:"text",name:"model",value:T.model,onChange:N=>ee(S,N),placeholder:"Model",className:"input-style",required:!0}),o.jsx("input",{type:"text",name:"serialNumber",value:T.serialNumber,onChange:N=>ee(S,N),placeholder:"Serial Number",className:"input-style"})]}),o.jsx(X1,{type:T.type,specs:T.specs,brand:T.brand,onChange:N=>ee(S,N)})]},S)),o.jsx("button",{type:"button",onClick:z,className:"w-full py-2 border-2 border-dashed border-blue-300 dark:border-gray-600 rounded-lg text-blue-600 dark:text-gray-400 hover:bg-blue-50 dark:hover:bg-gray-700",children:"+ Add Another Asset"})]})]}),o.jsxs("div",{className:"p-6 border-t border-blue-200 dark:border-gray-700 flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-blue-800 bg-white border border-blue-300 rounded-lg hover:bg-blue-50",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-900 rounded-lg hover:bg-blue-800",children:"Assign Assets"})]})]}),o.jsx("style",{children:`
                        .input-style { background-color: #F9FAFB; border: 1px solid #BFDBFE; border-radius: 0.375rem; padding: 0.5rem 0.75rem; width: 100%; color: #1e3a8a; }
                        .input-style::placeholder { color: #93C5FD; }
                        .dark .input-style { background-color: #374151; border-color: #4B5563; color: white; }
                     `})]})]}):o.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 p-4 overflow-y-auto flex justify-center items-start",onClick:t,children:[C,o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl",onClick:T=>T.stopPropagation(),children:[o.jsxs("form",{onSubmit:G,children:[o.jsxs("div",{className:"p-6 border-b border-blue-200 dark:border-gray-700",children:[o.jsx("h2",{className:"text-xl font-bold text-blue-900 dark:text-white",children:a?"Edit Asset":"Add New Asset"}),o.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:"Enter details for the item."})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label-style",children:"Category"}),o.jsxs("select",{name:"type",value:y.type,onChange:H,className:"input-style",children:[o.jsx("option",{value:"Kitchen",children:"Kitchen"}),o.jsx("option",{value:"Laptop",children:"Laptop"}),o.jsx("option",{value:"Desktop",children:"Desktop"}),o.jsx("option",{value:"Printer",children:"Printer"}),o.jsx("option",{value:"Monitor",children:"Monitor"}),o.jsx("option",{value:"Electronics",children:"Electronics"}),o.jsx("option",{value:"Furniture",children:"Furniture"}),o.jsx("option",{value:"Accessory",children:"Accessory"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label-style",children:"Model / Name"}),o.jsx("input",{type:"text",name:"model",value:y.model,onChange:H,className:"input-style",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label-style",children:"Status"}),o.jsxs("select",{name:"status",value:y.status,onChange:H,className:"input-style",children:[o.jsx("option",{value:"In Stock",children:"In Stock"}),o.jsx("option",{value:"In Use",children:"In Use"}),o.jsx("option",{value:"Maintenance",children:"Maintenance"})]})]}),y.type==="Kitchen"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"label-style",children:"Quantity"}),o.jsx("input",{type:"number",name:"quantity",value:y.quantity,onChange:H,className:"input-style",required:!0,min:"0",step:"any"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label-style",children:"Unit (e.g. kg, liters)"}),o.jsx("input",{type:"text",name:"unit",value:y.unit,onChange:H,className:"input-style"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label-style",children:"Item Code"}),o.jsx("input",{type:"text",name:"itemCode",value:y.itemCode,onChange:H,className:"input-style"})]})]}):o.jsxs("div",{children:[o.jsx("label",{className:"label-style",children:"Serial Number"}),o.jsx("input",{type:"text",name:"serialNumber",value:y.serialNumber,onChange:H,className:"input-style"})]})]}),y.status==="In Use"&&o.jsxs("div",{className:"bg-blue-50 dark:bg-gray-700 p-4 rounded-lg space-y-3",children:[o.jsx("h4",{className:"text-sm font-medium text-blue-900 dark:text-white",children:"Assignment Details"}),o.jsx("input",{list:"employee-list",name:"assignedTo",value:y.assignedTo,onChange:H,placeholder:"Assigned To (Employee)",className:"input-style"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx("input",{type:"text",name:"department",value:y.department,onChange:H,placeholder:"Department",className:"input-style"}),o.jsx("input",{type:"text",name:"location",value:y.location,onChange:H,placeholder:"Location",className:"input-style"})]}),o.jsx("input",{type:"date",name:"issueDate",value:y.issueDate,onChange:H,className:"input-style"})]}),o.jsx(X1,{type:y.type,specs:y.specs,brand:y.brand,onChange:H}),o.jsx("textarea",{name:"others",value:y.others,onChange:H,placeholder:"Other Details / Remarks",className:"input-style",rows:2})]}),o.jsxs("div",{className:"p-6 border-t border-blue-200 dark:border-gray-700 flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-blue-800 bg-white border border-blue-300 rounded-lg hover:bg-blue-50",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-900 rounded-lg hover:bg-blue-800",children:"Save Asset"})]})]}),o.jsx("style",{children:`
                    .input-style { background-color: #F9FAFB; border: 1px solid #BFDBFE; border-radius: 0.375rem; padding: 0.5rem 0.75rem; width: 100%; color: #1e3a8a; }
                    .input-style::placeholder { color: #93C5FD; }
                    .dark .input-style { background-color: #374151; border-color: #4B5563; color: white; }
                    .label-style { display: block; font-size: 0.875rem; font-weight: 500; color: #1e3a8a; margin-bottom: 0.25rem; }
                    .dark .label-style { color: #D1D5DB; }
                `})]})]})},j6=({title:n,count:e,icon:t,onClick:r,color:a})=>o.jsxs("div",{onClick:r,className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform duration-200 flex flex-col items-start",children:[o.jsx("div",{className:`rounded-lg p-3 mb-4 ${a}`,children:hd.cloneElement(t,{className:"h-8 w-8 text-white"})}),o.jsx("h3",{className:"font-bold text-lg text-blue-900 dark:text-white",children:n}),o.jsxs("p",{className:"text-blue-900 dark:text-gray-400 mt-1 text-sm",children:[e," items"]})]}),I6=({isOpen:n,onClose:e,onSave:t,editingGroupedToner:r})=>{const[a,c]=L.useState(""),[u,f]=L.useState(""),[m,x]=L.useState(0),[y,v]=L.useState(0);L.useEffect(()=>{n&&(r?(c(r.model),f(r.compatiblePrinters.join(", ")),x(r.filled.quantity),v(r.empty.quantity)):(c(""),f(""),x(1),v(0)))},[n,r]);const E=R=>{R.preventDefault();const O=u.split(",").map(H=>H.trim()).filter(Boolean);t({model:a,compatiblePrinters:O,filledQuantity:Number(m)||0,emptyQuantity:Number(y)||0,originalModelName:r==null?void 0:r.model})};if(!n)return null;const A=r?"Edit Toner Model":"Add New Toner Model",V=r?"Update the details for this toner model.":"Enter the details for the new toner model.";return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 p-4 overflow-y-auto flex justify-center items-start","aria-modal":"true",role:"dialog",onClick:e,children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg",onClick:R=>R.stopPropagation(),children:[o.jsxs("form",{onSubmit:E,children:[o.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:A}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:V})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"model",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Toner Model"}),o.jsx("input",{type:"text",id:"model",name:"model",value:a,onChange:R=>c(R.target.value),required:!0,className:"mt-1 block w-full input-style",placeholder:"e.g., HP 58A"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"compatiblePrinters",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Compatible Printer Models"}),o.jsx("input",{type:"text",id:"compatiblePrinters",name:"compatiblePrinters",value:u,onChange:R=>f(R.target.value),className:"mt-1 block w-full input-style",placeholder:"e.g., HP LaserJet Pro M404dn, Other Model"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Separate multiple models with a comma."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"filledQuantity",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filled Quantity"}),o.jsx("input",{type:"number",id:"filledQuantity",name:"filledQuantity",value:m,onChange:R=>x(parseInt(R.target.value,10)),min:"0",required:!0,className:"mt-1 block w-full input-style"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"emptyQuantity",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Empty Quantity"}),o.jsx("input",{type:"number",id:"emptyQuantity",name:"emptyQuantity",value:y,onChange:R=>v(parseInt(R.target.value,10)),min:"0",required:!0,className:"mt-1 block w-full input-style"})]})]})]}),o.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600 flex justify-end space-x-3",children:[o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-500 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700",children:"Save Toner Model"})]})]}),o.jsx("style",{children:".input-style { background-color: #F9FAFB; border: 1px solid #D1D5DB; border-radius: 0.5rem; padding: 0.75rem 1rem; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); transition: all 0.2s ease-in-out; } .dark .input-style { background-color: #374151; border-color: #4B5563; color: #F9FAFB; } .input-style:focus { outline: none; --tw-ring-color: #3B82F6; box-shadow: 0 0 0 2px var(--tw-ring-color); }"})]})})},t0=({title:n,count:e,icon:t,colorClasses:r})=>o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 flex items-center space-x-4",children:[o.jsx("div",{className:`rounded-full p-3 ${r.bg}`,children:hd.cloneElement(t,{className:`h-6 w-6 ${r.text}`})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-gray-400",children:n}),o.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:e})]})]}),R6=n=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...n,children:o.jsx("path",{fillRule:"evenodd",d:"M3 3.5A1.5 1.5 0 014.5 2h5.25a1.5 1.5 0 011.06.44l3.5 3.5a1.5 1.5 0 01.44 1.06V16.5A1.5 1.5 0 0113.5 18H4.5A1.5 1.5 0 013 16.5v-13zM9 12.25a.75.75 0 00-1.5 0v.5a.75.75 0 001.5 0v-.5z",clipRule:"evenodd"})}),C6=n=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...n,children:[o.jsx("path",{d:"M5.5 2A2.5 2.5 0 003 4.5v11A2.5 2.5 0 005.5 18h9a2.5 2.5 0 002.5-2.5V8.31l-5.5-5.5H5.5zM9 4.75a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 019 4.75z"}),o.jsx("path",{d:"M10.121 2.227a.75.75 0 00-1.06 0l-5.5 5.5A.75.75 0 004 8.25v7.25a.75.75 0 00.75.75h8.5a.75.75 0 00.75-.75V8.25a.75.75 0 00-.22-.53l-5.5-5.5zM10 8a1 1 0 11-2 0 1 1 0 012 0z"})]}),k6=n=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...n,children:[o.jsx("path",{d:"M2 3.5A1.5 1.5 0 013.5 2h13A1.5 1.5 0 0118 3.5v13a1.5 1.5 0 01-1.5 1.5h-13A1.5 1.5 0 012 16.5v-13z"}),o.jsx("path",{d:"M5 6a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H6z"})]}),D6=n=>{const{printers:e,toners:t,onAddNewAsset:r,onUpdateAsset:a,onDeleteAsset:c,onResignEmployee:u,onSaveTonerModel:f,onDeleteTonerModel:m,onMarkTonerEmpty:x,onMarkTonerFilled:y,employees:v}=n,[E,A]=L.useState("printers"),[V,R]=L.useState(""),[O,H]=L.useState(!1),[ae,ee]=L.useState(null),[z,F]=L.useState(),[G,C]=L.useState(!1),[T,S]=L.useState(null),[N,I]=L.useState("All"),D=L.useMemo(()=>{const q=V.trim().toLowerCase();return q?e.filter(me=>Object.values(me).some(Ee=>String(Ee).toLowerCase().includes(q))||Object.values(me.specs||{}).some(Ee=>String(Ee).toLowerCase().includes(q))):e},[e,V]),M=L.useMemo(()=>["All",...Array.from(new Set(t.map(q=>q.model)))],[t]),Te=L.useMemo(()=>{const q=new Map;return t.forEach(me=>{q.has(me.model)||q.set(me.model,{model:me.model,compatiblePrinters:me.compatiblePrinters,filled:{id:null,quantity:0},empty:{id:null,quantity:0}});const Ee=q.get(me.model);me.status==="Filled"?(Ee.filled.id=me.id,Ee.filled.quantity=me.quantity,Ee.compatiblePrinters=[...new Set([...Ee.compatiblePrinters,...me.compatiblePrinters])]):me.status==="Empty"&&(Ee.empty.id=me.id,Ee.empty.quantity=me.quantity,Ee.compatiblePrinters=[...new Set([...Ee.compatiblePrinters,...me.compatiblePrinters])])}),Array.from(q.values()).sort((me,Ee)=>me.model.localeCompare(Ee.model))},[t]),Fe=L.useMemo(()=>N==="All"?Te:Te.filter(q=>q.model===N),[Te,N]),Y=L.useMemo(()=>({total:t.reduce((q,me)=>q+me.quantity,0),filled:t.filter(q=>q.status==="Filled").reduce((q,me)=>q+me.quantity,0),empty:t.filter(q=>q.status==="Empty").reduce((q,me)=>q+me.quantity,0)}),[t]),le=()=>{ee(null),F("Printer"),H(!0)},ye=q=>{ee(q),F(void 0),H(!0)},Re=()=>{H(!1),ee(null),F(void 0)},qe=()=>{S(null),C(!0)},P=q=>{S(q),C(!0)},$=()=>{C(!1)},ce=(q,me)=>{const Ee={...q[0],type:"Printer"};me?a({...Ee,id:me}):r([Ee]),Re()},ve=q=>{f(q),$()},we=q=>{window.confirm(`Are you sure you want to delete all toner records for model "${q}"? This will remove both filled and empty stock. This action cannot be undone.`)&&m(q)};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"flex justify-between items-center mb-6",children:o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:"Printers & Toners"}),o.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:"Manage all printing devices and their consumables."})]})}),o.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:o.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[o.jsxs("button",{onClick:()=>A("printers"),className:`${E==="printers"?"border-purple-900 text-purple-900 dark:text-blue-400":"border-transparent text-blue-600 dark:text-gray-400 hover:text-blue-900 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:["Printers (",e.length,")"]}),o.jsxs("button",{onClick:()=>A("toners"),className:`${E==="toners"?"border-purple-900 text-purple-900 dark:text-blue-400":"border-transparent text-blue-600 dark:text-gray-400 hover:text-blue-900 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:["Toners (",M.length-1," Models)"]})]})}),E==="printers"&&o.jsxs("div",{className:"mt-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 gap-4",children:[o.jsxs("div",{className:"relative w-full sm:w-auto flex-grow",children:[o.jsx("input",{type:"text",placeholder:"Search printers... (e.g., model, serial, user)",value:V,onChange:q=>R(q.target.value),className:"w-full sm:w-96 pl-10 pr-4 py-2 border border-slate-200 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-900 text-blue-900 placeholder-slate-400"}),o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("svg",{className:"h-5 w-5 text-purple-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),o.jsxs("button",{onClick:le,className:"px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors shadow-md text-sm font-medium flex items-center space-x-2",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),o.jsx("span",{children:"Add New Printer"})]})]}),o.jsx(Ny,{inventory:D,onEdit:ye,onResign:u,view:"All",onDelete:c})]}),E==="toners"&&o.jsxs("div",{className:"mt-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[o.jsx(t0,{title:"Total Toner Stock",count:Y.total,icon:o.jsx(k6,{}),colorClasses:{bg:"bg-purple-100 dark:bg-gray-700",text:"text-purple-900 dark:text-gray-300"}}),o.jsx(t0,{title:"Total Filled Toners",count:Y.filled,icon:o.jsx(R6,{}),colorClasses:{bg:"bg-green-100 dark:bg-green-900",text:"text-green-600 dark:text-green-300"}}),o.jsx(t0,{title:"Total Empty Toners",count:Y.empty,icon:o.jsx(C6,{}),colorClasses:{bg:"bg-yellow-100 dark:bg-yellow-900",text:"text-yellow-600 dark:text-yellow-300"}})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("label",{htmlFor:"tonerModelFilter",className:"text-sm font-medium text-blue-900 dark:text-gray-300",children:"Filter by Model:"}),o.jsx("select",{id:"tonerModelFilter",value:N,onChange:q=>I(q.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 text-blue-900",children:M.map(q=>o.jsx("option",{value:q,children:q},q))})]}),o.jsxs("button",{onClick:qe,className:"px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors shadow-md text-sm font-medium flex items-center space-x-2",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),o.jsx("span",{children:"Add New Toner Model"})]})]}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm text-left text-blue-600 dark:text-gray-400",children:[o.jsx("thead",{className:"text-xs text-blue-900 uppercase bg-purple-50 dark:bg-gray-700 dark:text-gray-400",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"px-6 py-3",children:"Toner Model"}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:"Compatible Printers"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Filled Qty"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Empty Qty"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Total Qty"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Actions"})]})}),o.jsx("tbody",{children:Fe.map(q=>o.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700 hover:bg-purple-50 dark:hover:bg-gray-600",children:[o.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-blue-900 dark:text-white whitespace-nowrap",children:q.model}),o.jsx("td",{className:"px-6 py-4 text-xs text-blue-800",children:q.compatiblePrinters.join(", ")}),o.jsx("td",{className:"px-6 py-4 text-center",children:o.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",children:q.filled.quantity})}),o.jsx("td",{className:"px-6 py-4 text-center",children:o.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",children:q.empty.quantity})}),o.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 dark:text-gray-300",children:q.filled.quantity+q.empty.quantity}),o.jsx("td",{className:"px-6 py-4 text-right",children:o.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[o.jsx("button",{onClick:()=>x(q.filled.id),disabled:!q.filled.id||q.filled.quantity===0,className:"font-medium text-yellow-600 dark:text-yellow-500 hover:underline disabled:text-gray-400 dark:disabled:text-gray-500 disabled:cursor-not-allowed disabled:no-underline","aria-label":`Mark one ${q.model} toner as empty`,title:"Mark 1 Empty",children:"Mark Empty"}),o.jsx("button",{onClick:()=>y(q.empty.id),disabled:!q.empty.id||q.empty.quantity===0,className:"font-medium text-green-600 dark:text-green-500 hover:underline disabled:text-gray-400 dark:disabled:text-gray-500 disabled:cursor-not-allowed disabled:no-underline","aria-label":`Mark one ${q.model} toner as filled`,title:"Mark 1 Filled",children:"Mark Filled"}),o.jsx("button",{onClick:()=>P(q),className:"font-medium text-blue-600 dark:text-blue-500 hover:underline","aria-label":`Edit ${q.model} toner model`,title:"Edit Model",children:"Edit"}),o.jsx("button",{onClick:()=>we(q.model),className:"font-medium text-red-600 dark:text-red-500 hover:underline","aria-label":`Delete all ${q.model} toner records`,title:"Delete Model",children:"Delete"})]})})]},q.model))})]})})]})]}),o.jsx(Dd,{isOpen:O,onClose:Re,onSave:ce,editingAsset:ae,initialType:z,employees:v}),o.jsx(I6,{isOpen:G,onClose:$,onSave:ve,editingGroupedToner:T})]})},J1={serialNumber:"",systemModel:"",lcdModel:"",lcdInches:"",cpu:"",ram:"",storage:"",gpu:"",keyboard:"",mouse:"",networkDevice:"Ethernet"},M6=({isOpen:n,onClose:e,onSave:t,editingSystem:r})=>{const[a,c]=L.useState(J1);L.useEffect(()=>{n&&c(r||J1)},[n,r]);const u=m=>{const{name:x,value:y}=m.target;c(v=>({...v,[x]:y}))},f=m=>{m.preventDefault(),t(a,r==null?void 0:r.id)};return n?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 p-4 overflow-y-auto flex justify-center items-start",onClick:e,"aria-modal":"true",role:"dialog",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl",onClick:m=>m.stopPropagation(),children:[o.jsxs("form",{onSubmit:f,children:[o.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r?"Edit System":"Add New System"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enter the details of the computer system."})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"System & Display"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"systemModel",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"System Model"}),o.jsx("input",{type:"text",id:"systemModel",name:"systemModel",value:a.systemModel,onChange:u,required:!0,className:"mt-1 block w-full input-style"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"serialNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Serial Number"}),o.jsx("input",{type:"text",id:"serialNumber",name:"serialNumber",value:a.serialNumber,onChange:u,required:!0,className:"mt-1 block w-full input-style"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lcdModel",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"LCD Model"}),o.jsx("input",{type:"text",id:"lcdModel",name:"lcdModel",value:a.lcdModel,onChange:u,required:!0,className:"mt-1 block w-full input-style"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lcdInches",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"LCD Size (Inches)"}),o.jsx("input",{type:"text",id:"lcdInches",name:"lcdInches",value:a.lcdInches,onChange:u,required:!0,className:"mt-1 block w-full input-style"})]})]})]}),o.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Core Components"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"cpu",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"CPU"}),o.jsx("input",{type:"text",id:"cpu",name:"cpu",value:a.cpu,onChange:u,required:!0,className:"mt-1 block w-full input-style"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"ram",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"RAM"}),o.jsx("input",{type:"text",id:"ram",name:"ram",value:a.ram,onChange:u,required:!0,className:"mt-1 block w-full input-style"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"storage",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Storage"}),o.jsx("input",{type:"text",id:"storage",name:"storage",value:a.storage,onChange:u,required:!0,className:"mt-1 block w-full input-style"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"gpu",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Graphics Card (GPU)"}),o.jsx("input",{type:"text",id:"gpu",name:"gpu",value:a.gpu,onChange:u,required:!0,className:"mt-1 block w-full input-style"})]})]})]}),o.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Peripherals & Network"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"keyboard",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Keyboard"}),o.jsx("input",{type:"text",id:"keyboard",name:"keyboard",value:a.keyboard,onChange:u,required:!0,className:"mt-1 block w-full input-style"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"mouse",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mouse"}),o.jsx("input",{type:"text",id:"mouse",name:"mouse",value:a.mouse,onChange:u,required:!0,className:"mt-1 block w-full input-style"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"networkDevice",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Network Device"}),o.jsx("input",{type:"text",id:"networkDevice",name:"networkDevice",value:a.networkDevice,onChange:u,required:!0,className:"mt-1 block w-full input-style",placeholder:"e.g., Ethernet or WiFi Tenda"})]})]})]})]}),o.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600 flex justify-end space-x-3",children:[o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-500 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700",children:"Save System"})]})]}),o.jsx("style",{children:`
                    .input-style {
                        background-color: #F9FAFB; /* bg-gray-50 */
                        border: 1px solid #D1D5DB; /* border-gray-300 */
                        border-radius: 0.375rem; /* rounded-md */
                        padding: 0.5rem 0.75rem; /* px-3 py-2 */
                        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
                        transition: all 0.2s ease-in-out;
                    }
                    .dark .input-style {
                        background-color: #374151; /* dark:bg-gray-700 */
                        border-color: #4B5563; /* dark:border-gray-600 */
                        color: #F9FAFB; /* dark:text-white */
                    }
                    .input-style:focus {
                        outline: none;
                        --tw-ring-color: #3B82F6; /* focus:ring-blue-500 */
                        box-shadow: 0 0 0 2px var(--tw-ring-color);
                    }
                `})]})}):null},P6=({labs:n,onAddSystem:e,onUpdateSystem:t,onDeleteSystem:r})=>{const[a,c]=L.useState(null),[u,f]=L.useState(!1),[m,x]=L.useState(null),y=()=>{x(null),f(!0)},v=O=>{x(O),f(!0)},E=()=>{f(!1),x(null)},A=(O,H)=>{a&&(H?t(a.id,{...O,id:H}):e(a.id,O),E())},V=O=>{a&&window.confirm(`Are you sure you want to delete system ${O}?`)&&r(a.id,O)},R=()=>{if(!a)return;const O=["ID","Serial Number","System Model","LCD Model","LCD Inches","CPU","RAM","Storage","GPU","Keyboard","Mouse","Network Device"],H=a.systems.map(F=>[`"${F.id}"`,`"${F.serialNumber}"`,`"${F.systemModel}"`,`"${F.lcdModel}"`,`"${F.lcdInches}"`,`"${F.cpu}"`,`"${F.ram}"`,`"${F.storage}"`,`"${F.gpu}"`,`"${F.keyboard}"`,`"${F.mouse}"`,`"${F.networkDevice}"`].join(",")),ae="data:text/csv;charset=utf-8,"+[O.join(","),...H].join(`
`),ee=encodeURI(ae),z=document.createElement("a");z.setAttribute("href",ee),z.setAttribute("download",`${a.name.replace(/\s+/g,"_")}_Inventory.csv`),document.body.appendChild(z),z.click(),document.body.removeChild(z)};return a?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-6",children:[o.jsxs("button",{onClick:()=>c(null),className:"mb-6 flex items-center text-sm font-medium text-blue-900 dark:text-blue-400 hover:underline",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to All Labs"]}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:[a.name," - Systems Inventory"]}),o.jsxs("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:["Total Systems: ",a.systems.length]})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs("button",{onClick:R,disabled:a.systems.length===0,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors shadow-md text-sm font-medium flex items-center space-x-2 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),o.jsx("span",{children:"Download Inventory"})]}),o.jsxs("button",{onClick:y,className:"px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors shadow-md text-sm font-medium flex items-center space-x-2",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),o.jsx("span",{children:"Add New System"})]})]})]}),a.systems.length>0?o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm text-left text-blue-600 dark:text-gray-400",children:[o.jsx("thead",{className:"text-xs text-blue-900 uppercase bg-purple-50 dark:bg-gray-700 dark:text-gray-400",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"px-6 py-3",children:"ID"}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:"Serial No."}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:"System Model"}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:"CPU"}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:"RAM"}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:"Storage"}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:"GPU"}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:"Keyboard"}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:"Mouse"}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:o.jsx("span",{className:"sr-only",children:"Actions"})})]})}),o.jsx("tbody",{children:a.systems.map(O=>o.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700 hover:bg-purple-50 dark:hover:bg-gray-600",children:[o.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-blue-900 dark:text-white whitespace-nowrap",children:O.id}),o.jsx("td",{className:"px-6 py-4",children:O.serialNumber}),o.jsx("td",{className:"px-6 py-4",children:O.systemModel}),o.jsx("td",{className:"px-6 py-4",children:O.cpu}),o.jsx("td",{className:"px-6 py-4",children:O.ram}),o.jsx("td",{className:"px-6 py-4",children:O.storage}),o.jsx("td",{className:"px-6 py-4",children:O.gpu}),o.jsx("td",{className:"px-6 py-4",children:O.keyboard}),o.jsx("td",{className:"px-6 py-4",children:O.mouse}),o.jsxs("td",{className:"px-6 py-4 text-right flex items-center space-x-3",children:[o.jsx("button",{onClick:()=>v(O),className:"font-medium text-blue-600 dark:text-blue-500 hover:underline",children:"Edit"}),o.jsx("button",{onClick:()=>V(O.id),className:"font-medium text-red-600 dark:text-red-500 hover:underline",children:"Delete"})]})]},O.id))})]})}):o.jsxs("div",{className:"text-center py-10 px-6 bg-white dark:bg-gray-800 rounded-lg shadow",children:[o.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-white",children:"No Systems Found"}),o.jsxs("p",{className:"mt-1 text-sm text-blue-600 dark:text-gray-400",children:["There are no systems currently registered in ",a.name,"."]}),o.jsx("button",{onClick:y,className:"mt-4 px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors shadow-md text-sm font-medium",children:"Add the First System"})]})]}),o.jsx(M6,{isOpen:u,onClose:E,onSave:A,editingSystem:m})]}):o.jsxs("div",{className:"p-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white mb-6",children:"Computer Labs"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(O=>o.jsxs("div",{onClick:()=>c(O),className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 cursor-pointer hover:shadow-lg hover:scale-105 transition-transform duration-200",children:[o.jsx("h3",{className:"font-bold text-lg text-blue-900 dark:text-white",children:O.name}),o.jsxs("p",{className:"text-blue-600 dark:text-gray-400 mt-2",children:[O.systems.length," Systems"]})]},O.id))})]})},Sl={Barista:[{name:"Espresso Shot",ingredients:[{name:"Coffee Beans",quantity:.018,unit:"kg"}]},{name:"Cappuccino",ingredients:[{name:"Coffee Beans",quantity:.018,unit:"kg"},{name:"Milk",quantity:.15,unit:"liters"}]}],Cooking:[{name:"Basic Omelette",ingredients:[{name:"Eggs",quantity:2,unit:"pieces"},{name:"Butter",quantity:.01,unit:"kg"},{name:"Salt",quantity:.001,unit:"kg"}]},{name:"Mirepoix Prep",ingredients:[{name:"Onion",quantity:2,unit:"pieces"},{name:"Carrot",quantity:1,unit:"pieces"},{name:"Celery",quantity:1,unit:"pieces"}]}],"Culinary Chef":[{name:"Vinaigrette",ingredients:[{name:"Olive Oil",quantity:.06,unit:"liters"},{name:"Vinegar",quantity:.02,unit:"liters"},{name:"Salt",quantity:.001,unit:"kg"}]}],Bakery:[{name:"Simple Bread Dough",ingredients:[{name:"Flour",quantity:.5,unit:"kg"},{name:"Water",quantity:.3,unit:"liters"},{name:"Yeast",quantity:.007,unit:"kg"},{name:"Salt",quantity:.01,unit:"kg"}]},{name:"Basic Cookie Dough",ingredients:[{name:"Flour",quantity:.25,unit:"kg"},{name:"Butter",quantity:.15,unit:"kg"},{name:"Sugar",quantity:.2,unit:"kg"},{name:"Eggs",quantity:1,unit:"pieces"}]}]},O6=n=>{var we;const[e,t]=L.useState(!1),[r,a]=L.useState(null),[c,u]=L.useState(null),[f,m]=L.useState(Object.keys(Sl)[0]),[x,y]=L.useState(Sl[f][0].name),[v,E]=L.useState(1),[A,V]=L.useState(!1),[R,O]=L.useState("item"),[H,ae]=L.useState([]),[ee,z]=L.useState(""),[F,G]=L.useState(""),[C,T]=L.useState(1),[S,N]=L.useState("");L.useEffect(()=>{y(Sl[f][0].name)},[f]),L.useEffect(()=>{if(c){const q=setTimeout(()=>u(null),5e3);return()=>clearTimeout(q)}},[c]);const I=L.useMemo(()=>n.inventory.filter(q=>q.type==="Kitchen"),[n.inventory]),D=L.useMemo(()=>Sl[f].find(q=>q.name===x),[f,x]),M=L.useMemo(()=>{if(!D)return{canMake:!1,needed:[]};let q=!0;const me=D.ingredients.map(Ee=>{const ke=I.find(De=>De.model.toLowerCase()===Ee.name.toLowerCase()),$e=Ee.quantity*v,Xt=(ke==null?void 0:ke.quantity)||0,ie=Xt>=$e;return ie||(q=!1),{name:Ee.name,required:$e.toFixed(3),available:Xt,sufficient:ie,unit:Ee.unit}});return{canMake:q,needed:me}},[D,I,v]),Te=()=>{a(null),t(!0)},Fe=q=>{a(q),t(!0)},Y=(q,me)=>{const Ee=q.map(ke=>({...ke,type:"Kitchen",status:"In Stock",assignedTo:""}));me&&Ee.length===1?n.onUpdateAsset({...Ee[0],id:me}):n.onAddNewAsset(Ee),t(!1),u({type:"success",text:`Material ${me?"updated":"added"} successfully.`})},le=async()=>{if(!D||!M.canMake)return;const q=D.ingredients.map(me=>{const Ee=I.find($e=>$e.model.toLowerCase()===me.name.toLowerCase()),ke=Ee.quantity-me.quantity*v;return{id:Ee.id,newQuantity:ke}});await n.onUpdateKitchenStock(q),u({type:"success",text:`${v} student(s) worth of materials for ${x} used. Stock updated.`})},ye=q=>{ae([]),z(""),G(""),T(1),N(""),q&&(O("item"),Re(q,1)),V(!0)},Re=(q,me)=>{ae(Ee=>Ee.find($e=>$e.item.id===q.id)?Ee.map($e=>$e.item.id===q.id?{...$e,qty:$e.qty+me}:$e):[...Ee,{item:q,qty:me}])},qe=(q,me)=>{ae(H.map(Ee=>Ee.item.id===q?{...Ee,qty:Math.max(.001,me)}:Ee))},P=q=>{ae(H.filter(me=>me.item.id!==q))},$=()=>{if(!n.recipes||!F)return;const q=n.recipes.find(me=>me.id===F);q&&q.ingredients.forEach(me=>{const Ee=me.name.toLowerCase().trim(),ke=I.find($e=>$e.model.toLowerCase().trim()===Ee);ke&&Re(ke,me.quantity*C)})},ce=async()=>{if(!n.onCreateSCRequest)return;if(H.length===0){alert("Cart is empty");return}const q=n.employees.find(ke=>ke.email===n.currentUserEmail),Ee={requesterName:q?`${q.firstName} ${q.lastName}`:n.currentUserEmail||"Chef",requesterEmail:n.currentUserEmail||"",department:"Kitchen",date:new Date().toISOString(),purpose:ee||"Kitchen Restock",status:"Pending Account Manager",items:H.map(ke=>({inventoryId:ke.item.id,name:ke.item.model,quantityRequested:ke.qty,unit:ke.item.unit||"units"}))};await n.onCreateSCRequest(Ee),V(!1),u({type:"success",text:"Requisition submitted to Store Manager."})},ve=L.useMemo(()=>{if(!S)return I;const q=S.toLowerCase();return I.filter(me=>me.model.toLowerCase().includes(q))},[I,S]);return o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"The Chef's Academy"}),o.jsx("div",{className:"flex gap-2",children:n.onCreateSCRequest&&o.jsxs("button",{onClick:()=>ye(),className:"px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 font-medium flex items-center gap-2 shadow-sm",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})}),"New Store Requisition"]})})]}),c&&o.jsx("div",{className:`p-4 rounded-md text-sm ${c.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.text}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Class Recipe Execution"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Course"}),o.jsx("select",{value:f,onChange:q=>m(q.target.value),className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5",children:Object.keys(Sl).map(q=>o.jsx("option",{value:q,children:q},q))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Recipe"}),o.jsx("select",{value:x,onChange:q=>y(q.target.value),className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5",children:Sl[f].map(q=>o.jsx("option",{value:q.name,children:q.name},q.name))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Students / Servings"}),o.jsx("input",{type:"number",min:"1",value:v,onChange:q=>E(Math.max(1,parseInt(q.target.value)||1)),className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5"})]})]}),o.jsxs("div",{className:"mt-6",children:[o.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Materials Required:"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:M.needed.map((q,me)=>o.jsxs("div",{className:`p-3 rounded border flex justify-between items-center ${q.sufficient?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:q.name}),o.jsxs("p",{className:"text-xs text-gray-500",children:["Need: ",q.required," ",q.unit]})]}),o.jsxs("div",{className:`text-xs font-bold ${q.sufficient?"text-green-700":"text-red-700"}`,children:[q.sufficient?"Available":"Low Stock",o.jsx("br",{}),o.jsxs("span",{className:"font-normal text-gray-500",children:["Stock: ",q.available]})]})]},me))})]}),o.jsx("div",{className:"mt-6 flex justify-end",children:o.jsx("button",{onClick:le,disabled:!M.canMake,className:"px-6 py-2.5 bg-blue-900 text-white rounded-lg hover:bg-blue-800 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium shadow-sm transition-colors",children:"Use Materials for Class"})})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Kitchen Inventory"}),o.jsx("button",{onClick:Te,className:"text-sm text-blue-900 hover:underline font-medium",children:"+ Add New Ingredient"})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[o.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3",children:"Ingredient Name"}),o.jsx("th",{className:"px-6 py-3 text-center",children:"Current Stock"}),o.jsx("th",{className:"px-6 py-3 text-center",children:"Unit"}),o.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),o.jsx("tbody",{children:I.map(q=>o.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-purple-50 dark:hover:bg-gray-600 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white",children:q.model}),o.jsx("td",{className:"px-6 py-4 text-center font-semibold",children:q.quantity}),o.jsx("td",{className:"px-6 py-4 text-center",children:q.unit}),o.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[o.jsx("button",{onClick:()=>ye(q),className:"font-medium text-blue-900 hover:underline",children:"Request"}),o.jsx("button",{onClick:()=>Fe(q),className:"font-medium text-teal-600 hover:underline",children:"Edit"}),o.jsx("button",{onClick:()=>n.onDeleteAsset(q.id),className:"font-medium text-red-600 hover:underline",children:"Delete"})]})]},q.id))})]})})]}),o.jsx(Dd,{isOpen:e,onClose:()=>t(!1),onSave:Y,editingAsset:r,employees:n.employees,initialType:"Kitchen"}),A&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 p-4 overflow-y-auto flex justify-center items-start",onClick:()=>V(!1),children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl",onClick:q=>q.stopPropagation(),children:[o.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"New Store Requisition"}),o.jsx("button",{onClick:()=>V(!1),className:"text-slate-400 hover:text-slate-600",children:""})]}),o.jsxs("div",{className:"p-6 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex space-x-4 mb-4 border-b",children:[o.jsx("button",{onClick:()=>O("item"),className:`pb-2 text-sm font-medium ${R==="item"?"border-b-2 border-blue-900 text-blue-900":"text-slate-500"}`,children:"Select Items"}),o.jsx("button",{onClick:()=>O("dish"),className:`pb-2 text-sm font-medium ${R==="dish"?"border-b-2 border-blue-900 text-blue-900":"text-slate-500"}`,children:"Select by Dish"})]}),R==="item"?o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"text",placeholder:"Search ingredients...",className:"w-full border rounded px-3 py-2 text-sm mb-2",value:S,onChange:q=>N(q.target.value)}),o.jsx("div",{className:"h-64 overflow-y-auto border rounded",children:o.jsxs("table",{className:"w-full text-sm text-left",children:[o.jsx("thead",{className:"bg-slate-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2",children:"Item"}),o.jsx("th",{className:"px-3 py-2",children:"Stock"}),o.jsx("th",{className:"px-3 py-2"})]})}),o.jsx("tbody",{children:ve.map(q=>o.jsxs("tr",{className:"hover:bg-purple-50 border-b transition-colors",children:[o.jsx("td",{className:"px-3 py-2",children:q.model}),o.jsxs("td",{className:"px-3 py-2",children:[q.quantity," ",q.unit]}),o.jsxs("td",{className:"px-3 py-2 text-right",children:[o.jsx("button",{onClick:()=>Re(q,1),className:"text-xs bg-blue-50 text-blue-900 px-2 py-1 rounded hover:bg-blue-100",children:"Add"}),(q.quantity||0)===0&&o.jsx("span",{className:"block text-[10px] text-red-500",children:"Out of Stock"})]})]},q.id))})]})})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Select Dish"}),o.jsxs("select",{className:"w-full border rounded px-3 py-2 text-sm",value:F,onChange:q=>G(q.target.value),children:[o.jsx("option",{value:"",children:"-- Choose --"}),(we=n.recipes)==null?void 0:we.map(q=>o.jsx("option",{value:q.id,children:q.name},q.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Portions"}),o.jsx("input",{type:"number",min:"1",value:C,onChange:q=>T(parseInt(q.target.value)),className:"w-full border rounded px-3 py-2 text-sm"})]}),o.jsx("button",{onClick:$,className:"w-full bg-blue-900 text-white py-2 rounded text-sm hover:bg-blue-800",children:"Add Ingredients to Cart"})]})]}),o.jsxs("div",{className:"flex flex-col h-full bg-slate-50 rounded border p-4",children:[o.jsx("h3",{className:"font-bold text-slate-800 mb-2",children:"Request Cart"}),o.jsx("div",{className:"flex-1 overflow-y-auto mb-4 bg-white rounded border p-2",children:H.length===0?o.jsx("p",{className:"text-slate-400 text-center text-sm py-4",children:"Empty"}):o.jsx("ul",{className:"space-y-2",children:H.map((q,me)=>o.jsxs("li",{className:"flex justify-between items-center text-sm border-b pb-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:q.item.model}),o.jsxs("span",{className:"text-xs text-slate-500 ml-1",children:["(",q.item.unit,")"]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("input",{type:"number",min:"0.1",step:"0.1",value:q.qty,onChange:Ee=>qe(q.item.id,parseFloat(Ee.target.value)),className:"w-16 border rounded px-1 py-0.5 text-center"}),o.jsx("button",{onClick:()=>P(q.item.id),className:"text-red-500 hover:text-red-700",children:""})]})]},me))})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Purpose / Note"}),o.jsx("textarea",{className:"w-full border rounded px-3 py-2 text-sm",rows:2,placeholder:"e.g. Class preparation",value:ee,onChange:q=>z(q.target.value)}),o.jsx("button",{onClick:ce,className:"w-full mt-3 bg-green-600 text-white py-2 rounded font-medium hover:bg-green-700",children:"Submit Request"})]})]})]})]})})]})},V6=({inventory:n,employees:e,onAddNewAsset:t,onUpdateAsset:r,onDeleteAsset:a,onResignEmployee:c})=>{const[u,f]=L.useState(!1),[m,x]=L.useState(null),[y,v]=L.useState("All"),[E,A]=L.useState(""),[V,R]=L.useState(),O=L.useMemo(()=>n.filter(G=>G.type!=="Kitchen"),[n]),H=L.useMemo(()=>{const G=y==="All"?O:O.filter(T=>T.status===y),C=E.trim().toLowerCase();return C?G.filter(T=>Object.values(T).some(S=>String(S).toLowerCase().includes(C))||Object.values(T.specs||{}).some(S=>String(S).toLowerCase().includes(C))):G},[y,O,E]),ae=["All","In Use","In Stock","Maintenance"],ee=()=>{x(null),R(y==="All"?"In Use":y),f(!0)},z=G=>{x(G),f(!0)},F=(G,C)=>{C&&G.length===1?r({...G[0],id:C}):t(G),f(!1),x(null)};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:"Master Inventory"}),o.jsx("p",{className:"text-sm text-blue-900 dark:text-gray-400",children:"A complete list of all company hardware (IT & General)."})]}),o.jsxs("button",{onClick:ee,className:"px-4 py-2 bg-purple-900 text-white rounded-lg hover:bg-purple-800 transition-colors shadow-md text-sm font-medium flex items-center space-x-2",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),o.jsx("span",{children:"Assign New Asset"})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-4",children:[o.jsx("div",{className:"flex bg-purple-50 dark:bg-gray-700 rounded-lg",children:ae.map(G=>o.jsxs("button",{onClick:()=>v(G),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${y===G?"bg-purple-900 text-white shadow":"text-blue-900 dark:text-gray-300 hover:bg-purple-200 dark:hover:bg-gray-600"}`,children:[G," (",G==="All"?O.length:O.filter(C=>C.status===G).length,")"]},G))}),o.jsxs("div",{className:"relative w-full md:w-auto",children:[o.jsx("input",{type:"text",placeholder:"Search anything...",value:E,onChange:G=>A(G.target.value),className:"w-full md:w-80 pl-10 pr-4 py-2 border border-slate-200 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-900 placeholder-slate-400 text-blue-900"}),o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("svg",{className:"h-5 w-5 text-purple-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]}),o.jsx(Ny,{inventory:H,onEdit:z,onResign:c,onDelete:a,view:y})]}),o.jsx(Dd,{isOpen:u,onClose:()=>f(!1),onSave:F,editingAsset:m,initialStatus:V,employees:e,isMultiAddMode:!m&&y!=="In Stock"&&y!=="Maintenance"})]})},Z1=({assetType:n,inventory:e,employees:t,onAddNewAsset:r,onUpdateAsset:a,onDeleteAsset:c,onResignEmployee:u})=>{const[f,m]=L.useState(!1),[x,y]=L.useState(null),[v,E]=L.useState(""),A=L.useMemo(()=>e.filter(T=>T.type===n),[e,n]),V=L.useMemo(()=>{const T=v.trim().toLowerCase();return T?A.filter(S=>Object.values(S).some(N=>String(N).toLowerCase().includes(T))||Object.values(S.specs||{}).some(N=>String(N).toLowerCase().includes(T))):A},[A,v]),R=L.useMemo(()=>({total:A.length,inUse:A.filter(T=>T.status==="In Use").length,inStock:A.filter(T=>T.status==="In Stock").length,maintenance:A.filter(T=>T.status==="Maintenance").length}),[A]),O=()=>{y(null),m(!0)},H=T=>{y(T),m(!0)},ae=(T,S)=>{const N=T.map(I=>({...I,type:n}));S&&N.length===1?a({...N[0],id:S}):r(N),m(!1),y(null)},ee=({title:T,count:S,icon:N,colorClasses:I})=>o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 flex items-center space-x-4",children:[o.jsx("div",{className:`rounded-full p-3 ${I.bg}`,children:hd.cloneElement(N,{className:`h-6 w-6 ${I.text}`})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-gray-400",children:T}),o.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:S})]})]}),z=T=>o.jsx("svg",{...T,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),F=T=>o.jsx("svg",{...T,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),G=T=>o.jsx("svg",{...T,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),C=T=>o.jsxs("svg",{...T,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066 2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]});return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:[n," Inventory"]}),o.jsx("button",{onClick:O,className:"px-4 py-2 bg-purple-900 text-white rounded-lg hover:bg-purple-800 text-sm font-medium flex items-center space-x-2",children:o.jsxs("span",{children:["Add New ",n]})})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[o.jsx(ee,{title:`Total ${n}s`,count:R.total,icon:o.jsx(z,{}),colorClasses:{bg:"bg-purple-50 dark:bg-gray-700",text:"text-purple-800 dark:text-gray-300"}}),o.jsx(ee,{title:"In Use",count:R.inUse,icon:o.jsx(F,{}),colorClasses:{bg:"bg-green-100 dark:bg-green-900",text:"text-green-600 dark:text-green-300"}}),o.jsx(ee,{title:"In Stock",count:R.inStock,icon:o.jsx(G,{}),colorClasses:{bg:"bg-purple-100 dark:bg-purple-900",text:"text-purple-900 dark:text-blue-300"}}),o.jsx(ee,{title:"Maintenance",count:R.maintenance,icon:o.jsx(C,{}),colorClasses:{bg:"bg-yellow-100 dark:bg-yellow-900",text:"text-yellow-600 dark:text-yellow-300"}})]}),o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"relative w-full md:w-auto",children:[o.jsx("input",{type:"text",placeholder:`Search ${n}s... (e.g., model, serial, user)`,value:v,onChange:T=>E(T.target.value),className:"w-full md:w-96 pl-10 pr-4 py-2 border border-slate-200 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-900 placeholder-slate-400 text-blue-900"}),o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("svg",{className:"h-5 w-5 text-purple-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),o.jsx(Ny,{inventory:V,onEdit:H,onResign:u,onDelete:c,view:"All"}),o.jsx(Dd,{isOpen:f,onClose:()=>m(!1),onSave:ae,editingAsset:x,employees:t,initialType:n})]})},L6=n=>{const[e,t]=L.useState("overview"),r=n.currentUserEmail==="admin",a=L.useMemo(()=>({master:n.inventory.filter(u=>u.type!=="Kitchen").length,laptops:n.inventory.filter(u=>u.type==="Laptop").length,desktops:n.inventory.filter(u=>u.type==="Desktop").length,printers:n.inventory.filter(u=>u.type==="Printer").length,labs:n.labs.length,kitchen:n.inventory.filter(u=>u.type==="Kitchen").length}),[n.inventory,n.labs]),c=()=>{switch(e){case"master":return o.jsx(V6,{inventory:n.inventory,employees:n.employees,onAddNewAsset:n.onAddNewAsset,onUpdateAsset:n.onUpdateAsset,onDeleteAsset:n.onDeleteAsset,onResignEmployee:n.onResignEmployee});case"laptops":return o.jsx(Z1,{assetType:"Laptop",inventory:n.inventory,employees:n.employees,onAddNewAsset:n.onAddNewAsset,onUpdateAsset:n.onUpdateAsset,onDeleteAsset:n.onDeleteAsset,onResignEmployee:n.onResignEmployee});case"desktops":return o.jsx(Z1,{assetType:"Desktop",inventory:n.inventory,employees:n.employees,onAddNewAsset:n.onAddNewAsset,onUpdateAsset:n.onUpdateAsset,onDeleteAsset:n.onDeleteAsset,onResignEmployee:n.onResignEmployee});case"printers":return o.jsx(D6,{printers:n.inventory.filter(m=>m.type==="Printer"),toners:n.toners,employees:n.employees,onAddNewAsset:n.onAddNewAsset,onUpdateAsset:n.onUpdateAsset,onDeleteAsset:n.onDeleteAsset,onResignEmployee:n.onResignEmployee,onSaveTonerModel:n.onSaveTonerModel,onDeleteTonerModel:n.onDeleteTonerModel,onMarkTonerEmpty:n.onMarkTonerEmpty,onMarkTonerFilled:n.onMarkTonerFilled});case"labs":return o.jsx(P6,{labs:n.labs,onAddSystem:n.onAddSystem,onUpdateSystem:n.onUpdateSystem,onDeleteSystem:n.onDeleteSystem});case"kitchen":return o.jsx(O6,{inventory:n.inventory,employees:n.employees,onAddNewAsset:n.onAddNewAsset,onUpdateAsset:n.onUpdateAsset,onDeleteAsset:n.onDeleteAsset,onUpdateKitchenStock:n.onUpdateKitchenStock,recipes:n.recipes,onCreateSCRequest:n.onCreateSCRequest,currentUserEmail:n.currentUserEmail});case"overview":default:const u=[{id:"master",title:"Master Inventory",count:a.master,icon:o.jsx(ld,{}),onClick:()=>t("master"),color:"bg-purple-900"},{id:"laptops",title:"Laptops",count:a.laptops,icon:o.jsx(cd,{}),onClick:()=>t("laptops"),color:"bg-purple-800"},{id:"desktops",title:"Desktops",count:a.desktops,icon:o.jsx(cd,{}),onClick:()=>t("desktops"),color:"bg-purple-700"},{id:"printers",title:"Printers & Toners",count:a.printers,icon:o.jsx(JE,{}),onClick:()=>t("printers"),color:"bg-purple-900"},{id:"labs",title:"Computer Labs",count:a.labs,icon:o.jsx(XE,{}),onClick:()=>t("labs"),color:"bg-purple-800"},{id:"kitchen",title:"The Chef's Academy",count:a.kitchen,icon:o.jsx(vy,{}),onClick:()=>t("kitchen"),color:"bg-purple-900"}],f=r?u:u.filter(m=>{var x,y;return(y=(x=n.permissions)==null?void 0:x[m.id])==null?void 0:y.view});return o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white mb-6",children:"Inventory Overview"}),f.length>0?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(m=>o.jsx(j6,{...m},m.id))}):o.jsxs("div",{className:"text-center py-10 px-6 bg-white dark:bg-gray-800 rounded-lg shadow",children:[o.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-white",children:"No Inventory Access"}),o.jsx("p",{className:"mt-1 text-sm text-blue-900 dark:text-gray-400",children:"You do not have permission to view any inventory categories."})]})]})}};return o.jsxs("div",{className:"p-6",children:[e!=="overview"&&o.jsxs("button",{onClick:()=>t("overview"),className:"mb-6 flex items-center text-sm font-medium text-purple-800 dark:text-blue-400 hover:underline",children:[o.jsx(Yf,{className:"h-4 w-4 mr-1"}),"Back to Inventory Overview"]}),c()]})},U6=({users:n,onResignEmployee:e})=>{const[t,r]=L.useState(null),a=c=>{r(t===c?null:c)};return o.jsxs("div",{className:"p-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white mb-6",children:"Employees & Assigned Assets"}),o.jsx("div",{className:"space-y-4",children:n.map(c=>o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow transition-shadow duration-200",children:[o.jsxs("div",{className:"w-full flex justify-between items-center p-4 text-left",children:[o.jsxs("div",{onClick:()=>a(c.id),className:"cursor-pointer flex-grow",children:[o.jsx("p",{className:"font-semibold text-blue-900 dark:text-white",children:c.name}),o.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:c.email})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("span",{className:"text-sm px-2 py-1 bg-purple-100 text-purple-900 dark:bg-gray-700 rounded-full",children:[c.assets.length," Assets"]}),c.assets.length>0&&o.jsx("button",{onClick:()=>e(c.name),className:"font-medium text-yellow-600 dark:text-yellow-500 hover:underline text-sm px-2 py-1 rounded-md hover:bg-yellow-100 dark:hover:bg-gray-700","aria-label":`Resign all assets from ${c.name}`,children:"Resign"}),o.jsx("button",{onClick:()=>a(c.id),"aria-label":"Toggle asset details",className:"p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 text-blue-600 dark:text-gray-400 transition-transform ${t===c.id?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),t===c.id&&o.jsx("div",{className:"border-t border-slate-200 dark:border-gray-700 p-4",children:c.assets.length>0?o.jsx("ul",{className:"space-y-2",children:c.assets.map(u=>o.jsxs("li",{className:"flex justify-between items-center text-sm",children:[o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-blue-900 dark:text-gray-200",children:[u.type,":"]}),o.jsx("span",{className:"text-blue-600 dark:text-gray-400 ml-2",children:u.model})]}),o.jsx("span",{className:"text-xs font-mono bg-purple-50 text-purple-900 dark:bg-gray-700 px-2 py-1 rounded",children:u.id})]},u.id))}):o.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400 text-center",children:"No assets assigned to this user."})})]},c.id))})]})},eN={mrfNumber:"",demandNumber:"",description:""},F6=({isOpen:n,onClose:e,onSave:t,editingMRF:r})=>{const[a,c]=L.useState(eN);L.useEffect(()=>{n&&c(r?{mrfNumber:r.mrfNumber,demandNumber:r.demandNumber,description:r.description}:eN)},[r,n]);const u=y=>{const{name:v,value:E}=y.target;c(A=>({...A,[v]:E}))},f=y=>{y.preventDefault(),t(a,r==null?void 0:r.id)};if(!n)return null;const m=r?"Edit MRF":"Generate New MRF",x=r?"Update the details for this MRF.":"Enter the details for the new Material Requisition Form.";return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 p-4 overflow-y-auto flex justify-center items-start","aria-modal":"true",role:"dialog",onClick:e,children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg",onClick:y=>y.stopPropagation(),children:[o.jsxs("form",{onSubmit:f,children:[o.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:m}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:x})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"mrfNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"MRF Number"}),o.jsx("input",{type:"text",id:"mrfNumber",name:"mrfNumber",value:a.mrfNumber,onChange:u,required:!0,className:"mt-1 block w-full input-style"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"demandNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Demand Number"}),o.jsx("input",{type:"text",id:"demandNumber",name:"demandNumber",value:a.demandNumber,onChange:u,required:!0,className:"mt-1 block w-full input-style"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),o.jsx("textarea",{id:"description",name:"description",value:a.description,onChange:u,required:!0,rows:4,className:"mt-1 block w-full input-style"})]})]}),o.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600 flex justify-end space-x-3 flex-shrink-0",children:[o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 btn-secondary",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 btn-primary",children:"Save MRF"})]})]}),o.jsx("style",{children:`
                    .input-style { background-color: #F9FAFB; border: 1px solid #D1D5DB; border-radius: 0.5rem; padding: 0.75rem 1rem; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); transition: all 0.2s ease-in-out; width: 100%; }
                    .dark .input-style { background-color: #374151; border-color: #4B5563; color: #F9FAFB; }
                    .input-style:focus { outline: none; --tw-ring-color: #3B82F6; box-shadow: 0 0 0 2px var(--tw-ring-color); }
                    .btn-primary { padding: 0.5rem 1rem; font-size: 0.875rem; font-weight: 500; color: white; background-color: #2563EB; border: 1px solid transparent; border-radius: 0.5rem; }
                    .btn-primary:hover { background-color: #1D4ED8; }
                    .btn-secondary { padding: 0.5rem 1rem; font-size: 0.875rem; font-weight: 500; color: #374151; background-color: white; border: 1px solid #D1D5DB; border-radius: 0.5rem; }
                    .dark .btn-secondary { color: #D1D5DB; background-color: #374151; border-color: #4B5563; }
                    .btn-secondary:hover { background-color: #F9FAFB; }
                    .dark .btn-secondary:hover { background-color: #4B5563; }
                `})]})})},q6=({mrfs:n,onAddNewMRF:e,onUpdateMRF:t,onDeleteMRF:r})=>{const[a,c]=L.useState(!1),[u,f]=L.useState(null),m=()=>{f(null),c(!0)},x=R=>{f(R),c(!0)},y=()=>{c(!1),f(null)},v=(R,O)=>{if(O){const H=n.find(ee=>ee.id===O);if(!H)return;const ae={...H,...R};t(ae)}else{const H={mrfNumber:R.mrfNumber,demandNumber:R.demandNumber,description:R.description,date:new Date().toISOString(),status:"Pending"};e(H)}y()},E=(R,O)=>{t({...R,status:O})},A=R=>{window.confirm("Are you sure you want to delete this MRF? This action cannot be undone.")&&r(R)},V=R=>{switch(R){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"Proceed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:"MRF Management"}),o.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:"Track and manage all Material Requisition Forms."})]}),o.jsxs("button",{onClick:m,className:"px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors shadow-md text-sm font-medium flex items-center space-x-2","aria-label":"Generate New MRF",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),o.jsx("span",{children:"Generate MRF"})]})]}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm text-left text-blue-600 dark:text-gray-400",children:[o.jsx("thead",{className:"text-xs text-blue-900 uppercase bg-purple-50 dark:bg-gray-700 dark:text-gray-400",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"px-6 py-3",children:"MRF No."}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:"Demand No."}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:"Date"}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:"Description"}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),o.jsx("th",{scope:"col",className:"px-6 py-3",children:o.jsx("span",{className:"sr-only",children:"Actions"})})]})}),o.jsx("tbody",{children:n.length>0?n.map(R=>o.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700 hover:bg-purple-50 dark:hover:bg-gray-600",children:[o.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-blue-900 dark:text-white whitespace-nowrap",children:R.mrfNumber}),o.jsx("td",{className:"px-6 py-4 text-blue-800",children:R.demandNumber}),o.jsx("td",{className:"px-6 py-4 text-blue-800",children:new Date(R.date).toLocaleDateString()}),o.jsx("td",{className:"px-6 py-4 text-blue-800",children:o.jsx("div",{className:"max-w-xs overflow-hidden whitespace-nowrap text-ellipsis",title:R.description,children:R.description||"-"})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("select",{value:R.status,onChange:O=>E(R,O.target.value),className:`border-none rounded-md text-xs font-semibold p-1 ${V(R.status)} focus:ring-2 focus:ring-blue-900`,"aria-label":`Status for MRF ${R.mrfNumber}`,children:[o.jsx("option",{value:"Pending",children:"Pending"}),o.jsx("option",{value:"Proceed",children:"Proceed"})]})}),o.jsx("td",{className:"px-6 py-4 text-right",children:o.jsxs("div",{className:"flex items-center justify-end space-x-4",children:[o.jsx("button",{onClick:()=>x(R),className:"font-medium text-blue-600 dark:text-blue-500 hover:underline",children:"Edit"}),o.jsx("button",{onClick:()=>A(R.id),className:"font-medium text-red-600 dark:text-red-500 hover:underline",children:"Delete"})]})})]},R.id)):o.jsx("tr",{children:o.jsxs("td",{colSpan:6,className:"text-center py-10 px-6",children:[o.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-white",children:"No MRFs Found"}),o.jsx("p",{className:"mt-1 text-sm text-blue-600 dark:text-gray-400",children:"There are no Material Requisition Forms yet."}),o.jsx("button",{onClick:m,className:"mt-4 px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors shadow-md text-sm font-medium",children:"Generate the First MRF"})]})})})]})})]}),o.jsx(F6,{isOpen:a,onClose:y,onSave:v,editingMRF:u})]})},B6=({inventory:n,employees:e})=>{const[t,r]=L.useState("user"),a=()=>{let x=[];const y=new Date().toISOString().slice(0,10);t==="user"?x=n.filter(A=>A.assignedTo).map(A=>{const V=e.find(R=>`${R.firstName} ${R.lastName}`===A.assignedTo);return{"Employee Name":A.assignedTo,Department:(V==null?void 0:V.department)||A.department||"-",Designation:(V==null?void 0:V.designation)||A.designation||"-","Asset Type":A.type,Brand:A.brand||"-",Model:A.model,"Serial Number":A.serialNumber||"-","Issue Date":A.issueDate||"-",Status:A.status}}).sort((A,V)=>A["Employee Name"].localeCompare(V["Employee Name"])):t==="equipment"?x=n.map(A=>({Type:A.type,Brand:A.brand||"-",Model:A.model,"Serial Number":A.serialNumber||"-",Status:A.status,"Assigned To":A.assignedTo||"Unassigned",Department:A.department||"-"})).sort((A,V)=>A.Type.localeCompare(V.Type)):t==="department"&&(x=n.filter(A=>A.department).map(A=>({Department:A.department,"Assigned Employee":A.assignedTo||"Unassigned","Asset Type":A.type,Model:A.model,"Serial Number":A.serialNumber||"-",Status:A.status})).sort((A,V)=>(A.Department||"").localeCompare(V.Department||"")));const v=XLSX.utils.json_to_sheet(x),E=XLSX.utils.book_new();XLSX.utils.book_append_sheet(E,v,"Report"),XLSX.writeFile(E,`Inventory_${t}_report_${y}.xlsx`)},c=()=>{window.print()},u=()=>{const x=new Map;n.filter(v=>v.assignedTo).forEach(v=>{if(!x.has(v.assignedTo)){const E=e.find(A=>`${A.firstName} ${A.lastName}`===v.assignedTo);x.set(v.assignedTo,{emp:E,assets:[]})}x.get(v.assignedTo).assets.push(v)});const y=Array.from(x.entries()).sort((v,E)=>v[0].localeCompare(E[0]));return o.jsxs("div",{className:"space-y-8",children:[y.map(([v,{emp:E,assets:A}])=>o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-slate-200 dark:border-gray-700 overflow-hidden break-inside-avoid",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-gray-700 px-6 py-4 border-b border-slate-200 dark:border-gray-600 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-blue-900 dark:text-white",children:v}),o.jsxs("p",{className:"text-sm text-blue-600 dark:text-gray-300",children:[(E==null?void 0:E.designation)||A[0].designation||"N/A"," - ",o.jsx("span",{className:"font-medium text-teal-600 dark:text-teal-400",children:(E==null?void 0:E.department)||A[0].department||"N/A"})]})]}),o.jsxs("div",{className:"text-sm font-medium bg-purple-100 text-purple-900 px-3 py-1 rounded-full",children:[A.length," Assets"]})]}),o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-gray-700",children:[o.jsx("thead",{className:"bg-white dark:bg-gray-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Type"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Model"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Serial"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Issue Date"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-gray-700",children:A.map(V=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-3 text-sm text-blue-900 dark:text-white font-medium",children:V.type}),o.jsxs("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300",children:[V.brand," ",V.model]}),o.jsx("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300 font-mono",children:V.serialNumber||"-"}),o.jsx("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300",children:V.issueDate||"-"})]},V.id))})]})]},v)),y.length===0&&o.jsx("p",{className:"text-center text-blue-600",children:"No assigned assets found."})]})},f=()=>{const x=new Map;n.forEach(v=>{x.has(v.type)||x.set(v.type,[]),x.get(v.type).push(v)});const y=Array.from(x.entries()).sort((v,E)=>v[0].localeCompare(E[0]));return o.jsx("div",{className:"space-y-8",children:y.map(([v,E])=>o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-slate-200 dark:border-gray-700 overflow-hidden break-inside-avoid",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-gray-700 px-6 py-4 border-b border-slate-200 dark:border-gray-600 flex justify-between items-center",children:[o.jsx("h3",{className:"text-lg font-bold text-blue-900 dark:text-white",children:v}),o.jsxs("div",{className:"text-sm font-medium bg-purple-100 text-purple-900 px-3 py-1 rounded-full",children:[E.length," Total"]})]}),o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-gray-700",children:[o.jsx("thead",{className:"bg-white dark:bg-gray-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Model"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Serial"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Assigned To"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-gray-700",children:E.map(A=>o.jsxs("tr",{children:[o.jsxs("td",{className:"px-6 py-3 text-sm text-blue-900 dark:text-white",children:[A.brand," ",A.model]}),o.jsx("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300 font-mono",children:A.serialNumber||"-"}),o.jsx("td",{className:"px-6 py-3 text-sm",children:o.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${A.status==="In Use"?"bg-green-100 text-green-800":A.status==="In Stock"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:A.status})}),o.jsx("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300",children:A.assignedTo||"-"})]},A.id))})]})]},v))})},m=()=>{const x=new Map;n.forEach(v=>{const E=v.department||"Unassigned";x.has(E)||x.set(E,[]),x.get(E).push(v)});const y=Array.from(x.entries()).sort((v,E)=>v[0]==="Unassigned"?1:E[0]==="Unassigned"?-1:v[0].localeCompare(E[0]));return o.jsx("div",{className:"space-y-8",children:y.map(([v,E])=>o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-slate-200 dark:border-gray-700 overflow-hidden break-inside-avoid",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-gray-700 px-6 py-4 border-b border-slate-200 dark:border-gray-600 flex justify-between items-center",children:[o.jsx("h3",{className:"text-lg font-bold text-blue-900 dark:text-white",children:v}),o.jsxs("div",{className:"text-sm font-medium bg-orange-100 text-orange-800 px-3 py-1 rounded-full",children:[E.length," Assets"]})]}),o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-gray-700",children:[o.jsx("thead",{className:"bg-white dark:bg-gray-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Assigned To"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Type"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Model"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-900 dark:text-gray-400 uppercase",children:"Serial"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-gray-700",children:E.map(A=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-3 text-sm text-blue-900 dark:text-white font-medium",children:A.assignedTo||"-"}),o.jsx("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300",children:A.type}),o.jsxs("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300",children:[A.brand," ",A.model]}),o.jsx("td",{className:"px-6 py-3 text-sm text-blue-600 dark:text-gray-300 font-mono",children:A.serialNumber||"-"})]},A.id))})]})]},v))})};return o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4 no-print",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-blue-900 dark:text-white",children:"Inventory Reports"}),o.jsx("p",{className:"text-sm text-blue-600 dark:text-gray-400",children:"Generate and export detailed inventory reports."})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[o.jsx("div",{className:"relative",children:o.jsxs("select",{value:t,onChange:x=>r(x.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-slate-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md shadow-sm bg-white dark:bg-gray-700 dark:border-gray-600 text-blue-900 dark:text-white",children:[o.jsx("option",{value:"user",children:"User-wise Report"}),o.jsx("option",{value:"equipment",children:"Equipment-wise Report"}),o.jsx("option",{value:"department",children:"Department-wise Report"})]})}),o.jsx("button",{onClick:c,className:"px-4 py-2 bg-white dark:bg-gray-700 border border-slate-300 dark:border-gray-600 rounded-lg text-blue-900 dark:text-gray-200 hover:bg-slate-50 dark:hover:bg-gray-600 text-sm font-medium transition-colors shadow-sm",children:"Print"}),o.jsxs("button",{onClick:a,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium transition-colors shadow-md flex items-center gap-2",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Excel"]})]})]}),o.jsxs("div",{className:"report-content",children:[o.jsxs("div",{className:"hidden print-block mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-center text-blue-900",children:"MASBOT ERP Inventory Report"}),o.jsxs("p",{className:"text-center text-lg mt-2 capitalize text-blue-800",children:[t,"-wise Breakdown"]}),o.jsx("p",{className:"text-center text-sm text-blue-600",children:new Date().toLocaleDateString()})]}),t==="user"&&u(),t==="equipment"&&f(),t==="department"&&m()]}),o.jsx("style",{children:`
                @media print {
                    .no-print { display: none !important; }
                    .print-block { display: block !important; }
                    body { background-color: white; }
                    .report-content { width: 100%; }
                    /* Ensure colors print */
                    * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
                }
                .print-block { display: none; }
            `})]})},z6=n=>{const e=n.currentUserEmail==="admin",t=L.useMemo(()=>{if(e)return"assets";if(!n.permissions)return null;if(_y.some(y=>{var v,E;return(E=(v=n.permissions)==null?void 0:v[y.id])==null?void 0:E.view}))return"assets";const x=Qf.find(y=>{var v,E;return y.id!=="assets"&&((E=(v=n.permissions)==null?void 0:v[y.id])==null?void 0:E.view)});return(x==null?void 0:x.id)||null},[e,n.permissions]),[r,a]=L.useState(t);L.useEffect(()=>{!r&&t&&a(t)},[t,r]);const c=L.useMemo(()=>{const m=new Map;return n.employees.forEach(x=>{m.set(x.email,{id:x.id,name:`${x.firstName} ${x.lastName}`,email:x.email,assets:[]})}),n.inventory.forEach(x=>{if(x.assignedTo){const y=Array.from(m.values()).find(v=>v.name===x.assignedTo);y&&y.assets.push({id:x.id,type:x.type,model:x.model})}}),Array.from(m.values())},[n.employees,n.inventory]);L.useMemo(()=>n.inventory.filter(m=>m.type==="Printer"),[n.inventory]);const u=()=>{if(!r)return o.jsxs("div",{className:"p-6 text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Access Denied"}),o.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"You do not have permission to view any pages in this module. Please contact an administrator."})]});switch(r){case"assets":return o.jsx(L6,{inventory:n.inventory,onAddNewAsset:n.onAddNewAsset,onUpdateAsset:n.onUpdateAsset,onDeleteAsset:n.onDeleteAsset,onResignEmployee:n.onResignEmployee,employees:n.employees,labs:n.labs,toners:n.toners,onAddSystem:n.onAddSystem,onUpdateSystem:n.onUpdateSystem,onDeleteSystem:n.onDeleteSystem,onSaveTonerModel:n.onSaveTonerModel,onDeleteTonerModel:n.onDeleteTonerModel,onMarkTonerEmpty:n.onMarkTonerEmpty,onMarkTonerFilled:n.onMarkTonerFilled,onUpdateKitchenStock:n.onUpdateKitchenStock,currentUserEmail:n.currentUserEmail,permissions:n.permissions,recipes:n.recipes,onCreateSCRequest:n.onCreateSCRequest});case"users":return o.jsx(U6,{users:c,onResignEmployee:n.onResignEmployee});case"mrf":return o.jsx(q6,{mrfs:n.mrfs,onAddNewMRF:n.onAddNewMRF,onUpdateMRF:n.onUpdateMRF,onDeleteMRF:n.onDeleteMRF});case"reports":return o.jsx(B6,{inventory:n.inventory,employees:n.employees});case"settings":return o.jsxs("div",{className:"p-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Settings"}),o.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Settings page is under construction."})]});default:return null}},f={assets:"Inventory",users:"Employees & Assigned Assets",labs:"Computer Labs",printers:"Printers & Toners",mrf:"MRF Management",reports:"Inventory Reports",settings:"Settings"};return o.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[o.jsx(S6,{currentPage:r,onNavigate:a,permissions:n.permissions,currentUserEmail:n.currentUserEmail,employees:n.employees}),o.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[o.jsxs("header",{className:"bg-purple-900 dark:bg-purple-950 border-b border-purple-800 dark:border-purple-900 h-16 flex-shrink-0 flex items-center justify-between px-6",children:[o.jsx("div",{className:"flex items-center gap-4",children:o.jsxs("button",{onClick:n.onBack,className:"flex items-center gap-2 text-sm font-medium text-purple-200 hover:text-white",children:[o.jsx(Dm,{className:"w-5 h-5"}),o.jsx("span",{children:"Home"})]})}),o.jsx("h1",{className:"text-lg font-bold text-white",children:r?f[r]:"Inventory Management"}),o.jsxs("button",{onClick:n.onLogout,className:"flex items-center gap-2 bg-purple-800 text-white px-4 py-2 rounded-lg shadow-sm hover:bg-purple-700 transition-colors","aria-label":"Logout",children:[o.jsx(Do,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})]}),o.jsx("div",{className:"flex-1 overflow-x-hidden overflow-y-auto",children:u()})]})]})},H6=({activePage:n,setActivePage:e,currentUserEmail:t})=>{const r=t==="admin";return o.jsxs("aside",{className:"w-64 bg-white border-r border-slate-200 flex flex-col flex-shrink-0",children:[o.jsx("div",{className:"h-16 flex items-center justify-center border-b border-slate-200 px-4",children:o.jsx(ma,{className:"h-8 w-auto"})}),o.jsxs("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:[o.jsx("div",{className:"text-xs font-semibold text-blue-900 uppercase tracking-wider mb-4 px-2",children:"Supply Chain"}),ZE.map(a=>{if(a.id==="sc_approvals"&&!r)return null;const c=a.icon,u=n===a.id;return o.jsxs("button",{onClick:()=>e(a.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors text-sm font-medium ${u?"bg-purple-50 text-purple-900":"text-blue-900 hover:bg-purple-50"}`,children:[o.jsx(c,{className:`w-5 h-5 ${u?"text-purple-900":"text-purple-400"}`}),o.jsx("span",{children:a.label})]},a.id)})]}),o.jsx("div",{className:"p-4 border-t border-slate-200",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"h-8 w-8 rounded-full bg-purple-100 flex items-center justify-center text-purple-900 font-bold text-xs",children:t.charAt(0).toUpperCase()}),o.jsxs("div",{className:"overflow-hidden",children:[o.jsx("p",{className:"text-sm font-medium text-blue-900 truncate",children:t}),o.jsx("p",{className:"text-xs text-blue-800 truncate",children:r?"CEO / Admin":"User"})]})]})})]})},G6=({inventory:n,currentUserEmail:e,employees:t,onCreateRequest:r,recipes:a=[]})=>{var S;const[c,u]=L.useState("item"),[f,m]=L.useState([]),[x,y]=L.useState(""),[v,E]=L.useState(""),[A,V]=L.useState(null),[R,O]=L.useState(""),[H,ae]=L.useState(1),ee=L.useMemo(()=>n.filter(N=>N.type==="Kitchen"&&N.model.toLowerCase().includes(v.toLowerCase())),[n,v]),z=(N,I=1)=>{m(D=>D.find(Te=>Te.item.id===N.id)?D.map(Te=>Te.item.id===N.id?{...Te,qty:Te.qty+I}:Te):[...D,{item:N,qty:I}])},F=(N,I)=>{m(f.map(D=>D.item.id===N?{...D,qty:Math.max(.001,I)}:D))},G=N=>{m(f.filter(I=>I.item.id!==N))},C=()=>{if(!R)return;const N=a.find(M=>M.id===R);if(!N)return;let I=0,D=[];N.ingredients.forEach(M=>{const Te=n.find(Fe=>Fe.model.toLowerCase()===M.name.toLowerCase()&&Fe.type==="Kitchen");if(Te){const Fe=M.quantity*H;z(Te,Fe),I++}else D.push(M.name)}),D.length>0?V({type:"error",text:`Added available ingredients, but could not find: ${D.join(", ")}`}):I>0&&V({type:"success",text:`Ingredients for ${H} portions of ${N.name} added to cart.`})},T=async()=>{if(f.length===0){V({type:"error",text:"Please add items to your request."});return}if(!x.trim()){V({type:"error",text:"Please specify a purpose or recipe for this request."});return}const N=t.find(D=>D.email===e),I={requesterName:N?`${N.firstName} ${N.lastName}`:e,requesterEmail:e,department:(N==null?void 0:N.department)||"Kitchen",date:new Date().toISOString(),purpose:x,status:"Pending Account Manager",items:f.map(D=>({inventoryId:D.item.id,name:D.item.model,quantityRequested:D.qty,unit:D.item.unit||"units"}))};await r(I),V({type:"success",text:"Request submitted successfully to Account Manager for approval."}),m([]),y("")};return o.jsx("div",{className:"max-w-6xl mx-auto space-y-6",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[o.jsx("h2",{className:"text-xl font-bold text-blue-900 mb-4",children:"New Stock Requisition"}),o.jsxs("div",{className:"flex space-x-4 mb-6 border-b border-slate-200",children:[o.jsx("button",{onClick:()=>u("item"),className:`pb-2 px-4 text-sm font-medium border-b-2 transition-colors ${c==="item"?"border-blue-900 text-blue-900":"border-transparent text-blue-800 hover:text-blue-900"}`,children:"Item Selection"}),o.jsx("button",{onClick:()=>u("dish"),className:`pb-2 px-4 text-sm font-medium border-b-2 transition-colors ${c==="dish"?"border-blue-900 text-blue-900":"border-transparent text-blue-800 hover:text-blue-900"}`,children:"Dish Selection"})]}),A&&o.jsx("div",{className:`p-4 mb-4 rounded-md text-sm ${A.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:A.text}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsx("div",{children:c==="item"?o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"text",placeholder:"Search ingredients...",className:"w-full px-4 py-2 border rounded-lg mb-4 focus:ring-2 focus:ring-blue-900 focus:outline-none placeholder-blue-300 text-blue-900",value:v,onChange:N=>E(N.target.value)}),o.jsx("div",{className:"h-96 overflow-y-auto border rounded-lg",children:o.jsxs("table",{className:"w-full text-sm text-left",children:[o.jsx("thead",{className:"bg-purple-50 text-blue-900 font-medium sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2",children:"Item"}),o.jsx("th",{className:"px-4 py-2",children:"Available"}),o.jsx("th",{className:"px-4 py-2",children:"Action"})]})}),o.jsx("tbody",{className:"divide-y",children:ee.map(N=>(f.some(I=>I.item.id===N.id),o.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[o.jsx("td",{className:"px-4 py-2 font-medium text-blue-900",children:N.model}),o.jsxs("td",{className:"px-4 py-2 text-blue-900",children:[N.quantity," ",N.unit]}),o.jsx("td",{className:"px-4 py-2",children:o.jsx("button",{onClick:()=>z(N),disabled:N.quantity===0,className:"text-xs bg-purple-900 text-white px-2 py-1 rounded hover:bg-purple-800 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"})})]},N.id)))})]})})]}):o.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-100 h-full",children:[o.jsx("h3",{className:"font-bold text-blue-900 mb-4",children:"Select a Dish"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Recipe / Dish"}),o.jsxs("select",{value:R,onChange:N=>O(N.target.value),className:"w-full border-blue-200 rounded-md focus:ring-blue-900 text-blue-900",children:[o.jsx("option",{value:"",children:"-- Select Dish --"}),a.map(N=>o.jsx("option",{value:N.id,children:N.name},N.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Number of Portions"}),o.jsx("input",{type:"number",min:"1",value:H,onChange:N=>ae(Math.max(1,parseInt(N.target.value)||1)),className:"w-full border-blue-200 rounded-md focus:ring-blue-900 text-blue-900"})]}),o.jsx("button",{onClick:C,disabled:!R,className:"w-full bg-blue-900 text-white py-2 rounded-md hover:bg-blue-800 disabled:bg-blue-300 transition-colors",children:"Add Ingredients to Cart"}),R&&o.jsxs("div",{className:"mt-4 p-4 bg-white rounded border border-blue-100",children:[o.jsx("h4",{className:"text-xs font-bold text-blue-900 uppercase mb-2",children:"Ingredients per portion:"}),o.jsx("ul",{className:"text-xs text-blue-900 space-y-1",children:(S=a.find(N=>N.id===R))==null?void 0:S.ingredients.map((N,I)=>o.jsxs("li",{className:"flex justify-between",children:[o.jsx("span",{children:N.name}),o.jsxs("span",{children:[N.quantity," ",N.unit]})]},I))})]})]})]})}),o.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200 flex flex-col",children:[o.jsx("h3",{className:"font-bold text-blue-900 mb-4",children:"Request Cart"}),o.jsx("div",{className:"flex-1 overflow-y-auto mb-4",children:f.length===0?o.jsx("p",{className:"text-blue-900 text-center py-10 italic",children:"No items selected."}):o.jsx("ul",{className:"space-y-2",children:f.map((N,I)=>o.jsxs("li",{className:"bg-white p-3 rounded shadow-sm flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-blue-900",children:N.item.model}),o.jsxs("p",{className:"text-xs text-blue-900",children:["Unit: ",N.item.unit]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"number",min:"0.001",step:"0.001",value:N.qty,onChange:D=>F(N.item.id,parseFloat(D.target.value)),className:"w-20 px-2 py-1 border rounded text-sm text-center text-blue-900"}),o.jsx("button",{onClick:()=>G(N.item.id),className:"text-red-500 hover:text-red-700",children:""})]})]},I))})}),o.jsxs("div",{className:"mt-auto",children:[o.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Purpose / Note"}),o.jsx("textarea",{value:x,onChange:N=>y(N.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-900 focus:outline-none mb-4 text-blue-900 placeholder-blue-300",rows:2,placeholder:"e.g. For Advanced Baking Class - Croissants"}),o.jsx("button",{onClick:T,className:"w-full bg-blue-900 text-white py-2 rounded-lg font-medium hover:bg-blue-800 transition-colors shadow-sm",children:"Submit Request"})]})]})]})]})})},K6=({requests:n,purchaseOrders:e,onAction:t,onPOAction:r})=>{const[a,c]=L.useState("requisitions"),u=n.filter(m=>m.status==="Pending Account Manager"),f=e.filter(m=>m.status==="Pending Account Manager");return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("div",{className:"flex justify-between items-center mb-6",children:o.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Account Manager Approvals"})}),o.jsx("div",{className:"border-b border-slate-200 mb-6",children:o.jsxs("nav",{className:"-mb-px flex space-x-8",children:[o.jsxs("button",{onClick:()=>c("requisitions"),className:`whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm ${a==="requisitions"?"border-purple-900 text-purple-900":"border-transparent text-blue-900 hover:text-blue-800 hover:border-slate-300"}`,children:["Requisitions (",u.length,")"]}),o.jsxs("button",{onClick:()=>c("pos"),className:`whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm ${a==="pos"?"border-purple-900 text-purple-900":"border-transparent text-blue-900 hover:text-blue-800 hover:border-slate-300"}`,children:["Purchase Orders (",f.length,")"]})]})}),a==="requisitions"&&o.jsx(o.Fragment,{children:u.length===0?o.jsx("div",{className:"bg-white p-12 rounded-lg shadow-sm text-center",children:o.jsx("p",{className:"text-blue-900 text-lg",children:"No pending requisitions awaiting approval."})}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:u.map(m=>o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-l-4 border-l-orange-400",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg text-blue-900",children:m.requesterName}),o.jsxs("p",{className:"text-sm text-blue-900",children:[m.department,"  ",new Date(m.date).toLocaleDateString()]})]}),o.jsx("span",{className:"bg-orange-100 text-orange-800 text-xs font-bold px-2 py-1 rounded uppercase tracking-wide",children:m.status})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Purpose:"}),o.jsxs("p",{className:"text-sm text-blue-900 bg-purple-50 p-2 rounded italic",children:['"',m.purpose,'"']})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Items Requested:"}),o.jsx("ul",{className:"text-sm space-y-1",children:m.items.map((x,y)=>o.jsxs("li",{className:"flex justify-between border-b border-slate-100 pb-1 last:border-0 hover:bg-purple-50 transition-colors text-blue-900",children:[o.jsx("span",{children:x.name}),o.jsxs("span",{className:"font-mono text-blue-900",children:[x.quantityRequested," ",x.unit]})]},y))})]}),o.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100",children:[o.jsx("button",{onClick:()=>t(m.id,"Approve"),className:"flex-1 bg-green-600 text-white py-2 rounded font-medium hover:bg-green-700 transition-colors",children:"Approve"}),o.jsx("button",{onClick:()=>{const x=prompt("Enter rejection reason:");x&&t(m.id,"Reject",x)},className:"flex-1 bg-red-50 text-red-600 border border-red-200 py-2 rounded font-medium hover:bg-red-100 transition-colors",children:"Reject"})]})]},m.id))})}),a==="pos"&&o.jsx(o.Fragment,{children:f.length===0?o.jsx("div",{className:"bg-white p-12 rounded-lg shadow-sm text-center",children:o.jsx("p",{className:"text-blue-900 text-lg",children:"No pending Purchase Orders awaiting approval."})}):o.jsx("div",{className:"grid grid-cols-1 gap-6",children:f.map(m=>o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-l-4 border-l-purple-500",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"font-bold text-lg text-blue-900",children:["PO #",m.poNumber]}),o.jsxs("p",{className:"text-sm text-blue-900",children:["Vendor: ",m.vendorName,"  ",new Date(m.date).toLocaleDateString()]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:["PKR ",m.totalAmount.toLocaleString()]}),o.jsx("span",{className:"bg-purple-100 text-purple-800 text-xs font-bold px-2 py-1 rounded uppercase tracking-wide",children:m.status})]})]}),o.jsx("div",{className:"mb-6",children:o.jsxs("table",{className:"w-full text-sm text-left",children:[o.jsx("thead",{className:"bg-purple-50 text-blue-900",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2",children:"Item"}),o.jsx("th",{className:"px-4 py-2 text-center",children:"Qty"}),o.jsx("th",{className:"px-4 py-2 text-right",children:"Unit Price"}),o.jsx("th",{className:"px-4 py-2 text-right",children:"Total"})]})}),o.jsx("tbody",{className:"divide-y border-t border-b",children:m.items.map((x,y)=>o.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[o.jsx("td",{className:"px-4 py-2 text-blue-900",children:x.itemName}),o.jsxs("td",{className:"px-4 py-2 text-center text-blue-900",children:[x.quantity," ",x.unit]}),o.jsx("td",{className:"px-4 py-2 text-right text-blue-900",children:x.unitPrice}),o.jsx("td",{className:"px-4 py-2 text-right text-blue-900",children:x.totalPrice})]},y))})]})}),o.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100 justify-end",children:[o.jsx("button",{onClick:()=>r(m.id,"Reject"),className:"px-6 py-2 bg-red-50 text-red-600 border border-red-200 rounded font-medium hover:bg-red-100 transition-colors",children:"Reject PO"}),o.jsx("button",{onClick:()=>r(m.id,"Approve"),className:"px-6 py-2 bg-green-600 text-white rounded font-medium hover:bg-green-700 transition-colors",children:"Approve PO"})]})]},m.id))})})]})},$6=({requests:n,purchaseRequests:e,purchaseOrders:t,inventory:r,employees:a,onIssue:c,onForwardToPurchase:u,onCreatePurchaseRequest:f,onCreateSCRequest:m,onGRN:x,currentUserEmail:y,onAddNewAsset:v,onUpdateAsset:E,onDeleteAsset:A,onIssueAsset:V,onReturnAsset:R,recipes:O=[]})=>{const[H,ae]=L.useState("consumables"),[ee,z]=L.useState(""),[F,G]=L.useState(!1),[C,T]=L.useState(null),[S,N]=L.useState({grnNumber:"",remarks:""}),[I,D]=L.useState(!1),[M,Te]=L.useState(null),[Fe,Y]=L.useState(!1),le=L.useRef(null),ye=L.useMemo(()=>{const ie=new Map;return r.forEach(De=>{De.id&&ie.set(De.id,De)}),Array.from(ie.values())},[r]),Re=L.useMemo(()=>ye.filter(ie=>ie.type==="Kitchen"&&!["Oven","Mixer","Fridge","Chiller","Blender","Stove","Microwave","Equipment","Table","Station","Range","Grinder","Dishwasher"].some(De=>ie.model.includes(De)||ie.itemName&&ie.itemName.includes(De)||ie.subCategory&&(ie.subCategory.includes("Equipment")||ie.subCategory.includes("Furniture")||ie.subCategory.includes("Tools")))),[ye]),qe=L.useMemo(()=>ye.filter(ie=>ie.type==="Kitchen"&&["Oven","Mixer","Fridge","Chiller","Blender","Stove","Microwave","Equipment","Tool","Table","Station","Range","Grinder","Dishwasher"].some(De=>ie.model.includes(De)||ie.itemName&&ie.itemName.includes(De)||ie.subCategory&&(ie.subCategory.includes("Equipment")||ie.subCategory.includes("Furniture")||ie.subCategory.includes("Tools")))),[ye]),P=L.useMemo(()=>{const ie=ye.length,De=ye.filter(zt=>(zt.quantity||0)<=5).length,Tt=n.filter(zt=>zt.status==="Pending Store").length;return{totalItems:ie,lowStockCount:De,pendingReqsCount:Tt}},[ye,n]),$=L.useMemo(()=>{const ie=ee.toLowerCase();return Re.filter(De=>De.model.toLowerCase().includes(ie)||De.itemCode&&De.itemCode.toLowerCase().includes(ie))},[Re,ee]),ce=L.useMemo(()=>{const ie=ee.toLowerCase();return qe.filter(De=>De.model.toLowerCase().includes(ie)||De.itemName&&De.itemName.toLowerCase().includes(ie)||De.itemCode&&De.itemCode.toLowerCase().includes(ie)||De.assignedTo&&De.assignedTo.toLowerCase().includes(ie)||De.location&&De.location.toLowerCase().includes(ie)||De.material&&De.material.toLowerCase().includes(ie))},[qe,ee]),ve=n.filter(ie=>ie.status==="Pending Store"),we=t.filter(ie=>ie.status==="Approved"),q=async ie=>{var zt;const De=(zt=ie.target.files)==null?void 0:zt[0];if(!De)return;Y(!0);const Tt=new FileReader;Tt.onload=async Ws=>{var li;try{const Xs=new Uint8Array((li=Ws.target)==null?void 0:li.result),Os=XLSX.read(Xs,{type:"array"}),Vs=Os.SheetNames[0],Ls=Os.Sheets[Vs],vs=XLSX.utils.sheet_to_json(Ls).map(Mt=>{const Ht=Rt=>{const Ct=Object.keys(Mt).find(is=>Rt.includes(is.toLowerCase().replace(/ /g,"").replace(/_/g,"")));return Ct?Mt[Ct]:void 0};return{itemCode:String(Ht(["itemcode","assetcode","code"])||""),itemName:String(Ht(["itemname","name","assetname"])||""),model:String(Ht(["model","itemname","name"])||""),type:"Kitchen",subCategory:String(Ht(["subcategory","category","type"])||"Kitchen Asset"),material:String(Ht(["material"])||""),quantity:Number(Ht(["quantity","qty"])||1),unit:String(Ht(["unit","uom"])||"Pcs"),condition:String(Ht(["condition","status"])||"New"),purchaseDate:String(Ht(["purchasedate","date"])||""),cost:String(Ht(["purchaseprice","cost","price"])||"0"),location:String(Ht(["location","assignedl","storage"])||"Store"),assignedTo:String(Ht(["assignedto","responsibleperson","user"])||""),remarks:String(Ht(["remarks","note","others"])||""),status:Ht(["assignedto","responsibleperson","user"])?"In Use":"In Stock",assignedToDepartment:"",specs:{cpu:"",ram:"",storage:"",gpu:"",lcd:""}}});vs.length>0&&(v(vs),alert(`Successfully imported ${vs.length} kitchen assets.`))}catch(Xs){console.error(Xs),alert("Failed to parse file. Please ensure it follows the correct format.")}finally{Y(!1),le.current&&(le.current.value="")}},Tt.readAsArrayBuffer(De)},me=async ie=>{const De=prompt("Enter Chef/Employee name to issue this equipment:");if(!De)return;if(!a.some(zt=>`${zt.firstName} ${zt.lastName}`.toLowerCase()===De.toLowerCase())){alert("Employee not found in records.");return}try{await V(ie,De),alert("Equipment issued to "+De)}catch(zt){alert(zt.message)}},Ee=async ie=>{window.confirm("Confirm return of this equipment to main store stock?")&&(await R(ie),alert("Equipment returned to stock."))},ke=()=>{Te(null),D(!0)},$e=async ie=>{window.confirm("Issue these consumables now? Stock will be updated automatically.")&&(await c(ie),alert("Materials issued to Kitchen."))},Xt=(ie,De)=>{De&&ie.length===1?E({...ie[0],id:De}):v(ie),D(!1),Te(null)};return o.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Store Management & Fulfillment"}),o.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Managing Kitchen Inventory (Ration) and Fixed Assets (Professional Equipment)."})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"file",ref:le,onChange:q,accept:".xlsx, .xls, .csv",className:"hidden"}),o.jsxs("button",{onClick:()=>{var ie;return(ie=le.current)==null?void 0:ie.click()},disabled:Fe,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium text-sm flex items-center gap-2 shadow-sm transition-all active:scale-95 disabled:bg-slate-400",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Fe?"Processing...":"Upload Inventory"]}),o.jsxs("button",{onClick:ke,className:"px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 font-medium text-sm flex items-center gap-2 shadow-sm transition-all active:scale-95",children:[o.jsx("span",{className:"text-lg font-bold",children:"+"}),o.jsx("span",{children:"Add Kitchen Asset"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex items-center gap-4",children:[o.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Total Inventory Items"}),o.jsx("p",{className:"text-2xl font-black text-blue-900",children:P.totalItems})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex items-center gap-4",children:[o.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Low Stock Alerts"}),o.jsx("p",{className:"text-2xl font-black text-red-600",children:P.lowStockCount})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex items-center gap-4",children:[o.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-purple-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Pending Requisitions"}),o.jsx("p",{className:"text-2xl font-black text-purple-900",children:P.pendingReqsCount})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden min-h-[600px]",children:[o.jsx("div",{className:"flex border-b border-slate-200 bg-slate-50 p-1 gap-1",children:[{id:"consumables",label:"Consumables (Ration)",count:Re.length},{id:"fixedAssets",label:"Fixed Assets (Machinery)",count:qe.length},{id:"fulfillment",label:"Pending Fulfillments",count:ve.length},{id:"receiving",label:"PO Receiving (GRN)",count:we.length}].map(ie=>o.jsxs("button",{onClick:()=>{ae(ie.id),z("")},className:`flex-1 py-2.5 px-4 text-sm font-bold rounded-lg transition-all ${H===ie.id?"bg-purple-900 text-white shadow-md scale-[1.02]":"text-blue-900 hover:bg-white hover:shadow-sm"}`,children:[ie.label," ",o.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-[10px] ${H===ie.id?"bg-purple-700":"bg-slate-200"}`,children:ie.count})]},ie.id))}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"mb-6 relative max-w-md",children:[o.jsx("input",{type:"text",placeholder:`Search ${H==="fixedAssets"?"Assets, Codes, Materials...":H}...`,className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-900 outline-none shadow-sm",value:ee,onChange:ie=>z(ie.target.value)}),o.jsx("svg",{className:"w-5 h-5 absolute left-3 top-2.5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),H==="consumables"&&o.jsx("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:o.jsxs("table",{className:"min-w-full text-sm text-left divide-y divide-slate-200",children:[o.jsx("thead",{className:"bg-purple-50 text-blue-900 font-bold uppercase text-[10px] tracking-wider",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 border-r",children:"Item Code"}),o.jsx("th",{className:"px-6 py-4 border-r",children:"Ingredient Name"}),o.jsx("th",{className:"px-6 py-4 border-r text-center",children:"Available Stock"}),o.jsx("th",{className:"px-6 py-4 border-r",children:"Unit"}),o.jsx("th",{className:"px-6 py-4 border-r",children:"Storage Location"}),o.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:$.map(ie=>o.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 font-mono text-xs text-blue-800 border-r",children:ie.itemCode||"-"}),o.jsx("td",{className:"px-6 py-4 font-bold text-blue-900 border-r",children:ie.model}),o.jsx("td",{className:"px-6 py-4 text-center border-r",children:o.jsx("span",{className:`px-3 py-1 rounded-full font-bold ${ie.quantity<=5?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:ie.quantity||0})}),o.jsx("td",{className:"px-6 py-4 text-blue-800 border-r",children:ie.unit||"-"}),o.jsx("td",{className:"px-6 py-4 text-blue-800 border-r",children:ie.location||"-"}),o.jsx("td",{className:"px-6 py-4 text-right",children:o.jsx("button",{onClick:()=>{Te(ie),D(!0)},className:"text-purple-900 hover:underline font-bold",children:"Edit"})})]},ie.id))})]})}),H==="fixedAssets"&&o.jsx("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:o.jsxs("table",{className:"min-w-full text-[11px] text-left divide-y divide-slate-200 whitespace-nowrap",children:[o.jsx("thead",{className:"bg-blue-50 text-blue-900 font-bold uppercase tracking-wider",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-3 border-r",children:"Sr No"}),o.jsx("th",{className:"px-3 py-3 border-r",children:"Asset Code"}),o.jsx("th",{className:"px-3 py-3 border-r",children:"Item Name"}),o.jsx("th",{className:"px-3 py-3 border-r",children:"Category"}),o.jsx("th",{className:"px-3 py-3 border-r",children:"Material"}),o.jsx("th",{className:"px-3 py-3 border-r text-center",children:"Quantity"}),o.jsx("th",{className:"px-3 py-3 border-r",children:"Unit (pcs/..)"}),o.jsx("th",{className:"px-3 py-3 border-r",children:"Condition"}),o.jsx("th",{className:"px-3 py-3 border-r",children:"Purchase Date"}),o.jsx("th",{className:"px-3 py-3 border-r",children:"Purchase Price"}),o.jsx("th",{className:"px-3 py-3 border-r",children:"Assigned L"}),o.jsx("th",{className:"px-3 py-3 border-r",children:"Responsible Person"}),o.jsx("th",{className:"px-3 py-3 border-r",children:"Remarks"}),o.jsx("th",{className:"px-3 py-3 text-right",children:"Operation"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100 bg-white",children:ce.map((ie,De)=>o.jsxs("tr",{className:"hover:bg-blue-50 transition-colors",children:[o.jsx("td",{className:"px-3 py-3 border-r text-slate-500 font-medium text-center",children:De+1}),o.jsx("td",{className:"px-3 py-3 border-r font-mono text-blue-900 font-bold",children:ie.itemCode||"-"}),o.jsx("td",{className:"px-3 py-3 border-r font-bold text-blue-900",children:ie.itemName||ie.model}),o.jsx("td",{className:"px-3 py-3 border-r text-blue-800",children:ie.subCategory||ie.type}),o.jsx("td",{className:"px-3 py-3 border-r text-blue-800 font-medium",children:ie.material||"-"}),o.jsx("td",{className:"px-3 py-3 border-r text-center font-bold text-blue-900",children:ie.quantity||0}),o.jsx("td",{className:"px-3 py-3 border-r text-blue-800",children:ie.unit||"Pcs"}),o.jsx("td",{className:"px-3 py-3 border-r",children:o.jsx("span",{className:`px-2 py-0.5 rounded font-bold uppercase text-[9px] ${ie.condition==="Excellent"||ie.condition==="New"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ie.condition||"Good"})}),o.jsx("td",{className:"px-3 py-3 border-r text-blue-800",children:ie.purchaseDate||"-"}),o.jsxs("td",{className:"px-3 py-3 border-r text-blue-900 font-mono",children:["PKR ",ie.cost||"0"]}),o.jsx("td",{className:"px-3 py-3 border-r text-blue-800 font-medium",children:ie.location||"Store"}),o.jsx("td",{className:"px-3 py-3 border-r text-blue-900 font-bold underline decoration-blue-200",children:ie.assignedTo||"In Store"}),o.jsx("td",{className:"px-3 py-3 border-r text-blue-600 italic max-w-xs truncate",title:ie.remarks,children:ie.remarks||"-"}),o.jsxs("td",{className:"px-3 py-3 text-right space-x-2",children:[ie.status==="In Stock"?o.jsx("button",{onClick:()=>me(ie.id),className:"text-green-600 font-bold hover:underline",children:"Issue"}):o.jsx("button",{onClick:()=>Ee(ie.id),className:"text-orange-600 font-bold hover:underline",children:"Return"}),o.jsx("button",{onClick:()=>{Te(ie),D(!0)},className:"text-blue-900 font-bold hover:underline",children:"Edit"})]})]},ie.id))})]})}),H==="fulfillment"&&o.jsx("div",{className:"space-y-4",children:ve.length===0?o.jsx("p",{className:"text-center py-20 text-slate-400 italic",children:"No approved requisitions to fulfill at this moment."}):ve.map(ie=>o.jsxs("div",{className:"p-5 bg-purple-50 border border-purple-200 rounded-xl flex justify-between items-center group hover:bg-purple-100 transition-all shadow-sm",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h3",{className:"font-bold text-lg text-blue-900",children:ie.requesterName}),o.jsx("span",{className:"text-[10px] font-bold bg-white border border-purple-300 text-purple-900 px-2 py-0.5 rounded uppercase",children:ie.department})]}),o.jsxs("p",{className:"text-sm text-blue-800 mb-3 font-medium italic",children:["Purpose: ",ie.purpose]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:ie.items.map((De,Tt)=>o.jsxs("span",{className:"bg-white px-2 py-1 rounded border border-purple-200 text-xs font-mono text-blue-900 shadow-xs",children:[De.name,": ",De.quantityRequested," ",De.unit]},Tt))})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>$e(ie.id),className:"bg-purple-900 text-white px-6 py-3 rounded-lg font-bold hover:bg-purple-800 shadow-sm transition-transform active:scale-95",children:"Issue Materials"}),o.jsx("button",{onClick:()=>u(ie.id),className:"bg-white text-purple-900 border border-purple-900 px-4 py-3 rounded-lg font-bold hover:bg-purple-50",children:"Market Buy"})]})]},ie.id))}),H==="receiving"&&o.jsx("div",{className:"space-y-4",children:we.length===0?o.jsx("p",{className:"text-center py-20 text-slate-400 italic",children:"No approved Purchase Orders to receive."}):we.map(ie=>o.jsxs("div",{className:"p-5 bg-green-50 border border-green-200 rounded-xl flex justify-between items-center group shadow-sm",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"font-bold text-lg text-blue-900",children:["PO #",ie.poNumber]}),o.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Vendor: ",ie.vendorName,"  Value: PKR ",ie.totalAmount.toLocaleString()]}),o.jsxs("p",{className:"text-xs text-blue-700 mt-2 font-mono",children:["Items: ",ie.items.map(De=>`${De.itemName} (${De.quantity})`).join(", ")]})]}),o.jsx("button",{onClick:()=>{T(ie),N({grnNumber:`GRN-${Date.now().toString().slice(-4)}`,remarks:"Received in good condition."}),G(!0)},className:"bg-green-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-green-700 shadow-sm transition-transform active:scale-95",children:"Accept Delivery (GRN)"})]},ie.id))})]})]}),F&&C&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",onClick:()=>G(!1),children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8",onClick:ie=>ie.stopPropagation(),children:[o.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-2",children:"Generate GRN"}),o.jsxs("p",{className:"text-sm text-blue-600 mb-6 font-medium",children:["Accepting items for PO #",C.poNumber]}),o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-blue-900 uppercase block mb-1",children:"GRN Ref Number"}),o.jsx("input",{type:"text",value:S.grnNumber,onChange:ie=>N({...S,grnNumber:ie.target.value}),className:"w-full border border-slate-300 rounded-lg p-2.5 text-blue-900 focus:ring-2 focus:ring-green-500 outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-blue-900 uppercase block mb-1",children:"Remarks"}),o.jsx("textarea",{value:S.remarks,onChange:ie=>N({...S,remarks:ie.target.value}),className:"w-full border border-slate-300 rounded-lg p-2.5 text-blue-900 focus:ring-2 focus:ring-green-500 outline-none",rows:3})]}),o.jsx("button",{onClick:async()=>{await x(C.id,S),G(!1),alert("Inventory successfully updated.")},className:"w-full bg-green-600 text-white py-3 rounded-xl font-bold hover:bg-green-700 shadow-lg mt-2 transition-all",children:"Confirm Receipt"})]})]})}),o.jsx(Dd,{isOpen:I,onClose:()=>D(!1),onSave:Xt,editingAsset:M,employees:a,initialType:"Kitchen"})]})},Q6=({requests:n,currentUserEmail:e})=>{const t=n.filter(a=>a.requesterEmail===e||e==="admin"),r=a=>{switch(a){case"Pending Account Manager":return"bg-yellow-100 text-yellow-800";case"Pending Store":return"bg-blue-100 text-blue-800";case"Issued":return"bg-green-100 text-green-800";case"Rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-6",children:"My Requests"}),o.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm text-left",children:[o.jsx("thead",{className:"bg-purple-50 text-blue-900 font-bold uppercase",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4",children:"Date"}),o.jsx("th",{className:"px-6 py-4",children:"Purpose"}),o.jsx("th",{className:"px-6 py-4",children:"Items Count"}),o.jsx("th",{className:"px-6 py-4",children:"Status"}),o.jsx("th",{className:"px-6 py-4",children:"Remarks"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-200",children:t.length>0?t.map(a=>o.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 text-blue-900",children:new Date(a.date).toLocaleDateString()}),o.jsx("td",{className:"px-6 py-4 font-medium text-blue-900",children:a.purpose}),o.jsx("td",{className:"px-6 py-4 text-blue-900",children:a.items.length}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${r(a.status)}`,children:a.status})}),o.jsx("td",{className:"px-6 py-4 text-blue-900 italic",children:a.status==="Rejected"?a.rejectionReason:a.status==="Issued"?`Issued on ${new Date(a.issuedDate).toLocaleDateString()}`:"-"})]},a.id)):o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-blue-900",children:"No requests found."})})})]})})]})},Y6=({requests:n,purchaseRequests:e,vendors:t,purchaseOrders:r,onCreatePO:a,onUpdatePO:c,onDeletePO:u,currentUserEmail:f})=>{const[m,x]=L.useState("pending"),[y,v]=L.useState(null),[E,A]=L.useState({vendorId:"",price:0}),[V,R]=L.useState(!1),[O,H]=L.useState(null),[ae,ee]=L.useState({vendorId:"",totalAmount:0,status:"Pending Account Manager"}),z=n.filter(S=>S.status==="Forwarded to Purchase"),F=async()=>{if(!y||!E.vendorId)return;const S=t.find(D=>D.id===E.vendorId);if(!S)return;const N=E.price,I={poNumber:`PO-${Date.now().toString().slice(-6)}`,originalRequestId:y.id,vendorId:S.id,vendorName:S.name,date:new Date().toISOString(),status:"Pending Account Manager",generatedBy:f,totalAmount:N,items:y.items.map(D=>({itemName:D.name,quantity:D.quantityRequested,unit:D.unit,unitPrice:N/y.items.length,totalPrice:N/y.items.length,inventoryId:D.inventoryId}))};await a(I),v(null),A({vendorId:"",price:0}),alert("Purchase Order created and sent to Account Manager for approval.")},G=S=>{H(S),ee({vendorId:S.vendorId,totalAmount:S.totalAmount,status:S.status}),R(!0)},C=async S=>{if(S.preventDefault(),!O||!c)return;const N=t.find(I=>I.id===ae.vendorId);await c(O.id,{vendorId:ae.vendorId,vendorName:(N==null?void 0:N.name)||O.vendorName,totalAmount:ae.totalAmount,status:ae.status}),R(!1),H(null)},T=S=>{switch(S){case"Pending Account Manager":return"bg-yellow-100 text-yellow-800";case"Approved":return"bg-blue-100 text-blue-800";case"Received":return"bg-green-100 text-green-800";case"Rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return o.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex justify-between items-center",children:o.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Purchase Department"})}),o.jsx("div",{className:"border-b border-slate-200",children:o.jsxs("nav",{className:"-mb-px flex space-x-8",children:[o.jsxs("button",{onClick:()=>x("pending"),className:`whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm ${m==="pending"?"border-blue-900 text-blue-900":"border-transparent text-blue-900 hover:text-blue-800 hover:border-slate-300"}`,children:["Process Requests (",z.length,")"]}),o.jsx("button",{onClick:()=>x("history"),className:`whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm ${m==="history"?"border-blue-900 text-blue-900":"border-transparent text-blue-900 hover:text-blue-800 hover:border-slate-300"}`,children:"Purchase History"})]})}),m==="pending"&&o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2",children:[o.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Requests to Process"}),z.length===0?o.jsx("div",{className:"bg-white p-8 rounded-lg shadow-sm text-center text-blue-900",children:"No requests forwarded from Store."}):o.jsx("div",{className:"space-y-4",children:z.map(S=>o.jsxs("div",{className:`bg-white p-4 rounded-lg shadow-sm border-2 cursor-pointer transition-all ${(y==null?void 0:y.id)===S.id?"border-blue-900 ring-2 ring-blue-100":"border-transparent hover:border-slate-300"}`,onClick:()=>v(S),children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h4",{className:"font-bold text-blue-900",children:S.purpose}),o.jsx("span",{className:"text-xs font-mono text-blue-900",children:new Date(S.date).toLocaleDateString()})]}),o.jsxs("p",{className:"text-sm text-blue-900 mb-2",children:["From: ",S.requesterName," (",S.department,")"]}),o.jsxs("div",{className:"bg-purple-50 p-2 rounded text-xs text-blue-900",children:[o.jsx("strong",{children:"Items:"})," ",S.items.map(N=>`${N.name} (${N.quantityRequested} ${N.unit})`).join(", ")]})]},S.id))})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm h-fit sticky top-6",children:[o.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-4 border-b pb-2",children:"Create Purchase Order"}),y?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Selected Request"}),o.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-100 rounded text-sm text-blue-900",children:[y.purpose," (",y.items.length," items)"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Date"}),o.jsx("input",{type:"text",value:new Date().toLocaleDateString(),disabled:!0,className:"w-full bg-slate-100 border rounded p-2 text-blue-900 cursor-not-allowed"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Select Vendor"}),o.jsxs("select",{value:E.vendorId,onChange:S=>A({...E,vendorId:S.target.value}),className:"w-full border rounded p-2 focus:ring-blue-900 text-blue-900",children:[o.jsx("option",{value:"",children:"-- Choose Vendor --"}),t.map(S=>o.jsx("option",{value:S.id,children:S.name},S.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Total Estimated Cost (PKR)"}),o.jsx("input",{type:"number",min:"0",value:E.price,onChange:S=>A({...E,price:parseFloat(S.target.value)}),className:"w-full border rounded p-2 focus:ring-blue-900 text-blue-900"})]}),o.jsx("button",{onClick:F,disabled:!E.vendorId||E.price<=0,className:"w-full bg-blue-900 text-white py-2 rounded font-medium hover:bg-blue-800 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors",children:"Generate PO for Approval"})]}):o.jsx("p",{className:"text-blue-900 text-sm text-center py-10",children:"Select a request from the list to generate a Purchase Order."})]})]}),m==="history"&&o.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm text-left",children:[o.jsx("thead",{className:"bg-purple-50 text-blue-900 uppercase font-bold",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4",children:"Date"}),o.jsx("th",{className:"px-6 py-4",children:"PO Number"}),o.jsx("th",{className:"px-6 py-4",children:"Vendor"}),o.jsx("th",{className:"px-6 py-4",children:"Items"}),o.jsx("th",{className:"px-6 py-4 text-right",children:"Total Amount"}),o.jsx("th",{className:"px-6 py-4",children:"Status"}),o.jsx("th",{className:"px-6 py-4",children:"GRN Info"}),o.jsx("th",{className:"px-6 py-4 text-center",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-200",children:r.length>0?r.map(S=>{var N;return o.jsxs("tr",{className:"hover:bg-purple-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 text-blue-900",children:new Date(S.date).toLocaleDateString()}),o.jsx("td",{className:"px-6 py-4 font-mono font-medium text-blue-900",children:S.poNumber}),o.jsx("td",{className:"px-6 py-4 text-blue-900",children:S.vendorName}),o.jsx("td",{className:"px-6 py-4 text-blue-900",children:o.jsxs("div",{className:"max-w-xs truncate",title:S.items.map(I=>I.itemName).join(", "),children:[S.items.length," items (",(N=S.items[0])==null?void 0:N.itemName,"...)"]})}),o.jsxs("td",{className:"px-6 py-4 text-right font-bold text-blue-900",children:["PKR ",S.totalAmount.toLocaleString()]}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${T(S.status)}`,children:S.status})}),o.jsx("td",{className:"px-6 py-4 text-xs text-blue-900",children:S.grnNumber?o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-green-700",children:S.grnNumber}),o.jsx("p",{children:new Date(S.grnDate).toLocaleDateString()})]}):"-"}),o.jsx("td",{className:"px-6 py-4 text-center",children:o.jsxs("div",{className:"flex justify-center gap-2",children:[o.jsx("button",{onClick:()=>G(S),className:"text-blue-900 hover:text-blue-950 text-xs font-medium",title:"Edit PO",disabled:S.status==="Received",children:"Edit"}),o.jsx("span",{className:"text-blue-300",children:"|"}),o.jsx("button",{onClick:()=>u&&u(S.id),className:"text-red-600 hover:text-red-800 text-xs font-medium",title:"Delete PO",children:"Delete"})]})})]},S.id)}):o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"text-center py-10 text-blue-900",children:"No purchase history available."})})})]})}),V&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:()=>R(!1),children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",onClick:S=>S.stopPropagation(),children:[o.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-4 border-b pb-2",children:"Edit Purchase Order"}),o.jsxs("form",{onSubmit:C,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Vendor"}),o.jsx("select",{value:ae.vendorId,onChange:S=>ee({...ae,vendorId:S.target.value}),className:"w-full border rounded p-2 focus:ring-blue-900 text-blue-900",children:t.map(S=>o.jsx("option",{value:S.id,children:S.name},S.id))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Total Amount (PKR)"}),o.jsx("input",{type:"number",min:"0",value:ae.totalAmount,onChange:S=>ee({...ae,totalAmount:parseFloat(S.target.value)}),className:"w-full border rounded p-2 focus:ring-blue-900 text-blue-900"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Status"}),o.jsxs("select",{value:ae.status,onChange:S=>ee({...ae,status:S.target.value}),className:"w-full border rounded p-2 focus:ring-blue-900 text-blue-900",children:[o.jsx("option",{value:"Pending Account Manager",children:"Pending Account Manager"}),o.jsx("option",{value:"Approved",children:"Approved"}),o.jsx("option",{value:"Rejected",children:"Rejected"}),o.jsx("option",{value:"Received",children:"Received"})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>R(!1),className:"px-4 py-2 border rounded text-blue-900 hover:bg-slate-50",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-900 text-white rounded hover:bg-blue-800",children:"Save Changes"})]})]})]})})]})},W6=n=>{const[e,t]=L.useState("sc_my_requests"),r=n.employees.find(x=>x.email===n.currentUserEmail),a=n.currentUserEmail==="admin",c=a||(r==null?void 0:r.role)==="HOD"&&(r==null?void 0:r.department)==="Finance"||(r==null?void 0:r.designation)==="Account Manager",u=a||(r==null?void 0:r.role)==="HOD"||(r==null?void 0:r.department)==="Store",f=a||(r==null?void 0:r.department)==="Finance"||(r==null?void 0:r.department)==="Purchase",m=()=>{switch(e){case"sc_requests":return o.jsx(G6,{inventory:n.inventory,currentUserEmail:n.currentUserEmail,employees:n.employees,onCreateRequest:n.onCreateRequest,recipes:n.recipes});case"sc_approvals":return c?o.jsx(K6,{requests:n.requests,purchaseOrders:n.purchaseOrders,onAction:n.onActionRequest,onPOAction:n.onPOAction}):o.jsx("div",{className:"p-6 text-center text-blue-900",children:"Access Denied. Account Managers Only."});case"sc_store":return u?o.jsx($6,{requests:n.requests,purchaseRequests:n.purchaseRequests,purchaseOrders:n.purchaseOrders,inventory:n.inventory,employees:n.employees,recipes:n.recipes,onIssue:n.onIssueRequest,onForwardToPurchase:n.onForwardToPurchase,onCreatePurchaseRequest:n.onCreatePurchaseRequest,onCreateSCRequest:n.onCreateRequest,onGRN:n.onGRN,currentUserEmail:n.currentUserEmail,onAddNewAsset:n.onAddNewAsset,onUpdateAsset:n.onUpdateAsset,onDeleteAsset:n.onDeleteAsset,onIssueAsset:n.onIssueAsset,onReturnAsset:n.onReturnAsset}):o.jsx("div",{className:"p-6 text-center text-blue-900",children:"Access Denied. Store Managers Only."});case"sc_purchase":return f?o.jsx(Y6,{requests:n.requests,purchaseRequests:n.purchaseRequests,vendors:n.vendors,purchaseOrders:n.purchaseOrders,onCreatePO:n.onCreatePO,onUpdatePO:n.onUpdatePO,onDeletePO:n.onDeletePO,currentUserEmail:n.currentUserEmail}):o.jsx("div",{className:"p-6 text-center text-blue-900",children:"Access Denied. Purchase Department Only."});case"sc_my_requests":default:return o.jsx(Q6,{requests:n.requests,currentUserEmail:n.currentUserEmail})}};return o.jsxs("div",{className:"flex h-screen bg-slate-100",children:[o.jsx(H6,{activePage:e,setActivePage:t,currentUserEmail:n.currentUserEmail}),o.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[o.jsxs("header",{className:"bg-purple-900 border-b border-purple-800 h-16 flex-shrink-0 flex items-center justify-between px-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("button",{onClick:n.onBack,className:"flex items-center gap-2 text-sm font-medium text-purple-200 hover:text-white",children:[o.jsx(Dm,{className:"w-5 h-5"}),o.jsx("span",{children:"Home"})]}),o.jsx("div",{className:"h-6 w-px bg-purple-700 mx-2"}),o.jsx("h1",{className:"text-lg font-bold text-white",children:"The Chef's Academy Supply Chain"})]}),o.jsxs("button",{onClick:n.onLogout,className:"flex items-center gap-2 bg-purple-800 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:[o.jsx(Do,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})]}),o.jsx("div",{className:"flex-1 overflow-x-hidden overflow-y-auto p-6",children:m()})]})]})},X6=({activePage:n,setActivePage:e,currentUserEmail:t})=>o.jsxs("aside",{className:"w-64 bg-white border-r border-slate-200 flex flex-col flex-shrink-0",children:[o.jsx("div",{className:"h-16 flex items-center justify-center border-b border-slate-200 px-4",children:o.jsx(ma,{className:"h-8 w-auto"})}),o.jsxs("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:[o.jsx("div",{className:"text-xs font-semibold text-blue-900 uppercase tracking-wider mb-4 px-2",children:"Workplace"}),eS.map(r=>{const a=r.icon,c=n===r.id;return o.jsxs("button",{onClick:()=>e(r.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors text-sm font-medium ${c?"bg-purple-50 text-purple-900":"text-blue-900 hover:bg-purple-50"}`,children:[o.jsx(a,{className:`w-5 h-5 ${c?"text-purple-900":"text-purple-400"}`}),o.jsx("span",{children:r.label})]},r.id)})]}),o.jsx("div",{className:"p-4 border-t border-slate-200",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"h-8 w-8 rounded-full bg-purple-100 flex items-center justify-center text-purple-900 font-bold text-xs",children:t.charAt(0).toUpperCase()}),o.jsx("div",{className:"overflow-hidden",children:o.jsx("p",{className:"text-sm font-medium text-blue-900 truncate",title:t,children:t})})]})})]}),J6=({messages:n,employees:e,currentUserEmail:t,onSendMessage:r})=>{const[a,c]=L.useState("public"),[u,f]=L.useState(""),[m,x]=L.useState(!1),y=L.useRef(null),v=()=>{var R;(R=y.current)==null||R.scrollIntoView({behavior:"smooth"})};L.useEffect(()=>{v()},[n,a]);const E=n.filter(R=>a==="public"?R.isPublic===!0:!R.isPublic&&(R.senderEmail===t&&R.receiverEmail===a||R.senderEmail===a&&R.receiverEmail===t)).sort((R,O)=>new Date(R.timestamp).getTime()-new Date(O.timestamp).getTime()),A=async R=>{R.preventDefault();const O=u.trim();if(!(!O||m)){x(!0);try{const H=e.find(z=>z.email===t),ae=H?`${H.firstName} ${H.lastName}`:t==="admin"?"Administrator":t,ee={senderEmail:t,senderName:ae,message:O,timestamp:new Date().toISOString(),isPublic:a==="public"};a!=="public"&&(ee.receiverEmail=a),await r(ee),f("")}catch(H){console.error("Failed to send message:",H),alert("Failed to send message. Please try again.")}finally{x(!1)}}},V=e.filter(R=>R.email!==t);return o.jsxs("div",{className:"flex h-full bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:[o.jsxs("div",{className:"w-64 bg-slate-50 border-r border-slate-200 flex flex-col",children:[o.jsx("div",{className:"p-4 font-bold text-blue-900 border-b border-slate-200 bg-white",children:"Conversations"}),o.jsxs("div",{className:"flex-1 overflow-y-auto",children:[o.jsxs("button",{onClick:()=>c("public"),className:`w-full text-left px-4 py-3 flex items-center gap-3 hover:bg-slate-100 transition-colors ${a==="public"?"bg-purple-100 border-r-4 border-purple-900":""}`,children:[o.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center text-green-700 font-bold shadow-sm",children:"#"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-bold text-blue-900",children:"Public Chat"}),o.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-semibold",children:"Broadcast to all"})]})]}),o.jsx("div",{className:"mt-4 px-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2",children:"Direct Messages"}),V.map(R=>o.jsxs("button",{onClick:()=>c(R.email),className:`w-full text-left px-4 py-2.5 flex items-center gap-3 hover:bg-slate-100 transition-colors ${a===R.email?"bg-purple-100 border-r-4 border-purple-900":""}`,children:[o.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 font-bold text-xs shadow-sm",children:R.firstName.charAt(0)}),o.jsxs("div",{className:"overflow-hidden",children:[o.jsxs("p",{className:"text-sm font-medium text-blue-900 truncate",children:[R.firstName," ",R.lastName]}),o.jsx("p",{className:"text-[10px] text-slate-500 truncate",children:R.department})]})]},R.id))]})]}),o.jsxs("div",{className:"flex-1 flex flex-col bg-white",children:[o.jsx("div",{className:"h-14 border-b border-slate-200 flex items-center px-6 bg-white shadow-sm z-10",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${a==="public"?"bg-green-500 animate-pulse":"bg-blue-500"}`}),o.jsx("h3",{className:"font-bold text-blue-900",children:a==="public"?"General Public Chat":(()=>{const R=e.find(O=>O.email===a);return R?`${R.firstName} ${R.lastName}`:a})()})]})}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 bg-slate-50",children:[E.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400 opacity-60",children:[o.jsx("svg",{className:"w-12 h-12 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),o.jsx("p",{className:"text-sm font-medium",children:"No messages yet in this circle."})]}):E.map(R=>{const O=R.senderEmail===t;return o.jsx("div",{className:`flex ${O?"justify-end":"justify-start"}`,children:o.jsxs("div",{className:"max-w-[75%] group",children:[!O&&o.jsx("p",{className:"text-[10px] font-bold mb-1 ml-1 text-purple-900 uppercase",children:R.senderName}),o.jsxs("div",{className:`rounded-2xl px-4 py-2 shadow-sm ${O?"bg-purple-900 text-white rounded-tr-none":"bg-white text-slate-800 border border-slate-200 rounded-tl-none"}`,children:[o.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:R.message}),o.jsx("p",{className:`text-[9px] mt-1 text-right ${O?"text-purple-200":"text-slate-400"} font-medium`,children:new Date(R.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},R.id)}),o.jsx("div",{ref:y})]}),o.jsx("div",{className:"p-4 bg-white border-t border-slate-200",children:o.jsxs("form",{onSubmit:A,className:"flex gap-2 items-center bg-slate-100 rounded-full px-4 py-1 focus-within:ring-2 focus-within:ring-purple-900 transition-all",children:[o.jsx("input",{type:"text",value:u,onChange:R=>f(R.target.value),disabled:m,placeholder:a==="public"?"Message everyone...":"Send a direct message...",className:"flex-1 bg-transparent border-none py-2 focus:ring-0 text-sm text-blue-900 placeholder-slate-400"}),o.jsx("button",{type:"submit",disabled:!u.trim()||m,className:"bg-purple-900 text-white rounded-full p-2 hover:bg-purple-800 transition-all flex items-center justify-center w-8 h-8 shadow-sm disabled:opacity-50 disabled:bg-slate-400",children:m?o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4 translate-x-0.5",children:o.jsx("path",{d:"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"})})})]})})]})]})},Z6=({tasks:n,currentUserEmail:e})=>{const[t,r]=L.useState(new Date),a=(R,O)=>new Date(R,O+1,0).getDate(),c=(R,O)=>new Date(R,O,1).getDay(),u=["January","February","March","April","May","June","July","August","September","October","November","December"],f=()=>{r(new Date(t.getFullYear(),t.getMonth()-1,1))},m=()=>{r(new Date(t.getFullYear(),t.getMonth()+1,1))},x=t.getFullYear(),y=t.getMonth(),v=a(x,y),E=c(x,y),A=L.useMemo(()=>n.filter(R=>{if(!R.dueDate)return!1;const O=new Date(R.dueDate);return O.getMonth()===y&&O.getFullYear()===x}),[n,y,x]),V=()=>{const R=[];let O=[];for(let H=0;H<E;H++)O.push(o.jsx("div",{className:"h-32 bg-slate-50 border border-slate-100"},`empty-${H}`));for(let H=1;H<=v;H++){const ae=`${x}-${String(y+1).padStart(2,"0")}-${String(H).padStart(2,"0")}`,ee=A.filter(F=>F.dueDate===ae),z=new Date().toDateString()===new Date(x,y,H).toDateString();if(O.push(o.jsxs("div",{className:`h-32 bg-white border border-slate-200 p-2 overflow-y-auto ${z?"bg-purple-50":""}`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:`text-sm font-semibold ${z?"text-purple-700":"text-slate-700"}`,children:H}),ee.length>0&&o.jsx("span",{className:"text-xs bg-slate-100 text-slate-600 px-1.5 rounded-full",children:ee.length})]}),o.jsx("div",{className:"space-y-1",children:ee.map(F=>o.jsx("div",{className:`text-[10px] p-1 rounded truncate border-l-2 ${F.status==="Closed"||F.status==="Completed - Pending Review"?"bg-green-50 border-green-500 text-green-700":F.status==="In Progress"?"bg-blue-50 border-blue-500 text-blue-700":"bg-yellow-50 border-yellow-500 text-yellow-700"}`,title:F.title,children:F.title},F.id))})]},H)),(H+E)%7===0||H===v){if(H===v&&(H+E)%7!==0){const F=7-(H+E)%7;for(let G=0;G<F;G++)O.push(o.jsx("div",{className:"h-32 bg-slate-50 border border-slate-100"},`empty-end-${G}`))}R.push(o.jsx("div",{className:"grid grid-cols-7",children:O},`row-${H}`)),O=[]}}return R};return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Task Calendar"}),o.jsxs("div",{className:"flex items-center gap-4 bg-white p-2 rounded-lg shadow-sm",children:[o.jsx("button",{onClick:f,className:"p-1 hover:bg-slate-100 rounded text-blue-900",children:"<"}),o.jsxs("span",{className:"font-bold text-lg text-blue-900 w-32 text-center",children:[u[y]," ",x]}),o.jsx("button",{onClick:m,className:"p-1 hover:bg-slate-100 rounded text-blue-900",children:">"})]})]}),o.jsxs("div",{className:"flex-1 bg-white rounded-lg shadow-sm border border-slate-200 flex flex-col overflow-hidden",children:[o.jsxs("div",{className:"grid grid-cols-7 bg-purple-900 text-white text-center py-2 text-sm font-semibold",children:[o.jsx("div",{children:"Sun"}),o.jsx("div",{children:"Mon"}),o.jsx("div",{children:"Tue"}),o.jsx("div",{children:"Wed"}),o.jsx("div",{children:"Thu"}),o.jsx("div",{children:"Fri"}),o.jsx("div",{children:"Sat"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:V()})]})]})},eP=({tasks:n,employees:e})=>{const t=n.length,r=n.filter(v=>v.status==="Completed - Pending Review"||v.status==="Closed").length,a=n.filter(v=>v.status==="Completed - Pending Review").length,c=n.filter(v=>v.status==="In Progress").length,u=n.filter(v=>v.status==="Closed"?!1:new Date(v.dueDate)<new Date),f=t>0?Math.round(r/t*100):0,m=L.useMemo(()=>{const v=new Date;let E=0,A=0,V=0;return n.filter(R=>R.status!=="Closed").forEach(R=>{const O=new Date(R.createdAt),H=Math.abs(v.getTime()-O.getTime()),ae=Math.ceil(H/(1e3*60*60*24));ae<=3?E++:ae<=7?A++:V++}),{less3:E,less7:A,more7:V}},[n]),x=L.useMemo(()=>{const v=new Map;return n.forEach(E=>{const A=E.assignedToDepartment||"Unassigned";v.set(A,(v.get(A)||0)+1)}),Array.from(v.entries()).sort((E,A)=>A[1]-E[1])},[n]),y=({title:v,value:E,subtext:A,color:V})=>o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[o.jsx("h3",{className:"text-sm font-medium text-slate-500 mb-1",children:v}),o.jsx("div",{className:`text-3xl font-bold ${V}`,children:E}),o.jsx("p",{className:"text-xs text-slate-400 mt-2",children:A})]});return o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Task Analytics & Reports"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[o.jsx(y,{title:"Pending Review",value:a,subtext:"Awaiting Manager Approval",color:"text-orange-600"}),o.jsx(y,{title:"Overdue Tasks",value:u.length,subtext:"Past due date",color:"text-red-600"}),o.jsx(y,{title:"In Progress",value:c,subtext:"Currently active",color:"text-blue-600"}),o.jsx(y,{title:"Completion Rate",value:`${f}%`,subtext:"Overall efficiency",color:"text-green-600"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[o.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-4",children:"Task Aging Report (Unfinished)"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-slate-600",children:"Less than 3 days"}),o.jsx("span",{className:"font-bold text-green-600",children:m.less3})]}),o.jsx("div",{className:"w-full bg-slate-100 h-2 rounded-full",children:o.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${m.less3/t*100}%`}})}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-slate-600",children:"3 - 7 days"}),o.jsx("span",{className:"font-bold text-yellow-600",children:m.less7})]}),o.jsx("div",{className:"w-full bg-slate-100 h-2 rounded-full",children:o.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:`${m.less7/t*100}%`}})}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-slate-600",children:"More than 7 days"}),o.jsx("span",{className:"font-bold text-red-600",children:m.more7})]}),o.jsx("div",{className:"w-full bg-slate-100 h-2 rounded-full",children:o.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:`${m.more7/t*100}%`}})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100 lg:col-span-2",children:[o.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-4",children:"Critical Overdue Tasks"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm text-left",children:[o.jsx("thead",{className:"bg-slate-50 text-slate-600",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2",children:"Task"}),o.jsx("th",{className:"px-4 py-2",children:"Assigned To"}),o.jsx("th",{className:"px-4 py-2",children:"Due Date"}),o.jsx("th",{className:"px-4 py-2",children:"Status"})]})}),o.jsxs("tbody",{className:"divide-y",children:[u.slice(0,5).map(v=>o.jsxs("tr",{className:"hover:bg-red-50",children:[o.jsx("td",{className:"px-4 py-2 font-medium text-blue-900",children:v.title}),o.jsx("td",{className:"px-4 py-2 text-slate-600",children:v.assignedToName}),o.jsx("td",{className:"px-4 py-2 text-red-600 font-bold",children:new Date(v.dueDate).toLocaleDateString()}),o.jsx("td",{className:"px-4 py-2",children:o.jsx("span",{className:"text-xs bg-slate-100 px-2 py-1 rounded",children:v.status})})]},v.id)),u.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"text-center py-4 text-slate-400",children:"No overdue tasks. Great job!"})})]})]})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[o.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-4",children:"Tasks by Department"}),o.jsx("div",{className:"flex flex-wrap gap-4",children:x.map(([v,E])=>o.jsxs("div",{className:"flex-1 min-w-[150px] bg-slate-50 p-4 rounded-lg border text-center",children:[o.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:v}),o.jsx("p",{className:"text-2xl font-bold text-blue-900",children:E})]},v))})]})]})},tP=({notes:n,currentUserEmail:e,onAddNote:t,onDeleteNote:r})=>{const[a,c]=L.useState(""),[u,f]=L.useState(""),[m,x]=L.useState("yellow"),y=n.filter(A=>A.userId===e).sort((A,V)=>new Date(V.date).getTime()-new Date(A.date).getTime()),v=async A=>{if(A.preventDefault(),!a.trim()&&!u.trim())return;const V={userId:e,title:a||"Untitled Note",content:u,color:m,date:new Date().toISOString()};await t(V),c(""),f("")},E=[{id:"yellow",class:"bg-yellow-100 border-yellow-200"},{id:"green",class:"bg-green-100 border-green-200"},{id:"blue",class:"bg-blue-100 border-blue-200"},{id:"purple",class:"bg-purple-100 border-purple-200"},{id:"red",class:"bg-red-100 border-red-200"}];return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-6",children:"My Notes & Scratchpad"}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full overflow-hidden",children:[o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 h-fit",children:[o.jsx("h3",{className:"font-bold text-lg text-slate-700 mb-4",children:"Add New Note"}),o.jsxs("form",{onSubmit:v,className:"space-y-4",children:[o.jsx("input",{type:"text",placeholder:"Title...",value:a,onChange:A=>c(A.target.value),className:"w-full border-b border-slate-200 pb-2 focus:border-purple-500 focus:outline-none text-slate-800 font-medium"}),o.jsx("textarea",{placeholder:"Write something...",rows:6,value:u,onChange:A=>f(A.target.value),className:"w-full resize-none focus:outline-none text-sm text-slate-600"}),o.jsxs("div",{className:"flex justify-between items-center pt-2",children:[o.jsx("div",{className:"flex gap-2",children:E.map(A=>o.jsx("button",{type:"button",onClick:()=>x(A.id),className:`w-6 h-6 rounded-full border transition-transform ${A.class.split(" ")[0]} ${m===A.id?"scale-125 ring-2 ring-slate-300":""}`},A.id))}),o.jsx("button",{type:"submit",className:"bg-purple-900 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-purple-800 transition-colors",children:"Save Note"})]})]})]}),o.jsx("div",{className:"lg:col-span-2 overflow-y-auto pr-2",children:o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:y.length===0?o.jsx("div",{className:"col-span-2 text-center py-10 text-slate-400",children:"No notes yet. Create one to get started!"}):y.map(A=>{var R;const V=((R=E.find(O=>O.id===A.color))==null?void 0:R.class)||"bg-white border-slate-200";return o.jsxs("div",{className:`p-5 rounded-xl border shadow-sm relative group transition-transform hover:-translate-y-1 ${V}`,children:[o.jsx("button",{onClick:()=>r(A.id),className:"absolute top-3 right-3 text-slate-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),o.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:A.title}),o.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:A.content}),o.jsx("p",{className:"text-xs text-slate-500 mt-4 text-right",children:new Date(A.date).toLocaleDateString()})]},A.id)})})})]})]})},nS=({priority:n})=>{const e={Low:"bg-gray-100 text-gray-800",Medium:"bg-blue-100 text-blue-800",High:"bg-orange-100 text-orange-800",Critical:"bg-red-100 text-red-800"};return o.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold uppercase ${e[n]}`,children:n})},ff=({task:n,onSelect:e})=>{const t=new Date(n.dueDate)<new Date&&n.status!=="Closed";return o.jsxs("div",{onClick:()=>e(n),className:`bg-white p-3 rounded-lg shadow-sm border mb-3 cursor-pointer hover:shadow-md transition-all ${t?"border-red-300 border-l-4":"border-slate-200"}`,children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx(nS,{priority:n.priority}),o.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(n.dueDate).toLocaleDateString()})]}),o.jsx("h4",{className:"font-bold text-blue-900 text-sm mb-1 leading-tight",children:n.title}),o.jsx("p",{className:"text-xs text-slate-500 mb-2 line-clamp-2",children:n.description}),o.jsxs("div",{className:"flex justify-between items-center border-t pt-2 mt-2",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-5 h-5 rounded-full bg-purple-100 text-purple-700 flex items-center justify-center text-[10px] font-bold",children:n.assignedToName.charAt(0)}),o.jsx("span",{className:"text-[10px] text-slate-600 truncate max-w-[80px]",children:n.assignedToName})]}),o.jsx("span",{className:`text-[10px] font-medium px-1.5 py-0.5 rounded ${n.status==="Reopened"?"bg-red-50 text-red-600":"bg-slate-100 text-slate-600"}`,children:n.status})]})]})},nP=({tasks:n,employees:e,currentUserEmail:t,onCreateTask:r,onTaskWorkflowAction:a,onDeleteTask:c})=>{const[u,f]=L.useState(!1),[m,x]=L.useState(null),[y,v]=L.useState(""),[E,A]=L.useState(""),[V,R]=L.useState(""),[O,H]=L.useState("Medium"),[ae,ee]=L.useState("Operations"),[z,F]=L.useState(""),[G,C]=L.useState(new Date().toISOString().split("T")[0]),[T,S]=L.useState(""),N=e.find(P=>P.email===t),I=t==="admin",D=I||(N==null?void 0:N.role)==="HOD"||(N==null?void 0:N.role)==="HR",[M,Te]=L.useState("my"),Fe=async P=>{P.preventDefault();let $=T,ce="",ve="";if(D){if(!$){alert("Please select an employee to assign the task to.");return}const q=e.find(me=>me.id===$);ce=q?`${q.firstName} ${q.lastName}`:"Unknown",ve=(q==null?void 0:q.department)||""}else $=(N==null?void 0:N.id)||t,ce=N?`${N.firstName} ${N.lastName}`:t,ve=(N==null?void 0:N.department)||"";const we={title:E,description:V,category:ae,priority:O,startDate:G,dueDate:z,assignedTo:$,assignedToName:ce,assignedToDepartment:ve,createdBy:t,status:D&&$!==(N==null?void 0:N.id)?"Assigned":"New",createdAt:new Date().toISOString(),history:[]};await r(we),f(!1),Y()},Y=()=>{A(""),R(""),H("Medium"),ee("Operations"),F(""),S("")},le=L.useMemo(()=>{let P=n;const $=(N==null?void 0:N.id)||t;return M==="my"?P=n.filter(ce=>ce.assignedTo===$):I||(P=n.filter(ce=>ce.createdBy===t||ce.assignedToDepartment===(N==null?void 0:N.department))),P},[n,M,N,t,I]),ye={todo:le.filter(P=>["New","Assigned","Reopened"].includes(P.status)),inProgress:le.filter(P=>P.status==="In Progress"),review:le.filter(P=>P.status==="Completed - Pending Review"),closed:le.filter(P=>P.status==="Closed")},Re=async P=>{if(!m)return;let $=m.status,ce=!1;switch(P){case"Accept":$="In Progress";break;case"Complete":$="Completed - Pending Review",ce=!0;break;case"Approve":$="Closed";break;case"Reject":$="Reopened",ce=!0;break}if(ce&&!y.trim()){alert(`Please enter remarks to ${P} this task.`);return}await a(m.id,$,P,y),x(null),v("")},qe=()=>{var ve;if(!m)return null;const P=m.assignedTo===((N==null?void 0:N.id)||t),$=m.createdBy===t,ce=I||D||$;return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:()=>x(null),children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:we=>we.stopPropagation(),children:[o.jsxs("div",{className:"p-6 border-b flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded uppercase font-bold",children:m.category}),o.jsx(nS,{priority:m.priority})]}),o.jsx("h2",{className:"text-xl font-bold text-blue-900",children:m.title})]}),o.jsx("button",{onClick:()=>x(null),className:"text-slate-400 hover:text-slate-600 text-2xl",children:""})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 text-sm",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-slate-500 text-xs",children:"Assigned To"}),o.jsx("p",{className:"font-medium text-blue-900",children:m.assignedToName})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-slate-500 text-xs",children:"Assigned By"}),o.jsx("p",{className:"font-medium text-blue-900",children:m.createdBy})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-slate-500 text-xs",children:"Due Date"}),o.jsx("p",{className:`font-medium ${new Date(m.dueDate)<new Date&&m.status!=="Closed"?"text-red-600":"text-blue-900"}`,children:new Date(m.dueDate).toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-slate-500 text-xs",children:"Status"}),o.jsx("p",{className:"font-medium text-blue-900",children:m.status})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"text-sm font-bold text-blue-900 mb-2",children:"Description"}),o.jsx("p",{className:"text-slate-700 text-sm whitespace-pre-wrap bg-slate-50 p-3 rounded",children:m.description})]}),o.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100 mb-6",children:[o.jsx("h3",{className:"text-sm font-bold text-blue-900 mb-3",children:"Actions"}),o.jsxs("div",{className:"flex flex-col gap-3",children:[["New","Assigned","Reopened"].includes(m.status)&&P&&o.jsx("button",{onClick:()=>Re("Accept"),className:"w-full bg-blue-600 text-white py-2 rounded font-medium hover:bg-blue-700",children:"Accept Task & Start"}),m.status==="In Progress"&&P&&o.jsxs(o.Fragment,{children:[o.jsx("textarea",{className:"w-full text-sm border rounded p-2 mb-2",placeholder:"Completion remarks / output summary...",value:y,onChange:we=>v(we.target.value)}),o.jsx("button",{onClick:()=>Re("Complete"),className:"w-full bg-green-600 text-white py-2 rounded font-medium hover:bg-green-700",children:"Mark as Completed"})]}),m.status==="Completed - Pending Review"&&ce&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("p",{className:"text-xs text-blue-900",children:[o.jsx("strong",{children:"User Remarks:"})," ",m.completionRemarks]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>Re("Approve"),className:"flex-1 bg-green-600 text-white py-2 rounded font-medium hover:bg-green-700",children:"Approve & Close"}),o.jsx("div",{className:"flex-1 flex flex-col gap-1",children:o.jsx("button",{onClick:()=>Re("Reject"),className:"bg-red-50 text-red-600 border border-red-200 py-2 rounded font-medium hover:bg-red-100 transition-colors",children:"Reject"})})]}),o.jsx("input",{type:"text",className:"w-full text-sm border rounded p-2",placeholder:"Rejection reason (Required for Reject)...",value:y,onChange:we=>v(we.target.value)})]}),m.status==="Closed"&&o.jsx("p",{className:"text-center text-sm text-green-600 font-medium py-2",children:"Task Closed Successfully"})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-bold text-blue-900 mb-3",children:"Activity History"}),o.jsx("div",{className:"space-y-4 border-l-2 border-slate-200 ml-2 pl-4",children:(ve=m.history)==null?void 0:ve.slice().reverse().map((we,q)=>o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute -left-[21px] top-1 w-3 h-3 rounded-full bg-purple-400 ring-4 ring-white"}),o.jsx("p",{className:"text-xs text-slate-500",children:new Date(we.timestamp).toLocaleString()}),o.jsxs("p",{className:"text-sm font-medium text-blue-900",children:[we.action," ",o.jsxs("span",{className:"font-normal text-slate-600",children:["by ",we.by]})]}),we.details&&o.jsx("p",{className:"text-xs text-slate-600 mt-1 italic",children:we.details})]},q))})]})]}),ce&&o.jsxs("div",{className:"p-4 bg-slate-50 border-t flex justify-between items-center",children:[o.jsxs("span",{className:"text-xs text-slate-400",children:["ID: ",m.id]}),o.jsx("button",{onClick:()=>{window.confirm("Permanently delete this task?")&&(c(m.id),x(null))},className:"text-red-500 hover:text-red-700 text-xs font-medium",children:"Delete Task"})]})]})})};return o.jsxs("div",{className:"h-full flex flex-col p-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[o.jsxs("div",{className:"flex bg-white rounded-lg p-1 shadow-sm",children:[o.jsx("button",{onClick:()=>Te("my"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${M==="my"?"bg-purple-100 text-purple-900":"text-slate-600 hover:bg-slate-50"}`,children:"My Tasks"}),D&&o.jsx("button",{onClick:()=>Te("team"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${M==="team"?"bg-purple-100 text-purple-900":"text-slate-600 hover:bg-slate-50"}`,children:"Team Tasks"})]}),D&&o.jsx("button",{onClick:()=>f(!0),className:"bg-purple-900 hover:bg-purple-800 text-white px-4 py-2 rounded-lg shadow-sm text-sm font-medium flex items-center gap-2",children:o.jsx("span",{children:"+ New Task"})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 h-full overflow-hidden",children:[o.jsxs("div",{className:"bg-slate-100 rounded-lg p-3 flex flex-col h-full max-h-full",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3 px-1",children:[o.jsx("h3",{className:"font-bold text-slate-700 text-sm uppercase tracking-wide",children:"To Do"}),o.jsx("span",{className:"bg-slate-200 text-slate-700 text-xs px-2 py-0.5 rounded-full",children:ye.todo.length})]}),o.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:ye.todo.map(P=>o.jsx(ff,{task:P,onSelect:x},P.id))})]}),o.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 flex flex-col h-full max-h-full border border-blue-100",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3 px-1",children:[o.jsx("h3",{className:"font-bold text-blue-800 text-sm uppercase tracking-wide",children:"In Progress"}),o.jsx("span",{className:"bg-blue-200 text-blue-800 text-xs px-2 py-0.5 rounded-full",children:ye.inProgress.length})]}),o.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:ye.inProgress.map(P=>o.jsx(ff,{task:P,onSelect:x},P.id))})]}),o.jsxs("div",{className:"bg-orange-50 rounded-lg p-3 flex flex-col h-full max-h-full border border-orange-100",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3 px-1",children:[o.jsx("h3",{className:"font-bold text-orange-800 text-sm uppercase tracking-wide",children:"Review"}),o.jsx("span",{className:"bg-orange-200 text-orange-800 text-xs px-2 py-0.5 rounded-full",children:ye.review.length})]}),o.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:ye.review.map(P=>o.jsx(ff,{task:P,onSelect:x},P.id))})]}),o.jsxs("div",{className:"bg-green-50 rounded-lg p-3 flex flex-col h-full max-h-full border border-green-100",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3 px-1",children:[o.jsx("h3",{className:"font-bold text-green-800 text-sm uppercase tracking-wide",children:"Closed"}),o.jsx("span",{className:"bg-green-200 text-green-800 text-xs px-2 py-0.5 rounded-full",children:ye.closed.length})]}),o.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:ye.closed.map(P=>o.jsx(ff,{task:P,onSelect:x},P.id))})]})]}),u&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:()=>f(!1),children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg p-6",onClick:P=>P.stopPropagation(),children:[o.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-4",children:"Create New Task"}),o.jsxs("form",{onSubmit:Fe,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Title"}),o.jsx("input",{type:"text",value:E,onChange:P=>A(P.target.value),required:!0,className:"w-full border rounded p-2 text-sm",placeholder:"e.g. Server Maintenance"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Description"}),o.jsx("textarea",{value:V,onChange:P=>R(P.target.value),rows:3,className:"w-full border rounded p-2 text-sm"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Category"}),o.jsxs("select",{value:ae,onChange:P=>ee(P.target.value),className:"w-full border rounded p-2 text-sm",children:[o.jsx("option",{children:"Operations"}),o.jsx("option",{children:"IT Support"}),o.jsx("option",{children:"ERP"}),o.jsx("option",{children:"Finance"}),o.jsx("option",{children:"HR"}),o.jsx("option",{children:"Other"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Priority"}),o.jsxs("select",{value:O,onChange:P=>H(P.target.value),className:"w-full border rounded p-2 text-sm",children:[o.jsx("option",{children:"Low"}),o.jsx("option",{children:"Medium"}),o.jsx("option",{children:"High"}),o.jsx("option",{children:"Critical"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Start Date"}),o.jsx("input",{type:"date",value:G,onChange:P=>C(P.target.value),className:"w-full border rounded p-2 text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Due Date"}),o.jsx("input",{type:"date",value:z,onChange:P=>F(P.target.value),className:"w-full border rounded p-2 text-sm",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Assign To"}),o.jsxs("select",{value:T,onChange:P=>S(P.target.value),className:"w-full border rounded p-2 text-sm",required:!0,children:[o.jsx("option",{value:"",children:"Select Employee"}),e.map(P=>o.jsxs("option",{value:P.id,children:[P.firstName," ",P.lastName," (",P.department,")"]},P.id))]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[o.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 border rounded text-slate-600 hover:bg-slate-50",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-900 text-white rounded hover:bg-purple-800",children:"Create Task"})]})]})]})}),o.jsx(qe,{})]})},sP=n=>{const[e,t]=L.useState("task_dashboard");return o.jsxs("div",{className:"min-h-screen bg-slate-100 flex",children:[o.jsx(X6,{activePage:e,setActivePage:t,currentUserEmail:n.currentUserEmail}),o.jsxs("div",{className:"flex-1 flex flex-col h-screen overflow-hidden",children:[o.jsxs("header",{className:"bg-purple-900 border-b border-purple-800 h-16 flex-shrink-0 flex items-center justify-between px-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("button",{onClick:n.onBack,className:"flex items-center gap-2 text-sm font-medium text-purple-200 hover:text-white",children:[o.jsx(Dm,{className:"w-5 h-5"}),o.jsx("span",{children:"Home"})]}),o.jsx("div",{className:"h-6 w-px bg-purple-700 mx-2"}),o.jsx("h1",{className:"text-lg font-bold text-white",children:"Task Manager"})]}),o.jsxs("button",{onClick:n.onLogout,className:"flex items-center gap-2 bg-purple-800 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:[o.jsx(Do,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})]}),o.jsxs("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-slate-100 p-6",children:[e==="task_dashboard"&&o.jsx(nP,{tasks:n.tasks,employees:n.employees,currentUserEmail:n.currentUserEmail,onCreateTask:n.onCreateTask,onTaskWorkflowAction:n.onTaskWorkflowAction,onDeleteTask:n.onDeleteTask}),e==="task_calendar"&&o.jsx(Z6,{tasks:n.tasks,currentUserEmail:n.currentUserEmail}),e==="task_chat"&&o.jsx("div",{className:"h-full",children:o.jsx(J6,{messages:n.messages,employees:n.employees,currentUserEmail:n.currentUserEmail,onSendMessage:n.onSendMessage})}),e==="task_analytics"&&o.jsx(eP,{tasks:n.tasks,employees:n.employees}),e==="task_notes"&&o.jsx(tP,{notes:n.notes,currentUserEmail:n.currentUserEmail,onAddNote:n.onAddNote,onDeleteNote:n.onDeleteNote})]})]})]})},rP=n=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[o.jsx("path",{d:"M12 1.5l2.12 6.4H21l-5.37 3.94 2.12 6.4-5.75-4.22-5.75 4.22 2.12-6.4L3 7.9h6.88L12 1.5zm0 3.82l-1.41 4.28H6.3l3.63 2.65-1.42 4.28L12 13.9l3.49 2.63-1.42-4.28L17.7 9.6h-4.29L12 5.32z"}),o.jsx("path",{d:"M12 1.5l-2.12 6.4H3l5.37 3.94-2.12 6.4 5.75-4.22 5.75 4.22-2.12-6.4L21 7.9h-6.88L12 1.5zm0 3.82L13.41 9.6h4.29l-3.63 2.65 1.42 4.28L12 13.9 8.51 16.53l1.42-4.28L6.3 9.6h4.29L12 5.32z",transform:"rotate(60 12 12)"})]}),iP=({onUpdatePassword:n,onSkip:e})=>{const[t,r]=L.useState(""),[a,c]=L.useState(""),[u,f]=L.useState(null),[m,x]=L.useState(!1),y=async v=>{if(v.preventDefault(),f(null),!t||!a){f({type:"error",text:"Please fill in both fields."});return}if(t!==a){f({type:"error",text:"Passwords do not match."});return}if(t.length<6){f({type:"error",text:"Password must be at least 6 characters long."});return}x(!0);const E=await n(t);x(!1),E.success||f({type:"error",text:E.message})};return o.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white p-8 md:p-12 rounded-2xl shadow-lg w-full max-w-md transform transition-all duration-300",children:[o.jsxs("div",{className:"flex flex-col items-center mb-8",children:[o.jsx(rP,{className:"w-20 h-20 text-orange-500 mb-4"}),o.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Change Your Password"}),o.jsx("p",{className:"text-slate-500 text-center mt-2",children:"For enhanced security, you can update your password now or skip for later."})]}),o.jsxs("form",{onSubmit:y,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-600",children:"New Password"}),o.jsx("input",{id:"newPassword",type:"password",value:t,onChange:v=>r(v.target.value),className:"mt-1 block w-full px-4 py-3 bg-slate-50 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",placeholder:""})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-600",children:"Confirm New Password"}),o.jsx("input",{id:"confirmPassword",type:"password",value:a,onChange:v=>c(v.target.value),className:"mt-1 block w-full px-4 py-3 bg-slate-50 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",placeholder:""})]}),u&&o.jsx("p",{className:`text-sm ${u.type==="error"?"text-red-500":"text-green-600"}`,children:u.text}),o.jsxs("div",{className:"space-y-4 pt-2",children:[o.jsx("button",{type:"submit",disabled:m,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-colors duration-200 disabled:bg-teal-400",children:m?"Saving...":"Save and Continue"}),o.jsx("button",{type:"button",onClick:e,className:"w-full flex justify-center py-3 px-4 border border-slate-300 rounded-md shadow-sm text-sm font-medium text-slate-700 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400 transition-colors duration-200",children:"Skip for now"})]})]})]})})},aP=()=>{var ui;const[n,e]=L.useState(!1),[t,r]=L.useState(!1),[a,c]=L.useState(null),[u,f]=L.useState(null),[m,x]=L.useState(!0),[y,v]=L.useState([]),[E,A]=L.useState([]),[V,R]=L.useState({}),[O,H]=L.useState([]),[ae,ee]=L.useState([]),[z,F]=L.useState([]),[G,C]=L.useState([]),[T,S]=L.useState([]),[N,I]=L.useState([]),[D,M]=L.useState([]),[Te,Fe]=L.useState([]),[Y,le]=L.useState([]),[ye,Re]=L.useState([]),[qe,P]=L.useState([]),[$,ce]=L.useState([]),[ve,we]=L.useState([]),[q,me]=L.useState([]),[Ee,ke]=L.useState([]);L.useEffect(()=>{if(n&&u==="admin"){const te=async()=>{if(z.length>0)return;const he=[{itemCode:"CON-101",model:"Tomatoes",itemName:"Tomatoes",type:"Kitchen",subCategory:"Vegetables",brand:"Local Vendor",quantity:30,unit:"Kg",condition:"Fresh",status:"In Stock",assignedTo:"",location:"Kitchen Store",purchaseDate:"2024-03-01",cost:"150",remarks:"Fresh stock"},{itemCode:"CON-102",model:"Onions",itemName:"Onions",type:"Kitchen",subCategory:"Vegetables",brand:"Local Vendor",quantity:40,unit:"Kg",condition:"Good",status:"In Stock",assignedTo:"",location:"Kitchen Store",purchaseDate:"2024-03-01",cost:"80",remarks:""},{itemCode:"CON-103",model:"Fine Flour",itemName:"Fine Flour",type:"Kitchen",subCategory:"Bakery",brand:"Local Vendor",quantity:100,unit:"kg",condition:"Good",status:"In Stock",assignedTo:"",location:"Store Room",purchaseDate:"2024-02-25",cost:"1200",remarks:"Dry storage"},{itemCode:"KFA-001",model:"Industrial Pizza Oven",itemName:"Pizza Oven XL",type:"Kitchen",subCategory:"Cooking Equipment",brand:"Rational",material:"Stainless Steel",quantity:1,unit:"Pcs",condition:"Excellent",status:"In Stock",assignedTo:"",location:"Main Kitchen",purchaseDate:"2023-05-12",cost:"450,000",remarks:"Serviced monthly"}],de=Ne.batch();he.forEach(Ve=>{const nt=Ne.collection("inventory").doc();de.set(nt,Ve)}),await de.commit()},xe=async()=>{if(y.length>0)return;const he=[{employeeId:"1",firstName:"Mubashara",lastName:"Rubbani",fatherName:"Ghhulam Rabani",cnic:"35202-798789-6",dob:"1995-10-22",gender:"Female",maritalStatus:"Single",phone:"03244092102",email:"mubasharamir22@gmail.com",permanentAddress:"house no.7, street no.8 noulakha park faiz bagh lahore",department:"IT Department",designation:"Software Engineer",joiningDate:"2025-12-25",salary:"120000",shift:"12am -9pm",role:"Employee"},{employeeId:"2",firstName:"Ayesha",lastName:"Arslan",fatherName:"w/o arslan arshad",cnic:"35201-1298156-0",dob:"1988-11-08",gender:"Female",maritalStatus:"Married",phone:"03214561551",email:"zoyaarslan2@gmail.com",permanentAddress:"house number 32 block b uet society lahore",department:"IT Department",designation:"Data Analyst",joiningDate:"2025-11-17",salary:"85000",shift:"09am -06pm",role:"Employee"},{employeeId:"3",firstName:"Zoofshan",lastName:"Mureed",fatherName:"mureed hussain",cnic:"3460345995974",dob:"1995-10-25",gender:"Female",maritalStatus:"Single",phone:"03095892784",email:"zoofishanmureedhussain@gmail.com",permanentAddress:"dhalay wali head mrala",department:"IT Department",designation:"QA Engineer",joiningDate:"2025-11-17",salary:"90000",shift:"9am-9pm",role:"Employee"},{employeeId:"4",firstName:"Tahir",lastName:"Iqbal",fatherName:"muhammad iqbal",cnic:"3660235602409",dob:"1990-12-01",gender:"Male",maritalStatus:"Married",phone:"03054547614",email:"tahirsab911@gmail.com",permanentAddress:"snaro wali puli muhala muhammadi melsi zila wiharri",department:"IT Department",designation:"Senior Dev",joiningDate:"2025-11-17",salary:"160000",shift:"12pm-9pm",role:"Employee"},{employeeId:"5",firstName:"Hanzala",lastName:"Sani",fatherName:"Muhammad Altaf",cnic:"35201-0272119-9",dob:"2002-07-19",gender:"Male",maritalStatus:"Single",phone:"03234976039",email:"hanzlaking0323@gamil.com",permanentAddress:"near alimantri collage ,chungi amar sidhu,Lahore",department:"Operations",designation:"Support Staff",joiningDate:"2025-01-01",salary:"72000",role:"Employee"},{employeeId:"6",firstName:"Imran",lastName:"Khalid",fatherName:"khalid iqbal",cnic:"35202-6888706-1",dob:"2007-09-09",gender:"Male",maritalStatus:"Single",phone:"03256044935",email:"imrankhalid522@gmail.com",permanentAddress:"kot lakpat ,street no. 8, mohala shabnam coloni near gravyard , lahore",department:"Operations",designation:"Junior Support",joiningDate:"2025-09-22",salary:"30000",role:"Employee"}],de=Ne.batch();for(const Ve of he){const nt=Ne.collection("employees").doc();de.set(nt,{...Ve,status:"Active",leaveBalance:{annual:{total:14,used:0},sick:{total:7,used:0},casual:{total:6,used:0},maternity:{total:0,used:0},paternity:{total:0,used:0},alternateDayOff:{total:0,used:0},others:{total:0,used:0}}});const vn=Ne.collection("users").doc(Ve.email);de.set(vn,{email:Ve.email,password:"123456",passwordChangeRequired:!1,employeeId:nt.id})}await de.commit()};te(),xe()}},[n,u,z.length,y.length]),L.useEffect(()=>H1.onAuthStateChanged(xe=>{xe?(e(!0),xe.email==="admin@masbot.erp"?f("admin"):f(xe.email)):n||(f(null),c(null)),x(!1)}),[n]),L.useEffect(()=>{if(!u){v([]),A([]);return}let te=[];return(async()=>{try{te.push(Ne.collection("employees").onSnapshot(he=>v(he.docs.map(de=>({...de.data(),id:de.id}))))),te.push(Ne.collection("users").onSnapshot(he=>A(he.docs.map(de=>({...de.data(),id:de.id}))))),te.push(Ne.collection("app_data").doc("permissions").onSnapshot(he=>{he.exists?R(he.data()):Ne.collection("app_data").doc("permissions").set({})})),te.push(Ne.collection("leaveRequests").onSnapshot(he=>H(he.docs.map(de=>({...de.data(),id:de.id}))))),te.push(Ne.collection("payrollHistory").where("date","!=",null).onSnapshot(he=>{const de=he.docs.map(Ve=>({...Ve.data(),id:Ve.id}));de.sort((Ve,nt)=>new Date(nt.date).getTime()-new Date(Ve.date).getTime()),ee(de)})),te.push(Ne.collection("inventory").onSnapshot(he=>F(he.docs.map(de=>({...de.data(),id:de.id}))))),te.push(Ne.collection("labs").onSnapshot(he=>C(he.docs.map(de=>({...de.data(),id:de.id}))))),te.push(Ne.collection("toners").onSnapshot(he=>S(he.docs.map(de=>({...de.data(),id:de.id}))))),te.push(Ne.collection("mrfs").onSnapshot(he=>I(he.docs.map(de=>({...de.data(),id:de.id}))))),te.push(Ne.collection("attendanceRecords").onSnapshot(he=>M(he.docs.map(de=>({...de.data(),id:de.id}))))),te.push(Ne.collection("supplyChainRequests").onSnapshot(he=>Fe(he.docs.map(de=>({...de.data(),id:de.id}))))),te.push(Ne.collection("purchaseRequests").onSnapshot(he=>le(he.docs.map(de=>({...de.data(),id:de.id}))))),te.push(Ne.collection("recipes").onSnapshot(he=>Re(he.docs.map(de=>({...de.data(),id:de.id}))))),te.push(Ne.collection("vendors").onSnapshot(he=>P(he.docs.map(de=>({...de.data(),id:de.id}))))),te.push(Ne.collection("purchaseOrders").onSnapshot(he=>ce(he.docs.map(de=>({...de.data(),id:de.id}))))),te.push(Ne.collection("tasks").onSnapshot(he=>we(he.docs.map(de=>({...de.data(),id:de.id}))))),te.push(Ne.collection("messages").onSnapshot(he=>me(he.docs.map(de=>({...de.data(),id:de.id}))))),te.push(Ne.collection("notes").onSnapshot(he=>ke(he.docs.map(de=>({...de.data(),id:de.id})))))}catch(he){console.error("Firebase init failed",he)}})(),()=>{te.forEach(he=>he())}},[u]);const $e=te=>{const xe=new Date(te),he=new Date().getFullYear(),de=xe.getFullYear(),Ve={annual:{total:14,used:0},sick:{total:7,used:0},casual:{total:6,used:0},maternity:{total:90,used:0},paternity:{total:7,used:0},alternateDayOff:{total:50,used:0},others:{total:0,used:0}};if(de<he)return Ve;const vn=(12-xe.getMonth())/12;return{annual:{total:Math.round(14*vn),used:0},sick:{total:Math.round(7*vn),used:0},casual:{total:Math.round(6*vn),used:0},maternity:{total:90,used:0},paternity:{total:7,used:0},alternateDayOff:{total:Math.round(50*vn),used:0},others:{total:0,used:0}}},Xt=async(te,xe)=>{if(!xe)return!1;if(te==="admin"&&xe==="123")return e(!0),f("admin"),!0;try{const he=await Ne.collection("users").where("email","==",te).get();if(!he.empty){const de=he.docs[0].data();if(de.password===xe)return e(!0),f(te),r(!!de.passwordChangeRequired),!0}return!1}catch(he){throw console.error("Login process error:",he),he}},ie=async()=>{try{await H1.signOut()}catch{}e(!1),f(null),c(null)},De=async(te,xe)=>{const he=te.employmentType==="Permanent"?$e(te.joiningDate):{annual:{total:0,used:0},sick:{total:0,used:0},casual:{total:0,used:0},maternity:{total:0,used:0},paternity:{total:0,used:0},alternateDayOff:{total:0,used:0},others:{total:0,used:0}},de=await Ne.collection("employees").add({...te,leaveBalance:he});await Ne.collection("users").doc(te.email).set({email:te.email,password:xe,passwordChangeRequired:!1,employeeId:de.id})},Tt=async(te,xe)=>{const he=Ne.collection("employees").doc(te);return xe.employmentType==="Permanent"?await he.update({...xe,leaveBalance:$e(new Date().toISOString().split("T")[0])}):await he.update(xe),{success:!0,message:"Employee updated successfully"}},zt=async te=>(await Ne.collection("employees").doc(te).update({status:"Resigned"}),{success:!0,message:"Employee marked as resigned."}),Ws=async(te,xe)=>{await Ne.collection("app_data").doc("permissions").set({...V,[te]:xe})},li=async te=>{await Ne.collection("leaveRequests").add(te)},Xs=async(te,xe)=>{const he=Ne.collection("leaveRequests").doc(te),de=O.find(Ve=>Ve.id===te);if(xe==="Approve"&&de)if(de.status==="Pending HOD")await he.update({status:"Pending HR"});else{await he.update({status:"Approved"});const Ve=Math.ceil(Math.abs(new Date(de.toDate).getTime()-new Date(de.fromDate).getTime())/(1e3*60*60*24))+1,nt={"Casual Leave":"casual","Sick Leave":"sick","Annual Leave":"annual","Maternity Leave":"maternity","Paternity Leave":"paternity","Alternate Day Off":"alternateDayOff",Others:"others"}[de.leaveType];await Ne.collection("employees").doc(de.employeeId).update({[`leaveBalance.${nt}.used`]:xs.firestore.FieldValue.increment(Ve)})}else await he.update({status:"Rejected"})},Os=async()=>{const te={id:"",date:new Date().toISOString(),monthYear:new Date().toLocaleString("default",{month:"long",year:"numeric"}),totalPayroll:0,totalDeductions:0,totalNetPay:0,employeeRecords:y.map(xe=>({employeeId:xe.id,employeeName:`${xe.firstName} ${xe.lastName}`,department:xe.department,baseSalary:parseFloat(xe.salary),deductions:0,netPay:parseFloat(xe.salary)}))};return te.totalPayroll=te.employeeRecords.reduce((xe,he)=>xe+he.baseSalary,0),te.totalNetPay=te.employeeRecords.reduce((xe,he)=>xe+he.netPay,0),await Ne.collection("payrollHistory").add(te),{success:!0,message:"Payroll run successfully."}},Vs=async te=>{const xe=Ne.batch();return te.forEach(he=>xe.set(Ne.collection("attendanceRecords").doc(`${he.employeeId}_${he.date}`),he)),await xe.commit(),{success:!0,message:"Attendance records uploaded."}},Ls=async te=>{const xe=Ne.batch();te.forEach(he=>xe.set(Ne.collection("inventory").doc(),he)),await xe.commit()},_a=async te=>{const{id:xe,...he}=te;await Ne.collection("inventory").doc(xe).update(he)},vs=async te=>{await Ne.collection("inventory").doc(te).delete()},Mt=async(te,xe)=>{const he=G.find(de=>de.id===te);he&&await Ne.collection("labs").doc(te).update({systems:[...he.systems,{...xe,id:`SYS-${Date.now()}`}]})},Ht=async(te,xe)=>{const he=G.find(de=>de.id===te);he&&await Ne.collection("labs").doc(te).update({systems:he.systems.map(de=>de.id===xe.id?xe:de)})},Rt=async(te,xe)=>{const he=G.find(de=>de.id===te);he&&await Ne.collection("labs").doc(te).update({systems:he.systems.filter(de=>de.id!==xe)})},Ct=async te=>{const xe=T.find(he=>he.model===te.model);xe?await Ne.collection("toners").doc(xe.id).update({quantity:te.filledQuantity+te.emptyQuantity,compatiblePrinters:te.compatiblePrinters}):(te.filledQuantity>0&&await Ne.collection("toners").add({model:te.model,compatiblePrinters:te.compatiblePrinters,quantity:te.filledQuantity,status:"Filled"}),te.emptyQuantity>0&&await Ne.collection("toners").add({model:te.model,compatiblePrinters:te.compatiblePrinters,quantity:te.emptyQuantity,status:"Empty"}))},is=async te=>{const xe=Ne.batch();T.filter(he=>he.model===te).forEach(he=>xe.delete(Ne.collection("toners").doc(he.id))),await xe.commit()},Mo=async te=>{await Ne.collection("mrfs").add(te)},wa=async te=>{const{id:xe,...he}=te;await Ne.collection("mrfs").doc(xe).update(he)},pc=async te=>{await Ne.collection("mrfs").doc(te).delete()},Tr=async te=>{const xe=Ne.batch();te.forEach(he=>xe.update(Ne.collection("inventory").doc(he.id),{quantity:he.newQuantity})),await xe.commit()},Us=async te=>{await Ne.collection("supplyChainRequests").add({...te,status:"Pending Account Manager"})},dn=async(te,xe,he)=>{const de=Te.find(nt=>nt.id===te),Ve={status:xe==="Approve"?(de==null?void 0:de.department)==="Store"?"Forwarded to Purchase":"Pending Store":"Rejected",approvalDate:new Date().toISOString()};he&&(Ve.rejectionReason=he),await Ne.collection("supplyChainRequests").doc(te).update(Ve)},Gn=async te=>{const xe=Te.find(de=>de.id===te);if(!xe)throw new Error("Request not found");const he=Ne.batch();he.update(Ne.collection("supplyChainRequests").doc(te),{status:"Issued",issuedDate:new Date().toISOString()}),xe.items.forEach(de=>{de.inventoryId&&de.inventoryId.trim()!==""&&he.update(Ne.collection("inventory").doc(de.inventoryId),{quantity:xs.firestore.FieldValue.increment(-de.quantityRequested)})}),await he.commit()},bn=async te=>{await Ne.collection("supplyChainRequests").doc(te).update({status:"Forwarded to Purchase"})},gc=async te=>{await Ne.collection("purchaseRequests").add(te)},Na=async te=>{await Ne.collection("purchaseOrders").add({...te,status:"Pending Account Manager"})},Po=async(te,xe)=>{await Ne.collection("purchaseOrders").doc(te).update(xe)},Er=async te=>{await Ne.collection("purchaseOrders").doc(te).delete()},_s=async(te,xe)=>{await Ne.collection("purchaseOrders").doc(te).update({status:xe==="Approve"?"Approved":"Rejected"})},Js=async(te,xe)=>{const he=$.find(Ve=>Ve.id===te);if(!he)return;const de=Ne.batch();de.update(Ne.collection("purchaseOrders").doc(te),{status:"Received",grnNumber:xe.grnNumber,grnRemarks:xe.remarks,grnDate:new Date().toISOString()}),he.items.forEach(Ve=>{Ve.inventoryId&&de.update(Ne.collection("inventory").doc(Ve.inventoryId),{quantity:xs.firestore.FieldValue.increment(Ve.quantity)})}),he.originalRequestId&&de.update(Ne.collection("supplyChainRequests").doc(he.originalRequestId),{status:"Pending Store"}),await de.commit()},as=async(te,xe)=>{const he=y.find(de=>`${de.firstName} ${de.lastName}`===xe);if(!he)throw new Error("Employee not found");await Ne.collection("inventory").doc(te).update({status:"In Use",assignedTo:xe,department:he.department,designation:he.designation,issueDate:new Date().toISOString().split("T")[0]})},Kn=async te=>{await Ne.collection("inventory").doc(te).update({status:"In Stock",assignedTo:"",department:"",designation:"",issueDate:""})},Zs=async te=>{await Ne.collection("tasks").add({...te,history:[{action:"Created",by:u||"Unknown",timestamp:new Date().toISOString(),details:`Task created with status ${te.status}`}]})},ci=async(te,xe,he,de)=>{const Ve=new Date().toISOString(),nt={status:xe,history:xs.firestore.FieldValue.arrayUnion({action:he,by:u||"Unknown",timestamp:Ve,details:de?`${he}: ${de}`:`Status changed to ${xe}`})};de&&(xe==="Completed - Pending Review"?(nt.completionRemarks=de,nt.completedDate=Ve):xe==="Reopened"&&(nt.rejectionRemarks=de)),xe==="Closed"&&(nt.completedDate=Ve),await Ne.collection("tasks").doc(te).update(nt)},Ta=async te=>{await Ne.collection("tasks").doc(te).delete()},Fs=async te=>{const xe=JSON.parse(JSON.stringify(te));await Ne.collection("messages").add(xe)},er=async te=>{await Ne.collection("notes").add(te)},an=async te=>{await Ne.collection("notes").doc(te).delete()},Ea=async te=>{const xe=await Ne.collection("users").where("email","==",u==="admin"?"admin":u).get();return xe.empty?{success:!1,message:"User record not found"}:(await Ne.collection("users").doc(xe.docs[0].id).update({password:te,passwordChangeRequired:!1}),r(!1),{success:!0,message:"Password updated"})},qs=hd.useMemo(()=>u==="admin"?["hr","inventory_management","supply_chain","finance","student","website","task_manager"]:!u||!V[u]?[]:Object.keys(V[u]).filter(te=>Object.values(V[u][te]).some(xe=>xe.view)),[u,V]);if(m)return o.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 text-slate-500",children:"Loading ERP System..."});if(!n)return o.jsx(BM,{onLogin:Xt});if(t)return o.jsx(iP,{onUpdatePassword:Ea,onSkip:()=>r(!1)});if(a)switch(a){case"hr":return o.jsx(E6,{onBack:()=>c(null),employees:y,users:E,onAddEmployee:De,onLogout:ie,allPermissions:V,onUserPermissionsChange:Ws,currentUserEmail:u||"",leaveRequests:O,onAddLeaveRequest:li,onLeaveRequestAction:Xs,onResignEmployee:zt,payrollHistory:ae,onRunPayroll:Os,onUpdateEmployee:Tt,attendanceRecords:D,onUploadAttendance:Vs});case"inventory_management":return o.jsx(z6,{onBack:()=>c(null),onLogout:ie,currentUserEmail:u||"",permissions:(ui=V[u||""])==null?void 0:ui.inventory_management,inventory:z,employees:y,labs:G,toners:T,mrfs:N,recipes:ye,onAddNewAsset:Ls,onUpdateAsset:_a,onDeleteAsset:vs,onResignEmployee:()=>{},onAddSystem:Mt,onUpdateSystem:Ht,onDeleteSystem:Rt,onSaveTonerModel:Ct,onDeleteTonerModel:is,onMarkTonerEmpty:()=>{},onMarkTonerFilled:()=>{},onAddNewMRF:Mo,onUpdateMRF:wa,onDeleteMRF:pc,onUpdateKitchenStock:Tr,onCreateSCRequest:Us});case"supply_chain":return o.jsx(W6,{onBack:()=>c(null),onLogout:ie,currentUserEmail:u||"",inventory:z,employees:y,requests:Te,purchaseRequests:Y,purchaseOrders:$,recipes:ye,vendors:qe,onCreateRequest:Us,onActionRequest:dn,onIssueRequest:Gn,onForwardToPurchase:bn,onCreatePurchaseRequest:gc,onCreatePO:Na,onUpdatePO:Po,onDeletePO:Er,onPOAction:_s,onGRN:Js,onAddNewAsset:Ls,onUpdateAsset:_a,onDeleteAsset:vs,onIssueAsset:as,onReturnAsset:Kn});case"task_manager":return o.jsx(sP,{onBack:()=>c(null),onLogout:ie,currentUserEmail:u||"",tasks:ve,employees:y,onCreateTask:Zs,onTaskWorkflowAction:ci,onDeleteTask:Ta,messages:q,onSendMessage:Fs,notes:Ee,onAddNote:er,onDeleteNote:an});default:return o.jsxs("div",{className:"flex h-screen items-center justify-center flex-col gap-4",children:[o.jsx("p",{children:"Module under construction"}),o.jsx("button",{onClick:()=>c(null),className:"text-blue-900 underline",children:"Go Back"})]})}const ws=y.find(te=>te.email===u);return ws&&ws.role==="Employee"&&u!=="admin"?o.jsx(GM,{employee:ws,onModuleSelect:c,onLogout:ie,accessibleModules:qs}):o.jsx(HM,{onModuleSelect:c,onLogout:ie,accessibleModules:u==="admin"?void 0:qs})},sS=document.getElementById("root");if(!sS)throw new Error("Could not find root element to mount to");const oP=qA.createRoot(sS);oP.render(o.jsx(hd.StrictMode,{children:o.jsx(aP,{})}));
